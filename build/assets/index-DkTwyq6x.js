var K4=Object.defineProperty;var Q4=(t,e,n)=>e in t?K4(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Y=(t,e,n)=>(Q4(t,typeof e!="symbol"?e+"":e,n),n);function UD(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var $d=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function VS(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var BD={exports:{}},Jy={},zD={exports:{}},De={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nf=Symbol.for("react.element"),Y4=Symbol.for("react.portal"),X4=Symbol.for("react.fragment"),J4=Symbol.for("react.strict_mode"),Z4=Symbol.for("react.profiler"),ez=Symbol.for("react.provider"),tz=Symbol.for("react.context"),nz=Symbol.for("react.forward_ref"),rz=Symbol.for("react.suspense"),iz=Symbol.for("react.memo"),sz=Symbol.for("react.lazy"),eC=Symbol.iterator;function oz(t){return t===null||typeof t!="object"?null:(t=eC&&t[eC]||t["@@iterator"],typeof t=="function"?t:null)}var WD={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},HD=Object.assign,qD={};function au(t,e,n){this.props=t,this.context=e,this.refs=qD,this.updater=n||WD}au.prototype.isReactComponent={};au.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};au.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function GD(){}GD.prototype=au.prototype;function FS(t,e,n){this.props=t,this.context=e,this.refs=qD,this.updater=n||WD}var jS=FS.prototype=new GD;jS.constructor=FS;HD(jS,au.prototype);jS.isPureReactComponent=!0;var tC=Array.isArray,KD=Object.prototype.hasOwnProperty,$S={current:null},QD={key:!0,ref:!0,__self:!0,__source:!0};function YD(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)KD.call(e,r)&&!QD.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Nf,type:t,key:s,ref:o,props:i,_owner:$S.current}}function az(t,e){return{$$typeof:Nf,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function US(t){return typeof t=="object"&&t!==null&&t.$$typeof===Nf}function lz(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var nC=/\/+/g;function l0(t,e){return typeof t=="object"&&t!==null&&t.key!=null?lz(""+t.key):e.toString(36)}function Mg(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Nf:case Y4:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+l0(o,0):r,tC(i)?(n="",t!=null&&(n=t.replace(nC,"$&/")+"/"),Mg(i,e,n,"",function(c){return c})):i!=null&&(US(i)&&(i=az(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(nC,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",tC(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+l0(s,a);o+=Mg(s,e,n,l,i)}else if(l=oz(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+l0(s,a++),o+=Mg(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Np(t,e,n){if(t==null)return t;var r=[],i=0;return Mg(t,r,"","",function(s){return e.call(n,s,i++)}),r}function cz(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Jn={current:null},Lg={transition:null},uz={ReactCurrentDispatcher:Jn,ReactCurrentBatchConfig:Lg,ReactCurrentOwner:$S};De.Children={map:Np,forEach:function(t,e,n){Np(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Np(t,function(){e++}),e},toArray:function(t){return Np(t,function(e){return e})||[]},only:function(t){if(!US(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};De.Component=au;De.Fragment=X4;De.Profiler=Z4;De.PureComponent=FS;De.StrictMode=J4;De.Suspense=rz;De.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=uz;De.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=HD({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=$S.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)KD.call(e,l)&&!QD.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Nf,type:t.type,key:i,ref:s,props:r,_owner:o}};De.createContext=function(t){return t={$$typeof:tz,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:ez,_context:t},t.Consumer=t};De.createElement=YD;De.createFactory=function(t){var e=YD.bind(null,t);return e.type=t,e};De.createRef=function(){return{current:null}};De.forwardRef=function(t){return{$$typeof:nz,render:t}};De.isValidElement=US;De.lazy=function(t){return{$$typeof:sz,_payload:{_status:-1,_result:t},_init:cz}};De.memo=function(t,e){return{$$typeof:iz,type:t,compare:e===void 0?null:e}};De.startTransition=function(t){var e=Lg.transition;Lg.transition={};try{t()}finally{Lg.transition=e}};De.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};De.useCallback=function(t,e){return Jn.current.useCallback(t,e)};De.useContext=function(t){return Jn.current.useContext(t)};De.useDebugValue=function(){};De.useDeferredValue=function(t){return Jn.current.useDeferredValue(t)};De.useEffect=function(t,e){return Jn.current.useEffect(t,e)};De.useId=function(){return Jn.current.useId()};De.useImperativeHandle=function(t,e,n){return Jn.current.useImperativeHandle(t,e,n)};De.useInsertionEffect=function(t,e){return Jn.current.useInsertionEffect(t,e)};De.useLayoutEffect=function(t,e){return Jn.current.useLayoutEffect(t,e)};De.useMemo=function(t,e){return Jn.current.useMemo(t,e)};De.useReducer=function(t,e,n){return Jn.current.useReducer(t,e,n)};De.useRef=function(t){return Jn.current.useRef(t)};De.useState=function(t){return Jn.current.useState(t)};De.useSyncExternalStore=function(t,e,n){return Jn.current.useSyncExternalStore(t,e,n)};De.useTransition=function(){return Jn.current.useTransition()};De.version="18.2.0";zD.exports=De;var S=zD.exports;const rt=VS(S),Hw=UD({__proto__:null,default:rt},[S]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dz=S,hz=Symbol.for("react.element"),fz=Symbol.for("react.fragment"),pz=Object.prototype.hasOwnProperty,gz=dz.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,mz={key:!0,ref:!0,__self:!0,__source:!0};function XD(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)pz.call(e,r)&&!mz.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:hz,type:t,key:s,ref:o,props:i,_owner:gz.current}}Jy.Fragment=fz;Jy.jsx=XD;Jy.jsxs=XD;BD.exports=Jy;var p=BD.exports,qw={},JD={exports:{}},Pr={},ZD={exports:{}},eO={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(M,U){var j=M.length;M.push(U);e:for(;0<j;){var ie=j-1>>>1,A=M[ie];if(0<i(A,U))M[ie]=U,M[j]=A,j=ie;else break e}}function n(M){return M.length===0?null:M[0]}function r(M){if(M.length===0)return null;var U=M[0],j=M.pop();if(j!==U){M[0]=j;e:for(var ie=0,A=M.length,$=A>>>1;ie<$;){var B=2*(ie+1)-1,ce=M[B],Q=B+1,me=M[Q];if(0>i(ce,j))Q<A&&0>i(me,ce)?(M[ie]=me,M[Q]=j,ie=Q):(M[ie]=ce,M[B]=j,ie=B);else if(Q<A&&0>i(me,j))M[ie]=me,M[Q]=j,ie=Q;else break e}}return U}function i(M,U){var j=M.sortIndex-U.sortIndex;return j!==0?j:M.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,h=3,f=!1,g=!1,m=!1,v=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(M){for(var U=n(c);U!==null;){if(U.callback===null)r(c);else if(U.startTime<=M)r(c),U.sortIndex=U.expirationTime,e(l,U);else break;U=n(c)}}function b(M){if(m=!1,w(M),!g)if(n(l)!==null)g=!0,R(x);else{var U=n(c);U!==null&&V(b,U.startTime-M)}}function x(M,U){g=!1,m&&(m=!1,_(E),E=-1),f=!0;var j=h;try{for(w(U),d=n(l);d!==null&&(!(d.expirationTime>U)||M&&!F());){var ie=d.callback;if(typeof ie=="function"){d.callback=null,h=d.priorityLevel;var A=ie(d.expirationTime<=U);U=t.unstable_now(),typeof A=="function"?d.callback=A:d===n(l)&&r(l),w(U)}else r(l);d=n(l)}if(d!==null)var $=!0;else{var B=n(c);B!==null&&V(b,B.startTime-U),$=!1}return $}finally{d=null,h=j,f=!1}}var T=!1,I=null,E=-1,k=5,D=-1;function F(){return!(t.unstable_now()-D<k)}function K(){if(I!==null){var M=t.unstable_now();D=M;var U=!0;try{U=I(!0,M)}finally{U?X():(T=!1,I=null)}}else T=!1}var X;if(typeof y=="function")X=function(){y(K)};else if(typeof MessageChannel<"u"){var le=new MessageChannel,C=le.port2;le.port1.onmessage=K,X=function(){C.postMessage(null)}}else X=function(){v(K,0)};function R(M){I=M,T||(T=!0,X())}function V(M,U){E=v(function(){M(t.unstable_now())},U)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(M){M.callback=null},t.unstable_continueExecution=function(){g||f||(g=!0,R(x))},t.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<M?Math.floor(1e3/M):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(M){switch(h){case 1:case 2:case 3:var U=3;break;default:U=h}var j=h;h=U;try{return M()}finally{h=j}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(M,U){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var j=h;h=M;try{return U()}finally{h=j}},t.unstable_scheduleCallback=function(M,U,j){var ie=t.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?ie+j:ie):j=ie,M){case 1:var A=-1;break;case 2:A=250;break;case 5:A=1073741823;break;case 4:A=1e4;break;default:A=5e3}return A=j+A,M={id:u++,callback:U,priorityLevel:M,startTime:j,expirationTime:A,sortIndex:-1},j>ie?(M.sortIndex=j,e(c,M),n(l)===null&&M===n(c)&&(m?(_(E),E=-1):m=!0,V(b,j-ie))):(M.sortIndex=A,e(l,M),g||f||(g=!0,R(x))),M},t.unstable_shouldYield=F,t.unstable_wrapCallback=function(M){var U=h;return function(){var j=h;h=U;try{return M.apply(this,arguments)}finally{h=j}}}})(eO);ZD.exports=eO;var yz=ZD.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tO=S,Rr=yz;function q(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var nO=new Set,_h={};function al(t,e){Ic(t,e),Ic(t+"Capture",e)}function Ic(t,e){for(_h[t]=e,t=0;t<e.length;t++)nO.add(e[t])}var ms=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Gw=Object.prototype.hasOwnProperty,_z=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,rC={},iC={};function vz(t){return Gw.call(iC,t)?!0:Gw.call(rC,t)?!1:_z.test(t)?iC[t]=!0:(rC[t]=!0,!1)}function wz(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function bz(t,e,n,r){if(e===null||typeof e>"u"||wz(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Zn(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var In={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){In[t]=new Zn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];In[e]=new Zn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){In[t]=new Zn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){In[t]=new Zn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){In[t]=new Zn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){In[t]=new Zn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){In[t]=new Zn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){In[t]=new Zn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){In[t]=new Zn(t,5,!1,t.toLowerCase(),null,!1,!1)});var BS=/[\-:]([a-z])/g;function zS(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(BS,zS);In[e]=new Zn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(BS,zS);In[e]=new Zn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(BS,zS);In[e]=new Zn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){In[t]=new Zn(t,1,!1,t.toLowerCase(),null,!1,!1)});In.xlinkHref=new Zn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){In[t]=new Zn(t,1,!1,t.toLowerCase(),null,!0,!0)});function WS(t,e,n,r){var i=In.hasOwnProperty(e)?In[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(bz(e,n,i,r)&&(n=null),r||i===null?vz(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Es=tO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Dp=Symbol.for("react.element"),Hl=Symbol.for("react.portal"),ql=Symbol.for("react.fragment"),HS=Symbol.for("react.strict_mode"),Kw=Symbol.for("react.profiler"),rO=Symbol.for("react.provider"),iO=Symbol.for("react.context"),qS=Symbol.for("react.forward_ref"),Qw=Symbol.for("react.suspense"),Yw=Symbol.for("react.suspense_list"),GS=Symbol.for("react.memo"),$s=Symbol.for("react.lazy"),sO=Symbol.for("react.offscreen"),sC=Symbol.iterator;function Lu(t){return t===null||typeof t!="object"?null:(t=sC&&t[sC]||t["@@iterator"],typeof t=="function"?t:null)}var It=Object.assign,c0;function wd(t){if(c0===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);c0=e&&e[1]||""}return`
`+c0+t}var u0=!1;function d0(t,e){if(!t||u0)return"";u0=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{u0=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?wd(t):""}function xz(t){switch(t.tag){case 5:return wd(t.type);case 16:return wd("Lazy");case 13:return wd("Suspense");case 19:return wd("SuspenseList");case 0:case 2:case 15:return t=d0(t.type,!1),t;case 11:return t=d0(t.type.render,!1),t;case 1:return t=d0(t.type,!0),t;default:return""}}function Xw(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ql:return"Fragment";case Hl:return"Portal";case Kw:return"Profiler";case HS:return"StrictMode";case Qw:return"Suspense";case Yw:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case iO:return(t.displayName||"Context")+".Consumer";case rO:return(t._context.displayName||"Context")+".Provider";case qS:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case GS:return e=t.displayName||null,e!==null?e:Xw(t.type)||"Memo";case $s:e=t._payload,t=t._init;try{return Xw(t(e))}catch{}}return null}function Sz(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Xw(e);case 8:return e===HS?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function mo(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function oO(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Ez(t){var e=oO(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Op(t){t._valueTracker||(t._valueTracker=Ez(t))}function aO(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=oO(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function vm(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Jw(t,e){var n=e.checked;return It({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function oC(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=mo(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function lO(t,e){e=e.checked,e!=null&&WS(t,"checked",e,!1)}function Zw(t,e){lO(t,e);var n=mo(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?eb(t,e.type,n):e.hasOwnProperty("defaultValue")&&eb(t,e.type,mo(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function aC(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function eb(t,e,n){(e!=="number"||vm(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var bd=Array.isArray;function lc(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+mo(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function tb(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(q(91));return It({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function lC(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(q(92));if(bd(n)){if(1<n.length)throw Error(q(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:mo(n)}}function cO(t,e){var n=mo(e.value),r=mo(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function cC(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function uO(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function nb(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?uO(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Mp,dO=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Mp=Mp||document.createElement("div"),Mp.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Mp.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function vh(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ud={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Tz=["Webkit","ms","Moz","O"];Object.keys(Ud).forEach(function(t){Tz.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ud[e]=Ud[t]})});function hO(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ud.hasOwnProperty(t)&&Ud[t]?(""+e).trim():e+"px"}function fO(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=hO(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var Iz=It({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function rb(t,e){if(e){if(Iz[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(q(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(q(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(q(61))}if(e.style!=null&&typeof e.style!="object")throw Error(q(62))}}function ib(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var sb=null;function KS(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ob=null,cc=null,uc=null;function uC(t){if(t=Mf(t)){if(typeof ob!="function")throw Error(q(280));var e=t.stateNode;e&&(e=r_(e),ob(t.stateNode,t.type,e))}}function pO(t){cc?uc?uc.push(t):uc=[t]:cc=t}function gO(){if(cc){var t=cc,e=uc;if(uc=cc=null,uC(t),e)for(t=0;t<e.length;t++)uC(e[t])}}function mO(t,e){return t(e)}function yO(){}var h0=!1;function _O(t,e,n){if(h0)return t(e,n);h0=!0;try{return mO(t,e,n)}finally{h0=!1,(cc!==null||uc!==null)&&(yO(),gO())}}function wh(t,e){var n=t.stateNode;if(n===null)return null;var r=r_(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(q(231,e,typeof n));return n}var ab=!1;if(ms)try{var Vu={};Object.defineProperty(Vu,"passive",{get:function(){ab=!0}}),window.addEventListener("test",Vu,Vu),window.removeEventListener("test",Vu,Vu)}catch{ab=!1}function Cz(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var Bd=!1,wm=null,bm=!1,lb=null,Rz={onError:function(t){Bd=!0,wm=t}};function kz(t,e,n,r,i,s,o,a,l){Bd=!1,wm=null,Cz.apply(Rz,arguments)}function Az(t,e,n,r,i,s,o,a,l){if(kz.apply(this,arguments),Bd){if(Bd){var c=wm;Bd=!1,wm=null}else throw Error(q(198));bm||(bm=!0,lb=c)}}function ll(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function vO(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function dC(t){if(ll(t)!==t)throw Error(q(188))}function Pz(t){var e=t.alternate;if(!e){if(e=ll(t),e===null)throw Error(q(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return dC(i),t;if(s===r)return dC(i),e;s=s.sibling}throw Error(q(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(q(189))}}if(n.alternate!==r)throw Error(q(190))}if(n.tag!==3)throw Error(q(188));return n.stateNode.current===n?t:e}function wO(t){return t=Pz(t),t!==null?bO(t):null}function bO(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=bO(t);if(e!==null)return e;t=t.sibling}return null}var xO=Rr.unstable_scheduleCallback,hC=Rr.unstable_cancelCallback,Nz=Rr.unstable_shouldYield,Dz=Rr.unstable_requestPaint,jt=Rr.unstable_now,Oz=Rr.unstable_getCurrentPriorityLevel,QS=Rr.unstable_ImmediatePriority,SO=Rr.unstable_UserBlockingPriority,xm=Rr.unstable_NormalPriority,Mz=Rr.unstable_LowPriority,EO=Rr.unstable_IdlePriority,Zy=null,Li=null;function Lz(t){if(Li&&typeof Li.onCommitFiberRoot=="function")try{Li.onCommitFiberRoot(Zy,t,void 0,(t.current.flags&128)===128)}catch{}}var si=Math.clz32?Math.clz32:jz,Vz=Math.log,Fz=Math.LN2;function jz(t){return t>>>=0,t===0?32:31-(Vz(t)/Fz|0)|0}var Lp=64,Vp=4194304;function xd(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Sm(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=xd(a):(s&=o,s!==0&&(r=xd(s)))}else o=n&~i,o!==0?r=xd(o):s!==0&&(r=xd(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-si(e),i=1<<n,r|=t[n],e&=~i;return r}function $z(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Uz(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-si(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=$z(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function cb(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function TO(){var t=Lp;return Lp<<=1,!(Lp&4194240)&&(Lp=64),t}function f0(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Df(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-si(e),t[e]=n}function Bz(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-si(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function YS(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-si(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Ge=0;function IO(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var CO,XS,RO,kO,AO,ub=!1,Fp=[],no=null,ro=null,io=null,bh=new Map,xh=new Map,zs=[],zz="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function fC(t,e){switch(t){case"focusin":case"focusout":no=null;break;case"dragenter":case"dragleave":ro=null;break;case"mouseover":case"mouseout":io=null;break;case"pointerover":case"pointerout":bh.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":xh.delete(e.pointerId)}}function Fu(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Mf(e),e!==null&&XS(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function Wz(t,e,n,r,i){switch(e){case"focusin":return no=Fu(no,t,e,n,r,i),!0;case"dragenter":return ro=Fu(ro,t,e,n,r,i),!0;case"mouseover":return io=Fu(io,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return bh.set(s,Fu(bh.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,xh.set(s,Fu(xh.get(s)||null,t,e,n,r,i)),!0}return!1}function PO(t){var e=fa(t.target);if(e!==null){var n=ll(e);if(n!==null){if(e=n.tag,e===13){if(e=vO(n),e!==null){t.blockedOn=e,AO(t.priority,function(){RO(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Vg(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=db(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);sb=r,n.target.dispatchEvent(r),sb=null}else return e=Mf(n),e!==null&&XS(e),t.blockedOn=n,!1;e.shift()}return!0}function pC(t,e,n){Vg(t)&&n.delete(e)}function Hz(){ub=!1,no!==null&&Vg(no)&&(no=null),ro!==null&&Vg(ro)&&(ro=null),io!==null&&Vg(io)&&(io=null),bh.forEach(pC),xh.forEach(pC)}function ju(t,e){t.blockedOn===e&&(t.blockedOn=null,ub||(ub=!0,Rr.unstable_scheduleCallback(Rr.unstable_NormalPriority,Hz)))}function Sh(t){function e(i){return ju(i,t)}if(0<Fp.length){ju(Fp[0],t);for(var n=1;n<Fp.length;n++){var r=Fp[n];r.blockedOn===t&&(r.blockedOn=null)}}for(no!==null&&ju(no,t),ro!==null&&ju(ro,t),io!==null&&ju(io,t),bh.forEach(e),xh.forEach(e),n=0;n<zs.length;n++)r=zs[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<zs.length&&(n=zs[0],n.blockedOn===null);)PO(n),n.blockedOn===null&&zs.shift()}var dc=Es.ReactCurrentBatchConfig,Em=!0;function qz(t,e,n,r){var i=Ge,s=dc.transition;dc.transition=null;try{Ge=1,JS(t,e,n,r)}finally{Ge=i,dc.transition=s}}function Gz(t,e,n,r){var i=Ge,s=dc.transition;dc.transition=null;try{Ge=4,JS(t,e,n,r)}finally{Ge=i,dc.transition=s}}function JS(t,e,n,r){if(Em){var i=db(t,e,n,r);if(i===null)S0(t,e,r,Tm,n),fC(t,r);else if(Wz(i,t,e,n,r))r.stopPropagation();else if(fC(t,r),e&4&&-1<zz.indexOf(t)){for(;i!==null;){var s=Mf(i);if(s!==null&&CO(s),s=db(t,e,n,r),s===null&&S0(t,e,r,Tm,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else S0(t,e,r,null,n)}}var Tm=null;function db(t,e,n,r){if(Tm=null,t=KS(r),t=fa(t),t!==null)if(e=ll(t),e===null)t=null;else if(n=e.tag,n===13){if(t=vO(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Tm=t,null}function NO(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Oz()){case QS:return 1;case SO:return 4;case xm:case Mz:return 16;case EO:return 536870912;default:return 16}default:return 16}}var Gs=null,ZS=null,Fg=null;function DO(){if(Fg)return Fg;var t,e=ZS,n=e.length,r,i="value"in Gs?Gs.value:Gs.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Fg=i.slice(t,1<r?1-r:void 0)}function jg(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function jp(){return!0}function gC(){return!1}function Nr(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?jp:gC,this.isPropagationStopped=gC,this}return It(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=jp)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=jp)},persist:function(){},isPersistent:jp}),e}var lu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},eE=Nr(lu),Of=It({},lu,{view:0,detail:0}),Kz=Nr(Of),p0,g0,$u,e_=It({},Of,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:tE,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==$u&&($u&&t.type==="mousemove"?(p0=t.screenX-$u.screenX,g0=t.screenY-$u.screenY):g0=p0=0,$u=t),p0)},movementY:function(t){return"movementY"in t?t.movementY:g0}}),mC=Nr(e_),Qz=It({},e_,{dataTransfer:0}),Yz=Nr(Qz),Xz=It({},Of,{relatedTarget:0}),m0=Nr(Xz),Jz=It({},lu,{animationName:0,elapsedTime:0,pseudoElement:0}),Zz=Nr(Jz),e3=It({},lu,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),t3=Nr(e3),n3=It({},lu,{data:0}),yC=Nr(n3),r3={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},i3={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},s3={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function o3(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=s3[t])?!!e[t]:!1}function tE(){return o3}var a3=It({},Of,{key:function(t){if(t.key){var e=r3[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=jg(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?i3[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:tE,charCode:function(t){return t.type==="keypress"?jg(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?jg(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),l3=Nr(a3),c3=It({},e_,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_C=Nr(c3),u3=It({},Of,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:tE}),d3=Nr(u3),h3=It({},lu,{propertyName:0,elapsedTime:0,pseudoElement:0}),f3=Nr(h3),p3=It({},e_,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),g3=Nr(p3),m3=[9,13,27,32],nE=ms&&"CompositionEvent"in window,zd=null;ms&&"documentMode"in document&&(zd=document.documentMode);var y3=ms&&"TextEvent"in window&&!zd,OO=ms&&(!nE||zd&&8<zd&&11>=zd),vC=" ",wC=!1;function MO(t,e){switch(t){case"keyup":return m3.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function LO(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Gl=!1;function _3(t,e){switch(t){case"compositionend":return LO(e);case"keypress":return e.which!==32?null:(wC=!0,vC);case"textInput":return t=e.data,t===vC&&wC?null:t;default:return null}}function v3(t,e){if(Gl)return t==="compositionend"||!nE&&MO(t,e)?(t=DO(),Fg=ZS=Gs=null,Gl=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return OO&&e.locale!=="ko"?null:e.data;default:return null}}var w3={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bC(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!w3[t.type]:e==="textarea"}function VO(t,e,n,r){pO(r),e=Im(e,"onChange"),0<e.length&&(n=new eE("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Wd=null,Eh=null;function b3(t){KO(t,0)}function t_(t){var e=Yl(t);if(aO(e))return t}function x3(t,e){if(t==="change")return e}var FO=!1;if(ms){var y0;if(ms){var _0="oninput"in document;if(!_0){var xC=document.createElement("div");xC.setAttribute("oninput","return;"),_0=typeof xC.oninput=="function"}y0=_0}else y0=!1;FO=y0&&(!document.documentMode||9<document.documentMode)}function SC(){Wd&&(Wd.detachEvent("onpropertychange",jO),Eh=Wd=null)}function jO(t){if(t.propertyName==="value"&&t_(Eh)){var e=[];VO(e,Eh,t,KS(t)),_O(b3,e)}}function S3(t,e,n){t==="focusin"?(SC(),Wd=e,Eh=n,Wd.attachEvent("onpropertychange",jO)):t==="focusout"&&SC()}function E3(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return t_(Eh)}function T3(t,e){if(t==="click")return t_(e)}function I3(t,e){if(t==="input"||t==="change")return t_(e)}function C3(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ui=typeof Object.is=="function"?Object.is:C3;function Th(t,e){if(ui(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Gw.call(e,i)||!ui(t[i],e[i]))return!1}return!0}function EC(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function TC(t,e){var n=EC(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=EC(n)}}function $O(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?$O(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function UO(){for(var t=window,e=vm();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=vm(t.document)}return e}function rE(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function R3(t){var e=UO(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&$O(n.ownerDocument.documentElement,n)){if(r!==null&&rE(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=TC(n,s);var o=TC(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var k3=ms&&"documentMode"in document&&11>=document.documentMode,Kl=null,hb=null,Hd=null,fb=!1;function IC(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;fb||Kl==null||Kl!==vm(r)||(r=Kl,"selectionStart"in r&&rE(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Hd&&Th(Hd,r)||(Hd=r,r=Im(hb,"onSelect"),0<r.length&&(e=new eE("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Kl)))}function $p(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ql={animationend:$p("Animation","AnimationEnd"),animationiteration:$p("Animation","AnimationIteration"),animationstart:$p("Animation","AnimationStart"),transitionend:$p("Transition","TransitionEnd")},v0={},BO={};ms&&(BO=document.createElement("div").style,"AnimationEvent"in window||(delete Ql.animationend.animation,delete Ql.animationiteration.animation,delete Ql.animationstart.animation),"TransitionEvent"in window||delete Ql.transitionend.transition);function n_(t){if(v0[t])return v0[t];if(!Ql[t])return t;var e=Ql[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in BO)return v0[t]=e[n];return t}var zO=n_("animationend"),WO=n_("animationiteration"),HO=n_("animationstart"),qO=n_("transitionend"),GO=new Map,CC="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Oo(t,e){GO.set(t,e),al(e,[t])}for(var w0=0;w0<CC.length;w0++){var b0=CC[w0],A3=b0.toLowerCase(),P3=b0[0].toUpperCase()+b0.slice(1);Oo(A3,"on"+P3)}Oo(zO,"onAnimationEnd");Oo(WO,"onAnimationIteration");Oo(HO,"onAnimationStart");Oo("dblclick","onDoubleClick");Oo("focusin","onFocus");Oo("focusout","onBlur");Oo(qO,"onTransitionEnd");Ic("onMouseEnter",["mouseout","mouseover"]);Ic("onMouseLeave",["mouseout","mouseover"]);Ic("onPointerEnter",["pointerout","pointerover"]);Ic("onPointerLeave",["pointerout","pointerover"]);al("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));al("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));al("onBeforeInput",["compositionend","keypress","textInput","paste"]);al("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));al("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));al("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Sd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),N3=new Set("cancel close invalid load scroll toggle".split(" ").concat(Sd));function RC(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Az(r,e,void 0,t),t.currentTarget=null}function KO(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;RC(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;RC(i,a,c),s=l}}}if(bm)throw t=lb,bm=!1,lb=null,t}function st(t,e){var n=e[_b];n===void 0&&(n=e[_b]=new Set);var r=t+"__bubble";n.has(r)||(QO(e,t,2,!1),n.add(r))}function x0(t,e,n){var r=0;e&&(r|=4),QO(n,t,r,e)}var Up="_reactListening"+Math.random().toString(36).slice(2);function Ih(t){if(!t[Up]){t[Up]=!0,nO.forEach(function(n){n!=="selectionchange"&&(N3.has(n)||x0(n,!1,t),x0(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Up]||(e[Up]=!0,x0("selectionchange",!1,e))}}function QO(t,e,n,r){switch(NO(e)){case 1:var i=qz;break;case 4:i=Gz;break;default:i=JS}n=i.bind(null,e,n,t),i=void 0,!ab||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function S0(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=fa(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}_O(function(){var c=s,u=KS(n),d=[];e:{var h=GO.get(t);if(h!==void 0){var f=eE,g=t;switch(t){case"keypress":if(jg(n)===0)break e;case"keydown":case"keyup":f=l3;break;case"focusin":g="focus",f=m0;break;case"focusout":g="blur",f=m0;break;case"beforeblur":case"afterblur":f=m0;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=mC;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=Yz;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=d3;break;case zO:case WO:case HO:f=Zz;break;case qO:f=f3;break;case"scroll":f=Kz;break;case"wheel":f=g3;break;case"copy":case"cut":case"paste":f=t3;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=_C}var m=(e&4)!==0,v=!m&&t==="scroll",_=m?h!==null?h+"Capture":null:h;m=[];for(var y=c,w;y!==null;){w=y;var b=w.stateNode;if(w.tag===5&&b!==null&&(w=b,_!==null&&(b=wh(y,_),b!=null&&m.push(Ch(y,b,w)))),v)break;y=y.return}0<m.length&&(h=new f(h,g,null,n,u),d.push({event:h,listeners:m}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",h&&n!==sb&&(g=n.relatedTarget||n.fromElement)&&(fa(g)||g[ys]))break e;if((f||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,f?(g=n.relatedTarget||n.toElement,f=c,g=g?fa(g):null,g!==null&&(v=ll(g),g!==v||g.tag!==5&&g.tag!==6)&&(g=null)):(f=null,g=c),f!==g)){if(m=mC,b="onMouseLeave",_="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(m=_C,b="onPointerLeave",_="onPointerEnter",y="pointer"),v=f==null?h:Yl(f),w=g==null?h:Yl(g),h=new m(b,y+"leave",f,n,u),h.target=v,h.relatedTarget=w,b=null,fa(u)===c&&(m=new m(_,y+"enter",g,n,u),m.target=w,m.relatedTarget=v,b=m),v=b,f&&g)t:{for(m=f,_=g,y=0,w=m;w;w=Il(w))y++;for(w=0,b=_;b;b=Il(b))w++;for(;0<y-w;)m=Il(m),y--;for(;0<w-y;)_=Il(_),w--;for(;y--;){if(m===_||_!==null&&m===_.alternate)break t;m=Il(m),_=Il(_)}m=null}else m=null;f!==null&&kC(d,h,f,m,!1),g!==null&&v!==null&&kC(d,v,g,m,!0)}}e:{if(h=c?Yl(c):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var x=x3;else if(bC(h))if(FO)x=I3;else{x=E3;var T=S3}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(x=T3);if(x&&(x=x(t,c))){VO(d,x,n,u);break e}T&&T(t,h,c),t==="focusout"&&(T=h._wrapperState)&&T.controlled&&h.type==="number"&&eb(h,"number",h.value)}switch(T=c?Yl(c):window,t){case"focusin":(bC(T)||T.contentEditable==="true")&&(Kl=T,hb=c,Hd=null);break;case"focusout":Hd=hb=Kl=null;break;case"mousedown":fb=!0;break;case"contextmenu":case"mouseup":case"dragend":fb=!1,IC(d,n,u);break;case"selectionchange":if(k3)break;case"keydown":case"keyup":IC(d,n,u)}var I;if(nE)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Gl?MO(t,n)&&(E="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(OO&&n.locale!=="ko"&&(Gl||E!=="onCompositionStart"?E==="onCompositionEnd"&&Gl&&(I=DO()):(Gs=u,ZS="value"in Gs?Gs.value:Gs.textContent,Gl=!0)),T=Im(c,E),0<T.length&&(E=new yC(E,t,null,n,u),d.push({event:E,listeners:T}),I?E.data=I:(I=LO(n),I!==null&&(E.data=I)))),(I=y3?_3(t,n):v3(t,n))&&(c=Im(c,"onBeforeInput"),0<c.length&&(u=new yC("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=I))}KO(d,e)})}function Ch(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Im(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=wh(t,n),s!=null&&r.unshift(Ch(t,s,i)),s=wh(t,e),s!=null&&r.push(Ch(t,s,i))),t=t.return}return r}function Il(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function kC(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=wh(n,s),l!=null&&o.unshift(Ch(n,l,a))):i||(l=wh(n,s),l!=null&&o.push(Ch(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var D3=/\r\n?/g,O3=/\u0000|\uFFFD/g;function AC(t){return(typeof t=="string"?t:""+t).replace(D3,`
`).replace(O3,"")}function Bp(t,e,n){if(e=AC(e),AC(t)!==e&&n)throw Error(q(425))}function Cm(){}var pb=null,gb=null;function mb(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var yb=typeof setTimeout=="function"?setTimeout:void 0,M3=typeof clearTimeout=="function"?clearTimeout:void 0,PC=typeof Promise=="function"?Promise:void 0,L3=typeof queueMicrotask=="function"?queueMicrotask:typeof PC<"u"?function(t){return PC.resolve(null).then(t).catch(V3)}:yb;function V3(t){setTimeout(function(){throw t})}function E0(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Sh(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Sh(e)}function so(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function NC(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var cu=Math.random().toString(36).slice(2),Si="__reactFiber$"+cu,Rh="__reactProps$"+cu,ys="__reactContainer$"+cu,_b="__reactEvents$"+cu,F3="__reactListeners$"+cu,j3="__reactHandles$"+cu;function fa(t){var e=t[Si];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ys]||n[Si]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=NC(t);t!==null;){if(n=t[Si])return n;t=NC(t)}return e}t=n,n=t.parentNode}return null}function Mf(t){return t=t[Si]||t[ys],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Yl(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(q(33))}function r_(t){return t[Rh]||null}var vb=[],Xl=-1;function Mo(t){return{current:t}}function ht(t){0>Xl||(t.current=vb[Xl],vb[Xl]=null,Xl--)}function nt(t,e){Xl++,vb[Xl]=t.current,t.current=e}var yo={},$n=Mo(yo),hr=Mo(!1),Da=yo;function Cc(t,e){var n=t.type.contextTypes;if(!n)return yo;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function fr(t){return t=t.childContextTypes,t!=null}function Rm(){ht(hr),ht($n)}function DC(t,e,n){if($n.current!==yo)throw Error(q(168));nt($n,e),nt(hr,n)}function YO(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(q(108,Sz(t)||"Unknown",i));return It({},n,r)}function km(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||yo,Da=$n.current,nt($n,t),nt(hr,hr.current),!0}function OC(t,e,n){var r=t.stateNode;if(!r)throw Error(q(169));n?(t=YO(t,e,Da),r.__reactInternalMemoizedMergedChildContext=t,ht(hr),ht($n),nt($n,t)):ht(hr),nt(hr,n)}var Ji=null,i_=!1,T0=!1;function XO(t){Ji===null?Ji=[t]:Ji.push(t)}function $3(t){i_=!0,XO(t)}function Lo(){if(!T0&&Ji!==null){T0=!0;var t=0,e=Ge;try{var n=Ji;for(Ge=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Ji=null,i_=!1}catch(i){throw Ji!==null&&(Ji=Ji.slice(t+1)),xO(QS,Lo),i}finally{Ge=e,T0=!1}}return null}var Jl=[],Zl=0,Am=null,Pm=0,Vr=[],Fr=0,Oa=null,ts=1,ns="";function ea(t,e){Jl[Zl++]=Pm,Jl[Zl++]=Am,Am=t,Pm=e}function JO(t,e,n){Vr[Fr++]=ts,Vr[Fr++]=ns,Vr[Fr++]=Oa,Oa=t;var r=ts;t=ns;var i=32-si(r)-1;r&=~(1<<i),n+=1;var s=32-si(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,ts=1<<32-si(e)+i|n<<i|r,ns=s+t}else ts=1<<s|n<<i|r,ns=t}function iE(t){t.return!==null&&(ea(t,1),JO(t,1,0))}function sE(t){for(;t===Am;)Am=Jl[--Zl],Jl[Zl]=null,Pm=Jl[--Zl],Jl[Zl]=null;for(;t===Oa;)Oa=Vr[--Fr],Vr[Fr]=null,ns=Vr[--Fr],Vr[Fr]=null,ts=Vr[--Fr],Vr[Fr]=null}var Tr=null,Sr=null,_t=!1,ti=null;function ZO(t,e){var n=$r(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function MC(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Tr=t,Sr=so(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Tr=t,Sr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Oa!==null?{id:ts,overflow:ns}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=$r(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Tr=t,Sr=null,!0):!1;default:return!1}}function wb(t){return(t.mode&1)!==0&&(t.flags&128)===0}function bb(t){if(_t){var e=Sr;if(e){var n=e;if(!MC(t,e)){if(wb(t))throw Error(q(418));e=so(n.nextSibling);var r=Tr;e&&MC(t,e)?ZO(r,n):(t.flags=t.flags&-4097|2,_t=!1,Tr=t)}}else{if(wb(t))throw Error(q(418));t.flags=t.flags&-4097|2,_t=!1,Tr=t}}}function LC(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Tr=t}function zp(t){if(t!==Tr)return!1;if(!_t)return LC(t),_t=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!mb(t.type,t.memoizedProps)),e&&(e=Sr)){if(wb(t))throw eM(),Error(q(418));for(;e;)ZO(t,e),e=so(e.nextSibling)}if(LC(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(q(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Sr=so(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Sr=null}}else Sr=Tr?so(t.stateNode.nextSibling):null;return!0}function eM(){for(var t=Sr;t;)t=so(t.nextSibling)}function Rc(){Sr=Tr=null,_t=!1}function oE(t){ti===null?ti=[t]:ti.push(t)}var U3=Es.ReactCurrentBatchConfig;function Zr(t,e){if(t&&t.defaultProps){e=It({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var Nm=Mo(null),Dm=null,ec=null,aE=null;function lE(){aE=ec=Dm=null}function cE(t){var e=Nm.current;ht(Nm),t._currentValue=e}function xb(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function hc(t,e){Dm=t,aE=ec=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ar=!0),t.firstContext=null)}function qr(t){var e=t._currentValue;if(aE!==t)if(t={context:t,memoizedValue:e,next:null},ec===null){if(Dm===null)throw Error(q(308));ec=t,Dm.dependencies={lanes:0,firstContext:t}}else ec=ec.next=t;return e}var pa=null;function uE(t){pa===null?pa=[t]:pa.push(t)}function tM(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,uE(e)):(n.next=i.next,i.next=n),e.interleaved=n,_s(t,r)}function _s(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Us=!1;function dE(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function nM(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function us(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function oo(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Fe&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,_s(t,n)}return i=r.interleaved,i===null?(e.next=e,uE(r)):(e.next=i.next,i.next=e),r.interleaved=e,_s(t,n)}function $g(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,YS(t,n)}}function VC(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Om(t,e,n,r){var i=t.updateQueue;Us=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;o=0,u=c=l=null,a=s;do{var h=a.lane,f=a.eventTime;if((r&h)===h){u!==null&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=t,m=a;switch(h=e,f=n,m.tag){case 1:if(g=m.payload,typeof g=="function"){d=g.call(f,d,h);break e}d=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=m.payload,h=typeof g=="function"?g.call(f,d,h):g,h==null)break e;d=It({},d,h);break e;case 2:Us=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=f,l=d):u=u.next=f,o|=h;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;h=a,a=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(u===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);La|=o,t.lanes=o,t.memoizedState=d}}function FC(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(q(191,i));i.call(r)}}}var rM=new tO.Component().refs;function Sb(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:It({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var s_={isMounted:function(t){return(t=t._reactInternals)?ll(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Gn(),i=lo(t),s=us(r,i);s.payload=e,n!=null&&(s.callback=n),e=oo(t,s,i),e!==null&&(oi(e,t,i,r),$g(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Gn(),i=lo(t),s=us(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=oo(t,s,i),e!==null&&(oi(e,t,i,r),$g(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Gn(),r=lo(t),i=us(n,r);i.tag=2,e!=null&&(i.callback=e),e=oo(t,i,r),e!==null&&(oi(e,t,r,n),$g(e,t,r))}};function jC(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Th(n,r)||!Th(i,s):!0}function iM(t,e,n){var r=!1,i=yo,s=e.contextType;return typeof s=="object"&&s!==null?s=qr(s):(i=fr(e)?Da:$n.current,r=e.contextTypes,s=(r=r!=null)?Cc(t,i):yo),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=s_,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function $C(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&s_.enqueueReplaceState(e,e.state,null)}function Eb(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=rM,dE(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=qr(s):(s=fr(e)?Da:$n.current,i.context=Cc(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Sb(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&s_.enqueueReplaceState(i,i.state,null),Om(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Uu(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(q(309));var r=n.stateNode}if(!r)throw Error(q(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===rM&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(q(284));if(!n._owner)throw Error(q(290,t))}return t}function Wp(t,e){throw t=Object.prototype.toString.call(e),Error(q(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function UC(t){var e=t._init;return e(t._payload)}function sM(t){function e(_,y){if(t){var w=_.deletions;w===null?(_.deletions=[y],_.flags|=16):w.push(y)}}function n(_,y){if(!t)return null;for(;y!==null;)e(_,y),y=y.sibling;return null}function r(_,y){for(_=new Map;y!==null;)y.key!==null?_.set(y.key,y):_.set(y.index,y),y=y.sibling;return _}function i(_,y){return _=co(_,y),_.index=0,_.sibling=null,_}function s(_,y,w){return _.index=w,t?(w=_.alternate,w!==null?(w=w.index,w<y?(_.flags|=2,y):w):(_.flags|=2,y)):(_.flags|=1048576,y)}function o(_){return t&&_.alternate===null&&(_.flags|=2),_}function a(_,y,w,b){return y===null||y.tag!==6?(y=N0(w,_.mode,b),y.return=_,y):(y=i(y,w),y.return=_,y)}function l(_,y,w,b){var x=w.type;return x===ql?u(_,y,w.props.children,b,w.key):y!==null&&(y.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===$s&&UC(x)===y.type)?(b=i(y,w.props),b.ref=Uu(_,y,w),b.return=_,b):(b=qg(w.type,w.key,w.props,null,_.mode,b),b.ref=Uu(_,y,w),b.return=_,b)}function c(_,y,w,b){return y===null||y.tag!==4||y.stateNode.containerInfo!==w.containerInfo||y.stateNode.implementation!==w.implementation?(y=D0(w,_.mode,b),y.return=_,y):(y=i(y,w.children||[]),y.return=_,y)}function u(_,y,w,b,x){return y===null||y.tag!==7?(y=Ea(w,_.mode,b,x),y.return=_,y):(y=i(y,w),y.return=_,y)}function d(_,y,w){if(typeof y=="string"&&y!==""||typeof y=="number")return y=N0(""+y,_.mode,w),y.return=_,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Dp:return w=qg(y.type,y.key,y.props,null,_.mode,w),w.ref=Uu(_,null,y),w.return=_,w;case Hl:return y=D0(y,_.mode,w),y.return=_,y;case $s:var b=y._init;return d(_,b(y._payload),w)}if(bd(y)||Lu(y))return y=Ea(y,_.mode,w,null),y.return=_,y;Wp(_,y)}return null}function h(_,y,w,b){var x=y!==null?y.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return x!==null?null:a(_,y,""+w,b);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Dp:return w.key===x?l(_,y,w,b):null;case Hl:return w.key===x?c(_,y,w,b):null;case $s:return x=w._init,h(_,y,x(w._payload),b)}if(bd(w)||Lu(w))return x!==null?null:u(_,y,w,b,null);Wp(_,w)}return null}function f(_,y,w,b,x){if(typeof b=="string"&&b!==""||typeof b=="number")return _=_.get(w)||null,a(y,_,""+b,x);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Dp:return _=_.get(b.key===null?w:b.key)||null,l(y,_,b,x);case Hl:return _=_.get(b.key===null?w:b.key)||null,c(y,_,b,x);case $s:var T=b._init;return f(_,y,w,T(b._payload),x)}if(bd(b)||Lu(b))return _=_.get(w)||null,u(y,_,b,x,null);Wp(y,b)}return null}function g(_,y,w,b){for(var x=null,T=null,I=y,E=y=0,k=null;I!==null&&E<w.length;E++){I.index>E?(k=I,I=null):k=I.sibling;var D=h(_,I,w[E],b);if(D===null){I===null&&(I=k);break}t&&I&&D.alternate===null&&e(_,I),y=s(D,y,E),T===null?x=D:T.sibling=D,T=D,I=k}if(E===w.length)return n(_,I),_t&&ea(_,E),x;if(I===null){for(;E<w.length;E++)I=d(_,w[E],b),I!==null&&(y=s(I,y,E),T===null?x=I:T.sibling=I,T=I);return _t&&ea(_,E),x}for(I=r(_,I);E<w.length;E++)k=f(I,_,E,w[E],b),k!==null&&(t&&k.alternate!==null&&I.delete(k.key===null?E:k.key),y=s(k,y,E),T===null?x=k:T.sibling=k,T=k);return t&&I.forEach(function(F){return e(_,F)}),_t&&ea(_,E),x}function m(_,y,w,b){var x=Lu(w);if(typeof x!="function")throw Error(q(150));if(w=x.call(w),w==null)throw Error(q(151));for(var T=x=null,I=y,E=y=0,k=null,D=w.next();I!==null&&!D.done;E++,D=w.next()){I.index>E?(k=I,I=null):k=I.sibling;var F=h(_,I,D.value,b);if(F===null){I===null&&(I=k);break}t&&I&&F.alternate===null&&e(_,I),y=s(F,y,E),T===null?x=F:T.sibling=F,T=F,I=k}if(D.done)return n(_,I),_t&&ea(_,E),x;if(I===null){for(;!D.done;E++,D=w.next())D=d(_,D.value,b),D!==null&&(y=s(D,y,E),T===null?x=D:T.sibling=D,T=D);return _t&&ea(_,E),x}for(I=r(_,I);!D.done;E++,D=w.next())D=f(I,_,E,D.value,b),D!==null&&(t&&D.alternate!==null&&I.delete(D.key===null?E:D.key),y=s(D,y,E),T===null?x=D:T.sibling=D,T=D);return t&&I.forEach(function(K){return e(_,K)}),_t&&ea(_,E),x}function v(_,y,w,b){if(typeof w=="object"&&w!==null&&w.type===ql&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Dp:e:{for(var x=w.key,T=y;T!==null;){if(T.key===x){if(x=w.type,x===ql){if(T.tag===7){n(_,T.sibling),y=i(T,w.props.children),y.return=_,_=y;break e}}else if(T.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===$s&&UC(x)===T.type){n(_,T.sibling),y=i(T,w.props),y.ref=Uu(_,T,w),y.return=_,_=y;break e}n(_,T);break}else e(_,T);T=T.sibling}w.type===ql?(y=Ea(w.props.children,_.mode,b,w.key),y.return=_,_=y):(b=qg(w.type,w.key,w.props,null,_.mode,b),b.ref=Uu(_,y,w),b.return=_,_=b)}return o(_);case Hl:e:{for(T=w.key;y!==null;){if(y.key===T)if(y.tag===4&&y.stateNode.containerInfo===w.containerInfo&&y.stateNode.implementation===w.implementation){n(_,y.sibling),y=i(y,w.children||[]),y.return=_,_=y;break e}else{n(_,y);break}else e(_,y);y=y.sibling}y=D0(w,_.mode,b),y.return=_,_=y}return o(_);case $s:return T=w._init,v(_,y,T(w._payload),b)}if(bd(w))return g(_,y,w,b);if(Lu(w))return m(_,y,w,b);Wp(_,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,y!==null&&y.tag===6?(n(_,y.sibling),y=i(y,w),y.return=_,_=y):(n(_,y),y=N0(w,_.mode,b),y.return=_,_=y),o(_)):n(_,y)}return v}var kc=sM(!0),oM=sM(!1),Lf={},Vi=Mo(Lf),kh=Mo(Lf),Ah=Mo(Lf);function ga(t){if(t===Lf)throw Error(q(174));return t}function hE(t,e){switch(nt(Ah,e),nt(kh,t),nt(Vi,Lf),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:nb(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=nb(e,t)}ht(Vi),nt(Vi,e)}function Ac(){ht(Vi),ht(kh),ht(Ah)}function aM(t){ga(Ah.current);var e=ga(Vi.current),n=nb(e,t.type);e!==n&&(nt(kh,t),nt(Vi,n))}function fE(t){kh.current===t&&(ht(Vi),ht(kh))}var St=Mo(0);function Mm(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var I0=[];function pE(){for(var t=0;t<I0.length;t++)I0[t]._workInProgressVersionPrimary=null;I0.length=0}var Ug=Es.ReactCurrentDispatcher,C0=Es.ReactCurrentBatchConfig,Ma=0,Et=null,Yt=null,sn=null,Lm=!1,qd=!1,Ph=0,B3=0;function Rn(){throw Error(q(321))}function gE(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ui(t[n],e[n]))return!1;return!0}function mE(t,e,n,r,i,s){if(Ma=s,Et=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ug.current=t===null||t.memoizedState===null?q3:G3,t=n(r,i),qd){s=0;do{if(qd=!1,Ph=0,25<=s)throw Error(q(301));s+=1,sn=Yt=null,e.updateQueue=null,Ug.current=K3,t=n(r,i)}while(qd)}if(Ug.current=Vm,e=Yt!==null&&Yt.next!==null,Ma=0,sn=Yt=Et=null,Lm=!1,e)throw Error(q(300));return t}function yE(){var t=Ph!==0;return Ph=0,t}function vi(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return sn===null?Et.memoizedState=sn=t:sn=sn.next=t,sn}function Gr(){if(Yt===null){var t=Et.alternate;t=t!==null?t.memoizedState:null}else t=Yt.next;var e=sn===null?Et.memoizedState:sn.next;if(e!==null)sn=e,Yt=t;else{if(t===null)throw Error(q(310));Yt=t,t={memoizedState:Yt.memoizedState,baseState:Yt.baseState,baseQueue:Yt.baseQueue,queue:Yt.queue,next:null},sn===null?Et.memoizedState=sn=t:sn=sn.next=t}return sn}function Nh(t,e){return typeof e=="function"?e(t):e}function R0(t){var e=Gr(),n=e.queue;if(n===null)throw Error(q(311));n.lastRenderedReducer=t;var r=Yt,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((Ma&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,Et.lanes|=u,La|=u}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,ui(r,e.memoizedState)||(ar=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Et.lanes|=s,La|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function k0(t){var e=Gr(),n=e.queue;if(n===null)throw Error(q(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);ui(s,e.memoizedState)||(ar=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function lM(){}function cM(t,e){var n=Et,r=Gr(),i=e(),s=!ui(r.memoizedState,i);if(s&&(r.memoizedState=i,ar=!0),r=r.queue,_E(hM.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||sn!==null&&sn.memoizedState.tag&1){if(n.flags|=2048,Dh(9,dM.bind(null,n,r,i,e),void 0,null),un===null)throw Error(q(349));Ma&30||uM(n,e,i)}return i}function uM(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Et.updateQueue,e===null?(e={lastEffect:null,stores:null},Et.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function dM(t,e,n,r){e.value=n,e.getSnapshot=r,fM(e)&&pM(t)}function hM(t,e,n){return n(function(){fM(e)&&pM(t)})}function fM(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ui(t,n)}catch{return!0}}function pM(t){var e=_s(t,1);e!==null&&oi(e,t,1,-1)}function BC(t){var e=vi();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Nh,lastRenderedState:t},e.queue=t,t=t.dispatch=H3.bind(null,Et,t),[e.memoizedState,t]}function Dh(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Et.updateQueue,e===null?(e={lastEffect:null,stores:null},Et.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function gM(){return Gr().memoizedState}function Bg(t,e,n,r){var i=vi();Et.flags|=t,i.memoizedState=Dh(1|e,n,void 0,r===void 0?null:r)}function o_(t,e,n,r){var i=Gr();r=r===void 0?null:r;var s=void 0;if(Yt!==null){var o=Yt.memoizedState;if(s=o.destroy,r!==null&&gE(r,o.deps)){i.memoizedState=Dh(e,n,s,r);return}}Et.flags|=t,i.memoizedState=Dh(1|e,n,s,r)}function zC(t,e){return Bg(8390656,8,t,e)}function _E(t,e){return o_(2048,8,t,e)}function mM(t,e){return o_(4,2,t,e)}function yM(t,e){return o_(4,4,t,e)}function _M(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function vM(t,e,n){return n=n!=null?n.concat([t]):null,o_(4,4,_M.bind(null,e,t),n)}function vE(){}function wM(t,e){var n=Gr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&gE(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function bM(t,e){var n=Gr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&gE(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function xM(t,e,n){return Ma&21?(ui(n,e)||(n=TO(),Et.lanes|=n,La|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ar=!0),t.memoizedState=n)}function z3(t,e){var n=Ge;Ge=n!==0&&4>n?n:4,t(!0);var r=C0.transition;C0.transition={};try{t(!1),e()}finally{Ge=n,C0.transition=r}}function SM(){return Gr().memoizedState}function W3(t,e,n){var r=lo(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},EM(t))TM(e,n);else if(n=tM(t,e,n,r),n!==null){var i=Gn();oi(n,t,r,i),IM(n,e,r)}}function H3(t,e,n){var r=lo(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(EM(t))TM(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,ui(a,o)){var l=e.interleaved;l===null?(i.next=i,uE(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=tM(t,e,i,r),n!==null&&(i=Gn(),oi(n,t,r,i),IM(n,e,r))}}function EM(t){var e=t.alternate;return t===Et||e!==null&&e===Et}function TM(t,e){qd=Lm=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function IM(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,YS(t,n)}}var Vm={readContext:qr,useCallback:Rn,useContext:Rn,useEffect:Rn,useImperativeHandle:Rn,useInsertionEffect:Rn,useLayoutEffect:Rn,useMemo:Rn,useReducer:Rn,useRef:Rn,useState:Rn,useDebugValue:Rn,useDeferredValue:Rn,useTransition:Rn,useMutableSource:Rn,useSyncExternalStore:Rn,useId:Rn,unstable_isNewReconciler:!1},q3={readContext:qr,useCallback:function(t,e){return vi().memoizedState=[t,e===void 0?null:e],t},useContext:qr,useEffect:zC,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Bg(4194308,4,_M.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Bg(4194308,4,t,e)},useInsertionEffect:function(t,e){return Bg(4,2,t,e)},useMemo:function(t,e){var n=vi();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=vi();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=W3.bind(null,Et,t),[r.memoizedState,t]},useRef:function(t){var e=vi();return t={current:t},e.memoizedState=t},useState:BC,useDebugValue:vE,useDeferredValue:function(t){return vi().memoizedState=t},useTransition:function(){var t=BC(!1),e=t[0];return t=z3.bind(null,t[1]),vi().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Et,i=vi();if(_t){if(n===void 0)throw Error(q(407));n=n()}else{if(n=e(),un===null)throw Error(q(349));Ma&30||uM(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,zC(hM.bind(null,r,s,t),[t]),r.flags|=2048,Dh(9,dM.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=vi(),e=un.identifierPrefix;if(_t){var n=ns,r=ts;n=(r&~(1<<32-si(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ph++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=B3++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},G3={readContext:qr,useCallback:wM,useContext:qr,useEffect:_E,useImperativeHandle:vM,useInsertionEffect:mM,useLayoutEffect:yM,useMemo:bM,useReducer:R0,useRef:gM,useState:function(){return R0(Nh)},useDebugValue:vE,useDeferredValue:function(t){var e=Gr();return xM(e,Yt.memoizedState,t)},useTransition:function(){var t=R0(Nh)[0],e=Gr().memoizedState;return[t,e]},useMutableSource:lM,useSyncExternalStore:cM,useId:SM,unstable_isNewReconciler:!1},K3={readContext:qr,useCallback:wM,useContext:qr,useEffect:_E,useImperativeHandle:vM,useInsertionEffect:mM,useLayoutEffect:yM,useMemo:bM,useReducer:k0,useRef:gM,useState:function(){return k0(Nh)},useDebugValue:vE,useDeferredValue:function(t){var e=Gr();return Yt===null?e.memoizedState=t:xM(e,Yt.memoizedState,t)},useTransition:function(){var t=k0(Nh)[0],e=Gr().memoizedState;return[t,e]},useMutableSource:lM,useSyncExternalStore:cM,useId:SM,unstable_isNewReconciler:!1};function Pc(t,e){try{var n="",r=e;do n+=xz(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function A0(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Tb(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Q3=typeof WeakMap=="function"?WeakMap:Map;function CM(t,e,n){n=us(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){jm||(jm=!0,Mb=r),Tb(t,e)},n}function RM(t,e,n){n=us(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Tb(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Tb(t,e),typeof r!="function"&&(ao===null?ao=new Set([this]):ao.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function WC(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Q3;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=cW.bind(null,t,e,n),e.then(t,t))}function HC(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function qC(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=us(-1,1),e.tag=2,oo(n,e,1))),n.lanes|=1),t)}var Y3=Es.ReactCurrentOwner,ar=!1;function Bn(t,e,n,r){e.child=t===null?oM(e,null,n,r):kc(e,t.child,n,r)}function GC(t,e,n,r,i){n=n.render;var s=e.ref;return hc(e,i),r=mE(t,e,n,r,s,i),n=yE(),t!==null&&!ar?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,vs(t,e,i)):(_t&&n&&iE(e),e.flags|=1,Bn(t,e,r,i),e.child)}function KC(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!CE(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,kM(t,e,s,r,i)):(t=qg(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Th,n(o,r)&&t.ref===e.ref)return vs(t,e,i)}return e.flags|=1,t=co(s,r),t.ref=e.ref,t.return=e,e.child=t}function kM(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Th(s,r)&&t.ref===e.ref)if(ar=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(ar=!0);else return e.lanes=t.lanes,vs(t,e,i)}return Ib(t,e,n,r,i)}function AM(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},nt(nc,wr),wr|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,nt(nc,wr),wr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,nt(nc,wr),wr|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,nt(nc,wr),wr|=r;return Bn(t,e,i,n),e.child}function PM(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Ib(t,e,n,r,i){var s=fr(n)?Da:$n.current;return s=Cc(e,s),hc(e,i),n=mE(t,e,n,r,s,i),r=yE(),t!==null&&!ar?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,vs(t,e,i)):(_t&&r&&iE(e),e.flags|=1,Bn(t,e,n,i),e.child)}function QC(t,e,n,r,i){if(fr(n)){var s=!0;km(e)}else s=!1;if(hc(e,i),e.stateNode===null)zg(t,e),iM(e,n,r),Eb(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=qr(c):(c=fr(n)?Da:$n.current,c=Cc(e,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&$C(e,o,r,c),Us=!1;var h=e.memoizedState;o.state=h,Om(e,r,o,i),l=e.memoizedState,a!==r||h!==l||hr.current||Us?(typeof u=="function"&&(Sb(e,n,u,r),l=e.memoizedState),(a=Us||jC(e,n,a,r,h,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,nM(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Zr(e.type,a),o.props=c,d=e.pendingProps,h=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=qr(l):(l=fr(n)?Da:$n.current,l=Cc(e,l));var f=n.getDerivedStateFromProps;(u=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||h!==l)&&$C(e,o,r,l),Us=!1,h=e.memoizedState,o.state=h,Om(e,r,o,i);var g=e.memoizedState;a!==d||h!==g||hr.current||Us?(typeof f=="function"&&(Sb(e,n,f,r),g=e.memoizedState),(c=Us||jC(e,n,c,r,h,g,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,g,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,g,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=g),o.props=r,o.state=g,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return Cb(t,e,n,r,s,i)}function Cb(t,e,n,r,i,s){PM(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&OC(e,n,!1),vs(t,e,s);r=e.stateNode,Y3.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=kc(e,t.child,null,s),e.child=kc(e,null,a,s)):Bn(t,e,a,s),e.memoizedState=r.state,i&&OC(e,n,!0),e.child}function NM(t){var e=t.stateNode;e.pendingContext?DC(t,e.pendingContext,e.pendingContext!==e.context):e.context&&DC(t,e.context,!1),hE(t,e.containerInfo)}function YC(t,e,n,r,i){return Rc(),oE(i),e.flags|=256,Bn(t,e,n,r),e.child}var Rb={dehydrated:null,treeContext:null,retryLane:0};function kb(t){return{baseLanes:t,cachePool:null,transitions:null}}function DM(t,e,n){var r=e.pendingProps,i=St.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),nt(St,i&1),t===null)return bb(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=c_(o,r,0,null),t=Ea(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=kb(n),e.memoizedState=Rb,t):wE(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return X3(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=co(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=co(a,s):(s=Ea(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?kb(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Rb,r}return s=t.child,t=s.sibling,r=co(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function wE(t,e){return e=c_({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Hp(t,e,n,r){return r!==null&&oE(r),kc(e,t.child,null,n),t=wE(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function X3(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=A0(Error(q(422))),Hp(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=c_({mode:"visible",children:r.children},i,0,null),s=Ea(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&kc(e,t.child,null,o),e.child.memoizedState=kb(o),e.memoizedState=Rb,s);if(!(e.mode&1))return Hp(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(q(419)),r=A0(s,r,void 0),Hp(t,e,o,r)}if(a=(o&t.childLanes)!==0,ar||a){if(r=un,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,_s(t,i),oi(r,t,i,-1))}return IE(),r=A0(Error(q(421))),Hp(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=uW.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Sr=so(i.nextSibling),Tr=e,_t=!0,ti=null,t!==null&&(Vr[Fr++]=ts,Vr[Fr++]=ns,Vr[Fr++]=Oa,ts=t.id,ns=t.overflow,Oa=e),e=wE(e,r.children),e.flags|=4096,e)}function XC(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),xb(t.return,e,n)}function P0(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function OM(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Bn(t,e,r.children,n),r=St.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&XC(t,n,e);else if(t.tag===19)XC(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(nt(St,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Mm(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),P0(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Mm(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}P0(e,!0,n,null,s);break;case"together":P0(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function zg(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function vs(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),La|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(q(153));if(e.child!==null){for(t=e.child,n=co(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=co(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function J3(t,e,n){switch(e.tag){case 3:NM(e),Rc();break;case 5:aM(e);break;case 1:fr(e.type)&&km(e);break;case 4:hE(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;nt(Nm,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(nt(St,St.current&1),e.flags|=128,null):n&e.child.childLanes?DM(t,e,n):(nt(St,St.current&1),t=vs(t,e,n),t!==null?t.sibling:null);nt(St,St.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return OM(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),nt(St,St.current),r)break;return null;case 22:case 23:return e.lanes=0,AM(t,e,n)}return vs(t,e,n)}var MM,Ab,LM,VM;MM=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ab=function(){};LM=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,ga(Vi.current);var s=null;switch(n){case"input":i=Jw(t,i),r=Jw(t,r),s=[];break;case"select":i=It({},i,{value:void 0}),r=It({},r,{value:void 0}),s=[];break;case"textarea":i=tb(t,i),r=tb(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Cm)}rb(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(_h.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(_h.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&st("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};VM=function(t,e,n,r){n!==r&&(e.flags|=4)};function Bu(t,e){if(!_t)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function kn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Z3(t,e,n){var r=e.pendingProps;switch(sE(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kn(e),null;case 1:return fr(e.type)&&Rm(),kn(e),null;case 3:return r=e.stateNode,Ac(),ht(hr),ht($n),pE(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(zp(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ti!==null&&(Fb(ti),ti=null))),Ab(t,e),kn(e),null;case 5:fE(e);var i=ga(Ah.current);if(n=e.type,t!==null&&e.stateNode!=null)LM(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(q(166));return kn(e),null}if(t=ga(Vi.current),zp(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Si]=e,r[Rh]=s,t=(e.mode&1)!==0,n){case"dialog":st("cancel",r),st("close",r);break;case"iframe":case"object":case"embed":st("load",r);break;case"video":case"audio":for(i=0;i<Sd.length;i++)st(Sd[i],r);break;case"source":st("error",r);break;case"img":case"image":case"link":st("error",r),st("load",r);break;case"details":st("toggle",r);break;case"input":oC(r,s),st("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},st("invalid",r);break;case"textarea":lC(r,s),st("invalid",r)}rb(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Bp(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Bp(r.textContent,a,t),i=["children",""+a]):_h.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&st("scroll",r)}switch(n){case"input":Op(r),aC(r,s,!0);break;case"textarea":Op(r),cC(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Cm)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=uO(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Si]=e,t[Rh]=r,MM(t,e,!1,!1),e.stateNode=t;e:{switch(o=ib(n,r),n){case"dialog":st("cancel",t),st("close",t),i=r;break;case"iframe":case"object":case"embed":st("load",t),i=r;break;case"video":case"audio":for(i=0;i<Sd.length;i++)st(Sd[i],t);i=r;break;case"source":st("error",t),i=r;break;case"img":case"image":case"link":st("error",t),st("load",t),i=r;break;case"details":st("toggle",t),i=r;break;case"input":oC(t,r),i=Jw(t,r),st("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=It({},r,{value:void 0}),st("invalid",t);break;case"textarea":lC(t,r),i=tb(t,r),st("invalid",t);break;default:i=r}rb(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?fO(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&dO(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&vh(t,l):typeof l=="number"&&vh(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(_h.hasOwnProperty(s)?l!=null&&s==="onScroll"&&st("scroll",t):l!=null&&WS(t,s,l,o))}switch(n){case"input":Op(t),aC(t,r,!1);break;case"textarea":Op(t),cC(t);break;case"option":r.value!=null&&t.setAttribute("value",""+mo(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?lc(t,!!r.multiple,s,!1):r.defaultValue!=null&&lc(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Cm)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return kn(e),null;case 6:if(t&&e.stateNode!=null)VM(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(q(166));if(n=ga(Ah.current),ga(Vi.current),zp(e)){if(r=e.stateNode,n=e.memoizedProps,r[Si]=e,(s=r.nodeValue!==n)&&(t=Tr,t!==null))switch(t.tag){case 3:Bp(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Bp(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Si]=e,e.stateNode=r}return kn(e),null;case 13:if(ht(St),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(_t&&Sr!==null&&e.mode&1&&!(e.flags&128))eM(),Rc(),e.flags|=98560,s=!1;else if(s=zp(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(q(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(q(317));s[Si]=e}else Rc(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;kn(e),s=!1}else ti!==null&&(Fb(ti),ti=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||St.current&1?Xt===0&&(Xt=3):IE())),e.updateQueue!==null&&(e.flags|=4),kn(e),null);case 4:return Ac(),Ab(t,e),t===null&&Ih(e.stateNode.containerInfo),kn(e),null;case 10:return cE(e.type._context),kn(e),null;case 17:return fr(e.type)&&Rm(),kn(e),null;case 19:if(ht(St),s=e.memoizedState,s===null)return kn(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Bu(s,!1);else{if(Xt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Mm(t),o!==null){for(e.flags|=128,Bu(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return nt(St,St.current&1|2),e.child}t=t.sibling}s.tail!==null&&jt()>Nc&&(e.flags|=128,r=!0,Bu(s,!1),e.lanes=4194304)}else{if(!r)if(t=Mm(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Bu(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!_t)return kn(e),null}else 2*jt()-s.renderingStartTime>Nc&&n!==1073741824&&(e.flags|=128,r=!0,Bu(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=jt(),e.sibling=null,n=St.current,nt(St,r?n&1|2:n&1),e):(kn(e),null);case 22:case 23:return TE(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?wr&1073741824&&(kn(e),e.subtreeFlags&6&&(e.flags|=8192)):kn(e),null;case 24:return null;case 25:return null}throw Error(q(156,e.tag))}function eW(t,e){switch(sE(e),e.tag){case 1:return fr(e.type)&&Rm(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ac(),ht(hr),ht($n),pE(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return fE(e),null;case 13:if(ht(St),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(q(340));Rc()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ht(St),null;case 4:return Ac(),null;case 10:return cE(e.type._context),null;case 22:case 23:return TE(),null;case 24:return null;default:return null}}var qp=!1,Dn=!1,tW=typeof WeakSet=="function"?WeakSet:Set,oe=null;function tc(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){kt(t,e,r)}else n.current=null}function Pb(t,e,n){try{n()}catch(r){kt(t,e,r)}}var JC=!1;function nW(t,e){if(pb=Em,t=UO(),rE(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,d=t,h=null;t:for(;;){for(var f;d!==n||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(f=d.firstChild)!==null;)h=d,d=f;for(;;){if(d===t)break t;if(h===n&&++c===i&&(a=o),h===s&&++u===r&&(l=o),(f=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=f}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(gb={focusedElem:t,selectionRange:n},Em=!1,oe=e;oe!==null;)if(e=oe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,oe=t;else for(;oe!==null;){e=oe;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var m=g.memoizedProps,v=g.memoizedState,_=e.stateNode,y=_.getSnapshotBeforeUpdate(e.elementType===e.type?m:Zr(e.type,m),v);_.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(q(163))}}catch(b){kt(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,oe=t;break}oe=e.return}return g=JC,JC=!1,g}function Gd(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Pb(e,n,s)}i=i.next}while(i!==r)}}function a_(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Nb(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function FM(t){var e=t.alternate;e!==null&&(t.alternate=null,FM(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Si],delete e[Rh],delete e[_b],delete e[F3],delete e[j3])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function jM(t){return t.tag===5||t.tag===3||t.tag===4}function ZC(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||jM(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Db(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Cm));else if(r!==4&&(t=t.child,t!==null))for(Db(t,e,n),t=t.sibling;t!==null;)Db(t,e,n),t=t.sibling}function Ob(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Ob(t,e,n),t=t.sibling;t!==null;)Ob(t,e,n),t=t.sibling}var yn=null,ei=!1;function Ms(t,e,n){for(n=n.child;n!==null;)$M(t,e,n),n=n.sibling}function $M(t,e,n){if(Li&&typeof Li.onCommitFiberUnmount=="function")try{Li.onCommitFiberUnmount(Zy,n)}catch{}switch(n.tag){case 5:Dn||tc(n,e);case 6:var r=yn,i=ei;yn=null,Ms(t,e,n),yn=r,ei=i,yn!==null&&(ei?(t=yn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):yn.removeChild(n.stateNode));break;case 18:yn!==null&&(ei?(t=yn,n=n.stateNode,t.nodeType===8?E0(t.parentNode,n):t.nodeType===1&&E0(t,n),Sh(t)):E0(yn,n.stateNode));break;case 4:r=yn,i=ei,yn=n.stateNode.containerInfo,ei=!0,Ms(t,e,n),yn=r,ei=i;break;case 0:case 11:case 14:case 15:if(!Dn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Pb(n,e,o),i=i.next}while(i!==r)}Ms(t,e,n);break;case 1:if(!Dn&&(tc(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){kt(n,e,a)}Ms(t,e,n);break;case 21:Ms(t,e,n);break;case 22:n.mode&1?(Dn=(r=Dn)||n.memoizedState!==null,Ms(t,e,n),Dn=r):Ms(t,e,n);break;default:Ms(t,e,n)}}function eR(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new tW),e.forEach(function(r){var i=dW.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Xr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:yn=a.stateNode,ei=!1;break e;case 3:yn=a.stateNode.containerInfo,ei=!0;break e;case 4:yn=a.stateNode.containerInfo,ei=!0;break e}a=a.return}if(yn===null)throw Error(q(160));$M(s,o,i),yn=null,ei=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){kt(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)UM(e,t),e=e.sibling}function UM(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Xr(e,t),yi(t),r&4){try{Gd(3,t,t.return),a_(3,t)}catch(m){kt(t,t.return,m)}try{Gd(5,t,t.return)}catch(m){kt(t,t.return,m)}}break;case 1:Xr(e,t),yi(t),r&512&&n!==null&&tc(n,n.return);break;case 5:if(Xr(e,t),yi(t),r&512&&n!==null&&tc(n,n.return),t.flags&32){var i=t.stateNode;try{vh(i,"")}catch(m){kt(t,t.return,m)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&lO(i,s),ib(a,o);var c=ib(a,s);for(o=0;o<l.length;o+=2){var u=l[o],d=l[o+1];u==="style"?fO(i,d):u==="dangerouslySetInnerHTML"?dO(i,d):u==="children"?vh(i,d):WS(i,u,d,c)}switch(a){case"input":Zw(i,s);break;case"textarea":cO(i,s);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?lc(i,!!s.multiple,f,!1):h!==!!s.multiple&&(s.defaultValue!=null?lc(i,!!s.multiple,s.defaultValue,!0):lc(i,!!s.multiple,s.multiple?[]:"",!1))}i[Rh]=s}catch(m){kt(t,t.return,m)}}break;case 6:if(Xr(e,t),yi(t),r&4){if(t.stateNode===null)throw Error(q(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(m){kt(t,t.return,m)}}break;case 3:if(Xr(e,t),yi(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Sh(e.containerInfo)}catch(m){kt(t,t.return,m)}break;case 4:Xr(e,t),yi(t);break;case 13:Xr(e,t),yi(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(SE=jt())),r&4&&eR(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(Dn=(c=Dn)||u,Xr(e,t),Dn=c):Xr(e,t),yi(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(oe=t,u=t.child;u!==null;){for(d=oe=u;oe!==null;){switch(h=oe,f=h.child,h.tag){case 0:case 11:case 14:case 15:Gd(4,h,h.return);break;case 1:tc(h,h.return);var g=h.stateNode;if(typeof g.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(m){kt(r,n,m)}}break;case 5:tc(h,h.return);break;case 22:if(h.memoizedState!==null){nR(d);continue}}f!==null?(f.return=h,oe=f):nR(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{i=d.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=hO("display",o))}catch(m){kt(t,t.return,m)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(m){kt(t,t.return,m)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Xr(e,t),yi(t),r&4&&eR(t);break;case 21:break;default:Xr(e,t),yi(t)}}function yi(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(jM(n)){var r=n;break e}n=n.return}throw Error(q(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(vh(i,""),r.flags&=-33);var s=ZC(t);Ob(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=ZC(t);Db(t,a,o);break;default:throw Error(q(161))}}catch(l){kt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function rW(t,e,n){oe=t,BM(t)}function BM(t,e,n){for(var r=(t.mode&1)!==0;oe!==null;){var i=oe,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||qp;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Dn;a=qp;var c=Dn;if(qp=o,(Dn=l)&&!c)for(oe=i;oe!==null;)o=oe,l=o.child,o.tag===22&&o.memoizedState!==null?rR(i):l!==null?(l.return=o,oe=l):rR(i);for(;s!==null;)oe=s,BM(s),s=s.sibling;oe=i,qp=a,Dn=c}tR(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,oe=s):tR(t)}}function tR(t){for(;oe!==null;){var e=oe;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Dn||a_(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Dn)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Zr(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&FC(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}FC(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&Sh(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(q(163))}Dn||e.flags&512&&Nb(e)}catch(h){kt(e,e.return,h)}}if(e===t){oe=null;break}if(n=e.sibling,n!==null){n.return=e.return,oe=n;break}oe=e.return}}function nR(t){for(;oe!==null;){var e=oe;if(e===t){oe=null;break}var n=e.sibling;if(n!==null){n.return=e.return,oe=n;break}oe=e.return}}function rR(t){for(;oe!==null;){var e=oe;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{a_(4,e)}catch(l){kt(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){kt(e,i,l)}}var s=e.return;try{Nb(e)}catch(l){kt(e,s,l)}break;case 5:var o=e.return;try{Nb(e)}catch(l){kt(e,o,l)}}}catch(l){kt(e,e.return,l)}if(e===t){oe=null;break}var a=e.sibling;if(a!==null){a.return=e.return,oe=a;break}oe=e.return}}var iW=Math.ceil,Fm=Es.ReactCurrentDispatcher,bE=Es.ReactCurrentOwner,Wr=Es.ReactCurrentBatchConfig,Fe=0,un=null,Gt=null,Sn=0,wr=0,nc=Mo(0),Xt=0,Oh=null,La=0,l_=0,xE=0,Kd=null,sr=null,SE=0,Nc=1/0,Xi=null,jm=!1,Mb=null,ao=null,Gp=!1,Ks=null,$m=0,Qd=0,Lb=null,Wg=-1,Hg=0;function Gn(){return Fe&6?jt():Wg!==-1?Wg:Wg=jt()}function lo(t){return t.mode&1?Fe&2&&Sn!==0?Sn&-Sn:U3.transition!==null?(Hg===0&&(Hg=TO()),Hg):(t=Ge,t!==0||(t=window.event,t=t===void 0?16:NO(t.type)),t):1}function oi(t,e,n,r){if(50<Qd)throw Qd=0,Lb=null,Error(q(185));Df(t,n,r),(!(Fe&2)||t!==un)&&(t===un&&(!(Fe&2)&&(l_|=n),Xt===4&&Ws(t,Sn)),pr(t,r),n===1&&Fe===0&&!(e.mode&1)&&(Nc=jt()+500,i_&&Lo()))}function pr(t,e){var n=t.callbackNode;Uz(t,e);var r=Sm(t,t===un?Sn:0);if(r===0)n!==null&&hC(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&hC(n),e===1)t.tag===0?$3(iR.bind(null,t)):XO(iR.bind(null,t)),L3(function(){!(Fe&6)&&Lo()}),n=null;else{switch(IO(r)){case 1:n=QS;break;case 4:n=SO;break;case 16:n=xm;break;case 536870912:n=EO;break;default:n=xm}n=YM(n,zM.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function zM(t,e){if(Wg=-1,Hg=0,Fe&6)throw Error(q(327));var n=t.callbackNode;if(fc()&&t.callbackNode!==n)return null;var r=Sm(t,t===un?Sn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Um(t,r);else{e=r;var i=Fe;Fe|=2;var s=HM();(un!==t||Sn!==e)&&(Xi=null,Nc=jt()+500,Sa(t,e));do try{aW();break}catch(a){WM(t,a)}while(!0);lE(),Fm.current=s,Fe=i,Gt!==null?e=0:(un=null,Sn=0,e=Xt)}if(e!==0){if(e===2&&(i=cb(t),i!==0&&(r=i,e=Vb(t,i))),e===1)throw n=Oh,Sa(t,0),Ws(t,r),pr(t,jt()),n;if(e===6)Ws(t,r);else{if(i=t.current.alternate,!(r&30)&&!sW(i)&&(e=Um(t,r),e===2&&(s=cb(t),s!==0&&(r=s,e=Vb(t,s))),e===1))throw n=Oh,Sa(t,0),Ws(t,r),pr(t,jt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(q(345));case 2:ta(t,sr,Xi);break;case 3:if(Ws(t,r),(r&130023424)===r&&(e=SE+500-jt(),10<e)){if(Sm(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Gn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=yb(ta.bind(null,t,sr,Xi),e);break}ta(t,sr,Xi);break;case 4:if(Ws(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-si(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=jt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*iW(r/1960))-r,10<r){t.timeoutHandle=yb(ta.bind(null,t,sr,Xi),r);break}ta(t,sr,Xi);break;case 5:ta(t,sr,Xi);break;default:throw Error(q(329))}}}return pr(t,jt()),t.callbackNode===n?zM.bind(null,t):null}function Vb(t,e){var n=Kd;return t.current.memoizedState.isDehydrated&&(Sa(t,e).flags|=256),t=Um(t,e),t!==2&&(e=sr,sr=n,e!==null&&Fb(e)),t}function Fb(t){sr===null?sr=t:sr.push.apply(sr,t)}function sW(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ui(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ws(t,e){for(e&=~xE,e&=~l_,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-si(e),r=1<<n;t[n]=-1,e&=~r}}function iR(t){if(Fe&6)throw Error(q(327));fc();var e=Sm(t,0);if(!(e&1))return pr(t,jt()),null;var n=Um(t,e);if(t.tag!==0&&n===2){var r=cb(t);r!==0&&(e=r,n=Vb(t,r))}if(n===1)throw n=Oh,Sa(t,0),Ws(t,e),pr(t,jt()),n;if(n===6)throw Error(q(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ta(t,sr,Xi),pr(t,jt()),null}function EE(t,e){var n=Fe;Fe|=1;try{return t(e)}finally{Fe=n,Fe===0&&(Nc=jt()+500,i_&&Lo())}}function Va(t){Ks!==null&&Ks.tag===0&&!(Fe&6)&&fc();var e=Fe;Fe|=1;var n=Wr.transition,r=Ge;try{if(Wr.transition=null,Ge=1,t)return t()}finally{Ge=r,Wr.transition=n,Fe=e,!(Fe&6)&&Lo()}}function TE(){wr=nc.current,ht(nc)}function Sa(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,M3(n)),Gt!==null)for(n=Gt.return;n!==null;){var r=n;switch(sE(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Rm();break;case 3:Ac(),ht(hr),ht($n),pE();break;case 5:fE(r);break;case 4:Ac();break;case 13:ht(St);break;case 19:ht(St);break;case 10:cE(r.type._context);break;case 22:case 23:TE()}n=n.return}if(un=t,Gt=t=co(t.current,null),Sn=wr=e,Xt=0,Oh=null,xE=l_=La=0,sr=Kd=null,pa!==null){for(e=0;e<pa.length;e++)if(n=pa[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}pa=null}return t}function WM(t,e){do{var n=Gt;try{if(lE(),Ug.current=Vm,Lm){for(var r=Et.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Lm=!1}if(Ma=0,sn=Yt=Et=null,qd=!1,Ph=0,bE.current=null,n===null||n.return===null){Xt=1,Oh=e,Gt=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Sn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=HC(o);if(f!==null){f.flags&=-257,qC(f,o,a,s,e),f.mode&1&&WC(s,c,e),e=f,l=c;var g=e.updateQueue;if(g===null){var m=new Set;m.add(l),e.updateQueue=m}else g.add(l);break e}else{if(!(e&1)){WC(s,c,e),IE();break e}l=Error(q(426))}}else if(_t&&a.mode&1){var v=HC(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),qC(v,o,a,s,e),oE(Pc(l,a));break e}}s=l=Pc(l,a),Xt!==4&&(Xt=2),Kd===null?Kd=[s]:Kd.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var _=CM(s,l,e);VC(s,_);break e;case 1:a=l;var y=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(ao===null||!ao.has(w)))){s.flags|=65536,e&=-e,s.lanes|=e;var b=RM(s,a,e);VC(s,b);break e}}s=s.return}while(s!==null)}GM(n)}catch(x){e=x,Gt===n&&n!==null&&(Gt=n=n.return);continue}break}while(!0)}function HM(){var t=Fm.current;return Fm.current=Vm,t===null?Vm:t}function IE(){(Xt===0||Xt===3||Xt===2)&&(Xt=4),un===null||!(La&268435455)&&!(l_&268435455)||Ws(un,Sn)}function Um(t,e){var n=Fe;Fe|=2;var r=HM();(un!==t||Sn!==e)&&(Xi=null,Sa(t,e));do try{oW();break}catch(i){WM(t,i)}while(!0);if(lE(),Fe=n,Fm.current=r,Gt!==null)throw Error(q(261));return un=null,Sn=0,Xt}function oW(){for(;Gt!==null;)qM(Gt)}function aW(){for(;Gt!==null&&!Nz();)qM(Gt)}function qM(t){var e=QM(t.alternate,t,wr);t.memoizedProps=t.pendingProps,e===null?GM(t):Gt=e,bE.current=null}function GM(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=eW(n,e),n!==null){n.flags&=32767,Gt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Xt=6,Gt=null;return}}else if(n=Z3(n,e,wr),n!==null){Gt=n;return}if(e=e.sibling,e!==null){Gt=e;return}Gt=e=t}while(e!==null);Xt===0&&(Xt=5)}function ta(t,e,n){var r=Ge,i=Wr.transition;try{Wr.transition=null,Ge=1,lW(t,e,n,r)}finally{Wr.transition=i,Ge=r}return null}function lW(t,e,n,r){do fc();while(Ks!==null);if(Fe&6)throw Error(q(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(q(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(Bz(t,s),t===un&&(Gt=un=null,Sn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Gp||(Gp=!0,YM(xm,function(){return fc(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Wr.transition,Wr.transition=null;var o=Ge;Ge=1;var a=Fe;Fe|=4,bE.current=null,nW(t,n),UM(n,t),R3(gb),Em=!!pb,gb=pb=null,t.current=n,rW(n),Dz(),Fe=a,Ge=o,Wr.transition=s}else t.current=n;if(Gp&&(Gp=!1,Ks=t,$m=i),s=t.pendingLanes,s===0&&(ao=null),Lz(n.stateNode),pr(t,jt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(jm)throw jm=!1,t=Mb,Mb=null,t;return $m&1&&t.tag!==0&&fc(),s=t.pendingLanes,s&1?t===Lb?Qd++:(Qd=0,Lb=t):Qd=0,Lo(),null}function fc(){if(Ks!==null){var t=IO($m),e=Wr.transition,n=Ge;try{if(Wr.transition=null,Ge=16>t?16:t,Ks===null)var r=!1;else{if(t=Ks,Ks=null,$m=0,Fe&6)throw Error(q(331));var i=Fe;for(Fe|=4,oe=t.current;oe!==null;){var s=oe,o=s.child;if(oe.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(oe=c;oe!==null;){var u=oe;switch(u.tag){case 0:case 11:case 15:Gd(8,u,s)}var d=u.child;if(d!==null)d.return=u,oe=d;else for(;oe!==null;){u=oe;var h=u.sibling,f=u.return;if(FM(u),u===c){oe=null;break}if(h!==null){h.return=f,oe=h;break}oe=f}}}var g=s.alternate;if(g!==null){var m=g.child;if(m!==null){g.child=null;do{var v=m.sibling;m.sibling=null,m=v}while(m!==null)}}oe=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,oe=o;else e:for(;oe!==null;){if(s=oe,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Gd(9,s,s.return)}var _=s.sibling;if(_!==null){_.return=s.return,oe=_;break e}oe=s.return}}var y=t.current;for(oe=y;oe!==null;){o=oe;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,oe=w;else e:for(o=y;oe!==null;){if(a=oe,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:a_(9,a)}}catch(x){kt(a,a.return,x)}if(a===o){oe=null;break e}var b=a.sibling;if(b!==null){b.return=a.return,oe=b;break e}oe=a.return}}if(Fe=i,Lo(),Li&&typeof Li.onPostCommitFiberRoot=="function")try{Li.onPostCommitFiberRoot(Zy,t)}catch{}r=!0}return r}finally{Ge=n,Wr.transition=e}}return!1}function sR(t,e,n){e=Pc(n,e),e=CM(t,e,1),t=oo(t,e,1),e=Gn(),t!==null&&(Df(t,1,e),pr(t,e))}function kt(t,e,n){if(t.tag===3)sR(t,t,n);else for(;e!==null;){if(e.tag===3){sR(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ao===null||!ao.has(r))){t=Pc(n,t),t=RM(e,t,1),e=oo(e,t,1),t=Gn(),e!==null&&(Df(e,1,t),pr(e,t));break}}e=e.return}}function cW(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Gn(),t.pingedLanes|=t.suspendedLanes&n,un===t&&(Sn&n)===n&&(Xt===4||Xt===3&&(Sn&130023424)===Sn&&500>jt()-SE?Sa(t,0):xE|=n),pr(t,e)}function KM(t,e){e===0&&(t.mode&1?(e=Vp,Vp<<=1,!(Vp&130023424)&&(Vp=4194304)):e=1);var n=Gn();t=_s(t,e),t!==null&&(Df(t,e,n),pr(t,n))}function uW(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),KM(t,n)}function dW(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(q(314))}r!==null&&r.delete(e),KM(t,n)}var QM;QM=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||hr.current)ar=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return ar=!1,J3(t,e,n);ar=!!(t.flags&131072)}else ar=!1,_t&&e.flags&1048576&&JO(e,Pm,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;zg(t,e),t=e.pendingProps;var i=Cc(e,$n.current);hc(e,n),i=mE(null,e,r,t,i,n);var s=yE();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,fr(r)?(s=!0,km(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,dE(e),i.updater=s_,e.stateNode=i,i._reactInternals=e,Eb(e,r,t,n),e=Cb(null,e,r,!0,s,n)):(e.tag=0,_t&&s&&iE(e),Bn(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(zg(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=fW(r),t=Zr(r,t),i){case 0:e=Ib(null,e,r,t,n);break e;case 1:e=QC(null,e,r,t,n);break e;case 11:e=GC(null,e,r,t,n);break e;case 14:e=KC(null,e,r,Zr(r.type,t),n);break e}throw Error(q(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Zr(r,i),Ib(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Zr(r,i),QC(t,e,r,i,n);case 3:e:{if(NM(e),t===null)throw Error(q(387));r=e.pendingProps,s=e.memoizedState,i=s.element,nM(t,e),Om(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Pc(Error(q(423)),e),e=YC(t,e,r,n,i);break e}else if(r!==i){i=Pc(Error(q(424)),e),e=YC(t,e,r,n,i);break e}else for(Sr=so(e.stateNode.containerInfo.firstChild),Tr=e,_t=!0,ti=null,n=oM(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Rc(),r===i){e=vs(t,e,n);break e}Bn(t,e,r,n)}e=e.child}return e;case 5:return aM(e),t===null&&bb(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,mb(r,i)?o=null:s!==null&&mb(r,s)&&(e.flags|=32),PM(t,e),Bn(t,e,o,n),e.child;case 6:return t===null&&bb(e),null;case 13:return DM(t,e,n);case 4:return hE(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=kc(e,null,r,n):Bn(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Zr(r,i),GC(t,e,r,i,n);case 7:return Bn(t,e,e.pendingProps,n),e.child;case 8:return Bn(t,e,e.pendingProps.children,n),e.child;case 12:return Bn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,nt(Nm,r._currentValue),r._currentValue=o,s!==null)if(ui(s.value,o)){if(s.children===i.children&&!hr.current){e=vs(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=us(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),xb(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(q(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),xb(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Bn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,hc(e,n),i=qr(i),r=r(i),e.flags|=1,Bn(t,e,r,n),e.child;case 14:return r=e.type,i=Zr(r,e.pendingProps),i=Zr(r.type,i),KC(t,e,r,i,n);case 15:return kM(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Zr(r,i),zg(t,e),e.tag=1,fr(r)?(t=!0,km(e)):t=!1,hc(e,n),iM(e,r,i),Eb(e,r,i,n),Cb(null,e,r,!0,t,n);case 19:return OM(t,e,n);case 22:return AM(t,e,n)}throw Error(q(156,e.tag))};function YM(t,e){return xO(t,e)}function hW(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $r(t,e,n,r){return new hW(t,e,n,r)}function CE(t){return t=t.prototype,!(!t||!t.isReactComponent)}function fW(t){if(typeof t=="function")return CE(t)?1:0;if(t!=null){if(t=t.$$typeof,t===qS)return 11;if(t===GS)return 14}return 2}function co(t,e){var n=t.alternate;return n===null?(n=$r(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function qg(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")CE(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ql:return Ea(n.children,i,s,e);case HS:o=8,i|=8;break;case Kw:return t=$r(12,n,e,i|2),t.elementType=Kw,t.lanes=s,t;case Qw:return t=$r(13,n,e,i),t.elementType=Qw,t.lanes=s,t;case Yw:return t=$r(19,n,e,i),t.elementType=Yw,t.lanes=s,t;case sO:return c_(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case rO:o=10;break e;case iO:o=9;break e;case qS:o=11;break e;case GS:o=14;break e;case $s:o=16,r=null;break e}throw Error(q(130,t==null?t:typeof t,""))}return e=$r(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Ea(t,e,n,r){return t=$r(7,t,r,e),t.lanes=n,t}function c_(t,e,n,r){return t=$r(22,t,r,e),t.elementType=sO,t.lanes=n,t.stateNode={isHidden:!1},t}function N0(t,e,n){return t=$r(6,t,null,e),t.lanes=n,t}function D0(t,e,n){return e=$r(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function pW(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=f0(0),this.expirationTimes=f0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=f0(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function RE(t,e,n,r,i,s,o,a,l){return t=new pW(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=$r(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},dE(s),t}function gW(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Hl,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function XM(t){if(!t)return yo;t=t._reactInternals;e:{if(ll(t)!==t||t.tag!==1)throw Error(q(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(fr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(q(171))}if(t.tag===1){var n=t.type;if(fr(n))return YO(t,n,e)}return e}function JM(t,e,n,r,i,s,o,a,l){return t=RE(n,r,!0,t,i,s,o,a,l),t.context=XM(null),n=t.current,r=Gn(),i=lo(n),s=us(r,i),s.callback=e??null,oo(n,s,i),t.current.lanes=i,Df(t,i,r),pr(t,r),t}function u_(t,e,n,r){var i=e.current,s=Gn(),o=lo(i);return n=XM(n),e.context===null?e.context=n:e.pendingContext=n,e=us(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=oo(i,e,o),t!==null&&(oi(t,i,o,s),$g(t,i,o)),o}function Bm(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function oR(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function kE(t,e){oR(t,e),(t=t.alternate)&&oR(t,e)}function mW(){return null}var ZM=typeof reportError=="function"?reportError:function(t){console.error(t)};function AE(t){this._internalRoot=t}d_.prototype.render=AE.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(q(409));u_(t,e,null,null)};d_.prototype.unmount=AE.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Va(function(){u_(null,t,null,null)}),e[ys]=null}};function d_(t){this._internalRoot=t}d_.prototype.unstable_scheduleHydration=function(t){if(t){var e=kO();t={blockedOn:null,target:t,priority:e};for(var n=0;n<zs.length&&e!==0&&e<zs[n].priority;n++);zs.splice(n,0,t),n===0&&PO(t)}};function PE(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function h_(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function aR(){}function yW(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=Bm(o);s.call(c)}}var o=JM(e,r,t,0,null,!1,!1,"",aR);return t._reactRootContainer=o,t[ys]=o.current,Ih(t.nodeType===8?t.parentNode:t),Va(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=Bm(l);a.call(c)}}var l=RE(t,0,!1,null,null,!1,!1,"",aR);return t._reactRootContainer=l,t[ys]=l.current,Ih(t.nodeType===8?t.parentNode:t),Va(function(){u_(e,l,n,r)}),l}function f_(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Bm(o);a.call(l)}}u_(e,o,t,i)}else o=yW(n,e,t,i,r);return Bm(o)}CO=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=xd(e.pendingLanes);n!==0&&(YS(e,n|1),pr(e,jt()),!(Fe&6)&&(Nc=jt()+500,Lo()))}break;case 13:Va(function(){var r=_s(t,1);if(r!==null){var i=Gn();oi(r,t,1,i)}}),kE(t,1)}};XS=function(t){if(t.tag===13){var e=_s(t,134217728);if(e!==null){var n=Gn();oi(e,t,134217728,n)}kE(t,134217728)}};RO=function(t){if(t.tag===13){var e=lo(t),n=_s(t,e);if(n!==null){var r=Gn();oi(n,t,e,r)}kE(t,e)}};kO=function(){return Ge};AO=function(t,e){var n=Ge;try{return Ge=t,e()}finally{Ge=n}};ob=function(t,e,n){switch(e){case"input":if(Zw(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=r_(r);if(!i)throw Error(q(90));aO(r),Zw(r,i)}}}break;case"textarea":cO(t,n);break;case"select":e=n.value,e!=null&&lc(t,!!n.multiple,e,!1)}};mO=EE;yO=Va;var _W={usingClientEntryPoint:!1,Events:[Mf,Yl,r_,pO,gO,EE]},zu={findFiberByHostInstance:fa,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},vW={bundleType:zu.bundleType,version:zu.version,rendererPackageName:zu.rendererPackageName,rendererConfig:zu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Es.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=wO(t),t===null?null:t.stateNode},findFiberByHostInstance:zu.findFiberByHostInstance||mW,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Kp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Kp.isDisabled&&Kp.supportsFiber)try{Zy=Kp.inject(vW),Li=Kp}catch{}}Pr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_W;Pr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!PE(e))throw Error(q(200));return gW(t,e,null,n)};Pr.createRoot=function(t,e){if(!PE(t))throw Error(q(299));var n=!1,r="",i=ZM;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=RE(t,1,!1,null,null,n,!1,r,i),t[ys]=e.current,Ih(t.nodeType===8?t.parentNode:t),new AE(e)};Pr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(q(188)):(t=Object.keys(t).join(","),Error(q(268,t)));return t=wO(e),t=t===null?null:t.stateNode,t};Pr.flushSync=function(t){return Va(t)};Pr.hydrate=function(t,e,n){if(!h_(e))throw Error(q(200));return f_(null,t,e,!0,n)};Pr.hydrateRoot=function(t,e,n){if(!PE(t))throw Error(q(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=ZM;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=JM(e,null,t,1,n??null,i,!1,s,o),t[ys]=e.current,Ih(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new d_(e)};Pr.render=function(t,e,n){if(!h_(e))throw Error(q(200));return f_(null,t,e,!1,n)};Pr.unmountComponentAtNode=function(t){if(!h_(t))throw Error(q(40));return t._reactRootContainer?(Va(function(){f_(null,null,t,!1,function(){t._reactRootContainer=null,t[ys]=null})}),!0):!1};Pr.unstable_batchedUpdates=EE;Pr.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!h_(n))throw Error(q(200));if(t==null||t._reactInternals===void 0)throw Error(q(38));return f_(t,e,n,!1,r)};Pr.version="18.2.0-next-9e3b772b8-20220608";function eL(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(eL)}catch(t){console.error(t)}}eL(),JD.exports=Pr;var NE=JD.exports;const wW=VS(NE);var lR=NE;qw.createRoot=lR.createRoot,qw.hydrateRoot=lR.hydrateRoot;/**
 * @remix-run/router v1.15.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Mh(){return Mh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Mh.apply(this,arguments)}var Qs;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Qs||(Qs={}));const cR="popstate";function bW(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return jb("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:nL(i)}return SW(e,n,null,t)}function Kt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function tL(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function xW(){return Math.random().toString(36).substr(2,8)}function uR(t,e){return{usr:t.state,key:t.key,idx:e}}function jb(t,e,n,r){return n===void 0&&(n=null),Mh({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?uu(e):e,{state:n,key:e&&e.key||r||xW()})}function nL(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function uu(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function SW(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Qs.Pop,l=null,c=u();c==null&&(c=0,o.replaceState(Mh({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function d(){a=Qs.Pop;let v=u(),_=v==null?null:v-c;c=v,l&&l({action:a,location:m.location,delta:_})}function h(v,_){a=Qs.Push;let y=jb(m.location,v,_);n&&n(y,v),c=u()+1;let w=uR(y,c),b=m.createHref(y);try{o.pushState(w,"",b)}catch(x){if(x instanceof DOMException&&x.name==="DataCloneError")throw x;i.location.assign(b)}s&&l&&l({action:a,location:m.location,delta:1})}function f(v,_){a=Qs.Replace;let y=jb(m.location,v,_);n&&n(y,v),c=u();let w=uR(y,c),b=m.createHref(y);o.replaceState(w,"",b),s&&l&&l({action:a,location:m.location,delta:0})}function g(v){let _=i.location.origin!=="null"?i.location.origin:i.location.href,y=typeof v=="string"?v:nL(v);return y=y.replace(/ $/,"%20"),Kt(_,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,_)}let m={get action(){return a},get location(){return t(i,o)},listen(v){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(cR,d),l=v,()=>{i.removeEventListener(cR,d),l=null}},createHref(v){return e(i,v)},createURL:g,encodeLocation(v){let _=g(v);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:h,replace:f,go(v){return o.go(v)}};return m}var dR;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(dR||(dR={}));function EW(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?uu(e):e,i=sL(r.pathname||"/",n);if(i==null)return null;let s=rL(t);TW(s);let o=null;for(let a=0;o==null&&a<s.length;++a){let l=VW(i);o=OW(s[a],l)}return o}function rL(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Kt(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Ta([r,l.relativePath]),u=n.concat(l);s.children&&s.children.length>0&&(Kt(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),rL(s.children,e,u,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:NW(c,s.index),routesMeta:u})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of iL(s.path))i(s,o,l)}),e}function iL(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=iL(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function TW(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:DW(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const IW=/^:[\w-]+$/,CW=3,RW=2,kW=1,AW=10,PW=-2,hR=t=>t==="*";function NW(t,e){let n=t.split("/"),r=n.length;return n.some(hR)&&(r+=PW),e&&(r+=RW),n.filter(i=>!hR(i)).reduce((i,s)=>i+(IW.test(s)?CW:s===""?kW:AW),r)}function DW(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function OW(t,e){let{routesMeta:n}=t,r={},i="/",s=[];for(let o=0;o<n.length;++o){let a=n[o],l=o===n.length-1,c=i==="/"?e:e.slice(i.length)||"/",u=MW({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},c);if(!u)return null;Object.assign(r,u.params);let d=a.route;s.push({params:r,pathname:Ta([i,u.pathname]),pathnameBase:UW(Ta([i,u.pathnameBase])),route:d}),u.pathnameBase!=="/"&&(i=Ta([i,u.pathnameBase]))}return s}function MW(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=LW(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,u,d)=>{let{paramName:h,isOptional:f}=u;if(h==="*"){let m=a[d]||"";o=s.slice(0,s.length-m.length).replace(/(.)\/+$/,"$1")}const g=a[d];return f&&!g?c[h]=void 0:c[h]=(g||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function LW(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),tL(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function VW(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return tL(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function sL(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function FW(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?uu(t):t;return{pathname:n?n.startsWith("/")?n:jW(n,e):e,search:BW(r),hash:zW(i)}}function jW(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function O0(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function $W(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function oL(t,e){let n=$W(t);return e?n.map((r,i)=>i===t.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function aL(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=uu(t):(i=Mh({},t),Kt(!i.pathname||!i.pathname.includes("?"),O0("?","pathname","search",i)),Kt(!i.pathname||!i.pathname.includes("#"),O0("#","pathname","hash",i)),Kt(!i.search||!i.search.includes("#"),O0("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),d-=1;i.pathname=h.join("/")}a=d>=0?e[d]:"/"}let l=FW(i,a),c=o&&o!=="/"&&o.endsWith("/"),u=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const Ta=t=>t.join("/").replace(/\/\/+/g,"/"),UW=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),BW=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,zW=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function WW(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const lL=["post","put","patch","delete"];new Set(lL);const HW=["get",...lL];new Set(HW);/**
 * React Router v6.22.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Lh(){return Lh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Lh.apply(this,arguments)}const DE=S.createContext(null),qW=S.createContext(null),Vf=S.createContext(null),p_=S.createContext(null),Vo=S.createContext({outlet:null,matches:[],isDataRoute:!1}),cL=S.createContext(null);function Ff(){return S.useContext(p_)!=null}function g_(){return Ff()||Kt(!1),S.useContext(p_).location}function uL(t){S.useContext(Vf).static||S.useLayoutEffect(t)}function GW(){let{isDataRoute:t}=S.useContext(Vo);return t?l9():KW()}function KW(){Ff()||Kt(!1);let t=S.useContext(DE),{basename:e,future:n,navigator:r}=S.useContext(Vf),{matches:i}=S.useContext(Vo),{pathname:s}=g_(),o=JSON.stringify(oL(i,n.v7_relativeSplatPath)),a=S.useRef(!1);return uL(()=>{a.current=!0}),S.useCallback(function(c,u){if(u===void 0&&(u={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let d=aL(c,JSON.parse(o),s,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Ta([e,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[e,r,o,s,t])}const QW=S.createContext(null);function YW(t){let e=S.useContext(Vo).outlet;return e&&S.createElement(QW.Provider,{value:t},e)}function XW(t,e){return JW(t,e)}function JW(t,e,n,r){Ff()||Kt(!1);let{navigator:i}=S.useContext(Vf),{matches:s}=S.useContext(Vo),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=g_(),u;if(e){var d;let v=typeof e=="string"?uu(e):e;l==="/"||(d=v.pathname)!=null&&d.startsWith(l)||Kt(!1),u=v}else u=c;let h=u.pathname||"/",f=h;if(l!=="/"){let v=l.replace(/^\//,"").split("/");f="/"+h.replace(/^\//,"").split("/").slice(v.length).join("/")}let g=EW(t,{pathname:f}),m=r9(g&&g.map(v=>Object.assign({},v,{params:Object.assign({},a,v.params),pathname:Ta([l,i.encodeLocation?i.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?l:Ta([l,i.encodeLocation?i.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),s,n,r);return e&&m?S.createElement(p_.Provider,{value:{location:Lh({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Qs.Pop}},m):m}function ZW(){let t=a9(),e=WW(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return S.createElement(S.Fragment,null,S.createElement("h2",null,"Unexpected Application Error!"),S.createElement("h3",{style:{fontStyle:"italic"}},e),n?S.createElement("pre",{style:i},n):null,null)}const e9=S.createElement(ZW,null);class t9 extends S.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?S.createElement(Vo.Provider,{value:this.props.routeContext},S.createElement(cL.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function n9(t){let{routeContext:e,match:n,children:r}=t,i=S.useContext(DE);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),S.createElement(Vo.Provider,{value:e},r)}function r9(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if((s=n)!=null&&s.errors)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let u=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id]));u>=0||Kt(!1),o=o.slice(0,Math.min(o.length,u+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let d=o[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=u),d.route.id){let{loaderData:h,errors:f}=n,g=d.route.loader&&h[d.route.id]===void 0&&(!f||f[d.route.id]===void 0);if(d.route.lazy||g){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((u,d,h)=>{let f,g=!1,m=null,v=null;n&&(f=a&&d.route.id?a[d.route.id]:void 0,m=d.route.errorElement||e9,l&&(c<0&&h===0?(c9("route-fallback",!1),g=!0,v=null):c===h&&(g=!0,v=d.route.hydrateFallbackElement||null)));let _=e.concat(o.slice(0,h+1)),y=()=>{let w;return f?w=m:g?w=v:d.route.Component?w=S.createElement(d.route.Component,null):d.route.element?w=d.route.element:w=u,S.createElement(n9,{match:d,routeContext:{outlet:u,matches:_,isDataRoute:n!=null},children:w})};return n&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?S.createElement(t9,{location:n.location,revalidation:n.revalidation,component:m,error:f,children:y(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):y()},null)}var dL=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(dL||{}),zm=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(zm||{});function i9(t){let e=S.useContext(DE);return e||Kt(!1),e}function s9(t){let e=S.useContext(qW);return e||Kt(!1),e}function o9(t){let e=S.useContext(Vo);return e||Kt(!1),e}function hL(t){let e=o9(),n=e.matches[e.matches.length-1];return n.route.id||Kt(!1),n.route.id}function a9(){var t;let e=S.useContext(cL),n=s9(zm.UseRouteError),r=hL(zm.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function l9(){let{router:t}=i9(dL.UseNavigateStable),e=hL(zm.UseNavigateStable),n=S.useRef(!1);return uL(()=>{n.current=!0}),S.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Lh({fromRouteId:e},s)))},[t,e])}const fR={};function c9(t,e,n){!e&&!fR[t]&&(fR[t]=!0)}function rc(t){let{to:e,replace:n,state:r,relative:i}=t;Ff()||Kt(!1);let{future:s,static:o}=S.useContext(Vf),{matches:a}=S.useContext(Vo),{pathname:l}=g_(),c=GW(),u=aL(e,oL(a,s.v7_relativeSplatPath),l,i==="path"),d=JSON.stringify(u);return S.useEffect(()=>c(JSON.parse(d),{replace:n,state:r,relative:i}),[c,d,i,n,r]),null}function $b(t){return YW(t.context)}function Qt(t){Kt(!1)}function u9(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Qs.Pop,navigator:s,static:o=!1,future:a}=t;Ff()&&Kt(!1);let l=e.replace(/^\/*/,"/"),c=S.useMemo(()=>({basename:l,navigator:s,static:o,future:Lh({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=uu(r));let{pathname:u="/",search:d="",hash:h="",state:f=null,key:g="default"}=r,m=S.useMemo(()=>{let v=sL(u,l);return v==null?null:{location:{pathname:v,search:d,hash:h,state:f,key:g},navigationType:i}},[l,u,d,h,f,g,i]);return m==null?null:S.createElement(Vf.Provider,{value:c},S.createElement(p_.Provider,{children:n,value:m}))}function d9(t){let{children:e,location:n}=t;return XW(Ub(e),n)}new Promise(()=>{});function Ub(t,e){e===void 0&&(e=[]);let n=[];return S.Children.forEach(t,(r,i)=>{if(!S.isValidElement(r))return;let s=[...e,i];if(r.type===S.Fragment){n.push.apply(n,Ub(r.props.children,s));return}r.type!==Qt&&Kt(!1),!r.props.index||!r.props.children||Kt(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Ub(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.22.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const h9="6";try{window.__reactRouterVersion=h9}catch{}const f9="startTransition",pR=Hw[f9];function p9(t){let{basename:e,children:n,future:r,window:i}=t,s=S.useRef();s.current==null&&(s.current=bW({window:i,v5Compat:!0}));let o=s.current,[a,l]=S.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},u=S.useCallback(d=>{c&&pR?pR(()=>l(d)):l(d)},[l,c]);return S.useLayoutEffect(()=>o.listen(u),[o,u]),S.createElement(u9,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}var gR;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(gR||(gR={}));var mR;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(mR||(mR={}));var fL={};function g9(t){const e=new Error(t);if(e.stack===void 0)try{throw e}catch{}return e}var m9=g9,Ce=m9;function y9(t){return!!t&&typeof t.then=="function"}var ut=y9;function _9(t,e){if(t!=null)return t;throw Ce(e??"Got unexpected null or undefined")}var vt=_9;function Ee(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class m_{getValue(){throw Ce("BaseLoadable")}toPromise(){throw Ce("BaseLoadable")}valueMaybe(){throw Ce("BaseLoadable")}valueOrThrow(){throw Ce(`Loadable expected value, but in "${this.state}" state`)}promiseMaybe(){throw Ce("BaseLoadable")}promiseOrThrow(){throw Ce(`Loadable expected promise, but in "${this.state}" state`)}errorMaybe(){throw Ce("BaseLoadable")}errorOrThrow(){throw Ce(`Loadable expected error, but in "${this.state}" state`)}is(e){return e.state===this.state&&e.contents===this.contents}map(e){throw Ce("BaseLoadable")}}class v9 extends m_{constructor(e){super(),Ee(this,"state","hasValue"),Ee(this,"contents",void 0),this.contents=e}getValue(){return this.contents}toPromise(){return Promise.resolve(this.contents)}valueMaybe(){return this.contents}valueOrThrow(){return this.contents}promiseMaybe(){}errorMaybe(){}map(e){try{const n=e(this.contents);return ut(n)?Fa(n):Dc(n)?n:jf(n)}catch(n){return ut(n)?Fa(n.next(()=>this.map(e))):y_(n)}}}class w9 extends m_{constructor(e){super(),Ee(this,"state","hasError"),Ee(this,"contents",void 0),this.contents=e}getValue(){throw this.contents}toPromise(){return Promise.reject(this.contents)}valueMaybe(){}promiseMaybe(){}errorMaybe(){return this.contents}errorOrThrow(){return this.contents}map(e){return this}}class pL extends m_{constructor(e){super(),Ee(this,"state","loading"),Ee(this,"contents",void 0),this.contents=e}getValue(){throw this.contents}toPromise(){return this.contents}valueMaybe(){}promiseMaybe(){return this.contents}promiseOrThrow(){return this.contents}errorMaybe(){}map(e){return Fa(this.contents.then(n=>{const r=e(n);if(Dc(r)){const i=r;switch(i.state){case"hasValue":return i.contents;case"hasError":throw i.contents;case"loading":return i.contents}}return r}).catch(n=>{if(ut(n))return n.then(()=>this.map(e).contents);throw n}))}}function jf(t){return Object.freeze(new v9(t))}function y_(t){return Object.freeze(new w9(t))}function Fa(t){return Object.freeze(new pL(t))}function gL(){return Object.freeze(new pL(new Promise(()=>{})))}function b9(t){return t.every(e=>e.state==="hasValue")?jf(t.map(e=>e.contents)):t.some(e=>e.state==="hasError")?y_(vt(t.find(e=>e.state==="hasError"),"Invalid loadable passed to loadableAll").contents):Fa(Promise.all(t.map(e=>e.contents)))}function mL(t){const n=(Array.isArray(t)?t:Object.getOwnPropertyNames(t).map(i=>t[i])).map(i=>Dc(i)?i:ut(i)?Fa(i):jf(i)),r=b9(n);return Array.isArray(t)?r:r.map(i=>Object.getOwnPropertyNames(t).reduce((s,o,a)=>({...s,[o]:i[a]}),{}))}function Dc(t){return t instanceof m_}const x9={of:t=>ut(t)?Fa(t):Dc(t)?t:jf(t),error:t=>y_(t),loading:()=>gL(),all:mL,isLoadable:Dc};var cl={loadableWithValue:jf,loadableWithError:y_,loadableWithPromise:Fa,loadableLoading:gL,loadableAll:mL,isLoadable:Dc,RecoilLoadable:x9},S9=cl.loadableWithValue,E9=cl.loadableWithError,T9=cl.loadableWithPromise,I9=cl.loadableLoading,C9=cl.loadableAll,R9=cl.isLoadable,k9=cl.RecoilLoadable,$f=Object.freeze({__proto__:null,loadableWithValue:S9,loadableWithError:E9,loadableWithPromise:T9,loadableLoading:I9,loadableAll:C9,isLoadable:R9,RecoilLoadable:k9});const Bb={RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED:!0,RECOIL_GKS_ENABLED:new Set(["recoil_hamt_2020","recoil_sync_external_store","recoil_suppress_rerender_in_callback","recoil_memory_managament_2020"])};function A9(t,e){var n,r;const i=(n=fL[t])===null||n===void 0||(r=n.toLowerCase())===null||r===void 0?void 0:r.trim();if(i==null||i==="")return;if(!["true","false"].includes(i))throw Ce(`process.env.${t} value must be 'true', 'false', or empty: ${i}`);e(i==="true")}function P9(t,e){var n;const r=(n=fL[t])===null||n===void 0?void 0:n.trim();r==null||r===""||e(r.split(/\s*,\s*|\s+/))}function N9(){var t;typeof process>"u"||((t=process)===null||t===void 0?void 0:t.env)!=null&&(A9("RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED",e=>{Bb.RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED=e}),P9("RECOIL_GKS_ENABLED",e=>{e.forEach(n=>{Bb.RECOIL_GKS_ENABLED.add(n)})}))}N9();var du=Bb;function __(t){return du.RECOIL_GKS_ENABLED.has(t)}__.setPass=t=>{du.RECOIL_GKS_ENABLED.add(t)};__.setFail=t=>{du.RECOIL_GKS_ENABLED.delete(t)};__.clear=()=>{du.RECOIL_GKS_ENABLED.clear()};var Ze=__;function D9(t,e,{error:n}={}){return null}var O9=D9,OE=O9,M0,L0,V0;const M9=(M0=rt.createMutableSource)!==null&&M0!==void 0?M0:rt.unstable_createMutableSource,yL=(L0=rt.useMutableSource)!==null&&L0!==void 0?L0:rt.unstable_useMutableSource,_L=(V0=rt.useSyncExternalStore)!==null&&V0!==void 0?V0:rt.unstable_useSyncExternalStore;function L9(){var t;const{ReactCurrentDispatcher:e,ReactCurrentOwner:n}=rt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;return((t=e==null?void 0:e.current)!==null&&t!==void 0?t:n.currentDispatcher).useSyncExternalStore!=null}function V9(){return Ze("recoil_transition_support")?{mode:"TRANSITION_SUPPORT",early:!0,concurrent:!0}:Ze("recoil_sync_external_store")&&_L!=null?{mode:"SYNC_EXTERNAL_STORE",early:!0,concurrent:!1}:Ze("recoil_mutable_source")&&yL!=null&&typeof window<"u"&&!window.$disableRecoilValueMutableSource_TEMP_HACK_DO_NOT_USE?Ze("recoil_suppress_rerender_in_callback")?{mode:"MUTABLE_SOURCE",early:!0,concurrent:!0}:{mode:"MUTABLE_SOURCE",early:!1,concurrent:!1}:Ze("recoil_suppress_rerender_in_callback")?{mode:"LEGACY",early:!0,concurrent:!1}:{mode:"LEGACY",early:!1,concurrent:!1}}function F9(){return!1}var Uf={createMutableSource:M9,useMutableSource:yL,useSyncExternalStore:_L,currentRendererSupportsUseSyncExternalStore:L9,reactMode:V9,isFastRefreshEnabled:F9};class ME{constructor(e){Ee(this,"key",void 0),this.key=e}toJSON(){return{key:this.key}}}class vL extends ME{}class wL extends ME{}function j9(t){return t instanceof vL||t instanceof wL}var v_={AbstractRecoilValue:ME,RecoilState:vL,RecoilValueReadOnly:wL,isRecoilValue:j9},$9=v_.AbstractRecoilValue,U9=v_.RecoilState,B9=v_.RecoilValueReadOnly,z9=v_.isRecoilValue,Oc=Object.freeze({__proto__:null,AbstractRecoilValue:$9,RecoilState:U9,RecoilValueReadOnly:B9,isRecoilValue:z9});function W9(t,e){return function*(){let n=0;for(const r of t)yield e(r,n++)}()}var w_=W9;class bL{}const H9=new bL,ja=new Map,LE=new Map;function q9(t){return w_(t,e=>vt(LE.get(e)))}function G9(t){if(ja.has(t)){const e=`Duplicate atom key "${t}". This is a FATAL ERROR in
      production. But it is safe to ignore this warning if it occurred because of
      hot module replacement.`;console.warn(e)}}function K9(t){du.RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED&&G9(t.key),ja.set(t.key,t);const e=t.set==null?new Oc.RecoilValueReadOnly(t.key):new Oc.RecoilState(t.key);return LE.set(t.key,e),e}class xL extends Error{}function Q9(t){const e=ja.get(t);if(e==null)throw new xL(`Missing definition for RecoilValue: "${t}""`);return e}function Y9(t){return ja.get(t)}const Wm=new Map;function X9(t){var e;if(!Ze("recoil_memory_managament_2020"))return;const n=ja.get(t);if(n!=null&&(e=n.shouldDeleteConfigOnRelease)!==null&&e!==void 0&&e.call(n)){var r;ja.delete(t),(r=SL(t))===null||r===void 0||r(),Wm.delete(t)}}function J9(t,e){Ze("recoil_memory_managament_2020")&&(e===void 0?Wm.delete(t):Wm.set(t,e))}function SL(t){return Wm.get(t)}var yr={nodes:ja,recoilValues:LE,registerNode:K9,getNode:Q9,getNodeMaybe:Y9,deleteNodeConfigIfPossible:X9,setConfigDeletionHandler:J9,getConfigDeletionHandler:SL,recoilValuesForKeys:q9,NodeMissingError:xL,DefaultValue:bL,DEFAULT_VALUE:H9};function Z9(t,e){e()}var e6={enqueueExecution:Z9};function t6(t,e){return e={exports:{}},t(e,e.exports),e.exports}var n6=t6(function(t){var e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},n={},r=5,i=Math.pow(2,r),s=i-1,o=i/2,a=i/4,l={},c=function(P){return function(){return P}},u=n.hash=function(O){var P=typeof O>"u"?"undefined":e(O);if(P==="number")return O;P!=="string"&&(O+="");for(var H=0,ne=0,re=O.length;ne<re;++ne){var ae=O.charCodeAt(ne);H=(H<<5)-H+ae|0}return H},d=function(P){return P-=P>>1&1431655765,P=(P&858993459)+(P>>2&858993459),P=P+(P>>4)&252645135,P+=P>>8,P+=P>>16,P&127},h=function(P,H){return H>>>P&s},f=function(P){return 1<<P},g=function(P,H){return d(P&H-1)},m=function(P,H,ne,re){var ae=re;if(!P){var be=re.length;ae=new Array(be);for(var _e=0;_e<be;++_e)ae[_e]=re[_e]}return ae[H]=ne,ae},v=function(P,H,ne){var re=ne.length-1,ae=0,be=0,_e=ne;if(P)ae=be=H;else for(_e=new Array(re);ae<H;)_e[be++]=ne[ae++];for(++ae;ae<=re;)_e[be++]=ne[ae++];return P&&(_e.length=re),_e},_=function(P,H,ne,re){var ae=re.length;if(P){for(var be=ae;be>=H;)re[be--]=re[be];return re[H]=ne,re}for(var _e=0,ve=0,Re=new Array(ae+1);_e<H;)Re[ve++]=re[_e++];for(Re[H]=ne;_e<ae;)Re[++ve]=re[_e++];return Re},y=1,w=2,b=3,x=4,T={__hamt_isEmpty:!0},I=function(P){return P===T||P&&P.__hamt_isEmpty},E=function(P,H,ne,re){return{type:y,edit:P,hash:H,key:ne,value:re,_modify:M}},k=function(P,H,ne){return{type:w,edit:P,hash:H,children:ne,_modify:U}},D=function(P,H,ne){return{type:b,edit:P,mask:H,children:ne,_modify:j}},F=function(P,H,ne){return{type:x,edit:P,size:H,children:ne,_modify:ie}},K=function(P){return P===T||P.type===y||P.type===w},X=function(P,H,ne,re,ae){for(var be=[],_e=re,ve=0,Re=0;_e;++Re)_e&1&&(be[Re]=ae[ve++]),_e>>>=1;return be[H]=ne,F(P,ve+1,be)},le=function(P,H,ne,re){for(var ae=new Array(H-1),be=0,_e=0,ve=0,Re=re.length;ve<Re;++ve)if(ve!==ne){var yt=re[ve];yt&&!I(yt)&&(ae[be++]=yt,_e|=1<<ve)}return D(P,_e,ae)},C=function O(P,H,ne,re,ae,be){if(ne===ae)return k(P,ne,[be,re]);var _e=h(H,ne),ve=h(H,ae);return D(P,f(_e)|f(ve),_e===ve?[O(P,H+r,ne,re,ae,be)]:_e<ve?[re,be]:[be,re])},R=function(P,H,ne,re,ae,be,_e,ve){for(var Re=ae.length,yt=0;yt<Re;++yt){var tr=ae[yt];if(ne(_e,tr.key)){var tn=tr.value,Mr=be(tn);return Mr===tn?ae:Mr===l?(--ve.value,v(P,yt,ae)):m(P,yt,E(H,re,_e,Mr),ae)}}var Yr=be();return Yr===l?ae:(++ve.value,m(P,Re,E(H,re,_e,Yr),ae))},V=function(P,H){return P===H.edit},M=function(P,H,ne,re,ae,be,_e){if(H(be,this.key)){var ve=re(this.value);return ve===this.value?this:ve===l?(--_e.value,T):V(P,this)?(this.value=ve,this):E(P,ae,be,ve)}var Re=re();return Re===l?this:(++_e.value,C(P,ne,this.hash,this,ae,E(P,ae,be,Re)))},U=function(P,H,ne,re,ae,be,_e){if(ae===this.hash){var ve=V(P,this),Re=R(ve,P,H,this.hash,this.children,re,be,_e);return Re===this.children?this:Re.length>1?k(P,this.hash,Re):Re[0]}var yt=re();return yt===l?this:(++_e.value,C(P,ne,this.hash,this,ae,E(P,ae,be,yt)))},j=function(P,H,ne,re,ae,be,_e){var ve=this.mask,Re=this.children,yt=h(ne,ae),tr=f(yt),tn=g(ve,tr),Mr=ve&tr,Yr=Mr?Re[tn]:T,Tl=Yr._modify(P,H,ne+r,re,ae,be,_e);if(Yr===Tl)return this;var Pp=V(P,this),Ou=ve,Mu=void 0;if(Mr&&I(Tl)){if(Ou&=~tr,!Ou)return T;if(Re.length<=2&&K(Re[tn^1]))return Re[tn^1];Mu=v(Pp,tn,Re)}else if(!Mr&&!I(Tl)){if(Re.length>=o)return X(P,yt,Tl,ve,Re);Ou|=tr,Mu=_(Pp,tn,Tl,Re)}else Mu=m(Pp,tn,Tl,Re);return Pp?(this.mask=Ou,this.children=Mu,this):D(P,Ou,Mu)},ie=function(P,H,ne,re,ae,be,_e){var ve=this.size,Re=this.children,yt=h(ne,ae),tr=Re[yt],tn=(tr||T)._modify(P,H,ne+r,re,ae,be,_e);if(tr===tn)return this;var Mr=V(P,this),Yr=void 0;if(I(tr)&&!I(tn))++ve,Yr=m(Mr,yt,tn,Re);else if(!I(tr)&&I(tn)){if(--ve,ve<=a)return le(P,ve,yt,Re);Yr=m(Mr,yt,T,Re)}else Yr=m(Mr,yt,tn,Re);return Mr?(this.size=ve,this.children=Yr,this):F(P,ve,Yr)};T._modify=function(O,P,H,ne,re,ae,be){var _e=ne();return _e===l?T:(++be.value,E(O,re,ae,_e))};function A(O,P,H,ne,re){this._editable=O,this._edit=P,this._config=H,this._root=ne,this._size=re}A.prototype.setTree=function(O,P){return this._editable?(this._root=O,this._size=P,this):O===this._root?this:new A(this._editable,this._edit,this._config,O,P)};var $=n.tryGetHash=function(O,P,H,ne){for(var re=ne._root,ae=0,be=ne._config.keyEq;;)switch(re.type){case y:return be(H,re.key)?re.value:O;case w:{if(P===re.hash)for(var _e=re.children,ve=0,Re=_e.length;ve<Re;++ve){var yt=_e[ve];if(be(H,yt.key))return yt.value}return O}case b:{var tr=h(ae,P),tn=f(tr);if(re.mask&tn){re=re.children[g(re.mask,tn)],ae+=r;break}return O}case x:{if(re=re.children[h(ae,P)],re){ae+=r;break}return O}default:return O}};A.prototype.tryGetHash=function(O,P,H){return $(O,P,H,this)};var B=n.tryGet=function(O,P,H){return $(O,H._config.hash(P),P,H)};A.prototype.tryGet=function(O,P){return B(O,P,this)};var ce=n.getHash=function(O,P,H){return $(void 0,O,P,H)};A.prototype.getHash=function(O,P){return ce(O,P,this)},n.get=function(O,P){return $(void 0,P._config.hash(O),O,P)},A.prototype.get=function(O,P){return B(P,O,this)};var Q=n.has=function(O,P,H){return $(l,O,P,H)!==l};A.prototype.hasHash=function(O,P){return Q(O,P,this)};var me=n.has=function(O,P){return Q(P._config.hash(O),O,P)};A.prototype.has=function(O){return me(O,this)};var we=function(P,H){return P===H};n.make=function(O){return new A(0,0,{keyEq:O&&O.keyEq||we,hash:O&&O.hash||u},T,0)},n.empty=n.make();var he=n.isEmpty=function(O){return O&&!!I(O._root)};A.prototype.isEmpty=function(){return he(this)};var et=n.modifyHash=function(O,P,H,ne){var re={value:ne._size},ae=ne._root._modify(ne._editable?ne._edit:NaN,ne._config.keyEq,0,O,P,H,re);return ne.setTree(ae,re.value)};A.prototype.modifyHash=function(O,P,H){return et(H,O,P,this)};var Rt=n.modify=function(O,P,H){return et(O,H._config.hash(P),P,H)};A.prototype.modify=function(O,P){return Rt(P,O,this)};var Ue=n.setHash=function(O,P,H,ne){return et(c(H),O,P,ne)};A.prototype.setHash=function(O,P,H){return Ue(O,P,H,this)};var it=n.set=function(O,P,H){return Ue(H._config.hash(O),O,P,H)};A.prototype.set=function(O,P){return it(O,P,this)};var er=c(l),qi=n.removeHash=function(O,P,H){return et(er,O,P,H)};A.prototype.removeHash=A.prototype.deleteHash=function(O,P){return qi(O,P,this)};var Or=n.remove=function(O,P){return qi(P._config.hash(O),O,P)};A.prototype.remove=A.prototype.delete=function(O){return Or(O,this)};var _r=n.beginMutation=function(O){return new A(O._editable+1,O._edit+1,O._config,O._root,O._size)};A.prototype.beginMutation=function(){return _r(this)};var Y1=n.endMutation=function(O){return O._editable=O._editable&&O._editable-1,O};A.prototype.endMutation=function(){return Y1(this)};var F4=n.mutate=function(O,P){var H=_r(P);return O(H),Y1(H)};A.prototype.mutate=function(O){return F4(O,this)};var s0=function(P){return P&&X1(P[0],P[1],P[2],P[3],P[4])},X1=function(P,H,ne,re,ae){for(;ne<P;){var be=H[ne++];if(be&&!I(be))return J1(be,re,[P,H,ne,re,ae])}return s0(ae)},J1=function(P,H,ne){switch(P.type){case y:return{value:H(P),rest:ne};case w:case x:case b:var re=P.children;return X1(re.length,re,0,H,ne);default:return s0(ne)}},j4={done:!0};function o0(O){this.v=O}o0.prototype.next=function(){if(!this.v)return j4;var O=this.v;return this.v=s0(O.rest),O},o0.prototype[Symbol.iterator]=function(){return this};var a0=function(P,H){return new o0(J1(P._root,H))},$4=function(P){return[P.key,P.value]},U4=n.entries=function(O){return a0(O,$4)};A.prototype.entries=A.prototype[Symbol.iterator]=function(){return U4(this)};var B4=function(P){return P.key},z4=n.keys=function(O){return a0(O,B4)};A.prototype.keys=function(){return z4(this)};var W4=function(P){return P.value},H4=n.values=A.prototype.values=function(O){return a0(O,W4)};A.prototype.values=function(){return H4(this)};var Z1=n.fold=function(O,P,H){var ne=H._root;if(ne.type===y)return O(P,ne.value,ne.key);for(var re=[ne.children],ae=void 0;ae=re.pop();)for(var be=0,_e=ae.length;be<_e;){var ve=ae[be++];ve&&ve.type&&(ve.type===y?P=O(P,ve.value,ve.key):re.push(ve.children))}return P};A.prototype.fold=function(O,P){return Z1(O,P,this)};var q4=n.forEach=function(O,P){return Z1(function(H,ne,re){return O(ne,re,P)},null,P)};A.prototype.forEach=function(O){return q4(O,this)};var G4=n.count=function(O){return O._size};A.prototype.count=function(){return G4(this)},Object.defineProperty(A.prototype,"size",{get:A.prototype.count}),t.exports?t.exports=n:(void 0).hamt=n});class r6{constructor(e){Ee(this,"_map",void 0),this._map=new Map(e==null?void 0:e.entries())}keys(){return this._map.keys()}entries(){return this._map.entries()}get(e){return this._map.get(e)}has(e){return this._map.has(e)}set(e,n){return this._map.set(e,n),this}delete(e){return this._map.delete(e),this}clone(){return FE(this)}toMap(){return new Map(this._map)}}class VE{constructor(e){if(Ee(this,"_hamt",n6.empty.beginMutation()),e instanceof VE){const n=e._hamt.endMutation();e._hamt=n.beginMutation(),this._hamt=n.beginMutation()}else if(e)for(const[n,r]of e.entries())this._hamt.set(n,r)}keys(){return this._hamt.keys()}entries(){return this._hamt.entries()}get(e){return this._hamt.get(e)}has(e){return this._hamt.has(e)}set(e,n){return this._hamt.set(e,n),this}delete(e){return this._hamt.delete(e),this}clone(){return FE(this)}toMap(){return new Map(this._hamt)}}function FE(t){return Ze("recoil_hamt_2020")?new VE(t):new r6(t)}var i6={persistentMap:FE},s6=i6.persistentMap,o6=Object.freeze({__proto__:null,persistentMap:s6});function a6(t,...e){const n=new Set;e:for(const r of t){for(const i of e)if(i.has(r))continue e;n.add(r)}return n}var Yd=a6;function l6(t,e){const n=new Map;return t.forEach((r,i)=>{n.set(i,e(r,i))}),n}var Hm=l6;function c6(){return{nodeDeps:new Map,nodeToNodeSubscriptions:new Map}}function u6(t){return{nodeDeps:Hm(t.nodeDeps,e=>new Set(e)),nodeToNodeSubscriptions:Hm(t.nodeToNodeSubscriptions,e=>new Set(e))}}function F0(t,e,n,r){const{nodeDeps:i,nodeToNodeSubscriptions:s}=n,o=i.get(t);if(o&&r&&o!==r.nodeDeps.get(t))return;i.set(t,e);const a=o==null?e:Yd(e,o);for(const l of a)s.has(l)||s.set(l,new Set),vt(s.get(l)).add(t);if(o){const l=Yd(o,e);for(const c of l){if(!s.has(c))return;const u=vt(s.get(c));u.delete(t),u.size===0&&s.delete(c)}}}function d6(t,e,n,r){var i,s,o,a;const l=n.getState();r===l.currentTree.version||r===((i=l.nextTree)===null||i===void 0?void 0:i.version)||((s=l.previousTree)===null||s===void 0||s.version);const c=n.getGraph(r);if(F0(t,e,c),r===((o=l.previousTree)===null||o===void 0?void 0:o.version)){const d=n.getGraph(l.currentTree.version);F0(t,e,d,c)}if(r===((a=l.previousTree)===null||a===void 0?void 0:a.version)||r===l.currentTree.version){var u;const d=(u=l.nextTree)===null||u===void 0?void 0:u.version;if(d!==void 0){const h=n.getGraph(d);F0(t,e,h,c)}}}var Bf={cloneGraph:u6,graph:c6,saveDepsToStore:d6};let h6=0;const f6=()=>h6++;let p6=0;const g6=()=>p6++;let m6=0;const y6=()=>m6++;var b_={getNextTreeStateVersion:f6,getNextStoreID:g6,getNextComponentID:y6};const{persistentMap:yR}=o6,{graph:_6}=Bf,{getNextTreeStateVersion:EL}=b_;function TL(){const t=EL();return{version:t,stateID:t,transactionMetadata:{},dirtyAtoms:new Set,atomValues:yR(),nonvalidatedAtoms:yR()}}function v6(){const t=TL();return{currentTree:t,nextTree:null,previousTree:null,commitDepth:0,knownAtoms:new Set,knownSelectors:new Set,transactionSubscriptions:new Map,nodeTransactionSubscriptions:new Map,nodeToComponentSubscriptions:new Map,queuedComponentCallbacks_DEPRECATED:[],suspendedComponentResolvers:new Set,graphsByVersion:new Map().set(t.version,_6()),retention:{referenceCounts:new Map,nodesRetainedByZone:new Map,retainablesToCheckForRelease:new Set},nodeCleanupFunctions:new Map}}var IL={makeEmptyTreeState:TL,makeEmptyStoreState:v6,getNextTreeStateVersion:EL};class CL{}function w6(){return new CL}var x_={RetentionZone:CL,retentionZone:w6};function b6(t,e){const n=new Set(t);return n.add(e),n}function x6(t,e){const n=new Set(t);return n.delete(e),n}function S6(t,e,n){const r=new Map(t);return r.set(e,n),r}function E6(t,e,n){const r=new Map(t);return r.set(e,n(r.get(e))),r}function T6(t,e){const n=new Map(t);return n.delete(e),n}function I6(t,e){const n=new Map(t);return e.forEach(r=>n.delete(r)),n}var RL={setByAddingToSet:b6,setByDeletingFromSet:x6,mapBySettingInMap:S6,mapByUpdatingInMap:E6,mapByDeletingFromMap:T6,mapByDeletingMultipleFromMap:I6};function*C6(t,e){let n=0;for(const r of t)e(r,n++)&&(yield r)}var jE=C6;function R6(t,e){return new Proxy(t,{get:(r,i)=>(!(i in r)&&i in e&&(r[i]=e[i]()),r[i]),ownKeys:r=>Object.keys(r)})}var kL=R6;const{getNode:zf,getNodeMaybe:k6,recoilValuesForKeys:_R}=yr,{RetentionZone:vR}=x_,{setByAddingToSet:A6}=RL,P6=Object.freeze(new Set);class N6 extends Error{}function D6(t,e,n){if(!Ze("recoil_memory_managament_2020"))return()=>{};const{nodesRetainedByZone:r}=t.getState().retention;function i(s){let o=r.get(s);o||r.set(s,o=new Set),o.add(e)}if(n instanceof vR)i(n);else if(Array.isArray(n))for(const s of n)i(s);return()=>{if(!Ze("recoil_memory_managament_2020"))return;const{retention:s}=t.getState();function o(a){const l=s.nodesRetainedByZone.get(a);l==null||l.delete(e),l&&l.size===0&&s.nodesRetainedByZone.delete(a)}if(n instanceof vR)o(n);else if(Array.isArray(n))for(const a of n)o(a)}}function $E(t,e,n,r){const i=t.getState();if(i.nodeCleanupFunctions.has(n))return;const s=zf(n),o=D6(t,n,s.retainedBy),a=s.init(t,e,r);i.nodeCleanupFunctions.set(n,()=>{a(),o()})}function O6(t,e,n){$E(t,t.getState().currentTree,e,n)}function M6(t,e){var n;const r=t.getState();(n=r.nodeCleanupFunctions.get(e))===null||n===void 0||n(),r.nodeCleanupFunctions.delete(e)}function L6(t,e,n){return $E(t,e,n,"get"),zf(n).get(t,e)}function AL(t,e,n){return zf(n).peek(t,e)}function V6(t,e,n){var r;const i=k6(e);return i==null||(r=i.invalidate)===null||r===void 0||r.call(i,t),{...t,atomValues:t.atomValues.clone().delete(e),nonvalidatedAtoms:t.nonvalidatedAtoms.clone().set(e,n),dirtyAtoms:A6(t.dirtyAtoms,e)}}function F6(t,e,n,r){const i=zf(n);if(i.set==null)throw new N6(`Attempt to set read-only RecoilValue: ${n}`);const s=i.set;return $E(t,e,n,"set"),s(t,e,r)}function j6(t,e,n){const r=t.getState(),i=t.getGraph(e.version),s=zf(n).nodeType;return kL({type:s},{loadable:()=>AL(t,e,n),isActive:()=>r.knownAtoms.has(n)||r.knownSelectors.has(n),isSet:()=>s==="selector"?!1:e.atomValues.has(n),isModified:()=>e.dirtyAtoms.has(n),deps:()=>{var o;return _R((o=i.nodeDeps.get(n))!==null&&o!==void 0?o:[])},subscribers:()=>{var o,a;return{nodes:_R(jE(PL(t,e,new Set([n])),l=>l!==n)),components:w_((o=(a=r.nodeToComponentSubscriptions.get(n))===null||a===void 0?void 0:a.values())!==null&&o!==void 0?o:[],([l])=>({name:l}))}}})}function PL(t,e,n){const r=new Set,i=Array.from(n),s=t.getGraph(e.version);for(let a=i.pop();a;a=i.pop()){var o;r.add(a);const l=(o=s.nodeToNodeSubscriptions.get(a))!==null&&o!==void 0?o:P6;for(const c of l)r.has(c)||i.push(c)}return r}var Fo={getNodeLoadable:L6,peekNodeLoadable:AL,setNodeValue:F6,initializeNode:O6,cleanUpNode:M6,setUnvalidatedAtomValue_DEPRECATED:V6,peekNodeInfo:j6,getDownstreamNodes:PL};let NL=null;function $6(t){NL=t}function U6(){var t;(t=NL)===null||t===void 0||t()}var DL={setInvalidateMemoizedSnapshot:$6,invalidateMemoizedSnapshot:U6};const{getDownstreamNodes:B6,getNodeLoadable:OL,setNodeValue:z6}=Fo,{getNextComponentID:W6}=b_,{getNode:H6,getNodeMaybe:ML}=yr,{DefaultValue:UE}=yr,{reactMode:q6}=Uf,{AbstractRecoilValue:G6,RecoilState:K6,RecoilValueReadOnly:Q6,isRecoilValue:Y6}=Oc,{invalidateMemoizedSnapshot:X6}=DL;function J6(t,{key:e},n=t.getState().currentTree){var r,i;const s=t.getState();n.version===s.currentTree.version||n.version===((r=s.nextTree)===null||r===void 0?void 0:r.version)||(n.version,(i=s.previousTree)===null||i===void 0||i.version);const o=OL(t,n,e);return o.state==="loading"&&o.contents.catch(()=>{}),o}function Z6(t,e){const n=t.clone();return e.forEach((r,i)=>{r.state==="hasValue"&&r.contents instanceof UE?n.delete(i):n.set(i,r)}),n}function eH(t,e,{key:n},r){if(typeof r=="function"){const i=OL(t,e,n);if(i.state==="loading"){const s=`Tried to set atom or selector "${n}" using an updater function while the current state is pending, this is not currently supported.`;throw Ce(s)}else if(i.state==="hasError")throw i.contents;return r(i.contents)}else return r}function tH(t,e,n){if(n.type==="set"){const{recoilValue:i,valueOrUpdater:s}=n,o=eH(t,e,i,s),a=z6(t,e,i.key,o);for(const[l,c]of a.entries())zb(e,l,c)}else if(n.type==="setLoadable"){const{recoilValue:{key:i},loadable:s}=n;zb(e,i,s)}else if(n.type==="markModified"){const{recoilValue:{key:i}}=n;e.dirtyAtoms.add(i)}else if(n.type==="setUnvalidated"){var r;const{recoilValue:{key:i},unvalidatedValue:s}=n,o=ML(i);o==null||(r=o.invalidate)===null||r===void 0||r.call(o,e),e.atomValues.delete(i),e.nonvalidatedAtoms.set(i,s),e.dirtyAtoms.add(i)}else OE(`Unknown action ${n.type}`)}function zb(t,e,n){n.state==="hasValue"&&n.contents instanceof UE?t.atomValues.delete(e):t.atomValues.set(e,n),t.dirtyAtoms.add(e),t.nonvalidatedAtoms.delete(e)}function LL(t,e){t.replaceState(n=>{const r=VL(n);for(const i of e)tH(t,r,i);return FL(t,r),X6(),r})}function S_(t,e){if(Xd.length){const n=Xd[Xd.length-1];let r=n.get(t);r||n.set(t,r=[]),r.push(e)}else LL(t,[e])}const Xd=[];function nH(){const t=new Map;return Xd.push(t),()=>{for(const[e,n]of t)LL(e,n);Xd.pop()}}function VL(t){return{...t,atomValues:t.atomValues.clone(),nonvalidatedAtoms:t.nonvalidatedAtoms.clone(),dirtyAtoms:new Set(t.dirtyAtoms)}}function FL(t,e){const n=B6(t,e,e.dirtyAtoms);for(const s of n){var r,i;(r=ML(s))===null||r===void 0||(i=r.invalidate)===null||i===void 0||i.call(r,e)}}function jL(t,e,n){S_(t,{type:"set",recoilValue:e,valueOrUpdater:n})}function rH(t,e,n){if(n instanceof UE)return jL(t,e,n);S_(t,{type:"setLoadable",recoilValue:e,loadable:n})}function iH(t,e){S_(t,{type:"markModified",recoilValue:e})}function sH(t,e,n){S_(t,{type:"setUnvalidated",recoilValue:e,unvalidatedValue:n})}function oH(t,{key:e},n,r=null){const i=W6(),s=t.getState();s.nodeToComponentSubscriptions.has(e)||s.nodeToComponentSubscriptions.set(e,new Map),vt(s.nodeToComponentSubscriptions.get(e)).set(i,[r??"<not captured>",n]);const o=q6();if(o.early&&(o.mode==="LEGACY"||o.mode==="MUTABLE_SOURCE")){const a=t.getState().nextTree;a&&a.dirtyAtoms.has(e)&&n(a)}return{release:()=>{const a=t.getState(),l=a.nodeToComponentSubscriptions.get(e);l===void 0||!l.has(i)||(l.delete(i),l.size===0&&a.nodeToComponentSubscriptions.delete(e))}}}function aH(t,e){var n;const{currentTree:r}=t.getState(),i=H6(e.key);(n=i.clearCache)===null||n===void 0||n.call(i,t,r)}var Wi={RecoilValueReadOnly:Q6,AbstractRecoilValue:G6,RecoilState:K6,getRecoilValueAsLoadable:J6,setRecoilValue:jL,setRecoilValueLoadable:rH,markRecoilValueModified:iH,setUnvalidatedRecoilValue:sH,subscribeToRecoilValue:oH,isRecoilValue:Y6,applyAtomValueWrites:Z6,batchStart:nH,writeLoadableToTreeState:zb,invalidateDownstreams:FL,copyTreeState:VL,refreshRecoilValue:aH};function lH(t,e,n){const r=t.entries();let i=r.next();for(;!i.done;){const s=i.value;if(e.call(n,s[1],s[0],t))return!0;i=r.next()}return!1}var cH=lH;const{cleanUpNode:uH}=Fo,{deleteNodeConfigIfPossible:dH,getNode:$L}=yr,{RetentionZone:UL}=x_,hH=12e4,BL=new Set;function zL(t,e){const n=t.getState(),r=n.currentTree;if(n.nextTree)return;const i=new Set;for(const o of e)if(o instanceof UL)for(const a of mH(n,o))i.add(a);else i.add(o);const s=fH(t,i);for(const o of s)gH(t,r,o)}function fH(t,e){const n=t.getState(),r=n.currentTree,i=t.getGraph(r.version),s=new Set,o=new Set;return a(e),s;function a(l){const c=new Set,u=pH(t,r,l,s,o);for(const g of u){var d;if($L(g).retainedBy==="recoilRoot"){o.add(g);continue}if(((d=n.retention.referenceCounts.get(g))!==null&&d!==void 0?d:0)>0){o.add(g);continue}if(WL(g).some(v=>n.retention.referenceCounts.get(v))){o.add(g);continue}const m=i.nodeToNodeSubscriptions.get(g);if(m&&cH(m,v=>o.has(v))){o.add(g);continue}s.add(g),c.add(g)}const h=new Set;for(const g of c)for(const m of(f=i.nodeDeps.get(g))!==null&&f!==void 0?f:BL){var f;s.has(m)||h.add(m)}h.size&&a(h)}}function pH(t,e,n,r,i){const s=t.getGraph(e.version),o=[],a=new Set;for(;n.size>0;)l(vt(n.values().next().value));return o;function l(c){if(r.has(c)||i.has(c)){n.delete(c);return}if(a.has(c))return;const u=s.nodeToNodeSubscriptions.get(c);if(u)for(const d of u)l(d);a.add(c),n.delete(c),o.push(c)}}function gH(t,e,n){if(!Ze("recoil_memory_managament_2020"))return;uH(t,n);const r=t.getState();r.knownAtoms.delete(n),r.knownSelectors.delete(n),r.nodeTransactionSubscriptions.delete(n),r.retention.referenceCounts.delete(n);const i=WL(n);for(const l of i){var s;(s=r.retention.nodesRetainedByZone.get(l))===null||s===void 0||s.delete(n)}e.atomValues.delete(n),e.dirtyAtoms.delete(n),e.nonvalidatedAtoms.delete(n);const o=r.graphsByVersion.get(e.version);if(o){const l=o.nodeDeps.get(n);if(l!==void 0){o.nodeDeps.delete(n);for(const c of l){var a;(a=o.nodeToNodeSubscriptions.get(c))===null||a===void 0||a.delete(n)}}o.nodeToNodeSubscriptions.delete(n)}dH(n)}function mH(t,e){var n;return(n=t.retention.nodesRetainedByZone.get(e))!==null&&n!==void 0?n:BL}function WL(t){const e=$L(t).retainedBy;return e===void 0||e==="components"||e==="recoilRoot"?[]:e instanceof UL?[e]:e}function yH(t,e){const n=t.getState();n.nextTree?n.retention.retainablesToCheckForRelease.add(e):zL(t,new Set([e]))}function _H(t,e,n){var r;if(!Ze("recoil_memory_managament_2020"))return;const i=t.getState().retention.referenceCounts,s=((r=i.get(e))!==null&&r!==void 0?r:0)+n;s===0?HL(t,e):i.set(e,s)}function HL(t,e){if(!Ze("recoil_memory_managament_2020"))return;t.getState().retention.referenceCounts.delete(e),yH(t,e)}function vH(t){if(!Ze("recoil_memory_managament_2020"))return;const e=t.getState();zL(t,e.retention.retainablesToCheckForRelease),e.retention.retainablesToCheckForRelease.clear()}function wH(t){return t===void 0?"recoilRoot":t}var ul={SUSPENSE_TIMEOUT_MS:hH,updateRetainCount:_H,updateRetainCountToZero:HL,releaseScheduledRetainablesNow:vH,retainedByOptionWithDefault:wH};const{unstable_batchedUpdates:bH}=wW;var xH={unstable_batchedUpdates:bH};const{unstable_batchedUpdates:SH}=xH;var EH={unstable_batchedUpdates:SH};const{batchStart:TH}=Wi,{unstable_batchedUpdates:IH}=EH;let BE=IH||(t=>t());const CH=t=>{BE=t},RH=()=>BE,kH=t=>{BE(()=>{let e=()=>{};try{e=TH(),t()}finally{e()}})};var E_={getBatcher:RH,setBatcher:CH,batchUpdates:kH};function*AH(t){for(const e of t)for(const n of e)yield n}var qL=AH;const GL=typeof Window>"u"||typeof window>"u",PH=t=>!GL&&(t===window||t instanceof Window),NH=typeof navigator<"u"&&navigator.product==="ReactNative";var T_={isSSR:GL,isReactNative:NH,isWindow:PH};function DH(t,e){let n;return(...r)=>{n||(n={});const i=e(...r);return Object.hasOwnProperty.call(n,i)||(n[i]=t(...r)),n[i]}}function OH(t,e){let n,r;return(...i)=>{const s=e(...i);return n===s||(n=s,r=t(...i)),r}}function MH(t,e){let n,r;return[(...o)=>{const a=e(...o);return n===a||(n=a,r=t(...o)),r},()=>{n=null}]}var LH={memoizeWithArgsHash:DH,memoizeOneWithArgsHash:OH,memoizeOneWithArgsHashAndInvalidation:MH};const{batchUpdates:Wb}=E_,{initializeNode:VH,peekNodeInfo:FH}=Fo,{graph:jH}=Bf,{getNextStoreID:$H}=b_,{DEFAULT_VALUE:UH,recoilValues:wR,recoilValuesForKeys:bR}=yr,{AbstractRecoilValue:BH,getRecoilValueAsLoadable:zH,setRecoilValue:xR,setUnvalidatedRecoilValue:WH}=Wi,{updateRetainCount:Gg}=ul,{setInvalidateMemoizedSnapshot:HH}=DL,{getNextTreeStateVersion:qH,makeEmptyStoreState:GH}=IL,{isSSR:KH}=T_,{memoizeOneWithArgsHashAndInvalidation:QH}=LH;class I_{constructor(e,n){Ee(this,"_store",void 0),Ee(this,"_refCount",1),Ee(this,"getLoadable",r=>(this.checkRefCount_INTERNAL(),zH(this._store,r))),Ee(this,"getPromise",r=>(this.checkRefCount_INTERNAL(),this.getLoadable(r).toPromise())),Ee(this,"getNodes_UNSTABLE",r=>{if(this.checkRefCount_INTERNAL(),(r==null?void 0:r.isModified)===!0){if((r==null?void 0:r.isInitialized)===!1)return[];const o=this._store.getState().currentTree;return bR(o.dirtyAtoms)}const i=this._store.getState().knownAtoms,s=this._store.getState().knownSelectors;return(r==null?void 0:r.isInitialized)==null?wR.values():r.isInitialized===!0?bR(qL([i,s])):jE(wR.values(),({key:o})=>!i.has(o)&&!s.has(o))}),Ee(this,"getInfo_UNSTABLE",({key:r})=>(this.checkRefCount_INTERNAL(),FH(this._store,this._store.getState().currentTree,r))),Ee(this,"map",r=>{this.checkRefCount_INTERNAL();const i=new Hb(this,Wb);return r(i),i}),Ee(this,"asyncMap",async r=>{this.checkRefCount_INTERNAL();const i=new Hb(this,Wb);return i.retain(),await r(i),i.autoRelease_INTERNAL(),i}),this._store={storeID:$H(),parentStoreID:n,getState:()=>e,replaceState:r=>{e.currentTree=r(e.currentTree)},getGraph:r=>{const i=e.graphsByVersion;if(i.has(r))return vt(i.get(r));const s=jH();return i.set(r,s),s},subscribeToTransactions:()=>({release:()=>{}}),addTransactionMetadata:()=>{throw Ce("Cannot subscribe to Snapshots")}};for(const r of this._store.getState().knownAtoms)VH(this._store,r,"get"),Gg(this._store,r,1);this.autoRelease_INTERNAL()}retain(){this._refCount<=0,this._refCount++;let e=!1;return()=>{e||(e=!0,this._release())}}autoRelease_INTERNAL(){KH||window.setTimeout(()=>this._release(),10)}_release(){if(this._refCount--,this._refCount===0){if(this._store.getState().nodeCleanupFunctions.forEach(e=>e()),this._store.getState().nodeCleanupFunctions.clear(),!Ze("recoil_memory_managament_2020"))return}else this._refCount<0}isRetained(){return this._refCount>0}checkRefCount_INTERNAL(){Ze("recoil_memory_managament_2020")&&this._refCount<=0}getStore_INTERNAL(){return this.checkRefCount_INTERNAL(),this._store}getID(){return this.checkRefCount_INTERNAL(),this._store.getState().currentTree.stateID}getStoreID(){return this.checkRefCount_INTERNAL(),this._store.storeID}}function KL(t,e,n=!1){const r=t.getState(),i=n?qH():e.version;return{currentTree:{version:n?i:e.version,stateID:n?i:e.stateID,transactionMetadata:{...e.transactionMetadata},dirtyAtoms:new Set(e.dirtyAtoms),atomValues:e.atomValues.clone(),nonvalidatedAtoms:e.nonvalidatedAtoms.clone()},commitDepth:0,nextTree:null,previousTree:null,knownAtoms:new Set(r.knownAtoms),knownSelectors:new Set(r.knownSelectors),transactionSubscriptions:new Map,nodeTransactionSubscriptions:new Map,nodeToComponentSubscriptions:new Map,queuedComponentCallbacks_DEPRECATED:[],suspendedComponentResolvers:new Set,graphsByVersion:new Map().set(i,t.getGraph(e.version)),retention:{referenceCounts:new Map,nodesRetainedByZone:new Map,retainablesToCheckForRelease:new Set},nodeCleanupFunctions:new Map(w_(r.nodeCleanupFunctions.entries(),([s])=>[s,()=>{}]))}}function YH(t){const e=new I_(GH());return t!=null?e.map(t):e}const[SR,QL]=QH((t,e)=>{var n;const r=t.getState(),i=e==="latest"?(n=r.nextTree)!==null&&n!==void 0?n:r.currentTree:vt(r.previousTree);return new I_(KL(t,i),t.storeID)},(t,e)=>{var n,r;return String(e)+String(t.storeID)+String((n=t.getState().nextTree)===null||n===void 0?void 0:n.version)+String(t.getState().currentTree.version)+String((r=t.getState().previousTree)===null||r===void 0?void 0:r.version)});HH(QL);function XH(t,e="latest"){const n=SR(t,e);return n.isRetained()?n:(QL(),SR(t,e))}class Hb extends I_{constructor(e,n){super(KL(e.getStore_INTERNAL(),e.getStore_INTERNAL().getState().currentTree,!0),e.getStoreID()),Ee(this,"_batch",void 0),Ee(this,"set",(r,i)=>{this.checkRefCount_INTERNAL();const s=this.getStore_INTERNAL();this._batch(()=>{Gg(s,r.key,1),xR(this.getStore_INTERNAL(),r,i)})}),Ee(this,"reset",r=>{this.checkRefCount_INTERNAL();const i=this.getStore_INTERNAL();this._batch(()=>{Gg(i,r.key,1),xR(this.getStore_INTERNAL(),r,UH)})}),Ee(this,"setUnvalidatedAtomValues_DEPRECATED",r=>{this.checkRefCount_INTERNAL();const i=this.getStore_INTERNAL();Wb(()=>{for(const[s,o]of r.entries())Gg(i,s,1),WH(i,new BH(s),o)})}),this._batch=n}}var C_={Snapshot:I_,MutableSnapshot:Hb,freshSnapshot:YH,cloneSnapshot:XH},JH=C_.Snapshot,ZH=C_.MutableSnapshot,eq=C_.freshSnapshot,tq=C_.cloneSnapshot,R_=Object.freeze({__proto__:null,Snapshot:JH,MutableSnapshot:ZH,freshSnapshot:eq,cloneSnapshot:tq});function nq(...t){const e=new Set;for(const n of t)for(const r of n)e.add(r);return e}var rq=nq;const{useRef:iq}=rt;function sq(t){const e=iq(t);return e.current===t&&typeof t=="function"&&(e.current=t()),e}var ER=sq;const{getNextTreeStateVersion:oq,makeEmptyStoreState:YL}=IL,{cleanUpNode:aq,getDownstreamNodes:lq,initializeNode:cq,setNodeValue:uq,setUnvalidatedAtomValue_DEPRECATED:dq}=Fo,{graph:hq}=Bf,{cloneGraph:fq}=Bf,{getNextStoreID:XL}=b_,{createMutableSource:j0,reactMode:JL}=Uf,{applyAtomValueWrites:pq}=Wi,{releaseScheduledRetainablesNow:ZL}=ul,{freshSnapshot:gq}=R_,{useCallback:mq,useContext:e2,useEffect:qb,useMemo:yq,useRef:_q,useState:vq}=rt;function Wu(){throw Ce("This component must be used inside a <RecoilRoot> component.")}const t2=Object.freeze({storeID:XL(),getState:Wu,replaceState:Wu,getGraph:Wu,subscribeToTransactions:Wu,addTransactionMetadata:Wu});let Gb=!1;function TR(t){if(Gb)throw Ce("An atom update was triggered within the execution of a state updater function. State updater functions provided to Recoil must be pure functions.");const e=t.getState();if(e.nextTree===null){Ze("recoil_memory_managament_2020")&&Ze("recoil_release_on_cascading_update_killswitch_2021")&&e.commitDepth>0&&ZL(t);const n=e.currentTree.version,r=oq();e.nextTree={...e.currentTree,version:r,stateID:r,dirtyAtoms:new Set,transactionMetadata:{}},e.graphsByVersion.set(r,fq(vt(e.graphsByVersion.get(n))))}}const n2=rt.createContext({current:t2}),k_=()=>e2(n2),r2=rt.createContext(null);function wq(){return e2(r2)}function zE(t,e,n){const r=lq(t,n,n.dirtyAtoms);for(const i of r){const s=e.nodeToComponentSubscriptions.get(i);if(s)for(const[o,[a,l]]of s)l(n)}}function i2(t){const e=t.getState(),n=e.currentTree,r=n.dirtyAtoms;if(r.size){for(const[i,s]of e.nodeTransactionSubscriptions)if(r.has(i))for(const[o,a]of s)a(t);for(const[i,s]of e.transactionSubscriptions)s(t);(!JL().early||e.suspendedComponentResolvers.size>0)&&(zE(t,e,n),e.suspendedComponentResolvers.forEach(i=>i()),e.suspendedComponentResolvers.clear())}e.queuedComponentCallbacks_DEPRECATED.forEach(i=>i(n)),e.queuedComponentCallbacks_DEPRECATED.splice(0,e.queuedComponentCallbacks_DEPRECATED.length)}function bq(t){const e=t.getState();e.commitDepth++;try{const{nextTree:n}=e;if(n==null)return;e.previousTree=e.currentTree,e.currentTree=n,e.nextTree=null,i2(t),e.previousTree!=null?e.graphsByVersion.delete(e.previousTree.version):OE("Ended batch with no previous state, which is unexpected","recoil"),e.previousTree=null,Ze("recoil_memory_managament_2020")&&n==null&&ZL(t)}finally{e.commitDepth--}}function xq({setNotifyBatcherOfChange:t}){const e=k_(),[,n]=vq([]);return t(()=>n({})),qb(()=>(t(()=>n({})),()=>{t(()=>{})}),[t]),qb(()=>{e6.enqueueExecution("Batcher",()=>{bq(e.current)})}),null}function Sq(t,e){const n=YL();return e({set:(r,i)=>{const s=n.currentTree,o=uq(t,s,r.key,i),a=new Set(o.keys()),l=s.nonvalidatedAtoms.clone();for(const c of a)l.delete(c);n.currentTree={...s,dirtyAtoms:rq(s.dirtyAtoms,a),atomValues:pq(s.atomValues,o),nonvalidatedAtoms:l}},setUnvalidatedAtomValues:r=>{r.forEach((i,s)=>{n.currentTree=dq(n.currentTree,s,i)})}}),n}function Eq(t){const e=gq(t),n=e.getStore_INTERNAL().getState();return e.retain(),n.nodeCleanupFunctions.forEach(r=>r()),n.nodeCleanupFunctions.clear(),n}let IR=0;function Tq({initializeState_DEPRECATED:t,initializeState:e,store_INTERNAL:n,children:r}){let i;const s=f=>{const g=i.current.graphsByVersion;if(g.has(f))return vt(g.get(f));const m=hq();return g.set(f,m),m},o=(f,g)=>{if(g==null){const{transactionSubscriptions:m}=d.current.getState(),v=IR++;return m.set(v,f),{release:()=>{m.delete(v)}}}else{const{nodeTransactionSubscriptions:m}=d.current.getState();m.has(g)||m.set(g,new Map);const v=IR++;return vt(m.get(g)).set(v,f),{release:()=>{const _=m.get(g);_&&(_.delete(v),_.size===0&&m.delete(g))}}}},a=f=>{TR(d.current);for(const g of Object.keys(f))vt(d.current.getState().nextTree).transactionMetadata[g]=f[g]},l=f=>{TR(d.current);const g=vt(i.current.nextTree);let m;try{Gb=!0,m=f(g)}finally{Gb=!1}m!==g&&(i.current.nextTree=m,JL().early&&zE(d.current,i.current,m),vt(c.current)())},c=_q(null),u=mq(f=>{c.current=f},[c]),d=ER(()=>n??{storeID:XL(),getState:()=>i.current,replaceState:l,getGraph:s,subscribeToTransactions:o,addTransactionMetadata:a});n!=null&&(d.current=n),i=ER(()=>t!=null?Sq(d.current,t):e!=null?Eq(e):YL());const h=yq(()=>j0==null?void 0:j0(i,()=>i.current.currentTree.version),[i]);return qb(()=>{const f=d.current;for(const g of new Set(f.getState().knownAtoms))cq(f,g,"get");return()=>{for(const g of f.getState().knownAtoms)aq(f,g)}},[d]),rt.createElement(n2.Provider,{value:d},rt.createElement(r2.Provider,{value:h},rt.createElement(xq,{setNotifyBatcherOfChange:u}),r))}function Iq(t){const{override:e,...n}=t,r=k_();return e===!1&&r.current!==t2?t.children:rt.createElement(Tq,n)}function Cq(){return k_().current.storeID}var Ts={RecoilRoot:Iq,useStoreRef:k_,useRecoilMutableSource:wq,useRecoilStoreID:Cq,notifyComponents_FOR_TESTING:zE,sendEndOfBatchNotifications_FOR_TESTING:i2};function Rq(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}var kq=Rq;const{useEffect:Aq,useRef:Pq}=rt;function Nq(t){const e=Pq();return Aq(()=>{e.current=t}),e.current}var s2=Nq;const{useStoreRef:Dq}=Ts,{SUSPENSE_TIMEOUT_MS:Oq}=ul,{updateRetainCount:Hu}=ul,{RetentionZone:Mq}=x_,{useEffect:Lq,useRef:Vq}=rt,{isSSR:CR}=T_;function Fq(t){if(Ze("recoil_memory_managament_2020"))return jq(t)}function jq(t){const n=(Array.isArray(t)?t:[t]).map(o=>o instanceof Mq?o:o.key),r=Dq();Lq(()=>{if(!Ze("recoil_memory_managament_2020"))return;const o=r.current;if(i.current&&!CR)window.clearTimeout(i.current),i.current=null;else for(const a of n)Hu(o,a,1);return()=>{for(const a of n)Hu(o,a,-1)}},[r,...n]);const i=Vq(),s=s2(n);if(!CR&&(s===void 0||!kq(s,n))){const o=r.current;for(const a of n)Hu(o,a,1);if(s)for(const a of s)Hu(o,a,-1);i.current&&window.clearTimeout(i.current),i.current=window.setTimeout(()=>{i.current=null;for(const a of n)Hu(o,a,-1)},Oq)}}var WE=Fq;function $q(){return"<component name not available>"}var Wf=$q;const{batchUpdates:Uq}=E_,{DEFAULT_VALUE:o2}=yr,{currentRendererSupportsUseSyncExternalStore:Bq,reactMode:hu,useMutableSource:zq,useSyncExternalStore:Wq}=Uf,{useRecoilMutableSource:Hq,useStoreRef:Hi}=Ts,{AbstractRecoilValue:Kb,getRecoilValueAsLoadable:Hf,setRecoilValue:qm,setUnvalidatedRecoilValue:qq,subscribeToRecoilValue:Mc}=Wi,{useCallback:gr,useEffect:Lc,useMemo:a2,useRef:Jd,useState:HE}=rt,{setByAddingToSet:Gq}=RL,{isSSR:Kq}=T_;function qE(t,e,n){if(t.state==="hasValue")return t.contents;throw t.state==="loading"?new Promise(i=>{const s=n.current.getState().suspendedComponentResolvers;s.add(i),Kq&&ut(t.contents)&&t.contents.finally(()=>{s.delete(i)})}):t.state==="hasError"?t.contents:Ce(`Invalid value of loadable atom "${e.key}"`)}function Qq(){const t=Wf(),e=Hi(),[,n]=HE([]),r=Jd(new Set);r.current=new Set;const i=Jd(new Set),s=Jd(new Map),o=gr(l=>{const c=s.current.get(l);c&&(c.release(),s.current.delete(l))},[s]),a=gr((l,c)=>{s.current.has(c)&&n([])},[]);return Lc(()=>{const l=e.current;Yd(r.current,i.current).forEach(c=>{if(s.current.has(c))return;const u=Mc(l,new Kb(c),h=>a(h,c),t);s.current.set(c,u),l.getState().nextTree?l.getState().queuedComponentCallbacks_DEPRECATED.push(()=>{a(l.getState(),c)}):a(l.getState(),c)}),Yd(i.current,r.current).forEach(c=>{o(c)}),i.current=r.current}),Lc(()=>{const l=s.current;return Yd(r.current,new Set(l.keys())).forEach(c=>{const u=Mc(e.current,new Kb(c),d=>a(d,c),t);l.set(c,u)}),()=>l.forEach((c,u)=>o(u))},[t,e,o,a]),a2(()=>{function l(g){return m=>{qm(e.current,g,m)}}function c(g){return()=>qm(e.current,g,o2)}function u(g){var m;r.current.has(g.key)||(r.current=Gq(r.current,g.key));const v=e.current.getState();return Hf(e.current,g,hu().early&&(m=v.nextTree)!==null&&m!==void 0?m:v.currentTree)}function d(g){const m=u(g);return qE(m,g,e)}function h(g){return[d(g),l(g)]}function f(g){return[u(g),l(g)]}return{getRecoilValue:d,getRecoilValueLoadable:u,getRecoilState:h,getRecoilStateLoadable:f,getSetRecoilState:l,getResetRecoilState:c}},[r,e])}const Yq={current:0};function Xq(t){const e=Hi(),n=Wf(),r=gr(()=>{var a;const l=e.current,c=l.getState(),u=hu().early&&(a=c.nextTree)!==null&&a!==void 0?a:c.currentTree;return{loadable:Hf(l,t,u),key:t.key}},[e,t]),i=gr(a=>{let l;return()=>{var c,u;const d=a();return(c=l)!==null&&c!==void 0&&c.loadable.is(d.loadable)&&((u=l)===null||u===void 0?void 0:u.key)===d.key?l:(l=d,d)}},[]),s=a2(()=>i(r),[r,i]),o=gr(a=>{const l=e.current;return Mc(l,t,a,n).release},[e,t,n]);return Wq(o,s,s).loadable}function Jq(t){const e=Hi(),n=gr(()=>{var c;const u=e.current,d=u.getState(),h=hu().early&&(c=d.nextTree)!==null&&c!==void 0?c:d.currentTree;return Hf(u,t,h)},[e,t]),r=gr(()=>n(),[n]),i=Wf(),s=gr((c,u)=>{const d=e.current;return Mc(d,t,()=>{if(!Ze("recoil_suppress_rerender_in_callback"))return u();const f=n();l.current.is(f)||u(),l.current=f},i).release},[e,t,i,n]),o=Hq();if(o==null)throw Ce("Recoil hooks must be used in components contained within a <RecoilRoot> component.");const a=zq(o,r,s),l=Jd(a);return Lc(()=>{l.current=a}),a}function Qb(t){const e=Hi(),n=Wf(),r=gr(()=>{var l;const c=e.current,u=c.getState(),d=hu().early&&(l=u.nextTree)!==null&&l!==void 0?l:u.currentTree;return Hf(c,t,d)},[e,t]),i=gr(()=>({loadable:r(),key:t.key}),[r,t.key]),s=gr(l=>{const c=i();return l.loadable.is(c.loadable)&&l.key===c.key?l:c},[i]);Lc(()=>{const l=Mc(e.current,t,c=>{a(s)},n);return a(s),l.release},[n,t,e,s]);const[o,a]=HE(i);return o.key!==t.key?i().loadable:o.loadable}function Zq(t){const e=Hi(),[,n]=HE([]),r=Wf(),i=gr(()=>{var a;const l=e.current,c=l.getState(),u=hu().early&&(a=c.nextTree)!==null&&a!==void 0?a:c.currentTree;return Hf(l,t,u)},[e,t]),s=i(),o=Jd(s);return Lc(()=>{o.current=s}),Lc(()=>{const a=e.current,l=a.getState(),c=Mc(a,t,d=>{var h;if(!Ze("recoil_suppress_rerender_in_callback"))return n([]);const f=i();(h=o.current)!==null&&h!==void 0&&h.is(f)||n(f),o.current=f},r);if(l.nextTree)a.getState().queuedComponentCallbacks_DEPRECATED.push(()=>{o.current=null,n([])});else{var u;if(!Ze("recoil_suppress_rerender_in_callback"))return n([]);const d=i();(u=o.current)!==null&&u!==void 0&&u.is(d)||n(d),o.current=d}return c.release},[r,i,t,e]),s}function GE(t){return Ze("recoil_memory_managament_2020")&&WE(t),{TRANSITION_SUPPORT:Qb,SYNC_EXTERNAL_STORE:Bq()?Xq:Qb,MUTABLE_SOURCE:Jq,LEGACY:Zq}[hu().mode](t)}function l2(t){const e=Hi(),n=GE(t);return qE(n,t,e)}function A_(t){const e=Hi();return gr(n=>{qm(e.current,t,n)},[e,t])}function e8(t){const e=Hi();return gr(()=>{qm(e.current,t,o2)},[e,t])}function t8(t){return[l2(t),A_(t)]}function n8(t){return[GE(t),A_(t)]}function r8(){const t=Hi();return(e,n={})=>{Uq(()=>{t.current.addTransactionMetadata(n),e.forEach((r,i)=>qq(t.current,new Kb(i),r))})}}function c2(t){return Ze("recoil_memory_managament_2020")&&WE(t),Qb(t)}function u2(t){const e=Hi(),n=c2(t);return qE(n,t,e)}function i8(t){return[u2(t),A_(t)]}var s8={recoilComponentGetRecoilValueCount_FOR_TESTING:Yq,useRecoilInterface:Qq,useRecoilState:t8,useRecoilStateLoadable:n8,useRecoilValue:l2,useRecoilValueLoadable:GE,useResetRecoilState:e8,useSetRecoilState:A_,useSetUnvalidatedAtomValues:r8,useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE:c2,useRecoilValue_TRANSITION_SUPPORT_UNSTABLE:u2,useRecoilState_TRANSITION_SUPPORT_UNSTABLE:i8};function o8(t,e){const n=new Map;for(const[r,i]of t)e(i,r)&&n.set(r,i);return n}var a8=o8;function l8(t,e){const n=new Set;for(const r of t)e(r)&&n.add(r);return n}var c8=l8;function u8(...t){const e=new Map;for(let n=0;n<t.length;n++){const r=t[n].keys();let i;for(;!(i=r.next()).done;)e.set(i.value,t[n].get(i.value))}return e}var d8=u8;const{batchUpdates:h8}=E_,{DEFAULT_VALUE:f8,getNode:d2,nodes:p8}=yr,{useStoreRef:KE}=Ts,{AbstractRecoilValue:g8,setRecoilValueLoadable:m8}=Wi,{SUSPENSE_TIMEOUT_MS:y8}=ul,{cloneSnapshot:Gm}=R_,{useCallback:P_,useEffect:h2,useRef:RR,useState:_8}=rt,{isSSR:kR}=T_;function N_(t){const e=KE();h2(()=>e.current.subscribeToTransactions(t).release,[t,e])}function AR(t){const e=t.atomValues.toMap(),n=Hm(a8(e,(r,i)=>{const o=d2(i).persistence_UNSTABLE;return o!=null&&o.type!=="none"&&r.state==="hasValue"}),r=>r.contents);return d8(t.nonvalidatedAtoms.toMap(),n)}function v8(t){N_(P_(e=>{let n=e.getState().previousTree;const r=e.getState().currentTree;n||(n=e.getState().currentTree);const i=AR(r),s=AR(n),o=Hm(p8,l=>{var c,u,d,h;return{persistence_UNSTABLE:{type:(c=(u=l.persistence_UNSTABLE)===null||u===void 0?void 0:u.type)!==null&&c!==void 0?c:"none",backButton:(d=(h=l.persistence_UNSTABLE)===null||h===void 0?void 0:h.backButton)!==null&&d!==void 0?d:!1}}}),a=c8(r.dirtyAtoms,l=>i.has(l)||s.has(l));t({atomValues:i,previousAtomValues:s,atomInfo:o,modifiedAtoms:a,transactionMetadata:{...r.transactionMetadata}})},[t]))}function w8(t){N_(P_(e=>{const n=Gm(e,"latest"),r=Gm(e,"previous");t({snapshot:n,previousSnapshot:r})},[t]))}function b8(){const t=KE(),[e,n]=_8(()=>Gm(t.current)),r=s2(e),i=RR(),s=RR();if(N_(P_(a=>n(Gm(a)),[])),h2(()=>{const a=e.retain();if(i.current&&!kR){var l;window.clearTimeout(i.current),i.current=null,(l=s.current)===null||l===void 0||l.call(s),s.current=null}return()=>{window.setTimeout(a,10)}},[e]),r!==e&&!kR){if(i.current){var o;window.clearTimeout(i.current),i.current=null,(o=s.current)===null||o===void 0||o.call(s),s.current=null}s.current=e.retain(),i.current=window.setTimeout(()=>{var a;i.current=null,(a=s.current)===null||a===void 0||a.call(s),s.current=null},y8)}return e}function f2(t,e){var n;const r=t.getState(),i=(n=r.nextTree)!==null&&n!==void 0?n:r.currentTree,s=e.getStore_INTERNAL().getState().currentTree;h8(()=>{const o=new Set;for(const c of[i.atomValues.keys(),s.atomValues.keys()])for(const u of c){var a,l;((a=i.atomValues.get(u))===null||a===void 0?void 0:a.contents)!==((l=s.atomValues.get(u))===null||l===void 0?void 0:l.contents)&&d2(u).shouldRestoreFromSnapshots&&o.add(u)}o.forEach(c=>{m8(t,new g8(c),s.atomValues.has(c)?vt(s.atomValues.get(c)):f8)}),t.replaceState(c=>({...c,stateID:e.getID()}))})}function x8(){const t=KE();return P_(e=>f2(t.current,e),[t])}var p2={useRecoilSnapshot:b8,gotoSnapshot:f2,useGotoRecoilSnapshot:x8,useRecoilTransactionObserver:w8,useTransactionObservation_DEPRECATED:v8,useTransactionSubscription_DEPRECATED:N_};const{peekNodeInfo:S8}=Fo,{useStoreRef:E8}=Ts;function T8(){const t=E8();return({key:e})=>S8(t.current,t.current.getState().currentTree,e)}var I8=T8;const{reactMode:C8}=Uf,{RecoilRoot:R8,useStoreRef:k8}=Ts,{useMemo:A8}=rt;function P8(){C8().mode==="MUTABLE_SOURCE"&&console.warn("Warning: There are known issues using useRecoilBridgeAcrossReactRoots() in recoil_mutable_source rendering mode.  Please consider upgrading to recoil_sync_external_store mode.");const t=k8().current;return A8(()=>{function e({children:n}){return rt.createElement(R8,{store_INTERNAL:t},n)}return e},[t])}var N8=P8;const{loadableWithValue:D8}=$f,{initializeNode:O8}=Fo,{DEFAULT_VALUE:M8,getNode:L8}=yr,{copyTreeState:V8,getRecoilValueAsLoadable:F8,invalidateDownstreams:j8,writeLoadableToTreeState:$8}=Wi;function PR(t){return L8(t.key).nodeType==="atom"}class U8{constructor(e,n){Ee(this,"_store",void 0),Ee(this,"_treeState",void 0),Ee(this,"_changes",void 0),Ee(this,"get",r=>{if(this._changes.has(r.key))return this._changes.get(r.key);if(!PR(r))throw Ce("Reading selectors within atomicUpdate is not supported");const i=F8(this._store,r,this._treeState);if(i.state==="hasValue")return i.contents;throw i.state==="hasError"?i.contents:Ce(`Expected Recoil atom ${r.key} to have a value, but it is in a loading state.`)}),Ee(this,"set",(r,i)=>{if(!PR(r))throw Ce("Setting selectors within atomicUpdate is not supported");if(typeof i=="function"){const s=this.get(r);this._changes.set(r.key,i(s))}else O8(this._store,r.key,"set"),this._changes.set(r.key,i)}),Ee(this,"reset",r=>{this.set(r,M8)}),this._store=e,this._treeState=n,this._changes=new Map}newTreeState_INTERNAL(){if(this._changes.size===0)return this._treeState;const e=V8(this._treeState);for(const[n,r]of this._changes)$8(e,n,D8(r));return j8(this._store,e),e}}function B8(t){return e=>{t.replaceState(n=>{const r=new U8(t,n);return e(r),r.newTreeState_INTERNAL()})}}var z8={atomicUpdater:B8},W8=z8.atomicUpdater,g2=Object.freeze({__proto__:null,atomicUpdater:W8});function H8(t,e){if(!t)throw new Error(e)}var q8=H8,Ed=q8;const{atomicUpdater:G8}=g2,{batchUpdates:K8}=E_,{DEFAULT_VALUE:Q8}=yr,{useStoreRef:Y8}=Ts,{refreshRecoilValue:X8,setRecoilValue:NR}=Wi,{cloneSnapshot:J8}=R_,{gotoSnapshot:Z8}=p2,{useCallback:eG}=rt;class m2{}const tG=new m2;function y2(t,e,n,r){let i=tG,s;if(K8(()=>{const a="useRecoilCallback() expects a function that returns a function: it accepts a function of the type (RecoilInterface) => (Args) => ReturnType and returns a callback function (Args) => ReturnType, where RecoilInterface is an object {snapshot, set, ...} and Args and ReturnType are the argument and return types of the callback you want to create.  Please see the docs at recoiljs.org for details.";if(typeof e!="function")throw Ce(a);const l=kL({...r??{},set:(u,d)=>NR(t,u,d),reset:u=>NR(t,u,Q8),refresh:u=>X8(t,u),gotoSnapshot:u=>Z8(t,u),transact_UNSTABLE:u=>G8(t)(u)},{snapshot:()=>{const u=J8(t);return s=u.retain(),u}}),c=e(l);if(typeof c!="function")throw Ce(a);i=c(...n)}),i instanceof m2&&Ed(!1),ut(i))i=i.finally(()=>{var a;(a=s)===null||a===void 0||a()});else{var o;(o=s)===null||o===void 0||o()}return i}function nG(t,e){const n=Y8();return eG((...r)=>y2(n.current,t,r),e!=null?[...e,n]:void 0)}var _2={recoilCallback:y2,useRecoilCallback:nG};const{useStoreRef:rG}=Ts,{refreshRecoilValue:iG}=Wi,{useCallback:sG}=rt;function oG(t){const e=rG();return sG(()=>{const n=e.current;iG(n,t)},[t,e])}var aG=oG;const{atomicUpdater:lG}=g2,{useStoreRef:cG}=Ts,{useMemo:uG}=rt;function dG(t,e){const n=cG();return uG(()=>(...r)=>{lG(n.current)(s=>{t(s)(...r)})},e!=null?[...e,n]:void 0)}var hG=dG;class fG{constructor(e){Ee(this,"value",void 0),this.value=e}}var pG={WrappedValue:fG},gG=pG.WrappedValue,v2=Object.freeze({__proto__:null,WrappedValue:gG});const{isFastRefreshEnabled:mG}=Uf;class DR extends Error{}class yG{constructor(e){var n,r,i;Ee(this,"_name",void 0),Ee(this,"_numLeafs",void 0),Ee(this,"_root",void 0),Ee(this,"_onHit",void 0),Ee(this,"_onSet",void 0),Ee(this,"_mapNodeValue",void 0),this._name=e==null?void 0:e.name,this._numLeafs=0,this._root=null,this._onHit=(n=e==null?void 0:e.onHit)!==null&&n!==void 0?n:()=>{},this._onSet=(r=e==null?void 0:e.onSet)!==null&&r!==void 0?r:()=>{},this._mapNodeValue=(i=e==null?void 0:e.mapNodeValue)!==null&&i!==void 0?i:s=>s}size(){return this._numLeafs}root(){return this._root}get(e,n){var r;return(r=this.getLeafNode(e,n))===null||r===void 0?void 0:r.value}getLeafNode(e,n){if(this._root==null)return;let r=this._root;for(;r;){if(n==null||n.onNodeVisit(r),r.type==="leaf")return this._onHit(r),r;const i=this._mapNodeValue(e(r.nodeKey));r=r.branches.get(i)}}set(e,n,r){const i=()=>{var s,o,a,l;let c,u;for(const[v,_]of e){var d,h,f;const y=this._root;if((y==null?void 0:y.type)==="leaf")throw this.invalidCacheError();const w=c;if(c=w?w.branches.get(u):y,c=(d=c)!==null&&d!==void 0?d:{type:"branch",nodeKey:v,parent:w,branches:new Map,branchKey:u},c.type!=="branch"||c.nodeKey!==v)throw this.invalidCacheError();w==null||w.branches.set(u,c),r==null||(h=r.onNodeVisit)===null||h===void 0||h.call(r,c),u=this._mapNodeValue(_),this._root=(f=this._root)!==null&&f!==void 0?f:c}const g=c?(s=c)===null||s===void 0?void 0:s.branches.get(u):this._root;if(g!=null&&(g.type!=="leaf"||g.branchKey!==u))throw this.invalidCacheError();const m={type:"leaf",value:n,parent:c,branchKey:u};(o=c)===null||o===void 0||o.branches.set(u,m),this._root=(a=this._root)!==null&&a!==void 0?a:m,this._numLeafs++,this._onSet(m),r==null||(l=r.onNodeVisit)===null||l===void 0||l.call(r,m)};try{i()}catch(s){if(s instanceof DR)this.clear(),i();else throw s}}delete(e){const n=this.root();if(!n)return!1;if(e===n)return this._root=null,this._numLeafs=0,!0;let r=e.parent,i=e.branchKey;for(;r;){var s;if(r.branches.delete(i),r===n)return r.branches.size===0?(this._root=null,this._numLeafs=0):this._numLeafs--,!0;if(r.branches.size>0)break;i=(s=r)===null||s===void 0?void 0:s.branchKey,r=r.parent}for(;r!==n;r=r.parent)if(r==null)return!1;return this._numLeafs--,!0}clear(){this._numLeafs=0,this._root=null}invalidCacheError(){const e=mG()?"Possible Fast Refresh module reload detected.  This may also be caused by an selector returning inconsistent values. Resetting cache.":"Invalid cache values.  This happens when selectors do not return consistent values for the same input dependency values.  That may also be caused when using Fast Refresh to change a selector implementation.  Resetting cache.";throw OE(e+(this._name!=null?` - ${this._name}`:"")),new DR}}var _G={TreeCache:yG},vG=_G.TreeCache,w2=Object.freeze({__proto__:null,TreeCache:vG});class wG{constructor(e){var n;Ee(this,"_maxSize",void 0),Ee(this,"_size",void 0),Ee(this,"_head",void 0),Ee(this,"_tail",void 0),Ee(this,"_map",void 0),Ee(this,"_keyMapper",void 0),this._maxSize=e.maxSize,this._size=0,this._head=null,this._tail=null,this._map=new Map,this._keyMapper=(n=e.mapKey)!==null&&n!==void 0?n:r=>r}head(){return this._head}tail(){return this._tail}size(){return this._size}maxSize(){return this._maxSize}has(e){return this._map.has(this._keyMapper(e))}get(e){const n=this._keyMapper(e),r=this._map.get(n);if(r)return this.set(e,r.value),r.value}set(e,n){const r=this._keyMapper(e);this._map.get(r)&&this.delete(e);const s=this.head(),o={key:e,right:s,left:null,value:n};s?s.left=o:this._tail=o,this._map.set(r,o),this._head=o,this._size++,this._maybeDeleteLRU()}_maybeDeleteLRU(){this.size()>this.maxSize()&&this.deleteLru()}deleteLru(){const e=this.tail();e&&this.delete(e.key)}delete(e){const n=this._keyMapper(e);if(!this._size||!this._map.has(n))return;const r=vt(this._map.get(n)),i=r.right,s=r.left;i&&(i.left=r.left),s&&(s.right=r.right),r===this.head()&&(this._head=i),r===this.tail()&&(this._tail=s),this._map.delete(n),this._size--}clear(){this._size=0,this._head=null,this._tail=null,this._map=new Map}}var bG={LRUCache:wG},xG=bG.LRUCache,b2=Object.freeze({__proto__:null,LRUCache:xG});const{LRUCache:SG}=b2,{TreeCache:EG}=w2;function TG({name:t,maxSize:e,mapNodeValue:n=r=>r}){const r=new SG({maxSize:e}),i=new EG({name:t,mapNodeValue:n,onHit:s=>{r.set(s,!0)},onSet:s=>{const o=r.tail();r.set(s,!0),o&&i.size()>e&&i.delete(o.key)}});return i}var OR=TG;function Jr(t,e,n){if(typeof t=="string"&&!t.includes('"')&&!t.includes("\\"))return`"${t}"`;switch(typeof t){case"undefined":return"";case"boolean":return t?"true":"false";case"number":case"symbol":return String(t);case"string":return JSON.stringify(t);case"function":if((e==null?void 0:e.allowFunctions)!==!0)throw Ce("Attempt to serialize function in a Recoil cache key");return`__FUNCTION(${t.name})__`}if(t===null)return"null";if(typeof t!="object"){var r;return(r=JSON.stringify(t))!==null&&r!==void 0?r:""}if(ut(t))return"__PROMISE__";if(Array.isArray(t))return`[${t.map((i,s)=>Jr(i,e,s.toString()))}]`;if(typeof t.toJSON=="function")return Jr(t.toJSON(n),e,n);if(t instanceof Map){const i={};for(const[s,o]of t)i[typeof s=="string"?s:Jr(s,e)]=o;return Jr(i,e,n)}return t instanceof Set?Jr(Array.from(t).sort((i,s)=>Jr(i,e).localeCompare(Jr(s,e))),e,n):Symbol!==void 0&&t[Symbol.iterator]!=null&&typeof t[Symbol.iterator]=="function"?Jr(Array.from(t),e,n):`{${Object.keys(t).filter(i=>t[i]!==void 0).sort().map(i=>`${Jr(i,e)}:${Jr(t[i],e,i)}`).join(",")}}`}function IG(t,e={allowFunctions:!1}){return Jr(t,e)}var D_=IG;const{TreeCache:CG}=w2,Qp={equality:"reference",eviction:"keep-all",maxSize:1/0};function RG({equality:t=Qp.equality,eviction:e=Qp.eviction,maxSize:n=Qp.maxSize}=Qp,r){const i=kG(t);return AG(e,n,i,r)}function kG(t){switch(t){case"reference":return e=>e;case"value":return e=>D_(e)}throw Ce(`Unrecognized equality policy ${t}`)}function AG(t,e,n,r){switch(t){case"keep-all":return new CG({name:r,mapNodeValue:n});case"lru":return OR({name:r,maxSize:vt(e),mapNodeValue:n});case"most-recent":return OR({name:r,maxSize:1,mapNodeValue:n})}throw Ce(`Unrecognized eviction policy ${t}`)}var PG=RG;function NG(t){return()=>null}var DG={startPerfBlock:NG};const{isLoadable:OG,loadableWithError:Yp,loadableWithPromise:MG,loadableWithValue:$0}=$f,{WrappedValue:x2}=v2,{getNodeLoadable:Xp,peekNodeLoadable:LG,setNodeValue:VG}=Fo,{saveDepsToStore:FG}=Bf,{DEFAULT_VALUE:jG,getConfigDeletionHandler:$G,getNode:UG,registerNode:MR}=yr,{isRecoilValue:BG}=Oc,{markRecoilValueModified:LR}=Wi,{retainedByOptionWithDefault:zG}=ul,{recoilCallback:WG}=_2,{startPerfBlock:HG}=DG;class S2{}const qu=new S2,Gu=[],Jp=new Map,qG=(()=>{let t=0;return()=>t++})();function E2(t){let e=null;const{key:n,get:r,cachePolicy_UNSTABLE:i}=t,s=t.set!=null?t.set:void 0,o=new Set,a=PG(i??{equality:"reference",eviction:"keep-all"},n),l=zG(t.retainedBy_UNSTABLE),c=new Map;let u=0;function d(){return!Ze("recoil_memory_managament_2020")||u>0}function h(A){return A.getState().knownSelectors.add(n),u++,()=>{u--}}function f(){return $G(n)!==void 0&&!d()}function g(A,$,B,ce,Q){R($,ce,Q),m(A,B)}function m(A,$){le(A,$)&&X(A),_($,!0)}function v(A,$){le(A,$)&&(vt(D(A)).stateVersions.clear(),_($,!1))}function _(A,$){const B=Jp.get(A);if(B!=null){for(const ce of B)LR(ce,vt(e));$&&Jp.delete(A)}}function y(A,$){let B=Jp.get($);B==null&&Jp.set($,B=new Set),B.add(A)}function w(A,$,B,ce,Q,me){return $.then(we=>{if(!d())throw X(A),qu;const he=$0(we);return g(A,B,Q,he,ce),we}).catch(we=>{if(!d())throw X(A),qu;if(ut(we))return b(A,we,B,ce,Q,me);const he=Yp(we);throw g(A,B,Q,he,ce),we})}function b(A,$,B,ce,Q,me){return $.then(we=>{if(!d())throw X(A),qu;me.loadingDepKey!=null&&me.loadingDepPromise===$?B.atomValues.set(me.loadingDepKey,$0(we)):A.getState().knownSelectors.forEach(Ue=>{B.atomValues.delete(Ue)});const he=I(A,B);if(he&&he.state!=="loading"){if((le(A,Q)||D(A)==null)&&m(A,Q),he.state==="hasValue")return he.contents;throw he.contents}if(!le(A,Q)){const Ue=k(A,B);if(Ue!=null)return Ue.loadingLoadable.contents}const[et,Rt]=T(A,B,Q);if(et.state!=="loading"&&g(A,B,Q,et,Rt),et.state==="hasError")throw et.contents;return et.contents}).catch(we=>{if(we instanceof S2)throw qu;if(!d())throw X(A),qu;const he=Yp(we);throw g(A,B,Q,he,ce),we})}function x(A,$,B,ce){var Q,me,we,he;if(le(A,ce)||$.version===((Q=A.getState())===null||Q===void 0||(me=Q.currentTree)===null||me===void 0?void 0:me.version)||$.version===((we=A.getState())===null||we===void 0||(he=we.nextTree)===null||he===void 0?void 0:he.version)){var et,Rt,Ue;FG(n,B,A,(et=(Rt=A.getState())===null||Rt===void 0||(Ue=Rt.nextTree)===null||Ue===void 0?void 0:Ue.version)!==null&&et!==void 0?et:A.getState().currentTree.version)}for(const it of B)o.add(it)}function T(A,$,B){const ce=HG(n);let Q=!0,me=!0;const we=()=>{ce(),me=!1};let he,et=!1,Rt;const Ue={loadingDepKey:null,loadingDepPromise:null},it=new Map;function er({key:Or}){const _r=Xp(A,$,Or);switch(it.set(Or,_r),Q||(x(A,$,new Set(it.keys()),B),v(A,B)),_r.state){case"hasValue":return _r.contents;case"hasError":throw _r.contents;case"loading":throw Ue.loadingDepKey=Or,Ue.loadingDepPromise=_r.contents,_r.contents}throw Ce("Invalid Loadable state")}const qi=Or=>(..._r)=>{if(me)throw Ce("Callbacks from getCallback() should only be called asynchronously after the selector is evalutated.  It can be used for selectors to return objects with callbacks that can work with Recoil state without a subscription.");return e==null&&Ed(!1),WG(A,Or,_r,{node:e})};try{he=r({get:er,getCallback:qi}),he=BG(he)?er(he):he,OG(he)&&(he.state==="hasError"&&(et=!0),he=he.contents),ut(he)?he=w(A,he,$,it,B,Ue).finally(we):we(),he=he instanceof x2?he.value:he}catch(Or){he=Or,ut(he)?he=b(A,he,$,it,B,Ue).finally(we):(et=!0,we())}return et?Rt=Yp(he):ut(he)?Rt=MG(he):Rt=$0(he),Q=!1,K(A,B,it),x(A,$,new Set(it.keys()),B),[Rt,it]}function I(A,$){let B=$.atomValues.get(n);if(B!=null)return B;const ce=new Set;try{B=a.get(me=>(typeof me!="string"&&Ed(!1),Xp(A,$,me).contents),{onNodeVisit:me=>{me.type==="branch"&&me.nodeKey!==n&&ce.add(me.nodeKey)}})}catch(me){throw Ce(`Problem with cache lookup for selector "${n}": ${me.message}`)}if(B){var Q;$.atomValues.set(n,B),x(A,$,ce,(Q=D(A))===null||Q===void 0?void 0:Q.executionID)}return B}function E(A,$){const B=I(A,$);if(B!=null)return X(A),B;const ce=k(A,$);if(ce!=null){var Q;return((Q=ce.loadingLoadable)===null||Q===void 0?void 0:Q.state)==="loading"&&y(A,ce.executionID),ce.loadingLoadable}const me=qG(),[we,he]=T(A,$,me);return we.state==="loading"?(F(A,me,we,he,$),y(A,me)):(X(A),R($,we,he)),we}function k(A,$){const B=qL([c.has(A)?[vt(c.get(A))]:[],w_(jE(c,([Q])=>Q!==A),([,Q])=>Q)]);function ce(Q){for(const[me,we]of Q)if(!Xp(A,$,me).is(we))return!0;return!1}for(const Q of B){if(Q.stateVersions.get($.version)||!ce(Q.depValuesDiscoveredSoFarDuringAsyncWork))return Q.stateVersions.set($.version,!0),Q;Q.stateVersions.set($.version,!1)}}function D(A){return c.get(A)}function F(A,$,B,ce,Q){c.set(A,{depValuesDiscoveredSoFarDuringAsyncWork:ce,executionID:$,loadingLoadable:B,stateVersions:new Map([[Q.version,!0]])})}function K(A,$,B){if(le(A,$)){const ce=D(A);ce!=null&&(ce.depValuesDiscoveredSoFarDuringAsyncWork=B)}}function X(A){c.delete(A)}function le(A,$){var B;return $===((B=D(A))===null||B===void 0?void 0:B.executionID)}function C(A){return Array.from(A.entries()).map(([$,B])=>[$,B.contents])}function R(A,$,B){A.atomValues.set(n,$);try{a.set(C(B),$)}catch(ce){throw Ce(`Problem with setting cache for selector "${n}": ${ce.message}`)}}function V(A){if(Gu.includes(n)){const $=`Recoil selector has circular dependencies: ${Gu.slice(Gu.indexOf(n)).join(" → ")}`;return Yp(Ce($))}Gu.push(n);try{return A()}finally{Gu.pop()}}function M(A,$){const B=$.atomValues.get(n);return B??a.get(ce=>{var Q;return typeof ce!="string"&&Ed(!1),(Q=LG(A,$,ce))===null||Q===void 0?void 0:Q.contents})}function U(A,$){return V(()=>E(A,$))}function j(A){A.atomValues.delete(n)}function ie(A,$){e==null&&Ed(!1);for(const ce of o){var B;const Q=UG(ce);(B=Q.clearCache)===null||B===void 0||B.call(Q,A,$)}o.clear(),j($),a.clear(),LR(A,e)}return s!=null?e=MR({key:n,nodeType:"selector",peek:M,get:U,set:($,B,ce)=>{let Q=!1;const me=new Map;function we({key:Ue}){if(Q)throw Ce("Recoil: Async selector sets are not currently supported.");const it=Xp($,B,Ue);if(it.state==="hasValue")return it.contents;if(it.state==="loading"){const er=`Getting value of asynchronous atom or selector "${Ue}" in a pending state while setting selector "${n}" is not yet supported.`;throw Ce(er)}else throw it.contents}function he(Ue,it){if(Q)throw Ce("Recoil: Async selector sets are not currently supported.");const er=typeof it=="function"?it(we(Ue)):it;VG($,B,Ue.key,er).forEach((Or,_r)=>me.set(_r,Or))}function et(Ue){he(Ue,jG)}const Rt=s({set:he,get:we,reset:et},ce);if(Rt!==void 0)throw ut(Rt)?Ce("Recoil: Async selector sets are not currently supported."):Ce("Recoil: selector set should be a void function.");return Q=!0,me},init:h,invalidate:j,clearCache:ie,shouldDeleteConfigOnRelease:f,dangerouslyAllowMutability:t.dangerouslyAllowMutability,shouldRestoreFromSnapshots:!1,retainedBy:l}):e=MR({key:n,nodeType:"selector",peek:M,get:U,init:h,invalidate:j,clearCache:ie,shouldDeleteConfigOnRelease:f,dangerouslyAllowMutability:t.dangerouslyAllowMutability,shouldRestoreFromSnapshots:!1,retainedBy:l})}E2.value=t=>new x2(t);var Vc=E2;const{isLoadable:GG,loadableWithError:U0,loadableWithPromise:B0,loadableWithValue:Cl}=$f,{WrappedValue:T2}=v2,{peekNodeInfo:KG}=Fo,{DEFAULT_VALUE:aa,DefaultValue:Bs,getConfigDeletionHandler:I2,registerNode:QG,setConfigDeletionHandler:YG}=yr,{isRecoilValue:XG}=Oc,{getRecoilValueAsLoadable:JG,markRecoilValueModified:ZG,setRecoilValue:VR,setRecoilValueLoadable:eK}=Wi,{retainedByOptionWithDefault:tK}=ul,Ku=t=>t instanceof T2?t.value:t;function nK(t){const{key:e,persistence_UNSTABLE:n}=t,r=tK(t.retainedBy_UNSTABLE);let i=0;function s(y){return B0(y.then(w=>(o=Cl(w),w)).catch(w=>{throw o=U0(w),w}))}let o=ut(t.default)?s(t.default):GG(t.default)?t.default.state==="loading"?s(t.default.contents):t.default:Cl(Ku(t.default));o.contents;let a;const l=new Map;function c(y){return y}function u(y,w){const b=w.then(x=>{var T,I;return((I=((T=y.getState().nextTree)!==null&&T!==void 0?T:y.getState().currentTree).atomValues.get(e))===null||I===void 0?void 0:I.contents)===b&&VR(y,_,x),x}).catch(x=>{var T,I;throw((I=((T=y.getState().nextTree)!==null&&T!==void 0?T:y.getState().currentTree).atomValues.get(e))===null||I===void 0?void 0:I.contents)===b&&eK(y,_,U0(x)),x});return b}function d(y,w,b){var x;i++;const T=()=>{var D;i--,(D=l.get(y))===null||D===void 0||D.forEach(F=>F()),l.delete(y)};if(y.getState().knownAtoms.add(e),o.state==="loading"){const D=()=>{var F;((F=y.getState().nextTree)!==null&&F!==void 0?F:y.getState().currentTree).atomValues.has(e)||ZG(y,_)};o.contents.finally(D)}const I=(x=t.effects)!==null&&x!==void 0?x:t.effects_UNSTABLE;if(I!=null){let D=function(j){if(le&&j.key===e){const ie=X;return ie instanceof Bs?h(y,w):ut(ie)?B0(ie.then(A=>A instanceof Bs?o.toPromise():A)):Cl(ie)}return JG(y,j)},F=function(j){return D(j).toPromise()},K=function(j){var ie;const A=KG(y,(ie=y.getState().nextTree)!==null&&ie!==void 0?ie:y.getState().currentTree,j.key);return le&&j.key===e&&!(X instanceof Bs)?{...A,isSet:!0,loadable:D(j)}:A},X=aa,le=!0,C=!1,R=null;const V=j=>ie=>{if(le){const A=D(_),$=A.state==="hasValue"?A.contents:aa;X=typeof ie=="function"?ie($):ie,ut(X)&&(X=X.then(B=>(R={effect:j,value:B},B)))}else{if(ut(ie))throw Ce("Setting atoms to async values is not implemented.");typeof ie!="function"&&(R={effect:j,value:Ku(ie)}),VR(y,_,typeof ie=="function"?A=>{const $=Ku(ie(A));return R={effect:j,value:$},$}:Ku(ie))}},M=j=>()=>V(j)(aa),U=j=>ie=>{var A;const{release:$}=y.subscribeToTransactions(B=>{var ce;let{currentTree:Q,previousTree:me}=B.getState();me||(me=Q);const we=(ce=Q.atomValues.get(e))!==null&&ce!==void 0?ce:o;if(we.state==="hasValue"){var he,et,Rt,Ue;const it=we.contents,er=(he=me.atomValues.get(e))!==null&&he!==void 0?he:o,qi=er.state==="hasValue"?er.contents:aa;((et=R)===null||et===void 0?void 0:et.effect)!==j||((Rt=R)===null||Rt===void 0?void 0:Rt.value)!==it?ie(it,qi,!Q.atomValues.has(e)):((Ue=R)===null||Ue===void 0?void 0:Ue.effect)===j&&(R=null)}},e);l.set(y,[...(A=l.get(y))!==null&&A!==void 0?A:[],$])};for(const j of I)try{const ie=j({node:_,storeID:y.storeID,parentStoreID_UNSTABLE:y.parentStoreID,trigger:b,setSelf:V(j),resetSelf:M(j),onSet:U(j),getPromise:F,getLoadable:D,getInfo_UNSTABLE:K});if(ie!=null){var E;l.set(y,[...(E=l.get(y))!==null&&E!==void 0?E:[],ie])}}catch(ie){X=ie,C=!0}if(le=!1,!(X instanceof Bs)){var k;const j=C?U0(X):ut(X)?B0(u(y,X)):Cl(Ku(X));j.contents,w.atomValues.set(e,j),(k=y.getState().nextTree)===null||k===void 0||k.atomValues.set(e,j)}}return T}function h(y,w){var b,x;return(b=(x=w.atomValues.get(e))!==null&&x!==void 0?x:a)!==null&&b!==void 0?b:o}function f(y,w){if(w.atomValues.has(e))return vt(w.atomValues.get(e));if(w.nonvalidatedAtoms.has(e)){if(a!=null)return a;if(n==null)return o;const b=w.nonvalidatedAtoms.get(e),x=n.validator(b,aa);return a=x instanceof Bs?o:Cl(x),a}else return o}function g(){a=void 0}function m(y,w,b){if(w.atomValues.has(e)){const x=vt(w.atomValues.get(e));if(x.state==="hasValue"&&b===x.contents)return new Map}else if(!w.nonvalidatedAtoms.has(e)&&b instanceof Bs)return new Map;return a=void 0,new Map().set(e,Cl(b))}function v(){return I2(e)!==void 0&&i<=0}const _=QG({key:e,nodeType:"atom",peek:h,get:f,set:m,init:d,invalidate:g,shouldDeleteConfigOnRelease:v,dangerouslyAllowMutability:t.dangerouslyAllowMutability,persistence_UNSTABLE:t.persistence_UNSTABLE?{type:t.persistence_UNSTABLE.type,backButton:t.persistence_UNSTABLE.backButton}:void 0,shouldRestoreFromSnapshots:!0,retainedBy:r});return _}function QE(t){const{...e}=t,n="default"in t?t.default:new Promise(()=>{});return XG(n)?rK({...e,default:n}):nK({...e,default:n})}function rK(t){const e=QE({...t,default:aa,persistence_UNSTABLE:t.persistence_UNSTABLE===void 0?void 0:{...t.persistence_UNSTABLE,validator:r=>r instanceof Bs?r:vt(t.persistence_UNSTABLE).validator(r,aa)},effects:t.effects,effects_UNSTABLE:t.effects_UNSTABLE}),n=Vc({key:`${t.key}__withFallback`,get:({get:r})=>{const i=r(e);return i instanceof Bs?t.default:i},set:({set:r},i)=>r(e,i),cachePolicy_UNSTABLE:{eviction:"most-recent"},dangerouslyAllowMutability:t.dangerouslyAllowMutability});return YG(n.key,I2(t.key)),n}QE.value=t=>new T2(t);var C2=QE;class iK{constructor(e){var n;Ee(this,"_map",void 0),Ee(this,"_keyMapper",void 0),this._map=new Map,this._keyMapper=(n=e==null?void 0:e.mapKey)!==null&&n!==void 0?n:r=>r}size(){return this._map.size}has(e){return this._map.has(this._keyMapper(e))}get(e){return this._map.get(this._keyMapper(e))}set(e,n){this._map.set(this._keyMapper(e),n)}delete(e){this._map.delete(this._keyMapper(e))}clear(){this._map.clear()}}var sK={MapCache:iK},oK=sK.MapCache,aK=Object.freeze({__proto__:null,MapCache:oK});const{LRUCache:FR}=b2,{MapCache:lK}=aK,Zp={equality:"reference",eviction:"none",maxSize:1/0};function cK({equality:t=Zp.equality,eviction:e=Zp.eviction,maxSize:n=Zp.maxSize}=Zp){const r=uK(t);return dK(e,n,r)}function uK(t){switch(t){case"reference":return e=>e;case"value":return e=>D_(e)}throw Ce(`Unrecognized equality policy ${t}`)}function dK(t,e,n){switch(t){case"keep-all":return new lK({mapKey:n});case"lru":return new FR({mapKey:n,maxSize:vt(e)});case"most-recent":return new FR({mapKey:n,maxSize:1})}throw Ce(`Unrecognized eviction policy ${t}`)}var R2=cK;const{setConfigDeletionHandler:hK}=yr;function fK(t){var e,n;const r=R2({equality:(e=(n=t.cachePolicyForParams_UNSTABLE)===null||n===void 0?void 0:n.equality)!==null&&e!==void 0?e:"value",eviction:"keep-all"});return i=>{var s,o;const a=r.get(i);if(a!=null)return a;const{cachePolicyForParams_UNSTABLE:l,...c}=t,u="default"in t?t.default:new Promise(()=>{}),d=C2({...c,key:`${t.key}__${(s=D_(i))!==null&&s!==void 0?s:"void"}`,default:typeof u=="function"?u(i):u,retainedBy_UNSTABLE:typeof t.retainedBy_UNSTABLE=="function"?t.retainedBy_UNSTABLE(i):t.retainedBy_UNSTABLE,effects:typeof t.effects=="function"?t.effects(i):typeof t.effects_UNSTABLE=="function"?t.effects_UNSTABLE(i):(o=t.effects)!==null&&o!==void 0?o:t.effects_UNSTABLE});return r.set(i,d),hK(d.key,()=>{r.delete(i)}),d}}var pK=fK;const{setConfigDeletionHandler:gK}=yr;let mK=0;function yK(t){var e,n;const r=R2({equality:(e=(n=t.cachePolicyForParams_UNSTABLE)===null||n===void 0?void 0:n.equality)!==null&&e!==void 0?e:"value",eviction:"keep-all"});return i=>{var s;let o;try{o=r.get(i)}catch(h){throw Ce(`Problem with cache lookup for selector ${t.key}: ${h.message}`)}if(o!=null)return o;const a=`${t.key}__selectorFamily/${(s=D_(i,{allowFunctions:!0}))!==null&&s!==void 0?s:"void"}/${mK++}`,l=h=>t.get(i)(h),c=t.cachePolicy_UNSTABLE,u=typeof t.retainedBy_UNSTABLE=="function"?t.retainedBy_UNSTABLE(i):t.retainedBy_UNSTABLE;let d;if(t.set!=null){const h=t.set;d=Vc({key:a,get:l,set:(g,m)=>h(i)(g,m),cachePolicy_UNSTABLE:c,dangerouslyAllowMutability:t.dangerouslyAllowMutability,retainedBy_UNSTABLE:u})}else d=Vc({key:a,get:l,cachePolicy_UNSTABLE:c,dangerouslyAllowMutability:t.dangerouslyAllowMutability,retainedBy_UNSTABLE:u});return r.set(i,d),gK(d.key,()=>{r.delete(i)}),d}}var jo=yK;const _K=jo({key:"__constant",get:t=>()=>t,cachePolicyForParams_UNSTABLE:{equality:"reference"}});function vK(t){return _K(t)}var wK=vK;const bK=jo({key:"__error",get:t=>()=>{throw Ce(t)},cachePolicyForParams_UNSTABLE:{equality:"reference"}});function xK(t){return bK(t)}var SK=xK;function EK(t){return t}var TK=EK;const{loadableWithError:k2,loadableWithPromise:A2,loadableWithValue:P2}=$f;function O_(t,e){const n=Array(e.length).fill(void 0),r=Array(e.length).fill(void 0);for(const[i,s]of e.entries())try{n[i]=t(s)}catch(o){r[i]=o}return[n,r]}function IK(t){return t!=null&&!ut(t)}function M_(t){return Array.isArray(t)?t:Object.getOwnPropertyNames(t).map(e=>t[e])}function Yb(t,e){return Array.isArray(t)?e:Object.getOwnPropertyNames(t).reduce((n,r,i)=>({...n,[r]:e[i]}),{})}function pc(t,e,n){const r=n.map((i,s)=>i==null?P2(e[s]):ut(i)?A2(i):k2(i));return Yb(t,r)}function CK(t,e){return e.map((n,r)=>n===void 0?t[r]:n)}const RK=jo({key:"__waitForNone",get:t=>({get:e})=>{const n=M_(t),[r,i]=O_(e,n);return pc(t,r,i)},dangerouslyAllowMutability:!0}),kK=jo({key:"__waitForAny",get:t=>({get:e})=>{const n=M_(t),[r,i]=O_(e,n);return i.some(s=>!ut(s))?pc(t,r,i):new Promise(s=>{for(const[o,a]of i.entries())ut(a)&&a.then(l=>{r[o]=l,i[o]=void 0,s(pc(t,r,i))}).catch(l=>{i[o]=l,s(pc(t,r,i))})})},dangerouslyAllowMutability:!0}),AK=jo({key:"__waitForAll",get:t=>({get:e})=>{const n=M_(t),[r,i]=O_(e,n);if(i.every(o=>o==null))return Yb(t,r);const s=i.find(IK);if(s!=null)throw s;return Promise.all(i).then(o=>Yb(t,CK(r,o)))},dangerouslyAllowMutability:!0}),PK=jo({key:"__waitForAllSettled",get:t=>({get:e})=>{const n=M_(t),[r,i]=O_(e,n);return i.every(s=>!ut(s))?pc(t,r,i):Promise.all(i.map((s,o)=>ut(s)?s.then(a=>{r[o]=a,i[o]=void 0}).catch(a=>{r[o]=void 0,i[o]=a}):null)).then(()=>pc(t,r,i))},dangerouslyAllowMutability:!0}),NK=jo({key:"__noWait",get:t=>({get:e})=>{try{return Vc.value(P2(e(t)))}catch(n){return Vc.value(ut(n)?A2(n):k2(n))}},dangerouslyAllowMutability:!0});var DK={waitForNone:RK,waitForAny:kK,waitForAll:AK,waitForAllSettled:PK,noWait:NK};const{RecoilLoadable:OK}=$f,{DefaultValue:MK}=yr,{RecoilRoot:LK,useRecoilStoreID:VK}=Ts,{isRecoilValue:FK}=Oc,{retentionZone:jK}=x_,{freshSnapshot:$K}=R_,{useRecoilState:UK,useRecoilState_TRANSITION_SUPPORT_UNSTABLE:BK,useRecoilStateLoadable:zK,useRecoilValue:WK,useRecoilValue_TRANSITION_SUPPORT_UNSTABLE:HK,useRecoilValueLoadable:qK,useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE:GK,useResetRecoilState:KK,useSetRecoilState:QK}=s8,{useGotoRecoilSnapshot:YK,useRecoilSnapshot:XK,useRecoilTransactionObserver:JK}=p2,{useRecoilCallback:ZK}=_2,{noWait:e7,waitForAll:t7,waitForAllSettled:n7,waitForAny:r7,waitForNone:i7}=DK;var L_={DefaultValue:MK,isRecoilValue:FK,RecoilLoadable:OK,RecoilEnv:du,RecoilRoot:LK,useRecoilStoreID:VK,useRecoilBridgeAcrossReactRoots_UNSTABLE:N8,atom:C2,selector:Vc,atomFamily:pK,selectorFamily:jo,constSelector:wK,errorSelector:SK,readOnlySelector:TK,noWait:e7,waitForNone:i7,waitForAny:r7,waitForAll:t7,waitForAllSettled:n7,useRecoilValue:WK,useRecoilValueLoadable:qK,useRecoilState:UK,useRecoilStateLoadable:zK,useSetRecoilState:QK,useResetRecoilState:KK,useGetRecoilValueInfo_UNSTABLE:I8,useRecoilRefresher_UNSTABLE:aG,useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE:GK,useRecoilValue_TRANSITION_SUPPORT_UNSTABLE:HK,useRecoilState_TRANSITION_SUPPORT_UNSTABLE:BK,useRecoilCallback:ZK,useRecoilTransaction_UNSTABLE:hG,useGotoRecoilSnapshot:YK,useRecoilSnapshot:XK,useRecoilTransactionObserver_UNSTABLE:JK,snapshot_UNSTABLE:$K,useRetain:WE,retentionZone:jK},s7=L_.RecoilRoot,YE=L_.atom,qf=L_.useRecoilValue,_o=L_.useRecoilState;const N2=YE({key:"webSettings",default:{theme:"light",selectedTab:"coins"}}),$o=YE({key:"cryptoData",default:{data:[],filterdData:[],updatedTime:null}}),XE=YE({key:"cryptoNews",default:{data:[],filterdData:[],updatedTime:null}});var jR={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D2={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ee=function(t,e){if(!t)throw fu(e)},fu=function(t){return new Error("Firebase Database ("+D2.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O2=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},o7=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},JE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,u=s>>2,d=(s&3)<<4|a>>4;let h=(a&15)<<2|c>>6,f=c&63;l||(f=64,o||(h=64)),r.push(n[u],n[d],n[h],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(O2(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):o7(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||d==null)throw new a7;const h=s<<2|a>>4;if(r.push(h),c!==64){const f=a<<4&240|c>>2;if(r.push(f),d!==64){const g=c<<6&192|d;r.push(g)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class a7 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const M2=function(t){const e=O2(t);return JE.encodeByteArray(e,!0)},Km=function(t){return M2(t).replace(/\./g,"")},Qm=function(t){try{return JE.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l7(t){return Vh(void 0,t)}function Vh(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!c7(n)||(t[n]=Vh(t[n],e[n]));return t}function c7(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u7(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d7=()=>u7().__FIREBASE_DEFAULTS__,h7=()=>{if(typeof process>"u"||typeof jR>"u")return;const t=jR.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},f7=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Qm(t[1]);return e&&JSON.parse(e)},ZE=()=>{try{return d7()||h7()||f7()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},L2=()=>{var t;return(t=ZE())===null||t===void 0?void 0:t.config},p7=t=>{var e;return(e=ZE())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g7(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Km(JSON.stringify(n)),Km(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function tT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(xt())}function nT(){var t;const e=(t=ZE())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function m7(){return typeof self=="object"&&self.self===self}function V2(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function V_(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function F2(){const t=xt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function j2(){return D2.NODE_ADMIN===!0}function $2(){return!nT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Fh(){try{return typeof indexedDB=="object"}catch{return!1}}function y7(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _7="FirebaseError";class Kn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=_7,Object.setPrototypeOf(this,Kn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,dl.prototype.create)}}class dl{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?v7(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Kn(i,a,r)}}function v7(t,e){return t.replace(w7,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const w7=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jh(t){return JSON.parse(t)}function wn(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U2=function(t){let e={},n={},r={},i="";try{const s=t.split(".");e=jh(Qm(s[0])||""),n=jh(Qm(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}},b7=function(t){const e=U2(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},x7=function(t){const e=U2(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function di(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Fc(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Xb(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ym(t,e,n){const r={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function $h(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if($R(s)&&$R(o)){if(!$h(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function $R(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hl(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ic(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Td(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S7{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){const h=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(h<<1|h>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4],c,u;for(let d=0;d<80;d++){d<40?d<20?(c=a^s&(o^a),u=1518500249):(c=s^o^a,u=1859775393):d<60?(c=s&o|a&(s|o),u=2400959708):(c=s^o^a,u=3395469782);const h=(i<<5|i>>>27)+c+l+u+r[d]&4294967295;l=a,a=o,o=(s<<30|s>>>2)&4294967295,s=i,i=h}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let i=0;const s=this.buf_;let o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}function B2(t,e){const n=new E7(t,e);return n.subscribe.bind(n)}class E7{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");T7(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=z0),i.error===void 0&&(i.error=z0),i.complete===void 0&&(i.complete=z0);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function T7(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function z0(){}function I7(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C7=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,ee(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},F_=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fe(t){return t&&t._delegate?t._delegate:t}class hi{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const na="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R7{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new eT;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(A7(e))try{this.getOrInitializeService({instanceIdentifier:na})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=na){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=na){return this.instances.has(e)}getOptions(e=na){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:k7(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=na){return this.component?this.component.multipleInstances?e:na:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function k7(t){return t===na?void 0:t}function A7(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P7{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new R7(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rT=[];var ke;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ke||(ke={}));const z2={debug:ke.DEBUG,verbose:ke.VERBOSE,info:ke.INFO,warn:ke.WARN,error:ke.ERROR,silent:ke.SILENT},N7=ke.INFO,D7={[ke.DEBUG]:"log",[ke.VERBOSE]:"log",[ke.INFO]:"info",[ke.WARN]:"warn",[ke.ERROR]:"error"},O7=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=D7[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let Gf=class{constructor(e){this.name=e,this._logLevel=N7,this._logHandler=O7,this._userLogHandler=null,rT.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ke))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?z2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ke.DEBUG,...e),this._logHandler(this,ke.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ke.VERBOSE,...e),this._logHandler(this,ke.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ke.INFO,...e),this._logHandler(this,ke.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ke.WARN,...e),this._logHandler(this,ke.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ke.ERROR,...e),this._logHandler(this,ke.ERROR,...e)}};function M7(t){rT.forEach(e=>{e.setLogLevel(t)})}function L7(t,e){for(const n of rT){let r=null;e&&e.level&&(r=z2[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(i,s,...o)=>{const a=o.map(l=>{if(l==null)return null;if(typeof l=="string")return l;if(typeof l=="number"||typeof l=="boolean")return l.toString();if(l instanceof Error)return l.message;try{return JSON.stringify(l)}catch{return null}}).filter(l=>l).join(" ");s>=(r??i.logLevel)&&t({level:ke[s].toLowerCase(),message:a,args:o,type:i.name})}}}const V7=(t,e)=>e.some(n=>t instanceof n);let UR,BR;function F7(){return UR||(UR=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function j7(){return BR||(BR=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const W2=new WeakMap,Jb=new WeakMap,H2=new WeakMap,W0=new WeakMap,iT=new WeakMap;function $7(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(uo(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&W2.set(n,t)}).catch(()=>{}),iT.set(e,t),e}function U7(t){if(Jb.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Jb.set(t,e)}let Zb={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Jb.get(t);if(e==="objectStoreNames")return t.objectStoreNames||H2.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return uo(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function B7(t){Zb=t(Zb)}function z7(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(H0(this),e,...n);return H2.set(r,e.sort?e.sort():[e]),uo(r)}:j7().includes(t)?function(...e){return t.apply(H0(this),e),uo(W2.get(this))}:function(...e){return uo(t.apply(H0(this),e))}}function W7(t){return typeof t=="function"?z7(t):(t instanceof IDBTransaction&&U7(t),V7(t,F7())?new Proxy(t,Zb):t)}function uo(t){if(t instanceof IDBRequest)return $7(t);if(W0.has(t))return W0.get(t);const e=W7(t);return e!==t&&(W0.set(t,e),iT.set(e,t)),e}const H0=t=>iT.get(t);function H7(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=uo(o);return r&&o.addEventListener("upgradeneeded",l=>{r(uo(o.result),l.oldVersion,l.newVersion,uo(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const q7=["get","getKey","getAll","getAllKeys","count"],G7=["put","add","delete","clear"],q0=new Map;function zR(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(q0.get(e))return q0.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=G7.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||q7.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return q0.set(e,s),s}B7(t=>({...t,get:(e,n,r)=>zR(e,n)||t.get(e,n,r),has:(e,n)=>!!zR(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K7{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Q7(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Q7(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const ex="@firebase/app",WR="0.9.29";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $a=new Gf("@firebase/app"),Y7="@firebase/app-compat",X7="@firebase/analytics-compat",J7="@firebase/analytics",Z7="@firebase/app-check-compat",eQ="@firebase/app-check",tQ="@firebase/auth",nQ="@firebase/auth-compat",rQ="@firebase/database",iQ="@firebase/database-compat",sQ="@firebase/functions",oQ="@firebase/functions-compat",aQ="@firebase/installations",lQ="@firebase/installations-compat",cQ="@firebase/messaging",uQ="@firebase/messaging-compat",dQ="@firebase/performance",hQ="@firebase/performance-compat",fQ="@firebase/remote-config",pQ="@firebase/remote-config-compat",gQ="@firebase/storage",mQ="@firebase/storage-compat",yQ="@firebase/firestore",_Q="@firebase/firestore-compat",vQ="firebase",wQ="10.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vo="[DEFAULT]",bQ={[ex]:"fire-core",[Y7]:"fire-core-compat",[J7]:"fire-analytics",[X7]:"fire-analytics-compat",[eQ]:"fire-app-check",[Z7]:"fire-app-check-compat",[tQ]:"fire-auth",[nQ]:"fire-auth-compat",[rQ]:"fire-rtdb",[iQ]:"fire-rtdb-compat",[sQ]:"fire-fn",[oQ]:"fire-fn-compat",[aQ]:"fire-iid",[lQ]:"fire-iid-compat",[cQ]:"fire-fcm",[uQ]:"fire-fcm-compat",[dQ]:"fire-perf",[hQ]:"fire-perf-compat",[fQ]:"fire-rc",[pQ]:"fire-rc-compat",[gQ]:"fire-gcs",[mQ]:"fire-gcs-compat",[yQ]:"fire-fst",[_Q]:"fire-fst-compat","fire-js":"fire-js",[vQ]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wo=new Map,Uh=new Map;function Xm(t,e){try{t.container.addComponent(e)}catch(n){$a.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function q2(t,e){t.container.addOrOverwriteComponent(e)}function ws(t){const e=t.name;if(Uh.has(e))return $a.debug(`There were multiple attempts to register component ${e}.`),!1;Uh.set(e,t);for(const n of wo.values())Xm(n,t);return!0}function G2(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function xQ(t,e,n=vo){G2(t,e).clearInstance(n)}function SQ(){Uh.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EQ={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},ds=new dl("app","Firebase",EQ);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let TQ=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new hi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ds.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Is=wQ;function sT(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:vo,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw ds.create("bad-app-name",{appName:String(i)});if(n||(n=L2()),!n)throw ds.create("no-options");const s=wo.get(i);if(s){if($h(n,s.options)&&$h(r,s.config))return s;throw ds.create("duplicate-app",{appName:i})}const o=new P7(i);for(const l of Uh.values())o.addComponent(l);const a=new TQ(n,r,o);return wo.set(i,a),a}function IQ(t=vo){const e=wo.get(t);if(!e&&t===vo&&L2())return sT();if(!e)throw ds.create("no-app",{appName:t});return e}function CQ(){return Array.from(wo.values())}async function K2(t){const e=t.name;wo.has(e)&&(wo.delete(e),await Promise.all(t.container.getProviders().map(n=>n.delete())),t.isDeleted=!0)}function Hr(t,e,n){var r;let i=(r=bQ[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),$a.warn(a.join(" "));return}ws(new hi(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}function Q2(t,e){if(t!==null&&typeof t!="function")throw ds.create("invalid-log-argument");L7(t,e)}function Y2(t){M7(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RQ="firebase-heartbeat-database",kQ=1,Bh="firebase-heartbeat-store";let G0=null;function X2(){return G0||(G0=H7(RQ,kQ,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Bh)}catch(n){console.warn(n)}}}}).catch(t=>{throw ds.create("idb-open",{originalErrorMessage:t.message})})),G0}async function AQ(t){try{const n=(await X2()).transaction(Bh),r=await n.objectStore(Bh).get(J2(t));return await n.done,r}catch(e){if(e instanceof Kn)$a.warn(e.message);else{const n=ds.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});$a.warn(n.message)}}}async function HR(t,e){try{const r=(await X2()).transaction(Bh,"readwrite");await r.objectStore(Bh).put(e,J2(t)),await r.done}catch(n){if(n instanceof Kn)$a.warn(n.message);else{const r=ds.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});$a.warn(r.message)}}}function J2(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PQ=1024,NQ=30*24*60*60*1e3;class DQ{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new MQ(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=qR();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=NQ}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=qR(),{heartbeatsToSend:r,unsentEntries:i}=OQ(this._heartbeatsCache.heartbeats),s=Km(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function qR(){return new Date().toISOString().substring(0,10)}function OQ(t,e=PQ){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),GR(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),GR(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class MQ{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Fh()?y7().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await AQ(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return HR(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return HR(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function GR(t){return Km(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LQ(t){ws(new hi("platform-logger",e=>new K7(e),"PRIVATE")),ws(new hi("heartbeat",e=>new DQ(e),"PRIVATE")),Hr(ex,WR,t),Hr(ex,WR,"esm2017"),Hr("fire-js","")}LQ("");const VQ=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:Kn,SDK_VERSION:Is,_DEFAULT_ENTRY_NAME:vo,_addComponent:Xm,_addOrOverwriteComponent:q2,_apps:wo,_clearComponents:SQ,_components:Uh,_getProvider:G2,_registerComponent:ws,_removeServiceInstance:xQ,deleteApp:K2,getApp:IQ,getApps:CQ,initializeApp:sT,onLog:Q2,registerVersion:Hr,setLogLevel:Y2},Symbol.toStringTag,{value:"Module"}));function oT(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}const Qu={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Rl={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FQ(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}}function Z2(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const jQ=FQ,$Q=Z2,eV=new dl("auth","Firebase",Z2());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jm=new Gf("@firebase/auth");function UQ(t,...e){Jm.logLevel<=ke.WARN&&Jm.warn(`Auth (${Is}): ${t}`,...e)}function Kg(t,...e){Jm.logLevel<=ke.ERROR&&Jm.error(`Auth (${Is}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cn(t,...e){throw aT(t,...e)}function En(t,...e){return aT(t,...e)}function tV(t,e,n){const r=Object.assign(Object.assign({},$Q()),{[e]:n});return new dl("auth","Firebase",r).create(e,{appName:t.name})}function pu(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Cn(t,"argument-error"),tV(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function aT(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return eV.create(t,...e)}function G(t,e,...n){if(!t)throw aT(e,...n)}function ki(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Kg(e),new Error(e)}function fi(t,e){t||ki(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zh(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function lT(){return KR()==="http:"||KR()==="https:"}function KR(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BQ(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(lT()||V2()||"connection"in navigator)?navigator.onLine:!0}function zQ(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kf{constructor(e,n){this.shortDelay=e,this.longDelay=n,fi(n>e,"Short delay should be less than long delay!"),this.isMobile=tT()||V_()}get(){return BQ()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cT(t,e){fi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nV{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ki("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ki("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ki("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WQ={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HQ=new Kf(3e4,6e4);function Vt(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Ft(t,e,n,r,i={}){return rV(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=hl(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),nV.fetch()(iV(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},s))})}async function rV(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},WQ),e);try{const i=new GQ(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Id(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Id(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Id(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Id(t,"user-disabled",o);const u=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw tV(t,u,c);Cn(t,u)}}catch(i){if(i instanceof Kn)throw i;Cn(t,"network-request-failed",{message:String(i)})}}async function Cs(t,e,n,r,i={}){const s=await Ft(t,e,n,r,i);return"mfaPendingCredential"in s&&Cn(t,"multi-factor-auth-required",{_serverResponse:s}),s}function iV(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?cT(t.config,i):`${t.config.apiScheme}://${i}`}function qQ(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class GQ{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(En(this.auth,"network-request-failed")),HQ.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Id(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=En(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QR(t){return t!==void 0&&t.getResponse!==void 0}function YR(t){return t!==void 0&&t.enterprise!==void 0}class KQ{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return qQ(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QQ(t){return(await Ft(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function YQ(t,e){return Ft(t,"GET","/v2/recaptchaConfig",Vt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XQ(t,e){return Ft(t,"POST","/v1/accounts:delete",e)}async function JQ(t,e){return Ft(t,"POST","/v1/accounts:update",e)}async function ZQ(t,e){return Ft(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zd(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function eY(t,e=!1){const n=fe(t),r=await n.getIdToken(e),i=j_(r);G(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Zd(K0(i.auth_time)),issuedAtTime:Zd(K0(i.iat)),expirationTime:Zd(K0(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function K0(t){return Number(t)*1e3}function j_(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Kg("JWT malformed, contained fewer than 3 sections"),null;try{const i=Qm(n);return i?JSON.parse(i):(Kg("Failed to decode base64 JWT payload"),null)}catch(i){return Kg("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function tY(t){const e=j_(t);return G(e,"internal-error"),G(typeof e.exp<"u","internal-error"),G(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bs(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Kn&&nY(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function nY({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rY{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sV{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Zd(this.lastLoginAt),this.creationTime=Zd(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wh(t){var e;const n=t.auth,r=await t.getIdToken(),i=await bs(t,ZQ(n,{idToken:r}));G(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?oY(s.providerUserInfo):[],a=sY(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),u=l?c:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new sV(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,d)}async function iY(t){const e=fe(t);await Wh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function sY(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function oY(t){return t.map(e=>{var{providerId:n}=e,r=oT(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aY(t,e){const n=await rV(t,{},async()=>{const r=hl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=iV(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",nV.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function lY(t,e){return Ft(t,"POST","/v2/accounts:revokeToken",Vt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){G(e.idToken,"internal-error"),G(typeof e.idToken<"u","internal-error"),G(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):tY(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return G(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await aY(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Hh;return r&&(G(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(G(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(G(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Hh,this.toJSON())}_performRefresh(){return ki("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ls(t,e){G(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Ia{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=oT(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new rY(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new sV(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await bs(this,this.stsTokenManager.getToken(this.auth,e));return G(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return eY(this,e)}reload(){return iY(this)}_assign(e){this!==e&&(G(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ia(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){G(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Wh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await bs(this,XQ(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,c,u;const d=(r=n.displayName)!==null&&r!==void 0?r:void 0,h=(i=n.email)!==null&&i!==void 0?i:void 0,f=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,g=(o=n.photoURL)!==null&&o!==void 0?o:void 0,m=(a=n.tenantId)!==null&&a!==void 0?a:void 0,v=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,_=(c=n.createdAt)!==null&&c!==void 0?c:void 0,y=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:w,emailVerified:b,isAnonymous:x,providerData:T,stsTokenManager:I}=n;G(w&&I,e,"internal-error");const E=Hh.fromJSON(this.name,I);G(typeof w=="string",e,"internal-error"),Ls(d,e.name),Ls(h,e.name),G(typeof b=="boolean",e,"internal-error"),G(typeof x=="boolean",e,"internal-error"),Ls(f,e.name),Ls(g,e.name),Ls(m,e.name),Ls(v,e.name),Ls(_,e.name),Ls(y,e.name);const k=new Ia({uid:w,auth:e,email:h,emailVerified:b,displayName:d,isAnonymous:x,photoURL:g,phoneNumber:f,tenantId:m,stsTokenManager:E,createdAt:_,lastLoginAt:y});return T&&Array.isArray(T)&&(k.providerData=T.map(D=>Object.assign({},D))),v&&(k._redirectEventId=v),k}static async _fromIdTokenResponse(e,n,r=!1){const i=new Hh;i.updateFromServerResponse(n);const s=new Ia({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Wh(s),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XR=new Map;function Er(t){fi(t instanceof Function,"Expected a class definition");let e=XR.get(t);return e?(fi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,XR.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oV{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}oV.type="NONE";const jc=oV;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ca(t,e,n){return`firebase:${t}:${e}:${n}`}class gc{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Ca(this.userKey,i.apiKey,s),this.fullPersistenceKey=Ca("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ia._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new gc(Er(jc),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||Er(jc);const o=Ca(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const u=await c._get(o);if(u){const d=Ia._fromJSON(e,u);c!==s&&(a=d),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new gc(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new gc(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JR(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(cV(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(aV(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(uV(e))return"Blackberry";if(dV(e))return"Webos";if(uT(e))return"Safari";if((e.includes("chrome/")||lV(e))&&!e.includes("edge/"))return"Chrome";if(Qf(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function aV(t=xt()){return/firefox\//i.test(t)}function uT(t=xt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function lV(t=xt()){return/crios\//i.test(t)}function cV(t=xt()){return/iemobile/i.test(t)}function Qf(t=xt()){return/android/i.test(t)}function uV(t=xt()){return/blackberry/i.test(t)}function dV(t=xt()){return/webos/i.test(t)}function gu(t=xt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function cY(t=xt()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(t)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(t)}function uY(t=xt()){var e;return gu(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function dY(){return F2()&&document.documentMode===10}function hV(t=xt()){return gu(t)||Qf(t)||dV(t)||uV(t)||/windows phone/i.test(t)||cV(t)}function hY(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fV(t,e=[]){let n;switch(t){case"Browser":n=JR(xt());break;case"Worker":n=`${JR(xt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Is}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fY{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pY(t,e={}){return Ft(t,"GET","/v2/passwordPolicy",Vt(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gY=6;class mY{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:gY,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yY{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ZR(this),this.idTokenSubscription=new ZR(this),this.beforeStateQueue=new fY(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=eV,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Er(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await gc.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return G(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Wh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=zQ()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?fe(e):null;return n&&G(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&G(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(Er(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await pY(this),n=new mY(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new dl("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await lY(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Er(e)||this._popupRedirectResolver;G(n,this,"argument-error"),this.redirectPersistenceManager=await gc.create(this,[Er(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(G(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return G(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=fV(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&UQ(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Ot(t){return fe(t)}class ZR{constructor(e){this.auth=e,this.observer=null,this.addObserver=B2(n=>this.observer=n)}get next(){return G(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function _Y(t){Yf=t}function dT(t){return Yf.loadJS(t)}function vY(){return Yf.recaptchaV2Script}function wY(){return Yf.recaptchaEnterpriseScript}function bY(){return Yf.gapiScript}function pV(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const xY="recaptcha-enterprise",SY="NO_RECAPTCHA";class EY{constructor(e){this.type=xY,this.auth=Ot(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{YQ(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new KQ(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;YR(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(SY)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&YR(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=wY();l.length!==0&&(l+=a),dT(l).then(()=>{i(a,s,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function ek(t,e,n,r=!1){const i=new EY(t);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function qh(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await ek(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await ek(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)})}function TY(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Er);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function IY(t,e,n){const r=Ot(t);G(r._canInitEmulator,r,"emulator-config-failed"),G(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=gV(e),{host:o,port:a}=CY(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||RY()}function gV(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function CY(t){const e=gV(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:tk(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:tk(o)}}}function tk(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function RY(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ki("not implemented")}_getIdTokenResponse(e){return ki("not implemented")}_linkToIdToken(e,n){return ki("not implemented")}_getReauthenticationResolver(e){return ki("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mV(t,e){return Ft(t,"POST","/v1/accounts:resetPassword",Vt(t,e))}async function kY(t,e){return Ft(t,"POST","/v1/accounts:update",e)}async function AY(t,e){return Ft(t,"POST","/v1/accounts:signUp",e)}async function PY(t,e){return Ft(t,"POST","/v1/accounts:update",Vt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NY(t,e){return Cs(t,"POST","/v1/accounts:signInWithPassword",Vt(t,e))}async function $_(t,e){return Ft(t,"POST","/v1/accounts:sendOobCode",Vt(t,e))}async function DY(t,e){return $_(t,e)}async function OY(t,e){return $_(t,e)}async function MY(t,e){return $_(t,e)}async function LY(t,e){return $_(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VY(t,e){return Cs(t,"POST","/v1/accounts:signInWithEmailLink",Vt(t,e))}async function FY(t,e){return Cs(t,"POST","/v1/accounts:signInWithEmailLink",Vt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh extends mu{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Gh(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Gh(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return qh(e,n,"signInWithPassword",NY);case"emailLink":return VY(e,{email:this._email,oobCode:this._password});default:Cn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return qh(e,r,"signUpPassword",AY);case"emailLink":return FY(e,{idToken:n,email:this._email,oobCode:this._password});default:Cn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hs(t,e){return Cs(t,"POST","/v1/accounts:signInWithIdp",Vt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jY="http://localhost";class Ui extends mu{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ui(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Cn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=oT(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Ui(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return hs(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,hs(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,hs(e,n)}buildRequest(){const e={requestUri:jY,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=hl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $Y(t,e){return Ft(t,"POST","/v1/accounts:sendVerificationCode",Vt(t,e))}async function UY(t,e){return Cs(t,"POST","/v1/accounts:signInWithPhoneNumber",Vt(t,e))}async function BY(t,e){const n=await Cs(t,"POST","/v1/accounts:signInWithPhoneNumber",Vt(t,e));if(n.temporaryProof)throw Id(t,"account-exists-with-different-credential",n);return n}const zY={USER_NOT_FOUND:"user-not-found"};async function WY(t,e){const n=Object.assign(Object.assign({},e),{operation:"REAUTH"});return Cs(t,"POST","/v1/accounts:signInWithPhoneNumber",Vt(t,n),zY)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra extends mu{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new Ra({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new Ra({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return UY(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return BY(e,Object.assign({idToken:n},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return WY(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:r,verificationCode:i}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:r,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s}=e;return!r&&!n&&!i&&!s?null:new Ra({verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HY(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function qY(t){const e=ic(Td(t)).link,n=e?ic(Td(e)).deep_link_id:null,r=ic(Td(t)).deep_link_id;return(r?ic(Td(r)).link:null)||r||n||e||t}class U_{constructor(e){var n,r,i,s,o,a;const l=ic(Td(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,u=(r=l.oobCode)!==null&&r!==void 0?r:null,d=HY((i=l.mode)!==null&&i!==void 0?i:null);G(c&&u&&d,"argument-error"),this.apiKey=c,this.operation=d,this.code=u,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=qY(e);try{return new U_(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo{constructor(){this.providerId=Uo.PROVIDER_ID}static credential(e,n){return Gh._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=U_.parseLink(n);return G(r,"argument-error"),Gh._fromEmailAndCode(e,r.code,r.tenantId)}}Uo.PROVIDER_ID="password";Uo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Uo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yu extends Rs{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class mc extends yu{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return G("providerId"in n&&"signInMethod"in n,"argument-error"),Ui._fromParams(n)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return G(e.idToken||e.accessToken,"argument-error"),Ui._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return mc.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return mc.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:o,providerId:a}=e;if(!r&&!i&&!n&&!s||!a)return null;try{return new mc(a)._credential({idToken:n,accessToken:r,nonce:o,pendingToken:s})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei extends yu{constructor(){super("facebook.com")}static credential(e){return Ui._fromParams({providerId:Ei.PROVIDER_ID,signInMethod:Ei.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ei.credentialFromTaggedObject(e)}static credentialFromError(e){return Ei.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ei.credential(e.oauthAccessToken)}catch{return null}}}Ei.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ei.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti extends yu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ui._fromParams({providerId:Ti.PROVIDER_ID,signInMethod:Ti.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ti.credentialFromTaggedObject(e)}static credentialFromError(e){return Ti.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Ti.credential(n,r)}catch{return null}}}Ti.GOOGLE_SIGN_IN_METHOD="google.com";Ti.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii extends yu{constructor(){super("github.com")}static credential(e){return Ui._fromParams({providerId:Ii.PROVIDER_ID,signInMethod:Ii.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ii.credentialFromTaggedObject(e)}static credentialFromError(e){return Ii.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ii.credential(e.oauthAccessToken)}catch{return null}}}Ii.GITHUB_SIGN_IN_METHOD="github.com";Ii.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GY="http://localhost";class $c extends mu{constructor(e,n){super(e,e),this.pendingToken=n}_getIdTokenResponse(e){const n=this.buildRequest();return hs(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,hs(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,hs(e,n)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,pendingToken:s}=n;return!r||!i||!s||r!==i?null:new $c(r,s)}static _create(e,n){return new $c(e,n)}buildRequest(){return{requestUri:GY,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KY="saml.";class Zm extends Rs{constructor(e){G(e.startsWith(KY),"argument-error"),super(e)}static credentialFromResult(e){return Zm.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return Zm.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const n=$c.fromJSON(e);return G(n,"argument-error"),n}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:n,providerId:r}=e;if(!n||!r)return null;try{return $c._create(r,n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci extends yu{constructor(){super("twitter.com")}static credential(e,n){return Ui._fromParams({providerId:Ci.PROVIDER_ID,signInMethod:Ci.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ci.credentialFromTaggedObject(e)}static credentialFromError(e){return Ci.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Ci.credential(n,r)}catch{return null}}}Ci.TWITTER_SIGN_IN_METHOD="twitter.com";Ci.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yV(t,e){return Cs(t,"POST","/v1/accounts:signUp",Vt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Ia._fromIdTokenResponse(e,r,i),o=nk(r);return new Kr({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=nk(r);return new Kr({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function nk(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QY(t){var e;const n=Ot(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new Kr({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await yV(n,{returnSecureToken:!0}),i=await Kr._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ey extends Kn{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,ey.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new ey(e,n,r,i)}}function _V(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?ey._fromErrorAndOperation(t,s,e,r):s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vV(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YY(t,e){const n=fe(t);await B_(!0,n,e);const{providerUserInfo:r}=await JQ(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),i=vV(r||[]);return n.providerData=n.providerData.filter(s=>i.has(s.providerId)),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function hT(t,e,n=!1){const r=await bs(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Kr._forOperation(t,"link",r)}async function B_(t,e,n){await Wh(e);const r=vV(e.providerData),i=t===!1?"provider-already-linked":"no-such-provider";G(r.has(n)===t,e.auth,i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wV(t,e,n=!1){const{auth:r}=t,i="reauthenticate";try{const s=await bs(t,_V(r,i,e,t),n);G(s.idToken,r,"internal-error");const o=j_(s.idToken);G(o,r,"internal-error");const{sub:a}=o;return G(t.uid===a,r,"user-mismatch"),Kr._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Cn(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bV(t,e,n=!1){const r="signIn",i=await _V(t,r,e),s=await Kr._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function z_(t,e){return bV(Ot(t),e)}async function xV(t,e){const n=fe(t);return await B_(!1,n,e.providerId),hT(n,e)}async function SV(t,e){return wV(fe(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XY(t,e){return Cs(t,"POST","/v1/accounts:signInWithCustomToken",Vt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JY(t,e){const n=Ot(t),r=await XY(n,{token:e,returnSecureToken:!0}),i=await Kr._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xf{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?fT._fromServerResponse(e,n):"totpInfo"in n?pT._fromServerResponse(e,n):Cn(e,"internal-error")}}class fT extends Xf{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new fT(n)}}class pT extends Xf{constructor(e){super("totp",e)}static _fromServerResponse(e,n){return new pT(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W_(t,e,n){var r;G(((r=n.url)===null||r===void 0?void 0:r.length)>0,t,"invalid-continue-uri"),G(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(G(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(G(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gT(t){const e=Ot(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function mT(t,e,n){const r=Ot(t),i={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};n&&W_(r,i,n),await qh(r,i,"getOobCode",OY)}async function ZY(t,e,n){await mV(fe(t),{oobCode:e,newPassword:n}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&gT(t),r})}async function eX(t,e){await PY(fe(t),{oobCode:e})}async function EV(t,e){const n=fe(t),r=await mV(n,{oobCode:e}),i=r.requestType;switch(G(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":G(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":G(r.mfaInfo,n,"internal-error");default:G(r.email,n,"internal-error")}let s=null;return r.mfaInfo&&(s=Xf._fromServerResponse(Ot(n),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}}async function tX(t,e){const{data:n}=await EV(fe(t),e);return n.email}async function TV(t,e,n){const r=Ot(t),o=await qh(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",yV).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&gT(t),l}),a=await Kr._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function IV(t,e,n){return z_(fe(t),Uo.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&gT(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nX(t,e,n){const r=Ot(t),i={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function s(o,a){G(a.handleCodeInApp,r,"argument-error"),a&&W_(r,o,a)}s(i,n),await qh(r,i,"getOobCode",MY)}function rX(t,e){const n=U_.parseLink(e);return(n==null?void 0:n.operation)==="EMAIL_SIGNIN"}async function iX(t,e,n){const r=fe(t),i=Uo.credentialWithLink(e,n||zh());return G(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),z_(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sX(t,e){return Ft(t,"POST","/v1/accounts:createAuthUri",Vt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oX(t,e){const n=lT()?zh():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:i}=await sX(fe(t),r);return i||[]}async function aX(t,e){const n=fe(t),i={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&W_(n.auth,i,e);const{email:s}=await DY(n.auth,i);s!==t.email&&await t.reload()}async function lX(t,e,n){const r=fe(t),s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await t.getIdToken(),newEmail:e};n&&W_(r.auth,s,n);const{email:o}=await LY(r.auth,s);o!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cX(t,e){return Ft(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yT(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=fe(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await bs(r,cX(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function uX(t,e){return RV(fe(t),e,null)}function CV(t,e){return RV(fe(t),null,e)}async function RV(t,e,n){const{auth:r}=t,s={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(s.email=e),n&&(s.password=n);const o=await bs(t,kY(r,s));await t._updateTokensIfNecessary(o,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dX(t){var e,n;if(!t)return null;const{providerId:r}=t,i=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},s=t.isNewUser||t.kind==="identitytoolkit#SignupNewUserResponse";if(!r&&(t!=null&&t.idToken)){const o=(n=(e=j_(t.idToken))===null||e===void 0?void 0:e.firebase)===null||n===void 0?void 0:n.sign_in_provider;if(o){const a=o!=="anonymous"&&o!=="custom"?o:null;return new yc(s,a)}}if(!r)return null;switch(r){case"facebook.com":return new hX(s,i);case"github.com":return new fX(s,i);case"google.com":return new pX(s,i);case"twitter.com":return new gX(s,i,t.screenName||null);case"custom":case"anonymous":return new yc(s,null);default:return new yc(s,r,i)}}class yc{constructor(e,n,r={}){this.isNewUser=e,this.providerId=n,this.profile=r}}class kV extends yc{constructor(e,n,r,i){super(e,n,r),this.username=i}}class hX extends yc{constructor(e,n){super(e,"facebook.com",n)}}class fX extends kV{constructor(e,n){super(e,"github.com",n,typeof(n==null?void 0:n.login)=="string"?n==null?void 0:n.login:null)}}class pX extends yc{constructor(e,n){super(e,"google.com",n)}}class gX extends kV{constructor(e,n,r){super(e,"twitter.com",n,r)}}function mX(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:dX(n)}function yX(t,e,n,r){return fe(t).onAuthStateChanged(e,n,r)}function AV(t){return fe(t).signOut()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma{constructor(e,n,r){this.type=e,this.credential=n,this.user=r}static _fromIdtoken(e,n){return new ma("enroll",e,n)}static _fromMfaPendingCredential(e){return new ma("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var n,r;if(e!=null&&e.multiFactorSession){if(!((n=e.multiFactorSession)===null||n===void 0)&&n.pendingCredential)return ma._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(!((r=e.multiFactorSession)===null||r===void 0)&&r.idToken)return ma._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _T{constructor(e,n,r){this.session=e,this.hints=n,this.signInResolver=r}static _fromError(e,n){const r=Ot(e),i=n.customData._serverResponse,s=(i.mfaInfo||[]).map(a=>Xf._fromServerResponse(r,a));G(i.mfaPendingCredential,r,"internal-error");const o=ma._fromMfaPendingCredential(i.mfaPendingCredential);return new _T(o,s,async a=>{const l=await a._process(r,o);delete i.mfaInfo,delete i.mfaPendingCredential;const c=Object.assign(Object.assign({},i),{idToken:l.idToken,refreshToken:l.refreshToken});switch(n.operationType){case"signIn":const u=await Kr._fromIdTokenResponse(r,n.operationType,c);return await r._updateCurrentUser(u.user),u;case"reauthenticate":return G(n.user,r,"internal-error"),Kr._forOperation(n.user,n.operationType,c);default:Cn(r,"internal-error")}})}async resolveSignIn(e){const n=e;return this.signInResolver(n)}}function _X(t,e){var n;const r=fe(t),i=e;return G(e.customData.operationType,r,"argument-error"),G((n=i.customData._serverResponse)===null||n===void 0?void 0:n.mfaPendingCredential,r,"argument-error"),_T._fromError(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vX(t,e){return Ft(t,"POST","/v2/accounts/mfaEnrollment:start",Vt(t,e))}function wX(t,e){return Ft(t,"POST","/v2/accounts/mfaEnrollment:finalize",Vt(t,e))}function bX(t,e){return Ft(t,"POST","/v2/accounts/mfaEnrollment:withdraw",Vt(t,e))}class vT{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(n=>{n.mfaInfo&&(this.enrolledFactors=n.mfaInfo.map(r=>Xf._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new vT(e)}async getSession(){return ma._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,n){const r=e,i=await this.getSession(),s=await bs(this.user,r._process(this.user.auth,i,n));return await this.user._updateTokensIfNecessary(s),this.user.reload()}async unenroll(e){const n=typeof e=="string"?e:e.uid,r=await this.user.getIdToken();try{const i=await bs(this.user,bX(this.user.auth,{idToken:r,mfaEnrollmentId:n}));this.enrolledFactors=this.enrolledFactors.filter(({uid:s})=>s!==n),await this.user._updateTokensIfNecessary(i),await this.user.reload()}catch(i){throw i}}}const Q0=new WeakMap;function xX(t){const e=fe(t);return Q0.has(e)||Q0.set(e,vT._fromUser(e)),Q0.get(e)}const ty="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PV{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ty,"1"),this.storage.removeItem(ty),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SX(){const t=xt();return uT(t)||gu(t)}const EX=1e3,TX=10;class NV extends PV{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=SX()&&hY(),this.fallbackToPolling=hV(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);dY()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,TX):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},EX)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}NV.type="LOCAL";const wT=NV;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DV extends PV{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}DV.type="SESSION";const Ua=DV;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IX(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H_{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new H_(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await IX(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}H_.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jf(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CX{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=Jf("",20);i.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(d){const h=d;if(h.data.eventId===c)switch(h.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(h.data.response);break;default:clearTimeout(u),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ht(){return window}function RX(t){Ht().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bT(){return typeof Ht().WorkerGlobalScope<"u"&&typeof Ht().importScripts=="function"}async function kX(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function AX(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function PX(){return bT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OV="firebaseLocalStorageDb",NX=1,ny="firebaseLocalStorage",MV="fbase_key";class Zf{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function q_(t,e){return t.transaction([ny],e?"readwrite":"readonly").objectStore(ny)}function DX(){const t=indexedDB.deleteDatabase(OV);return new Zf(t).toPromise()}function tx(){const t=indexedDB.open(OV,NX);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(ny,{keyPath:MV})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(ny)?e(r):(r.close(),await DX(),e(await tx()))})})}async function rk(t,e,n){const r=q_(t,!0).put({[MV]:e,value:n});return new Zf(r).toPromise()}async function OX(t,e){const n=q_(t,!1).get(e),r=await new Zf(n).toPromise();return r===void 0?null:r.value}function ik(t,e){const n=q_(t,!0).delete(e);return new Zf(n).toPromise()}const MX=800,LX=3;class LV{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await tx(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>LX)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return bT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=H_._getInstance(PX()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await kX(),!this.activeServiceWorker)return;this.sender=new CX(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||AX()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await tx();return await rk(e,ty,"1"),await ik(e,ty),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>rk(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>OX(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>ik(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=q_(i,!1).getAll();return new Zf(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),MX)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}LV.type="LOCAL";const Kh=LV;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VX(t,e){return Ft(t,"POST","/v2/accounts/mfaSignIn:start",Vt(t,e))}function FX(t,e){return Ft(t,"POST","/v2/accounts/mfaSignIn:finalize",Vt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jX=500,$X=6e4,eg=1e12;class UX{constructor(e){this.auth=e,this.counter=eg,this._widgets=new Map}render(e,n){const r=this.counter;return this._widgets.set(r,new BX(e,this.auth.name,n||{})),this.counter++,r}reset(e){var n;const r=e||eg;(n=this._widgets.get(r))===null||n===void 0||n.delete(),this._widgets.delete(r)}getResponse(e){var n;const r=e||eg;return((n=this._widgets.get(r))===null||n===void 0?void 0:n.getResponse())||""}async execute(e){var n;const r=e||eg;return(n=this._widgets.get(r))===null||n===void 0||n.execute(),""}}class BX{constructor(e,n,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i=typeof e=="string"?document.getElementById(e):e;G(i,"argument-error",{appName:n}),this.container=i,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=zX(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},$X)},jX))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function zX(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<t;r++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y0=pV("rcb"),WX=new Kf(3e4,6e4);class HX{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=Ht().grecaptcha)===null||e===void 0)&&e.render)}load(e,n=""){return G(qX(n),e,"argument-error"),this.shouldResolveImmediately(n)&&QR(Ht().grecaptcha)?Promise.resolve(Ht().grecaptcha):new Promise((r,i)=>{const s=Ht().setTimeout(()=>{i(En(e,"network-request-failed"))},WX.get());Ht()[Y0]=()=>{Ht().clearTimeout(s),delete Ht()[Y0];const a=Ht().grecaptcha;if(!a||!QR(a)){i(En(e,"internal-error"));return}const l=a.render;a.render=(c,u)=>{const d=l(c,u);return this.counter++,d},this.hostLanguage=n,r(a)};const o=`${vY()}?${hl({onload:Y0,render:"explicit",hl:n})}`;dT(o).catch(()=>{clearTimeout(s),i(En(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!(!((n=Ht().grecaptcha)===null||n===void 0)&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function qX(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class GX{async load(e){return new UX(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VV="recaptcha",KX={theme:"light",type:"image"};let QX=class{constructor(e,n,r=Object.assign({},KX)){this.parameters=r,this.type=VV,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ot(e),this.isInvisible=this.parameters.size==="invisible",G(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const i=typeof n=="string"?document.getElementById(n):n;G(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new GX:new HX,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),r=n.getResponse(e);return r||new Promise(i=>{const s=o=>{o&&(this.tokenChangeListeners.delete(s),i(o))};this.tokenChangeListeners.add(s),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){G(!this.parameters.sitekey,this.auth,"argument-error"),G(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),G(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(r=>r(n)),typeof e=="function")e(n);else if(typeof e=="string"){const r=Ht()[e];typeof r=="function"&&r(n)}}}assertNotDestroyed(){G(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){G(lT()&&!bT(),this.auth,"internal-error"),await YX(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await QQ(this.auth);G(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return G(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function YX(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xT{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=Ra._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function XX(t,e,n){const r=Ot(t),i=await G_(r,e,fe(n));return new xT(i,s=>z_(r,s))}async function JX(t,e,n){const r=fe(t);await B_(!1,r,"phone");const i=await G_(r.auth,e,fe(n));return new xT(i,s=>xV(r,s))}async function ZX(t,e,n){const r=fe(t),i=await G_(r.auth,e,fe(n));return new xT(i,s=>SV(r,s))}async function G_(t,e,n){var r;const i=await n.verify();try{G(typeof i=="string",t,"argument-error"),G(n.type===VV,t,"argument-error");let s;if(typeof e=="string"?s={phoneNumber:e}:s=e,"session"in s){const o=s.session;if("phoneNumber"in s)return G(o.type==="enroll",t,"internal-error"),(await vX(t,{idToken:o.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}})).phoneSessionInfo.sessionInfo;{G(o.type==="signin",t,"internal-error");const a=((r=s.multiFactorHint)===null||r===void 0?void 0:r.uid)||s.multiFactorUid;return G(a,t,"missing-multi-factor-info"),(await VX(t,{mfaPendingCredential:o.credential,mfaEnrollmentId:a,phoneSignInInfo:{recaptchaToken:i}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:o}=await $Y(t,{phoneNumber:s.phoneNumber,recaptchaToken:i});return o}}finally{n._reset()}}async function eJ(t,e){await hT(fe(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ba=class Qg{constructor(e){this.providerId=Qg.PROVIDER_ID,this.auth=Ot(e)}verifyPhoneNumber(e,n){return G_(this.auth,e,fe(n))}static credential(e,n){return Ra._fromVerification(e,n)}static credentialFromResult(e){const n=e;return Qg.credentialFromTaggedObject(n)}static credentialFromError(e){return Qg.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:n,temporaryProof:r}=e;return n&&r?Ra._fromTokenResponse(n,r):null}};Ba.PROVIDER_ID="phone";Ba.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fl(t,e){return e?Er(e):(G(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ST extends mu{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return hs(e,this._buildIdpRequest())}_linkToIdToken(e,n){return hs(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return hs(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function tJ(t){return bV(t.auth,new ST(t),t.bypassAuthState)}function nJ(t){const{auth:e,user:n}=t;return G(n,e,"internal-error"),wV(n,new ST(t),t.bypassAuthState)}async function rJ(t){const{auth:e,user:n}=t;return G(n,e,"internal-error"),hT(n,new ST(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FV{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return tJ;case"linkViaPopup":case"linkViaRedirect":return rJ;case"reauthViaPopup":case"reauthViaRedirect":return nJ;default:Cn(this.auth,"internal-error")}}resolve(e){fi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){fi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iJ=new Kf(2e3,1e4);async function sJ(t,e,n){const r=Ot(t);pu(t,e,Rs);const i=fl(r,n);return new rs(r,"signInViaPopup",e,i).executeNotNull()}async function oJ(t,e,n){const r=fe(t);pu(r.auth,e,Rs);const i=fl(r.auth,n);return new rs(r.auth,"reauthViaPopup",e,i,r).executeNotNull()}async function aJ(t,e,n){const r=fe(t);pu(r.auth,e,Rs);const i=fl(r.auth,n);return new rs(r.auth,"linkViaPopup",e,i,r).executeNotNull()}class rs extends FV{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,rs.currentPopupAction&&rs.currentPopupAction.cancel(),rs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return G(e,this.auth,"internal-error"),e}async onExecution(){fi(this.filter.length===1,"Popup operations only handle one event");const e=Jf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(En(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(En(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,rs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(En(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,iJ.get())};e()}}rs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lJ="pendingRedirect",eh=new Map;class cJ extends FV{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=eh.get(this.auth._key());if(!e){try{const r=await uJ(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}eh.set(this.auth._key(),e)}return this.bypassAuthState||eh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function uJ(t,e){const n=$V(e),r=jV(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}async function ET(t,e){return jV(t)._set($V(e),"true")}function dJ(){eh.clear()}function TT(t,e){eh.set(t._key(),e)}function jV(t){return Er(t._redirectPersistence)}function $V(t){return Ca(lJ,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hJ(t,e,n){return fJ(t,e,n)}async function fJ(t,e,n){const r=Ot(t);pu(t,e,Rs),await r._initializationPromise;const i=fl(r,n);return await ET(i,r),i._openRedirect(r,e,"signInViaRedirect")}function pJ(t,e,n){return gJ(t,e,n)}async function gJ(t,e,n){const r=fe(t);pu(r.auth,e,Rs),await r.auth._initializationPromise;const i=fl(r.auth,n);await ET(i,r.auth);const s=await UV(r);return i._openRedirect(r.auth,e,"reauthViaRedirect",s)}function mJ(t,e,n){return yJ(t,e,n)}async function yJ(t,e,n){const r=fe(t);pu(r.auth,e,Rs),await r.auth._initializationPromise;const i=fl(r.auth,n);await B_(!1,r,e.providerId),await ET(i,r.auth);const s=await UV(r);return i._openRedirect(r.auth,e,"linkViaRedirect",s)}async function _J(t,e){return await Ot(t)._initializationPromise,K_(t,e,!1)}async function K_(t,e,n=!1){const r=Ot(t),i=fl(r,e),o=await new cJ(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}async function UV(t){const e=Jf(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vJ=10*60*1e3;class BV{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!wJ(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!zV(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(En(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=vJ&&this.cachedEventUids.clear(),this.cachedEventUids.has(sk(e))}saveEventToCache(e){this.cachedEventUids.add(sk(e)),this.lastProcessedEventTime=Date.now()}}function sk(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function zV({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function wJ(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return zV(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WV(t,e={}){return Ft(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bJ=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,xJ=/^https?/;async function SJ(t){if(t.config.emulator)return;const{authorizedDomains:e}=await WV(t);for(const n of e)try{if(EJ(n))return}catch{}Cn(t,"unauthorized-domain")}function EJ(t){const e=zh(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!xJ.test(n))return!1;if(bJ.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TJ=new Kf(3e4,6e4);function ok(){const t=Ht().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function IJ(t){return new Promise((e,n)=>{var r,i,s;function o(){ok(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ok(),n(En(t,"network-request-failed"))},timeout:TJ.get()})}if(!((i=(r=Ht().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Ht().gapi)===null||s===void 0)&&s.load)o();else{const a=pV("iframefcb");return Ht()[a]=()=>{gapi.load?o():n(En(t,"network-request-failed"))},dT(`${bY()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Yg=null,e})}let Yg=null;function CJ(t){return Yg=Yg||IJ(t),Yg}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RJ=new Kf(5e3,15e3),kJ="__/auth/iframe",AJ="emulator/auth/iframe",PJ={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},NJ=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function DJ(t){const e=t.config;G(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?cT(e,AJ):`https://${t.config.authDomain}/${kJ}`,r={apiKey:e.apiKey,appName:t.name,v:Is},i=NJ.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${hl(r).slice(1)}`}async function OJ(t){const e=await CJ(t),n=Ht().gapi;return G(n,t,"internal-error"),e.open({where:document.body,url:DJ(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:PJ,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=En(t,"network-request-failed"),a=Ht().setTimeout(()=>{s(o)},RJ.get());function l(){Ht().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MJ={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},LJ=500,VJ=600,FJ="_blank",jJ="http://localhost";class ak{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function $J(t,e,n,r=LJ,i=VJ){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},MJ),{width:r.toString(),height:i.toString(),top:s,left:o}),c=xt().toLowerCase();n&&(a=lV(c)?FJ:n),aV(c)&&(e=e||jJ,l.scrollbars="yes");const u=Object.entries(l).reduce((h,[f,g])=>`${h}${f}=${g},`,"");if(uY(c)&&a!=="_self")return UJ(e||"",a),new ak(null);const d=window.open(e||"",a,u);G(d,t,"popup-blocked");try{d.focus()}catch{}return new ak(d)}function UJ(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BJ="__/auth/handler",zJ="emulator/auth/handler",WJ=encodeURIComponent("fac");async function nx(t,e,n,r,i,s){G(t.config.authDomain,t,"auth-domain-config-required"),G(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Is,eventId:i};if(e instanceof Rs){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Xb(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,d]of Object.entries(s||{}))o[u]=d}if(e instanceof yu){const u=e.getScopes().filter(d=>d!=="");u.length>0&&(o.scopes=u.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];const l=await t._getAppCheckToken(),c=l?`#${WJ}=${encodeURIComponent(l)}`:"";return`${HJ(t)}?${hl(a).slice(1)}${c}`}function HJ({config:t}){return t.emulator?cT(t,zJ):`https://${t.authDomain}/${BJ}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X0="webStorageSupport";class qJ{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ua,this._completeRedirectFn=K_,this._overrideRedirectResult=TT}async _openPopup(e,n,r,i){var s;fi((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await nx(e,n,r,zh(),i);return $J(e,o,Jf())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await nx(e,n,r,zh(),i);return RX(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(fi(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await OJ(e),r=new BV(e);return n.register("authEvent",i=>(G(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(X0,{type:X0},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[X0];o!==void 0&&n(!!o),Cn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=SJ(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return hV()||uT()||gu()}}const GJ=qJ;class KJ{constructor(e){this.factorId=e}_process(e,n,r){switch(n.type){case"enroll":return this._finalizeEnroll(e,n.credential,r);case"signin":return this._finalizeSignIn(e,n.credential);default:return ki("unexpected MultiFactorSessionType")}}}class IT extends KJ{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new IT(e)}_finalizeEnroll(e,n,r){return wX(e,{idToken:n,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,n){return FX(e,{mfaPendingCredential:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class HV{constructor(){}static assertion(e){return IT._fromCredential(e)}}HV.FACTOR_ID="phone";var lk="@firebase/auth",ck="1.6.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QJ{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){G(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YJ(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function XJ(t){ws(new hi("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;G(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:fV(t)},c=new yY(r,i,s,l);return TY(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ws(new hi("auth-internal",e=>{const n=Ot(e.getProvider("auth").getImmediate());return(r=>new QJ(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Hr(lk,ck,YJ(t)),Hr(lk,ck,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JJ=5*60;p7("authIdTokenMaxAge");function ZJ(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}_Y({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=En("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",ZJ().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});XJ("Browser");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eZ{constructor(e,n){this._delegate=e,this.firebase=n,Xm(e,new hi("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),K2(this._delegate)))}_getService(e,n=vo){var r;this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(e);return!i.isInitialized()&&((r=i.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&i.initialize(),i.getImmediate({identifier:n})}_removeServiceInstance(e,n=vo){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){Xm(this._delegate,e)}_addOrOverwriteComponent(e){q2(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tZ={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},uk=new dl("app-compat","Firebase",tZ);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nZ(t){const e={},n={__esModule:!0,initializeApp:s,app:i,registerVersion:Hr,setLogLevel:Y2,onLog:Q2,apps:null,SDK_VERSION:Is,INTERNAL:{registerComponent:a,removeApp:r,useAsService:l,modularAPIs:VQ}};n.default=n,Object.defineProperty(n,"apps",{get:o});function r(c){delete e[c]}function i(c){if(c=c||vo,!di(e,c))throw uk.create("no-app",{appName:c});return e[c]}i.App=t;function s(c,u={}){const d=sT(c,u);if(di(e,d.name))return e[d.name];const h=new t(d,n);return e[d.name]=h,h}function o(){return Object.keys(e).map(c=>e[c])}function a(c){const u=c.name,d=u.replace("-compat","");if(ws(c)&&c.type==="PUBLIC"){const h=(f=i())=>{if(typeof f[d]!="function")throw uk.create("invalid-app-argument",{appName:u});return f[d]()};c.serviceProps!==void 0&&Vh(h,c.serviceProps),n[d]=h,t.prototype[d]=function(...f){return this._getService.bind(this,u).apply(this,c.multipleInstances?f:[])}}return c.type==="PUBLIC"?n[d]:null}function l(c,u){return u==="serverAuth"?null:u}return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qV(){const t=nZ(eZ);t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:qV,extendNamespace:e,createSubscribe:B2,ErrorFactory:dl,deepExtend:Vh});function e(n){Vh(t,n)}return t}const rZ=qV();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dk=new Gf("@firebase/app-compat"),iZ="@firebase/app-compat",sZ="0.2.29";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oZ(t){Hr(iZ,sZ,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */if(m7()&&self.firebase!==void 0){dk.warn(`
    Warning: Firebase is already defined in the global scope. Please make sure
    Firebase library is only loaded once.
  `);const t=self.firebase.SDK_VERSION;t&&t.indexOf("LITE")>=0&&dk.warn(`
    Warning: You are trying to load Firebase while using Firebase Performance standalone script.
    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
    `)}const Bt=rZ;oZ();var aZ="firebase",lZ="10.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Bt.registerVersion(aZ,lZ,"app-compat");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function za(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cZ=2e3;async function uZ(t,e,n){var r;const{BuildInfo:i}=za();fi(e.sessionId,"AuthEvent did not contain a session ID");const s=await gZ(e.sessionId),o={};return gu()?o.ibi=i.packageName:Qf()?o.apn=i.packageName:Cn(t,"operation-not-supported-in-this-environment"),i.displayName&&(o.appDisplayName=i.displayName),o.sessionId=s,nx(t,n,e.type,void 0,(r=e.eventId)!==null&&r!==void 0?r:void 0,o)}async function dZ(t){const{BuildInfo:e}=za(),n={};gu()?n.iosBundleId=e.packageName:Qf()?n.androidPackageName=e.packageName:Cn(t,"operation-not-supported-in-this-environment"),await WV(t,n)}function hZ(t){const{cordova:e}=za();return new Promise(n=>{e.plugins.browsertab.isAvailable(r=>{let i=null;r?e.plugins.browsertab.openUrl(t):i=e.InAppBrowser.open(t,cY()?"_blank":"_system","location=yes"),n(i)})})}async function fZ(t,e,n){const{cordova:r}=za();let i=()=>{};try{await new Promise((s,o)=>{let a=null;function l(){var d;s();const h=(d=r.plugins.browsertab)===null||d===void 0?void 0:d.close;typeof h=="function"&&h(),typeof(n==null?void 0:n.close)=="function"&&n.close()}function c(){a||(a=window.setTimeout(()=>{o(En(t,"redirect-cancelled-by-user"))},cZ))}function u(){(document==null?void 0:document.visibilityState)==="visible"&&c()}e.addPassiveListener(l),document.addEventListener("resume",c,!1),Qf()&&document.addEventListener("visibilitychange",u,!1),i=()=>{e.removePassiveListener(l),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",u,!1),a&&window.clearTimeout(a)}})}finally{i()}}function pZ(t){var e,n,r,i,s,o,a,l,c,u;const d=za();G(typeof((e=d==null?void 0:d.universalLinks)===null||e===void 0?void 0:e.subscribe)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),G(typeof((n=d==null?void 0:d.BuildInfo)===null||n===void 0?void 0:n.packageName)<"u",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),G(typeof((s=(i=(r=d==null?void 0:d.cordova)===null||r===void 0?void 0:r.plugins)===null||i===void 0?void 0:i.browsertab)===null||s===void 0?void 0:s.openUrl)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),G(typeof((l=(a=(o=d==null?void 0:d.cordova)===null||o===void 0?void 0:o.plugins)===null||a===void 0?void 0:a.browsertab)===null||l===void 0?void 0:l.isAvailable)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),G(typeof((u=(c=d==null?void 0:d.cordova)===null||c===void 0?void 0:c.InAppBrowser)===null||u===void 0?void 0:u.open)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function gZ(t){const e=mZ(t),n=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(n)).map(i=>i.toString(16).padStart(2,"0")).join("")}function mZ(t){if(fi(/[0-9a-zA-Z]+/.test(t),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(t);const e=new ArrayBuffer(t.length),n=new Uint8Array(e);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yZ=20;class _Z extends BV{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach(n=>n(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function vZ(t,e,n=null){return{type:e,eventId:n,urlResponse:null,sessionId:xZ(),postBody:null,tenantId:t.tenantId,error:En(t,"no-auth-event")}}function wZ(t,e){return rx()._set(ix(t),e)}async function hk(t){const e=await rx()._get(ix(t));return e&&await rx()._remove(ix(t)),e}function bZ(t,e){var n,r;const i=EZ(e);if(i.includes("/__/auth/callback")){const s=Xg(i),o=s.firebaseError?SZ(decodeURIComponent(s.firebaseError)):null,a=(r=(n=o==null?void 0:o.code)===null||n===void 0?void 0:n.split("auth/"))===null||r===void 0?void 0:r[1],l=a?En(a):null;return l?{type:t.type,eventId:t.eventId,tenantId:t.tenantId,error:l,urlResponse:null,sessionId:null,postBody:null}:{type:t.type,eventId:t.eventId,tenantId:t.tenantId,sessionId:t.sessionId,urlResponse:i,postBody:null}}return null}function xZ(){const t=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<yZ;n++){const r=Math.floor(Math.random()*e.length);t.push(e.charAt(r))}return t.join("")}function rx(){return Er(wT)}function ix(t){return Ca("authEvent",t.config.apiKey,t.name)}function SZ(t){try{return JSON.parse(t)}catch{return null}}function EZ(t){const e=Xg(t),n=e.link?decodeURIComponent(e.link):void 0,r=Xg(n).link,i=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return Xg(i).link||i||r||n||t}function Xg(t){if(!(t!=null&&t.includes("?")))return{};const[e,...n]=t.split("?");return ic(n.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TZ=500;class IZ{constructor(){this._redirectPersistence=Ua,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=K_,this._overrideRedirectResult=TT}async _initialize(e){const n=e._key();let r=this.eventManagers.get(n);return r||(r=new _Z(e),this.eventManagers.set(n,r),this.attachCallbackListeners(e,r)),r}_openPopup(e){Cn(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,n,r,i){pZ(e);const s=await this._initialize(e);await s.initialized(),s.resetRedirect(),dJ(),await this._originValidation(e);const o=vZ(e,r,i);await wZ(e,o);const a=await uZ(e,o,n),l=await hZ(a);return fZ(e,s,l)}_isIframeWebStorageSupported(e,n){throw new Error("Method not implemented.")}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=dZ(e)),this.originValidationPromises[n]}attachCallbackListeners(e,n){const{universalLinks:r,handleOpenURL:i,BuildInfo:s}=za(),o=setTimeout(async()=>{await hk(e),n.onEvent(fk())},TZ),a=async u=>{clearTimeout(o);const d=await hk(e);let h=null;d&&(u!=null&&u.url)&&(h=bZ(d,u.url)),n.onEvent(h||fk())};typeof r<"u"&&typeof r.subscribe=="function"&&r.subscribe(null,a);const l=i,c=`${s.packageName.toLowerCase()}://`;za().handleOpenURL=async u=>{if(u.toLowerCase().startsWith(c)&&a({url:u}),typeof l=="function")try{l(u)}catch(d){console.error(d)}}}}const CZ=IZ;function fk(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:En("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RZ(t,e){Ot(t)._logFramework(e)}var kZ="@firebase/auth-compat",AZ="0.5.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PZ=1e3;function th(){var t;return((t=self==null?void 0:self.location)===null||t===void 0?void 0:t.protocol)||null}function NZ(){return th()==="http:"||th()==="https:"}function GV(t=xt()){return!!((th()==="file:"||th()==="ionic:"||th()==="capacitor:")&&t.toLowerCase().match(/iphone|ipad|ipod|android/))}function DZ(){return V_()||nT()}function OZ(){return F2()&&(document==null?void 0:document.documentMode)===11}function MZ(t=xt()){return/Edge\/\d+/.test(t)}function LZ(t=xt()){return OZ()||MZ(t)}function KV(){try{const t=self.localStorage,e=Jf();if(t)return t.setItem(e,"1"),t.removeItem(e),LZ()?Fh():!0}catch{return CT()&&Fh()}return!1}function CT(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function J0(){return(NZ()||V2()||GV())&&!DZ()&&KV()&&!CT()}function QV(){return GV()&&typeof document<"u"}async function VZ(){return QV()?new Promise(t=>{const e=setTimeout(()=>{t(!1)},PZ);document.addEventListener("deviceready",()=>{clearTimeout(e),t(!0)})}):!1}function FZ(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xr={LOCAL:"local",NONE:"none",SESSION:"session"},Yu=G,YV="persistence";function jZ(t,e){if(Yu(Object.values(xr).includes(e),t,"invalid-persistence-type"),V_()){Yu(e!==xr.SESSION,t,"unsupported-persistence-type");return}if(nT()){Yu(e===xr.NONE,t,"unsupported-persistence-type");return}if(CT()){Yu(e===xr.NONE||e===xr.LOCAL&&Fh(),t,"unsupported-persistence-type");return}Yu(e===xr.NONE||KV(),t,"unsupported-persistence-type")}async function sx(t){await t._initializationPromise;const e=XV(),n=Ca(YV,t.config.apiKey,t.name);e&&e.setItem(n,t._getPersistence())}function $Z(t,e){const n=XV();if(!n)return[];const r=Ca(YV,t,e);switch(n.getItem(r)){case xr.NONE:return[jc];case xr.LOCAL:return[Kh,Ua];case xr.SESSION:return[Ua];default:return[]}}function XV(){var t;try{return((t=FZ())===null||t===void 0?void 0:t.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UZ=G;class Ys{constructor(){this.browserResolver=Er(GJ),this.cordovaResolver=Er(CZ),this.underlyingResolver=null,this._redirectPersistence=Ua,this._completeRedirectFn=K_,this._overrideRedirectResult=TT}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,n,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,n,r,i)}async _openRedirect(e,n,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,n,r,i)}_isIframeWebStorageSupported(e,n){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,n)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return QV()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return UZ(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await VZ();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JV(t){return t.unwrap()}function BZ(t){return t.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zZ(t){return ZV(t)}function WZ(t,e){var n;const r=(n=e.customData)===null||n===void 0?void 0:n._tokenResponse;if((e==null?void 0:e.code)==="auth/multi-factor-auth-required"){const i=e;i.resolver=new HZ(t,_X(t,e))}else if(r){const i=ZV(e),s=e;i&&(s.credential=i,s.tenantId=r.tenantId||void 0,s.email=r.email||void 0,s.phoneNumber=r.phoneNumber||void 0)}}function ZV(t){const{_tokenResponse:e}=t instanceof Kn?t.customData:t;if(!e)return null;if(!(t instanceof Kn)&&"temporaryProof"in e&&"phoneNumber"in e)return Ba.credentialFromResult(t);const n=e.providerId;if(!n||n===Qu.PASSWORD)return null;let r;switch(n){case Qu.GOOGLE:r=Ti;break;case Qu.FACEBOOK:r=Ei;break;case Qu.GITHUB:r=Ii;break;case Qu.TWITTER:r=Ci;break;default:const{oauthIdToken:i,oauthAccessToken:s,oauthTokenSecret:o,pendingToken:a,nonce:l}=e;return!s&&!o&&!i&&!a?null:a?n.startsWith("saml.")?$c._create(n,a):Ui._fromParams({providerId:n,signInMethod:n,pendingToken:a,idToken:i,accessToken:s}):new mc(n).credential({idToken:i,accessToken:s,rawNonce:l})}return t instanceof Kn?r.credentialFromError(t):r.credentialFromResult(t)}function rr(t,e){return e.catch(n=>{throw n instanceof Kn&&WZ(t,n),n}).then(n=>{const r=n.operationType,i=n.user;return{operationType:r,credential:zZ(n),additionalUserInfo:mX(n),user:Q_.getOrCreate(i)}})}async function ox(t,e){const n=await e;return{verificationId:n.verificationId,confirm:r=>rr(t,n.confirm(r))}}class HZ{constructor(e,n){this.resolver=n,this.auth=BZ(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return rr(JV(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Q_=class Cd{constructor(e){this._delegate=e,this.multiFactor=xX(e)}static getOrCreate(e){return Cd.USER_MAP.has(e)||Cd.USER_MAP.set(e,new Cd(e)),Cd.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return rr(this.auth,xV(this._delegate,e))}async linkWithPhoneNumber(e,n){return ox(this.auth,JX(this._delegate,e,n))}async linkWithPopup(e){return rr(this.auth,aJ(this._delegate,e,Ys))}async linkWithRedirect(e){return await sx(Ot(this.auth)),mJ(this._delegate,e,Ys)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return rr(this.auth,SV(this._delegate,e))}reauthenticateWithPhoneNumber(e,n){return ox(this.auth,ZX(this._delegate,e,n))}reauthenticateWithPopup(e){return rr(this.auth,oJ(this._delegate,e,Ys))}async reauthenticateWithRedirect(e){return await sx(Ot(this.auth)),pJ(this._delegate,e,Ys)}sendEmailVerification(e){return aX(this._delegate,e)}async unlink(e){return await YY(this._delegate,e),this}updateEmail(e){return uX(this._delegate,e)}updatePassword(e){return CV(this._delegate,e)}updatePhoneNumber(e){return eJ(this._delegate,e)}updateProfile(e){return yT(this._delegate,e)}verifyBeforeUpdateEmail(e,n){return lX(this._delegate,e,n)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}};Q_.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xu=G;class ax{constructor(e,n){if(this.app=e,n.isInitialized()){this._delegate=n.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:r}=e.options;Xu(r,"invalid-api-key",{appName:e.name}),Xu(r,"invalid-api-key",{appName:e.name});const i=typeof window<"u"?Ys:void 0;this._delegate=n.initialize({options:{persistence:qZ(r,e.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(jQ),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Q_.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,n){IY(this._delegate,e,n)}applyActionCode(e){return eX(this._delegate,e)}checkActionCode(e){return EV(this._delegate,e)}confirmPasswordReset(e,n){return ZY(this._delegate,e,n)}async createUserWithEmailAndPassword(e,n){return rr(this._delegate,TV(this._delegate,e,n))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return oX(this._delegate,e)}isSignInWithEmailLink(e){return rX(this._delegate,e)}async getRedirectResult(){Xu(J0(),this._delegate,"operation-not-supported-in-this-environment");const e=await _J(this._delegate,Ys);return e?rr(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){RZ(this._delegate,e)}onAuthStateChanged(e,n,r){const{next:i,error:s,complete:o}=pk(e,n,r);return this._delegate.onAuthStateChanged(i,s,o)}onIdTokenChanged(e,n,r){const{next:i,error:s,complete:o}=pk(e,n,r);return this._delegate.onIdTokenChanged(i,s,o)}sendSignInLinkToEmail(e,n){return nX(this._delegate,e,n)}sendPasswordResetEmail(e,n){return mT(this._delegate,e,n||void 0)}async setPersistence(e){jZ(this._delegate,e);let n;switch(e){case xr.SESSION:n=Ua;break;case xr.LOCAL:n=await Er(Kh)._isAvailable()?Kh:wT;break;case xr.NONE:n=jc;break;default:return Cn("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(n)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return rr(this._delegate,QY(this._delegate))}signInWithCredential(e){return rr(this._delegate,z_(this._delegate,e))}signInWithCustomToken(e){return rr(this._delegate,JY(this._delegate,e))}signInWithEmailAndPassword(e,n){return rr(this._delegate,IV(this._delegate,e,n))}signInWithEmailLink(e,n){return rr(this._delegate,iX(this._delegate,e,n))}signInWithPhoneNumber(e,n){return ox(this._delegate,XX(this._delegate,e,n))}async signInWithPopup(e){return Xu(J0(),this._delegate,"operation-not-supported-in-this-environment"),rr(this._delegate,sJ(this._delegate,e,Ys))}async signInWithRedirect(e){return Xu(J0(),this._delegate,"operation-not-supported-in-this-environment"),await sx(this._delegate),hJ(this._delegate,e,Ys)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return tX(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}ax.Persistence=xr;function pk(t,e,n){let r=t;typeof t!="function"&&({next:r,error:e,complete:n}=t);const i=r;return{next:o=>i(o&&Q_.getOrCreate(o)),error:e,complete:n}}function qZ(t,e){const n=$Z(t,e);if(typeof self<"u"&&!n.includes(Kh)&&n.push(Kh),typeof window<"u")for(const r of[wT,Ua])n.includes(r)||n.push(r);return n.includes(jc)||n.push(jc),n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RT{constructor(){this.providerId="phone",this._delegate=new Ba(JV(Bt.auth()))}static credential(e,n){return Ba.credential(e,n)}verifyPhoneNumber(e,n){return this._delegate.verifyPhoneNumber(e,n)}unwrap(){return this._delegate}}RT.PHONE_SIGN_IN_METHOD=Ba.PHONE_SIGN_IN_METHOD;RT.PROVIDER_ID=Ba.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GZ=G;class KZ{constructor(e,n,r=Bt.app()){var i;GZ((i=r.options)===null||i===void 0?void 0:i.apiKey,"invalid-api-key",{appName:r.name}),this._delegate=new QX(r.auth(),e,n),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QZ="auth-compat";function YZ(t){t.INTERNAL.registerComponent(new hi(QZ,e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("auth");return new ax(n,r)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Rl.EMAIL_SIGNIN,PASSWORD_RESET:Rl.PASSWORD_RESET,RECOVER_EMAIL:Rl.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:Rl.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:Rl.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:Rl.VERIFY_EMAIL}},EmailAuthProvider:Uo,FacebookAuthProvider:Ei,GithubAuthProvider:Ii,GoogleAuthProvider:Ti,OAuthProvider:mc,SAMLAuthProvider:Zm,PhoneAuthProvider:RT,PhoneMultiFactorGenerator:HV,RecaptchaVerifier:KZ,TwitterAuthProvider:Ci,Auth:ax,AuthCredential:mu,Error:Kn}).setInstantiationMode("LAZY").setMultipleInstances(!1)),t.registerVersion(kZ,AZ)}YZ(Bt);var XZ=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},te,kT=kT||{},xe=XZ||self;function Y_(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function ep(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function JZ(t){return Object.prototype.hasOwnProperty.call(t,Z0)&&t[Z0]||(t[Z0]=++ZZ)}var Z0="closure_uid_"+(1e9*Math.random()>>>0),ZZ=0;function eee(t,e,n){return t.call.apply(t.bind,arguments)}function tee(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function Fn(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Fn=eee:Fn=tee,Fn.apply(null,arguments)}function tg(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function fn(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function Bo(){this.s=this.s,this.o=this.o}var nee=0;Bo.prototype.s=!1;Bo.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),nee!=0)&&JZ(this)};Bo.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const eF=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function AT(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function gk(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(Y_(r)){const i=t.length||0,s=r.length||0;t.length=i+s;for(let o=0;o<s;o++)t[i+o]=r[o]}else t.push(r)}}function jn(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}jn.prototype.h=function(){this.defaultPrevented=!0};var ree=function(){if(!xe.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{const n=()=>{};xe.addEventListener("test",n,e),xe.removeEventListener("test",n,e)}catch{}return t}();function Qh(t){return/^[\s\xa0]*$/.test(t)}function X_(){var t=xe.navigator;return t&&(t=t.userAgent)?t:""}function Ri(t){return X_().indexOf(t)!=-1}function PT(t){return PT[" "](t),t}PT[" "]=function(){};function iee(t,e){var n=Yee;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var see=Ri("Opera"),Uc=Ri("Trident")||Ri("MSIE"),tF=Ri("Edge"),lx=tF||Uc,nF=Ri("Gecko")&&!(X_().toLowerCase().indexOf("webkit")!=-1&&!Ri("Edge"))&&!(Ri("Trident")||Ri("MSIE"))&&!Ri("Edge"),oee=X_().toLowerCase().indexOf("webkit")!=-1&&!Ri("Edge");function rF(){var t=xe.document;return t?t.documentMode:void 0}var cx;e:{var ew="",tw=function(){var t=X_();if(nF)return/rv:([^\);]+)(\)|;)/.exec(t);if(tF)return/Edge\/([\d\.]+)/.exec(t);if(Uc)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(oee)return/WebKit\/(\S+)/.exec(t);if(see)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(tw&&(ew=tw?tw[1]:""),Uc){var nw=rF();if(nw!=null&&nw>parseFloat(ew)){cx=String(nw);break e}}cx=ew}var ux;if(xe.document&&Uc){var mk=rF();ux=mk||parseInt(cx,10)||void 0}else ux=void 0;var aee=ux;function Yh(t,e){if(jn.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(nF){e:{try{PT(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:lee[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Yh.$.h.call(this)}}fn(Yh,jn);var lee={2:"touch",3:"pen",4:"mouse"};Yh.prototype.h=function(){Yh.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var tp="closure_listenable_"+(1e6*Math.random()|0),cee=0;function uee(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++cee,this.fa=this.ia=!1}function J_(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function NT(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function dee(t,e){for(const n in t)e.call(void 0,t[n],n,t)}function iF(t){const e={};for(const n in t)e[n]=t[n];return e}const yk="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function sF(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let s=0;s<yk.length;s++)n=yk[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Z_(t){this.src=t,this.g={},this.h=0}Z_.prototype.add=function(t,e,n,r,i){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var o=hx(t,e,r,i);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new uee(e,this.src,s,!!r,i),e.ia=n,t.push(e)),e};function dx(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=eF(r,e),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(J_(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function hx(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==r)return i}return-1}var DT="closure_lm_"+(1e6*Math.random()|0),rw={};function oF(t,e,n,r,i){if(r&&r.once)return lF(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)oF(t,e[s],n,r,i);return null}return n=LT(n),t&&t[tp]?t.O(e,n,ep(r)?!!r.capture:!!r,i):aF(t,e,n,!1,r,i)}function aF(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=ep(i)?!!i.capture:!!i,a=MT(t);if(a||(t[DT]=a=new Z_(t)),n=a.add(e,n,r,o,s),n.proxy)return n;if(r=hee(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)ree||(i=o),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(uF(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function hee(){function t(n){return e.call(t.src,t.listener,n)}const e=fee;return t}function lF(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)lF(t,e[s],n,r,i);return null}return n=LT(n),t&&t[tp]?t.P(e,n,ep(r)?!!r.capture:!!r,i):aF(t,e,n,!0,r,i)}function cF(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)cF(t,e[s],n,r,i);else r=ep(r)?!!r.capture:!!r,n=LT(n),t&&t[tp]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=hx(s,n,r,i),-1<n&&(J_(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=MT(t))&&(e=t.g[e.toString()],t=-1,e&&(t=hx(e,n,r,i)),(n=-1<t?e[t]:null)&&OT(n))}function OT(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[tp])dx(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(uF(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=MT(e))?(dx(n,t),n.h==0&&(n.src=null,e[DT]=null)):J_(t)}}}function uF(t){return t in rw?rw[t]:rw[t]="on"+t}function fee(t,e){if(t.fa)t=!0;else{e=new Yh(e,this);var n=t.listener,r=t.la||t.src;t.ia&&OT(t),t=n.call(r,e)}return t}function MT(t){return t=t[DT],t instanceof Z_?t:null}var iw="__closure_events_fn_"+(1e9*Math.random()>>>0);function LT(t){return typeof t=="function"?t:(t[iw]||(t[iw]=function(e){return t.handleEvent(e)}),t[iw])}function hn(){Bo.call(this),this.i=new Z_(this),this.S=this,this.J=null}fn(hn,Bo);hn.prototype[tp]=!0;hn.prototype.removeEventListener=function(t,e,n,r){cF(this,t,e,n,r)};function Tn(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new jn(e,t);else if(e instanceof jn)e.target=e.target||t;else{var i=e;e=new jn(r,t),sF(e,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=ng(o,r,!0,e)&&i}if(o=e.g=t,i=ng(o,r,!0,e)&&i,i=ng(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)o=e.g=n[s],i=ng(o,r,!1,e)&&i}hn.prototype.N=function(){if(hn.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)J_(n[r]);delete t.g[e],t.h--}}this.J=null};hn.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};hn.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function ng(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&dx(t.i,o),i=a.call(l,r)!==!1&&i}}return i&&!r.defaultPrevented}var VT=xe.JSON.stringify;class pee{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function gee(){var t=FT;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class mee{constructor(){this.h=this.g=null}add(e,n){const r=dF.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var dF=new pee(()=>new yee,t=>t.reset());class yee{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function _ee(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function vee(t){xe.setTimeout(()=>{throw t},0)}let Xh,Jh=!1,FT=new mee,hF=()=>{const t=xe.Promise.resolve(void 0);Xh=()=>{t.then(wee)}};var wee=()=>{for(var t;t=gee();){try{t.h.call(t.g)}catch(n){vee(n)}var e=dF;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Jh=!1};function ev(t,e){hn.call(this),this.h=t||1,this.g=e||xe,this.j=Fn(this.qb,this),this.l=Date.now()}fn(ev,hn);te=ev.prototype;te.ga=!1;te.T=null;te.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Tn(this,"tick"),this.ga&&(jT(this),this.start()))}};te.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function jT(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}te.N=function(){ev.$.N.call(this),jT(this),delete this.g};function $T(t,e,n){if(typeof t=="function")n&&(t=Fn(t,n));else if(t&&typeof t.handleEvent=="function")t=Fn(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:xe.setTimeout(t,e||0)}function fF(t){t.g=$T(()=>{t.g=null,t.i&&(t.i=!1,fF(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class bee extends Bo{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:fF(this)}N(){super.N(),this.g&&(xe.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Zh(t){Bo.call(this),this.h=t,this.g={}}fn(Zh,Bo);var _k=[];function pF(t,e,n,r){Array.isArray(n)||(n&&(_k[0]=n.toString()),n=_k);for(var i=0;i<n.length;i++){var s=oF(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function gF(t){NT(t.g,function(e,n){this.g.hasOwnProperty(n)&&OT(e)},t),t.g={}}Zh.prototype.N=function(){Zh.$.N.call(this),gF(this)};Zh.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function tv(){this.g=!0}tv.prototype.Ea=function(){this.g=!1};function xee(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");o=2<=d.length&&d[1]=="type"?o+(u+"="+c+"&"):o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+o})}function See(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+s+" "+o})}function sc(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+Tee(t,n)+(r?" "+r:"")})}function Eee(t,e){t.info(function(){return"TIMEOUT: "+e})}tv.prototype.info=function(){};function Tee(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return VT(n)}catch{return e}}var pl={},vk=null;function nv(){return vk=vk||new hn}pl.Ta="serverreachability";function mF(t){jn.call(this,pl.Ta,t)}fn(mF,jn);function ef(t){const e=nv();Tn(e,new mF(e))}pl.STAT_EVENT="statevent";function yF(t,e){jn.call(this,pl.STAT_EVENT,t),this.stat=e}fn(yF,jn);function qn(t){const e=nv();Tn(e,new yF(e,t))}pl.Ua="timingevent";function _F(t,e){jn.call(this,pl.Ua,t),this.size=e}fn(_F,jn);function np(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return xe.setTimeout(function(){t()},e)}var rv={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},vF={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function UT(){}UT.prototype.h=null;function wk(t){return t.h||(t.h=t.i())}function wF(){}var rp={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function BT(){jn.call(this,"d")}fn(BT,jn);function zT(){jn.call(this,"c")}fn(zT,jn);var fx;function iv(){}fn(iv,UT);iv.prototype.g=function(){return new XMLHttpRequest};iv.prototype.i=function(){return{}};fx=new iv;function ip(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new Zh(this),this.P=Iee,t=lx?125:void 0,this.V=new ev(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new bF}function bF(){this.i=null,this.g="",this.h=!1}var Iee=45e3,xF={},px={};te=ip.prototype;te.setTimeout=function(t){this.P=t};function gx(t,e,n){t.L=1,t.A=ov(xs(e)),t.u=n,t.S=!0,SF(t,null)}function SF(t,e){t.G=Date.now(),sp(t),t.B=xs(t.A);var n=t.B,r=t.W;Array.isArray(r)||(r=[String(r)]),PF(n.i,"t",r),t.o=0,n=t.l.J,t.h=new bF,t.g=JF(t.l,n?e:null,!t.u),0<t.O&&(t.M=new bee(Fn(t.Pa,t,t.g),t.O)),pF(t.U,t.g,"readystatechange",t.nb),e=t.I?iF(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),ef(),xee(t.j,t.v,t.B,t.m,t.W,t.u)}te.nb=function(t){t=t.target;const e=this.M;e&&Ai(t)==3?e.l():this.Pa(t)};te.Pa=function(t){try{if(t==this.g)e:{const u=Ai(this.g);var e=this.g.Ia();const d=this.g.da();if(!(3>u)&&(u!=3||lx||this.g&&(this.h.h||this.g.ja()||Ek(this.g)))){this.J||u!=4||e==7||(e==8||0>=d?ef(3):ef(2)),sv(this);var n=this.g.da();this.ca=n;t:if(EF(this)){var r=Ek(this.g);t="";var i=r.length,s=Ai(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ya(this),nh(this);var o="";break t}this.h.i=new xe.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.length=0,this.h.g+=t,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,See(this.j,this.v,this.B,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Qh(a)){var c=a;break t}}c=null}if(n=c)sc(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,mx(this,n);else{this.i=!1,this.s=3,qn(12),ya(this),nh(this);break e}}this.S?(TF(this,u,o),lx&&this.i&&u==3&&(pF(this.U,this.V,"tick",this.mb),this.V.start())):(sc(this.j,this.m,o,null),mx(this,o)),u==4&&ya(this),this.i&&!this.J&&(u==4?KF(this.l,this):(this.i=!1,sp(this)))}else Gee(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.s=3,qn(12)):(this.s=0,qn(13)),ya(this),nh(this)}}}catch{}finally{}};function EF(t){return t.g?t.v=="GET"&&t.L!=2&&t.l.Ha:!1}function TF(t,e,n){let r=!0,i;for(;!t.J&&t.o<n.length;)if(i=Cee(t,n),i==px){e==4&&(t.s=4,qn(14),r=!1),sc(t.j,t.m,null,"[Incomplete Response]");break}else if(i==xF){t.s=4,qn(15),sc(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else sc(t.j,t.m,i,null),mx(t,i);EF(t)&&t.o!=0&&(t.h.g=t.h.g.slice(t.o),t.o=0),e!=4||n.length!=0||t.h.h||(t.s=1,qn(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),QT(e),e.M=!0,qn(11))):(sc(t.j,t.m,n,"[Invalid Chunked Response]"),ya(t),nh(t))}te.mb=function(){if(this.g){var t=Ai(this.g),e=this.g.ja();this.o<e.length&&(sv(this),TF(this,t,e),this.i&&t!=4&&sp(this))}};function Cee(t,e){var n=t.o,r=e.indexOf(`
`,n);return r==-1?px:(n=Number(e.substring(n,r)),isNaN(n)?xF:(r+=1,r+n>e.length?px:(e=e.slice(r,r+n),t.o=r+n,e)))}te.cancel=function(){this.J=!0,ya(this)};function sp(t){t.Y=Date.now()+t.P,IF(t,t.P)}function IF(t,e){if(t.C!=null)throw Error("WatchDog timer not null");t.C=np(Fn(t.lb,t),e)}function sv(t){t.C&&(xe.clearTimeout(t.C),t.C=null)}te.lb=function(){this.C=null;const t=Date.now();0<=t-this.Y?(Eee(this.j,this.B),this.L!=2&&(ef(),qn(17)),ya(this),this.s=2,nh(this)):IF(this,this.Y-t)};function nh(t){t.l.H==0||t.J||KF(t.l,t)}function ya(t){sv(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,jT(t.V),gF(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function mx(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||yx(n.i,t))){if(!t.K&&yx(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)sy(n),uv(n);else break e;KT(n),qn(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=np(Fn(n.ib,n),6e3));if(1>=OF(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else _a(n,11)}else if((t.K||n.g==t)&&sy(n),!Qh(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let c=i[e];if(n.V=c[0],c=c[1],n.H==2)if(c[0]=="c"){n.K=c[1],n.pa=c[2];const u=c[3];u!=null&&(n.ra=u,n.l.info("VER="+n.ra));const d=c[4];d!=null&&(n.Ga=d,n.l.info("SVER="+n.Ga));const h=c[5];h!=null&&typeof h=="number"&&0<h&&(r=1.5*h,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const f=t.g;if(f){const g=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(g){var s=r.i;s.g||g.indexOf("spdy")==-1&&g.indexOf("quic")==-1&&g.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(WT(s,s.h),s.h=null))}if(r.F){const m=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;m&&(r.Da=m,lt(r.I,r.F,m))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=t;if(r.wa=XF(r,r.J?r.pa:null,r.Y),o.K){MF(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.C&&(sv(a),sp(a)),r.g=o}else qF(r);0<n.j.length&&dv(n)}else c[0]!="stop"&&c[0]!="close"||_a(n,7);else n.H==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?_a(n,7):GT(n):c[0]!="noop"&&n.h&&n.h.Aa(c),n.A=0)}}ef(4)}catch{}}function Ree(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(Y_(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function kee(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(Y_(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}function CF(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Y_(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=kee(t),r=Ree(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}var RF=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Aee(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function ka(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof ka){this.h=t.h,ry(this,t.j),this.s=t.s,this.g=t.g,iy(this,t.m),this.l=t.l;var e=t.i,n=new tf;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),bk(this,n),this.o=t.o}else t&&(e=String(t).match(RF))?(this.h=!1,ry(this,e[1]||"",!0),this.s=Rd(e[2]||""),this.g=Rd(e[3]||"",!0),iy(this,e[4]),this.l=Rd(e[5]||"",!0),bk(this,e[6]||"",!0),this.o=Rd(e[7]||"")):(this.h=!1,this.i=new tf(null,this.h))}ka.prototype.toString=function(){var t=[],e=this.j;e&&t.push(kd(e,xk,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(kd(e,xk,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(kd(n,n.charAt(0)=="/"?Dee:Nee,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",kd(n,Mee)),t.join("")};function xs(t){return new ka(t)}function ry(t,e,n){t.j=n?Rd(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function iy(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function bk(t,e,n){e instanceof tf?(t.i=e,Lee(t.i,t.h)):(n||(e=kd(e,Oee)),t.i=new tf(e,t.h))}function lt(t,e,n){t.i.set(e,n)}function ov(t){return lt(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Rd(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function kd(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,Pee),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Pee(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var xk=/[#\/\?@]/g,Nee=/[#\?:]/g,Dee=/[#\?]/g,Oee=/[#\?@]/g,Mee=/#/g;function tf(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function zo(t){t.g||(t.g=new Map,t.h=0,t.i&&Aee(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}te=tf.prototype;te.add=function(t,e){zo(this),this.i=null,t=_u(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function kF(t,e){zo(t),e=_u(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function AF(t,e){return zo(t),e=_u(t,e),t.g.has(e)}te.forEach=function(t,e){zo(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)};te.ta=function(){zo(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n};te.Z=function(t){zo(this);let e=[];if(typeof t=="string")AF(this,t)&&(e=e.concat(this.g.get(_u(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};te.set=function(t,e){return zo(this),this.i=null,t=_u(this,t),AF(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};te.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function PF(t,e,n){kF(t,e),0<n.length&&(t.i=null,t.g.set(_u(t,e),AT(n)),t.h+=n.length)}te.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;o[r]!==""&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};function _u(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function Lee(t,e){e&&!t.j&&(zo(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(kF(this,r),PF(this,i,n))},t)),t.j=e}var Vee=class{constructor(t,e){this.g=t,this.map=e}};function NF(t){this.l=t||Fee,xe.PerformanceNavigationTiming?(t=xe.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(xe.g&&xe.g.Ka&&xe.g.Ka()&&xe.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Fee=10;function DF(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function OF(t){return t.h?1:t.g?t.g.size:0}function yx(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function WT(t,e){t.g?t.g.add(e):t.h=e}function MF(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}NF.prototype.cancel=function(){if(this.i=LF(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function LF(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return AT(t.i)}var jee=class{stringify(t){return xe.JSON.stringify(t,void 0)}parse(t){return xe.JSON.parse(t,void 0)}};function $ee(){this.g=new jee}function Uee(t,e,n){const r=n||"";try{CF(t,function(i,s){let o=i;ep(i)&&(o=VT(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Bee(t,e){const n=new tv;if(xe.Image){const r=new Image;r.onload=tg(rg,n,r,"TestLoadImage: loaded",!0,e),r.onerror=tg(rg,n,r,"TestLoadImage: error",!1,e),r.onabort=tg(rg,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=tg(rg,n,r,"TestLoadImage: timeout",!1,e),xe.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function rg(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function av(t){this.l=t.ec||null,this.j=t.ob||!1}fn(av,UT);av.prototype.g=function(){return new lv(this.l,this.j)};av.prototype.i=function(t){return function(){return t}}({});function lv(t,e){hn.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=HT,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}fn(lv,hn);var HT=0;te=lv.prototype;te.open=function(t,e){if(this.readyState!=HT)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,nf(this)};te.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||xe).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};te.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,op(this)),this.readyState=HT};te.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,nf(this)),this.g&&(this.readyState=3,nf(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof xe.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;VF(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function VF(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}te.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?op(this):nf(this),this.readyState==3&&VF(this)}};te.Za=function(t){this.g&&(this.response=this.responseText=t,op(this))};te.Ya=function(t){this.g&&(this.response=t,op(this))};te.ka=function(){this.g&&op(this)};function op(t){t.readyState=4,t.l=null,t.j=null,t.A=null,nf(t)}te.setRequestHeader=function(t,e){this.v.append(t,e)};te.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};te.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function nf(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(lv.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var zee=xe.JSON.parse;function Mt(t){hn.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=FF,this.L=this.M=!1}fn(Mt,hn);var FF="",Wee=/^https?$/i,Hee=["POST","PUT"];te=Mt.prototype;te.Oa=function(t){this.M=t};te.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():fx.g(),this.C=this.u?wk(this.u):wk(fx),this.g.onreadystatechange=Fn(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){Sk(this,s);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const s of r.keys())n.set(s,r.get(s));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),i=xe.FormData&&t instanceof xe.FormData,!(0<=eF(Hee,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{UF(this),0<this.B&&((this.L=qee(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Fn(this.ua,this)):this.A=$T(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){Sk(this,s)}};function qee(t){return Uc&&typeof t.timeout=="number"&&t.ontimeout!==void 0}te.ua=function(){typeof kT<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Tn(this,"timeout"),this.abort(8))};function Sk(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,jF(t),cv(t)}function jF(t){t.F||(t.F=!0,Tn(t,"complete"),Tn(t,"error"))}te.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Tn(this,"complete"),Tn(this,"abort"),cv(this))};te.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),cv(this,!0)),Mt.$.N.call(this)};te.La=function(){this.s||(this.G||this.v||this.l?$F(this):this.kb())};te.kb=function(){$F(this)};function $F(t){if(t.h&&typeof kT<"u"&&(!t.C[1]||Ai(t)!=4||t.da()!=2)){if(t.v&&Ai(t)==4)$T(t.La,0,t);else if(Tn(t,"readystatechange"),Ai(t)==4){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=o===0){var i=String(t.I).match(RF)[1]||null;!i&&xe.self&&xe.self.location&&(i=xe.self.location.protocol.slice(0,-1)),r=!Wee.test(i?i.toLowerCase():"")}n=r}if(n)Tn(t,"complete"),Tn(t,"success");else{t.m=6;try{var s=2<Ai(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",jF(t)}}finally{cv(t)}}}}function cv(t,e){if(t.g){UF(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||Tn(t,"ready");try{n.onreadystatechange=r}catch{}}}function UF(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(xe.clearTimeout(t.A),t.A=null)}te.isActive=function(){return!!this.g};function Ai(t){return t.g?t.g.readyState:0}te.da=function(){try{return 2<Ai(this)?this.g.status:-1}catch{return-1}};te.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};te.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),zee(e)}};function Ek(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case FF:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function Gee(t){const e={};t=(t.g&&2<=Ai(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(Qh(t[r]))continue;var n=_ee(t[r]);const i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const s=e[i]||[];e[i]=s,s.push(n)}dee(e,function(r){return r.join(", ")})}te.Ia=function(){return this.m};te.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function BF(t){let e="";return NT(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function qT(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=BF(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):lt(t,e,n))}function Ju(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function zF(t){this.Ga=0,this.j=[],this.l=new tv,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Ju("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Ju("baseRetryDelayMs",5e3,t),this.hb=Ju("retryDelaySeedMs",1e4,t),this.eb=Ju("forwardChannelMaxRetries",2,t),this.xa=Ju("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new NF(t&&t.concurrentRequestLimit),this.Ja=new $ee,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}te=zF.prototype;te.ra=8;te.H=1;function GT(t){if(WF(t),t.H==3){var e=t.W++,n=xs(t.I);if(lt(n,"SID",t.K),lt(n,"RID",e),lt(n,"TYPE","terminate"),ap(t,n),e=new ip(t,t.l,e),e.L=2,e.A=ov(xs(n)),n=!1,xe.navigator&&xe.navigator.sendBeacon)try{n=xe.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&xe.Image&&(new Image().src=e.A,n=!0),n||(e.g=JF(e.l,null),e.g.ha(e.A)),e.G=Date.now(),sp(e)}YF(t)}function uv(t){t.g&&(QT(t),t.g.cancel(),t.g=null)}function WF(t){uv(t),t.u&&(xe.clearTimeout(t.u),t.u=null),sy(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&xe.clearTimeout(t.m),t.m=null)}function dv(t){if(!DF(t.i)&&!t.m){t.m=!0;var e=t.Na;Xh||hF(),Jh||(Xh(),Jh=!0),FT.add(e,t),t.C=0}}function Kee(t,e){return OF(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=np(Fn(t.Na,t,e),QF(t,t.C)),t.C++,!0)}te.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const i=new ip(this,this.l,t);let s=this.s;if(this.U&&(s?(s=iF(s),sF(s,this.U)):s=this.U),this.o!==null||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=HF(this,i,e),n=xs(this.I),lt(n,"RID",t),lt(n,"CVER",22),this.F&&lt(n,"X-HTTP-Session-Id",this.F),ap(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(BF(s)))+"&"+e:this.o&&qT(n,this.o,s)),WT(this.i,i),this.bb&&lt(n,"TYPE","init"),this.P?(lt(n,"$req",e),lt(n,"SID","null"),i.aa=!0,gx(i,n,null)):gx(i,n,e),this.H=2}}else this.H==3&&(t?Tk(this,t):this.j.length==0||DF(this.i)||Tk(this))};function Tk(t,e){var n;e?n=e.m:n=t.W++;const r=xs(t.I);lt(r,"SID",t.K),lt(r,"RID",n),lt(r,"AID",t.V),ap(t,r),t.o&&t.s&&qT(r,t.o,t.s),n=new ip(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=HF(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),WT(t.i,n),gx(n,r,e)}function ap(t,e){t.na&&NT(t.na,function(n,r){lt(e,r,n)}),t.h&&CF({},function(n,r){lt(e,r,n)})}function HF(t,e,n){n=Math.min(t.j.length,n);var r=t.h?Fn(t.h.Va,t.h,t):null;e:{var i=t.j;let s=-1;for(;;){const o=["count="+n];s==-1?0<n?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let l=0;l<n;l++){let c=i[l].g;const u=i[l].map;if(c-=s,0>c)s=Math.max(0,i[l].g-100),a=!1;else try{Uee(u,o,"req"+c+"_")}catch{r&&r(u)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function qF(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Xh||hF(),Jh||(Xh(),Jh=!0),FT.add(e,t),t.A=0}}function KT(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=np(Fn(t.Ma,t),QF(t,t.A)),t.A++,!0)}te.Ma=function(){if(this.u=null,GF(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=np(Fn(this.jb,this),t)}};te.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,qn(10),uv(this),GF(this))};function QT(t){t.B!=null&&(xe.clearTimeout(t.B),t.B=null)}function GF(t){t.g=new ip(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=xs(t.wa);lt(e,"RID","rpc"),lt(e,"SID",t.K),lt(e,"AID",t.V),lt(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&lt(e,"TO",t.qa),lt(e,"TYPE","xmlhttp"),ap(t,e),t.o&&t.s&&qT(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=ov(xs(e)),n.u=null,n.S=!0,SF(n,t)}te.ib=function(){this.v!=null&&(this.v=null,uv(this),KT(this),qn(19))};function sy(t){t.v!=null&&(xe.clearTimeout(t.v),t.v=null)}function KF(t,e){var n=null;if(t.g==e){sy(t),QT(t),t.g=null;var r=2}else if(yx(t.i,e))n=e.F,MF(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.u?e.u.length:0,e=Date.now()-e.G;var i=t.C;r=nv(),Tn(r,new _F(r,n)),dv(t)}else qF(t);else if(i=e.s,i==3||i==0&&0<e.ca||!(r==1&&Kee(t,e)||r==2&&KT(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:_a(t,5);break;case 4:_a(t,10);break;case 3:_a(t,6);break;default:_a(t,2)}}}function QF(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function _a(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=Fn(t.pb,t);n||(n=new ka("//www.google.com/images/cleardot.gif"),xe.location&&xe.location.protocol=="http"||ry(n,"https"),ov(n)),Bee(n.toString(),r)}else qn(2);t.H=0,t.h&&t.h.za(e),YF(t),WF(t)}te.pb=function(t){t?(this.l.info("Successfully pinged google.com"),qn(2)):(this.l.info("Failed to ping google.com"),qn(1))};function YF(t){if(t.H=0,t.ma=[],t.h){const e=LF(t.i);(e.length!=0||t.j.length!=0)&&(gk(t.ma,e),gk(t.ma,t.j),t.i.i.length=0,AT(t.j),t.j.length=0),t.h.ya()}}function XF(t,e,n){var r=n instanceof ka?xs(n):new ka(n);if(r.g!="")e&&(r.g=e+"."+r.g),iy(r,r.m);else{var i=xe.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new ka(null);r&&ry(s,r),e&&(s.g=e),i&&iy(s,i),n&&(s.l=n),r=s}return n=t.F,e=t.Da,n&&e&&lt(r,n,e),lt(r,"VER",t.ra),ap(t,r),r}function JF(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=t.Ha&&!t.va?new Mt(new av({ob:n})):new Mt(t.va),e.Oa(t.J),e}te.isActive=function(){return!!this.h&&this.h.isActive(this)};function ZF(){}te=ZF.prototype;te.Ba=function(){};te.Aa=function(){};te.za=function(){};te.ya=function(){};te.isActive=function(){return!0};te.Va=function(){};function oy(){if(Uc&&!(10<=Number(aee)))throw Error("Environmental error: no available transport.")}oy.prototype.g=function(t,e){return new kr(t,e)};function kr(t,e){hn.call(this),this.g=new zF(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Qh(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Qh(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new vu(this)}fn(kr,hn);kr.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;qn(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=XF(t,null,t.Y),dv(t)};kr.prototype.close=function(){GT(this.g)};kr.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=VT(t),t=n);e.j.push(new Vee(e.fb++,t)),e.H==3&&dv(e)};kr.prototype.N=function(){this.g.h=null,delete this.j,GT(this.g),delete this.g,kr.$.N.call(this)};function ej(t){BT.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}fn(ej,BT);function tj(){zT.call(this),this.status=1}fn(tj,zT);function vu(t){this.g=t}fn(vu,ZF);vu.prototype.Ba=function(){Tn(this.g,"a")};vu.prototype.Aa=function(t){Tn(this.g,new ej(t))};vu.prototype.za=function(t){Tn(this.g,new tj)};vu.prototype.ya=function(){Tn(this.g,"b")};function Qee(){this.blockSize=-1}function pi(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}fn(pi,Qee);pi.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function sw(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var s=t.g[3],o=e+(s^n&(i^s))+r[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[1]+3905402710&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[2]+606105819&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[3]+3250441966&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[5]+1200080426&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[6]+2821735955&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[7]+4249261313&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[9]+2336552879&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[10]+4294925233&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[11]+2304563134&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[13]+4254626195&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[14]+2792965006&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[15]+1236535329&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(i^s&(n^i))+r[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[6]+3225465664&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[11]+643717713&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[0]+3921069994&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[10]+38016083&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[15]+3634488961&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[4]+3889429448&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[14]+3275163606&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[3]+4107603335&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[8]+1163531501&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[2]+4243563512&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[7]+1735328473&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[12]+2368359562&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(n^i^s)+r[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[8]+2272392833&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[11]+1839030562&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[14]+4259657740&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[4]+1272893353&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[7]+4139469664&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[10]+3200236656&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[0]+3936430074&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[3]+3572445317&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[6]+76029189&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[12]+3873151461&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[15]+530742520&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[2]+3299628645&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(i^(n|~s))+r[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[7]+1126891415&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[14]+2878612391&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[5]+4237533241&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[3]+2399980690&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[10]+4293915773&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[1]+2240044497&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[15]+4264355552&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[6]+2734768916&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[13]+1309151649&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[11]+3174756917&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[2]+718787259&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}pi.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(i==0)for(;s<=n;)sw(this,t,s),s+=this.blockSize;if(typeof t=="string"){for(;s<e;)if(r[i++]=t.charCodeAt(s++),i==this.blockSize){sw(this,r),i=0;break}}else for(;s<e;)if(r[i++]=t[s++],i==this.blockSize){sw(this,r),i=0;break}}this.h=i,this.i+=e};pi.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function Ke(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=t[i]|0;r&&s==e||(n[i]=s,r=!1)}this.g=n}var Yee={};function YT(t){return-128<=t&&128>t?iee(t,function(e){return new Ke([e|0],0>e?-1:0)}):new Ke([t|0],0>t?-1:0)}function Pi(t){if(isNaN(t)||!isFinite(t))return _c;if(0>t)return vn(Pi(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=_x;return new Ke(e,0)}function nj(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return vn(nj(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Pi(Math.pow(e,8)),r=_c,i=0;i<t.length;i+=8){var s=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+s),e);8>s?(s=Pi(Math.pow(e,s)),r=r.R(s).add(Pi(o))):(r=r.R(n),r=r.add(Pi(o)))}return r}var _x=4294967296,_c=YT(0),vx=YT(1),Ik=YT(16777216);te=Ke.prototype;te.ea=function(){if(jr(this))return-vn(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:_x+r)*e,e*=_x}return t};te.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(is(this))return"0";if(jr(this))return"-"+vn(this).toString(t);for(var e=Pi(Math.pow(t,6)),n=this,r="";;){var i=ly(n,e).g;n=ay(n,i.R(e));var s=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=i,is(n))return s+r;for(;6>s.length;)s="0"+s;r=s+r}};te.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function is(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function jr(t){return t.h==-1}te.X=function(t){return t=ay(this,t),jr(t)?-1:is(t)?0:1};function vn(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new Ke(n,~t.h).add(vx)}te.abs=function(){return jr(this)?vn(this):this};te.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var s=r+(this.D(i)&65535)+(t.D(i)&65535),o=(s>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new Ke(n,n[n.length-1]&-2147483648?-1:0)};function ay(t,e){return t.add(vn(e))}te.R=function(t){if(is(this)||is(t))return _c;if(jr(this))return jr(t)?vn(this).R(vn(t)):vn(vn(this).R(t));if(jr(t))return vn(this.R(vn(t)));if(0>this.X(Ik)&&0>t.X(Ik))return Pi(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var s=this.D(r)>>>16,o=this.D(r)&65535,a=t.D(i)>>>16,l=t.D(i)&65535;n[2*r+2*i]+=o*l,ig(n,2*r+2*i),n[2*r+2*i+1]+=s*l,ig(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,ig(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,ig(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new Ke(n,0)};function ig(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Zu(t,e){this.g=t,this.h=e}function ly(t,e){if(is(e))throw Error("division by zero");if(is(t))return new Zu(_c,_c);if(jr(t))return e=ly(vn(t),e),new Zu(vn(e.g),vn(e.h));if(jr(e))return e=ly(t,vn(e)),new Zu(vn(e.g),e.h);if(30<t.g.length){if(jr(t)||jr(e))throw Error("slowDivide_ only works with positive integers.");for(var n=vx,r=e;0>=r.X(t);)n=Ck(n),r=Ck(r);var i=kl(n,1),s=kl(r,1);for(r=kl(r,2),n=kl(n,2);!is(r);){var o=s.add(r);0>=o.X(t)&&(i=i.add(n),s=o),r=kl(r,1),n=kl(n,1)}return e=ay(t,i.R(e)),new Zu(i,e)}for(i=_c;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),s=Pi(n),o=s.R(e);jr(o)||0<o.X(t);)n-=r,s=Pi(n),o=s.R(e);is(s)&&(s=vx),i=i.add(s),t=ay(t,o)}return new Zu(i,t)}te.gb=function(t){return ly(this,t).h};te.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new Ke(n,this.h&t.h)};te.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new Ke(n,this.h|t.h)};te.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new Ke(n,this.h^t.h)};function Ck(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new Ke(n,t.h)}function kl(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],s=0;s<r;s++)i[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new Ke(i,t.h)}oy.prototype.createWebChannel=oy.prototype.g;kr.prototype.send=kr.prototype.u;kr.prototype.open=kr.prototype.m;kr.prototype.close=kr.prototype.close;rv.NO_ERROR=0;rv.TIMEOUT=8;rv.HTTP_ERROR=6;vF.COMPLETE="complete";wF.EventType=rp;rp.OPEN="a";rp.CLOSE="b";rp.ERROR="c";rp.MESSAGE="d";hn.prototype.listen=hn.prototype.O;Mt.prototype.listenOnce=Mt.prototype.P;Mt.prototype.getLastError=Mt.prototype.Sa;Mt.prototype.getLastErrorCode=Mt.prototype.Ia;Mt.prototype.getStatus=Mt.prototype.da;Mt.prototype.getResponseJson=Mt.prototype.Wa;Mt.prototype.getResponseText=Mt.prototype.ja;Mt.prototype.send=Mt.prototype.ha;Mt.prototype.setWithCredentials=Mt.prototype.Oa;pi.prototype.digest=pi.prototype.l;pi.prototype.reset=pi.prototype.reset;pi.prototype.update=pi.prototype.j;Ke.prototype.add=Ke.prototype.add;Ke.prototype.multiply=Ke.prototype.R;Ke.prototype.modulo=Ke.prototype.gb;Ke.prototype.compare=Ke.prototype.X;Ke.prototype.toNumber=Ke.prototype.ea;Ke.prototype.toString=Ke.prototype.toString;Ke.prototype.getBits=Ke.prototype.D;Ke.fromNumber=Pi;Ke.fromString=nj;var Xee=function(){return new oy},Jee=function(){return nv()},ow=rv,Zee=vF,ete=pl,Rk={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},sg=wF,tte=Mt,nte=pi,vc=Ke;const kk="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}on.UNAUTHENTICATED=new on(null),on.GOOGLE_CREDENTIALS=new on("google-credentials-uid"),on.FIRST_PARTY=new on("first-party-uid"),on.MOCK_USER=new on("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wu="10.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bo=new Gf("@firebase/firestore");function $l(){return bo.logLevel}function rte(t){bo.setLogLevel(t)}function W(t,...e){if(bo.logLevel<=ke.DEBUG){const n=e.map(XT);bo.debug(`Firestore (${wu}): ${t}`,...n)}}function $t(t,...e){if(bo.logLevel<=ke.ERROR){const n=e.map(XT);bo.error(`Firestore (${wu}): ${t}`,...n)}}function gi(t,...e){if(bo.logLevel<=ke.WARN){const n=e.map(XT);bo.warn(`Firestore (${wu}): ${t}`,...n)}}function XT(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function se(t="Unexpected state"){const e=`FIRESTORE (${wu}) INTERNAL ASSERTION FAILED: `+t;throw $t(e),new Error(e)}function ue(t,e){t||se()}function ite(t,e){t||se()}function Z(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class z extends Kn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rj{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ste{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(on.UNAUTHENTICATED))}shutdown(){}}class ote{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class ate{constructor(e){this.t=e,this.currentUser=on.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new dn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new dn,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{W("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(W("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new dn)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(W("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ue(typeof r.accessToken=="string"),new rj(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return ue(e===null||typeof e=="string"),new on(e)}}class lte{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=on.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class cte{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new lte(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(on.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ute{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class dte{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=s=>{s.error!=null&&W("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,W("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{W("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):W("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ue(typeof n.token=="string"),this.R=n.token,new ute(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hte(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ij{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=hte(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function Se(t,e){return t<e?-1:t>e?1:0}function Bc(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function sj(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new z(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new z(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new z(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new z(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return pt.fromMillis(Date.now())}static fromDate(e){return pt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new pt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Se(this.nanoseconds,e.nanoseconds):Se(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(e){this.timestamp=e}static fromTimestamp(e){return new de(e)}static min(){return new de(new pt(0,0))}static max(){return new de(new pt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rf{constructor(e,n,r){n===void 0?n=0:n>e.length&&se(),r===void 0?r=e.length-n:r>e.length-n&&se(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return rf.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof rf?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ae extends rf{construct(e,n,r){return new Ae(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new z(L.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Ae(n)}static emptyPath(){return new Ae([])}}const fte=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class wt extends rf{construct(e,n,r){return new wt(e,n,r)}static isValidIdentifier(e){return fte.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),wt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new wt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new z(L.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new z(L.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new z(L.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new z(L.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new wt(n)}static emptyPath(){return new wt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.path=e}static fromPath(e){return new J(Ae.fromString(e))}static fromName(e){return new J(Ae.fromString(e).popFirst(5))}static empty(){return new J(Ae.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ae.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ae.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new J(new Ae(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cy{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function wx(t){return t.fields.find(e=>e.kind===2)}function ra(t){return t.fields.filter(e=>e.kind!==2)}cy.UNKNOWN_ID=-1;class Jg{constructor(e,n){this.fieldPath=e,this.kind=n}}class sf{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new sf(0,Ar.min())}}function oj(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=de.fromTimestamp(r===1e9?new pt(n+1,0):new pt(n,r));return new Ar(i,J.empty(),e)}function aj(t){return new Ar(t.readTime,t.key,-1)}class Ar{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ar(de.min(),J.empty(),-1)}static max(){return new Ar(de.max(),J.empty(),-1)}}function JT(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=J.comparator(t.documentKey,e.documentKey),n!==0?n:Se(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lj="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class cj{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wo(t){if(t.code!==L.FAILED_PRECONDITION||t.message!==lj)throw t;W("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&se(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new N((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof N?n:N.resolve(n)}catch(n){return N.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):N.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):N.reject(n)}static resolve(e){return new N((n,r)=>{n(e)})}static reject(e){return new N((n,r)=>{r(e)})}static waitFor(e){return new N((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=N.resolve(!1);for(const r of e)n=n.next(i=>i?N.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new N((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(u=>{o[c]=u,++a,a===s&&r(o)},u=>i(u))}})}static doWhile(e,n){return new N((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hv{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new dn,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new rh(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=ZT(r.target.error);this.V.reject(new rh(e,i))}}static open(e,n,r,i){try{return new hv(n,e.transaction(i,r))}catch(s){throw new rh(n,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(W("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new gte(n)}}class Ur{constructor(e,n,r){this.name=e,this.version=n,this.p=r,Ur.S(xt())===12.2&&$t("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return W("SimpleDb","Removing database:",e),la(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Fh())return!1;if(Ur.C())return!0;const e=xt(),n=Ur.S(e),r=0<n&&n<10,i=Ur.v(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){const n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}async O(e){return this.db||(W("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const o=s.target.result;n(o)},i.onblocked=()=>{r(new rh(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const o=s.target.error;o.name==="VersionError"?r(new z(L.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new z(L.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new rh(e,o))},i.onupgradeneeded=s=>{W("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.p.N(o,i.transaction,s.oldVersion,this.version).next(()=>{W("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.L&&(this.db.onversionchange=n=>this.L(n)),this.db}B(e){this.L=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const s=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.O(e);const a=hv.open(this.db,e,s?"readonly":"readwrite",r),l=i(a).next(c=>(a.g(),c)).catch(c=>(a.abort(c),N.reject(c))).toPromise();return l.catch(()=>{}),await a.m,l}catch(a){const l=a,c=l.name!=="FirebaseError"&&o<3;if(W("SimpleDb","Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}class pte{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return la(this.k.delete())}}class rh extends z{constructor(e,n){super(L.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Ho(t){return t.name==="IndexedDbTransactionError"}class gte{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(W("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(W("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),la(r)}add(e){return W("SimpleDb","ADD",this.store.name,e,e),la(this.store.add(e))}get(e){return la(this.store.get(e)).next(n=>(n===void 0&&(n=null),W("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return W("SimpleDb","DELETE",this.store.name,e),la(this.store.delete(e))}count(){return W("SimpleDb","COUNT",this.store.name),la(this.store.count())}W(e,n){const r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new N((o,a)=>{s.onerror=l=>{a(l.target.error)},s.onsuccess=l=>{o(l.target.result)}})}{const s=this.cursor(r),o=[];return this.G(s,(a,l)=>{o.push(l)}).next(()=>o)}}j(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new N((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}H(e,n){W("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.J=!1;const i=this.cursor(r);return this.G(i,(s,o,a)=>a.delete())}Y(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.G(i,n)}Z(e){const n=this.cursor({});return new N((r,i)=>{n.onerror=s=>{const o=ZT(s.target.error);i(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}G(e,n){const r=[];return new N((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const l=new pte(a),c=n(a.primaryKey,a.value,l);if(c instanceof N){const u=c.catch(d=>(l.done(),N.reject(d)));r.push(u)}l.isDone?i():l.$===null?a.continue():a.continue(l.$)}}).next(()=>N.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function la(t){return new N((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=ZT(r.target.error);n(i)}})}let Ak=!1;function ZT(t){const e=Ur.S(xt());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new z("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Ak||(Ak=!0,setTimeout(()=>{throw r},0)),r}}return t}class mte{constructor(e,n){this.asyncQueue=e,this.X=n,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}ee(e){W("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{W("IndexBackfiller",`Documents written: ${await this.X.te()}`)}catch(n){Ho(n)?W("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):await Wo(n)}await this.ee(6e4)})}}class yte{constructor(e,n){this.localStore=e,this.persistence=n}async te(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.ne(n,e))}ne(e,n){const r=new Set;let i=n,s=!0;return N.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return W("IndexBackfiller",`Processing collection: ${o}`),this.re(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>n-i)}re(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.ie(i,s)).next(a=>(W("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}ie(e,n){let r=e;return n.changes.forEach((i,s)=>{const o=aj(s);JT(o,r)>0&&(r=o)}),new Ar(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.se(r),this.oe=r=>n.writeSequenceNumber(r))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.oe&&this.oe(e),e}}lr._e=-1;function lp(t){return t==null}function of(t){return t===0&&1/t==-1/0}function uj(t){return typeof t=="number"&&Number.isInteger(t)&&!of(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qn(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Pk(e)),e=_te(t.get(n),e);return Pk(e)}function _te(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function Pk(t){return t+""}function Ni(t){const e=t.length;if(ue(e>=2),e===2)return ue(t.charAt(0)===""&&t.charAt(1)===""),Ae.emptyPath();const n=e-2,r=[];let i="";for(let s=0;s<e;){const o=t.indexOf("",s);switch((o<0||o>n)&&se(),t.charAt(o+1)){case"":const a=t.substring(s,o);let l;i.length===0?l=a:(i+=a,l=i,i=""),r.push(l);break;case"":i+=t.substring(s,o),i+="\0";break;case"":i+=t.substring(s,o+1);break;default:se()}s=o+2}return new Ae(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nk=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zg(t,e){return[t,Qn(e)]}function dj(t,e,n){return[t,Qn(e),n]}const vte={},wte=["prefixPath","collectionGroup","readTime","documentId"],bte=["prefixPath","collectionGroup","documentId"],xte=["collectionGroup","readTime","prefixPath","documentId"],Ste=["canonicalId","targetId"],Ete=["targetId","path"],Tte=["path","targetId"],Ite=["collectionId","parent"],Cte=["indexId","uid"],Rte=["uid","sequenceNumber"],kte=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Ate=["indexId","uid","orderedDocumentKey"],Pte=["userId","collectionPath","documentId"],Nte=["userId","collectionPath","largestBatchId"],Dte=["userId","collectionGroup","largestBatchId"],hj=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Ote=[...hj,"documentOverlays"],fj=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],pj=fj,Mte=[...pj,"indexConfiguration","indexState","indexEntries"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bx extends cj{constructor(e,n){super(),this.ae=e,this.currentSequenceNumber=n}}function pn(t,e){const n=Z(t);return Ur.M(n.ae,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dk(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function gl(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function gj(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ct=class xx{constructor(e,n){this.comparator=e,this.root=n||ho.EMPTY}insert(e,n){return new xx(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ho.BLACK,null,null))}remove(e){return new xx(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ho.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new og(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new og(this.root,e,this.comparator,!1)}getReverseIterator(){return new og(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new og(this.root,e,this.comparator,!0)}},og=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},ho=class Ki{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Ki.RED,this.left=i??Ki.EMPTY,this.right=s??Ki.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Ki(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ki.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Ki.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ki.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ki.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw se();const e=this.left.check();if(e!==this.right.check())throw se();return e+(this.isRed()?0:1)}};ho.EMPTY=null,ho.RED=!0,ho.BLACK=!1;ho.EMPTY=new class{constructor(){this.size=0}get key(){throw se()}get value(){throw se()}get color(){throw se()}get left(){throw se()}get right(){throw se()}copy(e,n,r,i,s){return this}insert(e,n,r){return new ho(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(e){this.comparator=e,this.data=new Ct(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Ok(this.data.getIterator())}getIteratorFrom(e){return new Ok(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Je)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Je(this.comparator);return n.data=e,n}}class Ok{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Al(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr{constructor(e){this.fields=e,e.sort(wt.comparator)}static empty(){return new cr([])}unionWith(e){let n=new Je(wt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new cr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Bc(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mj extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lte(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new mj("Invalid base64 string: "+s):s}}(e);return new en(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new en(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Se(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}en.EMPTY_BYTE_STRING=new en("");const Vte=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function xo(t){if(ue(!!t),typeof t=="string"){let e=0;const n=Vte.exec(t);if(ue(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:At(t.seconds),nanos:At(t.nanos)}}function At(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function So(t){return typeof t=="string"?en.fromBase64String(t):en.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fv(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function eI(t){const e=t.mapValue.fields.__previous_value__;return fv(e)?eI(e):e}function af(t){const e=xo(t.mapValue.fields.__local_write_time__.timestampValue);return new pt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fte{constructor(e,n,r,i,s,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Eo{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Eo("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Eo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xs={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},em={nullValue:"NULL_VALUE"};function Wa(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?fv(t)?4:yj(t)?9007199254740991:10:se()}function Bi(t,e){if(t===e)return!0;const n=Wa(t);if(n!==Wa(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return af(t).isEqual(af(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=xo(i.timestampValue),a=xo(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return So(i.bytesValue).isEqual(So(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return At(i.geoPointValue.latitude)===At(s.geoPointValue.latitude)&&At(i.geoPointValue.longitude)===At(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return At(i.integerValue)===At(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=At(i.doubleValue),a=At(s.doubleValue);return o===a?of(o)===of(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Bc(t.arrayValue.values||[],e.arrayValue.values||[],Bi);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(Dk(o)!==Dk(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Bi(o[l],a[l])))return!1;return!0}(t,e);default:return se()}}function lf(t,e){return(t.values||[]).find(n=>Bi(n,e))!==void 0}function To(t,e){if(t===e)return 0;const n=Wa(t),r=Wa(e);if(n!==r)return Se(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Se(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=At(s.integerValue||s.doubleValue),l=At(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return Mk(t.timestampValue,e.timestampValue);case 4:return Mk(af(t),af(e));case 5:return Se(t.stringValue,e.stringValue);case 6:return function(s,o){const a=So(s),l=So(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=Se(a[c],l[c]);if(u!==0)return u}return Se(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=Se(At(s.latitude),At(o.latitude));return a!==0?a:Se(At(s.longitude),At(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){const a=s.values||[],l=o.values||[];for(let c=0;c<a.length&&c<l.length;++c){const u=To(a[c],l[c]);if(u)return u}return Se(a.length,l.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===Xs.mapValue&&o===Xs.mapValue)return 0;if(s===Xs.mapValue)return 1;if(o===Xs.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let d=0;d<l.length&&d<u.length;++d){const h=Se(l[d],u[d]);if(h!==0)return h;const f=To(a[l[d]],c[u[d]]);if(f!==0)return f}return Se(l.length,u.length)}(t.mapValue,e.mapValue);default:throw se()}}function Mk(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Se(t,e);const n=xo(t),r=xo(e),i=Se(n.seconds,r.seconds);return i!==0?i:Se(n.nanos,r.nanos)}function zc(t){return Sx(t)}function Sx(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=xo(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return So(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return J.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Sx(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Sx(n.fields[o])}`;return i+"}"}(t.mapValue):se()}function Ha(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Ex(t){return!!t&&"integerValue"in t}function cf(t){return!!t&&"arrayValue"in t}function Lk(t){return!!t&&"nullValue"in t}function Vk(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function tm(t){return!!t&&"mapValue"in t}function ih(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return gl(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ih(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ih(t.arrayValue.values[n]);return e}return Object.assign({},t)}function yj(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function jte(t){return"nullValue"in t?em:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Ha(Eo.empty(),J.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:se()}function $te(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Ha(Eo.empty(),J.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?Xs:se()}function Fk(t,e){const n=To(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function jk(t,e){const n=To(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e){this.value=e}static empty(){return new bn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!tm(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ih(n)}setAll(e){let n=wt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=ih(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());tm(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Bi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];tm(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){gl(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new bn(ih(this.value))}}function _j(t){const e=[];return gl(t.fields,(n,r)=>{const i=new wt([n]);if(tm(r)){const s=_j(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new cr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new ct(e,0,de.min(),de.min(),de.min(),bn.empty(),0)}static newFoundDocument(e,n,r,i){return new ct(e,1,n,de.min(),r,i,0)}static newNoDocument(e,n){return new ct(e,2,n,de.min(),de.min(),bn.empty(),0)}static newUnknownDocument(e,n){return new ct(e,3,n,de.min(),de.min(),bn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(de.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=bn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=bn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=de.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ct&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ct(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(e,n){this.position=e,this.inclusive=n}}function $k(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=J.comparator(J.fromName(o.referenceValue),n.key):r=To(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Uk(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Bi(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uf{constructor(e,n="asc"){this.field=e,this.dir=n}}function Ute(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vj{}class Pe extends vj{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Bte(e,n,r):n==="array-contains"?new Hte(e,r):n==="in"?new Tj(e,r):n==="not-in"?new qte(e,r):n==="array-contains-any"?new Gte(e,r):new Pe(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new zte(e,r):new Wte(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(To(n,this.value)):n!==null&&Wa(this.value)===Wa(n)&&this.matchesComparison(To(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return se()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class qe extends vj{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new qe(e,n)}matches(e){return Wc(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function Wc(t){return t.op==="and"}function Tx(t){return t.op==="or"}function tI(t){return wj(t)&&Wc(t)}function wj(t){for(const e of t.filters)if(e instanceof qe)return!1;return!0}function Ix(t){if(t instanceof Pe)return t.field.canonicalString()+t.op.toString()+zc(t.value);if(tI(t))return t.filters.map(e=>Ix(e)).join(",");{const e=t.filters.map(n=>Ix(n)).join(",");return`${t.op}(${e})`}}function bj(t,e){return t instanceof Pe?function(r,i){return i instanceof Pe&&r.op===i.op&&r.field.isEqual(i.field)&&Bi(r.value,i.value)}(t,e):t instanceof qe?function(r,i){return i instanceof qe&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&bj(o,i.filters[a]),!0):!1}(t,e):void se()}function xj(t,e){const n=t.filters.concat(e);return qe.create(n,t.op)}function Sj(t){return t instanceof Pe?function(n){return`${n.field.canonicalString()} ${n.op} ${zc(n.value)}`}(t):t instanceof qe?function(n){return n.op.toString()+" {"+n.getFilters().map(Sj).join(" ,")+"}"}(t):"Filter"}class Bte extends Pe{constructor(e,n,r){super(e,n,r),this.key=J.fromName(r.referenceValue)}matches(e){const n=J.comparator(e.key,this.key);return this.matchesComparison(n)}}class zte extends Pe{constructor(e,n){super(e,"in",n),this.keys=Ej("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Wte extends Pe{constructor(e,n){super(e,"not-in",n),this.keys=Ej("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Ej(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>J.fromName(r.referenceValue))}class Hte extends Pe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return cf(n)&&lf(n.arrayValue,this.value)}}class Tj extends Pe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&lf(this.value.arrayValue,n)}}class qte extends Pe{constructor(e,n){super(e,"not-in",n)}matches(e){if(lf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!lf(this.value.arrayValue,n)}}class Gte extends Pe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!cf(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>lf(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kte{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ce=null}}function Cx(t,e=null,n=[],r=[],i=null,s=null,o=null){return new Kte(t,e,n,r,i,s,o)}function qa(t){const e=Z(t);if(e.ce===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Ix(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),lp(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>zc(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>zc(r)).join(",")),e.ce=n}return e.ce}function cp(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Ute(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!bj(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Uk(t.startAt,e.startAt)&&Uk(t.endAt,e.endAt)}function uy(t){return J.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function dy(t,e){return t.filters.filter(n=>n instanceof Pe&&n.field.isEqual(e))}function Bk(t,e,n){let r=em,i=!0;for(const s of dy(t,e)){let o=em,a=!0;switch(s.op){case"<":case"<=":o=jte(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=em}Fk({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];Fk({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}function zk(t,e,n){let r=Xs,i=!0;for(const s of dy(t,e)){let o=Xs,a=!0;switch(s.op){case">=":case">":o=$te(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=Xs}jk({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];jk({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function Ij(t,e,n,r,i,s,o,a){return new ks(t,e,n,r,i,s,o,a)}function bu(t){return new ks(t)}function Wk(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function nI(t){return t.collectionGroup!==null}function wc(t){const e=Z(t);if(e.le===null){e.le=[];const n=new Set;for(const s of e.explicitOrderBy)e.le.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Je(wt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.le.push(new uf(s,r))}),n.has(wt.keyField().canonicalString())||e.le.push(new uf(wt.keyField(),r))}return e.le}function Yn(t){const e=Z(t);return e.he||(e.he=Qte(e,wc(t))),e.he}function Qte(t,e){if(t.limitType==="F")return Cx(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new uf(i.field,s)});const n=t.endAt?new Io(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Io(t.startAt.position,t.startAt.inclusive):null;return Cx(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Rx(t,e){const n=t.filters.concat([e]);return new ks(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function hy(t,e,n){return new ks(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function up(t,e){return cp(Yn(t),Yn(e))&&t.limitType===e.limitType}function Cj(t){return`${qa(Yn(t))}|lt:${t.limitType}`}function Ul(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>Sj(i)).join(", ")}]`),lp(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>zc(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>zc(i)).join(",")),`Target(${r})`}(Yn(t))}; limitType=${t.limitType})`}function dp(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):J.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of wc(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const c=$k(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,wc(r),i)||r.endAt&&!function(o,a,l){const c=$k(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,wc(r),i))}(t,e)}function Rj(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function kj(t){return(e,n)=>{let r=!1;for(const i of wc(t)){const s=Yte(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function Yte(t,e,n){const r=t.field.isKeyField()?J.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?To(l,c):se()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return se()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){gl(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return gj(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xte=new Ct(J.comparator);function ur(){return Xte}const Aj=new Ct(J.comparator);function Ad(...t){let e=Aj;for(const n of t)e=e.insert(n.key,n);return e}function Pj(t){let e=Aj;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Di(){return sh()}function Nj(){return sh()}function sh(){return new qo(t=>t.toString(),(t,e)=>t.isEqual(e))}const Jte=new Ct(J.comparator),Zte=new Je(J.comparator);function Ie(...t){let e=Zte;for(const n of t)e=e.add(n);return e}const ene=new Je(Se);function rI(){return ene}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dj(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:of(e)?"-0":e}}function Oj(t){return{integerValue:""+t}}function Mj(t,e){return uj(e)?Oj(e):Dj(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pv{constructor(){this._=void 0}}function tne(t,e,n){return t instanceof Hc?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&fv(s)&&(s=eI(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Ga?Vj(t,e):t instanceof Ka?Fj(t,e):function(i,s){const o=Lj(i,s),a=Hk(o)+Hk(i.Ie);return Ex(o)&&Ex(i.Ie)?Oj(a):Dj(i.serializer,a)}(t,e)}function nne(t,e,n){return t instanceof Ga?Vj(t,e):t instanceof Ka?Fj(t,e):n}function Lj(t,e){return t instanceof qc?function(r){return Ex(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Hc extends pv{}class Ga extends pv{constructor(e){super(),this.elements=e}}function Vj(t,e){const n=jj(e);for(const r of t.elements)n.some(i=>Bi(i,r))||n.push(r);return{arrayValue:{values:n}}}class Ka extends pv{constructor(e){super(),this.elements=e}}function Fj(t,e){let n=jj(e);for(const r of t.elements)n=n.filter(i=>!Bi(i,r));return{arrayValue:{values:n}}}class qc extends pv{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function Hk(t){return At(t.integerValue||t.doubleValue)}function jj(t){return cf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hp{constructor(e,n){this.field=e,this.transform=n}}function rne(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Ga&&i instanceof Ga||r instanceof Ka&&i instanceof Ka?Bc(r.elements,i.elements,Bi):r instanceof qc&&i instanceof qc?Bi(r.Ie,i.Ie):r instanceof Hc&&i instanceof Hc}(t.transform,e.transform)}class ine{constructor(e,n){this.version=e,this.transformResults=n}}class bt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new bt}static exists(e){return new bt(void 0,e)}static updateTime(e){return new bt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function nm(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class gv{}function $j(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Su(t.key,bt.none()):new xu(t.key,t.data,bt.none());{const n=t.data,r=bn.empty();let i=new Je(wt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new As(t.key,r,new cr(i.toArray()),bt.none())}}function sne(t,e,n){t instanceof xu?function(i,s,o){const a=i.value.clone(),l=Gk(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof As?function(i,s,o){if(!nm(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=Gk(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(Uj(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function oh(t,e,n,r){return t instanceof xu?function(s,o,a,l){if(!nm(s.precondition,o))return a;const c=s.value.clone(),u=Kk(s.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof As?function(s,o,a,l){if(!nm(s.precondition,o))return a;const c=Kk(s.fieldTransforms,l,o),u=o.data;return u.setAll(Uj(s)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(s,o,a){return nm(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function one(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=Lj(r.transform,i||null);s!=null&&(n===null&&(n=bn.empty()),n.set(r.field,s))}return n||null}function qk(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Bc(r,i,(s,o)=>rne(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class xu extends gv{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class As extends gv{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Uj(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Gk(t,e,n){const r=new Map;ue(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,nne(o,a,n[i]))}return r}function Kk(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,tne(s,o,e))}return r}class Su extends gv{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class iI extends gv{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&sne(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=oh(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=oh(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Nj();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=$j(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(de.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ie())}isEqual(e){return this.batchId===e.batchId&&Bc(this.mutations,e.mutations,(n,r)=>qk(n,r))&&Bc(this.baseMutations,e.baseMutations,(n,r)=>qk(n,r))}}class oI{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ue(e.mutations.length===r.length);let i=function(){return Jte}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new oI(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ane{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wt,Me;function Bj(t){switch(t){default:return se();case L.CANCELLED:case L.UNKNOWN:case L.DEADLINE_EXCEEDED:case L.RESOURCE_EXHAUSTED:case L.INTERNAL:case L.UNAVAILABLE:case L.UNAUTHENTICATED:return!1;case L.INVALID_ARGUMENT:case L.NOT_FOUND:case L.ALREADY_EXISTS:case L.PERMISSION_DENIED:case L.FAILED_PRECONDITION:case L.ABORTED:case L.OUT_OF_RANGE:case L.UNIMPLEMENTED:case L.DATA_LOSS:return!0}}function zj(t){if(t===void 0)return $t("GRPC error has no .code"),L.UNKNOWN;switch(t){case Wt.OK:return L.OK;case Wt.CANCELLED:return L.CANCELLED;case Wt.UNKNOWN:return L.UNKNOWN;case Wt.DEADLINE_EXCEEDED:return L.DEADLINE_EXCEEDED;case Wt.RESOURCE_EXHAUSTED:return L.RESOURCE_EXHAUSTED;case Wt.INTERNAL:return L.INTERNAL;case Wt.UNAVAILABLE:return L.UNAVAILABLE;case Wt.UNAUTHENTICATED:return L.UNAUTHENTICATED;case Wt.INVALID_ARGUMENT:return L.INVALID_ARGUMENT;case Wt.NOT_FOUND:return L.NOT_FOUND;case Wt.ALREADY_EXISTS:return L.ALREADY_EXISTS;case Wt.PERMISSION_DENIED:return L.PERMISSION_DENIED;case Wt.FAILED_PRECONDITION:return L.FAILED_PRECONDITION;case Wt.ABORTED:return L.ABORTED;case Wt.OUT_OF_RANGE:return L.OUT_OF_RANGE;case Wt.UNIMPLEMENTED:return L.UNIMPLEMENTED;case Wt.DATA_LOSS:return L.DATA_LOSS;default:return se()}}(Me=Wt||(Wt={}))[Me.OK=0]="OK",Me[Me.CANCELLED=1]="CANCELLED",Me[Me.UNKNOWN=2]="UNKNOWN",Me[Me.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Me[Me.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Me[Me.NOT_FOUND=5]="NOT_FOUND",Me[Me.ALREADY_EXISTS=6]="ALREADY_EXISTS",Me[Me.PERMISSION_DENIED=7]="PERMISSION_DENIED",Me[Me.UNAUTHENTICATED=16]="UNAUTHENTICATED",Me[Me.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Me[Me.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Me[Me.ABORTED=10]="ABORTED",Me[Me.OUT_OF_RANGE=11]="OUT_OF_RANGE",Me[Me.UNIMPLEMENTED=12]="UNIMPLEMENTED",Me[Me.INTERNAL=13]="INTERNAL",Me[Me.UNAVAILABLE=14]="UNAVAILABLE",Me[Me.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wj(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lne=new vc([4294967295,4294967295],0);function Qk(t){const e=Wj().encode(t),n=new nte;return n.update(e),new Uint8Array(n.digest())}function Yk(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new vc([n,r],0),new vc([i,s],0)]}class lI{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Pd(`Invalid padding: ${n}`);if(r<0)throw new Pd(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Pd(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Pd(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=vc.fromNumber(this.Te)}de(e,n,r){let i=e.add(n.multiply(vc.fromNumber(r)));return i.compare(lne)===1&&(i=new vc([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const n=Qk(e),[r,i]=Yk(n);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);if(!this.Ae(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new lI(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Te===0)return;const n=Qk(e),[r,i]=Yk(n);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);this.Re(o)}}Re(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Pd extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,pp.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new fp(de.min(),i,new Ct(Se),ur(),Ie())}}class pp{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new pp(r,n,Ie(),Ie(),Ie())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rm{constructor(e,n,r,i){this.Ve=e,this.removedTargetIds=n,this.key=r,this.me=i}}class Hj{constructor(e,n){this.targetId=e,this.fe=n}}class qj{constructor(e,n,r=en.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Xk{constructor(){this.ge=0,this.pe=Zk(),this.ye=en.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=Ie(),n=Ie(),r=Ie();return this.pe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:se()}}),new pp(this.ye,this.we,e,n,r)}Fe(){this.Se=!1,this.pe=Zk()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,ue(this.ge>=0)}Le(){this.Se=!0,this.we=!0}}class cne{constructor(e){this.Be=e,this.ke=new Map,this.qe=ur(),this.Qe=Jk(),this.Ke=new Ct(Se)}$e(e){for(const n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(const n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{const r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(e.resumeToken));break;default:se()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((r,i)=>{this.je(i)&&n(i)})}Je(e){const n=e.targetId,r=e.fe.count,i=this.Ye(n);if(i){const s=i.target;if(uy(s))if(r===0){const o=new J(s.path);this.We(n,o,ct.newNoDocument(o,de.min()))}else ue(r===1);else{const o=this.Ze(n);if(o!==r){const a=this.Xe(e),l=a?this.et(a,e,o):1;if(l!==0){this.He(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,c)}}}}}Xe(e){const n=e.fe.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=So(r).toUint8Array()}catch(l){if(l instanceof mj)return gi("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new lI(o,i,s)}catch(l){return gi(l instanceof Pd?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Te===0?null:a}et(e,n,r){return n.fe.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){const r=this.Be.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Be.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.We(n,s,null),i++)}),i}it(e){const n=new Map;this.ke.forEach((s,o)=>{const a=this.Ye(o);if(a){if(s.current&&uy(a.target)){const l=new J(a.target.path);this.qe.get(l)!==null||this.st(o,l)||this.We(o,l,ct.newNoDocument(l,e))}s.De&&(n.set(o,s.ve()),s.Fe())}});let r=Ie();this.Qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Ye(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.qe.forEach((s,o)=>o.setReadTime(e));const i=new fp(e,n,this.Ke,this.qe,r);return this.qe=ur(),this.Qe=Jk(),this.Ke=new Ct(Se),i}Ue(e,n){if(!this.je(e))return;const r=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,r){if(!this.je(e))return;const i=this.ze(e);this.st(e,n)?i.Me(n,1):i.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(e){this.ke.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Be.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new Xk,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new Je(Se),this.Qe=this.Qe.insert(e,n)),n}je(e){const n=this.Ye(e)!==null;return n||W("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.ke.get(e);return n&&n.be?null:this.Be._t(e)}He(e){this.ke.set(e,new Xk),this.Be.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Be.getRemoteKeysForTarget(e).has(n)}}function Jk(){return new Ct(J.comparator)}function Zk(){return new Ct(J.comparator)}const une={asc:"ASCENDING",desc:"DESCENDING"},dne={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},hne={and:"AND",or:"OR"};class fne{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function kx(t,e){return t.useProto3Json||lp(e)?e:{value:e}}function Gc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Gj(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function pne(t,e){return Gc(t,e.toTimestamp())}function zt(t){return ue(!!t),de.fromTimestamp(function(n){const r=xo(n);return new pt(r.seconds,r.nanos)}(t))}function cI(t,e){return Ax(t,e).canonicalString()}function Ax(t,e){const n=function(i){return new Ae(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Kj(t){const e=Ae.fromString(t);return ue(i$(e)),e}function df(t,e){return cI(t.databaseId,e.path)}function Fi(t,e){const n=Kj(e);if(n.get(1)!==t.databaseId.projectId)throw new z(L.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new z(L.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new J(Xj(n))}function Qj(t,e){return cI(t.databaseId,e)}function Yj(t){const e=Kj(t);return e.length===4?Ae.emptyPath():Xj(e)}function Px(t){return new Ae(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Xj(t){return ue(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function eA(t,e,n){return{name:df(t,e),fields:n.value.mapValue.fields}}function Jj(t,e,n){const r=Fi(t,e.name),i=zt(e.updateTime),s=e.createTime?zt(e.createTime):de.min(),o=new bn({mapValue:{fields:e.fields}}),a=ct.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function gne(t,e){return"found"in e?function(r,i){ue(!!i.found),i.found.name,i.found.updateTime;const s=Fi(r,i.found.name),o=zt(i.found.updateTime),a=i.found.createTime?zt(i.found.createTime):de.min(),l=new bn({mapValue:{fields:i.found.fields}});return ct.newFoundDocument(s,o,a,l)}(t,e):"missing"in e?function(r,i){ue(!!i.missing),ue(!!i.readTime);const s=Fi(r,i.missing),o=zt(i.readTime);return ct.newNoDocument(s,o)}(t,e):se()}function mne(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:se()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,u){return c.useProto3Json?(ue(u===void 0||typeof u=="string"),en.fromBase64String(u||"")):(ue(u===void 0||u instanceof Uint8Array),en.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const u=c.code===void 0?L.UNKNOWN:zj(c.code);return new z(u,c.message||"")}(o);n=new qj(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Fi(t,r.document.name),s=zt(r.document.updateTime),o=r.document.createTime?zt(r.document.createTime):de.min(),a=new bn({mapValue:{fields:r.document.fields}}),l=ct.newFoundDocument(i,s,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new rm(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Fi(t,r.document),s=r.readTime?zt(r.readTime):de.min(),o=ct.newNoDocument(i,s),a=r.removedTargetIds||[];n=new rm([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Fi(t,r.document),s=r.removedTargetIds||[];n=new rm([],s,i,null)}else{if(!("filter"in e))return se();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new ane(i,s),a=r.targetId;n=new Hj(a,o)}}return n}function hf(t,e){let n;if(e instanceof xu)n={update:eA(t,e.key,e.value)};else if(e instanceof Su)n={delete:df(t,e.key)};else if(e instanceof As)n={update:eA(t,e.key,e.data),updateMask:xne(e.fieldMask)};else{if(!(e instanceof iI))return se();n={verify:df(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Hc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ga)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ka)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof qc)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw se()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:pne(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:se()}(t,e.precondition)),n}function Nx(t,e){const n=e.currentDocument?function(s){return s.updateTime!==void 0?bt.updateTime(zt(s.updateTime)):s.exists!==void 0?bt.exists(s.exists):bt.none()}(e.currentDocument):bt.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let l=null;if("setToServerValue"in a)ue(a.setToServerValue==="REQUEST_TIME"),l=new Hc;else if("appendMissingElements"in a){const u=a.appendMissingElements.values||[];l=new Ga(u)}else if("removeAllFromArray"in a){const u=a.removeAllFromArray.values||[];l=new Ka(u)}else"increment"in a?l=new qc(o,a.increment):se();const c=wt.fromServerFormat(a.fieldPath);return new hp(c,l)}(t,i)):[];if(e.update){e.update.name;const i=Fi(t,e.update.name),s=new bn({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(l){const c=l.fieldPaths||[];return new cr(c.map(u=>wt.fromServerFormat(u)))}(e.updateMask);return new As(i,s,o,n,r)}return new xu(i,s,n,r)}if(e.delete){const i=Fi(t,e.delete);return new Su(i,n)}if(e.verify){const i=Fi(t,e.verify);return new iI(i,n)}return se()}function yne(t,e){return t&&t.length>0?(ue(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?zt(i.updateTime):zt(s);return o.isEqual(de.min())&&(o=zt(s)),new ine(o,i.transformResults||[])}(n,e))):[]}function Zj(t,e){return{documents:[Qj(t,e.path)]}}function e$(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Qj(t,i);const s=function(c){if(c.length!==0)return r$(qe.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(u=>function(h){return{field:Bl(h.field),direction:vne(h.dir)}}(u))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=kx(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ut:n,parent:i}}function t$(t){let e=Yj(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ue(r===1);const u=n.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let s=[];n.where&&(s=function(d){const h=n$(d);return h instanceof qe&&tI(h)?h.getFilters():[h]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(h=>function(g){return new uf(zl(g.field),function(v){switch(v){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(g.direction))}(h))}(n.orderBy));let a=null;n.limit&&(a=function(d){let h;return h=typeof d=="object"?d.value:d,lp(h)?null:h}(n.limit));let l=null;n.startAt&&(l=function(d){const h=!!d.before,f=d.values||[];return new Io(f,h)}(n.startAt));let c=null;return n.endAt&&(c=function(d){const h=!d.before,f=d.values||[];return new Io(f,h)}(n.endAt)),Ij(e,i,o,s,a,"F",l,c)}function _ne(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return se()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function n$(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=zl(n.unaryFilter.field);return Pe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=zl(n.unaryFilter.field);return Pe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=zl(n.unaryFilter.field);return Pe.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=zl(n.unaryFilter.field);return Pe.create(o,"!=",{nullValue:"NULL_VALUE"});default:return se()}}(t):t.fieldFilter!==void 0?function(n){return Pe.create(zl(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return se()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return qe.create(n.compositeFilter.filters.map(r=>n$(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return se()}}(n.compositeFilter.op))}(t):se()}function vne(t){return une[t]}function wne(t){return dne[t]}function bne(t){return hne[t]}function Bl(t){return{fieldPath:t.canonicalString()}}function zl(t){return wt.fromServerFormat(t.fieldPath)}function r$(t){return t instanceof Pe?function(n){if(n.op==="=="){if(Vk(n.value))return{unaryFilter:{field:Bl(n.field),op:"IS_NAN"}};if(Lk(n.value))return{unaryFilter:{field:Bl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Vk(n.value))return{unaryFilter:{field:Bl(n.field),op:"IS_NOT_NAN"}};if(Lk(n.value))return{unaryFilter:{field:Bl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Bl(n.field),op:wne(n.op),value:n.value}}}(t):t instanceof qe?function(n){const r=n.getFilters().map(i=>r$(i));return r.length===1?r[0]:{compositeFilter:{op:bne(n.op),filters:r}}}(t):se()}function xne(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function i$(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(e,n,r,i,s=de.min(),o=de.min(),a=en.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new ss(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ss(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ss(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ss(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s${constructor(e){this.ct=e}}function Sne(t,e){let n;if(e.document)n=Jj(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=J.fromSegments(e.noDocument.path),i=Ya(e.noDocument.readTime);n=ct.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return se();{const r=J.fromSegments(e.unknownDocument.path),i=Ya(e.unknownDocument.version);n=ct.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){const s=new pt(i[0],i[1]);return de.fromTimestamp(s)}(e.readTime)),n}function tA(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:fy(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,o){return{name:df(s,o.key),fields:o.data.value.mapValue.fields,updateTime:Gc(s,o.version.toTimestamp()),createTime:Gc(s,o.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Qa(e.version)};else{if(!e.isUnknownDocument())return se();r.unknownDocument={path:n.path.toArray(),version:Qa(e.version)}}return r}function fy(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Qa(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ya(t){const e=new pt(t.seconds,t.nanoseconds);return de.fromTimestamp(e)}function ca(t,e){const n=(e.baseMutations||[]).map(s=>Nx(t.ct,s));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map(s=>Nx(t.ct,s)),i=pt.fromMillis(e.localWriteTimeMs);return new sI(e.batchId,i,n,r)}function Nd(t){const e=Ya(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Ya(t.lastLimboFreeSnapshotVersion):de.min();let r;return r=function(s){return s.documents!==void 0}(t.query)?function(s){return ue(s.documents.length===1),Yn(bu(Yj(s.documents[0])))}(t.query):function(s){return Yn(t$(s))}(t.query),new ss(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,en.fromBase64String(t.resumeToken))}function o$(t,e){const n=Qa(e.snapshotVersion),r=Qa(e.lastLimboFreeSnapshotVersion);let i;i=uy(e.target)?Zj(t.ct,e.target):e$(t.ct,e.target).ut;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:qa(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function uI(t){const e=t$({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?hy(e,e.limit,"L"):e}function aw(t,e){return new aI(e.largestBatchId,Nx(t.ct,e.overlayMutation))}function nA(t,e){const n=e.path.lastSegment();return[t,Qn(e.path.popLast()),n]}function rA(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:Qa(r.readTime),documentKey:Qn(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ene{getBundleMetadata(e,n){return iA(e).get(n).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:Ya(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,n){return iA(e).put(function(i){return{bundleId:i.id,createTime:Qa(zt(i.createTime)),version:i.version}}(n))}getNamedQuery(e,n){return sA(e).get(n).next(r=>{if(r)return function(s){return{name:s.name,query:uI(s.bundledQuery),readTime:Ya(s.readTime)}}(r)})}saveNamedQuery(e,n){return sA(e).put(function(i){return{name:i.name,readTime:Qa(zt(i.readTime)),bundledQuery:i.bundledQuery}}(n))}}function iA(t){return pn(t,"bundles")}function sA(t){return pn(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mv{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){const r=n.uid||"";return new mv(e,r)}getOverlay(e,n){return ed(e).get(nA(this.userId,n)).next(r=>r?aw(this.serializer,r):null)}getOverlays(e,n){const r=Di();return N.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((s,o)=>{const a=new aI(n,o);i.push(this.ht(e,a))}),N.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(o=>i.add(Qn(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(ed(e).H("collectionPathOverlayIndex",a))}),N.waitFor(s)}getOverlaysForCollection(e,n,r){const i=Di(),s=Qn(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return ed(e).W("collectionPathOverlayIndex",o).next(a=>{for(const l of a){const c=aw(this.serializer,l);i.set(c.getKey(),c)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const s=Di();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return ed(e).Y({index:"collectionGroupOverlayIndex",range:a},(l,c,u)=>{const d=aw(this.serializer,c);s.size()<i||d.largestBatchId===o?(s.set(d.getKey(),d),o=d.largestBatchId):u.done()}).next(()=>s)}ht(e,n){return ed(e).put(function(i,s,o){const[a,l,c]=nA(s,o.mutation.key);return{userId:s,collectionPath:l,documentId:c,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:hf(i.ct,o.mutation)}}(this.serializer,this.userId,n))}}function ed(t){return pn(t,"documentOverlays")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(){}Pt(e,n){this.It(e,n),n.Tt()}It(e,n){if("nullValue"in e)this.Et(n,5);else if("booleanValue"in e)this.Et(n,10),n.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(n,15),n.dt(At(e.integerValue));else if("doubleValue"in e){const r=At(e.doubleValue);isNaN(r)?this.Et(n,13):(this.Et(n,15),of(r)?n.dt(0):n.dt(r))}else if("timestampValue"in e){const r=e.timestampValue;this.Et(n,20),typeof r=="string"?n.At(r):(n.At(`${r.seconds||""}`),n.dt(r.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,n),this.Vt(n);else if("bytesValue"in e)this.Et(n,30),n.ft(So(e.bytesValue)),this.Vt(n);else if("referenceValue"in e)this.gt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Et(n,45),n.dt(r.latitude||0),n.dt(r.longitude||0)}else"mapValue"in e?yj(e)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,n),this.Vt(n)):"arrayValue"in e?(this.wt(e.arrayValue,n),this.Vt(n)):se()}Rt(e,n){this.Et(n,25),this.St(e,n)}St(e,n){n.At(e)}yt(e,n){const r=e.fields||{};this.Et(n,55);for(const i of Object.keys(r))this.Rt(i,n),this.It(r[i],n)}wt(e,n){const r=e.values||[];this.Et(n,50);for(const i of r)this.It(i,n)}gt(e,n){this.Et(n,37),J.fromName(e).path.forEach(r=>{this.Et(n,60),this.St(r,n)})}Et(e,n){e.dt(n)}Vt(e){e.dt(2)}}ua.bt=new ua;function Tne(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function oA(t){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=Tne(255&r[s]);if(i+=o,o!==8)break}return i}(t);return Math.ceil(e/8)}class Ine{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ct(r.value),r=n.next();this.vt()}Ft(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Mt(r.value),r=n.next();this.xt()}Ot(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ct(r);else if(r<2048)this.Ct(960|r>>>6),this.Ct(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ct(480|r>>>12),this.Ct(128|63&r>>>6),this.Ct(128|63&r);else{const i=n.codePointAt(0);this.Ct(240|i>>>18),this.Ct(128|63&i>>>12),this.Ct(128|63&i>>>6),this.Ct(128|63&i)}}this.vt()}Nt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Mt(r);else if(r<2048)this.Mt(960|r>>>6),this.Mt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Mt(480|r>>>12),this.Mt(128|63&r>>>6),this.Mt(128|63&r);else{const i=n.codePointAt(0);this.Mt(240|i>>>18),this.Mt(128|63&i>>>12),this.Mt(128|63&i>>>6),this.Mt(128|63&i)}}this.xt()}Lt(e){const n=this.Bt(e),r=oA(n);this.kt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}qt(e){const n=this.Bt(e),r=oA(n);this.kt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Bt(e){const n=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Ct(e){const n=255&e;n===0?(this.Kt(0),this.Kt(255)):n===255?(this.Kt(255),this.Kt(0)):this.Kt(n)}Mt(e){const n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class Cne{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Lt(e)}Tt(){this.Gt.Qt()}}class Rne{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}}class td{constructor(){this.Gt=new Ine,this.zt=new Cne(this.Gt),this.jt=new Rne(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return e===0?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Jt(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new da(this.indexId,this.documentKey,this.arrayValue,r)}}function Vs(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=aA(t.arrayValue,e.arrayValue),n!==0?n:(n=aA(t.directionalValue,e.directionalValue),n!==0?n:J.comparator(t.documentKey,e.documentKey)))}function aA(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{constructor(e){this.Yt=new Je((n,r)=>wt.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(const n of e.filters){const r=n;r.isInequality()?this.Yt=this.Yt.add(r):this.Xt.push(r)}}get en(){return this.Yt.size>1}tn(e){if(ue(e.collectionGroup===this.collectionId),this.en)return!1;const n=wx(e);if(n!==void 0&&!this.nn(n))return!1;const r=ra(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.nn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Yt.size>0){const a=this.Yt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const l=r[s];if(!this.rn(a,l)||!this.sn(this.Zt[o++],l))return!1}++s}for(;s<r.length;++s){const a=r[s];if(o>=this.Zt.length||!this.sn(this.Zt[o++],a))return!1}return!0}on(){if(this.en)return null;let e=new Je(wt.comparator);const n=[];for(const r of this.Xt)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new Jg(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Jg(r.field,0))}for(const r of this.Zt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Jg(r.field,r.dir==="asc"?0:1)));return new cy(cy.UNKNOWN_ID,this.collectionId,n,sf.empty())}nn(e){for(const n of this.Xt)if(this.rn(n,e))return!0;return!1}rn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}sn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a$(t){var e,n;if(ue(t instanceof Pe||t instanceof qe),t instanceof Pe){if(t instanceof Tj){const i=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(s=>Pe.create(t.field,"==",s)))||[];return qe.create(i,"or")}return t}const r=t.filters.map(i=>a$(i));return qe.create(r,t.op)}function kne(t){if(t.getFilters().length===0)return[];const e=Mx(a$(t));return ue(l$(e)),Dx(e)||Ox(e)?[e]:e.getFilters()}function Dx(t){return t instanceof Pe}function Ox(t){return t instanceof qe&&tI(t)}function l$(t){return Dx(t)||Ox(t)||function(n){if(n instanceof qe&&Tx(n)){for(const r of n.getFilters())if(!Dx(r)&&!Ox(r))return!1;return!0}return!1}(t)}function Mx(t){if(ue(t instanceof Pe||t instanceof qe),t instanceof Pe)return t;if(t.filters.length===1)return Mx(t.filters[0]);const e=t.filters.map(r=>Mx(r));let n=qe.create(e,t.op);return n=py(n),l$(n)?n:(ue(n instanceof qe),ue(Wc(n)),ue(n.filters.length>1),n.filters.reduce((r,i)=>dI(r,i)))}function dI(t,e){let n;return ue(t instanceof Pe||t instanceof qe),ue(e instanceof Pe||e instanceof qe),n=t instanceof Pe?e instanceof Pe?function(i,s){return qe.create([i,s],"and")}(t,e):cA(t,e):e instanceof Pe?cA(e,t):function(i,s){if(ue(i.filters.length>0&&s.filters.length>0),Wc(i)&&Wc(s))return xj(i,s.getFilters());const o=Tx(i)?i:s,a=Tx(i)?s:i,l=o.filters.map(c=>dI(c,a));return qe.create(l,"or")}(t,e),py(n)}function cA(t,e){if(Wc(e))return xj(e,t.getFilters());{const n=e.filters.map(r=>dI(t,r));return qe.create(n,"or")}}function py(t){if(ue(t instanceof Pe||t instanceof qe),t instanceof Pe)return t;const e=t.getFilters();if(e.length===1)return py(e[0]);if(wj(t))return t;const n=e.map(i=>py(i)),r=[];return n.forEach(i=>{i instanceof Pe?r.push(i):i instanceof qe&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:qe.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ane{constructor(){this._n=new hI}addToCollectionParentIndex(e,n){return this._n.add(n),N.resolve()}getCollectionParents(e,n){return N.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return N.resolve()}deleteFieldIndex(e,n){return N.resolve()}deleteAllFieldIndexes(e){return N.resolve()}createTargetIndexes(e,n){return N.resolve()}getDocumentsMatchingTarget(e,n){return N.resolve(null)}getIndexType(e,n){return N.resolve(0)}getFieldIndexes(e,n){return N.resolve([])}getNextCollectionGroupToUpdate(e){return N.resolve(null)}getMinOffset(e,n){return N.resolve(Ar.min())}getMinOffsetFromCollectionGroup(e,n){return N.resolve(Ar.min())}updateCollectionGroup(e,n,r){return N.resolve()}updateIndexEntries(e,n){return N.resolve()}}class hI{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Je(Ae.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Je(Ae.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ag=new Uint8Array(0);class Pne{constructor(e,n){this.databaseId=n,this.an=new hI,this.un=new qo(r=>qa(r),(r,i)=>cp(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.an.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.an.add(n)});const s={collectionId:r,parent:Qn(i)};return uA(e).put(s)}return N.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[sj(n),""],!1,!0);return uA(e).W(i).next(s=>{for(const o of s){if(o.collectionId!==n)break;r.push(Ni(o.parent))}return r})}addFieldIndex(e,n){const r=nd(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(n);delete i.indexId;const s=r.add(i);if(n.indexState){const o=Nl(e);return s.next(a=>{o.put(rA(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const r=nd(e),i=Nl(e),s=Pl(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=nd(e),r=Pl(e),i=Nl(e);return n.H().next(()=>r.H()).next(()=>i.H())}createTargetIndexes(e,n){return N.forEach(this.cn(n),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){const s=new lA(r).on();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,n){const r=Pl(e);let i=!0;const s=new Map;return N.forEach(this.cn(n),o=>this.ln(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=Ie();const a=[];return N.forEach(s,(l,c)=>{W("IndexedDbIndexManager",`Using index ${function(w){return`id=${w.indexId}|cg=${w.collectionGroup}|f=${w.fields.map(b=>`${b.fieldPath}:${b.kind}`).join(",")}`}(l)} to execute ${qa(n)}`);const u=function(w,b){const x=wx(b);if(x===void 0)return null;for(const T of dy(w,x.fieldPath))switch(T.op){case"array-contains-any":return T.value.arrayValue.values||[];case"array-contains":return[T.value]}return null}(c,l),d=function(w,b){const x=new Map;for(const T of ra(b))for(const I of dy(w,T.fieldPath))switch(I.op){case"==":case"in":x.set(T.fieldPath.canonicalString(),I.value);break;case"not-in":case"!=":return x.set(T.fieldPath.canonicalString(),I.value),Array.from(x.values())}return null}(c,l),h=function(w,b){const x=[];let T=!0;for(const I of ra(b)){const E=I.kind===0?Bk(w,I.fieldPath,w.startAt):zk(w,I.fieldPath,w.startAt);x.push(E.value),T&&(T=E.inclusive)}return new Io(x,T)}(c,l),f=function(w,b){const x=[];let T=!0;for(const I of ra(b)){const E=I.kind===0?zk(w,I.fieldPath,w.endAt):Bk(w,I.fieldPath,w.endAt);x.push(E.value),T&&(T=E.inclusive)}return new Io(x,T)}(c,l),g=this.hn(l,c,h),m=this.hn(l,c,f),v=this.Pn(l,c,d),_=this.In(l.indexId,u,g,h.inclusive,m,f.inclusive,v);return N.forEach(_,y=>r.j(y,n.limit).next(w=>{w.forEach(b=>{const x=J.fromSegments(b.documentKey);o.has(x)||(o=o.add(x),a.push(x))})}))}).next(()=>a)}return N.resolve(null)})}cn(e){let n=this.un.get(e);return n||(e.filters.length===0?n=[e]:n=kne(qe.create(e.filters,"and")).map(r=>Cx(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,n),n)}In(e,n,r,i,s,o,a){const l=(n!=null?n.length:1)*Math.max(r.length,s.length),c=l/(n!=null?n.length:1),u=[];for(let d=0;d<l;++d){const h=n?this.Tn(n[d/c]):ag,f=this.En(e,h,r[d%c],i),g=this.dn(e,h,s[d%c],o),m=a.map(v=>this.En(e,h,v,!0));u.push(...this.createRange(f,g,m))}return u}En(e,n,r,i){const s=new da(e,J.empty(),n,r);return i?s:s.Jt()}dn(e,n,r,i){const s=new da(e,J.empty(),n,r);return i?s.Jt():s}ln(e,n){const r=new lA(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.tn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const i=this.cn(n);return N.forEach(i,s=>this.ln(e,s).next(o=>{o?r!==0&&o.fields.length<function(l){let c=new Je(wt.comparator),u=!1;for(const d of l.filters)for(const h of d.getFlattenedFilters())h.field.isKeyField()||(h.op==="array-contains"||h.op==="array-contains-any"?u=!0:c=c.add(h.field));for(const d of l.orderBy)d.field.isKeyField()||(c=c.add(d.field));return c.size+(u?1:0)}(s)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&i.length>1&&r===2?1:r)}An(e,n){const r=new td;for(const i of ra(e)){const s=n.data.field(i.fieldPath);if(s==null)return null;const o=r.Ht(i.kind);ua.bt.Pt(s,o)}return r.Wt()}Tn(e){const n=new td;return ua.bt.Pt(e,n.Ht(0)),n.Wt()}Rn(e,n){const r=new td;return ua.bt.Pt(Ha(this.databaseId,n),r.Ht(function(s){const o=ra(s);return o.length===0?0:o[o.length-1].kind}(e))),r.Wt()}Pn(e,n,r){if(r===null)return[];let i=[];i.push(new td);let s=0;for(const o of ra(e)){const a=r[s++];for(const l of i)if(this.Vn(n,o.fieldPath)&&cf(a))i=this.mn(i,o,a);else{const c=l.Ht(o.kind);ua.bt.Pt(a,c)}}return this.fn(i)}hn(e,n,r){return this.Pn(e,n,r.position)}fn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].Wt();return n}mn(e,n,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const l=new td;l.seed(a.Wt()),ua.bt.Pt(o,l.Ht(n.kind)),s.push(l)}return s}Vn(e,n){return!!e.filters.find(r=>r instanceof Pe&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=nd(e),i=Nl(e);return(n?r.W("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.W()).next(s=>{const o=[];return N.forEach(s,a=>i.get([a.indexId,this.uid]).next(l=>{o.push(function(u,d){const h=d?new sf(d.sequenceNumber,new Ar(Ya(d.readTime),new J(Ni(d.documentKey)),d.largestBatchId)):sf.empty(),f=u.fields.map(([g,m])=>new Jg(wt.fromServerFormat(g),m));return new cy(u.indexId,u.collectionGroup,f,h)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:Se(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=nd(e),s=Nl(e);return this.gn(e).next(o=>i.W("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>N.forEach(a,l=>s.put(rA(l.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){const r=new Map;return N.forEach(n,(i,s)=>{const o=r.get(i.collectionGroup);return(o?N.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),N.forEach(a,l=>this.pn(e,i,l).next(c=>{const u=this.yn(s,l);return c.isEqual(u)?N.resolve():this.wn(e,s,l,c,u)}))))})}Sn(e,n,r,i){return Pl(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.Rn(r,n.key),documentKey:n.key.path.toArray()})}bn(e,n,r,i){return Pl(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.Rn(r,n.key),n.key.path.toArray()])}pn(e,n,r){const i=Pl(e);let s=new Je(Vs);return i.Y({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.Rn(r,n)])},(o,a)=>{s=s.add(new da(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>s)}yn(e,n){let r=new Je(Vs);const i=this.An(n,e);if(i==null)return r;const s=wx(n);if(s!=null){const o=e.data.field(s.fieldPath);if(cf(o))for(const a of o.arrayValue.values||[])r=r.add(new da(n.indexId,e.key,this.Tn(a),i))}else r=r.add(new da(n.indexId,e.key,ag,i));return r}wn(e,n,r,i,s){W("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const o=[];return function(l,c,u,d,h){const f=l.getIterator(),g=c.getIterator();let m=Al(f),v=Al(g);for(;m||v;){let _=!1,y=!1;if(m&&v){const w=u(m,v);w<0?y=!0:w>0&&(_=!0)}else m!=null?y=!0:_=!0;_?(d(v),v=Al(g)):y?(h(m),m=Al(f)):(m=Al(f),v=Al(g))}}(i,s,Vs,a=>{o.push(this.Sn(e,n,r,a))},a=>{o.push(this.bn(e,n,r,a))}),N.waitFor(o)}gn(e){let n=1;return Nl(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>Vs(o,a)).filter((o,a,l)=>!a||Vs(o,l[a-1])!==0);const i=[];i.push(e);for(const o of r){const a=Vs(o,e),l=Vs(o,n);if(a===0)i[0]=e.Jt();else if(a>0&&l<0)i.push(o),i.push(o.Jt());else if(l>0)break}i.push(n);const s=[];for(let o=0;o<i.length;o+=2){if(this.Dn(i[o],i[o+1]))return[];const a=[i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,ag,[]],l=[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,ag,[]];s.push(IDBKeyRange.bound(a,l))}return s}Dn(e,n){return Vs(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(dA)}getMinOffset(e,n){return N.mapArray(this.cn(n),r=>this.ln(e,r).next(i=>i||se())).next(dA)}}function uA(t){return pn(t,"collectionParents")}function Pl(t){return pn(t,"indexEntries")}function nd(t){return pn(t,"indexConfiguration")}function Nl(t){return pn(t,"indexState")}function dA(t){ue(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;JT(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Ar(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hA={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ir{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new ir(e,ir.DEFAULT_COLLECTION_PERCENTILE,ir.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c$(t,e,n){const r=t.store("mutations"),i=t.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.Y({range:o},(u,d,h)=>(a++,h.delete()));s.push(l.next(()=>{ue(a===1)}));const c=[];for(const u of n.mutations){const d=dj(e,u.key.path,n.batchId);s.push(i.delete(d)),c.push(u.key)}return N.waitFor(s).next(()=>c)}function gy(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw se();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ir.DEFAULT_COLLECTION_PERCENTILE=10,ir.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ir.DEFAULT=new ir(41943040,ir.DEFAULT_COLLECTION_PERCENTILE,ir.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ir.DISABLED=new ir(-1,0,0);class yv{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Cn={}}static lt(e,n,r,i){ue(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new yv(s,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Fs(e).Y({index:"userMutationsIndex",range:r},(i,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const s=Wl(e),o=Fs(e);return o.add({}).next(a=>{ue(typeof a=="number");const l=new sI(a,n,r,i),c=function(f,g,m){const v=m.baseMutations.map(y=>hf(f.ct,y)),_=m.mutations.map(y=>hf(f.ct,y));return{userId:g,batchId:m.batchId,localWriteTimeMs:m.localWriteTime.toMillis(),baseMutations:v,mutations:_}}(this.serializer,this.userId,l),u=[];let d=new Je((h,f)=>Se(h.canonicalString(),f.canonicalString()));for(const h of i){const f=dj(this.userId,h.key.path,a);d=d.add(h.key.path.popLast()),u.push(o.put(c)),u.push(s.put(f,vte))}return d.forEach(h=>{u.push(this.indexManager.addToCollectionParentIndex(e,h))}),e.addOnCommittedListener(()=>{this.Cn[a]=l.keys()}),N.waitFor(u).next(()=>l)})}lookupMutationBatch(e,n){return Fs(e).get(n).next(r=>r?(ue(r.userId===this.userId),ca(this.serializer,r)):null)}vn(e,n){return this.Cn[n]?N.resolve(this.Cn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.Cn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return Fs(e).Y({index:"userMutationsIndex",range:i},(o,a,l)=>{a.userId===this.userId&&(ue(a.batchId>=r),s=ca(this.serializer,a)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Fs(e).Y({index:"userMutationsIndex",range:n,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Fs(e).W("userMutationsIndex",n).next(r=>r.map(i=>ca(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=Zg(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return Wl(e).Y({range:i},(o,a,l)=>{const[c,u,d]=o,h=Ni(u);if(c===this.userId&&n.path.isEqual(h))return Fs(e).get(d).next(f=>{if(!f)throw se();ue(f.userId===this.userId),s.push(ca(this.serializer,f))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Je(Se);const i=[];return n.forEach(s=>{const o=Zg(this.userId,s.path),a=IDBKeyRange.lowerBound(o),l=Wl(e).Y({range:a},(c,u,d)=>{const[h,f,g]=c,m=Ni(f);h===this.userId&&s.path.isEqual(m)?r=r.add(g):d.done()});i.push(l)}),N.waitFor(i).next(()=>this.Fn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,s=Zg(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new Je(Se);return Wl(e).Y({range:o},(l,c,u)=>{const[d,h,f]=l,g=Ni(h);d===this.userId&&r.isPrefixOf(g)?g.length===i&&(a=a.add(f)):u.done()}).next(()=>this.Fn(e,a))}Fn(e,n){const r=[],i=[];return n.forEach(s=>{i.push(Fs(e).get(s).next(o=>{if(o===null)throw se();ue(o.userId===this.userId),r.push(ca(this.serializer,o))}))}),N.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return c$(e.ae,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.Mn(n.batchId)}),N.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return N.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return Wl(e).Y({range:r},(s,o,a)=>{if(s[0]===this.userId){const l=Ni(s[1]);i.push(l)}else a.done()}).next(()=>{ue(i.length===0)})})}containsKey(e,n){return u$(e,this.userId,n)}xn(e){return d$(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function u$(t,e,n){const r=Zg(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return Wl(t).Y({range:s,J:!0},(a,l,c)=>{const[u,d,h]=a;u===e&&d===i&&(o=!0),c.done()}).next(()=>o)}function Fs(t){return pn(t,"mutations")}function Wl(t){return pn(t,"documentMutations")}function d$(t){return pn(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new Xa(0)}static Ln(){return new Xa(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nne{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Bn(e).next(n=>{const r=new Xa(n.highestTargetId);return n.highestTargetId=r.next(),this.kn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(n=>de.fromTimestamp(new pt(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.Bn(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.kn(e,i)))}addTargetData(e,n){return this.qn(e,n).next(()=>this.Bn(e).next(r=>(r.targetCount+=1,this.Qn(n,r),this.kn(e,r))))}updateTargetData(e,n){return this.qn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Dl(e).delete(n.targetId)).next(()=>this.Bn(e)).next(r=>(ue(r.targetCount>0),r.targetCount-=1,this.kn(e,r)))}removeTargets(e,n,r){let i=0;const s=[];return Dl(e).Y((o,a)=>{const l=Nd(a);l.sequenceNumber<=n&&r.get(l.targetId)===null&&(i++,s.push(this.removeTargetData(e,l)))}).next(()=>N.waitFor(s)).next(()=>i)}forEachTarget(e,n){return Dl(e).Y((r,i)=>{const s=Nd(i);n(s)})}Bn(e){return fA(e).get("targetGlobalKey").next(n=>(ue(n!==null),n))}kn(e,n){return fA(e).put("targetGlobalKey",n)}qn(e,n){return Dl(e).put(o$(this.serializer,n))}Qn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Bn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=qa(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return Dl(e).Y({range:i,index:"queryTargetsIndex"},(o,a,l)=>{const c=Nd(a);cp(n,c.target)&&(s=c,l.done())}).next(()=>s)}addMatchingKeys(e,n,r){const i=[],s=Hs(e);return n.forEach(o=>{const a=Qn(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),N.waitFor(i)}removeMatchingKeys(e,n,r){const i=Hs(e);return N.forEach(n,s=>{const o=Qn(s.path);return N.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){const r=Hs(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Hs(e);let s=Ie();return i.Y({range:r,J:!0},(o,a,l)=>{const c=Ni(o[1]),u=new J(c);s=s.add(u)}).next(()=>s)}containsKey(e,n){const r=Qn(n.path),i=IDBKeyRange.bound([r],[sj(r)],!1,!0);let s=0;return Hs(e).Y({index:"documentTargetsIndex",J:!0,range:i},([o,a],l,c)=>{o!==0&&(s++,c.done())}).next(()=>s>0)}_t(e,n){return Dl(e).get(n).next(r=>r?Nd(r):null)}}function Dl(t){return pn(t,"targets")}function fA(t){return pn(t,"targetGlobal")}function Hs(t){return pn(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pA([t,e],[n,r]){const i=Se(t,n);return i===0?Se(e,r):i}class Dne{constructor(e){this.Kn=e,this.buffer=new Je(pA),this.$n=0}Un(){return++this.$n}Wn(e){const n=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();pA(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class One{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Gn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return this.Gn!==null}zn(e){W("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Gn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ho(n)?W("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await Wo(n)}await this.zn(3e5)})}}class Mne{constructor(e,n){this.jn=e,this.params=n}calculateTargetCount(e,n){return this.jn.Hn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return N.resolve(lr._e);const r=new Dne(n);return this.jn.forEachTarget(e,i=>r.Wn(i.sequenceNumber)).next(()=>this.jn.Jn(e,i=>r.Wn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.jn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(W("LruGarbageCollector","Garbage collection skipped; disabled"),N.resolve(hA)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(W("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),hA):this.Yn(e,n))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,n){let r,i,s,o,a,l,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(W("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,o=Date.now(),this.nthSequenceNumber(e,i))).next(d=>(r=d,a=Date.now(),this.removeTargets(e,r,n))).next(d=>(s=d,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(d=>(c=Date.now(),$l()<=ke.DEBUG&&W("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-u}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${d} documents in `+(c-l)+`ms
Total Duration: ${c-u}ms`),N.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:d})))}}function Lne(t,e){return new Mne(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vne{constructor(e,n){this.db=e,this.garbageCollector=Lne(this,n)}Hn(e){const n=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}Zn(e){let n=0;return this.Jn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Jn(e,n){return this.Xn(e,(r,i)=>n(i))}addReference(e,n,r){return lg(e,r)}removeReference(e,n,r){return lg(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return lg(e,n)}er(e,n){return function(i,s){let o=!1;return d$(i).Z(a=>u$(i,a,s).next(l=>(l&&(o=!0),N.resolve(!l)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Xn(e,(o,a)=>{if(a<=n){const l=this.er(e,o).next(c=>{if(!c)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,de.min()),Hs(e).delete(function(d){return[0,Qn(d.path)]}(o))))});i.push(l)}}).next(()=>N.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return lg(e,n)}Xn(e,n){const r=Hs(e);let i,s=lr._e;return r.Y({index:"documentTargetsIndex"},([o,a],{path:l,sequenceNumber:c})=>{o===0?(s!==lr._e&&n(new J(Ni(i)),s),s=c,i=l):s=lr._e}).next(()=>{s!==lr._e&&n(new J(Ni(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function lg(t,e){return Hs(t).put(function(r,i){return{targetId:0,path:Qn(r.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h${constructor(){this.changes=new qo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ct.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?N.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fne{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Qo(e).put(r)}removeEntry(e,n,r){return Qo(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],fy(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.tr(e,r)))}getEntry(e,n){let r=ct.newInvalidDocument(n);return Qo(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(rd(n))},(i,s)=>{r=this.nr(n,s)}).next(()=>r)}rr(e,n){let r={size:0,document:ct.newInvalidDocument(n)};return Qo(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(rd(n))},(i,s)=>{r={document:this.nr(n,s),size:gy(s)}}).next(()=>r)}getEntries(e,n){let r=ur();return this.ir(e,n,(i,s)=>{const o=this.nr(i,s);r=r.insert(i,o)}).next(()=>r)}sr(e,n){let r=ur(),i=new Ct(J.comparator);return this.ir(e,n,(s,o)=>{const a=this.nr(s,o);r=r.insert(s,a),i=i.insert(s,gy(o))}).next(()=>({documents:r,_r:i}))}ir(e,n,r){if(n.isEmpty())return N.resolve();let i=new Je(yA);n.forEach(l=>i=i.add(l));const s=IDBKeyRange.bound(rd(i.first()),rd(i.last())),o=i.getIterator();let a=o.getNext();return Qo(e).Y({index:"documentKeyIndex",range:s},(l,c,u)=>{const d=J.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&yA(a,d)<0;)r(a,null),a=o.getNext();a&&a.isEqual(d)&&(r(a,c),a=o.hasNext()?o.getNext():null),a?u.U(rd(a)):u.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,s){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),fy(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Qo(e).W(IDBKeyRange.bound(a,l,!0)).next(c=>{s==null||s.incrementDocumentReadCount(c.length);let u=ur();for(const d of c){const h=this.nr(J.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);h.isFoundDocument()&&(dp(n,h)||i.has(h.key))&&(u=u.insert(h.key,h))}return u})}getAllFromCollectionGroup(e,n,r,i){let s=ur();const o=mA(n,r),a=mA(n,Ar.max());return Qo(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(l,c,u)=>{const d=this.nr(J.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);s=s.insert(d.key,d),s.size===i&&u.done()}).next(()=>s)}newChangeBuffer(e){return new jne(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return gA(e).get("remoteDocumentGlobalKey").next(n=>(ue(!!n),n))}tr(e,n){return gA(e).put("remoteDocumentGlobalKey",n)}nr(e,n){if(n){const r=Sne(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(de.min())))return r}return ct.newInvalidDocument(e)}}function f$(t){return new Fne(t)}class jne extends h${constructor(e,n){super(),this.ar=e,this.trackRemovals=n,this.ur=new qo(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new Je((s,o)=>Se(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.ur.get(s);if(n.push(this.ar.removeEntry(e,s,a.readTime)),o.isValidDocument()){const l=tA(this.ar.serializer,o);i=i.add(s.path.popLast());const c=gy(l);r+=c-a.size,n.push(this.ar.addEntry(e,s,l))}else if(r-=a.size,this.trackRemovals){const l=tA(this.ar.serializer,o.convertToNoDocument(de.min()));n.push(this.ar.addEntry(e,s,l))}}),i.forEach(s=>{n.push(this.ar.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.ar.updateMetadata(e,r)),N.waitFor(n)}getFromCache(e,n){return this.ar.rr(e,n).next(r=>(this.ur.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.ar.sr(e,n).next(({documents:r,_r:i})=>(i.forEach((s,o)=>{this.ur.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function gA(t){return pn(t,"remoteDocumentGlobal")}function Qo(t){return pn(t,"remoteDocumentsV14")}function rd(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function mA(t,e){const n=e.documentKey.path.toArray();return[t,fy(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function yA(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=Se(n[s],r[s]),i)return i;return i=Se(n.length,r.length),i||(i=Se(n[n.length-2],r[r.length-2]),i||Se(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $ne{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p${constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&oh(r.mutation,i,cr.empty(),pt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ie()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ie()){const i=Di();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Ad();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Di();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ie()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=ur();const o=sh(),a=function(){return sh()}();return n.forEach((l,c)=>{const u=r.get(c.key);i.has(c.key)&&(u===void 0||u.mutation instanceof As)?s=s.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),oh(u.mutation,c,u.mutation.getFieldMask(),pt.now())):o.set(c.key,cr.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,u)=>o.set(c,u)),n.forEach((c,u)=>{var d;return a.set(c,new $ne(u,(d=o.get(c))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){const r=sh();let i=new Ct((o,a)=>o-a),s=Ie();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let u=r.get(l)||cr.empty();u=a.applyToLocalView(c,u),r.set(l,u);const d=(i.get(a.batchId)||Ie()).add(l);i=i.insert(a.batchId,d)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,d=Nj();u.forEach(h=>{if(!s.has(h)){const f=$j(n.get(h),r.get(h));f!==null&&d.set(h,f),s=s.add(h)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return N.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return J.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):nI(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):N.resolve(Di());let a=-1,l=s;return o.next(c=>N.forEach(c,(u,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(u)?N.resolve():this.remoteDocumentCache.getEntry(e,u).next(h=>{l=l.insert(u,h)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,Ie())).next(u=>({batchId:a,changes:Pj(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new J(n)).next(r=>{let i=Ad();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Ad();return this.indexManager.getCollectionParents(e,s).next(a=>N.forEach(a,l=>{const c=function(d,h){return new ks(h,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(u=>{u.forEach((d,h)=>{o=o.insert(d,h)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,c)=>{const u=c.getKey();o.get(u)===null&&(o=o.insert(u,ct.newInvalidDocument(u)))});let a=Ad();return o.forEach((l,c)=>{const u=s.get(l);u!==void 0&&oh(u.mutation,c,cr.empty(),pt.now()),dp(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Une{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return N.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:zt(i.createTime)}}(n)),N.resolve()}getNamedQuery(e,n){return N.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(i){return{name:i.name,query:uI(i.bundledQuery),readTime:zt(i.readTime)}}(n)),N.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bne{constructor(){this.overlays=new Ct(J.comparator),this.hr=new Map}getOverlay(e,n){return N.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Di();return N.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),N.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),N.resolve()}getOverlaysForCollection(e,n,r){const i=Di(),s=n.length+1,o=new J(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return N.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ct((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let u=s.get(c.largestBatchId);u===null&&(u=Di(),s=s.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=Di(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=i)););return N.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new aI(n,r));let s=this.hr.get(n);s===void 0&&(s=Ie(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fI{constructor(){this.Pr=new Je(rn.Ir),this.Tr=new Je(rn.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){const r=new rn(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new rn(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){const n=new J(new Ae([])),r=new rn(n,e),i=new rn(n,e+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const n=new J(new Ae([])),r=new rn(n,e),i=new rn(n,e+1);let s=Ie();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new rn(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class rn{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return J.comparator(e.key,n.key)||Se(e.pr,n.pr)}static Er(e,n){return Se(e.pr,n.pr)||J.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zne{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Je(rn.Ir)}checkEmpty(e){return N.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new sI(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.wr=this.wr.add(new rn(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return N.resolve(o)}lookupMutationBatch(e,n){return N.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.br(r),s=i<0?0:i;return N.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return N.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return N.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new rn(n,0),i=new rn(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{const a=this.Sr(o.pr);s.push(a)}),N.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Je(Se);return n.forEach(i=>{const s=new rn(i,0),o=new rn(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),N.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;J.isDocumentKey(s)||(s=s.child(""));const o=new rn(new J(s),0);let a=new Je(Se);return this.wr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.pr)),!0)},o),N.resolve(this.Dr(a))}Dr(e){const n=[];return e.forEach(r=>{const i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){ue(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return N.forEach(n.mutations,i=>{const s=new rn(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){const r=new rn(n,0),i=this.wr.firstAfterOrEqual(r);return N.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,N.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){const n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wne{constructor(e){this.vr=e,this.docs=function(){return new Ct(J.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return N.resolve(r?r.document.mutableCopy():ct.newInvalidDocument(n))}getEntries(e,n){let r=ur();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():ct.newInvalidDocument(i))}),N.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=ur();const o=n.path,a=new J(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||JT(aj(u),r)<=0||(i.has(u.key)||dp(n,u))&&(s=s.insert(u.key,u.mutableCopy()))}return N.resolve(s)}getAllFromCollectionGroup(e,n,r,i){se()}Fr(e,n){return N.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Hne(this)}getSize(e){return N.resolve(this.size)}}class Hne extends h${constructor(e){super(),this.ar=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),N.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qne{constructor(e){this.persistence=e,this.Mr=new qo(n=>qa(n),cp),this.lastRemoteSnapshotVersion=de.min(),this.highestTargetId=0,this.Or=0,this.Nr=new fI,this.targetCount=0,this.Lr=Xa.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,i)=>n(i)),N.resolve()}getLastRemoteSnapshotVersion(e){return N.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return N.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),N.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),N.resolve()}qn(e){this.Mr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Lr=new Xa(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,N.resolve()}updateTargetData(e,n){return this.qn(n),N.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,N.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),N.waitFor(s).next(()=>i)}getTargetCount(e){return N.resolve(this.targetCount)}getTargetData(e,n){const r=this.Mr.get(n)||null;return N.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),N.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),N.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),N.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Nr.gr(n);return N.resolve(r)}containsKey(e,n){return N.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g${constructor(e,n){this.Br={},this.overlays={},this.kr=new lr(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new qne(this),this.indexManager=new Ane,this.remoteDocumentCache=function(i){return new Wne(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new s$(n),this.$r=new Une(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Bne,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new zne(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){W("MemoryPersistence","Starting transaction:",e);const i=new Gne(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(e,n){return N.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}}class Gne extends cj{constructor(e){super(),this.currentSequenceNumber=e}}class _v{constructor(e){this.persistence=e,this.zr=new fI,this.jr=null}static Hr(e){return new _v(e)}get Jr(){if(this.jr)return this.jr;throw se()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),N.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),N.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),N.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return N.forEach(this.Jr,r=>{const i=J.fromPath(r);return this.Yr(e,i).next(s=>{s||n.removeEntry(i,de.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return N.or([()=>N.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kne{constructor(e){this.serializer=e}N(e,n,r,i){const s=new hv("createOrUpgrade",n);r<1&&i>=1&&(function(l){l.createObjectStore("owner")}(e),function(l){l.createObjectStore("mutationQueues",{keyPath:"userId"}),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Nk,{unique:!0}),l.createObjectStore("documentMutations")}(e),_A(e),function(l){l.createObjectStore("remoteDocuments")}(e));let o=N.resolve();return r<3&&i>=3&&(r!==0&&(function(l){l.deleteObjectStore("targetDocuments"),l.deleteObjectStore("targets"),l.deleteObjectStore("targetGlobal")}(e),_A(e)),o=o.next(()=>function(l){const c=l.store("targetGlobal"),u={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:de.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",u)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(l,c){return c.store("mutations").W().next(u=>{l.deleteObjectStore("mutations"),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Nk,{unique:!0});const d=c.store("mutations"),h=u.map(f=>d.put(f));return N.waitFor(h)})}(e,s))),o=o.next(()=>{(function(l){l.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.Xr(s))),r<6&&i>=6&&(o=o.next(()=>(function(l){l.createObjectStore("remoteDocumentGlobal")}(e),this.ei(s)))),r<7&&i>=7&&(o=o.next(()=>this.ti(s))),r<8&&i>=8&&(o=o.next(()=>this.ni(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.ri(s))),r<11&&i>=11&&(o=o.next(()=>{(function(l){l.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(l){l.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(l){const c=l.createObjectStore("documentOverlays",{keyPath:Pte});c.createIndex("collectionPathOverlayIndex",Nte,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",Dte,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(l){const c=l.createObjectStore("remoteDocumentsV14",{keyPath:wte});c.createIndex("documentKeyIndex",bte),c.createIndex("collectionGroupIndex",xte)}(e)).next(()=>this.ii(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.si(e,s))),r<15&&i>=15&&(o=o.next(()=>function(l){l.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),l.createObjectStore("indexState",{keyPath:Cte}).createIndex("sequenceNumberIndex",Rte,{unique:!1}),l.createObjectStore("indexEntries",{keyPath:kte}).createIndex("documentKeyIndex",Ate,{unique:!1})}(e))),o}ei(e){let n=0;return e.store("remoteDocuments").Y((r,i)=>{n+=gy(i)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Xr(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.W().next(i=>N.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",o).next(a=>N.forEach(a,l=>{ue(l.userId===s.userId);const c=ca(this.serializer,l);return c$(e,s.userId,c).next(()=>{})}))}))}ti(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.Y((o,a)=>{const l=new Ae(o),c=function(d){return[0,Qn(d)]}(l);s.push(n.get(c).next(u=>u?N.resolve():(d=>n.put({targetId:0,path:Qn(d),sequenceNumber:i.highestListenSequenceNumber}))(l)))}).next(()=>N.waitFor(s))})}ni(e,n){e.createObjectStore("collectionParents",{keyPath:Ite});const r=n.store("collectionParents"),i=new hI,s=o=>{if(i.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:Qn(l)})}};return n.store("remoteDocuments").Y({J:!0},(o,a)=>{const l=new Ae(o);return s(l.popLast())}).next(()=>n.store("documentMutations").Y({J:!0},([o,a,l],c)=>{const u=Ni(a);return s(u.popLast())}))}ri(e){const n=e.store("targets");return n.Y((r,i)=>{const s=Nd(i),o=o$(this.serializer,s);return n.put(o)})}ii(e,n){const r=n.store("remoteDocuments"),i=[];return r.Y((s,o)=>{const a=n.store("remoteDocumentsV14"),l=function(d){return d.document?new J(Ae.fromString(d.document.name).popFirst(5)):d.noDocument?J.fromSegments(d.noDocument.path):d.unknownDocument?J.fromSegments(d.unknownDocument.path):se()}(o).path.toArray(),c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(c))}).next(()=>N.waitFor(i))}si(e,n){const r=n.store("mutations"),i=f$(this.serializer),s=new g$(_v.Hr,this.serializer.ct);return r.W().next(o=>{const a=new Map;return o.forEach(l=>{var c;let u=(c=a.get(l.userId))!==null&&c!==void 0?c:Ie();ca(this.serializer,l).keys().forEach(d=>u=u.add(d)),a.set(l.userId,u)}),N.forEach(a,(l,c)=>{const u=new on(c),d=mv.lt(this.serializer,u),h=s.getIndexManager(u),f=yv.lt(u,this.serializer,h,s.referenceDelegate);return new p$(i,f,d,h).recalculateAndSaveOverlaysForDocumentKeys(new bx(n,lr._e),l).next()})})}}function _A(t){t.createObjectStore("targetDocuments",{keyPath:Ete}).createIndex("documentTargetsIndex",Tte,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Ste,{unique:!0}),t.createObjectStore("targetGlobal")}const lw="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class pI{constructor(e,n,r,i,s,o,a,l,c,u,d=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.oi=s,this.window=o,this.document=a,this._i=c,this.ai=u,this.ui=d,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=h=>Promise.resolve(),!pI.D())throw new z(L.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Vne(this,i),this.Ti=n+"main",this.serializer=new s$(l),this.Ei=new Ur(this.Ti,this.ui,new Kne(this.serializer)),this.Qr=new Nne(this.referenceDelegate,this.serializer),this.remoteDocumentCache=f$(this.serializer),this.$r=new Ene,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,u===!1&&$t("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new z(L.FAILED_PRECONDITION,lw);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Qr.getHighestSequenceNumber(e))}).then(e=>{this.kr=new lr(e,this._i)}).then(()=>{this.qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}fi(e){return this.Ii=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.B(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget(async()=>{this.started&&await this.Ai()}))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>cg(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(e).next(n=>{n||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(e)).next(n=>this.isPrimary&&!n?this.yi(e).next(()=>!1):!!n&&this.wi(e).next(()=>!0))).catch(e=>{if(Ho(e))return W("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return W("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.oi.enqueueRetryable(()=>this.Ii(e)),this.isPrimary=e})}gi(e){return id(e).get("owner").next(n=>N.resolve(this.Si(n)))}bi(e){return cg(e).delete(this.clientId)}async Di(){if(this.isPrimary&&!this.Ci(this.Pi,18e5)){this.Pi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=pn(n,"clientMetadata");return r.W().next(i=>{const s=this.vi(i,18e5),o=i.filter(a=>s.indexOf(a)===-1);return N.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.di)for(const n of e)this.di.removeItem(this.Fi(n.clientId))}}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?N.resolve(!0):id(e).get("owner").next(n=>{if(n!==null&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)){if(this.Si(n)&&this.networkEnabled)return!0;if(!this.Si(n)){if(!n.allowTabSynchronization)throw new z(L.FAILED_PRECONDITION,lw);return!1}}return!(!this.networkEnabled||!this.inForeground)||cg(e).W().next(r=>this.vi(r,5e3).find(i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&W("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),await this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const n=new bx(e,lr._e);return this.yi(n).next(()=>this.bi(n))}),this.Ei.close(),this.Li()}vi(e,n){return e.filter(r=>this.Ci(r.updateTimeMs,n)&&!this.Mi(r.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>cg(e).W().next(n=>this.vi(n,18e5).map(r=>r.clientId)))}get started(){return this.qr}getMutationQueue(e,n){return yv.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Pne(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return mv.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,n,r){W("IndexedDbPersistence","Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",s=function(l){return l===15?Mte:l===14?pj:l===13?fj:l===12?Ote:l===11?hj:void se()}(this.ui);let o;return this.Ei.runTransaction(e,i,s,a=>(o=new bx(a,this.kr?this.kr.next():lr._e),n==="readwrite-primary"?this.gi(o).next(l=>!!l||this.pi(o)).next(l=>{if(!l)throw $t(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new z(L.FAILED_PRECONDITION,lj);return r(o)}).next(l=>this.wi(o).next(()=>l)):this.ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}ki(e){return id(e).get("owner").next(n=>{if(n!==null&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)&&!this.Si(n)&&!(this.ai||this.allowTabSynchronization&&n.allowTabSynchronization))throw new z(L.FAILED_PRECONDITION,lw)})}wi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return id(e).put("owner",n)}static D(){return Ur.D()}yi(e){const n=id(e);return n.get("owner").next(r=>this.Si(r)?(W("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):N.resolve())}Ci(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||($t(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Ri(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground=this.document.visibilityState==="visible")}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.ci=()=>{this.xi();const n=/(?:Version|Mobile)\/1[456]/;$2()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var n;try{const r=((n=this.di)===null||n===void 0?void 0:n.getItem(this.Fi(e)))!==null;return W("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return $t("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){$t("Failed to set zombie client id.",e)}}Li(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function id(t){return pn(t,"owner")}function cg(t){return pn(t,"clientMetadata")}function gI(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(e,n){let r=Ie(),i=Ie();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new mI(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qne{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m${constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return $2()?8:Ur.v(xt())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ji(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new Qne;return this.Ji(e,n,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(e,n,o,a.size)})}).next(()=>s.result)}Yi(e,n,r,i){return r.documentReadCount<this.Wi?($l()<=ke.DEBUG&&W("QueryEngine","SDK will not create cache indexes for query:",Ul(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),N.resolve()):($l()<=ke.DEBUG&&W("QueryEngine","Query:",Ul(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?($l()<=ke.DEBUG&&W("QueryEngine","The SDK decides to create cache indexes for query:",Ul(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Yn(n))):N.resolve())}ji(e,n){if(Wk(n))return N.resolve(null);let r=Yn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=hy(n,null,"F"),r=Yn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Ie(...s);return this.zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.Zi(n,a);return this.Xi(n,c,o,l.readTime)?this.ji(e,hy(n,null,"F")):this.es(e,c,n,l)}))})))}Hi(e,n,r,i){return Wk(n)||i.isEqual(de.min())?N.resolve(null):this.zi.getDocuments(e,r).next(s=>{const o=this.Zi(n,s);return this.Xi(n,o,r,i)?N.resolve(null):($l()<=ke.DEBUG&&W("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ul(n)),this.es(e,o,n,oj(i,-1)).next(a=>a))})}Zi(e,n){let r=new Je(kj(e));return n.forEach((i,s)=>{dp(e,s)&&(r=r.add(s))}),r}Xi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(e,n,r){return $l()<=ke.DEBUG&&W("QueryEngine","Using full collection scan to execute query:",Ul(n)),this.zi.getDocumentsMatchingQuery(e,n,Ar.min(),r)}es(e,n,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yne{constructor(e,n,r,i){this.persistence=e,this.ts=n,this.serializer=i,this.ns=new Ct(Se),this.rs=new qo(s=>qa(s),cp),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new p$(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}}function y$(t,e,n,r){return new Yne(t,e,n,r)}async function _$(t,e){const n=Z(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n._s(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=Ie();for(const c of i){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of s){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(r,l).next(c=>({us:c,removedBatchIds:o,addedBatchIds:a}))})})}function Xne(t,e){const n=Z(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(a,l,c,u){const d=c.batch,h=d.keys();let f=N.resolve();return h.forEach(g=>{f=f.next(()=>u.getEntry(l,g)).next(m=>{const v=c.docVersions.get(g);ue(v!==null),m.version.compareTo(v)<0&&(d.applyToRemoteDocument(m,c),m.isValidDocument()&&(m.setReadTime(c.commitVersion),u.addEntry(m)))})}),f.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Ie();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function v$(t){const e=Z(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function Jne(t,e){const n=Z(t),r=e.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const a=[];e.targetChanges.forEach((u,d)=>{const h=i.get(d);if(!h)return;a.push(n.Qr.removeMatchingKeys(s,u.removedDocuments,d).next(()=>n.Qr.addMatchingKeys(s,u.addedDocuments,d)));let f=h.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?f=f.withResumeToken(en.EMPTY_BYTE_STRING,de.min()).withLastLimboFreeSnapshotVersion(de.min()):u.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(u.resumeToken,r)),i=i.insert(d,f),function(m,v,_){return m.resumeToken.approximateByteSize()===0||v.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=3e8?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(h,f,u)&&a.push(n.Qr.updateTargetData(s,f))});let l=ur(),c=Ie();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(w$(s,o,e.documentUpdates).next(u=>{l=u.cs,c=u.ls})),!r.isEqual(de.min())){const u=n.Qr.getLastRemoteSnapshotVersion(s).next(d=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(u)}return N.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.ns=i,s))}function w$(t,e,n){let r=Ie(),i=Ie();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=ur();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(de.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):W("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{cs:o,ls:i}})}function Zne(t,e){const n=Z(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Kc(t,e){const n=Z(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,e).next(s=>s?(i=s,N.resolve(i)):n.Qr.allocateTargetId(r).next(o=>(i=new ss(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(e,r.targetId)),r})}async function Qc(t,e,n){const r=Z(t),i=r.ns.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Ho(o))throw o;W("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)}function my(t,e,n){const r=Z(t);let i=de.min(),s=Ie();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,u){const d=Z(l),h=d.rs.get(u);return h!==void 0?N.resolve(d.ns.get(h)):d.Qr.getTargetData(c,u)}(r,o,Yn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ts.getDocumentsMatchingQuery(o,e,n?i:de.min(),n?s:Ie())).next(a=>(S$(r,Rj(e),a),{documents:a,hs:s})))}function b$(t,e){const n=Z(t),r=Z(n.Qr),i=n.ns.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",s=>r._t(s,e).next(o=>o?o.target:null))}function x$(t,e){const n=Z(t),r=n.ss.get(e)||de.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.os.getAllFromCollectionGroup(i,e,oj(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(S$(n,e,i),i))}function S$(t,e,n){let r=t.ss.get(e)||de.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.ss.set(e,r)}async function ere(t,e,n,r){const i=Z(t);let s=Ie(),o=ur();for(const c of n){const u=e.Ps(c.metadata.name);c.document&&(s=s.add(u));const d=e.Is(c);d.setReadTime(e.Ts(c.metadata.readTime)),o=o.insert(u,d)}const a=i.os.newChangeBuffer({trackRemovals:!0}),l=await Kc(i,function(u){return Yn(bu(Ae.fromString(`__bundle__/docs/${u}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",c=>w$(c,a,o).next(u=>(a.apply(c),u)).next(u=>i.Qr.removeMatchingKeysForTargetId(c,l.targetId).next(()=>i.Qr.addMatchingKeys(c,s,l.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(c,u.cs,u.ls)).next(()=>u.cs)))}async function tre(t,e,n=Ie()){const r=await Kc(t,Yn(uI(e.bundledQuery))),i=Z(t);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=zt(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.$r.saveNamedQuery(s,e);const a=r.withResumeToken(en.EMPTY_BYTE_STRING,o);return i.ns=i.ns.insert(a.targetId,a),i.Qr.updateTargetData(s,a).next(()=>i.Qr.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Qr.addMatchingKeys(s,n,r.targetId)).next(()=>i.$r.saveNamedQuery(s,e))})}function vA(t,e){return`firestore_clients_${t}_${e}`}function wA(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function cw(t,e){return`firestore_targets_${t}_${e}`}class yy{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Es(e,n,r){const i=JSON.parse(r);let s,o=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new z(i.error.code,i.error.message))),o?new yy(e,n,i.state,s):($t("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ah{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Es(e,n){const r=JSON.parse(n);let i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new z(r.error.code,r.error.message))),s?new ah(e,r.state,i):($t("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class _y{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Es(e,n){const r=JSON.parse(n);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=rI();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=uj(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new _y(e,s):($t("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class yI{constructor(e,n){this.clientId=e,this.onlineState=n}static Es(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new yI(n.clientId,n.onlineState):($t("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Lx{constructor(){this.activeTargetIds=rI()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class uw{constructor(e,n,r,i,s){this.window=e,this.oi=n,this.persistenceKey=r,this.Vs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new Ct(Se),this.started=!1,this.ys=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ws=vA(this.persistenceKey,this.Vs),this.Ss=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.ps=this.ps.insert(this.Vs,new Lx),this.bs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.vs=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this.Fs=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Bi();for(const r of e){if(r===this.Vs)continue;const i=this.getItem(vA(this.persistenceKey,r));if(i){const s=_y.Es(r,i);s&&(this.ps=this.ps.insert(s.clientId,s))}}this.Ms();const n=this.storage.getItem(this.vs);if(n){const r=this.xs(n);r&&this.Os(r)}for(const r of this.ys)this.gs(r);this.ys=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let n=!1;return this.ps.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Ls(e,"pending")}updateMutationState(e,n,r){this.Ls(e,n,r),this.Bs(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(cw(this.persistenceKey,e));if(r){const i=ah.Es(e,r);i&&(n=i.state)}}return this.ks.As(e),this.Ms(),n}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(cw(this.persistenceKey,e))}updateQueryState(e,n,r){this.qs(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Bs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return W("SharedClientState","READ",e,n),n}setItem(e,n){W("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){W("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){const n=e;if(n.storageArea===this.storage){if(W("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ws)return void $t("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.bs.test(n.key)){if(n.newValue==null){const r=this.$s(n.key);return this.Us(r,null)}{const r=this.Ws(n.key,n.newValue);if(r)return this.Us(r.clientId,r)}}else if(this.Ds.test(n.key)){if(n.newValue!==null){const r=this.Gs(n.key,n.newValue);if(r)return this.zs(r)}}else if(this.Cs.test(n.key)){if(n.newValue!==null){const r=this.js(n.key,n.newValue);if(r)return this.Hs(r)}}else if(n.key===this.vs){if(n.newValue!==null){const r=this.xs(n.newValue);if(r)return this.Os(r)}}else if(n.key===this.Ss){const r=function(s){let o=lr._e;if(s!=null)try{const a=JSON.parse(s);ue(typeof a=="number"),o=a}catch(a){$t("SharedClientState","Failed to read sequence number from WebStorage",a)}return o}(n.newValue);r!==lr._e&&this.sequenceNumberHandler(r)}else if(n.key===this.Fs){const r=this.Js(n.newValue);await Promise.all(r.map(i=>this.syncEngine.Ys(i)))}}}else this.ys.push(n)})}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Ls(e,n,r){const i=new yy(this.currentUser,e,n,r),s=wA(this.persistenceKey,this.currentUser,e);this.setItem(s,i.ds())}Bs(e){const n=wA(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Qs(e){const n={clientId:this.Vs,onlineState:e};this.storage.setItem(this.vs,JSON.stringify(n))}qs(e,n,r){const i=cw(this.persistenceKey,e),s=new ah(e,n,r);this.setItem(i,s.ds())}Ks(e){const n=JSON.stringify(Array.from(e));this.setItem(this.Fs,n)}$s(e){const n=this.bs.exec(e);return n?n[1]:null}Ws(e,n){const r=this.$s(e);return _y.Es(r,n)}Gs(e,n){const r=this.Ds.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return yy.Es(new on(s),i,n)}js(e,n){const r=this.Cs.exec(e),i=Number(r[1]);return ah.Es(i,n)}xs(e){return yI.Es(e)}Js(e){return JSON.parse(e)}async zs(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Zs(e.batchId,e.state,e.error);W("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,n){const r=n?this.ps.insert(e,n):this.ps.remove(e),i=this.Ns(this.ps),s=this.Ns(r),o=[],a=[];return s.forEach(l=>{i.has(l)||o.push(l)}),i.forEach(l=>{s.has(l)||a.push(l)}),this.syncEngine.eo(o,a).then(()=>{this.ps=r})}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let n=rI();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}}class E${constructor(){this.no=new Lx,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,r){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new Lx,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nre{io(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){W("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){W("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ug=null;function dw(){return ug===null?ug=function(){return 268435456+Math.round(2147483648*Math.random())}():ug++,"0x"+ug.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rre={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ire{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const An="WebChannelConnection";class sre extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.fo=r+"://"+n.host,this.po=`projects/${i}/databases/${s}`,this.yo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get wo(){return!1}So(n,r,i,s,o){const a=dw(),l=this.bo(n,r.toUriEncodedString());W("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(c,s,o),this.Co(n,l,c,i).then(u=>(W("RestConnection",`Received RPC '${n}' ${a}: `,u),u),u=>{throw gi("RestConnection",`RPC '${n}' ${a} failed with error: `,u,"url: ",l,"request:",i),u})}vo(n,r,i,s,o,a){return this.So(n,r,i,s,o)}Do(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+wu}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}bo(n,r){const i=rre[n];return`${this.fo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,n,r,i){const s=dw();return new Promise((o,a)=>{const l=new tte;l.setWithCredentials(!0),l.listenOnce(Zee.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case ow.NO_ERROR:const u=l.getResponseJson();W(An,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(u)),o(u);break;case ow.TIMEOUT:W(An,`RPC '${e}' ${s} timed out`),a(new z(L.DEADLINE_EXCEEDED,"Request time out"));break;case ow.HTTP_ERROR:const d=l.getStatus();if(W(An,`RPC '${e}' ${s} failed with status:`,d,"response text:",l.getResponseText()),d>0){let h=l.getResponseJson();Array.isArray(h)&&(h=h[0]);const f=h==null?void 0:h.error;if(f&&f.status&&f.message){const g=function(v){const _=v.toLowerCase().replace(/_/g,"-");return Object.values(L).indexOf(_)>=0?_:L.UNKNOWN}(f.status);a(new z(g,f.message))}else a(new z(L.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new z(L.UNAVAILABLE,"Connection failed."));break;default:se()}}finally{W(An,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);W(An,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",c,r,15)})}Fo(e,n,r){const i=dw(),s=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Xee(),a=Jee(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Do(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const u=s.join("");W(An,`Creating RPC '${e}' stream ${i}: ${u}`,l);const d=o.createWebChannel(u,l);let h=!1,f=!1;const g=new ire({lo:v=>{f?W(An,`Not sending because RPC '${e}' stream ${i} is closed:`,v):(h||(W(An,`Opening RPC '${e}' stream ${i} transport.`),d.open(),h=!0),W(An,`RPC '${e}' stream ${i} sending:`,v),d.send(v))},ho:()=>d.close()}),m=(v,_,y)=>{v.listen(_,w=>{try{y(w)}catch(b){setTimeout(()=>{throw b},0)}})};return m(d,sg.EventType.OPEN,()=>{f||W(An,`RPC '${e}' stream ${i} transport opened.`)}),m(d,sg.EventType.CLOSE,()=>{f||(f=!0,W(An,`RPC '${e}' stream ${i} transport closed`),g.Vo())}),m(d,sg.EventType.ERROR,v=>{f||(f=!0,gi(An,`RPC '${e}' stream ${i} transport errored:`,v),g.Vo(new z(L.UNAVAILABLE,"The operation could not be completed")))}),m(d,sg.EventType.MESSAGE,v=>{var _;if(!f){const y=v.data[0];ue(!!y);const w=y,b=w.error||((_=w[0])===null||_===void 0?void 0:_.error);if(b){W(An,`RPC '${e}' stream ${i} received error:`,b);const x=b.status;let T=function(k){const D=Wt[k];if(D!==void 0)return zj(D)}(x),I=b.message;T===void 0&&(T=L.INTERNAL,I="Unknown error status: "+x+" with message "+b.message),f=!0,g.Vo(new z(T,I)),d.close()}else W(An,`RPC '${e}' stream ${i} received:`,y),g.mo(y)}}),m(a,ete.STAT_EVENT,v=>{v.stat===Rk.PROXY?W(An,`RPC '${e}' stream ${i} detected buffering proxy`):v.stat===Rk.NOPROXY&&W(An,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{g.Ro()},0),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T$(){return typeof window<"u"?window:null}function im(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gp(t){return new fne(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{constructor(e,n,r=1e3,i=1.5,s=6e4){this.oi=e,this.timerId=n,this.Mo=r,this.xo=i,this.Oo=s,this.No=0,this.Lo=null,this.Bo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();const n=Math.floor(this.No+this.Qo()),r=Math.max(0,Date.now()-this.Bo),i=Math.max(0,n-r);i>0&&W("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.No} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Lo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Bo=Date.now(),e())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){this.Lo!==null&&(this.Lo.skipDelay(),this.Lo=null)}cancel(){this.Lo!==null&&(this.Lo.cancel(),this.Lo=null)}Qo(){return(Math.random()-.5)*this.No}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I${constructor(e,n,r,i,s,o,a,l){this.oi=e,this.$o=r,this.Uo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new _I(e,n)}Ho(){return this.state===1||this.state===5||this.Jo()}Jo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Yo()}async stop(){this.Ho()&&await this.close(0)}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&this.Go===null&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(e){this.n_(),this.stream.send(e)}async e_(){if(this.Jo())return this.close(0)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}async close(e,n){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,e!==4?this.jo.reset():n&&n.code===L.RESOURCE_EXHAUSTED?($t(n.toString()),$t("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):n&&n.code===L.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.To(n)}i_(){}auth(){this.state=1;const e=this.s_(this.Wo),n=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Wo===n&&this.o_(r,i)},r=>{e(()=>{const i=new z(L.UNKNOWN,"Fetching auth token failed: "+r.message);return this.__(i)})})}o_(e,n){const r=this.s_(this.Wo);this.stream=this.a_(e,n),this.stream.Po(()=>{r(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(i=>{r(()=>this.__(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Yo(){this.state=5,this.jo.qo(async()=>{this.state=0,this.start()})}__(e){return W("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}s_(e){return n=>{this.oi.enqueueAndForget(()=>this.Wo===e?n():(W("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class ore extends I${constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}a_(e,n){return this.connection.Fo("Listen",e,n)}onMessage(e){this.jo.reset();const n=mne(this.serializer,e),r=function(s){if(!("targetChange"in s))return de.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?de.min():o.readTime?zt(o.readTime):de.min()}(e);return this.listener.u_(n,r)}c_(e){const n={};n.database=Px(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=uy(l)?{documents:Zj(s,l)}:{query:e$(s,l).ut},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=Gj(s,o.resumeToken);const c=kx(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(de.min())>0){a.readTime=Gc(s,o.snapshotVersion.toTimestamp());const c=kx(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=_ne(this.serializer,e);r&&(n.labels=r),this.t_(n)}l_(e){const n={};n.database=Px(this.serializer),n.removeTarget=e,this.t_(n)}}class are extends I${constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,n){return this.connection.Fo("Write",e,n)}onMessage(e){if(ue(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();const n=yne(e.writeResults,e.commitTime),r=zt(e.commitTime);return this.listener.T_(r,n)}return ue(!e.writeResults||e.writeResults.length===0),this.h_=!0,this.listener.E_()}d_(){const e={};e.database=Px(this.serializer),this.t_(e)}I_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>hf(this.serializer,r))};this.t_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lre extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.A_=!1}R_(){if(this.A_)throw new z(L.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,n,r,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.So(e,Ax(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new z(L.UNKNOWN,s.toString())})}vo(e,n,r,i,s){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.vo(e,Ax(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new z(L.UNKNOWN,o.toString())})}terminate(){this.A_=!0,this.connection.terminate()}}class cre{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){this.m_===0&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(e){this.state==="Online"?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.y_("Offline")))}set(e){this.b_(),this.m_=0,e==="Online"&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?($t(n),this.g_=!1):W("OnlineStateTracker",n)}b_(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ure{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=s,this.M_.io(o=>{r.enqueueAndForget(async()=>{Go(this)&&(W("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=Z(l);c.v_.add(4),await Eu(c),c.x_.set("Unknown"),c.v_.delete(4),await mp(c)}(this))})}),this.x_=new cre(r,i)}}async function mp(t){if(Go(t))for(const e of t.F_)await e(!0)}async function Eu(t){for(const e of t.F_)await e(!1)}function vv(t,e){const n=Z(t);n.C_.has(e.targetId)||(n.C_.set(e.targetId,e),bI(n)?wI(n):Iu(n).Jo()&&vI(n,e))}function Yc(t,e){const n=Z(t),r=Iu(n);n.C_.delete(e),r.Jo()&&C$(n,e),n.C_.size===0&&(r.Jo()?r.Xo():Go(n)&&n.x_.set("Unknown"))}function vI(t,e){if(t.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(de.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Iu(t).c_(e)}function C$(t,e){t.O_.Oe(e),Iu(t).l_(e)}function wI(t){t.O_=new cne({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.C_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),Iu(t).start(),t.x_.p_()}function bI(t){return Go(t)&&!Iu(t).Ho()&&t.C_.size>0}function Go(t){return Z(t).v_.size===0}function R$(t){t.O_=void 0}async function dre(t){t.C_.forEach((e,n)=>{vI(t,e)})}async function hre(t,e){R$(t),bI(t)?(t.x_.S_(e),wI(t)):t.x_.set("Unknown")}async function fre(t,e,n){if(t.x_.set("Online"),e instanceof qj&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.C_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.C_.delete(a),i.O_.removeTarget(a))}(t,e)}catch(r){W("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await vy(t,r)}else if(e instanceof rm?t.O_.$e(e):e instanceof Hj?t.O_.Je(e):t.O_.Ge(e),!n.isEqual(de.min()))try{const r=await v$(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.O_.it(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=s.C_.get(c);u&&s.C_.set(c,u.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const u=s.C_.get(l);if(!u)return;s.C_.set(l,u.withResumeToken(en.EMPTY_BYTE_STRING,u.snapshotVersion)),C$(s,l);const d=new ss(u.target,l,c,u.sequenceNumber);vI(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){W("RemoteStore","Failed to raise snapshot:",r),await vy(t,r)}}async function vy(t,e,n){if(!Ho(e))throw e;t.v_.add(1),await Eu(t),t.x_.set("Offline"),n||(n=()=>v$(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{W("RemoteStore","Retrying IndexedDB access"),await n(),t.v_.delete(1),await mp(t)})}function k$(t,e){return e().catch(n=>vy(t,n,e))}async function Tu(t){const e=Z(t),n=Co(e);let r=e.D_.length>0?e.D_[e.D_.length-1].batchId:-1;for(;pre(e);)try{const i=await Zne(e.localStore,r);if(i===null){e.D_.length===0&&n.Xo();break}r=i.batchId,gre(e,i)}catch(i){await vy(e,i)}A$(e)&&P$(e)}function pre(t){return Go(t)&&t.D_.length<10}function gre(t,e){t.D_.push(e);const n=Co(t);n.Jo()&&n.P_&&n.I_(e.mutations)}function A$(t){return Go(t)&&!Co(t).Ho()&&t.D_.length>0}function P$(t){Co(t).start()}async function mre(t){Co(t).d_()}async function yre(t){const e=Co(t);for(const n of t.D_)e.I_(n.mutations)}async function _re(t,e,n){const r=t.D_.shift(),i=oI.from(r,e,n);await k$(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Tu(t)}async function vre(t,e){e&&Co(t).P_&&await async function(r,i){if(function(o){return Bj(o)&&o!==L.ABORTED}(i.code)){const s=r.D_.shift();Co(r).Zo(),await k$(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Tu(r)}}(t,e),A$(t)&&P$(t)}async function xA(t,e){const n=Z(t);n.asyncQueue.verifyOperationInProgress(),W("RemoteStore","RemoteStore received new credentials");const r=Go(n);n.v_.add(3),await Eu(n),r&&n.x_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.v_.delete(3),await mp(n)}async function Vx(t,e){const n=Z(t);e?(n.v_.delete(2),await mp(n)):e||(n.v_.add(2),await Eu(n),n.x_.set("Unknown"))}function Iu(t){return t.N_||(t.N_=function(n,r,i){const s=Z(n);return s.R_(),new ore(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:dre.bind(null,t),To:hre.bind(null,t),u_:fre.bind(null,t)}),t.F_.push(async e=>{e?(t.N_.Zo(),bI(t)?wI(t):t.x_.set("Unknown")):(await t.N_.stop(),R$(t))})),t.N_}function Co(t){return t.L_||(t.L_=function(n,r,i){const s=Z(n);return s.R_(),new are(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:mre.bind(null,t),To:vre.bind(null,t),E_:yre.bind(null,t),T_:_re.bind(null,t)}),t.F_.push(async e=>{e?(t.L_.Zo(),await Tu(t)):(await t.L_.stop(),t.D_.length>0&&(W("RemoteStore",`Stopping write stream with ${t.D_.length} pending writes`),t.D_=[]))})),t.L_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xI{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new dn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new xI(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new z(L.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Cu(t,e){if($t("AsyncQueue",`${e}: ${t}`),Ho(t))return new z(L.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{constructor(e){this.comparator=e?(n,r)=>e(n,r)||J.comparator(n.key,r.key):(n,r)=>J.comparator(n.key,r.key),this.keyedMap=Ad(),this.sortedSet=new Ct(this.comparator)}static emptySet(e){return new bc(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof bc)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new bc;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA{constructor(){this.B_=new Ct(J.comparator)}track(e){const n=e.doc.key,r=this.B_.get(n);r?e.type!==0&&r.type===3?this.B_=this.B_.insert(n,e):e.type===3&&r.type!==1?this.B_=this.B_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.B_=this.B_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.B_=this.B_.remove(n):e.type===1&&r.type===2?this.B_=this.B_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):se():this.B_=this.B_.insert(n,e)}k_(){const e=[];return this.B_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Xc{constructor(e,n,r,i,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Xc(e,n,bc.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&up(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wre{constructor(){this.q_=void 0,this.Q_=[]}K_(){return this.Q_.some(e=>e.U_())}}class bre{constructor(){this.queries=new qo(e=>Cj(e),up),this.onlineState="Unknown",this.W_=new Set}}async function SI(t,e){const n=Z(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.K_()&&e.U_()&&(r=2):(s=new wre,r=e.U_()?0:1);try{switch(r){case 0:s.q_=await n.onListen(i,!0);break;case 1:s.q_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=Cu(o,`Initialization of query '${Ul(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.Q_.push(e),e.G_(n.onlineState),s.q_&&e.z_(s.q_)&&TI(n)}async function EI(t,e){const n=Z(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.Q_.indexOf(e);o>=0&&(s.Q_.splice(o,1),s.Q_.length===0?i=e.U_()?0:1:!s.K_()&&e.U_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function xre(t,e){const n=Z(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.Q_)a.z_(i)&&(r=!0);o.q_=i}}r&&TI(n)}function Sre(t,e,n){const r=Z(t),i=r.queries.get(e);if(i)for(const s of i.Q_)s.onError(n);r.queries.delete(e)}function TI(t){t.W_.forEach(e=>{e.next()})}var Fx,EA;(EA=Fx||(Fx={})).j_="default",EA.Cache="cache";class II{constructor(e,n,r){this.query=e,this.H_=n,this.J_=!1,this.Y_=null,this.onlineState="Unknown",this.options=r||{}}z_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Xc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.J_?this.Z_(e)&&(this.H_.next(e),n=!0):this.X_(e,this.onlineState)&&(this.ea(e),n=!0),this.Y_=e,n}onError(e){this.H_.error(e)}G_(e){this.onlineState=e;let n=!1;return this.Y_&&!this.J_&&this.X_(this.Y_,e)&&(this.ea(this.Y_),n=!0),n}X_(e,n){if(!e.fromCache||!this.U_())return!0;const r=n!=="Offline";return(!this.options.ta||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Z_(e){if(e.docChanges.length>0)return!0;const n=this.Y_&&this.Y_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ea(e){e=Xc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.J_=!0,this.H_.next(e)}U_(){return this.options.source!==Fx.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ere{constructor(e,n){this.na=e,this.byteLength=n}ra(){return"metadata"in this.na}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA{constructor(e){this.serializer=e}Ps(e){return Fi(this.serializer,e)}Is(e){return e.metadata.exists?Jj(this.serializer,e.document,!1):ct.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return zt(e)}}class Tre{constructor(e,n,r){this.ia=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=N$(e)}sa(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.na.namedQuery)this.queries.push(e.na.namedQuery);else if(e.na.documentMetadata){this.documents.push({metadata:e.na.documentMetadata}),e.na.documentMetadata.exists||++n;const r=Ae.fromString(e.na.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.na.document&&(this.documents[this.documents.length-1].document=e.na.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}oa(e){const n=new Map,r=new TA(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.Ps(i.metadata.name);for(const o of i.metadata.queries){const a=(n.get(o)||Ie()).add(s);n.set(o,a)}}return n}async complete(){const e=await ere(this.localStore,new TA(this.serializer),this.documents,this.ia.id),n=this.oa(this.documents);for(const r of this.queries)await tre(this.localStore,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,_a:this.collectionGroups,aa:e}}}function N$(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D${constructor(e){this.key=e}}class O${constructor(e){this.key=e}}class M${constructor(e,n){this.query=e,this.ua=n,this.ca=null,this.hasCachedResults=!1,this.current=!1,this.la=Ie(),this.mutatedKeys=Ie(),this.ha=kj(e),this.Pa=new bc(this.ha)}get Ia(){return this.ua}Ta(e,n){const r=n?n.Ea:new SA,i=n?n.Pa:this.Pa;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,d)=>{const h=i.get(u),f=dp(this.query,d)?d:null,g=!!h&&this.mutatedKeys.has(h.key),m=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let v=!1;h&&f?h.data.isEqual(f.data)?g!==m&&(r.track({type:3,doc:f}),v=!0):this.da(h,f)||(r.track({type:2,doc:f}),v=!0,(l&&this.ha(f,l)>0||c&&this.ha(f,c)<0)&&(a=!0)):!h&&f?(r.track({type:0,doc:f}),v=!0):h&&!f&&(r.track({type:1,doc:h}),v=!0,(l||c)&&(a=!0)),v&&(f?(o=o.add(f),s=m?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),r.track({type:1,doc:u})}return{Pa:o,Ea:r,Xi:a,mutatedKeys:s}}da(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Pa;this.Pa=e.Pa,this.mutatedKeys=e.mutatedKeys;const o=e.Ea.k_();o.sort((u,d)=>function(f,g){const m=v=>{switch(v){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return se()}};return m(f)-m(g)}(u.type,d.type)||this.ha(u.doc,d.doc)),this.Aa(r),i=i!=null&&i;const a=n&&!i?this.Ra():[],l=this.la.size===0&&this.current&&!i?1:0,c=l!==this.ca;return this.ca=l,o.length!==0||c?{snapshot:new Xc(this.query,e.Pa,s,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),Va:a}:{Va:a}}G_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Pa:this.Pa,Ea:new SA,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{Va:[]}}ma(e){return!this.ua.has(e)&&!!this.Pa.has(e)&&!this.Pa.get(e).hasLocalMutations}Aa(e){e&&(e.addedDocuments.forEach(n=>this.ua=this.ua.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ua=this.ua.delete(n)),this.current=e.current)}Ra(){if(!this.current)return[];const e=this.la;this.la=Ie(),this.Pa.forEach(r=>{this.ma(r.key)&&(this.la=this.la.add(r.key))});const n=[];return e.forEach(r=>{this.la.has(r)||n.push(new O$(r))}),this.la.forEach(r=>{e.has(r)||n.push(new D$(r))}),n}fa(e){this.ua=e.hs,this.la=Ie();const n=this.Ta(e.documents);return this.applyChanges(n,!0)}ga(){return Xc.fromInitialDocuments(this.query,this.Pa,this.mutatedKeys,this.ca===0,this.hasCachedResults)}}class Ire{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class Cre{constructor(e){this.key=e,this.pa=!1}}class Rre{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.ya={},this.wa=new qo(a=>Cj(a),up),this.Sa=new Map,this.ba=new Set,this.Da=new Ct(J.comparator),this.Ca=new Map,this.va=new fI,this.Fa={},this.Ma=new Map,this.xa=Xa.Ln(),this.onlineState="Unknown",this.Oa=void 0}get isPrimaryClient(){return this.Oa===!0}}async function kre(t,e,n=!0){const r=wv(t);let i;const s=r.wa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ga()):i=await L$(r,e,n,!0),i}async function Are(t,e){const n=wv(t);await L$(n,e,!0,!1)}async function L$(t,e,n,r){const i=await Kc(t.localStore,Yn(e)),s=i.targetId,o=n?t.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=await CI(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&vv(t.remoteStore,i),a}async function CI(t,e,n,r,i){t.Na=(d,h,f)=>async function(m,v,_,y){let w=v.view.Ta(_);w.Xi&&(w=await my(m.localStore,v.query,!1).then(({documents:I})=>v.view.Ta(I,w)));const b=y&&y.targetChanges.get(v.targetId),x=y&&y.targetMismatches.get(v.targetId)!=null,T=v.view.applyChanges(w,m.isPrimaryClient,b,x);return jx(m,v.targetId,T.Va),T.snapshot}(t,d,h,f);const s=await my(t.localStore,e,!0),o=new M$(e,s.hs),a=o.Ta(s.documents),l=pp.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,l);jx(t,n,c.Va);const u=new Ire(e,n,o);return t.wa.set(e,u),t.Sa.has(n)?t.Sa.get(n).push(e):t.Sa.set(n,[e]),c.snapshot}async function Pre(t,e,n){const r=Z(t),i=r.wa.get(e),s=r.Sa.get(i.targetId);if(s.length>1)return r.Sa.set(i.targetId,s.filter(o=>!up(o,e))),void r.wa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Qc(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Yc(r.remoteStore,i.targetId),Jc(r,i.targetId)}).catch(Wo)):(Jc(r,i.targetId),await Qc(r.localStore,i.targetId,!0))}async function Nre(t,e){const n=Z(t),r=n.wa.get(e),i=n.Sa.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Yc(n.remoteStore,r.targetId))}async function Dre(t,e,n){const r=PI(t);try{const i=await function(o,a){const l=Z(o),c=pt.now(),u=a.reduce((f,g)=>f.add(g.key),Ie());let d,h;return l.persistence.runTransaction("Locally write mutations","readwrite",f=>{let g=ur(),m=Ie();return l.os.getEntries(f,u).next(v=>{g=v,g.forEach((_,y)=>{y.isValidDocument()||(m=m.add(_))})}).next(()=>l.localDocuments.getOverlayedDocuments(f,g)).next(v=>{d=v;const _=[];for(const y of a){const w=one(y,d.get(y.key).overlayedDocument);w!=null&&_.push(new As(y.key,w,_j(w.value.mapValue),bt.exists(!0)))}return l.mutationQueue.addMutationBatch(f,c,_,a)}).next(v=>{h=v;const _=v.applyToLocalDocumentSet(d,m);return l.documentOverlayCache.saveOverlays(f,v.batchId,_)})}).then(()=>({batchId:h.batchId,changes:Pj(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.Fa[o.currentUser.toKey()];c||(c=new Ct(Se)),c=c.insert(a,l),o.Fa[o.currentUser.toKey()]=c}(r,i.batchId,n),await Ps(r,i.changes),await Tu(r.remoteStore)}catch(i){const s=Cu(i,"Failed to persist write");n.reject(s)}}async function V$(t,e){const n=Z(t);try{const r=await Jne(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Ca.get(s);o&&(ue(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.pa=!0:i.modifiedDocuments.size>0?ue(o.pa):i.removedDocuments.size>0&&(ue(o.pa),o.pa=!1))}),await Ps(n,r,e)}catch(r){await Wo(r)}}function IA(t,e,n){const r=Z(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.wa.forEach((s,o)=>{const a=o.view.G_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=Z(o);l.onlineState=a;let c=!1;l.queries.forEach((u,d)=>{for(const h of d.Q_)h.G_(a)&&(c=!0)}),c&&TI(l)}(r.eventManager,e),i.length&&r.ya.u_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Ore(t,e,n){const r=Z(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Ca.get(e),s=i&&i.key;if(s){let o=new Ct(J.comparator);o=o.insert(s,ct.newNoDocument(s,de.min()));const a=Ie().add(s),l=new fp(de.min(),new Map,new Ct(Se),o,a);await V$(r,l),r.Da=r.Da.remove(s),r.Ca.delete(e),AI(r)}else await Qc(r.localStore,e,!1).then(()=>Jc(r,e,n)).catch(Wo)}async function Mre(t,e){const n=Z(t),r=e.batch.batchId;try{const i=await Xne(n.localStore,e);kI(n,r,null),RI(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ps(n,i)}catch(i){await Wo(i)}}async function Lre(t,e,n){const r=Z(t);try{const i=await function(o,a){const l=Z(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,a).next(d=>(ue(d!==null),u=d.keys(),l.mutationQueue.removeMutationBatch(c,d))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(r.localStore,e);kI(r,e,n),RI(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Ps(r,i)}catch(i){await Wo(i)}}async function Vre(t,e){const n=Z(t);Go(n.remoteStore)||W("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(o){const a=Z(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",l=>a.mutationQueue.getHighestUnacknowledgedBatchId(l))}(n.localStore);if(r===-1)return void e.resolve();const i=n.Ma.get(r)||[];i.push(e),n.Ma.set(r,i)}catch(r){const i=Cu(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}function RI(t,e){(t.Ma.get(e)||[]).forEach(n=>{n.resolve()}),t.Ma.delete(e)}function kI(t,e,n){const r=Z(t);let i=r.Fa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Fa[r.currentUser.toKey()]=i}}function Jc(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Sa.get(e))t.wa.delete(r),n&&t.ya.La(r,n);t.Sa.delete(e),t.isPrimaryClient&&t.va.Vr(e).forEach(r=>{t.va.containsKey(r)||F$(t,r)})}function F$(t,e){t.ba.delete(e.path.canonicalString());const n=t.Da.get(e);n!==null&&(Yc(t.remoteStore,n),t.Da=t.Da.remove(e),t.Ca.delete(n),AI(t))}function jx(t,e,n){for(const r of n)r instanceof D$?(t.va.addReference(r.key,e),Fre(t,r)):r instanceof O$?(W("SyncEngine","Document no longer in limbo: "+r.key),t.va.removeReference(r.key,e),t.va.containsKey(r.key)||F$(t,r.key)):se()}function Fre(t,e){const n=e.key,r=n.path.canonicalString();t.Da.get(n)||t.ba.has(r)||(W("SyncEngine","New document in limbo: "+n),t.ba.add(r),AI(t))}function AI(t){for(;t.ba.size>0&&t.Da.size<t.maxConcurrentLimboResolutions;){const e=t.ba.values().next().value;t.ba.delete(e);const n=new J(Ae.fromString(e)),r=t.xa.next();t.Ca.set(r,new Cre(n)),t.Da=t.Da.insert(n,r),vv(t.remoteStore,new ss(Yn(bu(n.path)),r,"TargetPurposeLimboResolution",lr._e))}}async function Ps(t,e,n){const r=Z(t),i=[],s=[],o=[];r.wa.isEmpty()||(r.wa.forEach((a,l)=>{o.push(r.Na(l,e,n).then(c=>{if((c||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,c!=null&&c.fromCache?"not-current":"current"),c){i.push(c);const u=mI.Ki(l.targetId,c);s.push(u)}}))}),await Promise.all(o),r.ya.u_(i),await async function(l,c){const u=Z(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>N.forEach(c,h=>N.forEach(h.qi,f=>u.persistence.referenceDelegate.addReference(d,h.targetId,f)).next(()=>N.forEach(h.Qi,f=>u.persistence.referenceDelegate.removeReference(d,h.targetId,f)))))}catch(d){if(!Ho(d))throw d;W("LocalStore","Failed to update sequence numbers: "+d)}for(const d of c){const h=d.targetId;if(!d.fromCache){const f=u.ns.get(h),g=f.snapshotVersion,m=f.withLastLimboFreeSnapshotVersion(g);u.ns=u.ns.insert(h,m)}}}(r.localStore,s))}async function jre(t,e){const n=Z(t);if(!n.currentUser.isEqual(e)){W("SyncEngine","User change. New user:",e.toKey());const r=await _$(n.localStore,e);n.currentUser=e,function(s,o){s.Ma.forEach(a=>{a.forEach(l=>{l.reject(new z(L.CANCELLED,o))})}),s.Ma.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ps(n,r.us)}}function $re(t,e){const n=Z(t),r=n.Ca.get(e);if(r&&r.pa)return Ie().add(r.key);{let i=Ie();const s=n.Sa.get(e);if(!s)return i;for(const o of s){const a=n.wa.get(o);i=i.unionWith(a.view.Ia)}return i}}async function Ure(t,e){const n=Z(t),r=await my(n.localStore,e.query,!0),i=e.view.fa(r);return n.isPrimaryClient&&jx(n,e.targetId,i.Va),i}async function Bre(t,e){const n=Z(t);return x$(n.localStore,e).then(r=>Ps(n,r))}async function zre(t,e,n,r){const i=Z(t),s=await function(a,l){const c=Z(a),u=Z(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",d=>u.vn(d,l).next(h=>h?c.localDocuments.getDocuments(d,h):N.resolve(null)))}(i.localStore,e);s!==null?(n==="pending"?await Tu(i.remoteStore):n==="acknowledged"||n==="rejected"?(kI(i,e,r||null),RI(i,e),function(a,l){Z(Z(a).mutationQueue).Mn(l)}(i.localStore,e)):se(),await Ps(i,s)):W("SyncEngine","Cannot apply mutation batch with id: "+e)}async function Wre(t,e){const n=Z(t);if(wv(n),PI(n),e===!0&&n.Oa!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),i=await CA(n,r.toArray());n.Oa=!0,await Vx(n.remoteStore,!0);for(const s of i)vv(n.remoteStore,s)}else if(e===!1&&n.Oa!==!1){const r=[];let i=Promise.resolve();n.Sa.forEach((s,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(Jc(n,o),Qc(n.localStore,o,!0))),Yc(n.remoteStore,o)}),await i,await CA(n,r),function(o){const a=Z(o);a.Ca.forEach((l,c)=>{Yc(a.remoteStore,c)}),a.va.mr(),a.Ca=new Map,a.Da=new Ct(J.comparator)}(n),n.Oa=!1,await Vx(n.remoteStore,!1)}}async function CA(t,e,n){const r=Z(t),i=[],s=[];for(const o of e){let a;const l=r.Sa.get(o);if(l&&l.length!==0){a=await Kc(r.localStore,Yn(l[0]));for(const c of l){const u=r.wa.get(c),d=await Ure(r,u);d.snapshot&&s.push(d.snapshot)}}else{const c=await b$(r.localStore,o);a=await Kc(r.localStore,c),await CI(r,j$(c),o,!1,a.resumeToken)}i.push(a)}return r.ya.u_(s),i}function j$(t){return Ij(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Hre(t){return function(n){return Z(Z(n).persistence).Bi()}(Z(t).localStore)}async function qre(t,e,n,r){const i=Z(t);if(i.Oa)return void W("SyncEngine","Ignoring unexpected query state notification.");const s=i.Sa.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const o=await x$(i.localStore,Rj(s[0])),a=fp.createSynthesizedRemoteEventForCurrentChange(e,n==="current",en.EMPTY_BYTE_STRING);await Ps(i,o,a);break}case"rejected":await Qc(i.localStore,e,!0),Jc(i,e,r);break;default:se()}}async function Gre(t,e,n){const r=wv(t);if(r.Oa){for(const i of e){if(r.Sa.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){W("SyncEngine","Adding an already active target "+i);continue}const s=await b$(r.localStore,i),o=await Kc(r.localStore,s);await CI(r,j$(s),o.targetId,!1,o.resumeToken),vv(r.remoteStore,o)}for(const i of n)r.Sa.has(i)&&await Qc(r.localStore,i,!1).then(()=>{Yc(r.remoteStore,i),Jc(r,i)}).catch(Wo)}}function wv(t){const e=Z(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=V$.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=$re.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Ore.bind(null,e),e.ya.u_=xre.bind(null,e.eventManager),e.ya.La=Sre.bind(null,e.eventManager),e}function PI(t){const e=Z(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Mre.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Lre.bind(null,e),e}function Kre(t,e,n){const r=Z(t);(async function(s,o,a){try{const l=await o.getMetadata();if(await function(f,g){const m=Z(f),v=zt(g.createTime);return m.persistence.runTransaction("hasNewerBundle","readonly",_=>m.$r.getBundleMetadata(_,g.id)).then(_=>!!_&&_.createTime.compareTo(v)>=0)}(s.localStore,l))return await o.close(),a._completeWith(function(f){return{taskState:"Success",documentsLoaded:f.totalDocuments,bytesLoaded:f.totalBytes,totalDocuments:f.totalDocuments,totalBytes:f.totalBytes}}(l)),Promise.resolve(new Set);a._updateProgress(N$(l));const c=new Tre(l,s.localStore,o.serializer);let u=await o.Ba();for(;u;){const h=await c.sa(u);h&&a._updateProgress(h),u=await o.Ba()}const d=await c.complete();return await Ps(s,d.aa,void 0),await function(f,g){const m=Z(f);return m.persistence.runTransaction("Save bundle","readwrite",v=>m.$r.saveBundleMetadata(v,g))}(s.localStore,l),a._completeWith(d.progress),Promise.resolve(d._a)}catch(l){return gi("SyncEngine",`Loading bundle failed with ${l}`),a._failWith(l),Promise.resolve(new Set)}})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}class $x{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=gp(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return y$(this.persistence,new m$,e.initialUser,this.serializer)}createPersistence(e){return new g$(_v.Hr,this.serializer)}createSharedClientState(e){return new E$}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class $$ extends $x{constructor(e,n,r){super(),this.ka=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.ka.initialize(this,e),await PI(this.ka.syncEngine),await Tu(this.ka.remoteStore),await this.persistence.fi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}createLocalStore(e){return y$(this.persistence,new m$,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new One(r,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){const r=new yte(n,this.persistence);return new mte(e.asyncQueue,r)}createPersistence(e){const n=gI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?ir.withCacheSize(this.cacheSizeBytes):ir.DEFAULT;return new pI(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,T$(),im(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new E$}}class Qre extends $${constructor(e,n){super(e,n,!1),this.ka=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.ka.syncEngine;this.sharedClientState instanceof uw&&(this.sharedClientState.syncEngine={Zs:zre.bind(null,n),Xs:qre.bind(null,n),eo:Gre.bind(null,n),Bi:Hre.bind(null,n),Ys:Bre.bind(null,n)},await this.sharedClientState.start()),await this.persistence.fi(async r=>{await Wre(this.ka.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}createSharedClientState(e){const n=T$();if(!uw.D(n))throw new z(L.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=gI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new uw(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class NI{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>IA(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=jre.bind(null,this.syncEngine),await Vx(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new bre}()}createDatastore(e){const n=gp(e.databaseInfo.databaseId),r=function(s){return new sre(s)}(e.databaseInfo);return function(s,o,a,l){return new lre(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new ure(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>IA(this.syncEngine,n,0),function(){return bA.D()?new bA:new nre}())}createSyncEngine(e,n){return function(i,s,o,a,l,c,u){const d=new Rre(i,s,o,a,l,c);return u&&(d.Oa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e;await async function(r){const i=Z(r);W("RemoteStore","RemoteStore shutting down."),i.v_.add(5),await Eu(i),i.M_.shutdown(),i.x_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RA(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bv{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.qa(this.observer.next,e)}error(e){this.observer.error?this.qa(this.observer.error,e):$t("Uncaught Error in snapshot listener:",e.toString())}Qa(){this.muted=!0}qa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yre{constructor(e,n){this.Ka=e,this.serializer=n,this.metadata=new dn,this.buffer=new Uint8Array,this.$a=function(){return new TextDecoder("utf-8")}(),this.Ua().then(r=>{r&&r.ra()?this.metadata.resolve(r.na.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.na)}`))},r=>this.metadata.reject(r))}close(){return this.Ka.cancel()}async getMetadata(){return this.metadata.promise}async Ba(){return await this.getMetadata(),this.Ua()}async Ua(){const e=await this.Wa();if(e===null)return null;const n=this.$a.decode(e),r=Number(n);isNaN(r)&&this.Ga(`length string (${n}) is not valid number`);const i=await this.za(r);return new Ere(JSON.parse(i),e.length+r)}ja(){return this.buffer.findIndex(e=>e===123)}async Wa(){for(;this.ja()<0&&!await this.Ha(););if(this.buffer.length===0)return null;const e=this.ja();e<0&&this.Ga("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async za(e){for(;this.buffer.length<e;)await this.Ha()&&this.Ga("Reached the end of bundle when more is expected.");const n=this.$a.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}Ga(e){throw this.Ka.cancel(),new Error(`Invalid bundle format: ${e}`)}async Ha(){const e=await this.Ka.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xre{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new z(L.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(i,s){const o=Z(i),a={documents:s.map(d=>df(o.serializer,d))},l=await o.vo("BatchGetDocuments",o.serializer.databaseId,Ae.emptyPath(),a,s.length),c=new Map;l.forEach(d=>{const h=gne(o.serializer,d);c.set(h.key.toString(),h)});const u=[];return s.forEach(d=>{const h=c.get(d.toString());ue(!!h),u.push(h)}),u}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Su(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const i=J.fromPath(r);this.mutations.push(new iI(i,this.precondition(i)))}),await async function(r,i){const s=Z(r),o={writes:i.map(a=>hf(s.serializer,a))};await s.So("Commit",s.serializer.databaseId,Ae.emptyPath(),o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw se();n=de.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new z(L.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(de.min())?bt.exists(!1):bt.updateTime(n):bt.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(de.min()))throw new z(L.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return bt.updateTime(n)}return bt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jre{constructor(e,n,r,i,s){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=s,this.Ja=r.maxAttempts,this.jo=new _I(this.asyncQueue,"transaction_retry")}Ya(){this.Ja-=1,this.Za()}Za(){this.jo.qo(async()=>{const e=new Xre(this.datastore),n=this.Xa(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.eu(i)}))}).catch(r=>{this.eu(r)})})}Xa(e){try{const n=this.updateFunction(e);return!lp(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}eu(e){this.Ja>0&&this.tu(e)?(this.Ja-=1,this.asyncQueue.enqueueAndForget(()=>(this.Za(),Promise.resolve()))):this.deferred.reject(e)}tu(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!Bj(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zre{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=on.UNAUTHENTICATED,this.clientId=ij.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{W("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(W("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new z(L.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new dn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Cu(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function sm(t,e){t.asyncQueue.verifyOperationInProgress(),W("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await _$(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Ux(t,e){t.asyncQueue.verifyOperationInProgress();const n=await DI(t);W("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>xA(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>xA(e.remoteStore,i)),t._onlineComponents=e}function U$(t){return t.name==="FirebaseError"?t.code===L.FAILED_PRECONDITION||t.code===L.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function DI(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){W("FirestoreClient","Using user provided OfflineComponentProvider");try{await sm(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!U$(n))throw n;gi("Error using user provided cache. Falling back to memory cache: "+n),await sm(t,new $x)}}else W("FirestoreClient","Using default OfflineComponentProvider"),await sm(t,new $x);return t._offlineComponents}async function xv(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(W("FirestoreClient","Using user provided OnlineComponentProvider"),await Ux(t,t._uninitializedComponentsProvider._online)):(W("FirestoreClient","Using default OnlineComponentProvider"),await Ux(t,new NI))),t._onlineComponents}function B$(t){return DI(t).then(e=>e.persistence)}function OI(t){return DI(t).then(e=>e.localStore)}function z$(t){return xv(t).then(e=>e.remoteStore)}function MI(t){return xv(t).then(e=>e.syncEngine)}function eie(t){return xv(t).then(e=>e.datastore)}async function Zc(t){const e=await xv(t),n=e.eventManager;return n.onListen=kre.bind(null,e.syncEngine),n.onUnlisten=Pre.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Are.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Nre.bind(null,e.syncEngine),n}function tie(t){return t.asyncQueue.enqueue(async()=>{const e=await B$(t),n=await z$(t);return e.setNetworkEnabled(!0),function(i){const s=Z(i);return s.v_.delete(0),mp(s)}(n)})}function nie(t){return t.asyncQueue.enqueue(async()=>{const e=await B$(t),n=await z$(t);return e.setNetworkEnabled(!1),async function(i){const s=Z(i);s.v_.add(0),await Eu(s),s.x_.set("Offline")}(n)})}function rie(t,e){const n=new dn;return t.asyncQueue.enqueueAndForget(async()=>async function(i,s,o){try{const a=await function(c,u){const d=Z(c);return d.persistence.runTransaction("read document","readonly",h=>d.localDocuments.getDocument(h,u))}(i,s);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new z(L.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const l=Cu(a,`Failed to get document '${s} from cache`);o.reject(l)}}(await OI(t),e,n)),n.promise}function W$(t,e,n={}){const r=new dn;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const u=new bv({next:h=>{o.enqueueAndForget(()=>EI(s,d));const f=h.docs.has(a);!f&&h.fromCache?c.reject(new z(L.UNAVAILABLE,"Failed to get document because the client is offline.")):f&&h.fromCache&&l&&l.source==="server"?c.reject(new z(L.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(h)},error:h=>c.reject(h)}),d=new II(bu(a.path),u,{includeMetadataChanges:!0,ta:!0});return SI(s,d)}(await Zc(t),t.asyncQueue,e,n,r)),r.promise}function iie(t,e){const n=new dn;return t.asyncQueue.enqueueAndForget(async()=>async function(i,s,o){try{const a=await my(i,s,!0),l=new M$(s,a.hs),c=l.Ta(a.documents),u=l.applyChanges(c,!1);o.resolve(u.snapshot)}catch(a){const l=Cu(a,`Failed to execute query '${s} against cache`);o.reject(l)}}(await OI(t),e,n)),n.promise}function H$(t,e,n={}){const r=new dn;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const u=new bv({next:h=>{o.enqueueAndForget(()=>EI(s,d)),h.fromCache&&l.source==="server"?c.reject(new z(L.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(h)},error:h=>c.reject(h)}),d=new II(a,u,{includeMetadataChanges:!0,ta:!0});return SI(s,d)}(await Zc(t),t.asyncQueue,e,n,r)),r.promise}function sie(t,e){const n=new bv(e);return t.asyncQueue.enqueueAndForget(async()=>function(i,s){Z(i).W_.add(s),s.next()}(await Zc(t),n)),()=>{n.Qa(),t.asyncQueue.enqueueAndForget(async()=>function(i,s){Z(i).W_.delete(s)}(await Zc(t),n))}}function oie(t,e,n,r){const i=function(o,a){let l;return l=typeof o=="string"?Wj().encode(o):o,function(u,d){return new Yre(u,d)}(function(u,d){if(u instanceof Uint8Array)return RA(u,d);if(u instanceof ArrayBuffer)return RA(new Uint8Array(u),d);if(u instanceof ReadableStream)return u.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(l),a)}(n,gp(e));t.asyncQueue.enqueueAndForget(async()=>{Kre(await MI(t),i,r)})}function aie(t,e){return t.asyncQueue.enqueue(async()=>function(r,i){const s=Z(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.$r.getNamedQuery(o,i))}(await OI(t),e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q$(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kA=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LI(t,e,n){if(!n)throw new z(L.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function G$(t,e,n,r){if(e===!0&&r===!0)throw new z(L.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function AA(t){if(!J.isDocumentKey(t))throw new z(L.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function PA(t){if(J.isDocumentKey(t))throw new z(L.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Sv(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":se()}function $e(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new z(L.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Sv(t);throw new z(L.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function K$(t,e){if(e<=0)throw new z(L.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new z(L.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new z(L.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}G$("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=q$((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new z(L.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new z(L.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new z(L.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class yp{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new NA({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new z(L.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new z(L.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new NA(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new ste;switch(r.type){case"firstParty":return new cte(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new z(L.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=kA.get(n);r&&(W("ComponentProvider","Removing Datastore"),kA.delete(n),r.terminate())}(this),Promise.resolve()}}function lie(t,e,n,r={}){var i;const s=(t=$e(t,yp))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&gi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=on.MOCK_USER;else{a=g7(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new z(L.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new on(c)}t._authCredentials=new ote(new rj(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xn=class Q${constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Q$(this.firestore,e,this._query)}},Tt=class Y${constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new fo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Y$(this.firestore,e,this._key)}},fo=class X$ extends Xn{constructor(e,n,r){super(e,n,bu(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Tt(this.firestore,null,new J(e))}withConverter(e){return new X$(this.firestore,e,this._path)}};function J$(t,e,...n){if(t=fe(t),LI("collection","path",e),t instanceof yp){const r=Ae.fromString(e,...n);return PA(r),new fo(t,null,r)}{if(!(t instanceof Tt||t instanceof fo))throw new z(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ae.fromString(e,...n));return PA(r),new fo(t.firestore,null,r)}}function cie(t,e){if(t=$e(t,yp),LI("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new z(L.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Xn(t,null,function(r){return new ks(Ae.emptyPath(),r)}(e))}function wy(t,e,...n){if(t=fe(t),arguments.length===1&&(e=ij.newId()),LI("doc","path",e),t instanceof yp){const r=Ae.fromString(e,...n);return AA(r),new Tt(t,null,new J(r))}{if(!(t instanceof Tt||t instanceof fo))throw new z(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ae.fromString(e,...n));return AA(r),new Tt(t.firestore,t instanceof fo?t.converter:null,new J(r))}}function Z$(t,e){return t=fe(t),e=fe(e),(t instanceof Tt||t instanceof fo)&&(e instanceof Tt||e instanceof fo)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function eU(t,e){return t=fe(t),e=fe(e),t instanceof Xn&&e instanceof Xn&&t.firestore===e.firestore&&up(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uie{constructor(){this.nu=Promise.resolve(),this.ru=[],this.iu=!1,this.su=[],this.ou=null,this._u=!1,this.au=!1,this.uu=[],this.jo=new _I(this,"async_queue_retry"),this.cu=()=>{const n=im();n&&W("AsyncQueue","Visibility state changed to "+n.visibilityState),this.jo.Ko()};const e=im();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.cu)}get isShuttingDown(){return this.iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.lu(),this.hu(e)}enterRestrictedMode(e){if(!this.iu){this.iu=!0,this.au=e||!1;const n=im();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.cu)}}enqueue(e){if(this.lu(),this.iu)return new Promise(()=>{});const n=new dn;return this.hu(()=>this.iu&&this.au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ru.push(e),this.Pu()))}async Pu(){if(this.ru.length!==0){try{await this.ru[0](),this.ru.shift(),this.jo.reset()}catch(e){if(!Ho(e))throw e;W("AsyncQueue","Operation failed with retryable error: "+e)}this.ru.length>0&&this.jo.qo(()=>this.Pu())}}hu(e){const n=this.nu.then(()=>(this._u=!0,e().catch(r=>{this.ou=r,this._u=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw $t("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this._u=!1,r))));return this.nu=n,n}enqueueAfterDelay(e,n,r){this.lu(),this.uu.indexOf(e)>-1&&(n=0);const i=xI.createAndSchedule(this,e,n,r,s=>this.Iu(s));return this.su.push(i),i}lu(){this.ou&&se()}verifyOperationInProgress(){}async Tu(){let e;do e=this.nu,await e;while(e!==this.nu)}Eu(e){for(const n of this.su)if(n.timerId===e)return!0;return!1}du(e){return this.Tu().then(()=>{this.su.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.su)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tu()})}Au(e){this.uu.push(e)}Iu(e){const n=this.su.indexOf(e);this.su.splice(n,1)}}function Bx(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class die{constructor(){this._progressObserver={},this._taskCompletionResolver=new dn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hie=-1;let Lt=class extends yp{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new uie}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||tU(this),this._firestoreClient.terminate()}};function gn(t){return t._firestoreClient||tU(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function tU(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,c,u){return new Fte(a,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,q$(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new Zre(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function fie(t,e){rU(t=$e(t,Lt));const n=gn(t);if(n._uninitializedComponentsProvider)throw new z(L.FAILED_PRECONDITION,"SDK cache is already specified.");gi("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=t._freezeSettings(),i=new NI;return nU(n,i,new $$(i,r.cacheSizeBytes,e==null?void 0:e.forceOwnership))}function pie(t){rU(t=$e(t,Lt));const e=gn(t);if(e._uninitializedComponentsProvider)throw new z(L.FAILED_PRECONDITION,"SDK cache is already specified.");gi("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings(),r=new NI;return nU(e,r,new Qre(r,n.cacheSizeBytes))}function nU(t,e,n){const r=new dn;return t.asyncQueue.enqueue(async()=>{try{await sm(t,n),await Ux(t,e),r.resolve()}catch(i){const s=i;if(!U$(s))throw s;gi("Error enabling indexeddb cache. Falling back to memory cache: "+s),r.reject(s)}}).then(()=>r.promise)}function gie(t){if(t._initialized&&!t._terminated)throw new z(L.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new dn;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(r){if(!Ur.D())return Promise.resolve();const i=r+"main";await Ur.delete(i)}(gI(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}}),e.promise}function mie(t){return function(n){const r=new dn;return n.asyncQueue.enqueueAndForget(async()=>Vre(await MI(n),r)),r.promise}(gn(t=$e(t,Lt)))}function yie(t){return tie(gn(t=$e(t,Lt)))}function _ie(t){return nie(gn(t=$e(t,Lt)))}function vie(t,e){const n=gn(t=$e(t,Lt)),r=new die;return oie(n,t._databaseId,e,r),r}function wie(t,e){return aie(gn(t=$e(t,Lt)),e).then(n=>n?new Xn(t,null,n.query):null)}function rU(t){if(t._initialized||t._terminated)throw new z(L.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new zi(en.fromBase64String(e))}catch(n){throw new z(L.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new zi(en.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ro=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new z(L.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new wt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ml=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ev{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new z(L.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new z(L.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Se(this._lat,e._lat)||Se(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bie=/^__.*__$/;class xie{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new As(e,this.data,this.fieldMask,n,this.fieldTransforms):new xu(e,this.data,n,this.fieldTransforms)}}class iU{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new As(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function sU(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw se()}}class Tv{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Ru(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Vu(){return this.settings.Vu}mu(e){return new Tv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}fu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.mu({path:r,gu:!1});return i.pu(e),i}yu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.mu({path:r,gu:!1});return i.Ru(),i}wu(e){return this.mu({path:void 0,gu:!0})}Su(e){return by(e,this.settings.methodName,this.settings.bu||!1,this.path,this.settings.Du)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ru(){if(this.path)for(let e=0;e<this.path.length;e++)this.pu(this.path.get(e))}pu(e){if(e.length===0)throw this.Su("Document fields must not be empty");if(sU(this.Vu)&&bie.test(e))throw this.Su('Document fields cannot begin and end with "__"')}}class Sie{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||gp(e)}Cu(e,n,r,i=!1){return new Tv({Vu:e,methodName:n,Du:r,path:wt.emptyPath(),gu:!1,bu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function yl(t){const e=t._freezeSettings(),n=gp(t._databaseId);return new Sie(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Iv(t,e,n,r,i,s={}){const o=t.Cu(s.merge||s.mergeFields?2:0,e,n,i);zI("Data must be an object, but it was:",o,r);const a=lU(r,o);let l,c;if(s.merge)l=new cr(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const u=[];for(const d of s.mergeFields){const h=zx(e,d,n);if(!o.contains(h))throw new z(L.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);uU(u,h)||u.push(h)}l=new cr(u),c=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=o.fieldTransforms;return new xie(new bn(a),l,c)}class _p extends ml{_toFieldTransform(e){if(e.Vu!==2)throw e.Vu===1?e.Su(`${this._methodName}() can only appear at the top level of your update data`):e.Su(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof _p}}function oU(t,e,n){return new Tv({Vu:3,Du:e.settings.Du,methodName:t._methodName,gu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class VI extends ml{_toFieldTransform(e){return new hp(e.path,new Hc)}isEqual(e){return e instanceof VI}}class FI extends ml{constructor(e,n){super(e),this.vu=n}_toFieldTransform(e){const n=oU(this,e,!0),r=this.vu.map(s=>_l(s,n)),i=new Ga(r);return new hp(e.path,i)}isEqual(e){return e instanceof FI&&$h(this.vu,e.vu)}}class jI extends ml{constructor(e,n){super(e),this.vu=n}_toFieldTransform(e){const n=oU(this,e,!0),r=this.vu.map(s=>_l(s,n)),i=new Ka(r);return new hp(e.path,i)}isEqual(e){return e instanceof jI&&$h(this.vu,e.vu)}}class $I extends ml{constructor(e,n){super(e),this.Fu=n}_toFieldTransform(e){const n=new qc(e.serializer,Mj(e.serializer,this.Fu));return new hp(e.path,n)}isEqual(e){return e instanceof $I&&this.Fu===e.Fu}}function UI(t,e,n,r){const i=t.Cu(1,e,n);zI("Data must be an object, but it was:",i,r);const s=[],o=bn.empty();gl(r,(l,c)=>{const u=WI(e,l,n);c=fe(c);const d=i.yu(u);if(c instanceof _p)s.push(u);else{const h=_l(c,d);h!=null&&(s.push(u),o.set(u,h))}});const a=new cr(s);return new iU(o,a,i.fieldTransforms)}function BI(t,e,n,r,i,s){const o=t.Cu(1,e,n),a=[zx(e,r,n)],l=[i];if(s.length%2!=0)throw new z(L.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<s.length;h+=2)a.push(zx(e,s[h])),l.push(s[h+1]);const c=[],u=bn.empty();for(let h=a.length-1;h>=0;--h)if(!uU(c,a[h])){const f=a[h];let g=l[h];g=fe(g);const m=o.yu(f);if(g instanceof _p)c.push(f);else{const v=_l(g,m);v!=null&&(c.push(f),u.set(f,v))}}const d=new cr(c);return new iU(u,d,o.fieldTransforms)}function aU(t,e,n,r=!1){return _l(n,t.Cu(r?4:3,e))}function _l(t,e){if(cU(t=fe(t)))return zI("Unsupported field value:",e,t),lU(t,e);if(t instanceof ml)return function(r,i){if(!sU(i.Vu))throw i.Su(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Su(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.gu&&e.Vu!==4)throw e.Su("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=_l(a,i.wu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=fe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Mj(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=pt.fromDate(r);return{timestampValue:Gc(i.serializer,s)}}if(r instanceof pt){const s=new pt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Gc(i.serializer,s)}}if(r instanceof Ev)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof zi)return{bytesValue:Gj(i.serializer,r._byteString)};if(r instanceof Tt){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Su(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:cI(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Su(`Unsupported field value: ${Sv(r)}`)}(t,e)}function lU(t,e){const n={};return gj(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):gl(t,(r,i)=>{const s=_l(i,e.fu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function cU(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof pt||t instanceof Ev||t instanceof zi||t instanceof Tt||t instanceof ml)}function zI(t,e,n){if(!cU(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Sv(n);throw r==="an object"?e.Su(t+" a custom object"):e.Su(t+" "+r)}}function zx(t,e,n){if((e=fe(e))instanceof Ro)return e._internalPath;if(typeof e=="string")return WI(t,e);throw by("Field path arguments must be of type string or ",t,!1,void 0,n)}const Eie=new RegExp("[~\\*/\\[\\]]");function WI(t,e,n){if(e.search(Eie)>=0)throw by(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ro(...e.split("."))._internalPath}catch{throw by(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function by(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new z(L.INVALID_ARGUMENT,a+t+l)}function uU(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ff{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Tt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Tie(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Cv("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Tie extends ff{data(){return super.data()}}function Cv(t,e){return typeof e=="string"?WI(t,e):e instanceof Ro?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dU(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new z(L.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class HI{}class vp extends HI{}function js(t,e,...n){let r=[];e instanceof HI&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof qI).length,a=s.filter(l=>l instanceof Rv).length;if(o>1||o>0&&a>0)throw new z(L.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Rv extends vp{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Rv(e,n,r)}_apply(e){const n=this._parse(e);return fU(e._query,n),new Xn(e.firestore,e.converter,Rx(e._query,n))}_parse(e){const n=yl(e.firestore);return function(s,o,a,l,c,u,d){let h;if(c.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new z(L.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){OA(d,u);const f=[];for(const g of d)f.push(DA(l,s,g));h={arrayValue:{values:f}}}else h=DA(l,s,d)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||OA(d,u),h=aU(a,o,d,u==="in"||u==="not-in");return Pe.create(c,u,h)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Iie(t,e,n){const r=e,i=Cv("where",t);return Rv._create(i,r,n)}class qI extends HI{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new qI(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:qe.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)fU(o,l),o=Rx(o,l)}(e._query,n),new Xn(e.firestore,e.converter,Rx(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class GI extends vp{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new GI(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new z(L.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new z(L.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new uf(s,o)}(e._query,this._field,this._direction);return new Xn(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new ks(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function Cie(t,e="asc"){const n=e,r=Cv("orderBy",t);return GI._create(r,n)}class kv extends vp{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new kv(e,n,r)}_apply(e){return new Xn(e.firestore,e.converter,hy(e._query,this._limit,this._limitType))}}function Rie(t){return K$("limit",t),kv._create("limit",t,"F")}function kie(t){return K$("limitToLast",t),kv._create("limitToLast",t,"L")}class Av extends vp{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Av(e,n,r)}_apply(e){const n=hU(e,this.type,this._docOrFields,this._inclusive);return new Xn(e.firestore,e.converter,function(i,s){return new ks(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)}(e._query,n))}}function Aie(...t){return Av._create("startAt",t,!0)}function Pie(...t){return Av._create("startAfter",t,!1)}class Pv extends vp{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Pv(e,n,r)}_apply(e){const n=hU(e,this.type,this._docOrFields,this._inclusive);return new Xn(e.firestore,e.converter,function(i,s){return new ks(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)}(e._query,n))}}function Nie(...t){return Pv._create("endBefore",t,!1)}function Die(...t){return Pv._create("endAt",t,!0)}function hU(t,e,n,r){if(n[0]=fe(n[0]),n[0]instanceof ff)return function(s,o,a,l,c){if(!l)throw new z(L.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const u=[];for(const d of wc(s))if(d.field.isKeyField())u.push(Ha(o,l.key));else{const h=l.data.field(d.field);if(fv(h))throw new z(L.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+d.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(h===null){const f=d.field.canonicalString();throw new z(L.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${f}' (used as the orderBy) does not exist.`)}u.push(h)}return new Io(u,c)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=yl(t.firestore);return function(o,a,l,c,u,d){const h=o.explicitOrderBy;if(u.length>h.length)throw new z(L.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const f=[];for(let g=0;g<u.length;g++){const m=u[g];if(h[g].field.isKeyField()){if(typeof m!="string")throw new z(L.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof m}`);if(!nI(o)&&m.indexOf("/")!==-1)throw new z(L.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${m}' contains a slash.`);const v=o.path.child(Ae.fromString(m));if(!J.isDocumentKey(v))throw new z(L.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${v}' is not because it contains an odd number of segments.`);const _=new J(v);f.push(Ha(a,_))}else{const v=aU(l,c,m);f.push(v)}}return new Io(f,d)}(t._query,t.firestore._databaseId,i,e,n,r)}}function DA(t,e,n){if(typeof(n=fe(n))=="string"){if(n==="")throw new z(L.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!nI(e)&&n.indexOf("/")!==-1)throw new z(L.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ae.fromString(n));if(!J.isDocumentKey(r))throw new z(L.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ha(t,new J(r))}if(n instanceof Tt)return Ha(t,n._key);throw new z(L.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Sv(n)}.`)}function OA(t,e){if(!Array.isArray(t)||t.length===0)throw new z(L.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function fU(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new z(L.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new z(L.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class KI{convertValue(e,n="none"){switch(Wa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return At(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(So(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw se()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return gl(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new Ev(At(e.latitude),At(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=eI(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(af(e));default:return null}}convertTimestamp(e){const n=xo(e);return new pt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ae.fromString(e);ue(i$(r));const i=new Eo(r.get(1),r.get(3)),s=new J(r.popFirst(5));return i.isEqual(n)||$t(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nv(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class Oie extends KI{constructor(e){super(),this.firestore=e}convertBytes(e){return new zi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Tt(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let Ss=class extends ff{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new lh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Cv("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},lh=class extends Ss{data(e={}){return super.data(e)}},ko=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new va(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new lh(this._firestore,this._userDataWriter,r.key,r,new va(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new z(L.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new lh(i._firestore,i._userDataWriter,a.doc.key,a.doc,new va(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new lh(i._firestore,i._userDataWriter,a.doc.key,a.doc,new va(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,u=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:Mie(a.type),doc:l,oldIndex:c,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function Mie(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return se()}}function pU(t,e){return t instanceof Ss&&e instanceof Ss?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof ko&&e instanceof ko&&t._firestore===e._firestore&&eU(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lie(t){t=$e(t,Tt);const e=$e(t.firestore,Lt);return W$(gn(e),t._key).then(n=>QI(e,t,n))}class vl extends KI{constructor(e){super(),this.firestore=e}convertBytes(e){return new zi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Tt(this.firestore,null,n)}}function Vie(t){t=$e(t,Tt);const e=$e(t.firestore,Lt),n=gn(e),r=new vl(e);return rie(n,t._key).then(i=>new Ss(e,r,t._key,i,new va(i!==null&&i.hasLocalMutations,!0),t.converter))}function Fie(t){t=$e(t,Tt);const e=$e(t.firestore,Lt);return W$(gn(e),t._key,{source:"server"}).then(n=>QI(e,t,n))}function jie(t){t=$e(t,Xn);const e=$e(t.firestore,Lt),n=gn(e),r=new vl(e);return dU(t._query),H$(n,t._query).then(i=>new ko(e,r,t,i))}function $ie(t){t=$e(t,Xn);const e=$e(t.firestore,Lt),n=gn(e),r=new vl(e);return iie(n,t._query).then(i=>new ko(e,r,t,i))}function Uie(t){t=$e(t,Xn);const e=$e(t.firestore,Lt),n=gn(e),r=new vl(e);return H$(n,t._query,{source:"server"}).then(i=>new ko(e,r,t,i))}function MA(t,e,n){t=$e(t,Tt);const r=$e(t.firestore,Lt),i=Nv(t.converter,e,n);return wp(r,[Iv(yl(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,bt.none())])}function LA(t,e,n,...r){t=$e(t,Tt);const i=$e(t.firestore,Lt),s=yl(i);let o;return o=typeof(e=fe(e))=="string"||e instanceof Ro?BI(s,"updateDoc",t._key,e,n,r):UI(s,"updateDoc",t._key,e),wp(i,[o.toMutation(t._key,bt.exists(!0))])}function Bie(t){return wp($e(t.firestore,Lt),[new Su(t._key,bt.none())])}function zie(t,e){const n=$e(t.firestore,Lt),r=wy(t),i=Nv(t.converter,e);return wp(n,[Iv(yl(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,bt.exists(!1))]).then(()=>r)}function gU(t,...e){var n,r,i;t=fe(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||Bx(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(Bx(e[o])){const d=e[o];e[o]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[o+1]=(r=d.error)===null||r===void 0?void 0:r.bind(d),e[o+2]=(i=d.complete)===null||i===void 0?void 0:i.bind(d)}let l,c,u;if(t instanceof Tt)c=$e(t.firestore,Lt),u=bu(t._key.path),l={next:d=>{e[o]&&e[o](QI(c,t,d))},error:e[o+1],complete:e[o+2]};else{const d=$e(t,Xn);c=$e(d.firestore,Lt),u=d._query;const h=new vl(c);l={next:f=>{e[o]&&e[o](new ko(c,h,d,f))},error:e[o+1],complete:e[o+2]},dU(t._query)}return function(h,f,g,m){const v=new bv(m),_=new II(f,v,g);return h.asyncQueue.enqueueAndForget(async()=>SI(await Zc(h),_)),()=>{v.Qa(),h.asyncQueue.enqueueAndForget(async()=>EI(await Zc(h),_))}}(gn(c),u,a,l)}function Wie(t,e){return sie(gn(t=$e(t,Lt)),Bx(e)?e:{next:e})}function wp(t,e){return function(r,i){const s=new dn;return r.asyncQueue.enqueueAndForget(async()=>Dre(await MI(r),i,s)),s.promise}(gn(t),e)}function QI(t,e,n){const r=n.docs.get(e._key),i=new vl(t);return new Ss(t,i,e._key,r,new va(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hie={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qie=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=yl(e)}set(e,n,r){this._verifyNotCommitted();const i=qs(e,this._firestore),s=Nv(i.converter,n,r),o=Iv(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,bt.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=qs(e,this._firestore);let o;return o=typeof(n=fe(n))=="string"||n instanceof Ro?BI(this._dataReader,"WriteBatch.update",s._key,n,r,i):UI(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,bt.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=qs(e,this._firestore);return this._mutations=this._mutations.concat(new Su(n._key,bt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new z(L.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function qs(t,e){if((t=fe(t)).firestore!==e)throw new z(L.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gie=class extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=yl(n)}get(n){const r=qs(n,this._firestore),i=new Oie(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||s.length!==1)return se();const o=s[0];if(o.isFoundDocument())return new ff(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new ff(this._firestore,i,r._key,null,r.converter);throw se()})}set(n,r,i){const s=qs(n,this._firestore),o=Nv(s.converter,r,i),a=Iv(this._dataReader,"Transaction.set",s._key,o,s.converter!==null,i);return this._transaction.set(s._key,a),this}update(n,r,i,...s){const o=qs(n,this._firestore);let a;return a=typeof(r=fe(r))=="string"||r instanceof Ro?BI(this._dataReader,"Transaction.update",o._key,r,i,s):UI(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(n){const r=qs(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=qs(e,this._firestore),r=new vl(this._firestore);return super.get(e).then(i=>new Ss(this._firestore,r,n._key,i._document,new va(!1,!1),n.converter))}};function Kie(t,e,n){t=$e(t,Lt);const r=Object.assign(Object.assign({},Hie),n);return function(s){if(s.maxAttempts<1)throw new z(L.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){const l=new dn;return s.asyncQueue.enqueueAndForget(async()=>{const c=await eie(s);new Jre(s.asyncQueue,c,a,o,l).Ya()}),l.promise}(gn(t),i=>e(new Gie(t,i)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qie(){return new _p("deleteField")}function Yie(){return new VI("serverTimestamp")}function Xie(...t){return new FI("arrayUnion",t)}function Jie(...t){return new jI("arrayRemove",t)}function Zie(t){return new $I("increment",t)}(function(e,n=!0){(function(i){wu=i})(Is),ws(new hi("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Lt(new ate(r.getProvider("auth-internal")),new dte(r.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new z(L.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Eo(c.options.projectId,u)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Hr(kk,"4.5.0",e),Hr(kk,"4.5.0","esm2017")})();const ese="@firebase/firestore-compat",tse="0.3.27";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YI(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new z("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VA(){if(typeof Uint8Array>"u")throw new z("unimplemented","Uint8Arrays are not available in this environment.")}function FA(){if(!Lte())throw new z("unimplemented","Blobs are unavailable in Firestore in this environment.")}let mU=class Wx{constructor(e){this._delegate=e}static fromBase64String(e){return FA(),new Wx(zi.fromBase64String(e))}static fromUint8Array(e){return VA(),new Wx(zi.fromUint8Array(e))}toBase64(){return FA(),this._delegate.toBase64()}toUint8Array(){return VA(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hx(t){return nse(t,["next","error","complete"])}function nse(t,e){if(typeof t!="object"||t===null)return!1;const n=t;for(const r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rse{enableIndexedDbPersistence(e,n){return fie(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return pie(e._delegate)}clearIndexedDbPersistence(e){return gie(e._delegate)}}class yU{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Eo||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&gi("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){lie(this._delegate,e,n,r)}enableNetwork(){return yie(this._delegate)}disableNetwork(){return _ie(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,G$("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return mie(this._delegate)}onSnapshotsInSync(e){return Wie(this._delegate,e)}get app(){if(!this._appCompat)throw new z("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new eu(this,J$(this._delegate,e))}catch(n){throw Wn(n,"collection()","Firestore.collection()")}}doc(e){try{return new Br(this,wy(this._delegate,e))}catch(n){throw Wn(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new zn(this,cie(this._delegate,e))}catch(n){throw Wn(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return Kie(this._delegate,n=>e(new _U(this,n)))}batch(){return gn(this._delegate),new vU(new qie(this._delegate,e=>wp(this._delegate,e)))}loadBundle(e){return vie(this._delegate,e)}namedQuery(e){return wie(this._delegate,e).then(n=>n?new zn(this,n):null)}}class Dv extends KI{constructor(e){super(),this.firestore=e}convertBytes(e){return new mU(new zi(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return Br.forKey(n,this.firestore,null)}}function ise(t){rte(t)}class _U{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new Dv(e)}get(e){const n=wa(e);return this._delegate.get(n).then(r=>new pf(this._firestore,new Ss(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){const i=wa(e);return r?(YI("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=wa(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=wa(e);return this._delegate.delete(n),this}}class vU{constructor(e){this._delegate=e}set(e,n,r){const i=wa(e);return r?(YI("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=wa(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=wa(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class Ja{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){const r=new lh(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new gf(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const r=Ja.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(n);return s||(s=new Ja(e,new Dv(e),n),i.set(n,s)),s}}Ja.INSTANCES=new WeakMap;class Br{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Dv(e)}static forPath(e,n,r){if(e.length%2!==0)throw new z("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Br(n,new Tt(n._delegate,r,new J(e)))}static forKey(e,n,r){return new Br(n,new Tt(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new eu(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new eu(this.firestore,J$(this._delegate,e))}catch(n){throw Wn(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=fe(e),e instanceof Tt?Z$(this._delegate,e):!1}set(e,n){n=YI("DocumentReference.set",n);try{return n?MA(this._delegate,e,n):MA(this._delegate,e)}catch(r){throw Wn(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?LA(this._delegate,e):LA(this._delegate,e,n,...r)}catch(i){throw Wn(i,"updateDoc()","DocumentReference.update()")}}delete(){return Bie(this._delegate)}onSnapshot(...e){const n=wU(e),r=bU(e,i=>new pf(this.firestore,new Ss(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return gU(this._delegate,n,r)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=Vie(this._delegate):(e==null?void 0:e.source)==="server"?n=Fie(this._delegate):n=Lie(this._delegate),n.then(r=>new pf(this.firestore,new Ss(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Br(this.firestore,e?this._delegate.withConverter(Ja.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Wn(t,e,n){return t.message=t.message.replace(e,n),t}function wU(t){for(const e of t)if(typeof e=="object"&&!Hx(e))return e;return{}}function bU(t,e){var n,r;let i;return Hx(t[0])?i=t[0]:Hx(t[1])?i=t[1]:typeof t[0]=="function"?i={next:t[0],error:t[1],complete:t[2]}:i={next:t[1],error:t[2],complete:t[3]},{next:s=>{i.next&&i.next(e(s))},error:(n=i.error)===null||n===void 0?void 0:n.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}class pf{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new Br(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return pU(this._delegate,e._delegate)}}class gf extends pf{data(e){const n=this._delegate.data(e);return this._delegate._converter||ite(n!==void 0),n}}class zn{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Dv(e)}where(e,n,r){try{return new zn(this.firestore,js(this._delegate,Iie(e,n,r)))}catch(i){throw Wn(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new zn(this.firestore,js(this._delegate,Cie(e,n)))}catch(r){throw Wn(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new zn(this.firestore,js(this._delegate,Rie(e)))}catch(n){throw Wn(n,"limit()","Query.limit()")}}limitToLast(e){try{return new zn(this.firestore,js(this._delegate,kie(e)))}catch(n){throw Wn(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new zn(this.firestore,js(this._delegate,Aie(...e)))}catch(n){throw Wn(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new zn(this.firestore,js(this._delegate,Pie(...e)))}catch(n){throw Wn(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new zn(this.firestore,js(this._delegate,Nie(...e)))}catch(n){throw Wn(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new zn(this.firestore,js(this._delegate,Die(...e)))}catch(n){throw Wn(n,"endAt()","Query.endAt()")}}isEqual(e){return eU(this._delegate,e._delegate)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=$ie(this._delegate):(e==null?void 0:e.source)==="server"?n=Uie(this._delegate):n=jie(this._delegate),n.then(r=>new qx(this.firestore,new ko(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const n=wU(e),r=bU(e,i=>new qx(this.firestore,new ko(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return gU(this._delegate,n,r)}withConverter(e){return new zn(this.firestore,e?this._delegate.withConverter(Ja.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class sse{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new gf(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class qx{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new zn(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new gf(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new sse(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new gf(this._firestore,r))})}isEqual(e){return pU(this._delegate,e._delegate)}}class eu extends zn{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Br(this.firestore,e):null}doc(e){try{return e===void 0?new Br(this.firestore,wy(this._delegate)):new Br(this.firestore,wy(this._delegate,e))}catch(n){throw Wn(n,"doc()","CollectionReference.doc()")}}add(e){return zie(this._delegate,e).then(n=>new Br(this.firestore,n))}isEqual(e){return Z$(this._delegate,e._delegate)}withConverter(e){return new eu(this.firestore,e?this._delegate.withConverter(Ja.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function wa(t){return $e(t,Tt)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(...e){this._delegate=new Ro(...e)}static documentId(){return new XI(wt.keyField().canonicalString())}isEqual(e){return e=fe(e),e instanceof Ro?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha{constructor(e){this._delegate=e}static serverTimestamp(){const e=Yie();return e._methodName="FieldValue.serverTimestamp",new ha(e)}static delete(){const e=Qie();return e._methodName="FieldValue.delete",new ha(e)}static arrayUnion(...e){const n=Xie(...e);return n._methodName="FieldValue.arrayUnion",new ha(n)}static arrayRemove(...e){const n=Jie(...e);return n._methodName="FieldValue.arrayRemove",new ha(n)}static increment(e){const n=Zie(e);return n._methodName="FieldValue.increment",new ha(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ose={Firestore:yU,GeoPoint:Ev,Timestamp:pt,Blob:mU,Transaction:_U,WriteBatch:vU,DocumentReference:Br,DocumentSnapshot:pf,Query:zn,QueryDocumentSnapshot:gf,QuerySnapshot:qx,CollectionReference:eu,FieldPath:XI,FieldValue:ha,setLogLevel:ise,CACHE_SIZE_UNLIMITED:hie};function ase(t,e){t.INTERNAL.registerComponent(new hi("firestore-compat",n=>{const r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},ose)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lse(t){ase(t,(e,n)=>new yU(e,n,new rse)),t.registerVersion(ese,tse)}lse(Bt);const cse={apiKey:"AIzaSyCDj5lHl9qwaIhVVxKFyK-m-ENvw8bKvlk",authDomain:"cryptopulse-e45b9.firebaseapp.com",projectId:"cryptopulse-e45b9",storageBucket:"cryptopulse-e45b9.appspot.com",messagingSenderId:"308291913891",appId:"1:308291913891:web:fa95a3feb4999f921c5716",measurementId:"G-FGVTZMFMSL"},use=Bt.initializeApp(cse),Ao=use.auth();async function dse(){const t=Bt.firestore();try{const e=await t.collection("cryptocurrencies").get(),n={},r=[];return e.forEach(i=>{i.id!=="updatedTimeStamp"?r.push(i.data()):n.updatedTime=i.data().timeStamp}),n.currencies=r,n}catch(e){console.error("Error fetching cryptocurrency data from Firestore:",e)}}async function hse(){const t=Bt.firestore();try{const e=await t.collection("cryptonews").get(),n={},r=[];return e.forEach(i=>{i.id!=="updatedTimeStamp"?r.push(i.data()):n.updatedTime=i.data().timeStamp}),n.news=r,n}catch(e){console.error("Error fetching crypto news data from Firestore:",e)}}async function fse(t,e){const n=Bt.firestore();try{await n.collection("users").doc(t.uid).set({uid:t.uid,email:t.email,phone:e.phone,displayName:t.displayName,photoURL:t.photoURL,createdAt:Bt.firestore.FieldValue.serverTimestamp()})}catch(r){console.error("Error creating new user in Firestore:",r)}}async function pse(t){const e=Bt.firestore();try{const n=e.collection("users").doc(t.uid),i=(await n.get()).data()||{},a=(await n.collection("wallet").get()).docs.map(h=>({id:h.id,...h.data()})),u=(await n.collection("transactions").get()).docs.map(h=>({id:h.id,...h.data()}));return{...i,wallet:a,transactions:u}}catch(n){return console.error("Error fetching user data and collections from Firestore:",n),null}}async function gse(t,e,n,r,i,s){const o=Bt.firestore(),a=o.collection("users").doc(t.uid).collection("wallet").doc(e.id),l=o.collection("users").doc(t.uid).collection("transactions").doc();try{await o.runTransaction(async c=>{const u=await c.get(a),h=(u.data()?u.data().amount:0)+n;u.exists?c.update(a,{amount:h}):c.set(a,{id:e.id,amount:h});const f={cardNumber:"**** **** **** "+i.cardNumber.slice(15,19),cardName:i.cardName,expDate:i.expDate,ccv:i.ccv};c.set(l,{accountBalance:s,currencyId:e.id,transactionType:"buy",amount:n,price:r,timestamp:Bt.firestore.FieldValue.serverTimestamp(),creditCardDetails:f})}),console.log("Transaction successfully committed!")}catch(c){console.log("Transaction failed: ",c)}}async function mse(t,e,n,r,i){const s=Bt.firestore(),o=s.collection("users").doc(t.uid).collection("wallet").doc(n.id),a=s.collection("users").doc(t.uid).collection("wallet").doc(e.id),l=s.collection("users").doc(t.uid).collection("transactions").doc();try{await s.runTransaction(async c=>{const u=await c.get(a),d=await c.get(o),h=u.data()?u.data().amount:0,f=d.data()?d.data().amount:0;if(h<r)return console.log("Insufficient funds!"),"Error: Insufficient funds!";const g=h-r,m=f+i;c.update(a,{amount:g}),d.exists?c.update(o,{amount:m}):c.set(o,{id:n.id,amount:m}),c.set(l,{soldCurrency:{id:e.id,amount:r},boughtCurrency:{id:n.id,amount:i},transactionType:"trade",timestamp:Bt.firestore.FieldValue.serverTimestamp()})}),console.log("Transaction successfully committed!")}catch(c){console.log("Transaction failed: ",c)}}async function yse(t,e,n,r,i){const s=Bt.firestore(),o=s.collection("users").doc(t.uid).collection("wallet").doc(e.id),a=s.collection("users").doc(t.uid).collection("transactions").doc();try{await s.runTransaction(async l=>{const c=await l.get(o),u=c.data()?c.data().amount:0;if(u<n)return console.log("Insufficient funds!"),"Error: Insufficient funds!";const d=u-n;c.exists?l.update(o,{amount:d}):l.set(o,{id:e.id,amount:d}),l.set(a,{accountBalance:i,currencyId:e.id,amount:n,price:e.current_price,bankAccountDetails:r,transactionType:"withdraw",timestamp:Bt.firestore.FieldValue.serverTimestamp()})}),console.log("Transaction successfully committed!")}catch(l){console.log("Transaction failed: ",l)}}function mi(t){return new pt(t.seconds,t.nanoseconds).toDate()}async function _se(){const t=Bt.firestore(),e=Ao.currentUser,n=t.collection("users").doc(e.uid);await t.runTransaction(async r=>{(await r.get(n)).exists&&r.delete(n),await e.delete()})}async function vse(t,e,n,r,i){const s=Bt.firestore(),o=Bt.auth().currentUser,a=s.collection("users").doc(o.uid);if(i){try{const l=Bt.auth.EmailAuthProvider.credential(o.email,r);await o.reauthenticateWithCredential(l)}catch(l){throw new Error("Re-authentication failed: "+l.message)}await CV(o,i)}await s.runTransaction(async l=>{if(!(await l.get(a)).exists)throw new Error("User document does not exist!");l.update(a,{displayName:`${t} ${e}`,phone:n})}),await yT(o,{displayName:`${t} ${e}`}),console.log("User account successfully updated!")}const wse=({isAuthenticated:t})=>{const[e,n]=_o($o),[r,i]=_o(XE);S.useEffect(()=>{t?(e.data.length===0&&s(),r.data.length===0&&o()):(n({data:[],filterdData:[],updatedTime:null}),i({data:[],filterdData:[],updatedTime:null}))},[t]);async function s(){try{const a=await dse();console.log(a),n({data:a.currencies,filterdData:a.currencies,updatedTime:a.updatedTime})}catch(a){console.log("Transaction failed: ",a)}}async function o(){try{const a=await hse();console.log(a),i({data:a.news,filterdData:a.news,updatedTime:a.updatedTime})}catch(a){console.log("Transaction failed: ",a)}}return t?p.jsx($b,{}):p.jsx(rc,{to:"/welcome",replace:!0})};function bse(){if(console&&console.warn){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];typeof e[0]=="string"&&(e[0]=`react-i18next:: ${e[0]}`),console.warn(...e)}}const jA={};function Gx(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];typeof e[0]=="string"&&jA[e[0]]||(typeof e[0]=="string"&&(jA[e[0]]=new Date),bse(...e))}const xU=(t,e)=>()=>{if(t.isInitialized)e();else{const n=()=>{setTimeout(()=>{t.off("initialized",n)},0),e()};t.on("initialized",n)}};function $A(t,e,n){t.loadNamespaces(e,xU(t,n))}function UA(t,e,n,r){typeof n=="string"&&(n=[n]),n.forEach(i=>{t.options.ns.indexOf(i)<0&&t.options.ns.push(i)}),t.loadLanguages(e,xU(t,r))}function xse(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=e.languages[0],i=e.options?e.options.fallbackLng:!1,s=e.languages[e.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const o=(a,l)=>{const c=e.services.backendConnector.state[`${a}|${l}`];return c===-1||c===2};return n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&e.services.backendConnector.backend&&e.isLanguageChangingTo&&!o(e.isLanguageChangingTo,t)?!1:!!(e.hasResourceBundle(r,t)||!e.services.backendConnector.backend||e.options.resources&&!e.options.partialBundledLanguages||o(r,t)&&(!i||o(s,t)))}function Sse(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return!e.languages||!e.languages.length?(Gx("i18n.languages were undefined or empty",e.languages),!0):e.options.ignoreJSONStructure!==void 0?e.hasLoadedNamespace(t,{lng:n.lng,precheck:(i,s)=>{if(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&i.services.backendConnector.backend&&i.isLanguageChangingTo&&!s(i.isLanguageChangingTo,t))return!1}}):xse(t,e,n)}const Ese=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,Tse={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},Ise=t=>Tse[t],Cse=t=>t.replace(Ese,Ise);let Kx={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:Cse};function Rse(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Kx={...Kx,...t}}function kse(){return Kx}let SU;function Ase(t){SU=t}function Pse(){return SU}const Nse={type:"3rdParty",init(t){Rse(t.options.react),Ase(t)}},Dse=S.createContext();class Ose{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(n=>{this.usedNamespaces[n]||(this.usedNamespaces[n]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const Mse=(t,e)=>{const n=S.useRef();return S.useEffect(()=>{n.current=e?n.current:t},[t,e]),n.current};function EU(t,e,n,r){return t.getFixedT(e,n,r)}function Lse(t,e,n,r){return S.useCallback(EU(t,e,n,r),[t,e,n,r])}function Qe(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{i18n:n}=e,{i18n:r,defaultNS:i}=S.useContext(Dse)||{},s=n||r||Pse();if(s&&!s.reportNamespaces&&(s.reportNamespaces=new Ose),!s){Gx("You will need to pass in an i18next instance by using initReactI18next");const b=(T,I)=>typeof I=="string"?I:I&&typeof I=="object"&&typeof I.defaultValue=="string"?I.defaultValue:Array.isArray(T)?T[T.length-1]:T,x=[b,{},!1];return x.t=b,x.i18n={},x.ready=!1,x}s.options.react&&s.options.react.wait!==void 0&&Gx("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const o={...kse(),...s.options.react,...e},{useSuspense:a,keyPrefix:l}=o;let c=t||i||s.options&&s.options.defaultNS;c=typeof c=="string"?[c]:c||["translation"],s.reportNamespaces.addUsedNamespaces&&s.reportNamespaces.addUsedNamespaces(c);const u=(s.isInitialized||s.initializedStoreOnce)&&c.every(b=>Sse(b,s,o)),d=Lse(s,e.lng||null,o.nsMode==="fallback"?c:c[0],l),h=()=>d,f=()=>EU(s,e.lng||null,o.nsMode==="fallback"?c:c[0],l),[g,m]=S.useState(h);let v=c.join();e.lng&&(v=`${e.lng}${v}`);const _=Mse(v),y=S.useRef(!0);S.useEffect(()=>{const{bindI18n:b,bindI18nStore:x}=o;y.current=!0,!u&&!a&&(e.lng?UA(s,e.lng,c,()=>{y.current&&m(f)}):$A(s,c,()=>{y.current&&m(f)})),u&&_&&_!==v&&y.current&&m(f);function T(){y.current&&m(f)}return b&&s&&s.on(b,T),x&&s&&s.store.on(x,T),()=>{y.current=!1,b&&s&&b.split(" ").forEach(I=>s.off(I,T)),x&&s&&x.split(" ").forEach(I=>s.store.off(I,T))}},[s,v]),S.useEffect(()=>{y.current&&u&&m(h)},[s,l,u]);const w=[g,s,u];if(w.t=g,w.i18n=s,w.ready=u,u||!u&&!a)return w;throw new Promise(b=>{e.lng?UA(s,e.lng,c,()=>b()):$A(s,c,()=>b())})}const Vse=t=>new Promise((e,n)=>{const r=document.createElement("script");r.src=t,r.async=!0,r.onload=()=>e(r),r.onerror=()=>n(new Error(`Script load error for ${t}`)),document.body.appendChild(r)}),TU=()=>(S.useEffect(()=>{Vse("https://cdn.jsdelivr.net/npm/tsparticles@1.37.4/tsparticles.min.js").then(()=>{window.tsParticles.load("tsparticles",{interactivity:{events:{onClick:{enable:!0,mode:"push"},onHover:{enable:!0,mode:"bubble"},resize:!0},modes:{bubble:{distance:400,duration:2,opacity:.8,size:20},push:{quantity:4},repulse:{distance:200,duration:.4}}},particles:{color:{value:"#4bc0c0",opacity:1},links:{color:"#4bc0c0",distance:150,enable:!0,opacity:.5,width:1},collisions:{enable:!0},move:{direction:"inside",enable:!0,outMode:"bounce",random:!1,speed:2,straight:!0},number:{density:{enable:!0,value_area:800},value:80},opacity:{value:.5},shape:{type:"circle"},size:{random:!1,value:5}}})}).catch(t=>console.error("Script loading failed.",t))},[]),p.jsx("div",{id:"tsparticles",className:"absolute top-0 left-0 w-full h-full"})),Fse="/assets/logoB-BNS7NqN4.png",bp="/assets/logo-DRWUd7yX.png",jse=()=>{const{t}=Qe(),[e,n]=S.useState(!1);return S.useEffect(()=>{localStorage.getItem("theme")==="dark"&&n(!0)},[]),p.jsxs("div",{className:`w-screen h-screen flex flex-col justify-center items-center ${e?"bg-gray-800":"bg-white"}`,children:[p.jsxs("div",{className:" flex flex-col justify-center items-center",children:[p.jsx("img",{className:"flex justify-center items-center max-w-48 bg-transparent",loading:"lazy",src:bp,alt:t("cryptoPulse")+" logo"}),p.jsx("div",{className:"absolute loader"})]}),p.jsx("h1",{className:`m-10 text-5xl font-bold ${e?"text-gray-100":"text-gray-800"}`,children:t("loading")})]})},IU=S.createContext();function Ns(){return S.useContext(IU)}function $se({children:t}){const[e,n]=S.useState(),[r,i]=S.useState(!0),[s,o]=S.useState({displayName:"",email:"",photoURL:"",uid:"",wallet:[],Transactions:[]});S.useEffect(()=>{const c=yX(Ao,u=>{n(u),u?a(u):i(!1),console.log("===================================="),console.log("User:",u),console.log("====================================")});return()=>{c()}},[]);const a=async c=>{if(c){const u=await pse(c);o(u)}i(!1)},l={currentUser:e,currentUserData:s,loading:r,fetchUserData:a};return p.jsx(IU.Provider,{value:l,children:r?p.jsx(jse,{}):t})}function Use(){const{t}=Qe(),{currentUser:e}=Ns(),[n,r]=S.useState("");return S.useEffect(()=>{const i=new Date().getHours();let s;i<12?s="GoodMorning":i<18?s="GoodAfternoon":s="GoodEvening",r(s)},[]),S.useEffect(()=>(document.title=t("home")+" | "+t("cryptoPulse"),()=>{document.title=t("cryptoPulse")}),[]),p.jsxs("div",{className:"text-slate-950 dark:text-white content overflow-hidden",children:[p.jsx(TU,{}),p.jsxs("div",{className:"h-full flex flex-col md:flex-row justify-start md:justify-center items-center mt-24 md:m-0 md:left-1/2 md:-translate-x-[20%] gap-10",children:[p.jsx("img",{src:Fse,loading:"lazy",alt:"CryptoPulse logo",className:"flex h-auto w-auto max-h-80 md:max-h-[1500px]"}),p.jsxs("div",{className:"flex flex-col w-full text-center md:text-start gap-1 md:gap-5",children:[p.jsxs("h1",{className:"text-4xl md:text-6xl font-thin whitespace-nowrap",children:[t(n),"!"]}),p.jsx("h1",{className:"text-6xl md:text-8xl font-bold whitespace-nowrap",children:e.displayName})]})]})]})}function wl({title:t,message:e,isVisible:n,onClose:r,messageType:i,action:s}){const{t:o}=Qe();if(!n)return null;const a=()=>i===void 0?p.jsx("button",{className:"w-fit text-black dark:text-white bg-gray-300 dark:bg-gray-500 p-1.5 hover:bg-gray-200 dark:hover:bg-gray-400 rounded-lg whitespace-nowrap",onClick:r,children:o("ok")}):p.jsxs("div",{className:"flex justify-around items-center w-full",children:[p.jsx("button",{className:"w-full max-w-32 mx-1 text-black dark:text-white bg-gray-300 dark:bg-gray-500 p-1.5 hover:bg-gray-200 dark:hover:bg-gray-400 rounded-lg",onClick:r,children:o("cancel")}),p.jsx("button",{className:`w-full max-w-32 mx-1 text-black dark:text-white ${i==="confirm-warnning"?"bg-red-300 dark:bg-red-500 hover:bg-red-400 dark:hover:bg-red-400":"bg-green-300 dark:bg-green-500 hover:bg-green-400 dark:hover:bg-green-400"} p-1.5 rounded-lg`,onClick:()=>{s(),r()},children:o("confirm")})]});return p.jsx("div",{className:"bg-white bg-opacity-5 flex justify-center items-center fixed top-0 left-0 w-full h-full z-50",style:{backdropFilter:"blur(5px)"},children:p.jsxs("div",{className:"alert border border-gray-600 dark:border-white flex flex-col justify-center items-center bg-gray-100 w-[calc(100%-50px)] md:w-fit dark:bg-gray-700 min-h-fit",children:[p.jsx("div",{className:"text-2xl w-full font-bold text-black dark:text-white",children:o(t)}),p.jsx("div",{className:"text-lg my-5 h-full w-full font-semibold text-black dark:text-white whitespace-pre-wrap",children:o(e)}),a()]})})}function bl(){const{t}=Qe();return p.jsxs("footer",{className:"flex w-full justify-between items-center bg-white dark:bg-gray-800 text-black dark:text-white p-5 eft-0 right-0 font-semibold",children:[p.jsxs("p",{children:["© ",new Date().getFullYear()+" "+t("rights")]}),p.jsxs("div",{className:"hidden md:flex gap-4 text-lg ",children:[p.jsx("a",{href:"https://www.instagram.com",className:"fa fa-instagram cursor-pointer p-1 text-fuchsia-400",target:"_blank","aria-hidden":"true"}),p.jsx("a",{href:"https://wa.me/972543921507",className:"fa fa-whatsapp cursor-pointer p-1 text-green",target:"_blank","aria-hidden":"true"}),p.jsx("a",{href:"https://www.facebook.com",className:"fa fa-facebook-official cursor-pointer p-1 text-blue-500",target:"_blank","aria-hidden":"true"})]})]})}function Bse(){const[t,e]=S.useState(!1),[n,r]=S.useState(!1),i=()=>r(!0),s=()=>r(!1),{t:o}=Qe(),[a,l]=S.useState(!1),[c,u]=S.useState({title:"",message:"",type:""}),[d,h]=S.useState({email:"",password:""}),f=async _=>{if(g()){l(!0),_.preventDefault();try{await IV(Ao,d.email,d.password)}catch(y){y.code==="auth/invalid-credential"?u({...c,title:"error",message:"errorInvalidCredentials",type:"error"}):u({...c,title:"error",message:"somethingWentWrong",type:"error"}),i()}finally{l(!1)}}};function g(){const{email:_,password:y}=d;return _===""||y===""?(u({...c,title:"error",message:"errorFillAllFields",type:"error"}),i(),!1):m(_)?!0:(u({...c,title:"error",message:"errorInvalidEmail",type:"error"}),i(),!1)}function m(_){return/\S+@\S+\.\S+/.test(_)}const v=()=>{const{email:_}=d;if(!m(_)){u({...c,title:"error",message:"errorInvalidEmail",type:"error"}),i();return}mT(Ao,d.email).then(()=>{u({...c,title:"success",message:"resetPasswordEmailSent",type:"success"}),i()}).catch(y=>{console.log(y)})};return p.jsxs("div",{className:"scrollable-content content",children:[p.jsxs("div",{className:"grid md:grid-cols-2 w-full h-full py-5 overflow-y-auto",children:[p.jsxs("div",{className:"flex justify-end",children:[p.jsx("img",{src:bp,loading:"lazy",alt:"CryptoPulse logo",className:"flex max-h-[350px] w-auto md:max-h-[550px] p-5 m-auto"}),p.jsx("div",{className:"h-full bg-gray-300 dark:bg-gray-600 hidden md:block w-px mx-[10px]"})]}),p.jsxs("div",{onSubmit:f,className:"flex flex-col justify-center mx-10",children:[p.jsx("h1",{className:"text-5xl font-bold text-slate-950 dark:text-white",children:o("logIn")}),p.jsx("input",{type:"text",onChange:_=>h({...d,email:_.target.value}),className:"mt-10 h-10 pl-3 text-sm text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:o("mail")}),p.jsx("input",{type:t?"text":"password",onChange:_=>h({...d,password:_.target.value}),className:"mt-5 h-10 pl-3 text-sm text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:o("password")}),p.jsxs("div",{className:"flex mt-5 gap-2",children:[p.jsx("input",{type:"checkbox",onClick:()=>e(!t)}),p.jsx("label",{className:"text-gray-800 dark:text-white",children:o("showPassword")})]}),p.jsx("button",{type:"button",onClick:f,disabled:a,className:`mt-10 h-10 text-gray-800 font-bold px-5 rounded-lg bg-custom-teal ${!a&&"hover:bg-teal-500"} flex justify-start items-center`,children:a?p.jsxs("div",{className:"loading-container",children:[p.jsx("span",{className:"dot"}),p.jsx("span",{className:"dot"}),p.jsx("span",{className:"dot"})]}):o("logIn")}),p.jsx("a",{className:"mt-5 text-gray-500 dark:text-gray-300 cursor-pointer font-semibold underline",onClick:v,children:o("forgotPassword")})]})]}),p.jsx(wl,{title:c.title,message:c.message,isVisible:n,onClose:s})]})}function zse(){const[t,e]=S.useState(!1),n=()=>e(!0),r=()=>e(!1),[i,s]=S.useState({title:"",message:"",type:""}),[o,a]=S.useState(!1),{t:l}=Qe(),[c,u]=S.useState({email:"",firstName:"",lastName:"",phone:"",password:"",confirmPassword:""}),[d,h]=S.useState(!1),f=async v=>{if(g()){h(!0),v.preventDefault();try{await TV(Ao,c.email,c.password).then(async _=>{const y=_.user;await yT(y,{displayName:c.firstName+" "+c.lastName}),await fse(y,c)}),s({...i,title:"success",message:"accountCreated",type:"success"}),n()}catch(_){console.log(_)}finally{h(!1)}}};function g(){const v=c.email,_=c.firstName,y=c.lastName,w=c.phone,b=c.password,x=c.confirmPassword;return v===""||_===""||y===""||w===""||b===""||x===""?(s({...i,title:"error",message:"errorFillAllFields",type:"error"}),n(),!1):m(v)?b!==x?(s({...i,title:"error",message:"errorPasswordsDoNotMatch",type:"error"}),n(),!1):b.length<6?(s({...i,title:"error",message:"passwordTooShort",type:"error"}),n(),!1):!0:(s({...i,title:"error",message:"errorInvalidEmail",type:"error"}),n(),!1)}function m(v){return/\S+@\S+\.\S+/.test(v)}return p.jsxs("div",{className:"scrollable-content content",children:[p.jsxs("div",{className:"grid md:grid-cols-2 w-full h-full py-5 overflow-y-auto",children:[p.jsxs("div",{className:"flex justify-end",children:[p.jsx("img",{src:bp,loading:"lazy",alt:"CryptoPulse logo",className:"flex max-h-[350px] w-auto md:max-h-[550px] p-5 m-auto"}),p.jsx("div",{className:"h-full bg-gray-300 dark:bg-gray-600 hidden md:block w-px mx-[10px]"})]}),p.jsxs("div",{className:"flex flex-col justify-center gap-5 mx-10 ",children:[p.jsx("h1",{className:"text-5xl font-bold text-slate-950 dark:text-white",children:l("signUp")}),p.jsx("input",{type:"text",onChange:v=>u({...c,email:v.target.value}),className:"mt-10 h-10 pl-3 text-sm text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:l("mail")}),p.jsxs("div",{className:"flex flex-row w-full",children:[p.jsx("input",{type:"text",onChange:v=>u({...c,firstName:v.target.value}),className:"w-full mr-2 pl-3 h-10 text-sm text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:l("firstName")}),p.jsx("input",{type:"text",onChange:v=>u({...c,lastName:v.target.value}),className:"w-full ml-2 pl-3 h-10 text-sm text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:l("lastName")})]}),p.jsx("input",{type:"text",onChange:v=>u({...c,phone:v.target.value}),className:"h-10 pl-3 text-sm text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:l("phone")}),p.jsxs("div",{className:"flex flex-row w-full",children:[p.jsx("input",{type:o?"text":"password",onChange:v=>u({...c,password:v.target.value}),className:"w-full mr-2 h-10 pl-3 text-sm text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:l("password")}),p.jsx("input",{type:o?"text":"password",onChange:v=>u({...c,confirmPassword:v.target.value}),className:"w-full ml-2 h-10 pl-3 text-sm text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:l("confirmPassword")})]}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx("input",{type:"checkbox",onClick:()=>a(!o)}),p.jsx("label",{className:"text-gray-800 dark:text-white",children:l("showPassword")})]}),p.jsx("button",{type:"button",onClick:f,className:`mt-10 h-10 text-gray-800 font-bold px-5 rounded-lg bg-custom-teal ${!d&&"hover:bg-teal-500"} flex justify-start items-center`,children:d?p.jsxs("div",{className:"loading-container",children:[p.jsx("span",{className:"dot"}),p.jsx("span",{className:"dot"}),p.jsx("span",{className:"dot"})]}):l("signUp")})]})]}),p.jsx(wl,{title:i.title,message:i.message,action:i.action,isVisible:t,onClose:r})]})}/*!
 * @kurkle/color v0.3.2
 * https://github.com/kurkle/color#readme
 * (c) 2023 Jukka Kurkela
 * Released under the MIT License
 */function xp(t){return t+.5|0}const Js=(t,e,n)=>Math.max(Math.min(t,n),e);function Dd(t){return Js(xp(t*2.55),0,255)}function po(t){return Js(xp(t*255),0,255)}function Zi(t){return Js(xp(t/2.55)/100,0,1)}function BA(t){return Js(xp(t*100),0,100)}const Lr={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Qx=[..."0123456789ABCDEF"],Wse=t=>Qx[t&15],Hse=t=>Qx[(t&240)>>4]+Qx[t&15],dg=t=>(t&240)>>4===(t&15),qse=t=>dg(t.r)&&dg(t.g)&&dg(t.b)&&dg(t.a);function Gse(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&Lr[t[1]]*17,g:255&Lr[t[2]]*17,b:255&Lr[t[3]]*17,a:e===5?Lr[t[4]]*17:255}:(e===7||e===9)&&(n={r:Lr[t[1]]<<4|Lr[t[2]],g:Lr[t[3]]<<4|Lr[t[4]],b:Lr[t[5]]<<4|Lr[t[6]],a:e===9?Lr[t[7]]<<4|Lr[t[8]]:255})),n}const Kse=(t,e)=>t<255?e(t):"";function Qse(t){var e=qse(t)?Wse:Hse;return t?"#"+e(t.r)+e(t.g)+e(t.b)+Kse(t.a,e):void 0}const Yse=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function CU(t,e,n){const r=e*Math.min(n,1-n),i=(s,o=(s+t/30)%12)=>n-r*Math.max(Math.min(o-3,9-o,1),-1);return[i(0),i(8),i(4)]}function Xse(t,e,n){const r=(i,s=(i+t/60)%6)=>n-n*e*Math.max(Math.min(s,4-s,1),0);return[r(5),r(3),r(1)]}function Jse(t,e,n){const r=CU(t,1,.5);let i;for(e+n>1&&(i=1/(e+n),e*=i,n*=i),i=0;i<3;i++)r[i]*=1-e-n,r[i]+=e;return r}function Zse(t,e,n,r,i){return t===i?(e-n)/r+(e<n?6:0):e===i?(n-t)/r+2:(t-e)/r+4}function JI(t){const n=t.r/255,r=t.g/255,i=t.b/255,s=Math.max(n,r,i),o=Math.min(n,r,i),a=(s+o)/2;let l,c,u;return s!==o&&(u=s-o,c=a>.5?u/(2-s-o):u/(s+o),l=Zse(n,r,i,u,s),l=l*60+.5),[l|0,c||0,a]}function ZI(t,e,n,r){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,r)).map(po)}function e1(t,e,n){return ZI(CU,t,e,n)}function eoe(t,e,n){return ZI(Jse,t,e,n)}function toe(t,e,n){return ZI(Xse,t,e,n)}function RU(t){return(t%360+360)%360}function noe(t){const e=Yse.exec(t);let n=255,r;if(!e)return;e[5]!==r&&(n=e[6]?Dd(+e[5]):po(+e[5]));const i=RU(+e[2]),s=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?r=eoe(i,s,o):e[1]==="hsv"?r=toe(i,s,o):r=e1(i,s,o),{r:r[0],g:r[1],b:r[2],a:n}}function roe(t,e){var n=JI(t);n[0]=RU(n[0]+e),n=e1(n),t.r=n[0],t.g=n[1],t.b=n[2]}function ioe(t){if(!t)return;const e=JI(t),n=e[0],r=BA(e[1]),i=BA(e[2]);return t.a<255?`hsla(${n}, ${r}%, ${i}%, ${Zi(t.a)})`:`hsl(${n}, ${r}%, ${i}%)`}const zA={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},WA={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function soe(){const t={},e=Object.keys(WA),n=Object.keys(zA);let r,i,s,o,a;for(r=0;r<e.length;r++){for(o=a=e[r],i=0;i<n.length;i++)s=n[i],a=a.replace(s,zA[s]);s=parseInt(WA[o],16),t[a]=[s>>16&255,s>>8&255,s&255]}return t}let hg;function ooe(t){hg||(hg=soe(),hg.transparent=[0,0,0,0]);const e=hg[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const aoe=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function loe(t){const e=aoe.exec(t);let n=255,r,i,s;if(e){if(e[7]!==r){const o=+e[7];n=e[8]?Dd(o):Js(o*255,0,255)}return r=+e[1],i=+e[3],s=+e[5],r=255&(e[2]?Dd(r):Js(r,0,255)),i=255&(e[4]?Dd(i):Js(i,0,255)),s=255&(e[6]?Dd(s):Js(s,0,255)),{r,g:i,b:s,a:n}}}function coe(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Zi(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const hw=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,Ol=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function uoe(t,e,n){const r=Ol(Zi(t.r)),i=Ol(Zi(t.g)),s=Ol(Zi(t.b));return{r:po(hw(r+n*(Ol(Zi(e.r))-r))),g:po(hw(i+n*(Ol(Zi(e.g))-i))),b:po(hw(s+n*(Ol(Zi(e.b))-s))),a:t.a+n*(e.a-t.a)}}function fg(t,e,n){if(t){let r=JI(t);r[e]=Math.max(0,Math.min(r[e]+r[e]*n,e===0?360:1)),r=e1(r),t.r=r[0],t.g=r[1],t.b=r[2]}}function kU(t,e){return t&&Object.assign(e||{},t)}function HA(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=po(t[3]))):(e=kU(t,{r:0,g:0,b:0,a:1}),e.a=po(e.a)),e}function doe(t){return t.charAt(0)==="r"?loe(t):noe(t)}class mf{constructor(e){if(e instanceof mf)return e;const n=typeof e;let r;n==="object"?r=HA(e):n==="string"&&(r=Gse(e)||ooe(e)||doe(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=kU(this._rgb);return e&&(e.a=Zi(e.a)),e}set rgb(e){this._rgb=HA(e)}rgbString(){return this._valid?coe(this._rgb):void 0}hexString(){return this._valid?Qse(this._rgb):void 0}hslString(){return this._valid?ioe(this._rgb):void 0}mix(e,n){if(e){const r=this.rgb,i=e.rgb;let s;const o=n===s?.5:n,a=2*o-1,l=r.a-i.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;s=1-c,r.r=255&c*r.r+s*i.r+.5,r.g=255&c*r.g+s*i.g+.5,r.b=255&c*r.b+s*i.b+.5,r.a=o*r.a+(1-o)*i.a,this.rgb=r}return this}interpolate(e,n){return e&&(this._rgb=uoe(this._rgb,e._rgb,n)),this}clone(){return new mf(this.rgb)}alpha(e){return this._rgb.a=po(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=xp(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return fg(this._rgb,2,e),this}darken(e){return fg(this._rgb,2,-e),this}saturate(e){return fg(this._rgb,1,e),this}desaturate(e){return fg(this._rgb,1,-e),this}rotate(e){return roe(this._rgb,e),this}}/*!
 * Chart.js v4.4.2
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */function Gi(){}const hoe=(()=>{let t=0;return()=>t++})();function je(t){return t===null||typeof t>"u"}function dt(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Ne(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function Pt(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function vr(t,e){return Pt(t)?t:e}function Te(t,e){return typeof t>"u"?e:t}const foe=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,AU=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function tt(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function He(t,e,n,r){let i,s,o;if(dt(t))if(s=t.length,r)for(i=s-1;i>=0;i--)e.call(n,t[i],i);else for(i=0;i<s;i++)e.call(n,t[i],i);else if(Ne(t))for(o=Object.keys(t),s=o.length,i=0;i<s;i++)e.call(n,t[o[i]],o[i])}function xy(t,e){let n,r,i,s;if(!t||!e||t.length!==e.length)return!1;for(n=0,r=t.length;n<r;++n)if(i=t[n],s=e[n],i.datasetIndex!==s.datasetIndex||i.index!==s.index)return!1;return!0}function Sy(t){if(dt(t))return t.map(Sy);if(Ne(t)){const e=Object.create(null),n=Object.keys(t),r=n.length;let i=0;for(;i<r;++i)e[n[i]]=Sy(t[n[i]]);return e}return t}function PU(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function poe(t,e,n,r){if(!PU(t))return;const i=e[t],s=n[t];Ne(i)&&Ne(s)?yf(i,s,r):e[t]=Sy(s)}function yf(t,e,n){const r=dt(e)?e:[e],i=r.length;if(!Ne(t))return t;n=n||{};const s=n.merger||poe;let o;for(let a=0;a<i;++a){if(o=r[a],!Ne(o))continue;const l=Object.keys(o);for(let c=0,u=l.length;c<u;++c)s(l[c],t,o,n)}return t}function ch(t,e){return yf(t,e,{merger:goe})}function goe(t,e,n){if(!PU(t))return;const r=e[t],i=n[t];Ne(r)&&Ne(i)?ch(r,i):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Sy(i))}const qA={"":t=>t,x:t=>t.x,y:t=>t.y};function moe(t){const e=t.split("."),n=[];let r="";for(const i of e)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}function yoe(t){const e=moe(t);return n=>{for(const r of e){if(r==="")break;n=n&&n[r]}return n}}function Po(t,e){return(qA[e]||(qA[e]=yoe(e)))(t)}function t1(t){return t.charAt(0).toUpperCase()+t.slice(1)}const _f=t=>typeof t<"u",No=t=>typeof t=="function",GA=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function _oe(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const gt=Math.PI,ft=2*gt,voe=ft+gt,Ey=Number.POSITIVE_INFINITY,woe=gt/180,Ut=gt/2,Yo=gt/4,KA=gt*2/3,Zs=Math.log10,ji=Math.sign;function uh(t,e,n){return Math.abs(t-e)<n}function QA(t){const e=Math.round(t);t=uh(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(Zs(t))),r=t/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function boe(t){const e=[],n=Math.sqrt(t);let r;for(r=1;r<n;r++)t%r===0&&(e.push(r),e.push(t/r));return n===(n|0)&&e.push(n),e.sort((i,s)=>i-s).pop(),e}function tu(t){return!isNaN(parseFloat(t))&&isFinite(t)}function xoe(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function NU(t,e,n){let r,i,s;for(r=0,i=t.length;r<i;r++)s=t[r][n],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function ri(t){return t*(gt/180)}function n1(t){return t*(180/gt)}function YA(t){if(!Pt(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function DU(t,e){const n=e.x-t.x,r=e.y-t.y,i=Math.sqrt(n*n+r*r);let s=Math.atan2(r,n);return s<-.5*gt&&(s+=ft),{angle:s,distance:i}}function Yx(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Soe(t,e){return(t-e+voe)%ft-gt}function br(t){return(t%ft+ft)%ft}function vf(t,e,n,r){const i=br(t),s=br(e),o=br(n),a=br(s-i),l=br(o-i),c=br(i-s),u=br(i-o);return i===s||i===o||r&&s===o||a>l&&c<u}function cn(t,e,n){return Math.max(e,Math.min(n,t))}function Eoe(t){return cn(t,-32768,32767)}function os(t,e,n,r=1e-6){return t>=Math.min(e,n)-r&&t<=Math.max(e,n)+r}function r1(t,e,n){n=n||(o=>t[o]<e);let r=t.length-1,i=0,s;for(;r-i>1;)s=i+r>>1,n(s)?i=s:r=s;return{lo:i,hi:r}}const as=(t,e,n,r)=>r1(t,n,r?i=>{const s=t[i][e];return s<n||s===n&&t[i+1][e]===n}:i=>t[i][e]<n),Toe=(t,e,n)=>r1(t,n,r=>t[r][e]>=n);function Ioe(t,e,n){let r=0,i=t.length;for(;r<i&&t[r]<e;)r++;for(;i>r&&t[i-1]>n;)i--;return r>0||i<t.length?t.slice(r,i):t}const OU=["push","pop","shift","splice","unshift"];function Coe(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),OU.forEach(n=>{const r="_onData"+t1(n),i=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...s){const o=i.apply(this,s);return t._chartjs.listeners.forEach(a=>{typeof a[r]=="function"&&a[r](...s)}),o}})})}function XA(t,e){const n=t._chartjs;if(!n)return;const r=n.listeners,i=r.indexOf(e);i!==-1&&r.splice(i,1),!(r.length>0)&&(OU.forEach(s=>{delete t[s]}),delete t._chartjs)}function MU(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const LU=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function VU(t,e){let n=[],r=!1;return function(...i){n=i,r||(r=!0,LU.call(window,()=>{r=!1,t.apply(e,n)}))}}function Roe(t,e){let n;return function(...r){return e?(clearTimeout(n),n=setTimeout(t,e,r)):t.apply(this,r),e}}const i1=t=>t==="start"?"left":t==="end"?"right":"center",Nn=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,koe=(t,e,n,r)=>t===(r?"left":"right")?n:t==="center"?(e+n)/2:e;function FU(t,e,n){const r=e.length;let i=0,s=r;if(t._sorted){const{iScale:o,_parsed:a}=t,l=o.axis,{min:c,max:u,minDefined:d,maxDefined:h}=o.getUserBounds();d&&(i=cn(Math.min(as(a,l,c).lo,n?r:as(e,l,o.getPixelForValue(c)).lo),0,r-1)),h?s=cn(Math.max(as(a,o.axis,u,!0).hi+1,n?0:as(e,l,o.getPixelForValue(u),!0).hi+1),i,r)-i:s=r-i}return{start:i,count:s}}function jU(t){const{xScale:e,yScale:n,_scaleRanges:r}=t,i={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!r)return t._scaleRanges=i,!0;const s=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,i),s}const pg=t=>t===0||t===1,JA=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*ft/n)),ZA=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*ft/n)+1,dh={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*Ut)+1,easeOutSine:t=>Math.sin(t*Ut),easeInOutSine:t=>-.5*(Math.cos(gt*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>pg(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>pg(t)?t:JA(t,.075,.3),easeOutElastic:t=>pg(t)?t:ZA(t,.075,.3),easeInOutElastic(t){return pg(t)?t:t<.5?.5*JA(t*2,.1125,.45):.5+.5*ZA(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-dh.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?dh.easeInBounce(t*2)*.5:dh.easeOutBounce(t*2-1)*.5+.5};function s1(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function eP(t){return s1(t)?t:new mf(t)}function fw(t){return s1(t)?t:new mf(t).saturate(.5).darken(.1).hexString()}const Aoe=["x","y","borderWidth","radius","tension"],Poe=["color","borderColor","backgroundColor"];function Noe(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:Poe},numbers:{type:"number",properties:Aoe}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function Doe(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const tP=new Map;function Ooe(t,e){e=e||{};const n=t+JSON.stringify(e);let r=tP.get(n);return r||(r=new Intl.NumberFormat(t,e),tP.set(n,r)),r}function Sp(t,e,n){return Ooe(e,n).format(t)}const $U={values(t){return dt(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const r=this.chart.options.locale;let i,s=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(i="scientific"),s=Moe(t,n)}const o=Zs(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),Sp(t,r,l)},logarithmic(t,e,n){if(t===0)return"0";const r=n[e].significand||t/Math.pow(10,Math.floor(Zs(t)));return[1,2,3,5,10,15].includes(r)||e>.8*n.length?$U.numeric.call(this,t,e,n):""}};function Moe(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var Ov={formatters:$U};function Loe(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Ov.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Za=Object.create(null),Xx=Object.create(null);function hh(t,e){if(!e)return t;const n=e.split(".");for(let r=0,i=n.length;r<i;++r){const s=n[r];t=t[s]||(t[s]=Object.create(null))}return t}function pw(t,e,n){return typeof e=="string"?yf(hh(t,e),n):yf(hh(t,""),e)}class Voe{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,i)=>fw(i.backgroundColor),this.hoverBorderColor=(r,i)=>fw(i.borderColor),this.hoverColor=(r,i)=>fw(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return pw(this,e,n)}get(e){return hh(this,e)}describe(e,n){return pw(Xx,e,n)}override(e,n){return pw(Za,e,n)}route(e,n,r,i){const s=hh(this,e),o=hh(this,r),a="_"+n;Object.defineProperties(s,{[a]:{value:s[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[i];return Ne(l)?Object.assign({},c,l):Te(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var Nt=new Voe({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[Noe,Doe,Loe]);function Foe(t){return!t||je(t.size)||je(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function Ty(t,e,n,r,i){let s=e[i];return s||(s=e[i]=t.measureText(i).width,n.push(i)),s>r&&(r=s),r}function joe(t,e,n,r){r=r||{};let i=r.data=r.data||{},s=r.garbageCollect=r.garbageCollect||[];r.font!==e&&(i=r.data={},s=r.garbageCollect=[],r.font=e),t.save(),t.font=e;let o=0;const a=n.length;let l,c,u,d,h;for(l=0;l<a;l++)if(d=n[l],d!=null&&!dt(d))o=Ty(t,i,s,o,d);else if(dt(d))for(c=0,u=d.length;c<u;c++)h=d[c],h!=null&&!dt(h)&&(o=Ty(t,i,s,o,h));t.restore();const f=s.length/2;if(f>n.length){for(l=0;l<f;l++)delete i[s[l]];s.splice(0,f)}return o}function Xo(t,e,n){const r=t.currentDevicePixelRatio,i=n!==0?Math.max(n/2,.5):0;return Math.round((e-i)*r)/r+i}function nP(t,e){e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore()}function Jx(t,e,n,r){UU(t,e,n,r,null)}function UU(t,e,n,r,i){let s,o,a,l,c,u,d,h;const f=e.pointStyle,g=e.rotation,m=e.radius;let v=(g||0)*woe;if(f&&typeof f=="object"&&(s=f.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){t.save(),t.translate(n,r),t.rotate(v),t.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),t.restore();return}if(!(isNaN(m)||m<=0)){switch(t.beginPath(),f){default:i?t.ellipse(n,r,i/2,m,0,0,ft):t.arc(n,r,m,0,ft),t.closePath();break;case"triangle":u=i?i/2:m,t.moveTo(n+Math.sin(v)*u,r-Math.cos(v)*m),v+=KA,t.lineTo(n+Math.sin(v)*u,r-Math.cos(v)*m),v+=KA,t.lineTo(n+Math.sin(v)*u,r-Math.cos(v)*m),t.closePath();break;case"rectRounded":c=m*.516,l=m-c,o=Math.cos(v+Yo)*l,d=Math.cos(v+Yo)*(i?i/2-c:l),a=Math.sin(v+Yo)*l,h=Math.sin(v+Yo)*(i?i/2-c:l),t.arc(n-d,r-a,c,v-gt,v-Ut),t.arc(n+h,r-o,c,v-Ut,v),t.arc(n+d,r+a,c,v,v+Ut),t.arc(n-h,r+o,c,v+Ut,v+gt),t.closePath();break;case"rect":if(!g){l=Math.SQRT1_2*m,u=i?i/2:l,t.rect(n-u,r-l,2*u,2*l);break}v+=Yo;case"rectRot":d=Math.cos(v)*(i?i/2:m),o=Math.cos(v)*m,a=Math.sin(v)*m,h=Math.sin(v)*(i?i/2:m),t.moveTo(n-d,r-a),t.lineTo(n+h,r-o),t.lineTo(n+d,r+a),t.lineTo(n-h,r+o),t.closePath();break;case"crossRot":v+=Yo;case"cross":d=Math.cos(v)*(i?i/2:m),o=Math.cos(v)*m,a=Math.sin(v)*m,h=Math.sin(v)*(i?i/2:m),t.moveTo(n-d,r-a),t.lineTo(n+d,r+a),t.moveTo(n+h,r-o),t.lineTo(n-h,r+o);break;case"star":d=Math.cos(v)*(i?i/2:m),o=Math.cos(v)*m,a=Math.sin(v)*m,h=Math.sin(v)*(i?i/2:m),t.moveTo(n-d,r-a),t.lineTo(n+d,r+a),t.moveTo(n+h,r-o),t.lineTo(n-h,r+o),v+=Yo,d=Math.cos(v)*(i?i/2:m),o=Math.cos(v)*m,a=Math.sin(v)*m,h=Math.sin(v)*(i?i/2:m),t.moveTo(n-d,r-a),t.lineTo(n+d,r+a),t.moveTo(n+h,r-o),t.lineTo(n-h,r+o);break;case"line":o=i?i/2:Math.cos(v)*m,a=Math.sin(v)*m,t.moveTo(n-o,r-a),t.lineTo(n+o,r+a);break;case"dash":t.moveTo(n,r),t.lineTo(n+Math.cos(v)*(i?i/2:m),r+Math.sin(v)*m);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function ls(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function Mv(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function Lv(t){t.restore()}function $oe(t,e,n,r,i){if(!e)return t.lineTo(n.x,n.y);if(i==="middle"){const s=(e.x+n.x)/2;t.lineTo(s,e.y),t.lineTo(s,n.y)}else i==="after"!=!!r?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function Uoe(t,e,n,r){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function Boe(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),je(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function zoe(t,e,n,r,i){if(i.strikethrough||i.underline){const s=t.measureText(r),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,c=n+s.actualBoundingBoxDescent,u=i.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=i.decorationWidth||2,t.moveTo(o,u),t.lineTo(a,u),t.stroke()}}function Woe(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function el(t,e,n,r,i,s={}){const o=dt(e)?e:[e],a=s.strokeWidth>0&&s.strokeColor!=="";let l,c;for(t.save(),t.font=i.string,Boe(t,s),l=0;l<o.length;++l)c=o[l],s.backdrop&&Woe(t,s.backdrop),a&&(s.strokeColor&&(t.strokeStyle=s.strokeColor),je(s.strokeWidth)||(t.lineWidth=s.strokeWidth),t.strokeText(c,n,r,s.maxWidth)),t.fillText(c,n,r,s.maxWidth),zoe(t,n,r,c,s),r+=Number(i.lineHeight);t.restore()}function wf(t,e){const{x:n,y:r,w:i,h:s,radius:o}=e;t.arc(n+o.topLeft,r+o.topLeft,o.topLeft,1.5*gt,gt,!0),t.lineTo(n,r+s-o.bottomLeft),t.arc(n+o.bottomLeft,r+s-o.bottomLeft,o.bottomLeft,gt,Ut,!0),t.lineTo(n+i-o.bottomRight,r+s),t.arc(n+i-o.bottomRight,r+s-o.bottomRight,o.bottomRight,Ut,0,!0),t.lineTo(n+i,r+o.topRight),t.arc(n+i-o.topRight,r+o.topRight,o.topRight,0,-Ut,!0),t.lineTo(n+o.topLeft,r)}const Hoe=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,qoe=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Goe(t,e){const n=(""+t).match(Hoe);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const Koe=t=>+t||0;function o1(t,e){const n={},r=Ne(e),i=r?Object.keys(e):e,s=Ne(t)?r?o=>Te(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of i)n[o]=Koe(s(o));return n}function BU(t){return o1(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Aa(t){return o1(t,["topLeft","topRight","bottomLeft","bottomRight"])}function Un(t){const e=BU(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Jt(t,e){t=t||{},e=e||Nt.font;let n=Te(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let r=Te(t.style,e.style);r&&!(""+r).match(qoe)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const i={family:Te(t.family,e.family),lineHeight:Goe(Te(t.lineHeight,e.lineHeight),n),size:n,style:r,weight:Te(t.weight,e.weight),string:""};return i.string=Foe(i),i}function Od(t,e,n,r){let i=!0,s,o,a;for(s=0,o=t.length;s<o;++s)if(a=t[s],a!==void 0&&(e!==void 0&&typeof a=="function"&&(a=a(e),i=!1),n!==void 0&&dt(a)&&(a=a[n%a.length],i=!1),a!==void 0))return r&&!i&&(r.cacheable=!1),a}function Qoe(t,e,n){const{min:r,max:i}=t,s=AU(e,(i-r)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(r,-Math.abs(s)),max:o(i,s)}}function Ko(t,e){return Object.assign(Object.create(t),e)}function a1(t,e=[""],n,r,i=()=>t[0]){const s=n||t;typeof r>"u"&&(r=qU("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:s,_fallback:r,_getTarget:i,override:a=>a1([a,...t],e,s,r)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return WU(a,l,()=>rae(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return iP(a).includes(l)},ownKeys(a){return iP(a)},set(a,l,c){const u=a._storage||(a._storage=i());return a[l]=u[l]=c,delete a._keys,!0}})}function nu(t,e,n,r){const i={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:zU(t,r),setContext:s=>nu(t,s,n,r),override:s=>nu(t.override(s),e,n,r)};return new Proxy(i,{deleteProperty(s,o){return delete s[o],delete t[o],!0},get(s,o,a){return WU(s,o,()=>Xoe(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(s,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(s,o,a){return t[o]=a,delete s[o],!0}})}function zU(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:r=e.indexable,_allKeys:i=e.allKeys}=t;return{allKeys:i,scriptable:n,indexable:r,isScriptable:No(n)?n:()=>n,isIndexable:No(r)?r:()=>r}}const Yoe=(t,e)=>t?t+t1(e):e,l1=(t,e)=>Ne(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function WU(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e))return t[e];const r=n();return t[e]=r,r}function Xoe(t,e,n){const{_proxy:r,_context:i,_subProxy:s,_descriptors:o}=t;let a=r[e];return No(a)&&o.isScriptable(e)&&(a=Joe(e,a,t,n)),dt(a)&&a.length&&(a=Zoe(e,a,t,o.isIndexable)),l1(e,a)&&(a=nu(a,i,s&&s[e],o)),a}function Joe(t,e,n,r){const{_proxy:i,_context:s,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(s,o||r);return a.delete(t),l1(t,l)&&(l=c1(i._scopes,i,t,l)),l}function Zoe(t,e,n,r){const{_proxy:i,_context:s,_subProxy:o,_descriptors:a}=n;if(typeof s.index<"u"&&r(t))return e[s.index%e.length];if(Ne(e[0])){const l=e,c=i._scopes.filter(u=>u!==l);e=[];for(const u of l){const d=c1(c,i,t,u);e.push(nu(d,s,o&&o[t],a))}}return e}function HU(t,e,n){return No(t)?t(e,n):t}const eae=(t,e)=>t===!0?e:typeof t=="string"?Po(e,t):void 0;function tae(t,e,n,r,i){for(const s of e){const o=eae(n,s);if(o){t.add(o);const a=HU(o._fallback,n,i);if(typeof a<"u"&&a!==n&&a!==r)return a}else if(o===!1&&typeof r<"u"&&n!==r)return null}return!1}function c1(t,e,n,r){const i=e._rootScopes,s=HU(e._fallback,n,r),o=[...t,...i],a=new Set;a.add(r);let l=rP(a,o,n,s||n,r);return l===null||typeof s<"u"&&s!==n&&(l=rP(a,o,s,l,r),l===null)?!1:a1(Array.from(a),[""],i,s,()=>nae(e,n,r))}function rP(t,e,n,r,i){for(;n;)n=tae(t,e,n,r,i);return n}function nae(t,e,n){const r=t._getTarget();e in r||(r[e]={});const i=r[e];return dt(i)&&Ne(n)?n:i||{}}function rae(t,e,n,r){let i;for(const s of e)if(i=qU(Yoe(s,t),n),typeof i<"u")return l1(t,i)?c1(n,r,t,i):i}function qU(t,e){for(const n of e){if(!n)continue;const r=n[t];if(typeof r<"u")return r}}function iP(t){let e=t._keys;return e||(e=t._keys=iae(t._scopes)),e}function iae(t){const e=new Set;for(const n of t)for(const r of Object.keys(n).filter(i=>!i.startsWith("_")))e.add(r);return Array.from(e)}function GU(t,e,n,r){const{iScale:i}=t,{key:s="r"}=this._parsing,o=new Array(r);let a,l,c,u;for(a=0,l=r;a<l;++a)c=a+n,u=e[c],o[a]={r:i.parse(Po(u,s),c)};return o}const sae=Number.EPSILON||1e-14,ru=(t,e)=>e<t.length&&!t[e].skip&&t[e],KU=t=>t==="x"?"y":"x";function oae(t,e,n,r){const i=t.skip?e:t,s=e,o=n.skip?e:n,a=Yx(s,i),l=Yx(o,s);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const d=r*c,h=r*u;return{previous:{x:s.x-d*(o.x-i.x),y:s.y-d*(o.y-i.y)},next:{x:s.x+h*(o.x-i.x),y:s.y+h*(o.y-i.y)}}}function aae(t,e,n){const r=t.length;let i,s,o,a,l,c=ru(t,0);for(let u=0;u<r-1;++u)if(l=c,c=ru(t,u+1),!(!l||!c)){if(uh(e[u],0,sae)){n[u]=n[u+1]=0;continue}i=n[u]/e[u],s=n[u+1]/e[u],a=Math.pow(i,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),n[u]=i*o*e[u],n[u+1]=s*o*e[u])}}function lae(t,e,n="x"){const r=KU(n),i=t.length;let s,o,a,l=ru(t,0);for(let c=0;c<i;++c){if(o=a,a=l,l=ru(t,c+1),!a)continue;const u=a[n],d=a[r];o&&(s=(u-o[n])/3,a[`cp1${n}`]=u-s,a[`cp1${r}`]=d-s*e[c]),l&&(s=(l[n]-u)/3,a[`cp2${n}`]=u+s,a[`cp2${r}`]=d+s*e[c])}}function cae(t,e="x"){const n=KU(e),r=t.length,i=Array(r).fill(0),s=Array(r);let o,a,l,c=ru(t,0);for(o=0;o<r;++o)if(a=l,l=c,c=ru(t,o+1),!!l){if(c){const u=c[e]-l[e];i[o]=u!==0?(c[n]-l[n])/u:0}s[o]=a?c?ji(i[o-1])!==ji(i[o])?0:(i[o-1]+i[o])/2:i[o-1]:i[o]}aae(t,i,s),lae(t,s,e)}function gg(t,e,n){return Math.max(Math.min(t,n),e)}function uae(t,e){let n,r,i,s,o,a=ls(t[0],e);for(n=0,r=t.length;n<r;++n)o=s,s=a,a=n<r-1&&ls(t[n+1],e),s&&(i=t[n],o&&(i.cp1x=gg(i.cp1x,e.left,e.right),i.cp1y=gg(i.cp1y,e.top,e.bottom)),a&&(i.cp2x=gg(i.cp2x,e.left,e.right),i.cp2y=gg(i.cp2y,e.top,e.bottom)))}function dae(t,e,n,r,i){let s,o,a,l;if(e.spanGaps&&(t=t.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")cae(t,i);else{let c=r?t[t.length-1]:t[0];for(s=0,o=t.length;s<o;++s)a=t[s],l=oae(c,a,t[Math.min(s+1,o-(r?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&uae(t,n)}function u1(){return typeof window<"u"&&typeof document<"u"}function d1(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Iy(t,e,n){let r;return typeof t=="string"?(r=parseInt(t,10),t.indexOf("%")!==-1&&(r=r/100*e.parentNode[n])):r=t,r}const Vv=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function hae(t,e){return Vv(t).getPropertyValue(e)}const fae=["top","right","bottom","left"];function Pa(t,e,n){const r={};n=n?"-"+n:"";for(let i=0;i<4;i++){const s=fae[i];r[s]=parseFloat(t[e+"-"+s+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const pae=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function gae(t,e){const n=t.touches,r=n&&n.length?n[0]:t,{offsetX:i,offsetY:s}=r;let o=!1,a,l;if(pae(i,s,t.target))a=i,l=s;else{const c=e.getBoundingClientRect();a=r.clientX-c.left,l=r.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function ia(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:r}=e,i=Vv(n),s=i.boxSizing==="border-box",o=Pa(i,"padding"),a=Pa(i,"border","width"),{x:l,y:c,box:u}=gae(t,n),d=o.left+(u&&a.left),h=o.top+(u&&a.top);let{width:f,height:g}=e;return s&&(f-=o.width+a.width,g-=o.height+a.height),{x:Math.round((l-d)/f*n.width/r),y:Math.round((c-h)/g*n.height/r)}}function mae(t,e,n){let r,i;if(e===void 0||n===void 0){const s=d1(t);if(!s)e=t.clientWidth,n=t.clientHeight;else{const o=s.getBoundingClientRect(),a=Vv(s),l=Pa(a,"border","width"),c=Pa(a,"padding");e=o.width-c.width-l.width,n=o.height-c.height-l.height,r=Iy(a.maxWidth,s,"clientWidth"),i=Iy(a.maxHeight,s,"clientHeight")}}return{width:e,height:n,maxWidth:r||Ey,maxHeight:i||Ey}}const mg=t=>Math.round(t*10)/10;function yae(t,e,n,r){const i=Vv(t),s=Pa(i,"margin"),o=Iy(i.maxWidth,t,"clientWidth")||Ey,a=Iy(i.maxHeight,t,"clientHeight")||Ey,l=mae(t,e,n);let{width:c,height:u}=l;if(i.boxSizing==="content-box"){const h=Pa(i,"border","width"),f=Pa(i,"padding");c-=f.width+h.width,u-=f.height+h.height}return c=Math.max(0,c-s.width),u=Math.max(0,r?c/r:u-s.height),c=mg(Math.min(c,o,l.maxWidth)),u=mg(Math.min(u,a,l.maxHeight)),c&&!u&&(u=mg(c/2)),(e!==void 0||n!==void 0)&&r&&l.height&&u>l.height&&(u=l.height,c=mg(Math.floor(u*r))),{width:c,height:u}}function sP(t,e,n){const r=e||1,i=Math.floor(t.height*r),s=Math.floor(t.width*r);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==r||o.height!==i||o.width!==s?(t.currentDevicePixelRatio=r,o.height=i,o.width=s,t.ctx.setTransform(r,0,0,r,0,0),!0):!1}const _ae=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};u1()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function oP(t,e){const n=hae(t,e),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function sa(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function vae(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:r==="middle"?n<.5?t.y:e.y:r==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function wae(t,e,n,r){const i={x:t.cp2x,y:t.cp2y},s={x:e.cp1x,y:e.cp1y},o=sa(t,i,n),a=sa(i,s,n),l=sa(s,e,n),c=sa(o,a,n),u=sa(a,l,n);return sa(c,u,n)}const bae=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,r){return n-r},leftForLtr(n,r){return n-r}}},xae=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function xc(t,e,n){return t?bae(e,n):xae()}function QU(t,e){let n,r;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=r)}function YU(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function XU(t){return t==="angle"?{between:vf,compare:Soe,normalize:br}:{between:os,compare:(e,n)=>e-n,normalize:e=>e}}function aP({start:t,end:e,count:n,loop:r,style:i}){return{start:t%n,end:e%n,loop:r&&(e-t+1)%n===0,style:i}}function Sae(t,e,n){const{property:r,start:i,end:s}=n,{between:o,normalize:a}=XU(r),l=e.length;let{start:c,end:u,loop:d}=t,h,f;if(d){for(c+=l,u+=l,h=0,f=l;h<f&&o(a(e[c%l][r]),i,s);++h)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:d,style:t.style}}function JU(t,e,n){if(!n)return[t];const{property:r,start:i,end:s}=n,o=e.length,{compare:a,between:l,normalize:c}=XU(r),{start:u,end:d,loop:h,style:f}=Sae(t,e,n),g=[];let m=!1,v=null,_,y,w;const b=()=>l(i,w,_)&&a(i,w)!==0,x=()=>a(s,_)===0||l(s,w,_),T=()=>m||b(),I=()=>!m||x();for(let E=u,k=u;E<=d;++E)y=e[E%o],!y.skip&&(_=c(y[r]),_!==w&&(m=l(_,i,s),v===null&&T()&&(v=a(_,i)===0?E:k),v!==null&&I()&&(g.push(aP({start:v,end:E,loop:h,count:o,style:f})),v=null),k=E,w=_));return v!==null&&g.push(aP({start:v,end:d,loop:h,count:o,style:f})),g}function ZU(t,e){const n=[],r=t.segments;for(let i=0;i<r.length;i++){const s=JU(r[i],t.points,e);s.length&&n.push(...s)}return n}function Eae(t,e,n,r){let i=0,s=e-1;if(n&&!r)for(;i<e&&!t[i].skip;)i++;for(;i<e&&t[i].skip;)i++;for(i%=e,n&&(s+=i);s>i&&t[s%e].skip;)s--;return s%=e,{start:i,end:s}}function Tae(t,e,n,r){const i=t.length,s=[];let o=e,a=t[e],l;for(l=e+1;l<=n;++l){const c=t[l%i];c.skip||c.stop?a.skip||(r=!1,s.push({start:e%i,end:(l-1)%i,loop:r}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&s.push({start:e%i,end:o%i,loop:r}),s}function Iae(t,e){const n=t.points,r=t.options.spanGaps,i=n.length;if(!i)return[];const s=!!t._loop,{start:o,end:a}=Eae(n,i,s,r);if(r===!0)return lP(t,[{start:o,end:a,loop:s}],n,e);const l=a<o?a+i:a,c=!!t._fullLoop&&o===0&&a===i-1;return lP(t,Tae(n,o,l,c),n,e)}function lP(t,e,n,r){return!r||!r.setContext||!n?e:Cae(t,e,n,r)}function Cae(t,e,n,r){const i=t._chart.getContext(),s=cP(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,c=[];let u=s,d=e[0].start,h=d;function f(g,m,v,_){const y=a?-1:1;if(g!==m){for(g+=l;n[g%l].skip;)g-=y;for(;n[m%l].skip;)m+=y;g%l!==m%l&&(c.push({start:g%l,end:m%l,loop:v,style:_}),u=_,d=m%l)}}for(const g of e){d=a?d:g.start;let m=n[d%l],v;for(h=d+1;h<=g.end;h++){const _=n[h%l];v=cP(r.setContext(Ko(i,{type:"segment",p0:m,p1:_,p0DataIndex:(h-1)%l,p1DataIndex:h%l,datasetIndex:o}))),Rae(v,u)&&f(d,h-1,g.loop,u),m=_,u=v}d<h-1&&f(d,h-1,g.loop,u)}return c}function cP(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function Rae(t,e){if(!e)return!1;const n=[],r=function(i,s){return s1(s)?(n.includes(s)||n.push(s),n.indexOf(s)):s};return JSON.stringify(t,r)!==JSON.stringify(e,r)}/*!
 * Chart.js v4.4.2
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */class kae{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,r,i){const s=n.listeners[i],o=n.duration;s.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(r-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=LU.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((r,i)=>{if(!r.running||!r.items.length)return;const s=r.items;let o=s.length-1,a=!1,l;for(;o>=0;--o)l=s[o],l._active?(l._total>r.duration&&(r.duration=l._total),l.tick(e),a=!0):(s[o]=s[s.length-1],s.pop());a&&(i.draw(),this._notify(i,r,e,"progress")),s.length||(r.running=!1,this._notify(i,r,e,"complete"),r.initial=!1),n+=s.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let r=n.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,r)),r}listen(e,n,r){this._getAnims(e).listeners[n].push(r)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((r,i)=>Math.max(r,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const r=n.items;let i=r.length-1;for(;i>=0;--i)r[i].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Qi=new kae;const uP="transparent",Aae={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const r=eP(t||uP),i=r.valid&&eP(e||uP);return i&&i.valid?i.mix(r,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class Pae{constructor(e,n,r,i){const s=n[r];i=Od([e.to,i,s,e.from]);const o=Od([e.from,s,i]);this._active=!0,this._fn=e.fn||Aae[e.type||typeof o],this._easing=dh[e.easing]||dh.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=r,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(e,n,r){if(this._active){this._notify(!1);const i=this._target[this._prop],s=r-this._start,o=this._duration-s;this._start=r,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=Od([e.to,n,i,e.from]),this._from=Od([e.from,i,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,r=this._duration,i=this._prop,s=this._from,o=this._loop,a=this._to;let l;if(this._active=s!==a&&(o||n<r),!this._active){this._target[i]=a,this._notify(!0);return}if(n<0){this._target[i]=s;return}l=n/r%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[i]=this._fn(s,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,r)=>{e.push({res:n,rej:r})})}_notify(e){const n=e?"res":"rej",r=this._promises||[];for(let i=0;i<r.length;i++)r[i][n]()}}class eB{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!Ne(e))return;const n=Object.keys(Nt.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const s=e[i];if(!Ne(s))return;const o={};for(const a of n)o[a]=s[a];(dt(s.properties)&&s.properties||[i]).forEach(a=>{(a===i||!r.has(a))&&r.set(a,o)})})}_animateOptions(e,n){const r=n.options,i=Dae(e,r);if(!i)return[];const s=this._createAnimations(i,r);return r.$shared&&Nae(e.options.$animations,r).then(()=>{e.options=r},()=>{}),s}_createAnimations(e,n){const r=this._properties,i=[],s=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){i.push(...this._animateOptions(e,n));continue}const u=n[c];let d=s[c];const h=r.get(c);if(d)if(h&&d.active()){d.update(h,u,a);continue}else d.cancel();if(!h||!h.duration){e[c]=u;continue}s[c]=d=new Pae(h,e,c,u),i.push(d)}return i}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const r=this._createAnimations(e,n);if(r.length)return Qi.add(this._chart,r),!0}}function Nae(t,e){const n=[],r=Object.keys(e);for(let i=0;i<r.length;i++){const s=t[r[i]];s&&s.active()&&n.push(s.wait())}return Promise.all(n)}function Dae(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function dP(t,e){const n=t&&t.options||{},r=n.reverse,i=n.min===void 0?e:0,s=n.max===void 0?e:0;return{start:r?s:i,end:r?i:s}}function Oae(t,e,n){if(n===!1)return!1;const r=dP(t,n),i=dP(e,n);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}function Mae(t){let e,n,r,i;return Ne(t)?(e=t.top,n=t.right,r=t.bottom,i=t.left):e=n=r=i=t,{top:e,right:n,bottom:r,left:i,disabled:t===!1}}function tB(t,e){const n=[],r=t._getSortedDatasetMetas(e);let i,s;for(i=0,s=r.length;i<s;++i)n.push(r[i].index);return n}function hP(t,e,n,r={}){const i=t.keys,s=r.mode==="single";let o,a,l,c;if(e!==null){for(o=0,a=i.length;o<a;++o){if(l=+i[o],l===n){if(r.all)continue;break}c=t.values[l],Pt(c)&&(s||e===0||ji(e)===ji(c))&&(e+=c)}return e}}function Lae(t){const e=Object.keys(t),n=new Array(e.length);let r,i,s;for(r=0,i=e.length;r<i;++r)s=e[r],n[r]={x:s,y:t[s]};return n}function fP(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function Vae(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function Fae(t){const{min:e,max:n,minDefined:r,maxDefined:i}=t.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:i?n:Number.POSITIVE_INFINITY}}function jae(t,e,n){const r=t[e]||(t[e]={});return r[n]||(r[n]={})}function pP(t,e,n,r){for(const i of e.getMatchingVisibleMetas(r).reverse()){const s=t[i.index];if(n&&s>0||!n&&s<0)return i.index}return null}function gP(t,e){const{chart:n,_cachedMeta:r}=t,i=n._stacks||(n._stacks={}),{iScale:s,vScale:o,index:a}=r,l=s.axis,c=o.axis,u=Vae(s,o,r),d=e.length;let h;for(let f=0;f<d;++f){const g=e[f],{[l]:m,[c]:v}=g,_=g._stacks||(g._stacks={});h=_[c]=jae(i,u,m),h[a]=v,h._top=pP(h,o,!0,r.type),h._bottom=pP(h,o,!1,r.type);const y=h._visualValues||(h._visualValues={});y[a]=v}}function gw(t,e){const n=t.scales;return Object.keys(n).filter(r=>n[r].axis===e).shift()}function $ae(t,e){return Ko(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function Uae(t,e,n){return Ko(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function sd(t,e){const n=t.controller.index,r=t.vScale&&t.vScale.axis;if(r){e=e||t._parsed;for(const i of e){const s=i._stacks;if(!s||s[r]===void 0||s[r][n]===void 0)return;delete s[r][n],s[r]._visualValues!==void 0&&s[r]._visualValues[n]!==void 0&&delete s[r]._visualValues[n]}}}const mw=t=>t==="reset"||t==="none",mP=(t,e)=>e?t:Object.assign({},t),Bae=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:tB(n,!0),values:null};class ai{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=fP(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&sd(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,r=this.getDataset(),i=(d,h,f,g)=>d==="x"?h:d==="r"?g:f,s=n.xAxisID=Te(r.xAxisID,gw(e,"x")),o=n.yAxisID=Te(r.yAxisID,gw(e,"y")),a=n.rAxisID=Te(r.rAxisID,gw(e,"r")),l=n.indexAxis,c=n.iAxisID=i(l,s,o,a),u=n.vAxisID=i(l,o,s,a);n.xScale=this.getScaleForId(s),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&XA(this._data,this),e._stacked&&sd(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),r=this._data;if(Ne(n))this._data=Lae(n);else if(r!==n){if(r){XA(r,this);const i=this._cachedMeta;sd(i),i._parsed=[]}n&&Object.isExtensible(n)&&Coe(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,r=this.getDataset();let i=!1;this._dataCheck();const s=n._stacked;n._stacked=fP(n.vScale,n),n.stack!==r.stack&&(i=!0,sd(n),n.stack=r.stack),this._resyncElements(e),(i||s!==n._stacked)&&gP(this,n._parsed)}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:r,_data:i}=this,{iScale:s,_stacked:o}=r,a=s.axis;let l=e===0&&n===i.length?!0:r._sorted,c=e>0&&r._parsed[e-1],u,d,h;if(this._parsing===!1)r._parsed=i,r._sorted=!0,h=i;else{dt(i[e])?h=this.parseArrayData(r,i,e,n):Ne(i[e])?h=this.parseObjectData(r,i,e,n):h=this.parsePrimitiveData(r,i,e,n);const f=()=>d[a]===null||c&&d[a]<c[a];for(u=0;u<n;++u)r._parsed[u+e]=d=h[u],l&&(f()&&(l=!1),c=d);r._sorted=l}o&&gP(this,h)}parsePrimitiveData(e,n,r,i){const{iScale:s,vScale:o}=e,a=s.axis,l=o.axis,c=s.getLabels(),u=s===o,d=new Array(i);let h,f,g;for(h=0,f=i;h<f;++h)g=h+r,d[h]={[a]:u||s.parse(c[g],g),[l]:o.parse(n[g],g)};return d}parseArrayData(e,n,r,i){const{xScale:s,yScale:o}=e,a=new Array(i);let l,c,u,d;for(l=0,c=i;l<c;++l)u=l+r,d=n[u],a[l]={x:s.parse(d[0],u),y:o.parse(d[1],u)};return a}parseObjectData(e,n,r,i){const{xScale:s,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(i);let u,d,h,f;for(u=0,d=i;u<d;++u)h=u+r,f=n[h],c[u]={x:s.parse(Po(f,a),h),y:o.parse(Po(f,l),h)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,r){const i=this.chart,s=this._cachedMeta,o=n[e.axis],a={keys:tB(i,!0),values:n._stacks[e.axis]._visualValues};return hP(a,o,s.index,{mode:r})}updateRangeFromParsed(e,n,r,i){const s=r[n.axis];let o=s===null?NaN:s;const a=i&&r._stacks[n.axis];i&&a&&(i.values=a,o=hP(i,s,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const r=this._cachedMeta,i=r._parsed,s=r._sorted&&e===r.iScale,o=i.length,a=this._getOtherScale(e),l=Bae(n,r,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:d}=Fae(a);let h,f;function g(){f=i[h];const m=f[a.axis];return!Pt(f[e.axis])||u>m||d<m}for(h=0;h<o&&!(!g()&&(this.updateRangeFromParsed(c,e,f,l),s));++h);if(s){for(h=o-1;h>=0;--h)if(!g()){this.updateRangeFromParsed(c,e,f,l);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,r=[];let i,s,o;for(i=0,s=n.length;i<s;++i)o=n[i][e.axis],Pt(o)&&r.push(o);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,r=n.iScale,i=n.vScale,s=this.getParsed(e);return{label:r?""+r.getLabelForValue(s[r.axis]):"",value:i?""+i.getLabelForValue(s[i.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=Mae(Te(this.options.clip,Oae(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,r=this._cachedMeta,i=r.data||[],s=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||i.length-a,c=this.options.drawActiveElementsOnTop;let u;for(r.dataset&&r.dataset.draw(e,s,a,l),u=a;u<a+l;++u){const d=i[u];d.hidden||(d.active&&c?o.push(d):d.draw(e,s))}for(u=0;u<o.length;++u)o[u].draw(e,s)}getStyle(e,n){const r=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,n,r){const i=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];s=o.$context||(o.$context=Uae(this.getContext(),e,o)),s.parsed=this.getParsed(e),s.raw=i.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=$ae(this.chart.getContext(),this.index)),s.dataset=i,s.index=s.datasetIndex=this.index;return s.active=!!n,s.mode=r,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",r){const i=n==="active",s=this._cachedDataOpts,o=e+"-"+n,a=s[o],l=this.enableOptionSharing&&_f(r);if(a)return mP(a,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,e),d=i?[`${e}Hover`,"hover",e,""]:[e,""],h=c.getOptionScopes(this.getDataset(),u),f=Object.keys(Nt.elements[e]),g=()=>this.getContext(r,i,n),m=c.resolveNamedOptions(h,f,g,d);return m.$shared&&(m.$shared=l,s[o]=Object.freeze(mP(m,l))),m}_resolveAnimations(e,n,r){const i=this.chart,s=this._cachedDataOpts,o=`animation-${n}`,a=s[o];if(a)return a;let l;if(i.options.animation!==!1){const u=this.chart.config,d=u.datasetAnimationScopeKeys(this._type,n),h=u.getOptionScopes(this.getDataset(),d);l=u.createResolver(h,this.getContext(e,r,n))}const c=new eB(i,l&&l.animations);return l&&l._cacheable&&(s[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||mw(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const r=this.resolveDataElementOptions(e,n),i=this._sharedOptions,s=this.getSharedOptions(r),o=this.includeOptions(n,s)||s!==i;return this.updateSharedOptions(s,n,r),{sharedOptions:s,includeOptions:o}}updateElement(e,n,r,i){mw(i)?Object.assign(e,r):this._resolveAnimations(n,i).update(e,r)}updateSharedOptions(e,n,r){e&&!mw(n)&&this._resolveAnimations(void 0,n).update(e,r)}_setStyle(e,n,r,i){e.active=i;const s=this.getStyle(n,i);this._resolveAnimations(n,r,i).update(e,{options:!i&&this.getSharedOptions(s)||s})}removeHoverStyle(e,n,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,n,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,r=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const i=r.length,s=n.length,o=Math.min(s,i);o&&this.parse(0,o),s>i?this._insertElements(i,s-i,e):s<i&&this._removeElements(s,i-s)}_insertElements(e,n,r=!0){const i=this._cachedMeta,s=i.data,o=e+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(s),a=e;a<o;++a)s[a]=new this.dataElementType;this._parsing&&l(i._parsed),this.parse(e,n),r&&this.updateElements(s,e,n,"reset")}updateElements(e,n,r,i){}_removeElements(e,n){const r=this._cachedMeta;if(this._parsing){const i=r._parsed.splice(e,n);r._stacked&&sd(r,i)}r.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,r,i]=e;this[n](r,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}Y(ai,"defaults",{}),Y(ai,"datasetElementType",null),Y(ai,"dataElementType",null);function zae(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let r=[];for(let i=0,s=n.length;i<s;i++)r=r.concat(n[i].controller.getAllParsedValues(t));t._cache.$bar=MU(r.sort((i,s)=>i-s))}return t._cache.$bar}function Wae(t){const e=t.iScale,n=zae(e,t.type);let r=e._length,i,s,o,a;const l=()=>{o===32767||o===-32768||(_f(a)&&(r=Math.min(r,Math.abs(o-a)||r)),a=o)};for(i=0,s=n.length;i<s;++i)o=e.getPixelForValue(n[i]),l();for(a=void 0,i=0,s=e.ticks.length;i<s;++i)o=e.getPixelForTick(i),l();return r}function Hae(t,e,n,r){const i=n.barThickness;let s,o;return je(i)?(s=e.min*n.categoryPercentage,o=n.barPercentage):(s=i*r,o=1),{chunk:s/r,ratio:o,start:e.pixels[t]-s/2}}function qae(t,e,n,r){const i=e.pixels,s=i[t];let o=t>0?i[t-1]:null,a=t<i.length-1?i[t+1]:null;const l=n.categoryPercentage;o===null&&(o=s-(a===null?e.end-e.start:a-s)),a===null&&(a=s+s-o);const c=s-(s-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/r,ratio:n.barPercentage,start:c}}function Gae(t,e,n,r){const i=n.parse(t[0],r),s=n.parse(t[1],r),o=Math.min(i,s),a=Math.max(i,s);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),e[n.axis]=c,e._custom={barStart:l,barEnd:c,start:i,end:s,min:o,max:a}}function nB(t,e,n,r){return dt(t)?Gae(t,e,n,r):e[n.axis]=n.parse(t,r),e}function yP(t,e,n,r){const i=t.iScale,s=t.vScale,o=i.getLabels(),a=i===s,l=[];let c,u,d,h;for(c=n,u=n+r;c<u;++c)h=e[c],d={},d[i.axis]=a||i.parse(o[c],c),l.push(nB(h,d,s,c));return l}function yw(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function Kae(t,e,n){return t!==0?ji(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}function Qae(t){let e,n,r,i,s;return t.horizontal?(e=t.base>t.x,n="left",r="right"):(e=t.base<t.y,n="bottom",r="top"),e?(i="end",s="start"):(i="start",s="end"),{start:n,end:r,reverse:e,top:i,bottom:s}}function Yae(t,e,n,r){let i=e.borderSkipped;const s={};if(!i){t.borderSkipped=s;return}if(i===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:c,bottom:u}=Qae(t);i==="middle"&&n&&(t.enableBorderRadius=!0,(n._top||0)===r?i=c:(n._bottom||0)===r?i=u:(s[_P(u,o,a,l)]=!0,i=c)),s[_P(i,o,a,l)]=!0,t.borderSkipped=s}function _P(t,e,n,r){return r?(t=Xae(t,e,n),t=vP(t,n,e)):t=vP(t,e,n),t}function Xae(t,e,n){return t===e?n:t===n?e:t}function vP(t,e,n){return t==="start"?e:t==="end"?n:t}function Jae(t,{inflateAmount:e},n){t.inflateAmount=e==="auto"?n===1?.33:0:e}class om extends ai{parsePrimitiveData(e,n,r,i){return yP(e,n,r,i)}parseArrayData(e,n,r,i){return yP(e,n,r,i)}parseObjectData(e,n,r,i){const{iScale:s,vScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=s.axis==="x"?a:l,u=o.axis==="x"?a:l,d=[];let h,f,g,m;for(h=r,f=r+i;h<f;++h)m=n[h],g={},g[s.axis]=s.parse(Po(m,c),h),d.push(nB(Po(m,u),g,o,h));return d}updateRangeFromParsed(e,n,r,i){super.updateRangeFromParsed(e,n,r,i);const s=r._custom;s&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,s.min),e.max=Math.max(e.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const n=this._cachedMeta,{iScale:r,vScale:i}=n,s=this.getParsed(e),o=s._custom,a=yw(o)?"["+o.start+", "+o.end+"]":""+i.getLabelForValue(s[i.axis]);return{label:""+r.getLabelForValue(s[r.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,r,i){const s=i==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),u=this._getRuler(),{sharedOptions:d,includeOptions:h}=this._getSharedOptions(n,i);for(let f=n;f<n+r;f++){const g=this.getParsed(f),m=s||je(g[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(f),v=this._calculateBarIndexPixels(f,u),_=(g._stacks||{})[a.axis],y={horizontal:c,base:m.base,enableBorderRadius:!_||yw(g._custom)||o===_._top||o===_._bottom,x:c?m.head:v.center,y:c?v.center:m.head,height:c?v.size:Math.abs(m.size),width:c?Math.abs(m.size):v.size};h&&(y.options=d||this.resolveDataElementOptions(f,e[f].active?"active":i));const w=y.options||e[f].options;Yae(y,w,_,o),Jae(y,w,u.ratio),this.updateElement(e[f],f,y,i)}}_getStacks(e,n){const{iScale:r}=this._cachedMeta,i=r.getMatchingVisibleMetas(this._type).filter(l=>l.controller.options.grouped),s=r.options.stacked,o=[],a=l=>{const c=l.controller.getParsed(n),u=c&&c[l.vScale.axis];if(je(u)||isNaN(u))return!0};for(const l of i)if(!(n!==void 0&&a(l))&&((s===!1||o.indexOf(l.stack)===-1||s===void 0&&l.stack===void 0)&&o.push(l.stack),l.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,n,r){const i=this._getStacks(e,r),s=n!==void 0?i.indexOf(n):-1;return s===-1?i.length-1:s}_getRuler(){const e=this.options,n=this._cachedMeta,r=n.iScale,i=[];let s,o;for(s=0,o=n.data.length;s<o;++s)i.push(r.getPixelForValue(this.getParsed(s)[r.axis],s));const a=e.barThickness;return{min:a||Wae(n),pixels:i,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:n,_stacked:r,index:i},options:{base:s,minBarLength:o}}=this,a=s||0,l=this.getParsed(e),c=l._custom,u=yw(c);let d=l[n.axis],h=0,f=r?this.applyStack(n,l,r):d,g,m;f!==d&&(h=f-d,f=d),u&&(d=c.barStart,f=c.barEnd-c.barStart,d!==0&&ji(d)!==ji(c.barEnd)&&(h=0),h+=d);const v=!je(s)&&!u?s:h;let _=n.getPixelForValue(v);if(this.chart.getDataVisibility(e)?g=n.getPixelForValue(h+f):g=_,m=g-_,Math.abs(m)<o){m=Kae(m,n,a)*o,d===a&&(_-=m/2);const y=n.getPixelForDecimal(0),w=n.getPixelForDecimal(1),b=Math.min(y,w),x=Math.max(y,w);_=Math.max(Math.min(_,x),b),g=_+m,r&&!u&&(l._stacks[n.axis]._visualValues[i]=n.getValueForPixel(g)-n.getValueForPixel(_))}if(_===n.getPixelForValue(a)){const y=ji(m)*n.getLineWidthForValue(a)/2;_+=y,m-=y}return{size:m,base:_,head:g,center:g+m/2}}_calculateBarIndexPixels(e,n){const r=n.scale,i=this.options,s=i.skipNull,o=Te(i.maxBarThickness,1/0);let a,l;if(n.grouped){const c=s?this._getStackCount(e):n.stackCount,u=i.barThickness==="flex"?qae(e,n,i,c):Hae(e,n,i,c),d=this._getStackIndex(this.index,this._cachedMeta.stack,s?e:void 0);a=u.start+u.chunk*d+u.chunk/2,l=Math.min(o,u.chunk*u.ratio)}else a=r.getPixelForValue(this.getParsed(e)[r.axis],e),l=Math.min(o,n.min*n.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const e=this._cachedMeta,n=e.vScale,r=e.data,i=r.length;let s=0;for(;s<i;++s)this.getParsed(s)[n.axis]!==null&&r[s].draw(this._ctx)}}Y(om,"id","bar"),Y(om,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),Y(om,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class am extends ai{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,n,r,i){const s=super.parsePrimitiveData(e,n,r,i);for(let o=0;o<s.length;o++)s[o]._custom=this.resolveDataElementOptions(o+r).radius;return s}parseArrayData(e,n,r,i){const s=super.parseArrayData(e,n,r,i);for(let o=0;o<s.length;o++){const a=n[r+o];s[o]._custom=Te(a[2],this.resolveDataElementOptions(o+r).radius)}return s}parseObjectData(e,n,r,i){const s=super.parseObjectData(e,n,r,i);for(let o=0;o<s.length;o++){const a=n[r+o];s[o]._custom=Te(a&&a.r&&+a.r,this.resolveDataElementOptions(o+r).radius)}return s}getMaxOverflow(){const e=this._cachedMeta.data;let n=0;for(let r=e.length-1;r>=0;--r)n=Math.max(n,e[r].size(this.resolveDataElementOptions(r))/2);return n>0&&n}getLabelAndValue(e){const n=this._cachedMeta,r=this.chart.data.labels||[],{xScale:i,yScale:s}=n,o=this.getParsed(e),a=i.getLabelForValue(o.x),l=s.getLabelForValue(o.y),c=o._custom;return{label:r[e]||"",value:"("+a+", "+l+(c?", "+c:"")+")"}}update(e){const n=this._cachedMeta.data;this.updateElements(n,0,n.length,e)}updateElements(e,n,r,i){const s=i==="reset",{iScale:o,vScale:a}=this._cachedMeta,{sharedOptions:l,includeOptions:c}=this._getSharedOptions(n,i),u=o.axis,d=a.axis;for(let h=n;h<n+r;h++){const f=e[h],g=!s&&this.getParsed(h),m={},v=m[u]=s?o.getPixelForDecimal(.5):o.getPixelForValue(g[u]),_=m[d]=s?a.getBasePixel():a.getPixelForValue(g[d]);m.skip=isNaN(v)||isNaN(_),c&&(m.options=l||this.resolveDataElementOptions(h,f.active?"active":i),s&&(m.options.radius=0)),this.updateElement(f,h,m,i)}}resolveDataElementOptions(e,n){const r=this.getParsed(e);let i=super.resolveDataElementOptions(e,n);i.$shared&&(i=Object.assign({},i,{$shared:!1}));const s=i.radius;return n!=="active"&&(i.radius=0),i.radius+=Te(r&&r._custom,s),i}}Y(am,"id","bubble"),Y(am,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),Y(am,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function Zae(t,e,n){let r=1,i=1,s=0,o=0;if(e<ft){const a=t,l=a+e,c=Math.cos(a),u=Math.sin(a),d=Math.cos(l),h=Math.sin(l),f=(w,b,x)=>vf(w,a,l,!0)?1:Math.max(b,b*n,x,x*n),g=(w,b,x)=>vf(w,a,l,!0)?-1:Math.min(b,b*n,x,x*n),m=f(0,c,d),v=f(Ut,u,h),_=g(gt,c,d),y=g(gt+Ut,u,h);r=(m-_)/2,i=(v-y)/2,s=-(m+_)/2,o=-(v+y)/2}return{ratioX:r,ratioY:i,offsetX:s,offsetY:o}}class ba extends ai{constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const r=this.getDataset().data,i=this._cachedMeta;if(this._parsing===!1)i._parsed=r;else{let s=l=>+r[l];if(Ne(r[e])){const{key:l="value"}=this._parsing;s=c=>+Po(r[c],l)}let o,a;for(o=e,a=e+n;o<a;++o)i._parsed[o]=s(o)}}_getRotation(){return ri(this.options.rotation-90)}_getCircumference(){return ri(this.options.circumference)}_getRotationExtents(){let e=ft,n=-ft;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){const i=this.chart.getDatasetMeta(r).controller,s=i._getRotation(),o=i._getCircumference();e=Math.min(e,s),n=Math.max(n,s+o)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:r}=n,i=this._cachedMeta,s=i.data,o=this.getMaxBorderWidth()+this.getMaxOffset(s)+this.options.spacing,a=Math.max((Math.min(r.width,r.height)-o)/2,0),l=Math.min(foe(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:u,rotation:d}=this._getRotationExtents(),{ratioX:h,ratioY:f,offsetX:g,offsetY:m}=Zae(d,u,l),v=(r.width-o)/h,_=(r.height-o)/f,y=Math.max(Math.min(v,_)/2,0),w=AU(this.options.radius,y),b=Math.max(w*l,0),x=(w-b)/this._getVisibleDatasetWeightTotal();this.offsetX=g*w,this.offsetY=m*w,i.total=this.calculateTotal(),this.outerRadius=w-x*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-x*c,0),this.updateElements(s,0,s.length,e)}_circumference(e,n){const r=this.options,i=this._cachedMeta,s=this._getCircumference();return n&&r.animation.animateRotate||!this.chart.getDataVisibility(e)||i._parsed[e]===null||i.data[e].hidden?0:this.calculateCircumference(i._parsed[e]*s/ft)}updateElements(e,n,r,i){const s=i==="reset",o=this.chart,a=o.chartArea,c=o.options.animation,u=(a.left+a.right)/2,d=(a.top+a.bottom)/2,h=s&&c.animateScale,f=h?0:this.innerRadius,g=h?0:this.outerRadius,{sharedOptions:m,includeOptions:v}=this._getSharedOptions(n,i);let _=this._getRotation(),y;for(y=0;y<n;++y)_+=this._circumference(y,s);for(y=n;y<n+r;++y){const w=this._circumference(y,s),b=e[y],x={x:u+this.offsetX,y:d+this.offsetY,startAngle:_,endAngle:_+w,circumference:w,outerRadius:g,innerRadius:f};v&&(x.options=m||this.resolveDataElementOptions(y,b.active?"active":i)),_+=w,this.updateElement(b,y,x,i)}}calculateTotal(){const e=this._cachedMeta,n=e.data;let r=0,i;for(i=0;i<n.length;i++){const s=e._parsed[i];s!==null&&!isNaN(s)&&this.chart.getDataVisibility(i)&&!n[i].hidden&&(r+=Math.abs(s))}return r}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?ft*(Math.abs(e)/n):0}getLabelAndValue(e){const n=this._cachedMeta,r=this.chart,i=r.data.labels||[],s=Sp(n._parsed[e],r.options.locale);return{label:i[e]||"",value:s}}getMaxBorderWidth(e){let n=0;const r=this.chart;let i,s,o,a,l;if(!e){for(i=0,s=r.data.datasets.length;i<s;++i)if(r.isDatasetVisible(i)){o=r.getDatasetMeta(i),e=o.data,a=o.controller;break}}if(!e)return 0;for(i=0,s=e.length;i<s;++i)l=a.resolveDataElementOptions(i),l.borderAlign!=="inner"&&(n=Math.max(n,l.borderWidth||0,l.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let r=0,i=e.length;r<i;++r){const s=this.resolveDataElementOptions(r);n=Math.max(n,s.offset||0,s.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let r=0;r<e;++r)this.chart.isDatasetVisible(r)&&(n+=this._getRingWeight(r));return n}_getRingWeight(e){return Math.max(Te(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}Y(ba,"id","doughnut"),Y(ba,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),Y(ba,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),Y(ba,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:r,color:i}}=e.legend.options;return n.labels.map((s,o)=>{const l=e.getDatasetMeta(0).controller.getStyle(o);return{text:s,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:i,lineWidth:l.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,n,r){r.chart.toggleDataVisibility(n.index),r.chart.update()}}}});class lm extends ai{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:r,data:i=[],_dataset:s}=n,o=this.chart._animationsDisabled;let{start:a,count:l}=FU(n,i,o);this._drawStart=a,this._drawCount=l,jU(n)&&(a=0,l=i.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!s._decimated,r.points=i;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(r,void 0,{animated:!o,options:c},e),this.updateElements(i,a,l,e)}updateElements(e,n,r,i){const s=i==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:u,includeOptions:d}=this._getSharedOptions(n,i),h=o.axis,f=a.axis,{spanGaps:g,segment:m}=this.options,v=tu(g)?g:Number.POSITIVE_INFINITY,_=this.chart._animationsDisabled||s||i==="none",y=n+r,w=e.length;let b=n>0&&this.getParsed(n-1);for(let x=0;x<w;++x){const T=e[x],I=_?T:{};if(x<n||x>=y){I.skip=!0;continue}const E=this.getParsed(x),k=je(E[f]),D=I[h]=o.getPixelForValue(E[h],x),F=I[f]=s||k?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,E,l):E[f],x);I.skip=isNaN(D)||isNaN(F)||k,I.stop=x>0&&Math.abs(E[h]-b[h])>v,m&&(I.parsed=E,I.raw=c.data[x]),d&&(I.options=u||this.resolveDataElementOptions(x,T.active?"active":i)),_||this.updateElement(T,x,I,i),b=E}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,r=n.options&&n.options.borderWidth||0,i=e.data||[];if(!i.length)return r;const s=i[0].size(this.resolveDataElementOptions(0)),o=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(r,s,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}Y(lm,"id","line"),Y(lm,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),Y(lm,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class fh extends ai{constructor(e,n){super(e,n),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const n=this._cachedMeta,r=this.chart,i=r.data.labels||[],s=Sp(n._parsed[e].r,r.options.locale);return{label:i[e]||"",value:s}}parseObjectData(e,n,r,i){return GU.bind(this)(e,n,r,i)}update(e){const n=this._cachedMeta.data;this._updateRadius(),this.updateElements(n,0,n.length,e)}getMinMax(){const e=this._cachedMeta,n={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((r,i)=>{const s=this.getParsed(i).r;!isNaN(s)&&this.chart.getDataVisibility(i)&&(s<n.min&&(n.min=s),s>n.max&&(n.max=s))}),n}_updateRadius(){const e=this.chart,n=e.chartArea,r=e.options,i=Math.min(n.right-n.left,n.bottom-n.top),s=Math.max(i/2,0),o=Math.max(r.cutoutPercentage?s/100*r.cutoutPercentage:1,0),a=(s-o)/e.getVisibleDatasetCount();this.outerRadius=s-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(e,n,r,i){const s=i==="reset",o=this.chart,l=o.options.animation,c=this._cachedMeta.rScale,u=c.xCenter,d=c.yCenter,h=c.getIndexAngle(0)-.5*gt;let f=h,g;const m=360/this.countVisibleElements();for(g=0;g<n;++g)f+=this._computeAngle(g,i,m);for(g=n;g<n+r;g++){const v=e[g];let _=f,y=f+this._computeAngle(g,i,m),w=o.getDataVisibility(g)?c.getDistanceFromCenterForValue(this.getParsed(g).r):0;f=y,s&&(l.animateScale&&(w=0),l.animateRotate&&(_=y=h));const b={x:u,y:d,innerRadius:0,outerRadius:w,startAngle:_,endAngle:y,options:this.resolveDataElementOptions(g,v.active?"active":i)};this.updateElement(v,g,b,i)}}countVisibleElements(){const e=this._cachedMeta;let n=0;return e.data.forEach((r,i)=>{!isNaN(this.getParsed(i).r)&&this.chart.getDataVisibility(i)&&n++}),n}_computeAngle(e,n,r){return this.chart.getDataVisibility(e)?ri(this.resolveDataElementOptions(e,n).angle||r):0}}Y(fh,"id","polarArea"),Y(fh,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),Y(fh,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:r,color:i}}=e.legend.options;return n.labels.map((s,o)=>{const l=e.getDatasetMeta(0).controller.getStyle(o);return{text:s,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:i,lineWidth:l.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,n,r){r.chart.toggleDataVisibility(n.index),r.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class Zx extends ba{}Y(Zx,"id","pie"),Y(Zx,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class cm extends ai{getLabelAndValue(e){const n=this._cachedMeta.vScale,r=this.getParsed(e);return{label:n.getLabels()[e],value:""+n.getLabelForValue(r[n.axis])}}parseObjectData(e,n,r,i){return GU.bind(this)(e,n,r,i)}update(e){const n=this._cachedMeta,r=n.dataset,i=n.data||[],s=n.iScale.getLabels();if(r.points=i,e!=="resize"){const o=this.resolveDatasetElementOptions(e);this.options.showLine||(o.borderWidth=0);const a={_loop:!0,_fullLoop:s.length===i.length,options:o};this.updateElement(r,void 0,a,e)}this.updateElements(i,0,i.length,e)}updateElements(e,n,r,i){const s=this._cachedMeta.rScale,o=i==="reset";for(let a=n;a<n+r;a++){const l=e[a],c=this.resolveDataElementOptions(a,l.active?"active":i),u=s.getPointPositionForValue(a,this.getParsed(a).r),d=o?s.xCenter:u.x,h=o?s.yCenter:u.y,f={x:d,y:h,angle:u.angle,skip:isNaN(d)||isNaN(h),options:c};this.updateElement(l,a,f,i)}}}Y(cm,"id","radar"),Y(cm,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),Y(cm,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class um extends ai{getLabelAndValue(e){const n=this._cachedMeta,r=this.chart.data.labels||[],{xScale:i,yScale:s}=n,o=this.getParsed(e),a=i.getLabelForValue(o.x),l=s.getLabelForValue(o.y);return{label:r[e]||"",value:"("+a+", "+l+")"}}update(e){const n=this._cachedMeta,{data:r=[]}=n,i=this.chart._animationsDisabled;let{start:s,count:o}=FU(n,r,i);if(this._drawStart=s,this._drawCount=o,jU(n)&&(s=0,o=r.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:a,_dataset:l}=n;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!l._decimated,a.points=r;const c=this.resolveDatasetElementOptions(e);c.segment=this.options.segment,this.updateElement(a,void 0,{animated:!i,options:c},e)}else this.datasetElementType&&(delete n.dataset,this.datasetElementType=!1);this.updateElements(r,s,o,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,n,r,i){const s=i==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,u=this.resolveDataElementOptions(n,i),d=this.getSharedOptions(u),h=this.includeOptions(i,d),f=o.axis,g=a.axis,{spanGaps:m,segment:v}=this.options,_=tu(m)?m:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||s||i==="none";let w=n>0&&this.getParsed(n-1);for(let b=n;b<n+r;++b){const x=e[b],T=this.getParsed(b),I=y?x:{},E=je(T[g]),k=I[f]=o.getPixelForValue(T[f],b),D=I[g]=s||E?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,T,l):T[g],b);I.skip=isNaN(k)||isNaN(D)||E,I.stop=b>0&&Math.abs(T[f]-w[f])>_,v&&(I.parsed=T,I.raw=c.data[b]),h&&(I.options=d||this.resolveDataElementOptions(b,x.active?"active":i)),y||this.updateElement(x,b,I,i),w=T}this.updateSharedOptions(d,i,u)}getMaxOverflow(){const e=this._cachedMeta,n=e.data||[];if(!this.options.showLine){let a=0;for(let l=n.length-1;l>=0;--l)a=Math.max(a,n[l].size(this.resolveDataElementOptions(l))/2);return a>0&&a}const r=e.dataset,i=r.options&&r.options.borderWidth||0;if(!n.length)return i;const s=n[0].size(this.resolveDataElementOptions(0)),o=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(i,s,o)/2}}Y(um,"id","scatter"),Y(um,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),Y(um,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var ele=Object.freeze({__proto__:null,BarController:om,BubbleController:am,DoughnutController:ba,LineController:lm,PieController:Zx,PolarAreaController:fh,RadarController:cm,ScatterController:um});function Jo(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class h1{constructor(e){Y(this,"options");this.options=e||{}}static override(e){Object.assign(h1.prototype,e)}init(){}formats(){return Jo()}parse(){return Jo()}format(){return Jo()}add(){return Jo()}diff(){return Jo()}startOf(){return Jo()}endOf(){return Jo()}}var tle={_date:h1};function nle(t,e,n,r){const{controller:i,data:s,_sorted:o}=t,a=i._cachedMeta.iScale;if(a&&e===a.axis&&e!=="r"&&o&&s.length){const l=a._reversePixels?Toe:as;if(r){if(i._sharedOptions){const c=s[0],u=typeof c.getRange=="function"&&c.getRange(e);if(u){const d=l(s,e,n-u),h=l(s,e,n+u);return{lo:d.lo,hi:h.hi}}}}else return l(s,e,n)}return{lo:0,hi:s.length-1}}function Ep(t,e,n,r,i){const s=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=s.length;a<l;++a){const{index:c,data:u}=s[a],{lo:d,hi:h}=nle(s[a],e,o,i);for(let f=d;f<=h;++f){const g=u[f];g.skip||r(g,c,f)}}}function rle(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(r,i){const s=e?Math.abs(r.x-i.x):0,o=n?Math.abs(r.y-i.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function _w(t,e,n,r,i){const s=[];return!i&&!t.isPointInArea(e)||Ep(t,n,e,function(a,l,c){!i&&!ls(a,t.chartArea,0)||a.inRange(e.x,e.y,r)&&s.push({element:a,datasetIndex:l,index:c})},!0),s}function ile(t,e,n,r){let i=[];function s(o,a,l){const{startAngle:c,endAngle:u}=o.getProps(["startAngle","endAngle"],r),{angle:d}=DU(o,{x:e.x,y:e.y});vf(d,c,u)&&i.push({element:o,datasetIndex:a,index:l})}return Ep(t,n,e,s),i}function sle(t,e,n,r,i,s){let o=[];const a=rle(n);let l=Number.POSITIVE_INFINITY;function c(u,d,h){const f=u.inRange(e.x,e.y,i);if(r&&!f)return;const g=u.getCenterPoint(i);if(!(!!s||t.isPointInArea(g))&&!f)return;const v=a(e,g);v<l?(o=[{element:u,datasetIndex:d,index:h}],l=v):v===l&&o.push({element:u,datasetIndex:d,index:h})}return Ep(t,n,e,c),o}function vw(t,e,n,r,i,s){return!s&&!t.isPointInArea(e)?[]:n==="r"&&!r?ile(t,e,n,i):sle(t,e,n,r,i,s)}function wP(t,e,n,r,i){const s=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return Ep(t,n,e,(l,c,u)=>{l[o](e[n],i)&&(s.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(e.x,e.y,i))}),r&&!a?[]:s}var ole={evaluateInteractionItems:Ep,modes:{index(t,e,n,r){const i=ia(e,t),s=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?_w(t,i,s,r,o):vw(t,i,s,!1,r,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,d=c.data[u];d&&!d.skip&&l.push({element:d,datasetIndex:c.index,index:u})}),l):[]},dataset(t,e,n,r){const i=ia(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?_w(t,i,s,r,o):vw(t,i,s,!1,r,o);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(t,e,n,r){const i=ia(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return _w(t,i,s,r,o)},nearest(t,e,n,r){const i=ia(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return vw(t,i,s,n.intersect,r,o)},x(t,e,n,r){const i=ia(e,t);return wP(t,i,"x",n.intersect,r)},y(t,e,n,r){const i=ia(e,t);return wP(t,i,"y",n.intersect,r)}}};const rB=["left","top","right","bottom"];function od(t,e){return t.filter(n=>n.pos===e)}function bP(t,e){return t.filter(n=>rB.indexOf(n.pos)===-1&&n.box.axis===e)}function ad(t,e){return t.sort((n,r)=>{const i=e?r:n,s=e?n:r;return i.weight===s.weight?i.index-s.index:i.weight-s.weight})}function ale(t){const e=[];let n,r,i,s,o,a;for(n=0,r=(t||[]).length;n<r;++n)i=t[n],{position:s,options:{stack:o,stackWeight:a=1}}=i,e.push({index:n,box:i,pos:s,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&s+o,stackWeight:a});return e}function lle(t){const e={};for(const n of t){const{stack:r,pos:i,stackWeight:s}=n;if(!r||!rB.includes(i))continue;const o=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}function cle(t,e){const n=lle(t),{vBoxMaxWidth:r,hBoxMaxHeight:i}=e;let s,o,a;for(s=0,o=t.length;s<o;++s){a=t[s];const{fullSize:l}=a.box,c=n[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*r:l&&e.availableWidth,a.height=i):(a.width=r,a.height=u?u*i:l&&e.availableHeight)}return n}function ule(t){const e=ale(t),n=ad(e.filter(c=>c.box.fullSize),!0),r=ad(od(e,"left"),!0),i=ad(od(e,"right")),s=ad(od(e,"top"),!0),o=ad(od(e,"bottom")),a=bP(e,"x"),l=bP(e,"y");return{fullSize:n,leftAndTop:r.concat(s),rightAndBottom:i.concat(l).concat(o).concat(a),chartArea:od(e,"chartArea"),vertical:r.concat(i).concat(l),horizontal:s.concat(o).concat(a)}}function xP(t,e,n,r){return Math.max(t[n],e[n])+Math.max(t[r],e[r])}function iB(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function dle(t,e,n,r){const{pos:i,box:s}=n,o=t.maxPadding;if(!Ne(i)){n.size&&(t[i]-=n.size);const d=r[n.stack]||{size:0,count:1};d.size=Math.max(d.size,n.horizontal?s.height:s.width),n.size=d.size/d.count,t[i]+=n.size}s.getPadding&&iB(o,s.getPadding());const a=Math.max(0,e.outerWidth-xP(o,t,"left","right")),l=Math.max(0,e.outerHeight-xP(o,t,"top","bottom")),c=a!==t.w,u=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function hle(t){const e=t.maxPadding;function n(r){const i=Math.max(e[r]-t[r],0);return t[r]+=i,i}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function fle(t,e){const n=e.maxPadding;function r(i){const s={left:0,top:0,right:0,bottom:0};return i.forEach(o=>{s[o]=Math.max(e[o],n[o])}),s}return r(t?["left","right"]:["top","bottom"])}function Md(t,e,n,r){const i=[];let s,o,a,l,c,u;for(s=0,o=t.length,c=0;s<o;++s){a=t[s],l=a.box,l.update(a.width||e.w,a.height||e.h,fle(a.horizontal,e));const{same:d,other:h}=dle(e,n,a,r);c|=d&&i.length,u=u||h,l.fullSize||i.push(a)}return c&&Md(i,e,n,r)||u}function yg(t,e,n,r,i){t.top=n,t.left=e,t.right=e+r,t.bottom=n+i,t.width=r,t.height=i}function SP(t,e,n,r){const i=n.padding;let{x:s,y:o}=e;for(const a of t){const l=a.box,c=r[a.stack]||{count:1,placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const d=e.w*u,h=c.size||l.height;_f(c.start)&&(o=c.start),l.fullSize?yg(l,i.left,o,n.outerWidth-i.right-i.left,h):yg(l,e.left+c.placed,o,d,h),c.start=o,c.placed+=d,o=l.bottom}else{const d=e.h*u,h=c.size||l.width;_f(c.start)&&(s=c.start),l.fullSize?yg(l,s,i.top,h,n.outerHeight-i.bottom-i.top):yg(l,s,e.top+c.placed,h,d),c.start=s,c.placed+=d,s=l.right}}e.x=s,e.y=o}var Ln={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,r){if(!t)return;const i=Un(t.options.layout.padding),s=Math.max(e-i.width,0),o=Math.max(n-i.height,0),a=ule(t.boxes),l=a.vertical,c=a.horizontal;He(t.boxes,m=>{typeof m.beforeLayout=="function"&&m.beforeLayout()});const u=l.reduce((m,v)=>v.box.options&&v.box.options.display===!1?m:m+1,0)||1,d=Object.freeze({outerWidth:e,outerHeight:n,padding:i,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/u,hBoxMaxHeight:o/2}),h=Object.assign({},i);iB(h,Un(r));const f=Object.assign({maxPadding:h,w:s,h:o,x:i.left,y:i.top},i),g=cle(l.concat(c),d);Md(a.fullSize,f,d,g),Md(l,f,d,g),Md(c,f,d,g)&&Md(l,f,d,g),hle(f),SP(a.leftAndTop,f,d,g),f.x+=f.w,f.y+=f.h,SP(a.rightAndBottom,f,d,g),t.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},He(a.chartArea,m=>{const v=m.box;Object.assign(v,t.chartArea),v.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}};class sB{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,r){}removeEventListener(e,n,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,r,i){return n=Math.max(0,n||e.width),r=r||e.height,{width:n,height:Math.max(0,i?Math.floor(n/i):r)}}isAttached(e){return!0}updateConfig(e){}}class ple extends sB{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const dm="$chartjs",gle={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},EP=t=>t===null||t==="";function mle(t,e){const n=t.style,r=t.getAttribute("height"),i=t.getAttribute("width");if(t[dm]={initial:{height:r,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",EP(i)){const s=oP(t,"width");s!==void 0&&(t.width=s)}if(EP(r))if(t.style.height==="")t.height=t.width/(e||2);else{const s=oP(t,"height");s!==void 0&&(t.height=s)}return t}const oB=_ae?{passive:!0}:!1;function yle(t,e,n){t&&t.addEventListener(e,n,oB)}function _le(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,oB)}function vle(t,e){const n=gle[t.type]||t.type,{x:r,y:i}=ia(t,e);return{type:n,chart:e,native:t,x:r!==void 0?r:null,y:i!==void 0?i:null}}function Cy(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function wle(t,e,n){const r=t.canvas,i=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||Cy(a.addedNodes,r),o=o&&!Cy(a.removedNodes,r);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}function ble(t,e,n){const r=t.canvas,i=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||Cy(a.removedNodes,r),o=o&&!Cy(a.addedNodes,r);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}const bf=new Map;let TP=0;function aB(){const t=window.devicePixelRatio;t!==TP&&(TP=t,bf.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function xle(t,e){bf.size||window.addEventListener("resize",aB),bf.set(t,e)}function Sle(t){bf.delete(t),bf.size||window.removeEventListener("resize",aB)}function Ele(t,e,n){const r=t.canvas,i=r&&d1(r);if(!i)return;const s=VU((a,l)=>{const c=i.clientWidth;n(a,l),c<i.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||s(c,u)});return o.observe(i),xle(t,s),o}function ww(t,e,n){n&&n.disconnect(),e==="resize"&&Sle(t)}function Tle(t,e,n){const r=t.canvas,i=VU(s=>{t.ctx!==null&&n(vle(s,t))},t);return yle(r,e,i),i}class Ile extends sB{acquireContext(e,n){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(mle(e,n),r):null}releaseContext(e){const n=e.canvas;if(!n[dm])return!1;const r=n[dm].initial;["height","width"].forEach(s=>{const o=r[s];je(o)?n.removeAttribute(s):n.setAttribute(s,o)});const i=r.style||{};return Object.keys(i).forEach(s=>{n.style[s]=i[s]}),n.width=n.width,delete n[dm],!0}addEventListener(e,n,r){this.removeEventListener(e,n);const i=e.$proxies||(e.$proxies={}),o={attach:wle,detach:ble,resize:Ele}[n]||Tle;i[n]=o(e,n,r)}removeEventListener(e,n){const r=e.$proxies||(e.$proxies={}),i=r[n];if(!i)return;({attach:ww,detach:ww,resize:ww}[n]||_le)(e,n,i),r[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,r,i){return yae(e,n,r,i)}isAttached(e){const n=d1(e);return!!(n&&n.isConnected)}}function Cle(t){return!u1()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?ple:Ile}var Og;let Ds=(Og=class{constructor(){Y(this,"x");Y(this,"y");Y(this,"active",!1);Y(this,"options");Y(this,"$animations")}tooltipPosition(e){const{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}hasValue(){return tu(this.x)&&tu(this.y)}getProps(e,n){const r=this.$animations;if(!n||!r)return this;const i={};return e.forEach(s=>{i[s]=r[s]&&r[s].active()?r[s]._to:this[s]}),i}},Y(Og,"defaults",{}),Y(Og,"defaultRoutes"),Og);function Rle(t,e){const n=t.options.ticks,r=kle(t),i=Math.min(n.maxTicksLimit||r,r),s=n.major.enabled?Ple(e):[],o=s.length,a=s[0],l=s[o-1],c=[];if(o>i)return Nle(e,c,s,o/i),c;const u=Ale(s,e,i);if(o>0){let d,h;const f=o>1?Math.round((l-a)/(o-1)):null;for(_g(e,c,u,je(f)?0:a-f,a),d=0,h=o-1;d<h;d++)_g(e,c,u,s[d],s[d+1]);return _g(e,c,u,l,je(f)?e.length:l+f),c}return _g(e,c,u),c}function kle(t){const e=t.options.offset,n=t._tickSize(),r=t._length/n+(e?0:1),i=t._maxLength/n;return Math.floor(Math.min(r,i))}function Ale(t,e,n){const r=Dle(t),i=e.length/n;if(!r)return Math.max(i,1);const s=boe(r);for(let o=0,a=s.length-1;o<a;o++){const l=s[o];if(l>i)return l}return Math.max(i,1)}function Ple(t){const e=[];let n,r;for(n=0,r=t.length;n<r;n++)t[n].major&&e.push(n);return e}function Nle(t,e,n,r){let i=0,s=n[0],o;for(r=Math.ceil(r),o=0;o<t.length;o++)o===s&&(e.push(t[o]),i++,s=n[i*r])}function _g(t,e,n,r,i){const s=Te(r,0),o=Math.min(Te(i,t.length),t.length);let a=0,l,c,u;for(n=Math.ceil(n),i&&(l=i-r,n=l/Math.floor(l/n)),u=s;u<0;)a++,u=Math.round(s+a*n);for(c=Math.max(s,0);c<o;c++)c===u&&(e.push(t[c]),a++,u=Math.round(s+a*n))}function Dle(t){const e=t.length;let n,r;if(e<2)return!1;for(r=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==r)return!1;return r}const Ole=t=>t==="left"?"right":t==="right"?"left":t,IP=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,CP=(t,e)=>Math.min(e||t,t);function RP(t,e){const n=[],r=t.length/e,i=t.length;let s=0;for(;s<i;s+=r)n.push(t[Math.floor(s)]);return n}function Mle(t,e,n){const r=t.ticks.length,i=Math.min(e,r-1),s=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(i),c;if(!(n&&(r===1?c=Math.max(l-s,o-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(i-1))/2,l+=i<e?c:-c,l<s-a||l>o+a)))return l}function Lle(t,e){He(t,n=>{const r=n.gc,i=r.length/2;let s;if(i>e){for(s=0;s<i;++s)delete n.data[r[s]];r.splice(0,i)}})}function ld(t){return t.drawTicks?t.tickLength:0}function kP(t,e){if(!t.display)return 0;const n=Jt(t.font,e),r=Un(t.padding);return(dt(t.text)?t.text.length:1)*n.lineHeight+r.height}function Vle(t,e){return Ko(t,{scale:e,type:"scale"})}function Fle(t,e,n){return Ko(t,{tick:n,index:e,type:"tick"})}function jle(t,e,n){let r=i1(t);return(n&&e!=="right"||!n&&e==="right")&&(r=Ole(r)),r}function $le(t,e,n,r){const{top:i,left:s,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:u}=l;let d=0,h,f,g;const m=o-i,v=a-s;if(t.isHorizontal()){if(f=Nn(r,s,a),Ne(n)){const _=Object.keys(n)[0],y=n[_];g=u[_].getPixelForValue(y)+m-e}else n==="center"?g=(c.bottom+c.top)/2+m-e:g=IP(t,n,e);h=a-s}else{if(Ne(n)){const _=Object.keys(n)[0],y=n[_];f=u[_].getPixelForValue(y)-v+e}else n==="center"?f=(c.left+c.right)/2-v+e:f=IP(t,n,e);g=Nn(r,o,i),d=n==="left"?-Ut:Ut}return{titleX:f,titleY:g,maxWidth:h,rotation:d}}class xl extends Ds{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:r,_suggestedMax:i}=this;return e=vr(e,Number.POSITIVE_INFINITY),n=vr(n,Number.NEGATIVE_INFINITY),r=vr(r,Number.POSITIVE_INFINITY),i=vr(i,Number.NEGATIVE_INFINITY),{min:vr(e,r),max:vr(n,i),minDefined:Pt(e),maxDefined:Pt(n)}}getMinMax(e){let{min:n,max:r,minDefined:i,maxDefined:s}=this.getUserBounds(),o;if(i&&s)return{min:n,max:r};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),i||(n=Math.min(n,o.min)),s||(r=Math.max(r,o.max));return n=s&&n>r?r:n,r=i&&n>r?n:r,{min:vr(n,vr(r,n)),max:vr(r,vr(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){tt(this.options.beforeUpdate,[this])}update(e,n,r){const{beginAtZero:i,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Qoe(this,s,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?RP(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=Rle(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,r;this.isHorizontal()?(n=this.left,r=this.right):(n=this.top,r=this.bottom,e=!e),this._startPixel=n,this._endPixel=r,this._reversePixels=e,this._length=r-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){tt(this.options.afterUpdate,[this])}beforeSetDimensions(){tt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){tt(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),tt(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){tt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let r,i,s;for(r=0,i=e.length;r<i;r++)s=e[r],s.label=tt(n.callback,[s.value,r,e],this)}afterTickToLabelConversion(){tt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){tt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,r=CP(this.ticks.length,e.ticks.maxTicksLimit),i=n.minRotation||0,s=n.maxRotation;let o=i,a,l,c;if(!this._isVisible()||!n.display||i>=s||r<=1||!this.isHorizontal()){this.labelRotation=i;return}const u=this._getLabelSizes(),d=u.widest.width,h=u.highest.height,f=cn(this.chart.width-d,0,this.maxWidth);a=e.offset?this.maxWidth/r:f/(r-1),d+6>a&&(a=f/(r-(e.offset?.5:1)),l=this.maxHeight-ld(e.grid)-n.padding-kP(e.title,this.chart.options.font),c=Math.sqrt(d*d+h*h),o=n1(Math.min(Math.asin(cn((u.highest.height+6)/a,-1,1)),Math.asin(cn(l/c,-1,1))-Math.asin(cn(h/c,-1,1)))),o=Math.max(i,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){tt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){tt(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:r,title:i,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=kP(i,n.options.font);if(a?(e.width=this.maxWidth,e.height=ld(s)+l):(e.height=this.maxHeight,e.width=ld(s)+l),r.display&&this.ticks.length){const{first:c,last:u,widest:d,highest:h}=this._getLabelSizes(),f=r.padding*2,g=ri(this.labelRotation),m=Math.cos(g),v=Math.sin(g);if(a){const _=r.mirror?0:v*d.width+m*h.height;e.height=Math.min(this.maxHeight,e.height+_+f)}else{const _=r.mirror?0:m*d.width+v*h.height;e.width=Math.min(this.maxWidth,e.width+_+f)}this._calculatePadding(c,u,v,m)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,r,i){const{ticks:{align:s,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1);let h=0,f=0;l?c?(h=i*e.width,f=r*n.height):(h=r*e.height,f=i*n.width):s==="start"?f=n.width:s==="end"?h=e.width:s!=="inner"&&(h=e.width/2,f=n.width/2),this.paddingLeft=Math.max((h-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((f-d+o)*this.width/(this.width-d),0)}else{let u=n.height/2,d=e.height/2;s==="start"?(u=0,d=e.height):s==="end"&&(u=n.height,d=0),this.paddingTop=u+o,this.paddingBottom=d+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){tt(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,r;for(n=0,r=e.length;n<r;n++)je(e[n].label)&&(e.splice(n,1),r--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let r=this.ticks;n<r.length&&(r=RP(r,n)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,r){const{ctx:i,_longestTextCache:s}=this,o=[],a=[],l=Math.floor(n/CP(n,r));let c=0,u=0,d,h,f,g,m,v,_,y,w,b,x;for(d=0;d<n;d+=l){if(g=e[d].label,m=this._resolveTickFontOptions(d),i.font=v=m.string,_=s[v]=s[v]||{data:{},gc:[]},y=m.lineHeight,w=b=0,!je(g)&&!dt(g))w=Ty(i,_.data,_.gc,w,g),b=y;else if(dt(g))for(h=0,f=g.length;h<f;++h)x=g[h],!je(x)&&!dt(x)&&(w=Ty(i,_.data,_.gc,w,x),b+=y);o.push(w),a.push(b),c=Math.max(w,c),u=Math.max(b,u)}Lle(s,n);const T=o.indexOf(c),I=a.indexOf(u),E=k=>({width:o[k]||0,height:a[k]||0});return{first:E(0),last:E(n-1),widest:E(T),highest:E(I),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return Eoe(this._alignToPixels?Xo(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const r=n[e];return r.$context||(r.$context=Fle(this.getContext(),e,r))}return this.$context||(this.$context=Vle(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=ri(this.labelRotation),r=Math.abs(Math.cos(n)),i=Math.abs(Math.sin(n)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,a=s?s.widest.width+o:0,l=s?s.highest.height+o:0;return this.isHorizontal()?l*r>a*i?a/r:l/i:l*i<a*r?l/r:a/i}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,r=this.chart,i=this.options,{grid:s,position:o,border:a}=i,l=s.offset,c=this.isHorizontal(),d=this.ticks.length+(l?1:0),h=ld(s),f=[],g=a.setContext(this.getContext()),m=g.display?g.width:0,v=m/2,_=function(R){return Xo(r,R,m)};let y,w,b,x,T,I,E,k,D,F,K,X;if(o==="top")y=_(this.bottom),I=this.bottom-h,k=y-v,F=_(e.top)+v,X=e.bottom;else if(o==="bottom")y=_(this.top),F=e.top,X=_(e.bottom)-v,I=y+v,k=this.top+h;else if(o==="left")y=_(this.right),T=this.right-h,E=y-v,D=_(e.left)+v,K=e.right;else if(o==="right")y=_(this.left),D=e.left,K=_(e.right)-v,T=y+v,E=this.left+h;else if(n==="x"){if(o==="center")y=_((e.top+e.bottom)/2+.5);else if(Ne(o)){const R=Object.keys(o)[0],V=o[R];y=_(this.chart.scales[R].getPixelForValue(V))}F=e.top,X=e.bottom,I=y+v,k=I+h}else if(n==="y"){if(o==="center")y=_((e.left+e.right)/2);else if(Ne(o)){const R=Object.keys(o)[0],V=o[R];y=_(this.chart.scales[R].getPixelForValue(V))}T=y-v,E=T-h,D=e.left,K=e.right}const le=Te(i.ticks.maxTicksLimit,d),C=Math.max(1,Math.ceil(d/le));for(w=0;w<d;w+=C){const R=this.getContext(w),V=s.setContext(R),M=a.setContext(R),U=V.lineWidth,j=V.color,ie=M.dash||[],A=M.dashOffset,$=V.tickWidth,B=V.tickColor,ce=V.tickBorderDash||[],Q=V.tickBorderDashOffset;b=Mle(this,w,l),b!==void 0&&(x=Xo(r,b,U),c?T=E=D=K=x:I=k=F=X=x,f.push({tx1:T,ty1:I,tx2:E,ty2:k,x1:D,y1:F,x2:K,y2:X,width:U,color:j,borderDash:ie,borderDashOffset:A,tickWidth:$,tickColor:B,tickBorderDash:ce,tickBorderDashOffset:Q}))}return this._ticksLength=d,this._borderValue=y,f}_computeLabelItems(e){const n=this.axis,r=this.options,{position:i,ticks:s}=r,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:d}=s,h=ld(r.grid),f=h+u,g=d?-u:f,m=-ri(this.labelRotation),v=[];let _,y,w,b,x,T,I,E,k,D,F,K,X="middle";if(i==="top")T=this.bottom-g,I=this._getXAxisLabelAlignment();else if(i==="bottom")T=this.top+g,I=this._getXAxisLabelAlignment();else if(i==="left"){const C=this._getYAxisLabelAlignment(h);I=C.textAlign,x=C.x}else if(i==="right"){const C=this._getYAxisLabelAlignment(h);I=C.textAlign,x=C.x}else if(n==="x"){if(i==="center")T=(e.top+e.bottom)/2+f;else if(Ne(i)){const C=Object.keys(i)[0],R=i[C];T=this.chart.scales[C].getPixelForValue(R)+f}I=this._getXAxisLabelAlignment()}else if(n==="y"){if(i==="center")x=(e.left+e.right)/2-f;else if(Ne(i)){const C=Object.keys(i)[0],R=i[C];x=this.chart.scales[C].getPixelForValue(R)}I=this._getYAxisLabelAlignment(h).textAlign}n==="y"&&(l==="start"?X="top":l==="end"&&(X="bottom"));const le=this._getLabelSizes();for(_=0,y=a.length;_<y;++_){w=a[_],b=w.label;const C=s.setContext(this.getContext(_));E=this.getPixelForTick(_)+s.labelOffset,k=this._resolveTickFontOptions(_),D=k.lineHeight,F=dt(b)?b.length:1;const R=F/2,V=C.color,M=C.textStrokeColor,U=C.textStrokeWidth;let j=I;o?(x=E,I==="inner"&&(_===y-1?j=this.options.reverse?"left":"right":_===0?j=this.options.reverse?"right":"left":j="center"),i==="top"?c==="near"||m!==0?K=-F*D+D/2:c==="center"?K=-le.highest.height/2-R*D+D:K=-le.highest.height+D/2:c==="near"||m!==0?K=D/2:c==="center"?K=le.highest.height/2-R*D:K=le.highest.height-F*D,d&&(K*=-1),m!==0&&!C.showLabelBackdrop&&(x+=D/2*Math.sin(m))):(T=E,K=(1-F)*D/2);let ie;if(C.showLabelBackdrop){const A=Un(C.backdropPadding),$=le.heights[_],B=le.widths[_];let ce=K-A.top,Q=0-A.left;switch(X){case"middle":ce-=$/2;break;case"bottom":ce-=$;break}switch(I){case"center":Q-=B/2;break;case"right":Q-=B;break;case"inner":_===y-1?Q-=B:_>0&&(Q-=B/2);break}ie={left:Q,top:ce,width:B+A.width,height:$+A.height,color:C.backdropColor}}v.push({label:b,font:k,textOffset:K,options:{rotation:m,color:V,strokeColor:M,strokeWidth:U,textAlign:j,textBaseline:X,translation:[x,T],backdrop:ie}})}return v}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-ri(this.labelRotation))return e==="top"?"left":"right";let i="center";return n.align==="start"?i="left":n.align==="end"?i="right":n.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:r,mirror:i,padding:s}}=this.options,o=this._getLabelSizes(),a=e+s,l=o.widest.width;let c,u;return n==="left"?i?(u=this.right+s,r==="near"?c="left":r==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,r==="near"?c="right":r==="center"?(c="center",u-=l/2):(c="left",u=this.left)):n==="right"?i?(u=this.left+s,r==="near"?c="right":r==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,r==="near"?c="left":r==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:r,top:i,width:s,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(r,i,s,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const i=this.ticks.findIndex(s=>s.value===e);return i>=0?n.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){const n=this.options.grid,r=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,o;const a=(l,c,u)=>{!u.width||!u.color||(r.save(),r.lineWidth=u.width,r.strokeStyle=u.color,r.setLineDash(u.borderDash||[]),r.lineDashOffset=u.borderDashOffset,r.beginPath(),r.moveTo(l.x,l.y),r.lineTo(c.x,c.y),r.stroke(),r.restore())};if(n.display)for(s=0,o=i.length;s<o;++s){const l=i[s];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:r,grid:i}}=this,s=r.setContext(this.getContext()),o=r.display?s.width:0;if(!o)return;const a=i.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,d,h;this.isHorizontal()?(c=Xo(e,this.left,o)-o/2,u=Xo(e,this.right,a)+a/2,d=h=l):(d=Xo(e,this.top,o)-o/2,h=Xo(e,this.bottom,a)+a/2,c=u=l),n.save(),n.lineWidth=s.width,n.strokeStyle=s.color,n.beginPath(),n.moveTo(c,d),n.lineTo(u,h),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,i=this._computeLabelArea();i&&Mv(r,i);const s=this.getLabelItems(e);for(const o of s){const a=o.options,l=o.font,c=o.label,u=o.textOffset;el(r,c,0,u,l,a)}i&&Lv(r)}drawTitle(){const{ctx:e,options:{position:n,title:r,reverse:i}}=this;if(!r.display)return;const s=Jt(r.font),o=Un(r.padding),a=r.align;let l=s.lineHeight/2;n==="bottom"||n==="center"||Ne(n)?(l+=o.bottom,dt(r.text)&&(l+=s.lineHeight*(r.text.length-1))):l+=o.top;const{titleX:c,titleY:u,maxWidth:d,rotation:h}=$le(this,l,n,a);el(e,r.text,0,0,s,{color:r.color,maxWidth:d,rotation:h,textAlign:jle(a,n,i),textBaseline:"middle",translation:[c,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,r=Te(e.grid&&e.grid.z,-1),i=Te(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==xl.prototype.draw?[{z:n,draw:s=>{this.draw(s)}}]:[{z:r,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:n,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",i=[];let s,o;for(s=0,o=n.length;s<o;++s){const a=n[s];a[r]===this.id&&(!e||a.type===e)&&i.push(a)}return i}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return Jt(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class vg{constructor(e,n,r){this.type=e,this.scope=n,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let r;zle(n)&&(r=this.register(n));const i=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in i||(i[s]=e,Ule(e,o,r),this.override&&Nt.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,r=e.id,i=this.scope;r in n&&delete n[r],i&&r in Nt[i]&&(delete Nt[i][r],this.override&&delete Za[r])}}function Ule(t,e,n){const r=yf(Object.create(null),[n?Nt.get(n):{},Nt.get(e),t.defaults]);Nt.set(e,r),t.defaultRoutes&&Ble(e,t.defaultRoutes),t.descriptors&&Nt.describe(e,t.descriptors)}function Ble(t,e){Object.keys(e).forEach(n=>{const r=n.split("."),i=r.pop(),s=[t].concat(r).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");Nt.route(s,i,l,a)})}function zle(t){return"id"in t&&"defaults"in t}class Wle{constructor(){this.controllers=new vg(ai,"datasets",!0),this.elements=new vg(Ds,"elements"),this.plugins=new vg(Object,"plugins"),this.scales=new vg(xl,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,r){[...n].forEach(i=>{const s=r||this._getRegistryForType(i);r||s.isForType(i)||s===this.plugins&&i.id?this._exec(e,s,i):He(i,o=>{const a=r||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,r){const i=t1(e);tt(r["before"+i],[],r),n[e](r),tt(r["after"+i],[],r)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const r=this._typedRegistries[n];if(r.isForType(e))return r}return this.plugins}_get(e,n,r){const i=n.get(e);if(i===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return i}}var wi=new Wle;class Hle{constructor(){this._init=[]}notify(e,n,r,i){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const s=i?this._descriptors(e).filter(i):this._descriptors(e),o=this._notify(s,e,n,r);return n==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,n,r,i){i=i||{};for(const s of e){const o=s.plugin,a=o[r],l=[n,i,s.options];if(tt(a,l,o)===!1&&i.cancelable)return!1}return!0}invalidate(){je(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const r=e&&e.config,i=Te(r.options&&r.options.plugins,{}),s=qle(r);return i===!1&&!n?[]:Kle(e,s,i,n)}_notifyStateChanges(e){const n=this._oldCache||[],r=this._cache,i=(s,o)=>s.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(i(n,r),e,"stop"),this._notify(i(r,n),e,"start")}}function qle(t){const e={},n=[],r=Object.keys(wi.plugins.items);for(let s=0;s<r.length;s++)n.push(wi.getPlugin(r[s]));const i=t.plugins||[];for(let s=0;s<i.length;s++){const o=i[s];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function Gle(t,e){return!e&&t===!1?null:t===!0?{}:t}function Kle(t,{plugins:e,localIds:n},r,i){const s=[],o=t.getContext();for(const a of e){const l=a.id,c=Gle(r[l],i);c!==null&&s.push({plugin:a,options:Qle(t.config,{plugin:a,local:n[l]},c,o)})}return s}function Qle(t,{plugin:e,local:n},r,i){const s=t.pluginScopeKeys(e),o=t.getOptionScopes(r,s);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function eS(t,e){const n=Nt.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function Yle(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function Xle(t,e){return t===e?"_index_":"_value_"}function AP(t){if(t==="x"||t==="y"||t==="r")return t}function Jle(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function tS(t,...e){if(AP(t))return t;for(const n of e){const r=n.axis||Jle(n.position)||t.length>1&&AP(t[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function PP(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function Zle(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(r=>r.xAxisID===t||r.yAxisID===t);if(n.length)return PP(t,"x",n[0])||PP(t,"y",n[0])}return{}}function ece(t,e){const n=Za[t.type]||{scales:{}},r=e.scales||{},i=eS(t.type,e),s=Object.create(null);return Object.keys(r).forEach(o=>{const a=r[o];if(!Ne(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=tS(o,a,Zle(o,t),Nt.scales[a.type]),c=Xle(l,i),u=n.scales||{};s[o]=ch(Object.create(null),[{axis:l},a,u[l],u[c]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||eS(a,e),u=(Za[a]||{}).scales||{};Object.keys(u).forEach(d=>{const h=Yle(d,l),f=o[h+"AxisID"]||h;s[f]=s[f]||Object.create(null),ch(s[f],[{axis:h},r[f],u[d]])})}),Object.keys(s).forEach(o=>{const a=s[o];ch(a,[Nt.scales[a.type],Nt.scale])}),s}function lB(t){const e=t.options||(t.options={});e.plugins=Te(e.plugins,{}),e.scales=ece(t,e)}function cB(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function tce(t){return t=t||{},t.data=cB(t.data),lB(t),t}const NP=new Map,uB=new Set;function wg(t,e){let n=NP.get(t);return n||(n=e(),NP.set(t,n),uB.add(n)),n}const cd=(t,e,n)=>{const r=Po(e,n);r!==void 0&&t.add(r)};class nce{constructor(e){this._config=tce(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=cB(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),lB(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return wg(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return wg(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return wg(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,r=this.type;return wg(`${r}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const r=this._scopeCache;let i=r.get(e);return(!i||n)&&(i=new Map,r.set(e,i)),i}getOptionScopes(e,n,r){const{options:i,type:s}=this,o=this._cachedScopes(e,r),a=o.get(n);if(a)return a;const l=new Set;n.forEach(u=>{e&&(l.add(e),u.forEach(d=>cd(l,e,d))),u.forEach(d=>cd(l,i,d)),u.forEach(d=>cd(l,Za[s]||{},d)),u.forEach(d=>cd(l,Nt,d)),u.forEach(d=>cd(l,Xx,d))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),uB.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,Za[n]||{},Nt.datasets[n]||{},{type:n},Nt,Xx]}resolveNamedOptions(e,n,r,i=[""]){const s={$shared:!0},{resolver:o,subPrefixes:a}=DP(this._resolverCache,e,i);let l=o;if(ice(o,n)){s.$shared=!1,r=No(r)?r():r;const c=this.createResolver(e,r,a);l=nu(o,r,c)}for(const c of n)s[c]=l[c];return s}createResolver(e,n,r=[""],i){const{resolver:s}=DP(this._resolverCache,e,r);return Ne(n)?nu(s,n,void 0,i):s}}function DP(t,e,n){let r=t.get(e);r||(r=new Map,t.set(e,r));const i=n.join();let s=r.get(i);return s||(s={resolver:a1(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},r.set(i,s)),s}const rce=t=>Ne(t)&&Object.getOwnPropertyNames(t).some(e=>No(t[e]));function ice(t,e){const{isScriptable:n,isIndexable:r}=zU(t);for(const i of e){const s=n(i),o=r(i),a=(o||s)&&t[i];if(s&&(No(a)||rce(a))||o&&dt(a))return!0}return!1}var sce="4.4.2";const oce=["top","bottom","left","right","chartArea"];function OP(t,e){return t==="top"||t==="bottom"||oce.indexOf(t)===-1&&e==="x"}function MP(t,e){return function(n,r){return n[t]===r[t]?n[e]-r[e]:n[t]-r[t]}}function LP(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),tt(n&&n.onComplete,[t],e)}function ace(t){const e=t.chart,n=e.options.animation;tt(n&&n.onProgress,[t],e)}function dB(t){return u1()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const hm={},VP=t=>{const e=dB(t);return Object.values(hm).filter(n=>n.canvas===e).pop()};function lce(t,e,n){const r=Object.keys(t);for(const i of r){const s=+i;if(s>=e){const o=t[i];delete t[i],(n>0||s>e)&&(t[s+n]=o)}}}function cce(t,e,n,r){return!n||t.type==="mouseout"?null:r?e:t}function bg(t,e,n){return t.options.clip?t[n]:e[n]}function uce(t,e){const{xScale:n,yScale:r}=t;return n&&r?{left:bg(n,e,"left"),right:bg(n,e,"right"),top:bg(r,e,"top"),bottom:bg(r,e,"bottom")}:e}class es{static register(...e){wi.add(...e),FP()}static unregister(...e){wi.remove(...e),FP()}constructor(e,n){const r=this.config=new nce(n),i=dB(e),s=VP(i);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||Cle(i)),this.platform.updateConfig(r);const a=this.platform.acquireContext(i,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=hoe(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Hle,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=Roe(d=>this.update(d),o.resizeDelay||0),this._dataChanges=[],hm[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Qi.listen(this,"complete",LP),Qi.listen(this,"progress",ace),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:r,height:i,_aspectRatio:s}=this;return je(e)?n&&s?s:i?r/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return wi}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():sP(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return nP(this.canvas,this.ctx),this}stop(){return Qi.stop(this),this}resize(e,n){Qi.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const r=this.options,i=this.canvas,s=r.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(i,e,n,s),a=r.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,sP(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),tt(r.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};He(n,(r,i)=>{r.id=i})}buildOrUpdateScales(){const e=this.options,n=e.scales,r=this.scales,i=Object.keys(r).reduce((o,a)=>(o[a]=!1,o),{});let s=[];n&&(s=s.concat(Object.keys(n).map(o=>{const a=n[o],l=tS(o,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),He(s,o=>{const a=o.options,l=a.id,c=tS(l,a),u=Te(a.type,o.dtype);(a.position===void 0||OP(a.position,c)!==OP(o.dposition))&&(a.position=o.dposition),i[l]=!0;let d=null;if(l in r&&r[l].type===u)d=r[l];else{const h=wi.getScale(u);d=new h({id:l,type:u,ctx:this.ctx,chart:this}),r[d.id]=d}d.init(a,e)}),He(i,(o,a)=>{o||delete r[a]}),He(r,o=>{Ln.configure(this,o,o.options),Ln.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,r=e.length;if(e.sort((i,s)=>i.index-s.index),r>n){for(let i=n;i<r;++i)this._destroyDatasetMeta(i);e.splice(n,r-n)}this._sortedMetasets=e.slice(0).sort(MP("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((r,i)=>{n.filter(s=>s===r._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let r,i;for(this._removeUnreferencedMetasets(),r=0,i=n.length;r<i;r++){const s=n[r];let o=this.getDatasetMeta(r);const a=s.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(r),o=this.getDatasetMeta(r)),o.type=a,o.indexAxis=s.indexAxis||eS(a,this.options),o.order=s.order||0,o.index=r,o.label=""+s.label,o.visible=this.isDatasetVisible(r),o.controller)o.controller.updateIndex(r),o.controller.linkScales();else{const l=wi.getController(a),{datasetElementType:c,dataElementType:u}=Nt.datasets[a];Object.assign(l,{dataElementType:wi.getElement(u),datasetElementType:c&&wi.getElement(c)}),o.controller=new l(this,r),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){He(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const r=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:d}=this.getDatasetMeta(c),h=!i&&s.indexOf(d)===-1;d.buildOrUpdateElements(h),o=Math.max(+d.getMaxOverflow(),o)}o=this._minPadding=r.layout.autoPadding?o:0,this._updateLayout(o),i||He(s,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(MP("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){He(this.scales,e=>{Ln.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!GA(n,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:r,start:i,count:s}of n){const o=r==="_removeElements"?-s:s;lce(e,i,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,r=s=>new Set(e.filter(o=>o[0]===s).map((o,a)=>a+","+o.splice(1).join(","))),i=r(0);for(let s=1;s<n;s++)if(!GA(i,r(s)))return;return Array.from(i).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Ln.update(this,this.width,this.height,e);const n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],He(this.boxes,i=>{r&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,s)=>{i._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,r=this.data.datasets.length;n<r;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,r=this.data.datasets.length;n<r;++n)this._updateDataset(n,No(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const r=this.getDatasetMeta(e),i={meta:r,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(r.controller._update(n),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Qi.has(this)?this.attached&&!Qi.running(this)&&Qi.start(this):(this.draw(),LP({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:i}=this._resizeBeforeDraw;this._resize(r,i),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,r=[];let i,s;for(i=0,s=n.length;i<s;++i){const o=n[i];(!e||o.visible)&&r.push(o)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,r=e._clip,i=!r.disabled,s=uce(e,this.chartArea),o={meta:e,index:e.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",o)!==!1&&(i&&Mv(n,{left:r.left===!1?0:s.left-r.left,right:r.right===!1?this.width:s.right+r.right,top:r.top===!1?0:s.top-r.top,bottom:r.bottom===!1?this.height:s.bottom+r.bottom}),e.controller.draw(),i&&Lv(n),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(e){return ls(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,r,i){const s=ole.modes[n];return typeof s=="function"?s(this,e,r,i):[]}getDatasetMeta(e){const n=this.data.datasets[e],r=this._metasets;let i=r.filter(s=>s&&s._dataset===n).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},r.push(i)),i}getContext(){return this.$context||(this.$context=Ko(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!n.hidden}setDatasetVisibility(e,n){const r=this.getDatasetMeta(e);r.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,r){const i=r?"show":"hide",s=this.getDatasetMeta(e),o=s.controller._resolveAnimations(void 0,i);_f(n)?(s.data[n].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),o.update(s,{visible:r}),this.update(a=>a.datasetIndex===e?i:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),Qi.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),nP(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete hm[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,r=(s,o)=>{n.addEventListener(this,s,o),e[s]=o},i=(s,o,a)=>{s.offsetX=o,s.offsetY=a,this._eventHandler(s)};He(this.options.events,s=>r(s,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,r=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},i=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},s=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{i("attach",a),this.attached=!0,this.resize(),r("resize",s),r("detach",o)};o=()=>{this.attached=!1,i("resize",s),this._stop(),this._resize(0,0),r("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){He(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},He(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,r){const i=r?"set":"remove";let s,o,a,l;for(n==="dataset"&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+i+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[i+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],r=e.map(({datasetIndex:s,index:o})=>{const a=this.getDatasetMeta(s);if(!a)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:a.data[o],index:o}});!xy(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}notifyPlugins(e,n,r){return this._plugins.notify(this,e,n,r)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,r){const i=this.options.hover,s=(l,c)=>l.filter(u=>!c.some(d=>u.datasetIndex===d.datasetIndex&&u.index===d.index)),o=s(n,e),a=r?e:s(e,n);o.length&&this.updateHoverStyle(o,i.mode,!1),a.length&&i.mode&&this.updateHoverStyle(a,i.mode,!0)}_eventHandler(e,n){const r={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},i=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,i)===!1)return;const s=this._handleEvent(e,n,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,i),(s||r.changed)&&this.render(),this}_handleEvent(e,n,r){const{_active:i=[],options:s}=this,o=n,a=this._getActiveElements(e,i,r,o),l=_oe(e),c=cce(e,this._lastEvent,r,l);r&&(this._lastEvent=null,tt(s.onHover,[e,a,this],this),l&&tt(s.onClick,[e,a,this],this));const u=!xy(a,i);return(u||n)&&(this._active=a,this._updateHoverStyles(a,i,n)),this._lastEvent=c,u}_getActiveElements(e,n,r,i){if(e.type==="mouseout")return[];if(!r)return n;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,i)}}Y(es,"defaults",Nt),Y(es,"instances",hm),Y(es,"overrides",Za),Y(es,"registry",wi),Y(es,"version",sce),Y(es,"getChart",VP);function FP(){return He(es.instances,t=>t._plugins.invalidate())}function dce(t,e,n){const{startAngle:r,pixelMargin:i,x:s,y:o,outerRadius:a,innerRadius:l}=e;let c=i/a;t.beginPath(),t.arc(s,o,a,r-c,n+c),l>i?(c=i/l,t.arc(s,o,l,n+c,r-c,!0)):t.arc(s,o,i,n+Ut,r-Ut),t.closePath(),t.clip()}function hce(t){return o1(t,["outerStart","outerEnd","innerStart","innerEnd"])}function fce(t,e,n,r){const i=hce(t.options.borderRadius),s=(n-e)/2,o=Math.min(s,r*e/2),a=l=>{const c=(n-Math.min(s,l))*r/2;return cn(l,0,Math.min(s,c))};return{outerStart:a(i.outerStart),outerEnd:a(i.outerEnd),innerStart:cn(i.innerStart,0,o),innerEnd:cn(i.innerEnd,0,o)}}function Ml(t,e,n,r){return{x:n+t*Math.cos(e),y:r+t*Math.sin(e)}}function Ry(t,e,n,r,i,s){const{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:u}=e,d=Math.max(e.outerRadius+r+n-c,0),h=u>0?u+r+n+c:0;let f=0;const g=i-l;if(r){const C=u>0?u-r:0,R=d>0?d-r:0,V=(C+R)/2,M=V!==0?g*V/(V+r):g;f=(g-M)/2}const m=Math.max(.001,g*d-n/gt)/d,v=(g-m)/2,_=l+v+f,y=i-v-f,{outerStart:w,outerEnd:b,innerStart:x,innerEnd:T}=fce(e,h,d,y-_),I=d-w,E=d-b,k=_+w/I,D=y-b/E,F=h+x,K=h+T,X=_+x/F,le=y-T/K;if(t.beginPath(),s){const C=(k+D)/2;if(t.arc(o,a,d,k,C),t.arc(o,a,d,C,D),b>0){const U=Ml(E,D,o,a);t.arc(U.x,U.y,b,D,y+Ut)}const R=Ml(K,y,o,a);if(t.lineTo(R.x,R.y),T>0){const U=Ml(K,le,o,a);t.arc(U.x,U.y,T,y+Ut,le+Math.PI)}const V=(y-T/h+(_+x/h))/2;if(t.arc(o,a,h,y-T/h,V,!0),t.arc(o,a,h,V,_+x/h,!0),x>0){const U=Ml(F,X,o,a);t.arc(U.x,U.y,x,X+Math.PI,_-Ut)}const M=Ml(I,_,o,a);if(t.lineTo(M.x,M.y),w>0){const U=Ml(I,k,o,a);t.arc(U.x,U.y,w,_-Ut,k)}}else{t.moveTo(o,a);const C=Math.cos(k)*d+o,R=Math.sin(k)*d+a;t.lineTo(C,R);const V=Math.cos(D)*d+o,M=Math.sin(D)*d+a;t.lineTo(V,M)}t.closePath()}function pce(t,e,n,r,i){const{fullCircles:s,startAngle:o,circumference:a}=e;let l=e.endAngle;if(s){Ry(t,e,n,r,l,i);for(let c=0;c<s;++c)t.fill();isNaN(a)||(l=o+(a%ft||ft))}return Ry(t,e,n,r,l,i),t.fill(),l}function gce(t,e,n,r,i){const{fullCircles:s,startAngle:o,circumference:a,options:l}=e,{borderWidth:c,borderJoinStyle:u,borderDash:d,borderDashOffset:h}=l,f=l.borderAlign==="inner";if(!c)return;t.setLineDash(d||[]),t.lineDashOffset=h,f?(t.lineWidth=c*2,t.lineJoin=u||"round"):(t.lineWidth=c,t.lineJoin=u||"bevel");let g=e.endAngle;if(s){Ry(t,e,n,r,g,i);for(let m=0;m<s;++m)t.stroke();isNaN(a)||(g=o+(a%ft||ft))}f&&dce(t,e,g),s||(Ry(t,e,n,r,g,i),t.stroke())}class Ld extends Ds{constructor(n){super();Y(this,"circumference");Y(this,"endAngle");Y(this,"fullCircles");Y(this,"innerRadius");Y(this,"outerRadius");Y(this,"pixelMargin");Y(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,n&&Object.assign(this,n)}inRange(n,r,i){const s=this.getProps(["x","y"],i),{angle:o,distance:a}=DU(s,{x:n,y:r}),{startAngle:l,endAngle:c,innerRadius:u,outerRadius:d,circumference:h}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),f=(this.options.spacing+this.options.borderWidth)/2,m=Te(h,c-l)>=ft||vf(o,l,c),v=os(a,u+f,d+f);return m&&v}getCenterPoint(n){const{x:r,y:i,startAngle:s,endAngle:o,innerRadius:a,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],n),{offset:c,spacing:u}=this.options,d=(s+o)/2,h=(a+l+u+c)/2;return{x:r+Math.cos(d)*h,y:i+Math.sin(d)*h}}tooltipPosition(n){return this.getCenterPoint(n)}draw(n){const{options:r,circumference:i}=this,s=(r.offset||0)/4,o=(r.spacing||0)/2,a=r.circular;if(this.pixelMargin=r.borderAlign==="inner"?.33:0,this.fullCircles=i>ft?Math.floor(i/ft):0,i===0||this.innerRadius<0||this.outerRadius<0)return;n.save();const l=(this.startAngle+this.endAngle)/2;n.translate(Math.cos(l)*s,Math.sin(l)*s);const c=1-Math.sin(Math.min(gt,i||0)),u=s*c;n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,pce(n,this,u,o,a),gce(n,this,u,o,a),n.restore()}}Y(Ld,"id","arc"),Y(Ld,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),Y(Ld,"defaultRoutes",{backgroundColor:"backgroundColor"}),Y(Ld,"descriptors",{_scriptable:!0,_indexable:n=>n!=="borderDash"});function hB(t,e,n=e){t.lineCap=Te(n.borderCapStyle,e.borderCapStyle),t.setLineDash(Te(n.borderDash,e.borderDash)),t.lineDashOffset=Te(n.borderDashOffset,e.borderDashOffset),t.lineJoin=Te(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=Te(n.borderWidth,e.borderWidth),t.strokeStyle=Te(n.borderColor,e.borderColor)}function mce(t,e,n){t.lineTo(n.x,n.y)}function yce(t){return t.stepped?$oe:t.tension||t.cubicInterpolationMode==="monotone"?Uoe:mce}function fB(t,e,n={}){const r=t.length,{start:i=0,end:s=r-1}=n,{start:o,end:a}=e,l=Math.max(i,o),c=Math.min(s,a),u=i<o&&s<o||i>a&&s>a;return{count:r,start:l,loop:e.loop,ilen:c<l&&!u?r+c-l:c-l}}function _ce(t,e,n,r){const{points:i,options:s}=e,{count:o,start:a,loop:l,ilen:c}=fB(i,n,r),u=yce(s);let{move:d=!0,reverse:h}=r||{},f,g,m;for(f=0;f<=c;++f)g=i[(a+(h?c-f:f))%o],!g.skip&&(d?(t.moveTo(g.x,g.y),d=!1):u(t,m,g,h,s.stepped),m=g);return l&&(g=i[(a+(h?c:0))%o],u(t,m,g,h,s.stepped)),!!l}function vce(t,e,n,r){const i=e.points,{count:s,start:o,ilen:a}=fB(i,n,r),{move:l=!0,reverse:c}=r||{};let u=0,d=0,h,f,g,m,v,_;const y=b=>(o+(c?a-b:b))%s,w=()=>{m!==v&&(t.lineTo(u,v),t.lineTo(u,m),t.lineTo(u,_))};for(l&&(f=i[y(0)],t.moveTo(f.x,f.y)),h=0;h<=a;++h){if(f=i[y(h)],f.skip)continue;const b=f.x,x=f.y,T=b|0;T===g?(x<m?m=x:x>v&&(v=x),u=(d*u+b)/++d):(w(),t.lineTo(b,x),g=T,d=0,m=v=x),_=x}w()}function nS(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?vce:_ce}function wce(t){return t.stepped?vae:t.tension||t.cubicInterpolationMode==="monotone"?wae:sa}function bce(t,e,n,r){let i=e._path;i||(i=e._path=new Path2D,e.path(i,n,r)&&i.closePath()),hB(t,e.options),t.stroke(i)}function xce(t,e,n,r){const{segments:i,options:s}=e,o=nS(e);for(const a of i)hB(t,s,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+r-1})&&t.closePath(),t.stroke()}const Sce=typeof Path2D=="function";function Ece(t,e,n,r){Sce&&!e.options.segment?bce(t,e,n,r):xce(t,e,n,r)}class eo extends Ds{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const i=r.spanGaps?this._loop:this._fullLoop;dae(this._points,r,e,i,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=Iae(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,r=e.length;return r&&n[e[r-1].end]}interpolate(e,n){const r=this.options,i=e[n],s=this.points,o=ZU(this,{property:n,start:i,end:i});if(!o.length)return;const a=[],l=wce(r);let c,u;for(c=0,u=o.length;c<u;++c){const{start:d,end:h}=o[c],f=s[d],g=s[h];if(f===g){a.push(f);continue}const m=Math.abs((i-f[n])/(g[n]-f[n])),v=l(f,g,m,r.stepped);v[n]=e[n],a.push(v)}return a.length===1?a[0]:a}pathSegment(e,n,r){return nS(this)(e,this,n,r)}path(e,n,r){const i=this.segments,s=nS(this);let o=this._loop;n=n||0,r=r||this.points.length-n;for(const a of i)o&=s(e,this,a,{start:n,end:n+r-1});return!!o}draw(e,n,r,i){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(e.save(),Ece(e,this,r,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}Y(eo,"id","line"),Y(eo,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),Y(eo,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),Y(eo,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function jP(t,e,n,r){const i=t.options,{[n]:s}=t.getProps([n],r);return Math.abs(e-s)<i.radius+i.hitRadius}class fm extends Ds{constructor(n){super();Y(this,"parsed");Y(this,"skip");Y(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,r,i){const s=this.options,{x:o,y:a}=this.getProps(["x","y"],i);return Math.pow(n-o,2)+Math.pow(r-a,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(n,r){return jP(this,n,"x",r)}inYRange(n,r){return jP(this,n,"y",r)}getCenterPoint(n){const{x:r,y:i}=this.getProps(["x","y"],n);return{x:r,y:i}}size(n){n=n||this.options||{};let r=n.radius||0;r=Math.max(r,r&&n.hoverRadius||0);const i=r&&n.borderWidth||0;return(r+i)*2}draw(n,r){const i=this.options;this.skip||i.radius<.1||!ls(this,r,this.size(i)/2)||(n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.fillStyle=i.backgroundColor,Jx(n,i,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}Y(fm,"id","point"),Y(fm,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),Y(fm,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function pB(t,e){const{x:n,y:r,base:i,width:s,height:o}=t.getProps(["x","y","base","width","height"],e);let a,l,c,u,d;return t.horizontal?(d=o/2,a=Math.min(n,i),l=Math.max(n,i),c=r-d,u=r+d):(d=s/2,a=n-d,l=n+d,c=Math.min(r,i),u=Math.max(r,i)),{left:a,top:c,right:l,bottom:u}}function to(t,e,n,r){return t?0:cn(e,n,r)}function Tce(t,e,n){const r=t.options.borderWidth,i=t.borderSkipped,s=BU(r);return{t:to(i.top,s.top,0,n),r:to(i.right,s.right,0,e),b:to(i.bottom,s.bottom,0,n),l:to(i.left,s.left,0,e)}}function Ice(t,e,n){const{enableBorderRadius:r}=t.getProps(["enableBorderRadius"]),i=t.options.borderRadius,s=Aa(i),o=Math.min(e,n),a=t.borderSkipped,l=r||Ne(i);return{topLeft:to(!l||a.top||a.left,s.topLeft,0,o),topRight:to(!l||a.top||a.right,s.topRight,0,o),bottomLeft:to(!l||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:to(!l||a.bottom||a.right,s.bottomRight,0,o)}}function Cce(t){const e=pB(t),n=e.right-e.left,r=e.bottom-e.top,i=Tce(t,n/2,r/2),s=Ice(t,n/2,r/2);return{outer:{x:e.left,y:e.top,w:n,h:r,radius:s},inner:{x:e.left+i.l,y:e.top+i.t,w:n-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,s.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(i.b,i.r))}}}}function bw(t,e,n,r){const i=e===null,s=n===null,a=t&&!(i&&s)&&pB(t,r);return a&&(i||os(e,a.left,a.right))&&(s||os(n,a.top,a.bottom))}function Rce(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function kce(t,e){t.rect(e.x,e.y,e.w,e.h)}function xw(t,e,n={}){const r=t.x!==n.x?-e:0,i=t.y!==n.y?-e:0,s=(t.x+t.w!==n.x+n.w?e:0)-r,o=(t.y+t.h!==n.y+n.h?e:0)-i;return{x:t.x+r,y:t.y+i,w:t.w+s,h:t.h+o,radius:t.radius}}class pm extends Ds{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:n,options:{borderColor:r,backgroundColor:i}}=this,{inner:s,outer:o}=Cce(this),a=Rce(o.radius)?wf:kce;e.save(),(o.w!==s.w||o.h!==s.h)&&(e.beginPath(),a(e,xw(o,n,s)),e.clip(),a(e,xw(s,-n,o)),e.fillStyle=r,e.fill("evenodd")),e.beginPath(),a(e,xw(s,n)),e.fillStyle=i,e.fill(),e.restore()}inRange(e,n,r){return bw(this,e,n,r)}inXRange(e,n){return bw(this,e,null,n)}inYRange(e,n){return bw(this,null,e,n)}getCenterPoint(e){const{x:n,y:r,base:i,horizontal:s}=this.getProps(["x","y","base","horizontal"],e);return{x:s?(n+i)/2:n,y:s?r:(r+i)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}Y(pm,"id","bar"),Y(pm,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),Y(pm,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var Ace=Object.freeze({__proto__:null,ArcElement:Ld,BarElement:pm,LineElement:eo,PointElement:fm});const rS=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],$P=rS.map(t=>t.replace("rgb(","rgba(").replace(")",", 0.5)"));function gB(t){return rS[t%rS.length]}function mB(t){return $P[t%$P.length]}function Pce(t,e){return t.borderColor=gB(e),t.backgroundColor=mB(e),++e}function Nce(t,e){return t.backgroundColor=t.data.map(()=>gB(e++)),e}function Dce(t,e){return t.backgroundColor=t.data.map(()=>mB(e++)),e}function Oce(t){let e=0;return(n,r)=>{const i=t.getDatasetMeta(r).controller;i instanceof ba?e=Nce(n,e):i instanceof fh?e=Dce(n,e):i&&(e=Pce(n,e))}}function UP(t){let e;for(e in t)if(t[e].borderColor||t[e].backgroundColor)return!0;return!1}function Mce(t){return t&&(t.borderColor||t.backgroundColor)}var Lce={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(t,e,n){if(!n.enabled)return;const{data:{datasets:r},options:i}=t.config,{elements:s}=i;if(!n.forceOverride&&(UP(r)||Mce(i)||s&&UP(s)))return;const o=Oce(t);r.forEach(o)}};function Vce(t,e,n,r,i){const s=i.samples||r;if(s>=n)return t.slice(e,e+n);const o=[],a=(n-2)/(s-2);let l=0;const c=e+n-1;let u=e,d,h,f,g,m;for(o[l++]=t[u],d=0;d<s-2;d++){let v=0,_=0,y;const w=Math.floor((d+1)*a)+1+e,b=Math.min(Math.floor((d+2)*a)+1,n)+e,x=b-w;for(y=w;y<b;y++)v+=t[y].x,_+=t[y].y;v/=x,_/=x;const T=Math.floor(d*a)+1+e,I=Math.min(Math.floor((d+1)*a)+1,n)+e,{x:E,y:k}=t[u];for(f=g=-1,y=T;y<I;y++)g=.5*Math.abs((E-v)*(t[y].y-k)-(E-t[y].x)*(_-k)),g>f&&(f=g,h=t[y],m=y);o[l++]=h,u=m}return o[l++]=t[c],o}function Fce(t,e,n,r){let i=0,s=0,o,a,l,c,u,d,h,f,g,m;const v=[],_=e+n-1,y=t[e].x,b=t[_].x-y;for(o=e;o<e+n;++o){a=t[o],l=(a.x-y)/b*r,c=a.y;const x=l|0;if(x===u)c<g?(g=c,d=o):c>m&&(m=c,h=o),i=(s*i+a.x)/++s;else{const T=o-1;if(!je(d)&&!je(h)){const I=Math.min(d,h),E=Math.max(d,h);I!==f&&I!==T&&v.push({...t[I],x:i}),E!==f&&E!==T&&v.push({...t[E],x:i})}o>0&&T!==f&&v.push(t[T]),v.push(a),u=x,s=0,g=m=c,d=h=f=o}}return v}function yB(t){if(t._decimated){const e=t._data;delete t._decimated,delete t._data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function BP(t){t.data.datasets.forEach(e=>{yB(e)})}function jce(t,e){const n=e.length;let r=0,i;const{iScale:s}=t,{min:o,max:a,minDefined:l,maxDefined:c}=s.getUserBounds();return l&&(r=cn(as(e,s.axis,o).lo,0,n-1)),c?i=cn(as(e,s.axis,a).hi+1,r,n)-r:i=n-r,{start:r,count:i}}var $ce={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(t,e,n)=>{if(!n.enabled){BP(t);return}const r=t.width;t.data.datasets.forEach((i,s)=>{const{_data:o,indexAxis:a}=i,l=t.getDatasetMeta(s),c=o||i.data;if(Od([a,t.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;const u=t.scales[l.xAxisID];if(u.type!=="linear"&&u.type!=="time"||t.options.parsing)return;let{start:d,count:h}=jce(l,c);const f=n.threshold||4*r;if(h<=f){yB(i);return}je(o)&&(i._data=c,delete i.data,Object.defineProperty(i,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(m){this._data=m}}));let g;switch(n.algorithm){case"lttb":g=Vce(c,d,h,r,n);break;case"min-max":g=Fce(c,d,h,r);break;default:throw new Error(`Unsupported decimation algorithm '${n.algorithm}'`)}i._decimated=g})},destroy(t){BP(t)}};function Uce(t,e,n){const r=t.segments,i=t.points,s=e.points,o=[];for(const a of r){let{start:l,end:c}=a;c=f1(l,c,i);const u=iS(n,i[l],i[c],a.loop);if(!e.segments){o.push({source:a,target:u,start:i[l],end:i[c]});continue}const d=ZU(e,u);for(const h of d){const f=iS(n,s[h.start],s[h.end],h.loop),g=JU(a,i,f);for(const m of g)o.push({source:m,target:h,start:{[n]:zP(u,f,"start",Math.max)},end:{[n]:zP(u,f,"end",Math.min)}})}}return o}function iS(t,e,n,r){if(r)return;let i=e[t],s=n[t];return t==="angle"&&(i=br(i),s=br(s)),{property:t,start:i,end:s}}function Bce(t,e){const{x:n=null,y:r=null}=t||{},i=e.points,s=[];return e.segments.forEach(({start:o,end:a})=>{a=f1(o,a,i);const l=i[o],c=i[a];r!==null?(s.push({x:l.x,y:r}),s.push({x:c.x,y:r})):n!==null&&(s.push({x:n,y:l.y}),s.push({x:n,y:c.y}))}),s}function f1(t,e,n){for(;e>t;e--){const r=n[e];if(!isNaN(r.x)&&!isNaN(r.y))break}return e}function zP(t,e,n,r){return t&&e?r(t[n],e[n]):t?t[n]:e?e[n]:0}function _B(t,e){let n=[],r=!1;return dt(t)?(r=!0,n=t):n=Bce(t,e),n.length?new eo({points:n,options:{tension:0},_loop:r,_fullLoop:r}):null}function WP(t){return t&&t.fill!==!1}function zce(t,e,n){let i=t[e].fill;const s=[e];let o;if(!n)return i;for(;i!==!1&&s.indexOf(i)===-1;){if(!Pt(i))return i;if(o=t[i],!o)return!1;if(o.visible)return i;s.push(i),i=o.fill}return!1}function Wce(t,e,n){const r=Kce(t);if(Ne(r))return isNaN(r.value)?!1:r;let i=parseFloat(r);return Pt(i)&&Math.floor(i)===i?Hce(r[0],e,i,n):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function Hce(t,e,n,r){return(t==="-"||t==="+")&&(n=e+n),n===e||n<0||n>=r?!1:n}function qce(t,e){let n=null;return t==="start"?n=e.bottom:t==="end"?n=e.top:Ne(t)?n=e.getPixelForValue(t.value):e.getBasePixel&&(n=e.getBasePixel()),n}function Gce(t,e,n){let r;return t==="start"?r=n:t==="end"?r=e.options.reverse?e.min:e.max:Ne(t)?r=t.value:r=e.getBaseValue(),r}function Kce(t){const e=t.options,n=e.fill;let r=Te(n&&n.target,n);return r===void 0&&(r=!!e.backgroundColor),r===!1||r===null?!1:r===!0?"origin":r}function Qce(t){const{scale:e,index:n,line:r}=t,i=[],s=r.segments,o=r.points,a=Yce(e,n);a.push(_B({x:null,y:e.bottom},r));for(let l=0;l<s.length;l++){const c=s[l];for(let u=c.start;u<=c.end;u++)Xce(i,o[u],a)}return new eo({points:i,options:{}})}function Yce(t,e){const n=[],r=t.getMatchingVisibleMetas("line");for(let i=0;i<r.length;i++){const s=r[i];if(s.index===e)break;s.hidden||n.unshift(s.dataset)}return n}function Xce(t,e,n){const r=[];for(let i=0;i<n.length;i++){const s=n[i],{first:o,last:a,point:l}=Jce(s,e,"x");if(!(!l||o&&a)){if(o)r.unshift(l);else if(t.push(l),!a)break}}t.push(...r)}function Jce(t,e,n){const r=t.interpolate(e,n);if(!r)return{};const i=r[n],s=t.segments,o=t.points;let a=!1,l=!1;for(let c=0;c<s.length;c++){const u=s[c],d=o[u.start][n],h=o[u.end][n];if(os(i,d,h)){a=i===d,l=i===h;break}}return{first:a,last:l,point:r}}class vB{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,n,r){const{x:i,y:s,radius:o}=this;return n=n||{start:0,end:ft},e.arc(i,s,o,n.end,n.start,!0),!r.bounds}interpolate(e){const{x:n,y:r,radius:i}=this,s=e.angle;return{x:n+Math.cos(s)*i,y:r+Math.sin(s)*i,angle:s}}}function Zce(t){const{chart:e,fill:n,line:r}=t;if(Pt(n))return eue(e,n);if(n==="stack")return Qce(t);if(n==="shape")return!0;const i=tue(t);return i instanceof vB?i:_B(i,r)}function eue(t,e){const n=t.getDatasetMeta(e);return n&&t.isDatasetVisible(e)?n.dataset:null}function tue(t){return(t.scale||{}).getPointPositionForValue?rue(t):nue(t)}function nue(t){const{scale:e={},fill:n}=t,r=qce(n,e);if(Pt(r)){const i=e.isHorizontal();return{x:i?r:null,y:i?null:r}}return null}function rue(t){const{scale:e,fill:n}=t,r=e.options,i=e.getLabels().length,s=r.reverse?e.max:e.min,o=Gce(n,e,s),a=[];if(r.grid.circular){const l=e.getPointPositionForValue(0,s);return new vB({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(o)})}for(let l=0;l<i;++l)a.push(e.getPointPositionForValue(l,o));return a}function Sw(t,e,n){const r=Zce(e),{line:i,scale:s,axis:o}=e,a=i.options,l=a.fill,c=a.backgroundColor,{above:u=c,below:d=c}=l||{};r&&i.points.length&&(Mv(t,n),iue(t,{line:i,target:r,above:u,below:d,area:n,scale:s,axis:o}),Lv(t))}function iue(t,e){const{line:n,target:r,above:i,below:s,area:o,scale:a}=e,l=n._loop?"angle":e.axis;t.save(),l==="x"&&s!==i&&(HP(t,r,o.top),qP(t,{line:n,target:r,color:i,scale:a,property:l}),t.restore(),t.save(),HP(t,r,o.bottom)),qP(t,{line:n,target:r,color:s,scale:a,property:l}),t.restore()}function HP(t,e,n){const{segments:r,points:i}=e;let s=!0,o=!1;t.beginPath();for(const a of r){const{start:l,end:c}=a,u=i[l],d=i[f1(l,c,i)];s?(t.moveTo(u.x,u.y),s=!1):(t.lineTo(u.x,n),t.lineTo(u.x,u.y)),o=!!e.pathSegment(t,a,{move:o}),o?t.closePath():t.lineTo(d.x,n)}t.lineTo(e.first().x,n),t.closePath(),t.clip()}function qP(t,e){const{line:n,target:r,property:i,color:s,scale:o}=e,a=Uce(n,r,i);for(const{source:l,target:c,start:u,end:d}of a){const{style:{backgroundColor:h=s}={}}=l,f=r!==!0;t.save(),t.fillStyle=h,sue(t,o,f&&iS(i,u,d)),t.beginPath();const g=!!n.pathSegment(t,l);let m;if(f){g?t.closePath():GP(t,r,d,i);const v=!!r.pathSegment(t,c,{move:g,reverse:!0});m=g&&v,m||GP(t,r,u,i)}t.closePath(),t.fill(m?"evenodd":"nonzero"),t.restore()}}function sue(t,e,n){const{top:r,bottom:i}=e.chart.chartArea,{property:s,start:o,end:a}=n||{};s==="x"&&(t.beginPath(),t.rect(o,r,a-o,i-r),t.clip())}function GP(t,e,n,r){const i=e.interpolate(n,r);i&&t.lineTo(i.x,i.y)}var oue={id:"filler",afterDatasetsUpdate(t,e,n){const r=(t.data.datasets||[]).length,i=[];let s,o,a,l;for(o=0;o<r;++o)s=t.getDatasetMeta(o),a=s.dataset,l=null,a&&a.options&&a instanceof eo&&(l={visible:t.isDatasetVisible(o),index:o,fill:Wce(a,o,r),chart:t,axis:s.controller.options.indexAxis,scale:s.vScale,line:a}),s.$filler=l,i.push(l);for(o=0;o<r;++o)l=i[o],!(!l||l.fill===!1)&&(l.fill=zce(i,o,n.propagate))},beforeDraw(t,e,n){const r=n.drawTime==="beforeDraw",i=t.getSortedVisibleDatasetMetas(),s=t.chartArea;for(let o=i.length-1;o>=0;--o){const a=i[o].$filler;a&&(a.line.updateControlPoints(s,a.axis),r&&a.fill&&Sw(t.ctx,a,s))}},beforeDatasetsDraw(t,e,n){if(n.drawTime!=="beforeDatasetsDraw")return;const r=t.getSortedVisibleDatasetMetas();for(let i=r.length-1;i>=0;--i){const s=r[i].$filler;WP(s)&&Sw(t.ctx,s,t.chartArea)}},beforeDatasetDraw(t,e,n){const r=e.meta.$filler;!WP(r)||n.drawTime!=="beforeDatasetDraw"||Sw(t.ctx,r,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const KP=(t,e)=>{let{boxHeight:n=e,boxWidth:r=e}=t;return t.usePointStyle&&(n=Math.min(n,e),r=t.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(e,n)}},aue=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class QP extends Ds{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,r){this.maxWidth=e,this.maxHeight=n,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=tt(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(r=>e.filter(r,this.chart.data))),e.sort&&(n=n.sort((r,i)=>e.sort(r,i,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,i=Jt(r.font),s=i.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=KP(r,s);let c,u;n.font=i.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(o,s,a,l)+10):(u=this.maxHeight,c=this._fitCols(o,i,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,n,r,i){const{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=i+a;let d=e;s.textAlign="left",s.textBaseline="middle";let h=-1,f=-u;return this.legendItems.forEach((g,m)=>{const v=r+n/2+s.measureText(g.text).width;(m===0||c[c.length-1]+v+2*a>o)&&(d+=u,c[c.length-(m>0?0:1)]=0,f+=u,h++),l[m]={left:0,top:f,row:h,width:v,height:i},c[c.length-1]+=v+a}),d}_fitCols(e,n,r,i){const{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=o-e;let d=a,h=0,f=0,g=0,m=0;return this.legendItems.forEach((v,_)=>{const{itemWidth:y,itemHeight:w}=lue(r,n,s,v,i);_>0&&f+w+2*a>u&&(d+=h+a,c.push({width:h,height:f}),g+=h+a,m++,h=f=0),l[_]={left:g,top:f,col:m,width:y,height:w},h=Math.max(h,y),f+=w+a}),d+=h,c.push({width:h,height:f}),d}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:r,labels:{padding:i},rtl:s}}=this,o=xc(s,this.left,this.width);if(this.isHorizontal()){let a=0,l=Nn(r,this.left+i,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=Nn(r,this.left+i,this.right-this.lineWidths[a])),c.top+=this.top+e+i,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+i}else{let a=0,l=Nn(r,this.top+e+i,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=Nn(r,this.top+e+i,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+i,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Mv(e,this),this._draw(),Lv(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:r,ctx:i}=this,{align:s,labels:o}=e,a=Nt.color,l=xc(e.rtl,this.left,this.width),c=Jt(o.font),{padding:u}=o,d=c.size,h=d/2;let f;this.drawTitle(),i.textAlign=l.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=c.string;const{boxWidth:g,boxHeight:m,itemHeight:v}=KP(o,d),_=function(T,I,E){if(isNaN(g)||g<=0||isNaN(m)||m<0)return;i.save();const k=Te(E.lineWidth,1);if(i.fillStyle=Te(E.fillStyle,a),i.lineCap=Te(E.lineCap,"butt"),i.lineDashOffset=Te(E.lineDashOffset,0),i.lineJoin=Te(E.lineJoin,"miter"),i.lineWidth=k,i.strokeStyle=Te(E.strokeStyle,a),i.setLineDash(Te(E.lineDash,[])),o.usePointStyle){const D={radius:m*Math.SQRT2/2,pointStyle:E.pointStyle,rotation:E.rotation,borderWidth:k},F=l.xPlus(T,g/2),K=I+h;UU(i,D,F,K,o.pointStyleWidth&&g)}else{const D=I+Math.max((d-m)/2,0),F=l.leftForLtr(T,g),K=Aa(E.borderRadius);i.beginPath(),Object.values(K).some(X=>X!==0)?wf(i,{x:F,y:D,w:g,h:m,radius:K}):i.rect(F,D,g,m),i.fill(),k!==0&&i.stroke()}i.restore()},y=function(T,I,E){el(i,E.text,T,I+v/2,c,{strikethrough:E.hidden,textAlign:l.textAlign(E.textAlign)})},w=this.isHorizontal(),b=this._computeTitleHeight();w?f={x:Nn(s,this.left+u,this.right-r[0]),y:this.top+u+b,line:0}:f={x:this.left+u,y:Nn(s,this.top+b+u,this.bottom-n[0].height),line:0},QU(this.ctx,e.textDirection);const x=v+u;this.legendItems.forEach((T,I)=>{i.strokeStyle=T.fontColor,i.fillStyle=T.fontColor;const E=i.measureText(T.text).width,k=l.textAlign(T.textAlign||(T.textAlign=o.textAlign)),D=g+h+E;let F=f.x,K=f.y;l.setWidth(this.width),w?I>0&&F+D+u>this.right&&(K=f.y+=x,f.line++,F=f.x=Nn(s,this.left+u,this.right-r[f.line])):I>0&&K+x>this.bottom&&(F=f.x=F+n[f.line].width+u,f.line++,K=f.y=Nn(s,this.top+b+u,this.bottom-n[f.line].height));const X=l.x(F);if(_(X,K,T),F=koe(k,F+g+h,w?F+D:this.right,e.rtl),y(l.x(F),K,T),w)f.x+=D+u;else if(typeof T.text!="string"){const le=c.lineHeight;f.y+=wB(T,le)+u}else f.y+=x}),YU(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,r=Jt(n.font),i=Un(n.padding);if(!n.display)return;const s=xc(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=r.size/2,c=i.top+l;let u,d=this.left,h=this.width;if(this.isHorizontal())h=Math.max(...this.lineWidths),u=this.top+c,d=Nn(e.align,d,this.right-h);else{const g=this.columnSizes.reduce((m,v)=>Math.max(m,v.height),0);u=c+Nn(e.align,this.top,this.bottom-g-e.labels.padding-this._computeTitleHeight())}const f=Nn(a,d,d+h);o.textAlign=s.textAlign(i1(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=r.string,el(o,n.text,f,u,r)}_computeTitleHeight(){const e=this.options.title,n=Jt(e.font),r=Un(e.padding);return e.display?n.lineHeight+r.height:0}_getLegendItemAt(e,n){let r,i,s;if(os(e,this.left,this.right)&&os(n,this.top,this.bottom)){for(s=this.legendHitBoxes,r=0;r<s.length;++r)if(i=s[r],os(e,i.left,i.left+i.width)&&os(n,i.top,i.top+i.height))return this.legendItems[r]}return null}handleEvent(e){const n=this.options;if(!due(e.type,n))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const i=this._hoveredItem,s=aue(i,r);i&&!s&&tt(n.onLeave,[e,i,this],this),this._hoveredItem=r,r&&!s&&tt(n.onHover,[e,r,this],this)}else r&&tt(n.onClick,[e,r,this],this)}}function lue(t,e,n,r,i){const s=cue(r,t,e,n),o=uue(i,r,e.lineHeight);return{itemWidth:s,itemHeight:o}}function cue(t,e,n,r){let i=t.text;return i&&typeof i!="string"&&(i=i.reduce((s,o)=>s.length>o.length?s:o)),e+n.size/2+r.measureText(i).width}function uue(t,e,n){let r=t;return typeof e.text!="string"&&(r=wB(e,n)),r}function wB(t,e){const n=t.text?t.text.length:0;return e*n}function due(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var hue={id:"legend",_element:QP,start(t,e,n){const r=t.legend=new QP({ctx:t.ctx,options:n,chart:t});Ln.configure(t,r,n),Ln.addBox(t,r)},stop(t){Ln.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const r=t.legend;Ln.configure(t,r,n),r.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const r=e.datasetIndex,i=n.chart;i.isDatasetVisible(r)?(i.hide(r),e.hidden=!0):(i.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:i,color:s,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),u=Un(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:r||c.pointStyle,rotation:c.rotation,textAlign:i||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class p1 extends Ds{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const i=dt(r.text)?r.text.length:1;this._padding=Un(r.padding);const s=i*Jt(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:r,bottom:i,right:s,options:o}=this,a=o.align;let l=0,c,u,d;return this.isHorizontal()?(u=Nn(a,r,s),d=n+e,c=s-r):(o.position==="left"?(u=r+e,d=Nn(a,i,n),l=gt*-.5):(u=s-e,d=Nn(a,n,i),l=gt*.5),c=i-n),{titleX:u,titleY:d,maxWidth:c,rotation:l}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const r=Jt(n.font),s=r.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(s);el(e,n.text,0,0,r,{color:n.color,maxWidth:l,rotation:c,textAlign:i1(n.align),textBaseline:"middle",translation:[o,a]})}}function fue(t,e){const n=new p1({ctx:t.ctx,options:e,chart:t});Ln.configure(t,n,e),Ln.addBox(t,n),t.titleBlock=n}var pue={id:"title",_element:p1,start(t,e,n){fue(t,n)},stop(t){const e=t.titleBlock;Ln.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const r=t.titleBlock;Ln.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const xg=new WeakMap;var gue={id:"subtitle",start(t,e,n){const r=new p1({ctx:t.ctx,options:n,chart:t});Ln.configure(t,r,n),Ln.addBox(t,r),xg.set(t,r)},stop(t){Ln.removeBox(t,xg.get(t)),xg.delete(t)},beforeUpdate(t,e,n){const r=xg.get(t);Ln.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Vd={average(t){if(!t.length)return!1;let e,n,r=new Set,i=0,s=0;for(e=0,n=t.length;e<n;++e){const a=t[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();r.add(l.x),i+=l.y,++s}}return{x:[...r].reduce((a,l)=>a+l)/r.size,y:i/s}},nearest(t,e){if(!t.length)return!1;let n=e.x,r=e.y,i=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=t.length;s<o;++s){const l=t[s].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=Yx(e,c);u<i&&(i=u,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,r=l.y}return{x:n,y:r}}};function _i(t,e){return e&&(dt(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Yi(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function mue(t,e){const{element:n,datasetIndex:r,index:i}=e,s=t.getDatasetMeta(r).controller,{label:o,value:a}=s.getLabelAndValue(i);return{chart:t,label:o,parsed:s.getParsed(i),raw:t.data.datasets[r].data[i],formattedValue:a,dataset:s.getDataset(),dataIndex:i,datasetIndex:r,element:n}}function YP(t,e){const n=t.chart.ctx,{body:r,footer:i,title:s}=t,{boxWidth:o,boxHeight:a}=e,l=Jt(e.bodyFont),c=Jt(e.titleFont),u=Jt(e.footerFont),d=s.length,h=i.length,f=r.length,g=Un(e.padding);let m=g.height,v=0,_=r.reduce((b,x)=>b+x.before.length+x.lines.length+x.after.length,0);if(_+=t.beforeBody.length+t.afterBody.length,d&&(m+=d*c.lineHeight+(d-1)*e.titleSpacing+e.titleMarginBottom),_){const b=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;m+=f*b+(_-f)*l.lineHeight+(_-1)*e.bodySpacing}h&&(m+=e.footerMarginTop+h*u.lineHeight+(h-1)*e.footerSpacing);let y=0;const w=function(b){v=Math.max(v,n.measureText(b).width+y)};return n.save(),n.font=c.string,He(t.title,w),n.font=l.string,He(t.beforeBody.concat(t.afterBody),w),y=e.displayColors?o+2+e.boxPadding:0,He(r,b=>{He(b.before,w),He(b.lines,w),He(b.after,w)}),y=0,n.font=u.string,He(t.footer,w),n.restore(),v+=g.width,{width:v,height:m}}function yue(t,e){const{y:n,height:r}=e;return n<r/2?"top":n>t.height-r/2?"bottom":"center"}function _ue(t,e,n,r){const{x:i,width:s}=r,o=n.caretSize+n.caretPadding;if(t==="left"&&i+s+o>e.width||t==="right"&&i-s-o<0)return!0}function vue(t,e,n,r){const{x:i,width:s}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return r==="center"?c=i<=(a+l)/2?"left":"right":i<=s/2?c="left":i>=o-s/2&&(c="right"),_ue(c,t,e,n)&&(c="center"),c}function XP(t,e,n){const r=n.yAlign||e.yAlign||yue(t,n);return{xAlign:n.xAlign||e.xAlign||vue(t,e,n,r),yAlign:r}}function wue(t,e){let{x:n,width:r}=t;return e==="right"?n-=r:e==="center"&&(n-=r/2),n}function bue(t,e,n){let{y:r,height:i}=t;return e==="top"?r+=n:e==="bottom"?r-=i+n:r-=i/2,r}function JP(t,e,n,r){const{caretSize:i,caretPadding:s,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=i+s,{topLeft:u,topRight:d,bottomLeft:h,bottomRight:f}=Aa(o);let g=wue(e,a);const m=bue(e,l,c);return l==="center"?a==="left"?g+=c:a==="right"&&(g-=c):a==="left"?g-=Math.max(u,h)+i:a==="right"&&(g+=Math.max(d,f)+i),{x:cn(g,0,r.width-e.width),y:cn(m,0,r.height-e.height)}}function Sg(t,e,n){const r=Un(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-r.right:t.x+r.left}function ZP(t){return _i([],Yi(t))}function xue(t,e,n){return Ko(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function eN(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const bB={beforeTitle:Gi,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,r=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return n[e.dataIndex]}return""},afterTitle:Gi,beforeBody:Gi,beforeLabel:Gi,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return je(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:Gi,afterBody:Gi,beforeFooter:Gi,footer:Gi,afterFooter:Gi};function nr(t,e,n,r){const i=t[e].call(n,r);return typeof i>"u"?bB[e].call(n,r):i}class sS extends Ds{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,r=this.options.setContext(this.getContext()),i=r.enabled&&n.options.animation&&r.animations,s=new eB(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=xue(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:r}=n,i=nr(r,"beforeTitle",this,e),s=nr(r,"title",this,e),o=nr(r,"afterTitle",this,e);let a=[];return a=_i(a,Yi(i)),a=_i(a,Yi(s)),a=_i(a,Yi(o)),a}getBeforeBody(e,n){return ZP(nr(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:r}=n,i=[];return He(e,s=>{const o={before:[],lines:[],after:[]},a=eN(r,s);_i(o.before,Yi(nr(a,"beforeLabel",this,s))),_i(o.lines,nr(a,"label",this,s)),_i(o.after,Yi(nr(a,"afterLabel",this,s))),i.push(o)}),i}getAfterBody(e,n){return ZP(nr(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:r}=n,i=nr(r,"beforeFooter",this,e),s=nr(r,"footer",this,e),o=nr(r,"afterFooter",this,e);let a=[];return a=_i(a,Yi(i)),a=_i(a,Yi(s)),a=_i(a,Yi(o)),a}_createItems(e){const n=this._active,r=this.chart.data,i=[],s=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(mue(this.chart,n[l]));return e.filter&&(a=a.filter((u,d,h)=>e.filter(u,d,h,r))),e.itemSort&&(a=a.sort((u,d)=>e.itemSort(u,d,r))),He(a,u=>{const d=eN(e.callbacks,u);i.push(nr(d,"labelColor",this,u)),s.push(nr(d,"labelPointStyle",this,u)),o.push(nr(d,"labelTextColor",this,u))}),this.labelColors=i,this.labelPointStyles=s,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const r=this.options.setContext(this.getContext()),i=this._active;let s,o=[];if(!i.length)this.opacity!==0&&(s={opacity:0});else{const a=Vd[r.position].call(this,i,this._eventPosition);o=this._createItems(r),this.title=this.getTitle(o,r),this.beforeBody=this.getBeforeBody(o,r),this.body=this.getBody(o,r),this.afterBody=this.getAfterBody(o,r),this.footer=this.getFooter(o,r);const l=this._size=YP(this,r),c=Object.assign({},a,l),u=XP(this.chart,r,c),d=JP(r,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,s={opacity:1,x:d.x,y:d.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,r,i){const s=this.getCaretPosition(e,r,i);n.lineTo(s.x1,s.y1),n.lineTo(s.x2,s.y2),n.lineTo(s.x3,s.y3)}getCaretPosition(e,n,r){const{xAlign:i,yAlign:s}=this,{caretSize:o,cornerRadius:a}=r,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:d}=Aa(a),{x:h,y:f}=e,{width:g,height:m}=n;let v,_,y,w,b,x;return s==="center"?(b=f+m/2,i==="left"?(v=h,_=v-o,w=b+o,x=b-o):(v=h+g,_=v+o,w=b-o,x=b+o),y=v):(i==="left"?_=h+Math.max(l,u)+o:i==="right"?_=h+g-Math.max(c,d)-o:_=this.caretX,s==="top"?(w=f,b=w-o,v=_-o,y=_+o):(w=f+m,b=w+o,v=_+o,y=_-o),x=w),{x1:v,x2:_,x3:y,y1:w,y2:b,y3:x}}drawTitle(e,n,r){const i=this.title,s=i.length;let o,a,l;if(s){const c=xc(r.rtl,this.x,this.width);for(e.x=Sg(this,r.titleAlign,r),n.textAlign=c.textAlign(r.titleAlign),n.textBaseline="middle",o=Jt(r.titleFont),a=r.titleSpacing,n.fillStyle=r.titleColor,n.font=o.string,l=0;l<s;++l)n.fillText(i[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===s&&(e.y+=r.titleMarginBottom-a)}}_drawColorBox(e,n,r,i,s){const o=this.labelColors[r],a=this.labelPointStyles[r],{boxHeight:l,boxWidth:c}=s,u=Jt(s.bodyFont),d=Sg(this,"left",s),h=i.x(d),f=l<u.lineHeight?(u.lineHeight-l)/2:0,g=n.y+f;if(s.usePointStyle){const m={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},v=i.leftForLtr(h,c)+c/2,_=g+l/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,Jx(e,m,v,_),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,Jx(e,m,v,_)}else{e.lineWidth=Ne(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const m=i.leftForLtr(h,c),v=i.leftForLtr(i.xPlus(h,1),c-2),_=Aa(o.borderRadius);Object.values(_).some(y=>y!==0)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,wf(e,{x:m,y:g,w:c,h:l,radius:_}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),wf(e,{x:v,y:g+1,w:c-2,h:l-2,radius:_}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(m,g,c,l),e.strokeRect(m,g,c,l),e.fillStyle=o.backgroundColor,e.fillRect(v,g+1,c-2,l-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,n,r){const{body:i}=this,{bodySpacing:s,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:u}=r,d=Jt(r.bodyFont);let h=d.lineHeight,f=0;const g=xc(r.rtl,this.x,this.width),m=function(E){n.fillText(E,g.x(e.x+f),e.y+h/2),e.y+=h+s},v=g.textAlign(o);let _,y,w,b,x,T,I;for(n.textAlign=o,n.textBaseline="middle",n.font=d.string,e.x=Sg(this,v,r),n.fillStyle=r.bodyColor,He(this.beforeBody,m),f=a&&v!=="right"?o==="center"?c/2+u:c+2+u:0,b=0,T=i.length;b<T;++b){for(_=i[b],y=this.labelTextColors[b],n.fillStyle=y,He(_.before,m),w=_.lines,a&&w.length&&(this._drawColorBox(n,e,b,g,r),h=Math.max(d.lineHeight,l)),x=0,I=w.length;x<I;++x)m(w[x]),h=d.lineHeight;He(_.after,m)}f=0,h=d.lineHeight,He(this.afterBody,m),e.y-=s}drawFooter(e,n,r){const i=this.footer,s=i.length;let o,a;if(s){const l=xc(r.rtl,this.x,this.width);for(e.x=Sg(this,r.footerAlign,r),e.y+=r.footerMarginTop,n.textAlign=l.textAlign(r.footerAlign),n.textBaseline="middle",o=Jt(r.footerFont),n.fillStyle=r.footerColor,n.font=o.string,a=0;a<s;++a)n.fillText(i[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+r.footerSpacing}}drawBackground(e,n,r,i){const{xAlign:s,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:u}=r,{topLeft:d,topRight:h,bottomLeft:f,bottomRight:g}=Aa(i.cornerRadius);n.fillStyle=i.backgroundColor,n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.beginPath(),n.moveTo(a+d,l),o==="top"&&this.drawCaret(e,n,r,i),n.lineTo(a+c-h,l),n.quadraticCurveTo(a+c,l,a+c,l+h),o==="center"&&s==="right"&&this.drawCaret(e,n,r,i),n.lineTo(a+c,l+u-g),n.quadraticCurveTo(a+c,l+u,a+c-g,l+u),o==="bottom"&&this.drawCaret(e,n,r,i),n.lineTo(a+f,l+u),n.quadraticCurveTo(a,l+u,a,l+u-f),o==="center"&&s==="left"&&this.drawCaret(e,n,r,i),n.lineTo(a,l+d),n.quadraticCurveTo(a,l,a+d,l),n.closePath(),n.fill(),i.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,r=this.$animations,i=r&&r.x,s=r&&r.y;if(i||s){const o=Vd[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=YP(this,e),l=Object.assign({},o,this._size),c=XP(n,e,l),u=JP(e,l,c,n);(i._to!==u.x||s._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(n);const i={width:this.width,height:this.height},s={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const o=Un(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=r,this.drawBackground(s,e,i,n),QU(e,n.textDirection),s.y+=o.top,this.drawTitle(s,e,n),this.drawBody(s,e,n),this.drawFooter(s,e,n),YU(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const r=this._active,i=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),s=!xy(r,i),o=this._positionChanged(i,n);(s||o)&&(this._active=i,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,s=this._active||[],o=this._getActiveElements(e,s,n,r),a=this._positionChanged(o,e),l=n||!xy(o,s)||a;return l&&(this._active=o,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,r,i){const s=this.options;if(e.type==="mouseout")return[];if(!i)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,s.mode,s,r);return s.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:r,caretY:i,options:s}=this,o=Vd[s.position].call(this,e,n);return o!==!1&&(r!==o.x||i!==o.y)}}Y(sS,"positioners",Vd);var Sue={id:"tooltip",_element:sS,positioners:Vd,afterInit(t,e,n){n&&(t.tooltip=new sS({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:bB},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},Eue=Object.freeze({__proto__:null,Colors:Lce,Decimation:$ce,Filler:oue,Legend:hue,SubTitle:gue,Title:pue,Tooltip:Sue});const Tue=(t,e,n,r)=>(typeof e=="string"?(n=t.push(e)-1,r.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function Iue(t,e,n,r){const i=t.indexOf(e);if(i===-1)return Tue(t,e,n,r);const s=t.lastIndexOf(e);return i!==s?n:i}const Cue=(t,e)=>t===null?null:cn(Math.round(t),0,e);function tN(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class oS extends xl{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const r=this.getLabels();for(const{index:i,label:s}of n)r[i]===s&&r.splice(i,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(je(e))return null;const r=this.getLabels();return n=isFinite(n)&&r[n]===e?n:Iue(r,e,Te(n,e),this._addedLabels),Cue(n,r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:r,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),n||(i=this.getLabels().length-1)),this.min=r,this.max=i}buildTicks(){const e=this.min,n=this.max,r=this.options.offset,i=[];let s=this.getLabels();s=e===0&&n===s.length-1?s:s.slice(e,n+1),this._valueRange=Math.max(s.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let o=e;o<=n;o++)i.push({value:o});return i}getLabelForValue(e){return tN.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}Y(oS,"id","category"),Y(oS,"defaults",{ticks:{callback:tN}});function Rue(t,e){const n=[],{bounds:i,step:s,min:o,max:a,precision:l,count:c,maxTicks:u,maxDigits:d,includeBounds:h}=t,f=s||1,g=u-1,{min:m,max:v}=e,_=!je(o),y=!je(a),w=!je(c),b=(v-m)/(d+1);let x=QA((v-m)/g/f)*f,T,I,E,k;if(x<1e-14&&!_&&!y)return[{value:m},{value:v}];k=Math.ceil(v/x)-Math.floor(m/x),k>g&&(x=QA(k*x/g/f)*f),je(l)||(T=Math.pow(10,l),x=Math.ceil(x*T)/T),i==="ticks"?(I=Math.floor(m/x)*x,E=Math.ceil(v/x)*x):(I=m,E=v),_&&y&&s&&xoe((a-o)/s,x/1e3)?(k=Math.round(Math.min((a-o)/x,u)),x=(a-o)/k,I=o,E=a):w?(I=_?o:I,E=y?a:E,k=c-1,x=(E-I)/k):(k=(E-I)/x,uh(k,Math.round(k),x/1e3)?k=Math.round(k):k=Math.ceil(k));const D=Math.max(YA(x),YA(I));T=Math.pow(10,je(l)?D:l),I=Math.round(I*T)/T,E=Math.round(E*T)/T;let F=0;for(_&&(h&&I!==o?(n.push({value:o}),I<o&&F++,uh(Math.round((I+F*x)*T)/T,o,nN(o,b,t))&&F++):I<o&&F++);F<k;++F){const K=Math.round((I+F*x)*T)/T;if(y&&K>a)break;n.push({value:K})}return y&&h&&E!==a?n.length&&uh(n[n.length-1].value,a,nN(a,b,t))?n[n.length-1].value=a:n.push({value:a}):(!y||E===a)&&n.push({value:E}),n}function nN(t,e,{horizontal:n,minRotation:r}){const i=ri(r),s=(n?Math.sin(i):Math.cos(i))||.001,o=.75*e*(""+t).length;return Math.min(e/s,o)}class ky extends xl{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return je(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:r}=this.getUserBounds();let{min:i,max:s}=this;const o=l=>i=n?i:l,a=l=>s=r?s:l;if(e){const l=ji(i),c=ji(s);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(i===s){let l=s===0?1:Math.abs(s*.05);a(s+l),e||o(i-l)}this.min=i,this.max=s}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:r}=e,i;return r?(i=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),n=n||11),n&&(i=Math.min(n,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const i={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},s=this._range||this,o=Rue(i,s);return e.bounds==="ticks"&&NU(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const i=(r-n)/Math.max(e.length-1,1)/2;n-=i,r+=i}this._startValue=n,this._endValue=r,this._valueRange=r-n}getLabelForValue(e){return Sp(e,this.chart.options.locale,this.options.ticks.format)}}class aS extends ky{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=Pt(e)?e:0,this.max=Pt(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,r=ri(this.options.ticks.minRotation),i=(e?Math.sin(r):Math.cos(r))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,s.lineHeight/i))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}Y(aS,"id","linear"),Y(aS,"defaults",{ticks:{callback:Ov.formatters.numeric}});const xf=t=>Math.floor(Zs(t)),Zo=(t,e)=>Math.pow(10,xf(t)+e);function rN(t){return t/Math.pow(10,xf(t))===1}function iN(t,e,n){const r=Math.pow(10,n),i=Math.floor(t/r);return Math.ceil(e/r)-i}function kue(t,e){const n=e-t;let r=xf(n);for(;iN(t,e,r)>10;)r++;for(;iN(t,e,r)<10;)r--;return Math.min(r,xf(t))}function Aue(t,{min:e,max:n}){e=vr(t.min,e);const r=[],i=xf(e);let s=kue(e,n),o=s<0?Math.pow(10,Math.abs(s)):1;const a=Math.pow(10,s),l=i>s?Math.pow(10,i):0,c=Math.round((e-l)*o)/o,u=Math.floor((e-l)/a/10)*a*10;let d=Math.floor((c-u)/Math.pow(10,s)),h=vr(t.min,Math.round((l+u+d*Math.pow(10,s))*o)/o);for(;h<n;)r.push({value:h,major:rN(h),significand:d}),d>=10?d=d<15?15:20:d++,d>=20&&(s++,d=2,o=s>=0?1:o),h=Math.round((l+u+d*Math.pow(10,s))*o)/o;const f=vr(t.max,h);return r.push({value:f,major:rN(f),significand:d}),r}class lS extends xl{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,n){const r=ky.prototype.parse.apply(this,[e,n]);if(r===0){this._zero=!0;return}return Pt(r)&&r>0?r:null}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=Pt(e)?Math.max(0,e):null,this.max=Pt(n)?Math.max(0,n):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Pt(this._userMin)&&(this.min=e===Zo(this.min,0)?Zo(this.min,-1):Zo(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let r=this.min,i=this.max;const s=a=>r=e?r:a,o=a=>i=n?i:a;r===i&&(r<=0?(s(1),o(10)):(s(Zo(r,-1)),o(Zo(i,1)))),r<=0&&s(Zo(i,-1)),i<=0&&o(Zo(r,1)),this.min=r,this.max=i}buildTicks(){const e=this.options,n={min:this._userMin,max:this._userMax},r=Aue(n,this);return e.bounds==="ticks"&&NU(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}getLabelForValue(e){return e===void 0?"0":Sp(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=Zs(e),this._valueRange=Zs(this.max)-Zs(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(Zs(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const n=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+n*this._valueRange)}}Y(lS,"id","logarithmic"),Y(lS,"defaults",{ticks:{callback:Ov.formatters.logarithmic,major:{enabled:!0}}});function cS(t){const e=t.ticks;if(e.display&&t.display){const n=Un(e.backdropPadding);return Te(e.font&&e.font.size,Nt.font.size)+n.height}return 0}function Pue(t,e,n){return n=dt(n)?n:[n],{w:joe(t,e.string,n),h:n.length*e.lineHeight}}function sN(t,e,n,r,i){return t===r||t===i?{start:e-n/2,end:e+n/2}:t<r||t>i?{start:e-n,end:e}:{start:e,end:e+n}}function Nue(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},n=Object.assign({},e),r=[],i=[],s=t._pointLabels.length,o=t.options.pointLabels,a=o.centerPointLabels?gt/s:0;for(let l=0;l<s;l++){const c=o.setContext(t.getPointLabelContext(l));i[l]=c.padding;const u=t.getPointPosition(l,t.drawingArea+i[l],a),d=Jt(c.font),h=Pue(t.ctx,d,t._pointLabels[l]);r[l]=h;const f=br(t.getIndexAngle(l)+a),g=Math.round(n1(f)),m=sN(g,u.x,h.w,0,180),v=sN(g,u.y,h.h,90,270);Due(n,e,f,m,v)}t.setCenterPoint(e.l-n.l,n.r-e.r,e.t-n.t,n.b-e.b),t._pointLabelItems=Lue(t,r,i)}function Due(t,e,n,r,i){const s=Math.abs(Math.sin(n)),o=Math.abs(Math.cos(n));let a=0,l=0;r.start<e.l?(a=(e.l-r.start)/s,t.l=Math.min(t.l,e.l-a)):r.end>e.r&&(a=(r.end-e.r)/s,t.r=Math.max(t.r,e.r+a)),i.start<e.t?(l=(e.t-i.start)/o,t.t=Math.min(t.t,e.t-l)):i.end>e.b&&(l=(i.end-e.b)/o,t.b=Math.max(t.b,e.b+l))}function Oue(t,e,n){const r=t.drawingArea,{extra:i,additionalAngle:s,padding:o,size:a}=n,l=t.getPointPosition(e,r+i+o,s),c=Math.round(n1(br(l.angle+Ut))),u=jue(l.y,a.h,c),d=Vue(c),h=Fue(l.x,a.w,d);return{visible:!0,x:l.x,y:u,textAlign:d,left:h,top:u,right:h+a.w,bottom:u+a.h}}function Mue(t,e){if(!e)return!0;const{left:n,top:r,right:i,bottom:s}=t;return!(ls({x:n,y:r},e)||ls({x:n,y:s},e)||ls({x:i,y:r},e)||ls({x:i,y:s},e))}function Lue(t,e,n){const r=[],i=t._pointLabels.length,s=t.options,{centerPointLabels:o,display:a}=s.pointLabels,l={extra:cS(s)/2,additionalAngle:o?gt/i:0};let c;for(let u=0;u<i;u++){l.padding=n[u],l.size=e[u];const d=Oue(t,u,l);r.push(d),a==="auto"&&(d.visible=Mue(d,c),d.visible&&(c=d))}return r}function Vue(t){return t===0||t===180?"center":t<180?"left":"right"}function Fue(t,e,n){return n==="right"?t-=e:n==="center"&&(t-=e/2),t}function jue(t,e,n){return n===90||n===270?t-=e/2:(n>270||n<90)&&(t-=e),t}function $ue(t,e,n){const{left:r,top:i,right:s,bottom:o}=n,{backdropColor:a}=e;if(!je(a)){const l=Aa(e.borderRadius),c=Un(e.backdropPadding);t.fillStyle=a;const u=r-c.left,d=i-c.top,h=s-r+c.width,f=o-i+c.height;Object.values(l).some(g=>g!==0)?(t.beginPath(),wf(t,{x:u,y:d,w:h,h:f,radius:l}),t.fill()):t.fillRect(u,d,h,f)}}function Uue(t,e){const{ctx:n,options:{pointLabels:r}}=t;for(let i=e-1;i>=0;i--){const s=t._pointLabelItems[i];if(!s.visible)continue;const o=r.setContext(t.getPointLabelContext(i));$ue(n,o,s);const a=Jt(o.font),{x:l,y:c,textAlign:u}=s;el(n,t._pointLabels[i],l,c+a.lineHeight/2,a,{color:o.color,textAlign:u,textBaseline:"middle"})}}function xB(t,e,n,r){const{ctx:i}=t;if(n)i.arc(t.xCenter,t.yCenter,e,0,ft);else{let s=t.getPointPosition(0,e);i.moveTo(s.x,s.y);for(let o=1;o<r;o++)s=t.getPointPosition(o,e),i.lineTo(s.x,s.y)}}function Bue(t,e,n,r,i){const s=t.ctx,o=e.circular,{color:a,lineWidth:l}=e;!o&&!r||!a||!l||n<0||(s.save(),s.strokeStyle=a,s.lineWidth=l,s.setLineDash(i.dash),s.lineDashOffset=i.dashOffset,s.beginPath(),xB(t,n,o,r),s.closePath(),s.stroke(),s.restore())}function zue(t,e,n){return Ko(t,{label:n,index:e,type:"pointLabel"})}class Fd extends ky{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=Un(cS(this.options)/2),n=this.width=this.maxWidth-e.width,r=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+n/2+e.left),this.yCenter=Math.floor(this.top+r/2+e.top),this.drawingArea=Math.floor(Math.min(n,r)/2)}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!1);this.min=Pt(e)&&!isNaN(e)?e:0,this.max=Pt(n)&&!isNaN(n)?n:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/cS(this.options))}generateTickLabels(e){ky.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((n,r)=>{const i=tt(this.options.pointLabels.callback,[n,r],this);return i||i===0?i:""}).filter((n,r)=>this.chart.getDataVisibility(r))}fit(){const e=this.options;e.display&&e.pointLabels.display?Nue(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,n,r,i){this.xCenter+=Math.floor((e-n)/2),this.yCenter+=Math.floor((r-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,n,r,i))}getIndexAngle(e){const n=ft/(this._pointLabels.length||1),r=this.options.startAngle||0;return br(e*n+ri(r))}getDistanceFromCenterForValue(e){if(je(e))return NaN;const n=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*n:(e-this.min)*n}getValueForDistanceFromCenter(e){if(je(e))return NaN;const n=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-n:this.min+n}getPointLabelContext(e){const n=this._pointLabels||[];if(e>=0&&e<n.length){const r=n[e];return zue(this.getContext(),e,r)}}getPointPosition(e,n,r=0){const i=this.getIndexAngle(e)-Ut+r;return{x:Math.cos(i)*n+this.xCenter,y:Math.sin(i)*n+this.yCenter,angle:i}}getPointPositionForValue(e,n){return this.getPointPosition(e,this.getDistanceFromCenterForValue(n))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:n,top:r,right:i,bottom:s}=this._pointLabelItems[e];return{left:n,top:r,right:i,bottom:s}}drawBackground(){const{backgroundColor:e,grid:{circular:n}}=this.options;if(e){const r=this.ctx;r.save(),r.beginPath(),xB(this,this.getDistanceFromCenterForValue(this._endValue),n,this._pointLabels.length),r.closePath(),r.fillStyle=e,r.fill(),r.restore()}}drawGrid(){const e=this.ctx,n=this.options,{angleLines:r,grid:i,border:s}=n,o=this._pointLabels.length;let a,l,c;if(n.pointLabels.display&&Uue(this,o),i.display&&this.ticks.forEach((u,d)=>{if(d!==0||d===0&&this.min<0){l=this.getDistanceFromCenterForValue(u.value);const h=this.getContext(d),f=i.setContext(h),g=s.setContext(h);Bue(this,f,l,o,g)}}),r.display){for(e.save(),a=o-1;a>=0;a--){const u=r.setContext(this.getPointLabelContext(a)),{color:d,lineWidth:h}=u;!h||!d||(e.lineWidth=h,e.strokeStyle=d,e.setLineDash(u.borderDash),e.lineDashOffset=u.borderDashOffset,l=this.getDistanceFromCenterForValue(n.ticks.reverse?this.min:this.max),c=this.getPointPosition(a,l),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(c.x,c.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,n=this.options,r=n.ticks;if(!r.display)return;const i=this.getIndexAngle(0);let s,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(i),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&this.min>=0&&!n.reverse)return;const c=r.setContext(this.getContext(l)),u=Jt(c.font);if(s=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){e.font=u.string,o=e.measureText(a.label).width,e.fillStyle=c.backdropColor;const d=Un(c.backdropPadding);e.fillRect(-o/2-d.left,-s-u.size/2-d.top,o+d.width,u.size+d.height)}el(e,a.label,0,-s,u,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),e.restore()}drawTitle(){}}Y(Fd,"id","radialLinear"),Y(Fd,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Ov.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),Y(Fd,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),Y(Fd,"descriptors",{angleLines:{_fallback:"grid"}});const Fv={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},or=Object.keys(Fv);function oN(t,e){return t-e}function aN(t,e){if(je(e))return null;const n=t._adapter,{parser:r,round:i,isoWeekday:s}=t._parseOpts;let o=e;return typeof r=="function"&&(o=r(o)),Pt(o)||(o=typeof r=="string"?n.parse(o,r):n.parse(o)),o===null?null:(i&&(o=i==="week"&&(tu(s)||s===!0)?n.startOf(o,"isoWeek",s):n.startOf(o,i)),+o)}function lN(t,e,n,r){const i=or.length;for(let s=or.indexOf(t);s<i-1;++s){const o=Fv[or[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=r)return or[s]}return or[i-1]}function Wue(t,e,n,r,i){for(let s=or.length-1;s>=or.indexOf(n);s--){const o=or[s];if(Fv[o].common&&t._adapter.diff(i,r,o)>=e-1)return o}return or[n?or.indexOf(n):0]}function Hue(t){for(let e=or.indexOf(t)+1,n=or.length;e<n;++e)if(Fv[or[e]].common)return or[e]}function cN(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:r,hi:i}=r1(n,e),s=n[r]>=e?n[r]:n[i];t[s]=!0}}function que(t,e,n,r){const i=t._adapter,s=+i.startOf(e[0].value,r),o=e[e.length-1].value;let a,l;for(a=s;a<=o;a=+i.add(a,1,r))l=n[a],l>=0&&(e[l].major=!0);return e}function uN(t,e,n){const r=[],i={},s=e.length;let o,a;for(o=0;o<s;++o)a=e[o],i[a]=o,r.push({value:a,major:!1});return s===0||!n?r:que(t,r,i,n)}class Sf extends xl{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const r=e.time||(e.time={}),i=this._adapter=new tle._date(e.adapters.date);i.init(n),ch(r.displayFormats,i.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:aN(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,r=e.time.unit||"day";let{min:i,max:s,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(i=Math.min(i,c.min)),!a&&!isNaN(c.max)&&(s=Math.max(s,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),i=Pt(i)&&!isNaN(i)?i:+n.startOf(Date.now(),r),s=Pt(s)&&!isNaN(s)?s:+n.endOf(Date.now(),r)+1,this.min=Math.min(i,s-1),this.max=Math.max(i+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],r=e[e.length-1]),{min:n,max:r}}buildTicks(){const e=this.options,n=e.time,r=e.ticks,i=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const s=this.min,o=this.max,a=Ioe(i,s,o);return this._unit=n.unit||(r.autoSkip?lN(n.minUnit,this.min,this.max,this._getLabelCapacity(s)):Wue(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:Hue(this._unit),this.initOffsets(i),e.reverse&&a.reverse(),uN(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,r=0,i,s;this.options.offset&&e.length&&(i=this.getDecimalForValue(e[0]),e.length===1?n=1-i:n=(this.getDecimalForValue(e[1])-i)/2,s=this.getDecimalForValue(e[e.length-1]),e.length===1?r=s:r=(s-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=cn(n,0,o),r=cn(r,0,o),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){const e=this._adapter,n=this.min,r=this.max,i=this.options,s=i.time,o=s.unit||lN(s.minUnit,n,r,this._getLabelCapacity(n)),a=Te(i.ticks.stepSize,1),l=o==="week"?s.isoWeekday:!1,c=tu(l)||l===!0,u={};let d=n,h,f;if(c&&(d=+e.startOf(d,"isoWeek",l)),d=+e.startOf(d,c?"day":o),e.diff(r,n,o)>1e5*a)throw new Error(n+" and "+r+" are too far apart with stepSize of "+a+" "+o);const g=i.ticks.source==="data"&&this.getDataTimestamps();for(h=d,f=0;h<r;h=+e.add(h,a,o),f++)cN(u,h,g);return(h===r||i.bounds==="ticks"||f===1)&&cN(u,h,g),Object.keys(u).sort(oN).map(m=>+m)}getLabelForValue(e){const n=this._adapter,r=this.options.time;return r.tooltipFormat?n.format(e,r.tooltipFormat):n.format(e,r.displayFormats.datetime)}format(e,n){const i=this.options.time.displayFormats,s=this._unit,o=n||i[s];return this._adapter.format(e,o)}_tickFormatFunction(e,n,r,i){const s=this.options,o=s.ticks.callback;if(o)return tt(o,[e,n,r],this);const a=s.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],d=c&&a[c],h=r[n],f=c&&d&&h&&h.major;return this._adapter.format(e,i||(f?d:u))}generateTickLabels(e){let n,r,i;for(n=0,r=e.length;n<r;++n)i=e[n],i.label=this._tickFormatFunction(i.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,r=this.ctx.measureText(e).width,i=ri(this.isHorizontal()?n.maxRotation:n.minRotation),s=Math.cos(i),o=Math.sin(i),a=this._resolveTickFontOptions(0).size;return{w:r*s+a*o,h:r*o+a*s}}_getLabelCapacity(e){const n=this.options.time,r=n.displayFormats,i=r[n.unit]||r.millisecond,s=this._tickFormatFunction(e,0,uN(this,[e],this._majorUnit),i),o=this._getLabelSize(s),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,r;if(e.length)return e;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(n=0,r=i.length;n<r;++n)e=e.concat(i[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,r;if(e.length)return e;const i=this.getLabels();for(n=0,r=i.length;n<r;++n)e.push(aN(this,i[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return MU(e.sort(oN))}}Y(Sf,"id","time"),Y(Sf,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Eg(t,e,n){let r=0,i=t.length-1,s,o,a,l;n?(e>=t[r].pos&&e<=t[i].pos&&({lo:r,hi:i}=as(t,"pos",e)),{pos:s,time:a}=t[r],{pos:o,time:l}=t[i]):(e>=t[r].time&&e<=t[i].time&&({lo:r,hi:i}=as(t,"time",e)),{time:s,pos:a}=t[r],{time:o,pos:l}=t[i]);const c=o-s;return c?a+(l-a)*(e-s)/c:a}class uS extends Sf{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=Eg(n,this.min),this._tableRange=Eg(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:r}=this,i=[],s=[];let o,a,l,c,u;for(o=0,a=e.length;o<a;++o)c=e[o],c>=n&&c<=r&&i.push(c);if(i.length<2)return[{time:n,pos:0},{time:r,pos:1}];for(o=0,a=i.length;o<a;++o)u=i[o+1],l=i[o-1],c=i[o],Math.round((u+l)/2)!==c&&s.push({time:c,pos:o/(a-1)});return s}_generate(){const e=this.min,n=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(n)||r.length===1)&&r.push(n),r.sort((i,s)=>i-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),r=this.getLabelTimestamps();return n.length&&r.length?e=this.normalize(n.concat(r)):e=n.length?n:r,e=this._cache.all=e,e}getDecimalForValue(e){return(Eg(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return Eg(this._table,r*this._tableRange+this._minPos,!0)}}Y(uS,"id","timeseries"),Y(uS,"defaults",Sf.defaults);var Gue=Object.freeze({__proto__:null,CategoryScale:oS,LinearScale:aS,LogarithmicScale:lS,RadialLinearScale:Fd,TimeScale:Sf,TimeSeriesScale:uS});const Kue=[ele,Ace,Eue,Gue];es.register(...Kue);const SB=({data:t,updateTime:e,width:n,height:r})=>{const i=S.useRef(null),s=S.useRef(null);return S.useEffect(()=>{const o=i.current;if(o&&t){s.current&&s.current.destroy();const l=o.getContext("2d"),c=Object.values(t).map(u=>parseFloat(u));var a=l.createLinearGradient(0,0,0,l.canvas.height);a.addColorStop(0,"rgba(75, 192, 192, 0.5)"),a.addColorStop(1,"rgba(75, 192, 192, 0)"),s.current=new es(l,{type:"line",data:{labels:Array.from({length:t.length},(u,d)=>d+1),datasets:[{data:c,borderColor:"rgba(75, 192, 192, 1)",borderWidth:2,fill:!0,backgroundColor:a,pointRadius:0,tension:.1}]},options:{responsive:!1,plugins:{legend:{display:!1},tooltip:{enabled:e!==void 0,mode:"index",intersect:!1,backgroundColor:"rgba(0, 0, 0, 0.8)",titleFontColor:"rgba(255, 255, 255, 0.8)",bodyFontColor:"rgba(255, 255, 255, 0.8)",borderColor:"rgba(0, 0, 0, 0.8)",borderWidth:1,cornerRadius:5,displayColors:!1,callbacks:{title:function(u){let d=new Date(e);return d instanceof Date&&!isNaN(d)||(d=new Date),d.setDate(d.getDate()-7),d.setHours(d.getHours()+u[0].parsed.x),d.toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1})},label:function(u){let d=u.dataset.label||"";return d&&(d+=": "),u.parsed.y!==null&&(d+=u.parsed.y.toFixed(5)),"≈ $"+d}}}},scales:{x:{display:!1},y:{display:!1,beginAtZero:!0}},elements:{line:{borderWidth:1},point:{radius:0}},hover:{mode:"index"},maintainAspectRatio:!1}})}return()=>{s.current&&s.current.destroy()}},[t]),p.jsx("div",{className:"flex justify-center w-full",children:p.jsx("canvas",{ref:i,width:n,height:r})})};function xn(t,e=10){return parseFloat(t.toString().replace(/(\.\d*?[1-9])0+$|\.0*$/,"$1")).toLocaleString("en-US",{maximumFractionDigits:e})}const Que=t=>{const e=t.data;function n(o,a,l){return p.jsxs("div",{children:["$"+i(o),p.jsx("div",{className:"text-slate-400",children:i(o/a)+" "+l.toUpperCase()})]})}function r(o){const a=o<0;o=a?o*-1:o;const l=a?"-":"+";return p.jsx("div",{className:`flex justify-end items-center font-semibold ${a?"text-red":"text-green"}`,children:p.jsx("div",{className:"ml-3",children:l+i(o)+"%"})})}function i(o){let a=o.toFixed(10);return parseFloat(a).toLocaleString()}function s(){return new Date(e.last_updated).toLocaleString("en-US",{timeZone:"Asia/Jerusalem"})}return p.jsxs("tr",{className:"border-b hover:bg-gray-200 dark:hover:bg-gray-900",children:[p.jsx("td",{className:"py-2 text-center",children:t.index}),p.jsx("td",{className:"py-2",children:p.jsxs("div",{className:"flex justify-start h-full items-center",children:[p.jsx("img",{className:"w-6 h-6 mr-2",loading:"lazy",src:e.image,alt:e.name+" Logo"}),p.jsxs("div",{className:"flex flex-col justify-center items-start",children:[e.symbol.toUpperCase(),p.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:e.name})]})]})}),p.jsx("td",{className:"py-2 text-end",children:"$"+xn(e.current_price)}),p.jsx("td",{className:"py-2 md:table-cell hidden text-end",children:r(e.price_change_percentage_1h_in_currency)}),p.jsx("td",{className:"py-2 md:table-cell hidden text-end",children:r(e.price_change_percentage_24h_in_currency)}),p.jsx("td",{className:"py-2 text-end",children:r(e.price_change_percentage_7d_in_currency)}),p.jsx("td",{className:"py-2 md:table-cell hidden text-end",children:"$"+i(e.market_cap)}),p.jsx("td",{className:"py-2 md:table-cell hidden text-end",children:n(e.total_volume,e.current_price,e.symbol)}),p.jsx("td",{className:"py-2 md:table-cell hidden text-end",children:i(e.circulating_supply)+" "+e.symbol.toUpperCase()}),p.jsx("td",{className:"py-2 md:table-cell hidden",children:p.jsx(SB,{data:e.sparkline_in_7d.price,width:100,height:50,updateTime:s()})})]})},Ru=t=>{const{totalPageNumber:e,currentPage:n,setCurrentPage:r}=t,[i,s]=S.useState(window.innerWidth),[o,a]=S.useState(5);S.useEffect(()=>{const d=()=>{s(window.innerWidth)};return window.addEventListener("resize",d),()=>{window.removeEventListener("resize",d)}},[]),S.useEffect(()=>{i<768?a(3):a(5)},[i]);function l(){n!==e()&&r(n+1)}function c(){n!==1&&r(n-1)}function u(d){r(d)}return e()===1?null:p.jsxs("div",{className:"flex justify-end items-center mt-2",children:[p.jsx("button",{onClick:c,className:"material-icons w-8 h-8 m-px hover:bg-gray-200 dark:hover:bg-gray-600 rounded-md disabled:opacity-50 disabled:hover:bg-transparent disabled:dark:hover:bg-transparent",disabled:n===1,children:"navigate_before"}),p.jsx("button",{onClick:()=>u(1),className:`w-8 h-8 m-px hover:bg-gray-200 dark:hover:bg-gray-600 rounded-md ${n===1?"bg-gray-200 dark:bg-gray-700":""}`,children:"1"}),n>3?p.jsx("p",{className:"w-8 h-8 m-px grid text-center items-center",children:"..."}):null,Array.from({length:o},(d,h)=>n+h-(o===5?2:1)).map(d=>{if(d>1&&d<e())return p.jsx("button",{onClick:()=>u(d),className:`w-8 h-8 m-px hover:bg-gray-200 dark:hover:bg-gray-600  rounded-md ${n===d?"bg-gray-200 dark:bg-gray-700":""}`,children:d},`pageButton-${d}`)}),n<e()-(o===5?3:2)?p.jsx("p",{className:"w-8 h-8 m-px grid text-center items-center",children:"..."}):null,p.jsx("button",{onClick:()=>u(e()),className:`w-8 h-8 m-px hover:bg-gray-200 dark:hover:bg-gray-600 rounded-md ${n===e()?"bg-gray-200 dark:bg-gray-700":""}`,children:e()}),p.jsx("button",{onClick:l,className:"material-icons w-8 h-8 m-px hover:bg-gray-200 dark:hover:bg-gray-600 rounded-md disabled:opacity-50 disabled:hover:bg-transparent disabled:dark:hover:bg-transparent",disabled:e()===n,children:"navigate_next"})]})};function ku(){const{t}=Qe();return p.jsx("div",{className:"flex items-center justify-center h-full w-full",children:p.jsxs("div",{className:"flex items-center justify-center gap-5",children:[p.jsx("p",{className:"text-gray-900 dark:text-white text-3xl font-semibold",children:t("fetchingdata")}),p.jsxs("div",{className:"loading-container",children:[p.jsx("span",{className:"dot bg-gray-900 dark:bg-white",style:{height:"20px",width:"20px"}}),p.jsx("span",{className:"dot bg-gray-900 dark:bg-white",style:{height:"20px",width:"20px"}}),p.jsx("span",{className:"dot bg-gray-900 dark:bg-white",style:{height:"20px",width:"20px"}})]})]})})}const Yue=t=>{const{t:e}=Qe(),n=10,r=qf($o),[i,s]=S.useState([...r.filterdData].slice(0,n)),[o,a]=S.useState({field:"",asc:null}),[l,c]=S.useState(1);S.useEffect(()=>{Math.ceil(r.filterdData.length/n)<l&&c(1),g()},[r]);const u=()=>Math.ceil(r.filterdData.length/n)||1;S.useEffect(()=>{g()},[l]);function d(m){if(o.field===m){if(o.asc===!1){const _=[...r.filterdData].sort((y,w)=>typeof y[m]=="number"?w[m]-y[m]:(""+w[m]).localeCompare(y[m]));s(_.slice((l-1)*n,l*n)),a({field:m,asc:!0});return}g(),a({field:"",asc:null});return}const v=[...r.filterdData].sort((_,y)=>typeof _[m]=="number"?_[m]-y[m]:(""+_[m]).localeCompare(y[m]));s(v.slice((l-1)*n,l*n)),a({field:m,asc:!1})}const h=(m,v)=>p.jsxs("div",{className:`flex py-2 ${v==="name"?"justify-start":"justify-end"} items-center`,children:[e(v),f(m)?p.jsx("i",{className:"material-icons",children:o.asc?"expand_less":"expand_more"}):null]});function f(m){return o.field===m}function g(){s([...r.filterdData].slice((l-1)*n,l*n))}return p.jsxs("div",{children:[r.updatedTime?p.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-500 dark:text-gray-400",children:[e("lastUpdated")," ",r.updatedTime]}):null,p.jsxs("table",{className:"w-full h-full",children:[p.jsx("thead",{children:p.jsxs("tr",{className:"border-b",children:[p.jsx("th",{className:"cursor-pointer bg-white dark:bg-gray-800 ",children:"#"}),p.jsx("th",{onClick:()=>d("name"),className:"cursor-pointer bg-white dark:bg-gray-800 ",children:h("name","name")}),p.jsx("th",{onClick:()=>d("current_price"),className:"cursor-pointer bg-white dark:bg-gray-800",children:h("current_price","price")}),p.jsx("th",{onClick:()=>d("price_change_percentage_1h_in_currency"),className:"cursor-pointer bg-white dark:bg-gray-800 md:table-cell hidden",children:h("price_change_percentage_1h_in_currency","1h%")}),p.jsx("th",{onClick:()=>d("price_change_percentage_24h_in_currency"),className:"cursor-pointer bg-white dark:bg-gray-800 md:table-cell hidden",children:h("price_change_percentage_24h_in_currency","24h%")}),p.jsx("th",{onClick:()=>d("price_change_percentage_7d_in_currency"),className:"cursor-pointer bg-white dark:bg-gray-800 ",children:h("price_change_percentage_7d_in_currency","7d%")}),p.jsx("th",{onClick:()=>d("market_cap"),className:"cursor-pointer bg-white dark:bg-gray-800 md:table-cell hidden",children:h("market_cap","marketCap")}),p.jsx("th",{onClick:()=>d("total_volume"),className:"cursor-pointer bg-white dark:bg-gray-800 md:table-cell hidden",children:h("total_volume","volume")}),p.jsx("th",{onClick:()=>d("circulating_supply"),className:"cursor-pointer bg-white dark:bg-gray-800 md:table-cell hidden",children:h("circulating_supply","circulatingSupply")}),p.jsx("th",{className:"cursor-pointer bg-white dark:bg-gray-800 md:table-cell hidden",children:e("last7Days")})]})}),p.jsx("tbody",{children:i.map((m,v)=>p.jsx(Que,{data:m,index:v+1+(l-1)*n,header:!1},m.id))})]}),p.jsx("div",{className:`${i.length===0?"":"hidden"} h-20`,children:p.jsx(ku,{})}),p.jsx(Ru,{totalPageNumber:u,currentPage:l,setCurrentPage:c})]})};function Xue(){const{t}=Qe(),[e,n]=_o($o);S.useEffect(()=>(document.title=t("coins")+" | "+t("cryptoPulse"),()=>{document.title=t("cryptoPulse")}),[]);const r=i=>{const s=i.target.value.toLowerCase(),a=[...e.data].filter(l=>l.name.toLowerCase().includes(s));n({...e,filterdData:a})};return p.jsxs("div",{className:"scrollable-content content",children:[p.jsxs("div",{className:"m-5 text-slate-950 dark:text-white",children:[p.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-5",children:[p.jsx("h1",{className:"mb-5 text-3xl font-bold md: m-0",children:t("cryptocurrencyPrices")}),p.jsxs("div",{className:"relative hidden md:block",children:[p.jsx("div",{className:"material-icons absolute inset-y-0 start-0 flex items-center pl-2 pointer-events-none text-gray-500 dark:text-gray-400",children:"search"}),p.jsx("input",{type:"text",onChange:r,className:"pl-9 w-full p-2 text-sm text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:t("search")+"..."})]})]}),p.jsx(Yue,{data:e})]}),p.jsx(bl,{})]})}function Jue({news_object:t}){const{t:e}=Qe();function n(r){r<1e10&&(r*=1e3);const i=new Date(r);return("0"+i.getDate()).slice(-2)+"/"+("0"+(i.getMonth()+1)).slice(-2)+"/"+i.getFullYear()}return p.jsxs("div",{className:"flex flex-col justify-between rounded-lg shadow-md p-4 bg-gray-100 dark:bg-gray-700",children:[p.jsxs("div",{className:"flex items-center",children:[p.jsx("img",{src:t.imageurl,alt:t.title,className:"w-16 h-16 rounded-full object-cover bg-white p-1"}),p.jsxs("div",{className:"flex flex-col justify-center items-start m-4 gap-3",children:[p.jsx("h3",{className:"text-xl font-bold dark:text-gray-100",children:t.title}),p.jsxs("div",{children:[t.tags===""?null:p.jsx("h6",{className:"text-sm text-gray-400 dark:text-gray-400",children:e("tags")+": "+t.tags.replaceAll("|",", ")+"."}),t.categories===""?null:p.jsx("h6",{className:"text-sm text-gray-400 dark:text-gray-400",children:e("Categories")+": "+t.categories.replaceAll("|",", ")+"."})]})]})]}),p.jsx("div",{className:"w-full bg-gray-3 bg-gray-300 dark:bg-gray-600 h-px mx-3"}),p.jsx("p",{className:"h-full text-gray-600 my-2 dark:text-gray-100",children:t.body}),p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsxs("div",{className:"flex items-center text-gray-600 dark:text-gray-100",children:[p.jsx("img",{className:"w-6 h-6 mr-2 rounded-full",loading:"lazy",src:t.source_info.img,alt:t.source_info.name}),p.jsx("span",{children:t.source_info.name})]}),e("publishedAt")+": "+n(t.published_on)]})]})}function Zue({news:t}){const[n,r]=S.useState(1),[i,s]=S.useState([...t].slice(0,3));S.useEffect(()=>{o()<n&&r(1),a()},[t,n]);const o=()=>Math.ceil(t.length/3)||1;function a(){s([...t].slice((n-1)*3,n*3))}return p.jsxs("div",{className:"flex flex-col h-full",children:[p.jsx("div",{className:"flex flex-col gap-5",children:i.map(l=>p.jsx(Jue,{news_object:l},l.id))}),p.jsx("div",{className:`${i.length===0?"":"hidden"} h-20`,children:p.jsx(ku,{})}),p.jsx(Ru,{totalPageNumber:o,currentPage:n,setCurrentPage:r})]})}function ede(){const{t}=Qe(),[e,n]=_o(XE);S.useEffect(()=>(document.title=t("news")+" | "+t("cryptoPulse"),()=>{document.title=t("cryptoPulse")}),[]);const r=i=>{const s=i.target.value.toLowerCase(),a=[...e.data].filter(l=>l.title.toLowerCase().includes(s)||l.body.toLowerCase().includes(s)||l.tags.toLowerCase().includes(s)||l.categories.toLowerCase().includes(s));n({...e,filterdData:a})};return p.jsxs("div",{className:"scrollable-content content",children:[p.jsxs("div",{className:"m-5 text-slate-950 dark:text-white",children:[p.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-5",children:[p.jsx("h1",{className:"text-3xl font-bold",children:t("latestNews")}),p.jsxs("div",{className:"relative hidden md:block",children:[p.jsx("div",{className:"absolute inset-y-0 start-0 flex items-center pl-2 pointer-events-none material-icons text-gray-500 dark:text-gray-400",children:"search"}),p.jsx("input",{type:"text",onChange:r,className:"pl-9 w-full p-2 text-sm text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:t("search")+"..."})]})]}),p.jsxs("div",{className:"rounded-lg grid gap-4 border-gray-300 dark:border-gray-600",children:[e.updatedTime?p.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-500 dark:text-gray-400",children:[t("lastUpdated")," ",e.updatedTime]}):null,p.jsx(Zue,{news:e.filterdData})]})]}),p.jsx(bl,{})]})}function tde(){const{t}=Qe();return p.jsxs("div",{className:"text-slate-950 dark:text-white content",children:[p.jsx(TU,{}),p.jsx("div",{className:"h-full w-full flex flex-col justify-center items-center ",children:p.jsxs("div",{className:"text-center absolute opacity-80",children:[p.jsx("h1",{className:"mb-5 text-6xl font-thin",children:t("welcomeTo")}),p.jsx("h1",{className:"mb-5 text-8xl font-bold",children:t("cryptoPulse")})]})}),p.jsx(bl,{})]})}const nde=t=>{const e=t.data,n=()=>p.jsxs("div",{className:"flex flex-col text-md font-semibold",children:[xn(e.amount)+" "+e.symbol.toUpperCase(),p.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"$ "+xn(e.amount*e.current_price)})]});function r(i){const s=i<0;i=s?i*-1:i;const o=s?"-":"+";return p.jsx("div",{className:`flex justify-end items-center font-semibold ${s?"text-red":"text-green"}`,children:p.jsx("div",{className:"ml-3",children:o+i.toFixed(3)+"%"})})}return p.jsxs("tr",{className:"border-b hover:bg-gray-200 dark:hover:bg-gray-900 font-semibold",children:[p.jsx("td",{className:"py-2 text-start",children:p.jsxs("div",{className:"flex justify-start h-full items-center",children:[p.jsx("img",{className:"w-6 h-6 mr-2",loading:"lazy",src:e.image,alt:e.name+" Logo"}),p.jsxs("div",{className:"flex flex-col justify-center items-start",children:[e.symbol.toUpperCase(),p.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:e.name})]})]})}),p.jsx("td",{className:"py-2 text-end",children:n()}),p.jsx("td",{className:"py-2 md:table-cell hidden text-end",children:"$ "+xn(e.current_price)}),p.jsx("td",{className:"py-2 md:table-cell hidden text-end",children:r(e.price_change_percentage_24h_in_currency)})]})},rde=t=>{const{t:e}=Qe(),n=3,[r,i]=S.useState([...t.data]),[s,o]=S.useState([...t.data].slice(0,n)),[a,l]=S.useState({field:"",asc:null}),[c,u]=S.useState(1);S.useEffect(()=>{i([...t.data]),o([...t.data].slice(0,n))},[t.data]),S.useEffect(()=>{g()},[r,c]);const d=()=>Math.ceil(r.length/n)||1;function h(v){if(a.field===v){if(a.asc===!1){i([...t.data].sort((_,y)=>typeof _[v]=="number"?y[v]-_[v]:(""+y[v]).localeCompare(_[v]))),l({field:v,asc:!0});return}i([...t.data]),l({field:"",asc:null});return}i([...t.data].sort((_,y)=>typeof _[v]=="number"?_[v]-y[v]:(""+_[v]).localeCompare(y[v]))),l({field:v,asc:!1})}const f=(v,_)=>p.jsxs("div",{className:"flex justify-end items-center",children:[e(_),m(v)?p.jsx("i",{className:"material-icons",children:a.asc?"expand_less":"expand_more"}):null]});function g(){o([...r].slice((c-1)*n,c*n))}function m(v){return a.field===v}return p.jsxs("div",{className:"w-full",children:[p.jsxs("table",{className:"w-full",children:[p.jsx("thead",{className:"w-full",children:p.jsxs("tr",{className:"bg-white dark:bg-gray-800 border-b",children:[p.jsx("th",{className:"text-start",children:e("coin")}),p.jsx("th",{onClick:()=>h("amount"),className:"text-end ",children:f("amount","amount")}),p.jsx("th",{onClick:()=>h("current_price"),className:"md:table-cell hidden text-end",children:f("current_price","coinPrice")}),p.jsx("th",{onClick:()=>h("price_change_percentage_24h_in_currency"),className:"md:table-cell hidden text-end",children:f("price_change_percentage_24h_in_currency","today'sPnL")})]})}),p.jsx("tbody",{children:s.map(v=>p.jsx(nde,{data:v,header:!1},v.id))})]}),p.jsx("div",{className:`${s.length===0?"":"hidden"} h-20`,children:p.jsx(ku,{})}),p.jsx(Ru,{totalPageNumber:d,currentPage:c,setCurrentPage:u})]})};function ide(){const{t}=Qe(),{currentUser:e,currentUserData:n}=Ns(),r=qf($o),[i,s]=S.useState([]),[o,a]=S.useState([]),[l,c]=S.useState(!1),[u,d]=S.useState("BTC");S.useEffect(()=>(document.title=t("dashboard")+" | "+t("cryptoPulse"),()=>{document.title=t("cryptoPulse")}),[]),S.useEffect(()=>{if(!n||r.data.length===0)return;const m=n.wallet.map(v=>{const _=r.data.find(y=>y.id===v.id);return{...v,..._}});s(m)},[r.data]),S.useEffect(()=>{if(!n.email)return;const v=n.transactions.filter(_=>_.transactionType!=="trade").sort((_,y)=>mi(_.timestamp)-mi(y.timestamp)).map(_=>_.accountBalance);console.log(v),a(v)},[n]);function h(){navigator.clipboard.writeText(e.uid).then(()=>{const m=document.getElementById("tooltip");m.style.visibility="visible",setTimeout(()=>{m.style.visibility="hidden"},1500)}).catch(m=>{console.error("Error in copying text: ",m)})}function f(){let m=0;if(i.forEach(_=>{m+=parseFloat(_.amount)*_.current_price}),u.toLowerCase()==="usd")return xn(m,10);const v=r.data.find(_=>_.symbol.toLowerCase()===u.toLowerCase());return v&&(m=m/v.current_price),xn(m,10)}function g(){let m=0;return i.forEach(v=>{m+=parseFloat(v.amount)*v.current_price}),xn(m,10)}return p.jsxs("div",{className:"scrollable-content content",children:[p.jsxs("div",{className:"m-2 md:m-5 text-slate-950 dark:text-white flex flex-col items-center gap-5 md:gap-10 ",children:[p.jsxs("div",{className:"flex divide-x gap-5 w-full md:w-[70%]",children:[p.jsxs("div",{className:"flex justify-center items-center",children:[p.jsx("i",{className:"material-icons",style:{fontSize:"100px"},children:"account_circle"}),p.jsx("h1",{className:"text-3xl font-bold ml-2",children:n.displayName})]}),p.jsxs("div",{className:"hidden md:flex justify-center items-center pl-5 gap-10",children:[p.jsxs("div",{className:"w-full",children:[p.jsx("h5",{className:"font-semibold text-gray-400",children:t("userID")}),p.jsxs("div",{className:"flex justify-center items-center gap-2",children:[n.uid,p.jsxs("div",{className:"relative inline-block",children:[p.jsx("button",{id:"copyButton",onClick:h,className:"material-icons text-sm text-gray-500 dark:text-gray-300 hover:text-gray-700 dark:hover:text-gray-400",children:"content_copy"}),p.jsx("div",{id:"tooltip",className:"tooltip bg-gray-200 dark:bg-gray-600 font-medium text-sm",children:t("userIDcopied")})]})]})]}),p.jsxs("div",{className:"w-full",children:[p.jsx("h5",{className:"font-semibold text-gray-400",children:t("mail")}),p.jsx("p",{children:n.email})]}),p.jsxs("div",{className:"w-full",children:[p.jsx("h5",{className:"font-semibold text-gray-400",children:t("phone")}),p.jsx("p",{children:n.phone})]})]})]}),p.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center md:items-start md:border w-full md:w-[70%] dark:border-gray-500 md:rounded-lg p-2 md:p-5",children:[p.jsxs("div",{className:"flex flex-col w-full",children:[p.jsx("h2",{className:"mb-5 text-xl font-bold",children:t("estimatedBalance")}),p.jsxs("div",{className:"mb-5 flex items-end",children:[p.jsx("h2",{className:"text-3xl font-bold me-3",children:f()}),p.jsxs("div",{className:"relative inline-block",children:[p.jsxs("button",{onClick:()=>c(!l),className:"flex items-center",children:[u,p.jsx("i",{className:"material-icons text-sm text-gray-500 dark:text-gray-300",children:"expand_more"})]}),l&&p.jsxs("div",{className:"z-50 w-32 my-4 py-2 font-medium text-base list-none bg-white rounded-lg shadow dark:bg-gray-700 absolute origin-top left-0 mt-2",children:[p.jsx("button",{type:"button",onClick:()=>{d("BTC"),c(!1)},className:`p-2 flex justify-start items-center hover:bg-gray-100 dark:hover:bg-gray-600 ${u==="BTC"?"text-teal-500 dark:text-custom-teal":"text-black dark:text-white"}`,style:{width:"-webkit-fill-available"},children:"BTC"}),p.jsx("button",{type:"button",onClick:()=>{d("ETH"),c(!1)},className:`p-2 flex justify-start items-center hover:bg-gray-100 dark:hover:bg-gray-600 ${u==="ETH"?"text-custom-teal dark:text-custom-teal":"text-black dark:text-white"}`,style:{width:"-webkit-fill-available"},children:"ETH"}),p.jsx("button",{type:"button",onClick:()=>{d("USD"),c(!1)},className:`p-2 flex justify-start items-center hover:bg-gray-100 dark:hover:bg-gray-600 ${u==="USD"?"text-custom-teal dark:text-custom-teal":"text-black dark:text-white"}`,style:{width:"-webkit-fill-available"},children:"USD"})]})]})]}),p.jsx("h2",{className:"mb-5 text-md",children:"≈ $"+g()})]}),p.jsxs("div",{className:"flex flex-col",children:[p.jsxs("div",{className:"flex justify-between font-semibold mb-2 gap-3",children:[p.jsx("button",{onClick:()=>Hn("/home/dashboard/withdraw"),className:"bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 w-full py-2 px-4 rounded-lg",children:t("withdraw")}),p.jsx("button",{onClick:()=>Hn("/home/dashboard/cashin"),className:"bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 w-full py-2 px-4 rounded-lg",children:t("cashIn")})]}),p.jsx(SB,{data:o,width:400,height:100})]})]}),p.jsxs("div",{className:"flex flex-col justify-between items-start w-full md:w-[70%] md:border dark:border-gray-500 md:rounded-lg p-2 md:p-5 ",children:[p.jsx("h2",{className:"mb-5 text-xl font-bold",children:t("holding")}),p.jsx(rde,{data:i})]})]}),p.jsx(bl,{})]})}function tl(t){"@babel/helpers - typeof";return tl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tl(t)}function sde(t,e){if(tl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(tl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function EB(t){var e=sde(t,"string");return tl(e)=="symbol"?e:e+""}function jd(t,e,n){return e=EB(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ge(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?dN(Object(n),!0).forEach(function(r){jd(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dN(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ode(t){if(Array.isArray(t))return t}function ade(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,o,a=[],l=!0,c=!1;try{if(s=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return a}}function dS(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function TB(t,e){if(t){if(typeof t=="string")return dS(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dS(t,e)}}function lde(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fs(t,e){return ode(t)||ade(t,e)||TB(t,e)||lde()}function cde(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function Os(t,e){if(t==null)return{};var n=cde(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}var ude=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function dde(t){var e=t.defaultInputValue,n=e===void 0?"":e,r=t.defaultMenuIsOpen,i=r===void 0?!1:r,s=t.defaultValue,o=s===void 0?null:s,a=t.inputValue,l=t.menuIsOpen,c=t.onChange,u=t.onInputChange,d=t.onMenuClose,h=t.onMenuOpen,f=t.value,g=Os(t,ude),m=S.useState(a!==void 0?a:n),v=fs(m,2),_=v[0],y=v[1],w=S.useState(l!==void 0?l:i),b=fs(w,2),x=b[0],T=b[1],I=S.useState(f!==void 0?f:o),E=fs(I,2),k=E[0],D=E[1],F=S.useCallback(function(M,U){typeof c=="function"&&c(M,U),D(M)},[c]),K=S.useCallback(function(M,U){var j;typeof u=="function"&&(j=u(M,U)),y(j!==void 0?j:M)},[u]),X=S.useCallback(function(){typeof h=="function"&&h(),T(!0)},[h]),le=S.useCallback(function(){typeof d=="function"&&d(),T(!1)},[d]),C=a!==void 0?a:_,R=l!==void 0?l:x,V=f!==void 0?f:k;return ge(ge({},g),{},{inputValue:C,menuIsOpen:R,onChange:F,onInputChange:K,onMenuClose:le,onMenuOpen:X,value:V})}function ye(){return ye=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ye.apply(this,arguments)}function IB(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function hN(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,EB(r.key),r)}}function CB(t,e,n){return e&&hN(t.prototype,e),n&&hN(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function hS(t,e){return hS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},hS(t,e)}function hde(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hS(t,e)}function Ay(t){return Ay=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ay(t)}function RB(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(RB=function(){return!!t})()}function fde(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function pde(t,e){if(e&&(tl(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fde(t)}function gde(t){var e=RB();return function(){var r=Ay(t),i;if(e){var s=Ay(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return pde(this,i)}}function mde(t){if(Array.isArray(t))return dS(t)}function yde(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function _de(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function g1(t){return mde(t)||yde(t)||TB(t)||_de()}function vde(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}function wde(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),t.nonce!==void 0&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var bde=function(){function t(n){var r=this;this._insertTag=function(i){var s;r.tags.length===0?r.insertionPoint?s=r.insertionPoint.nextSibling:r.prepend?s=r.container.firstChild:s=r.before:s=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(i,s),r.tags.push(i)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(r){r.forEach(this._insertTag)},e.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(wde(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var s=vde(i);try{s.insertRule(r,s.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(r));this.ctr++},e.flush=function(){this.tags.forEach(function(r){return r.parentNode&&r.parentNode.removeChild(r)}),this.tags=[],this.ctr=0},t}(),Pn="-ms-",Py="-moz-",Be="-webkit-",kB="comm",m1="rule",y1="decl",xde="@import",AB="@keyframes",Sde="@layer",Ede=Math.abs,jv=String.fromCharCode,Tde=Object.assign;function Ide(t,e){return _n(t,0)^45?(((e<<2^_n(t,0))<<2^_n(t,1))<<2^_n(t,2))<<2^_n(t,3):0}function PB(t){return t.trim()}function Cde(t,e){return(t=e.exec(t))?t[0]:t}function ze(t,e,n){return t.replace(e,n)}function fS(t,e){return t.indexOf(e)}function _n(t,e){return t.charCodeAt(e)|0}function Ef(t,e,n){return t.slice(e,n)}function bi(t){return t.length}function _1(t){return t.length}function Tg(t,e){return e.push(t),t}function Rde(t,e){return t.map(e).join("")}var $v=1,iu=1,NB=0,mr=0,qt=0,Au="";function Uv(t,e,n,r,i,s,o){return{value:t,root:e,parent:n,type:r,props:i,children:s,line:$v,column:iu,length:o,return:""}}function ud(t,e){return Tde(Uv("",null,null,"",null,null,0),t,{length:-t.length},e)}function kde(){return qt}function Ade(){return qt=mr>0?_n(Au,--mr):0,iu--,qt===10&&(iu=1,$v--),qt}function Ir(){return qt=mr<NB?_n(Au,mr++):0,iu++,qt===10&&(iu=1,$v++),qt}function $i(){return _n(Au,mr)}function gm(){return mr}function Tp(t,e){return Ef(Au,t,e)}function Tf(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function DB(t){return $v=iu=1,NB=bi(Au=t),mr=0,[]}function OB(t){return Au="",t}function mm(t){return PB(Tp(mr-1,pS(t===91?t+2:t===40?t+1:t)))}function Pde(t){for(;(qt=$i())&&qt<33;)Ir();return Tf(t)>2||Tf(qt)>3?"":" "}function Nde(t,e){for(;--e&&Ir()&&!(qt<48||qt>102||qt>57&&qt<65||qt>70&&qt<97););return Tp(t,gm()+(e<6&&$i()==32&&Ir()==32))}function pS(t){for(;Ir();)switch(qt){case t:return mr;case 34:case 39:t!==34&&t!==39&&pS(qt);break;case 40:t===41&&pS(t);break;case 92:Ir();break}return mr}function Dde(t,e){for(;Ir()&&t+qt!==57;)if(t+qt===84&&$i()===47)break;return"/*"+Tp(e,mr-1)+"*"+jv(t===47?t:Ir())}function Ode(t){for(;!Tf($i());)Ir();return Tp(t,mr)}function Mde(t){return OB(ym("",null,null,null,[""],t=DB(t),0,[0],t))}function ym(t,e,n,r,i,s,o,a,l){for(var c=0,u=0,d=o,h=0,f=0,g=0,m=1,v=1,_=1,y=0,w="",b=i,x=s,T=r,I=w;v;)switch(g=y,y=Ir()){case 40:if(g!=108&&_n(I,d-1)==58){fS(I+=ze(mm(y),"&","&\f"),"&\f")!=-1&&(_=-1);break}case 34:case 39:case 91:I+=mm(y);break;case 9:case 10:case 13:case 32:I+=Pde(g);break;case 92:I+=Nde(gm()-1,7);continue;case 47:switch($i()){case 42:case 47:Tg(Lde(Dde(Ir(),gm()),e,n),l);break;default:I+="/"}break;case 123*m:a[c++]=bi(I)*_;case 125*m:case 59:case 0:switch(y){case 0:case 125:v=0;case 59+u:_==-1&&(I=ze(I,/\f/g,"")),f>0&&bi(I)-d&&Tg(f>32?pN(I+";",r,n,d-1):pN(ze(I," ","")+";",r,n,d-2),l);break;case 59:I+=";";default:if(Tg(T=fN(I,e,n,c,u,i,a,w,b=[],x=[],d),s),y===123)if(u===0)ym(I,e,T,T,b,s,d,a,x);else switch(h===99&&_n(I,3)===110?100:h){case 100:case 108:case 109:case 115:ym(t,T,T,r&&Tg(fN(t,T,T,0,0,i,a,w,i,b=[],d),x),i,x,d,a,r?b:x);break;default:ym(I,T,T,T,[""],x,0,a,x)}}c=u=f=0,m=_=1,w=I="",d=o;break;case 58:d=1+bi(I),f=g;default:if(m<1){if(y==123)--m;else if(y==125&&m++==0&&Ade()==125)continue}switch(I+=jv(y),y*m){case 38:_=u>0?1:(I+="\f",-1);break;case 44:a[c++]=(bi(I)-1)*_,_=1;break;case 64:$i()===45&&(I+=mm(Ir())),h=$i(),u=d=bi(w=I+=Ode(gm())),y++;break;case 45:g===45&&bi(I)==2&&(m=0)}}return s}function fN(t,e,n,r,i,s,o,a,l,c,u){for(var d=i-1,h=i===0?s:[""],f=_1(h),g=0,m=0,v=0;g<r;++g)for(var _=0,y=Ef(t,d+1,d=Ede(m=o[g])),w=t;_<f;++_)(w=PB(m>0?h[_]+" "+y:ze(y,/&\f/g,h[_])))&&(l[v++]=w);return Uv(t,e,n,i===0?m1:a,l,c,u)}function Lde(t,e,n){return Uv(t,e,n,kB,jv(kde()),Ef(t,2,-2),0)}function pN(t,e,n,r){return Uv(t,e,n,y1,Ef(t,0,r),Ef(t,r+1,-1),r)}function Sc(t,e){for(var n="",r=_1(t),i=0;i<r;i++)n+=e(t[i],i,t,e)||"";return n}function Vde(t,e,n,r){switch(t.type){case Sde:if(t.children.length)break;case xde:case y1:return t.return=t.return||t.value;case kB:return"";case AB:return t.return=t.value+"{"+Sc(t.children,r)+"}";case m1:t.value=t.props.join(",")}return bi(n=Sc(t.children,r))?t.return=t.value+"{"+n+"}":""}function Fde(t){var e=_1(t);return function(n,r,i,s){for(var o="",a=0;a<e;a++)o+=t[a](n,r,i,s)||"";return o}}function jde(t){return function(e){e.root||(e=e.return)&&t(e)}}function $de(t){var e=Object.create(null);return function(n){return e[n]===void 0&&(e[n]=t(n)),e[n]}}var Ude=function(e,n,r){for(var i=0,s=0;i=s,s=$i(),i===38&&s===12&&(n[r]=1),!Tf(s);)Ir();return Tp(e,mr)},Bde=function(e,n){var r=-1,i=44;do switch(Tf(i)){case 0:i===38&&$i()===12&&(n[r]=1),e[r]+=Ude(mr-1,n,r);break;case 2:e[r]+=mm(i);break;case 4:if(i===44){e[++r]=$i()===58?"&\f":"",n[r]=e[r].length;break}default:e[r]+=jv(i)}while(i=Ir());return e},zde=function(e,n){return OB(Bde(DB(e),n))},gN=new WeakMap,Wde=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var n=e.value,r=e.parent,i=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(e.props.length===1&&n.charCodeAt(0)!==58&&!gN.get(r))&&!i){gN.set(e,!0);for(var s=[],o=zde(n,s),a=r.props,l=0,c=0;l<o.length;l++)for(var u=0;u<a.length;u++,c++)e.props[c]=s[l]?o[l].replace(/&\f/g,a[u]):a[u]+" "+o[l]}}},Hde=function(e){if(e.type==="decl"){var n=e.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(e.return="",e.value="")}};function MB(t,e){switch(Ide(t,e)){case 5103:return Be+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Be+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return Be+t+Py+t+Pn+t+t;case 6828:case 4268:return Be+t+Pn+t+t;case 6165:return Be+t+Pn+"flex-"+t+t;case 5187:return Be+t+ze(t,/(\w+).+(:[^]+)/,Be+"box-$1$2"+Pn+"flex-$1$2")+t;case 5443:return Be+t+Pn+"flex-item-"+ze(t,/flex-|-self/,"")+t;case 4675:return Be+t+Pn+"flex-line-pack"+ze(t,/align-content|flex-|-self/,"")+t;case 5548:return Be+t+Pn+ze(t,"shrink","negative")+t;case 5292:return Be+t+Pn+ze(t,"basis","preferred-size")+t;case 6060:return Be+"box-"+ze(t,"-grow","")+Be+t+Pn+ze(t,"grow","positive")+t;case 4554:return Be+ze(t,/([^-])(transform)/g,"$1"+Be+"$2")+t;case 6187:return ze(ze(ze(t,/(zoom-|grab)/,Be+"$1"),/(image-set)/,Be+"$1"),t,"")+t;case 5495:case 3959:return ze(t,/(image-set\([^]*)/,Be+"$1$`$1");case 4968:return ze(ze(t,/(.+:)(flex-)?(.*)/,Be+"box-pack:$3"+Pn+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Be+t+t;case 4095:case 3583:case 4068:case 2532:return ze(t,/(.+)-inline(.+)/,Be+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(bi(t)-1-e>6)switch(_n(t,e+1)){case 109:if(_n(t,e+4)!==45)break;case 102:return ze(t,/(.+:)(.+)-([^]+)/,"$1"+Be+"$2-$3$1"+Py+(_n(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~fS(t,"stretch")?MB(ze(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(_n(t,e+1)!==115)break;case 6444:switch(_n(t,bi(t)-3-(~fS(t,"!important")&&10))){case 107:return ze(t,":",":"+Be)+t;case 101:return ze(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Be+(_n(t,14)===45?"inline-":"")+"box$3$1"+Be+"$2$3$1"+Pn+"$2box$3")+t}break;case 5936:switch(_n(t,e+11)){case 114:return Be+t+Pn+ze(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return Be+t+Pn+ze(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return Be+t+Pn+ze(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return Be+t+Pn+t+t}return t}var qde=function(e,n,r,i){if(e.length>-1&&!e.return)switch(e.type){case y1:e.return=MB(e.value,e.length);break;case AB:return Sc([ud(e,{value:ze(e.value,"@","@"+Be)})],i);case m1:if(e.length)return Rde(e.props,function(s){switch(Cde(s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Sc([ud(e,{props:[ze(s,/:(read-\w+)/,":"+Py+"$1")]})],i);case"::placeholder":return Sc([ud(e,{props:[ze(s,/:(plac\w+)/,":"+Be+"input-$1")]}),ud(e,{props:[ze(s,/:(plac\w+)/,":"+Py+"$1")]}),ud(e,{props:[ze(s,/:(plac\w+)/,Pn+"input-$1")]})],i)}return""})}},Gde=[qde],Kde=function(e){var n=e.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(m){var v=m.getAttribute("data-emotion");v.indexOf(" ")!==-1&&(document.head.appendChild(m),m.setAttribute("data-s",""))})}var i=e.stylisPlugins||Gde,s={},o,a=[];o=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(m){for(var v=m.getAttribute("data-emotion").split(" "),_=1;_<v.length;_++)s[v[_]]=!0;a.push(m)});var l,c=[Wde,Hde];{var u,d=[Vde,jde(function(m){u.insert(m)})],h=Fde(c.concat(i,d)),f=function(v){return Sc(Mde(v),h)};l=function(v,_,y,w){u=y,f(v?v+"{"+_.styles+"}":_.styles),w&&(g.inserted[_.name]=!0)}}var g={key:n,sheet:new bde({key:n,container:o,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:l};return g.sheet.hydrate(a),g},LB={exports:{}},Ye={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mn=typeof Symbol=="function"&&Symbol.for,v1=mn?Symbol.for("react.element"):60103,w1=mn?Symbol.for("react.portal"):60106,Bv=mn?Symbol.for("react.fragment"):60107,zv=mn?Symbol.for("react.strict_mode"):60108,Wv=mn?Symbol.for("react.profiler"):60114,Hv=mn?Symbol.for("react.provider"):60109,qv=mn?Symbol.for("react.context"):60110,b1=mn?Symbol.for("react.async_mode"):60111,Gv=mn?Symbol.for("react.concurrent_mode"):60111,Kv=mn?Symbol.for("react.forward_ref"):60112,Qv=mn?Symbol.for("react.suspense"):60113,Qde=mn?Symbol.for("react.suspense_list"):60120,Yv=mn?Symbol.for("react.memo"):60115,Xv=mn?Symbol.for("react.lazy"):60116,Yde=mn?Symbol.for("react.block"):60121,Xde=mn?Symbol.for("react.fundamental"):60117,Jde=mn?Symbol.for("react.responder"):60118,Zde=mn?Symbol.for("react.scope"):60119;function Dr(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case v1:switch(t=t.type,t){case b1:case Gv:case Bv:case Wv:case zv:case Qv:return t;default:switch(t=t&&t.$$typeof,t){case qv:case Kv:case Xv:case Yv:case Hv:return t;default:return e}}case w1:return e}}}function VB(t){return Dr(t)===Gv}Ye.AsyncMode=b1;Ye.ConcurrentMode=Gv;Ye.ContextConsumer=qv;Ye.ContextProvider=Hv;Ye.Element=v1;Ye.ForwardRef=Kv;Ye.Fragment=Bv;Ye.Lazy=Xv;Ye.Memo=Yv;Ye.Portal=w1;Ye.Profiler=Wv;Ye.StrictMode=zv;Ye.Suspense=Qv;Ye.isAsyncMode=function(t){return VB(t)||Dr(t)===b1};Ye.isConcurrentMode=VB;Ye.isContextConsumer=function(t){return Dr(t)===qv};Ye.isContextProvider=function(t){return Dr(t)===Hv};Ye.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===v1};Ye.isForwardRef=function(t){return Dr(t)===Kv};Ye.isFragment=function(t){return Dr(t)===Bv};Ye.isLazy=function(t){return Dr(t)===Xv};Ye.isMemo=function(t){return Dr(t)===Yv};Ye.isPortal=function(t){return Dr(t)===w1};Ye.isProfiler=function(t){return Dr(t)===Wv};Ye.isStrictMode=function(t){return Dr(t)===zv};Ye.isSuspense=function(t){return Dr(t)===Qv};Ye.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Bv||t===Gv||t===Wv||t===zv||t===Qv||t===Qde||typeof t=="object"&&t!==null&&(t.$$typeof===Xv||t.$$typeof===Yv||t.$$typeof===Hv||t.$$typeof===qv||t.$$typeof===Kv||t.$$typeof===Xde||t.$$typeof===Jde||t.$$typeof===Zde||t.$$typeof===Yde)};Ye.typeOf=Dr;LB.exports=Ye;var ehe=LB.exports,FB=ehe,the={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},nhe={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},jB={};jB[FB.ForwardRef]=the;jB[FB.Memo]=nhe;var rhe=!0;function ihe(t,e,n){var r="";return n.split(" ").forEach(function(i){t[i]!==void 0?e.push(t[i]+";"):r+=i+" "}),r}var $B=function(e,n,r){var i=e.key+"-"+n.name;(r===!1||rhe===!1)&&e.registered[i]===void 0&&(e.registered[i]=n.styles)},she=function(e,n,r){$B(e,n,r);var i=e.key+"-"+n.name;if(e.inserted[n.name]===void 0){var s=n;do e.insert(n===s?"."+i:"",s,e.sheet,!0),s=s.next;while(s!==void 0)}};function ohe(t){for(var e=0,n,r=0,i=t.length;i>=4;++r,i-=4)n=t.charCodeAt(r)&255|(t.charCodeAt(++r)&255)<<8|(t.charCodeAt(++r)&255)<<16|(t.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,e=(n&65535)*1540483477+((n>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(i){case 3:e^=(t.charCodeAt(r+2)&255)<<16;case 2:e^=(t.charCodeAt(r+1)&255)<<8;case 1:e^=t.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var ahe={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},lhe=/[A-Z]|^ms/g,che=/_EMO_([^_]+?)_([^]*?)_EMO_/g,UB=function(e){return e.charCodeAt(1)===45},mN=function(e){return e!=null&&typeof e!="boolean"},Ew=$de(function(t){return UB(t)?t:t.replace(lhe,"-$&").toLowerCase()}),yN=function(e,n){switch(e){case"animation":case"animationName":if(typeof n=="string")return n.replace(che,function(r,i,s){return xi={name:i,styles:s,next:xi},i})}return ahe[e]!==1&&!UB(e)&&typeof n=="number"&&n!==0?n+"px":n};function If(t,e,n){if(n==null)return"";if(n.__emotion_styles!==void 0)return n;switch(typeof n){case"boolean":return"";case"object":{if(n.anim===1)return xi={name:n.name,styles:n.styles,next:xi},n.name;if(n.styles!==void 0){var r=n.next;if(r!==void 0)for(;r!==void 0;)xi={name:r.name,styles:r.styles,next:xi},r=r.next;var i=n.styles+";";return i}return uhe(t,e,n)}case"function":{if(t!==void 0){var s=xi,o=n(t);return xi=s,If(t,e,o)}break}}if(e==null)return n;var a=e[n];return a!==void 0?a:n}function uhe(t,e,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=If(t,e,n[i])+";";else for(var s in n){var o=n[s];if(typeof o!="object")e!=null&&e[o]!==void 0?r+=s+"{"+e[o]+"}":mN(o)&&(r+=Ew(s)+":"+yN(s,o)+";");else if(Array.isArray(o)&&typeof o[0]=="string"&&(e==null||e[o[0]]===void 0))for(var a=0;a<o.length;a++)mN(o[a])&&(r+=Ew(s)+":"+yN(s,o[a])+";");else{var l=If(t,e,o);switch(s){case"animation":case"animationName":{r+=Ew(s)+":"+l+";";break}default:r+=s+"{"+l+"}"}}}return r}var _N=/label:\s*([^\s;\n{]+)\s*(;|$)/g,xi,BB=function(e,n,r){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var i=!0,s="";xi=void 0;var o=e[0];o==null||o.raw===void 0?(i=!1,s+=If(r,n,o)):s+=o[0];for(var a=1;a<e.length;a++)s+=If(r,n,e[a]),i&&(s+=o[a]);_N.lastIndex=0;for(var l="",c;(c=_N.exec(s))!==null;)l+="-"+c[1];var u=ohe(s)+l;return{name:u,styles:s,next:xi}},dhe=function(e){return e()},hhe=Hw.useInsertionEffect?Hw.useInsertionEffect:!1,fhe=hhe||dhe,x1={}.hasOwnProperty,zB=S.createContext(typeof HTMLElement<"u"?Kde({key:"css"}):null);zB.Provider;var phe=function(e){return S.forwardRef(function(n,r){var i=S.useContext(zB);return e(n,i,r)})},ghe=S.createContext({}),gS="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",mhe=function(e,n){var r={};for(var i in n)x1.call(n,i)&&(r[i]=n[i]);return r[gS]=e,r},yhe=function(e){var n=e.cache,r=e.serialized,i=e.isStringTag;return $B(n,r,i),fhe(function(){return she(n,r,i)}),null},_he=phe(function(t,e,n){var r=t.css;typeof r=="string"&&e.registered[r]!==void 0&&(r=e.registered[r]);var i=t[gS],s=[r],o="";typeof t.className=="string"?o=ihe(e.registered,s,t.className):t.className!=null&&(o=t.className+" ");var a=BB(s,void 0,S.useContext(ghe));o+=e.key+"-"+a.name;var l={};for(var c in t)x1.call(t,c)&&c!=="css"&&c!==gS&&(l[c]=t[c]);return l.ref=n,l.className=o,S.createElement(S.Fragment,null,S.createElement(yhe,{cache:e,serialized:a,isStringTag:typeof i=="string"}),S.createElement(i,l))}),vhe=_he,pe=function(e,n){var r=arguments;if(n==null||!x1.call(n,"css"))return S.createElement.apply(void 0,r);var i=r.length,s=new Array(i);s[0]=vhe,s[1]=mhe(e,n);for(var o=2;o<i;o++)s[o]=r[o];return S.createElement.apply(null,s)};function S1(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return BB(e)}var whe=function(){var e=S1.apply(void 0,arguments),n="animation-"+e.name;return{name:n,styles:"@keyframes "+n+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}};function bhe(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}const xhe=Math.min,She=Math.max,Ny=Math.round,Ig=Math.floor,Dy=t=>({x:t,y:t});function Ehe(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}function WB(t){return qB(t)?(t.nodeName||"").toLowerCase():"#document"}function li(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function HB(t){var e;return(e=(qB(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function qB(t){return t instanceof Node||t instanceof li(t).Node}function mS(t){return t instanceof Element||t instanceof li(t).Element}function E1(t){return t instanceof HTMLElement||t instanceof li(t).HTMLElement}function vN(t){return typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof li(t).ShadowRoot}function GB(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=T1(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(i)}function The(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Ihe(t){return["html","body","#document"].includes(WB(t))}function T1(t){return li(t).getComputedStyle(t)}function Che(t){if(WB(t)==="html")return t;const e=t.assignedSlot||t.parentNode||vN(t)&&t.host||HB(t);return vN(e)?e.host:e}function KB(t){const e=Che(t);return Ihe(e)?t.ownerDocument?t.ownerDocument.body:t.body:E1(e)&&GB(e)?e:KB(e)}function Oy(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=KB(t),s=i===((r=t.ownerDocument)==null?void 0:r.body),o=li(i);return s?e.concat(o,o.visualViewport||[],GB(i)?i:[],o.frameElement&&n?Oy(o.frameElement):[]):e.concat(i,Oy(i,[],n))}function Rhe(t){const e=T1(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=E1(t),s=i?t.offsetWidth:n,o=i?t.offsetHeight:r,a=Ny(n)!==s||Ny(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function I1(t){return mS(t)?t:t.contextElement}function Tw(t){const e=I1(t);if(!E1(e))return Dy(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:s}=Rhe(e);let o=(s?Ny(n.width):n.width)/r,a=(s?Ny(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const khe=Dy(0);function Ahe(t){const e=li(t);return!The()||!e.visualViewport?khe:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Phe(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==li(t)?!1:e}function wN(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),s=I1(t);let o=Dy(1);e&&(r?mS(r)&&(o=Tw(r)):o=Tw(t));const a=Phe(s,n,r)?Ahe(s):Dy(0);let l=(i.left+a.x)/o.x,c=(i.top+a.y)/o.y,u=i.width/o.x,d=i.height/o.y;if(s){const h=li(s),f=r&&mS(r)?li(r):r;let g=h,m=g.frameElement;for(;m&&r&&f!==g;){const v=Tw(m),_=m.getBoundingClientRect(),y=T1(m),w=_.left+(m.clientLeft+parseFloat(y.paddingLeft))*v.x,b=_.top+(m.clientTop+parseFloat(y.paddingTop))*v.y;l*=v.x,c*=v.y,u*=v.x,d*=v.y,l+=w,c+=b,g=li(m),m=g.frameElement}}return Ehe({width:u,height:d,x:l,y:c})}function Nhe(t,e){let n=null,r;const i=HB(t);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const{left:c,top:u,width:d,height:h}=t.getBoundingClientRect();if(a||e(),!d||!h)return;const f=Ig(u),g=Ig(i.clientWidth-(c+d)),m=Ig(i.clientHeight-(u+h)),v=Ig(c),y={rootMargin:-f+"px "+-g+"px "+-m+"px "+-v+"px",threshold:She(0,xhe(1,l))||1};let w=!0;function b(x){const T=x[0].intersectionRatio;if(T!==l){if(!w)return o();T?o(!1,T):r=setTimeout(()=>{o(!1,1e-7)},100)}w=!1}try{n=new IntersectionObserver(b,{...y,root:i.ownerDocument})}catch{n=new IntersectionObserver(b,y)}n.observe(t)}return o(!0),s}function Dhe(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=I1(t),u=i||s?[...c?Oy(c):[],...Oy(e)]:[];u.forEach(_=>{i&&_.addEventListener("scroll",n,{passive:!0}),s&&_.addEventListener("resize",n)});const d=c&&a?Nhe(c,n):null;let h=-1,f=null;o&&(f=new ResizeObserver(_=>{let[y]=_;y&&y.target===c&&f&&(f.unobserve(e),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var w;(w=f)==null||w.observe(e)})),n()}),c&&!l&&f.observe(c),f.observe(e));let g,m=l?wN(t):null;l&&v();function v(){const _=wN(t);m&&(_.x!==m.x||_.y!==m.y||_.width!==m.width||_.height!==m.height)&&n(),m=_,g=requestAnimationFrame(v)}return n(),()=>{var _;u.forEach(y=>{i&&y.removeEventListener("scroll",n),s&&y.removeEventListener("resize",n)}),d==null||d(),(_=f)==null||_.disconnect(),f=null,l&&cancelAnimationFrame(g)}}var yS=S.useLayoutEffect,Ohe=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],My=function(){};function Mhe(t,e){return e?e[0]==="-"?t+e:t+"__"+e:t}function Lhe(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var s=[].concat(r);if(e&&t)for(var o in e)e.hasOwnProperty(o)&&e[o]&&s.push("".concat(Mhe(t,o)));return s.filter(function(a){return a}).map(function(a){return String(a).trim()}).join(" ")}var bN=function(e){return Hhe(e)?e.filter(Boolean):tl(e)==="object"&&e!==null?[e]:[]},QB=function(e){e.className,e.clearValue,e.cx,e.getStyles,e.getClassNames,e.getValue,e.hasValue,e.isMulti,e.isRtl,e.options,e.selectOption,e.selectProps,e.setValue,e.theme;var n=Os(e,Ohe);return ge({},n)},Dt=function(e,n,r){var i=e.cx,s=e.getStyles,o=e.getClassNames,a=e.className;return{css:s(n,e),className:i(r??{},o(n,e),a)}};function Jv(t){return[document.documentElement,document.body,window].indexOf(t)>-1}function Vhe(t){return Jv(t)?window.innerHeight:t.clientHeight}function YB(t){return Jv(t)?window.pageYOffset:t.scrollTop}function Ly(t,e){if(Jv(t)){window.scrollTo(0,e);return}t.scrollTop=e}function Fhe(t){var e=getComputedStyle(t),n=e.position==="absolute",r=/(auto|scroll)/;if(e.position==="fixed")return document.documentElement;for(var i=t;i=i.parentElement;)if(e=getComputedStyle(i),!(n&&e.position==="static")&&r.test(e.overflow+e.overflowY+e.overflowX))return i;return document.documentElement}function jhe(t,e,n,r){return n*((t=t/r-1)*t*t+1)+e}function Cg(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:My,i=YB(t),s=e-i,o=10,a=0;function l(){a+=o;var c=jhe(a,i,s,n);Ly(t,c),a<n?window.requestAnimationFrame(l):r(t)}l()}function xN(t,e){var n=t.getBoundingClientRect(),r=e.getBoundingClientRect(),i=e.offsetHeight/3;r.bottom+i>n.bottom?Ly(t,Math.min(e.offsetTop+e.clientHeight-t.offsetHeight+i,t.scrollHeight)):r.top-i<n.top&&Ly(t,Math.max(e.offsetTop-i,0))}function $he(t){var e=t.getBoundingClientRect();return{bottom:e.bottom,height:e.height,left:e.left,right:e.right,top:e.top,width:e.width}}function SN(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function Uhe(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var XB=!1,Bhe={get passive(){return XB=!0}},Rg=typeof window<"u"?window:{};Rg.addEventListener&&Rg.removeEventListener&&(Rg.addEventListener("p",My,Bhe),Rg.removeEventListener("p",My,!1));var zhe=XB;function Whe(t){return t!=null}function Hhe(t){return Array.isArray(t)}function kg(t,e,n){return t?e:n}var qhe=function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var s=Object.entries(e).filter(function(o){var a=fs(o,1),l=a[0];return!r.includes(l)});return s.reduce(function(o,a){var l=fs(a,2),c=l[0],u=l[1];return o[c]=u,o},{})},Ghe=["children","innerProps"],Khe=["children","innerProps"];function Qhe(t){var e=t.maxHeight,n=t.menuEl,r=t.minHeight,i=t.placement,s=t.shouldScroll,o=t.isFixedPosition,a=t.controlHeight,l=Fhe(n),c={placement:"bottom",maxHeight:e};if(!n||!n.offsetParent)return c;var u=l.getBoundingClientRect(),d=u.height,h=n.getBoundingClientRect(),f=h.bottom,g=h.height,m=h.top,v=n.offsetParent.getBoundingClientRect(),_=v.top,y=o?window.innerHeight:Vhe(l),w=YB(l),b=parseInt(getComputedStyle(n).marginBottom,10),x=parseInt(getComputedStyle(n).marginTop,10),T=_-x,I=y-m,E=T+w,k=d-w-m,D=f-y+w+b,F=w+m-x,K=160;switch(i){case"auto":case"bottom":if(I>=g)return{placement:"bottom",maxHeight:e};if(k>=g&&!o)return s&&Cg(l,D,K),{placement:"bottom",maxHeight:e};if(!o&&k>=r||o&&I>=r){s&&Cg(l,D,K);var X=o?I-b:k-b;return{placement:"bottom",maxHeight:X}}if(i==="auto"||o){var le=e,C=o?T:E;return C>=r&&(le=Math.min(C-b-a,e)),{placement:"top",maxHeight:le}}if(i==="bottom")return s&&Ly(l,D),{placement:"bottom",maxHeight:e};break;case"top":if(T>=g)return{placement:"top",maxHeight:e};if(E>=g&&!o)return s&&Cg(l,F,K),{placement:"top",maxHeight:e};if(!o&&E>=r||o&&T>=r){var R=e;return(!o&&E>=r||o&&T>=r)&&(R=o?T-x:E-x),s&&Cg(l,F,K),{placement:"top",maxHeight:R}}return{placement:"bottom",maxHeight:e};default:throw new Error('Invalid placement provided "'.concat(i,'".'))}return c}function Yhe(t){var e={bottom:"top",top:"bottom"};return t?e[t]:"bottom"}var JB=function(e){return e==="auto"?"bottom":e},Xhe=function(e,n){var r,i=e.placement,s=e.theme,o=s.borderRadius,a=s.spacing,l=s.colors;return ge((r={label:"menu"},jd(r,Yhe(i),"100%"),jd(r,"position","absolute"),jd(r,"width","100%"),jd(r,"zIndex",1),r),n?{}:{backgroundColor:l.neutral0,borderRadius:o,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:a.menuGutter,marginTop:a.menuGutter})},ZB=S.createContext(null),Jhe=function(e){var n=e.children,r=e.minMenuHeight,i=e.maxMenuHeight,s=e.menuPlacement,o=e.menuPosition,a=e.menuShouldScrollIntoView,l=e.theme,c=S.useContext(ZB)||{},u=c.setPortalPlacement,d=S.useRef(null),h=S.useState(i),f=fs(h,2),g=f[0],m=f[1],v=S.useState(null),_=fs(v,2),y=_[0],w=_[1],b=l.spacing.controlHeight;return yS(function(){var x=d.current;if(x){var T=o==="fixed",I=a&&!T,E=Qhe({maxHeight:i,menuEl:x,minHeight:r,placement:s,shouldScroll:I,isFixedPosition:T,controlHeight:b});m(E.maxHeight),w(E.placement),u==null||u(E.placement)}},[i,s,o,a,r,u,b]),n({ref:d,placerProps:ge(ge({},e),{},{placement:y||JB(s),maxHeight:g})})},Zhe=function(e){var n=e.children,r=e.innerRef,i=e.innerProps;return pe("div",ye({},Dt(e,"menu",{menu:!0}),{ref:r},i),n)},efe=Zhe,tfe=function(e,n){var r=e.maxHeight,i=e.theme.spacing.baseUnit;return ge({maxHeight:r,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},n?{}:{paddingBottom:i,paddingTop:i})},nfe=function(e){var n=e.children,r=e.innerProps,i=e.innerRef,s=e.isMulti;return pe("div",ye({},Dt(e,"menuList",{"menu-list":!0,"menu-list--is-multi":s}),{ref:i},r),n)},e5=function(e,n){var r=e.theme,i=r.spacing.baseUnit,s=r.colors;return ge({textAlign:"center"},n?{}:{color:s.neutral40,padding:"".concat(i*2,"px ").concat(i*3,"px")})},rfe=e5,ife=e5,sfe=function(e){var n=e.children,r=n===void 0?"No options":n,i=e.innerProps,s=Os(e,Ghe);return pe("div",ye({},Dt(ge(ge({},s),{},{children:r,innerProps:i}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),i),r)},ofe=function(e){var n=e.children,r=n===void 0?"Loading...":n,i=e.innerProps,s=Os(e,Khe);return pe("div",ye({},Dt(ge(ge({},s),{},{children:r,innerProps:i}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),i),r)},afe=function(e){var n=e.rect,r=e.offset,i=e.position;return{left:n.left,position:i,top:r,width:n.width,zIndex:1}},lfe=function(e){var n=e.appendTo,r=e.children,i=e.controlElement,s=e.innerProps,o=e.menuPlacement,a=e.menuPosition,l=S.useRef(null),c=S.useRef(null),u=S.useState(JB(o)),d=fs(u,2),h=d[0],f=d[1],g=S.useMemo(function(){return{setPortalPlacement:f}},[]),m=S.useState(null),v=fs(m,2),_=v[0],y=v[1],w=S.useCallback(function(){if(i){var I=$he(i),E=a==="fixed"?0:window.pageYOffset,k=I[h]+E;(k!==(_==null?void 0:_.offset)||I.left!==(_==null?void 0:_.rect.left)||I.width!==(_==null?void 0:_.rect.width))&&y({offset:k,rect:I})}},[i,a,h,_==null?void 0:_.offset,_==null?void 0:_.rect.left,_==null?void 0:_.rect.width]);yS(function(){w()},[w]);var b=S.useCallback(function(){typeof c.current=="function"&&(c.current(),c.current=null),i&&l.current&&(c.current=Dhe(i,l.current,w,{elementResize:"ResizeObserver"in window}))},[i,w]);yS(function(){b()},[b]);var x=S.useCallback(function(I){l.current=I,b()},[b]);if(!n&&a!=="fixed"||!_)return null;var T=pe("div",ye({ref:x},Dt(ge(ge({},e),{},{offset:_.offset,position:a,rect:_.rect}),"menuPortal",{"menu-portal":!0}),s),r);return pe(ZB.Provider,{value:g},n?NE.createPortal(T,n):T)},cfe=function(e){var n=e.isDisabled,r=e.isRtl;return{label:"container",direction:r?"rtl":void 0,pointerEvents:n?"none":void 0,position:"relative"}},ufe=function(e){var n=e.children,r=e.innerProps,i=e.isDisabled,s=e.isRtl;return pe("div",ye({},Dt(e,"container",{"--is-disabled":i,"--is-rtl":s}),r),n)},dfe=function(e,n){var r=e.theme.spacing,i=e.isMulti,s=e.hasValue,o=e.selectProps.controlShouldRenderValue;return ge({alignItems:"center",display:i&&s&&o?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},n?{}:{padding:"".concat(r.baseUnit/2,"px ").concat(r.baseUnit*2,"px")})},hfe=function(e){var n=e.children,r=e.innerProps,i=e.isMulti,s=e.hasValue;return pe("div",ye({},Dt(e,"valueContainer",{"value-container":!0,"value-container--is-multi":i,"value-container--has-value":s}),r),n)},ffe=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},pfe=function(e){var n=e.children,r=e.innerProps;return pe("div",ye({},Dt(e,"indicatorsContainer",{indicators:!0}),r),n)},EN,gfe=["size"],mfe=["innerProps","isRtl","size"],yfe={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},t5=function(e){var n=e.size,r=Os(e,gfe);return pe("svg",ye({height:n,width:n,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:yfe},r))},C1=function(e){return pe(t5,ye({size:20},e),pe("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},n5=function(e){return pe(t5,ye({size:20},e),pe("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},r5=function(e,n){var r=e.isFocused,i=e.theme,s=i.spacing.baseUnit,o=i.colors;return ge({label:"indicatorContainer",display:"flex",transition:"color 150ms"},n?{}:{color:r?o.neutral60:o.neutral20,padding:s*2,":hover":{color:r?o.neutral80:o.neutral40}})},_fe=r5,vfe=function(e){var n=e.children,r=e.innerProps;return pe("div",ye({},Dt(e,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),r),n||pe(n5,null))},wfe=r5,bfe=function(e){var n=e.children,r=e.innerProps;return pe("div",ye({},Dt(e,"clearIndicator",{indicator:!0,"clear-indicator":!0}),r),n||pe(C1,null))},xfe=function(e,n){var r=e.isDisabled,i=e.theme,s=i.spacing.baseUnit,o=i.colors;return ge({label:"indicatorSeparator",alignSelf:"stretch",width:1},n?{}:{backgroundColor:r?o.neutral10:o.neutral20,marginBottom:s*2,marginTop:s*2})},Sfe=function(e){var n=e.innerProps;return pe("span",ye({},n,Dt(e,"indicatorSeparator",{"indicator-separator":!0})))},Efe=whe(EN||(EN=bhe([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),Tfe=function(e,n){var r=e.isFocused,i=e.size,s=e.theme,o=s.colors,a=s.spacing.baseUnit;return ge({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:i,lineHeight:1,marginRight:i,textAlign:"center",verticalAlign:"middle"},n?{}:{color:r?o.neutral60:o.neutral20,padding:a*2})},Iw=function(e){var n=e.delay,r=e.offset;return pe("span",{css:S1({animation:"".concat(Efe," 1s ease-in-out ").concat(n,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:r?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},Ife=function(e){var n=e.innerProps,r=e.isRtl,i=e.size,s=i===void 0?4:i,o=Os(e,mfe);return pe("div",ye({},Dt(ge(ge({},o),{},{innerProps:n,isRtl:r,size:s}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),n),pe(Iw,{delay:0,offset:r}),pe(Iw,{delay:160,offset:!0}),pe(Iw,{delay:320,offset:!r}))},Cfe=function(e,n){var r=e.isDisabled,i=e.isFocused,s=e.theme,o=s.colors,a=s.borderRadius,l=s.spacing;return ge({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:l.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},n?{}:{backgroundColor:r?o.neutral5:o.neutral0,borderColor:r?o.neutral10:i?o.primary:o.neutral20,borderRadius:a,borderStyle:"solid",borderWidth:1,boxShadow:i?"0 0 0 1px ".concat(o.primary):void 0,"&:hover":{borderColor:i?o.primary:o.neutral30}})},Rfe=function(e){var n=e.children,r=e.isDisabled,i=e.isFocused,s=e.innerRef,o=e.innerProps,a=e.menuIsOpen;return pe("div",ye({ref:s},Dt(e,"control",{control:!0,"control--is-disabled":r,"control--is-focused":i,"control--menu-is-open":a}),o,{"aria-disabled":r||void 0}),n)},kfe=Rfe,Afe=["data"],Pfe=function(e,n){var r=e.theme.spacing;return n?{}:{paddingBottom:r.baseUnit*2,paddingTop:r.baseUnit*2}},Nfe=function(e){var n=e.children,r=e.cx,i=e.getStyles,s=e.getClassNames,o=e.Heading,a=e.headingProps,l=e.innerProps,c=e.label,u=e.theme,d=e.selectProps;return pe("div",ye({},Dt(e,"group",{group:!0}),l),pe(o,ye({},a,{selectProps:d,theme:u,getStyles:i,getClassNames:s,cx:r}),c),pe("div",null,n))},Dfe=function(e,n){var r=e.theme,i=r.colors,s=r.spacing;return ge({label:"group",cursor:"default",display:"block"},n?{}:{color:i.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:s.baseUnit*3,paddingRight:s.baseUnit*3,textTransform:"uppercase"})},Ofe=function(e){var n=QB(e);n.data;var r=Os(n,Afe);return pe("div",ye({},Dt(e,"groupHeading",{"group-heading":!0}),r))},Mfe=Nfe,Lfe=["innerRef","isDisabled","isHidden","inputClassName"],Vfe=function(e,n){var r=e.isDisabled,i=e.value,s=e.theme,o=s.spacing,a=s.colors;return ge(ge({visibility:r?"hidden":"visible",transform:i?"translateZ(0)":""},Ffe),n?{}:{margin:o.baseUnit/2,paddingBottom:o.baseUnit/2,paddingTop:o.baseUnit/2,color:a.neutral80})},i5={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},Ffe={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":ge({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},i5)},jfe=function(e){return ge({label:"input",color:"inherit",background:0,opacity:e?0:1,width:"100%"},i5)},$fe=function(e){var n=e.cx,r=e.value,i=QB(e),s=i.innerRef,o=i.isDisabled,a=i.isHidden,l=i.inputClassName,c=Os(i,Lfe);return pe("div",ye({},Dt(e,"input",{"input-container":!0}),{"data-value":r||""}),pe("input",ye({className:n({input:!0},l),ref:s,style:jfe(a),disabled:o},c)))},Ufe=$fe,Bfe=function(e,n){var r=e.theme,i=r.spacing,s=r.borderRadius,o=r.colors;return ge({label:"multiValue",display:"flex",minWidth:0},n?{}:{backgroundColor:o.neutral10,borderRadius:s/2,margin:i.baseUnit/2})},zfe=function(e,n){var r=e.theme,i=r.borderRadius,s=r.colors,o=e.cropWithEllipsis;return ge({overflow:"hidden",textOverflow:o||o===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},n?{}:{borderRadius:i/2,color:s.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},Wfe=function(e,n){var r=e.theme,i=r.spacing,s=r.borderRadius,o=r.colors,a=e.isFocused;return ge({alignItems:"center",display:"flex"},n?{}:{borderRadius:s/2,backgroundColor:a?o.dangerLight:void 0,paddingLeft:i.baseUnit,paddingRight:i.baseUnit,":hover":{backgroundColor:o.dangerLight,color:o.danger}})},s5=function(e){var n=e.children,r=e.innerProps;return pe("div",r,n)},Hfe=s5,qfe=s5;function Gfe(t){var e=t.children,n=t.innerProps;return pe("div",ye({role:"button"},n),e||pe(C1,{size:14}))}var Kfe=function(e){var n=e.children,r=e.components,i=e.data,s=e.innerProps,o=e.isDisabled,a=e.removeProps,l=e.selectProps,c=r.Container,u=r.Label,d=r.Remove;return pe(c,{data:i,innerProps:ge(ge({},Dt(e,"multiValue",{"multi-value":!0,"multi-value--is-disabled":o})),s),selectProps:l},pe(u,{data:i,innerProps:ge({},Dt(e,"multiValueLabel",{"multi-value__label":!0})),selectProps:l},n),pe(d,{data:i,innerProps:ge(ge({},Dt(e,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(n||"option")},a),selectProps:l}))},Qfe=Kfe,Yfe=function(e,n){var r=e.isDisabled,i=e.isFocused,s=e.isSelected,o=e.theme,a=o.spacing,l=o.colors;return ge({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},n?{}:{backgroundColor:s?l.primary:i?l.primary25:"transparent",color:r?l.neutral20:s?l.neutral0:"inherit",padding:"".concat(a.baseUnit*2,"px ").concat(a.baseUnit*3,"px"),":active":{backgroundColor:r?void 0:s?l.primary:l.primary50}})},Xfe=function(e){var n=e.children,r=e.isDisabled,i=e.isFocused,s=e.isSelected,o=e.innerRef,a=e.innerProps;return pe("div",ye({},Dt(e,"option",{option:!0,"option--is-disabled":r,"option--is-focused":i,"option--is-selected":s}),{ref:o,"aria-disabled":r},a),n)},Jfe=Xfe,Zfe=function(e,n){var r=e.theme,i=r.spacing,s=r.colors;return ge({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},n?{}:{color:s.neutral50,marginLeft:i.baseUnit/2,marginRight:i.baseUnit/2})},epe=function(e){var n=e.children,r=e.innerProps;return pe("div",ye({},Dt(e,"placeholder",{placeholder:!0}),r),n)},tpe=epe,npe=function(e,n){var r=e.isDisabled,i=e.theme,s=i.spacing,o=i.colors;return ge({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},n?{}:{color:r?o.neutral40:o.neutral80,marginLeft:s.baseUnit/2,marginRight:s.baseUnit/2})},rpe=function(e){var n=e.children,r=e.isDisabled,i=e.innerProps;return pe("div",ye({},Dt(e,"singleValue",{"single-value":!0,"single-value--is-disabled":r}),i),n)},ipe=rpe,spe={ClearIndicator:bfe,Control:kfe,DropdownIndicator:vfe,DownChevron:n5,CrossIcon:C1,Group:Mfe,GroupHeading:Ofe,IndicatorsContainer:pfe,IndicatorSeparator:Sfe,Input:Ufe,LoadingIndicator:Ife,Menu:efe,MenuList:nfe,MenuPortal:lfe,LoadingMessage:ofe,NoOptionsMessage:sfe,MultiValue:Qfe,MultiValueContainer:Hfe,MultiValueLabel:qfe,MultiValueRemove:Gfe,Option:Jfe,Placeholder:tpe,SelectContainer:ufe,SingleValue:ipe,ValueContainer:hfe},ope=function(e){return ge(ge({},spe),e.components)},TN=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function ape(t,e){return!!(t===e||TN(t)&&TN(e))}function lpe(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!ape(t[n],e[n]))return!1;return!0}function cpe(t,e){e===void 0&&(e=lpe);var n=null;function r(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];if(n&&n.lastThis===this&&e(i,n.lastArgs))return n.lastResult;var o=t.apply(this,i);return n={lastResult:o,lastArgs:i,lastThis:this},o}return r.clear=function(){n=null},r}var upe={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},dpe=function(e){return pe("span",ye({css:upe},e))},IN=dpe,hpe={guidance:function(e){var n=e.isSearchable,r=e.isMulti,i=e.tabSelectsValue,s=e.context,o=e.isInitialFocus;switch(s){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(i?", press Tab to select the option and exit the menu":"",".");case"input":return o?"".concat(e["aria-label"]||"Select"," is focused ").concat(n?",type to refine list":"",", press Down to open the menu, ").concat(r?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(e){var n=e.action,r=e.label,i=r===void 0?"":r,s=e.labels,o=e.isDisabled;switch(n){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(i,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(s.length>1?"s":""," ").concat(s.join(","),", selected.");case"select-option":return o?"option ".concat(i," is disabled. Select another option."):"option ".concat(i,", selected.");default:return""}},onFocus:function(e){var n=e.context,r=e.focused,i=e.options,s=e.label,o=s===void 0?"":s,a=e.selectValue,l=e.isDisabled,c=e.isSelected,u=e.isAppleDevice,d=function(m,v){return m&&m.length?"".concat(m.indexOf(v)+1," of ").concat(m.length):""};if(n==="value"&&a)return"value ".concat(o," focused, ").concat(d(a,r),".");if(n==="menu"&&u){var h=l?" disabled":"",f="".concat(c?" selected":"").concat(h);return"".concat(o).concat(f,", ").concat(d(i,r),".")}return""},onFilter:function(e){var n=e.inputValue,r=e.resultsMessage;return"".concat(r).concat(n?" for search term "+n:"",".")}},fpe=function(e){var n=e.ariaSelection,r=e.focusedOption,i=e.focusedValue,s=e.focusableOptions,o=e.isFocused,a=e.selectValue,l=e.selectProps,c=e.id,u=e.isAppleDevice,d=l.ariaLiveMessages,h=l.getOptionLabel,f=l.inputValue,g=l.isMulti,m=l.isOptionDisabled,v=l.isSearchable,_=l.menuIsOpen,y=l.options,w=l.screenReaderStatus,b=l.tabSelectsValue,x=l.isLoading,T=l["aria-label"],I=l["aria-live"],E=S.useMemo(function(){return ge(ge({},hpe),d||{})},[d]),k=S.useMemo(function(){var C="";if(n&&E.onChange){var R=n.option,V=n.options,M=n.removedValue,U=n.removedValues,j=n.value,ie=function(we){return Array.isArray(we)?null:we},A=M||R||ie(j),$=A?h(A):"",B=V||U||void 0,ce=B?B.map(h):[],Q=ge({isDisabled:A&&m(A,a),label:$,labels:ce},n);C=E.onChange(Q)}return C},[n,E,m,a,h]),D=S.useMemo(function(){var C="",R=r||i,V=!!(r&&a&&a.includes(r));if(R&&E.onFocus){var M={focused:R,label:h(R),isDisabled:m(R,a),isSelected:V,options:s,context:R===r?"menu":"value",selectValue:a,isAppleDevice:u};C=E.onFocus(M)}return C},[r,i,h,m,E,s,a,u]),F=S.useMemo(function(){var C="";if(_&&y.length&&!x&&E.onFilter){var R=w({count:s.length});C=E.onFilter({inputValue:f,resultsMessage:R})}return C},[s,f,_,E,y,w,x]),K=(n==null?void 0:n.action)==="initial-input-focus",X=S.useMemo(function(){var C="";if(E.guidance){var R=i?"value":_?"menu":"input";C=E.guidance({"aria-label":T,context:R,isDisabled:r&&m(r,a),isMulti:g,isSearchable:v,tabSelectsValue:b,isInitialFocus:K})}return C},[T,r,i,g,m,v,_,E,a,b,K]),le=pe(S.Fragment,null,pe("span",{id:"aria-selection"},k),pe("span",{id:"aria-focused"},D),pe("span",{id:"aria-results"},F),pe("span",{id:"aria-guidance"},X));return pe(S.Fragment,null,pe(IN,{id:c},K&&le),pe(IN,{"aria-live":I,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},o&&!K&&le))},ppe=fpe,_S=[{base:"A",letters:"AⒶＡÀÁÂẦẤẪẨÃĀĂẰẮẴẲȦǠÄǞẢÅǺǍȀȂẠẬẶḀĄȺⱯ"},{base:"AA",letters:"Ꜳ"},{base:"AE",letters:"ÆǼǢ"},{base:"AO",letters:"Ꜵ"},{base:"AU",letters:"Ꜷ"},{base:"AV",letters:"ꜸꜺ"},{base:"AY",letters:"Ꜽ"},{base:"B",letters:"BⒷＢḂḄḆɃƂƁ"},{base:"C",letters:"CⒸＣĆĈĊČÇḈƇȻꜾ"},{base:"D",letters:"DⒹＤḊĎḌḐḒḎĐƋƊƉꝹ"},{base:"DZ",letters:"ǱǄ"},{base:"Dz",letters:"ǲǅ"},{base:"E",letters:"EⒺＥÈÉÊỀẾỄỂẼĒḔḖĔĖËẺĚȄȆẸỆȨḜĘḘḚƐƎ"},{base:"F",letters:"FⒻＦḞƑꝻ"},{base:"G",letters:"GⒼＧǴĜḠĞĠǦĢǤƓꞠꝽꝾ"},{base:"H",letters:"HⒽＨĤḢḦȞḤḨḪĦⱧⱵꞍ"},{base:"I",letters:"IⒾＩÌÍÎĨĪĬİÏḮỈǏȈȊỊĮḬƗ"},{base:"J",letters:"JⒿＪĴɈ"},{base:"K",letters:"KⓀＫḰǨḲĶḴƘⱩꝀꝂꝄꞢ"},{base:"L",letters:"LⓁＬĿĹĽḶḸĻḼḺŁȽⱢⱠꝈꝆꞀ"},{base:"LJ",letters:"Ǉ"},{base:"Lj",letters:"ǈ"},{base:"M",letters:"MⓂＭḾṀṂⱮƜ"},{base:"N",letters:"NⓃＮǸŃÑṄŇṆŅṊṈȠƝꞐꞤ"},{base:"NJ",letters:"Ǌ"},{base:"Nj",letters:"ǋ"},{base:"O",letters:"OⓄＯÒÓÔỒỐỖỔÕṌȬṎŌṐṒŎȮȰÖȪỎŐǑȌȎƠỜỚỠỞỢỌỘǪǬØǾƆƟꝊꝌ"},{base:"OI",letters:"Ƣ"},{base:"OO",letters:"Ꝏ"},{base:"OU",letters:"Ȣ"},{base:"P",letters:"PⓅＰṔṖƤⱣꝐꝒꝔ"},{base:"Q",letters:"QⓆＱꝖꝘɊ"},{base:"R",letters:"RⓇＲŔṘŘȐȒṚṜŖṞɌⱤꝚꞦꞂ"},{base:"S",letters:"SⓈＳẞŚṤŜṠŠṦṢṨȘŞⱾꞨꞄ"},{base:"T",letters:"TⓉＴṪŤṬȚŢṰṮŦƬƮȾꞆ"},{base:"TZ",letters:"Ꜩ"},{base:"U",letters:"UⓊＵÙÚÛŨṸŪṺŬÜǛǗǕǙỦŮŰǓȔȖƯỪỨỮỬỰỤṲŲṶṴɄ"},{base:"V",letters:"VⓋＶṼṾƲꝞɅ"},{base:"VY",letters:"Ꝡ"},{base:"W",letters:"WⓌＷẀẂŴẆẄẈⱲ"},{base:"X",letters:"XⓍＸẊẌ"},{base:"Y",letters:"YⓎＹỲÝŶỸȲẎŸỶỴƳɎỾ"},{base:"Z",letters:"ZⓏＺŹẐŻŽẒẔƵȤⱿⱫꝢ"},{base:"a",letters:"aⓐａẚàáâầấẫẩãāăằắẵẳȧǡäǟảåǻǎȁȃạậặḁąⱥɐ"},{base:"aa",letters:"ꜳ"},{base:"ae",letters:"æǽǣ"},{base:"ao",letters:"ꜵ"},{base:"au",letters:"ꜷ"},{base:"av",letters:"ꜹꜻ"},{base:"ay",letters:"ꜽ"},{base:"b",letters:"bⓑｂḃḅḇƀƃɓ"},{base:"c",letters:"cⓒｃćĉċčçḉƈȼꜿↄ"},{base:"d",letters:"dⓓｄḋďḍḑḓḏđƌɖɗꝺ"},{base:"dz",letters:"ǳǆ"},{base:"e",letters:"eⓔｅèéêềếễểẽēḕḗĕėëẻěȅȇẹệȩḝęḙḛɇɛǝ"},{base:"f",letters:"fⓕｆḟƒꝼ"},{base:"g",letters:"gⓖｇǵĝḡğġǧģǥɠꞡᵹꝿ"},{base:"h",letters:"hⓗｈĥḣḧȟḥḩḫẖħⱨⱶɥ"},{base:"hv",letters:"ƕ"},{base:"i",letters:"iⓘｉìíîĩīĭïḯỉǐȉȋịįḭɨı"},{base:"j",letters:"jⓙｊĵǰɉ"},{base:"k",letters:"kⓚｋḱǩḳķḵƙⱪꝁꝃꝅꞣ"},{base:"l",letters:"lⓛｌŀĺľḷḹļḽḻſłƚɫⱡꝉꞁꝇ"},{base:"lj",letters:"ǉ"},{base:"m",letters:"mⓜｍḿṁṃɱɯ"},{base:"n",letters:"nⓝｎǹńñṅňṇņṋṉƞɲŉꞑꞥ"},{base:"nj",letters:"ǌ"},{base:"o",letters:"oⓞｏòóôồốỗổõṍȭṏōṑṓŏȯȱöȫỏőǒȍȏơờớỡởợọộǫǭøǿɔꝋꝍɵ"},{base:"oi",letters:"ƣ"},{base:"ou",letters:"ȣ"},{base:"oo",letters:"ꝏ"},{base:"p",letters:"pⓟｐṕṗƥᵽꝑꝓꝕ"},{base:"q",letters:"qⓠｑɋꝗꝙ"},{base:"r",letters:"rⓡｒŕṙřȑȓṛṝŗṟɍɽꝛꞧꞃ"},{base:"s",letters:"sⓢｓßśṥŝṡšṧṣṩșşȿꞩꞅẛ"},{base:"t",letters:"tⓣｔṫẗťṭțţṱṯŧƭʈⱦꞇ"},{base:"tz",letters:"ꜩ"},{base:"u",letters:"uⓤｕùúûũṹūṻŭüǜǘǖǚủůűǔȕȗưừứữửựụṳųṷṵʉ"},{base:"v",letters:"vⓥｖṽṿʋꝟʌ"},{base:"vy",letters:"ꝡ"},{base:"w",letters:"wⓦｗẁẃŵẇẅẘẉⱳ"},{base:"x",letters:"xⓧｘẋẍ"},{base:"y",letters:"yⓨｙỳýŷỹȳẏÿỷẙỵƴɏỿ"},{base:"z",letters:"zⓩｚźẑżžẓẕƶȥɀⱬꝣ"}],gpe=new RegExp("["+_S.map(function(t){return t.letters}).join("")+"]","g"),o5={};for(var Cw=0;Cw<_S.length;Cw++)for(var Rw=_S[Cw],kw=0;kw<Rw.letters.length;kw++)o5[Rw.letters[kw]]=Rw.base;var a5=function(e){return e.replace(gpe,function(n){return o5[n]})},mpe=cpe(a5),CN=function(e){return e.replace(/^\s+|\s+$/g,"")},ype=function(e){return"".concat(e.label," ").concat(e.value)},_pe=function(e){return function(n,r){if(n.data.__isNew__)return!0;var i=ge({ignoreCase:!0,ignoreAccents:!0,stringify:ype,trim:!0,matchFrom:"any"},e),s=i.ignoreCase,o=i.ignoreAccents,a=i.stringify,l=i.trim,c=i.matchFrom,u=l?CN(r):r,d=l?CN(a(n)):a(n);return s&&(u=u.toLowerCase(),d=d.toLowerCase()),o&&(u=mpe(u),d=a5(d)),c==="start"?d.substr(0,u.length)===u:d.indexOf(u)>-1}},vpe=["innerRef"];function wpe(t){var e=t.innerRef,n=Os(t,vpe),r=qhe(n,"onExited","in","enter","exit","appear");return pe("input",ye({ref:e},r,{css:S1({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var bpe=function(e){e.cancelable&&e.preventDefault(),e.stopPropagation()};function xpe(t){var e=t.isEnabled,n=t.onBottomArrive,r=t.onBottomLeave,i=t.onTopArrive,s=t.onTopLeave,o=S.useRef(!1),a=S.useRef(!1),l=S.useRef(0),c=S.useRef(null),u=S.useCallback(function(v,_){if(c.current!==null){var y=c.current,w=y.scrollTop,b=y.scrollHeight,x=y.clientHeight,T=c.current,I=_>0,E=b-x-w,k=!1;E>_&&o.current&&(r&&r(v),o.current=!1),I&&a.current&&(s&&s(v),a.current=!1),I&&_>E?(n&&!o.current&&n(v),T.scrollTop=b,k=!0,o.current=!0):!I&&-_>w&&(i&&!a.current&&i(v),T.scrollTop=0,k=!0,a.current=!0),k&&bpe(v)}},[n,r,i,s]),d=S.useCallback(function(v){u(v,v.deltaY)},[u]),h=S.useCallback(function(v){l.current=v.changedTouches[0].clientY},[]),f=S.useCallback(function(v){var _=l.current-v.changedTouches[0].clientY;u(v,_)},[u]),g=S.useCallback(function(v){if(v){var _=zhe?{passive:!1}:!1;v.addEventListener("wheel",d,_),v.addEventListener("touchstart",h,_),v.addEventListener("touchmove",f,_)}},[f,h,d]),m=S.useCallback(function(v){v&&(v.removeEventListener("wheel",d,!1),v.removeEventListener("touchstart",h,!1),v.removeEventListener("touchmove",f,!1))},[f,h,d]);return S.useEffect(function(){if(e){var v=c.current;return g(v),function(){m(v)}}},[e,g,m]),function(v){c.current=v}}var RN=["boxSizing","height","overflow","paddingRight","position"],kN={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function AN(t){t.preventDefault()}function PN(t){t.stopPropagation()}function NN(){var t=this.scrollTop,e=this.scrollHeight,n=t+this.offsetHeight;t===0?this.scrollTop=1:n===e&&(this.scrollTop=t-1)}function DN(){return"ontouchstart"in window||navigator.maxTouchPoints}var ON=!!(typeof window<"u"&&window.document&&window.document.createElement),dd=0,Ll={capture:!1,passive:!1};function Spe(t){var e=t.isEnabled,n=t.accountForScrollbars,r=n===void 0?!0:n,i=S.useRef({}),s=S.useRef(null),o=S.useCallback(function(l){if(ON){var c=document.body,u=c&&c.style;if(r&&RN.forEach(function(g){var m=u&&u[g];i.current[g]=m}),r&&dd<1){var d=parseInt(i.current.paddingRight,10)||0,h=document.body?document.body.clientWidth:0,f=window.innerWidth-h+d||0;Object.keys(kN).forEach(function(g){var m=kN[g];u&&(u[g]=m)}),u&&(u.paddingRight="".concat(f,"px"))}c&&DN()&&(c.addEventListener("touchmove",AN,Ll),l&&(l.addEventListener("touchstart",NN,Ll),l.addEventListener("touchmove",PN,Ll))),dd+=1}},[r]),a=S.useCallback(function(l){if(ON){var c=document.body,u=c&&c.style;dd=Math.max(dd-1,0),r&&dd<1&&RN.forEach(function(d){var h=i.current[d];u&&(u[d]=h)}),c&&DN()&&(c.removeEventListener("touchmove",AN,Ll),l&&(l.removeEventListener("touchstart",NN,Ll),l.removeEventListener("touchmove",PN,Ll)))}},[r]);return S.useEffect(function(){if(e){var l=s.current;return o(l),function(){a(l)}}},[e,o,a]),function(l){s.current=l}}var Epe=function(e){var n=e.target;return n.ownerDocument.activeElement&&n.ownerDocument.activeElement.blur()},Tpe={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function Ipe(t){var e=t.children,n=t.lockEnabled,r=t.captureEnabled,i=r===void 0?!0:r,s=t.onBottomArrive,o=t.onBottomLeave,a=t.onTopArrive,l=t.onTopLeave,c=xpe({isEnabled:i,onBottomArrive:s,onBottomLeave:o,onTopArrive:a,onTopLeave:l}),u=Spe({isEnabled:n}),d=function(f){c(f),u(f)};return pe(S.Fragment,null,n&&pe("div",{onClick:Epe,css:Tpe}),e(d))}var Cpe={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},Rpe=function(e){var n=e.name,r=e.onFocus;return pe("input",{required:!0,name:n,tabIndex:-1,"aria-hidden":"true",onFocus:r,css:Cpe,value:"",onChange:function(){}})},kpe=Rpe;function R1(t){var e;return typeof window<"u"&&window.navigator!=null?t.test(((e=window.navigator.userAgentData)===null||e===void 0?void 0:e.platform)||window.navigator.platform):!1}function Ape(){return R1(/^iPhone/i)}function l5(){return R1(/^Mac/i)}function Ppe(){return R1(/^iPad/i)||l5()&&navigator.maxTouchPoints>1}function Npe(){return Ape()||Ppe()}function Dpe(){return l5()||Npe()}var Ope=function(e){return e.label},Mpe=function(e){return e.label},Lpe=function(e){return e.value},Vpe=function(e){return!!e.isDisabled},Fpe={clearIndicator:wfe,container:cfe,control:Cfe,dropdownIndicator:_fe,group:Pfe,groupHeading:Dfe,indicatorsContainer:ffe,indicatorSeparator:xfe,input:Vfe,loadingIndicator:Tfe,loadingMessage:ife,menu:Xhe,menuList:tfe,menuPortal:afe,multiValue:Bfe,multiValueLabel:zfe,multiValueRemove:Wfe,noOptionsMessage:rfe,option:Yfe,placeholder:Zfe,singleValue:npe,valueContainer:dfe},jpe={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},$pe=4,c5=4,Upe=38,Bpe=c5*2,zpe={baseUnit:c5,controlHeight:Upe,menuGutter:Bpe},Aw={borderRadius:$pe,colors:jpe,spacing:zpe},Wpe={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:SN(),captureMenuScroll:!SN(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:_pe(),formatGroupLabel:Ope,getOptionLabel:Mpe,getOptionValue:Lpe,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:Vpe,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!Uhe(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(e){var n=e.count;return"".concat(n," result").concat(n!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function MN(t,e,n,r){var i=h5(t,e,n),s=f5(t,e,n),o=d5(t,e),a=Vy(t,e);return{type:"option",data:e,isDisabled:i,isSelected:s,label:o,value:a,index:r}}function _m(t,e){return t.options.map(function(n,r){if("options"in n){var i=n.options.map(function(o,a){return MN(t,o,e,a)}).filter(function(o){return VN(t,o)});return i.length>0?{type:"group",data:n,options:i,index:r}:void 0}var s=MN(t,n,e,r);return VN(t,s)?s:void 0}).filter(Whe)}function u5(t){return t.reduce(function(e,n){return n.type==="group"?e.push.apply(e,g1(n.options.map(function(r){return r.data}))):e.push(n.data),e},[])}function LN(t,e){return t.reduce(function(n,r){return r.type==="group"?n.push.apply(n,g1(r.options.map(function(i){return{data:i.data,id:"".concat(e,"-").concat(r.index,"-").concat(i.index)}}))):n.push({data:r.data,id:"".concat(e,"-").concat(r.index)}),n},[])}function Hpe(t,e){return u5(_m(t,e))}function VN(t,e){var n=t.inputValue,r=n===void 0?"":n,i=e.data,s=e.isSelected,o=e.label,a=e.value;return(!g5(t)||!s)&&p5(t,{label:o,value:a,data:i},r)}function qpe(t,e){var n=t.focusedValue,r=t.selectValue,i=r.indexOf(n);if(i>-1){var s=e.indexOf(n);if(s>-1)return n;if(i<e.length)return e[i]}return null}function Gpe(t,e){var n=t.focusedOption;return n&&e.indexOf(n)>-1?n:e[0]}var Pw=function(e,n){var r,i=(r=e.find(function(s){return s.data===n}))===null||r===void 0?void 0:r.id;return i||null},d5=function(e,n){return e.getOptionLabel(n)},Vy=function(e,n){return e.getOptionValue(n)};function h5(t,e,n){return typeof t.isOptionDisabled=="function"?t.isOptionDisabled(e,n):!1}function f5(t,e,n){if(n.indexOf(e)>-1)return!0;if(typeof t.isOptionSelected=="function")return t.isOptionSelected(e,n);var r=Vy(t,e);return n.some(function(i){return Vy(t,i)===r})}function p5(t,e,n){return t.filterOption?t.filterOption(e,n):!0}var g5=function(e){var n=e.hideSelectedOptions,r=e.isMulti;return n===void 0?r:n},Kpe=1,m5=function(t){hde(n,t);var e=gde(n);function n(r){var i;if(IB(this,n),i=e.call(this,r),i.state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:""},i.blockOptionHover=!1,i.isComposing=!1,i.commonProps=void 0,i.initialTouchX=0,i.initialTouchY=0,i.openAfterFocus=!1,i.scrollToFocusedOptionOnUpdate=!1,i.userIsDragging=void 0,i.isAppleDevice=Dpe(),i.controlRef=null,i.getControlRef=function(l){i.controlRef=l},i.focusedOptionRef=null,i.getFocusedOptionRef=function(l){i.focusedOptionRef=l},i.menuListRef=null,i.getMenuListRef=function(l){i.menuListRef=l},i.inputRef=null,i.getInputRef=function(l){i.inputRef=l},i.focus=i.focusInput,i.blur=i.blurInput,i.onChange=function(l,c){var u=i.props,d=u.onChange,h=u.name;c.name=h,i.ariaOnChange(l,c),d(l,c)},i.setValue=function(l,c,u){var d=i.props,h=d.closeMenuOnSelect,f=d.isMulti,g=d.inputValue;i.onInputChange("",{action:"set-value",prevInputValue:g}),h&&(i.setState({inputIsHiddenAfterUpdate:!f}),i.onMenuClose()),i.setState({clearFocusValueOnUpdate:!0}),i.onChange(l,{action:c,option:u})},i.selectOption=function(l){var c=i.props,u=c.blurInputOnSelect,d=c.isMulti,h=c.name,f=i.state.selectValue,g=d&&i.isOptionSelected(l,f),m=i.isOptionDisabled(l,f);if(g){var v=i.getOptionValue(l);i.setValue(f.filter(function(_){return i.getOptionValue(_)!==v}),"deselect-option",l)}else if(!m)d?i.setValue([].concat(g1(f),[l]),"select-option",l):i.setValue(l,"select-option");else{i.ariaOnChange(l,{action:"select-option",option:l,name:h});return}u&&i.blurInput()},i.removeValue=function(l){var c=i.props.isMulti,u=i.state.selectValue,d=i.getOptionValue(l),h=u.filter(function(g){return i.getOptionValue(g)!==d}),f=kg(c,h,h[0]||null);i.onChange(f,{action:"remove-value",removedValue:l}),i.focusInput()},i.clearValue=function(){var l=i.state.selectValue;i.onChange(kg(i.props.isMulti,[],null),{action:"clear",removedValues:l})},i.popValue=function(){var l=i.props.isMulti,c=i.state.selectValue,u=c[c.length-1],d=c.slice(0,c.length-1),h=kg(l,d,d[0]||null);i.onChange(h,{action:"pop-value",removedValue:u})},i.getFocusedOptionId=function(l){return Pw(i.state.focusableOptionsWithIds,l)},i.getFocusableOptionsWithIds=function(){return LN(_m(i.props,i.state.selectValue),i.getElementId("option"))},i.getValue=function(){return i.state.selectValue},i.cx=function(){for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];return Lhe.apply(void 0,[i.props.classNamePrefix].concat(c))},i.getOptionLabel=function(l){return d5(i.props,l)},i.getOptionValue=function(l){return Vy(i.props,l)},i.getStyles=function(l,c){var u=i.props.unstyled,d=Fpe[l](c,u);d.boxSizing="border-box";var h=i.props.styles[l];return h?h(d,c):d},i.getClassNames=function(l,c){var u,d;return(u=(d=i.props.classNames)[l])===null||u===void 0?void 0:u.call(d,c)},i.getElementId=function(l){return"".concat(i.state.instancePrefix,"-").concat(l)},i.getComponents=function(){return ope(i.props)},i.buildCategorizedOptions=function(){return _m(i.props,i.state.selectValue)},i.getCategorizedOptions=function(){return i.props.menuIsOpen?i.buildCategorizedOptions():[]},i.buildFocusableOptions=function(){return u5(i.buildCategorizedOptions())},i.getFocusableOptions=function(){return i.props.menuIsOpen?i.buildFocusableOptions():[]},i.ariaOnChange=function(l,c){i.setState({ariaSelection:ge({value:l},c)})},i.onMenuMouseDown=function(l){l.button===0&&(l.stopPropagation(),l.preventDefault(),i.focusInput())},i.onMenuMouseMove=function(l){i.blockOptionHover=!1},i.onControlMouseDown=function(l){if(!l.defaultPrevented){var c=i.props.openMenuOnClick;i.state.isFocused?i.props.menuIsOpen?l.target.tagName!=="INPUT"&&l.target.tagName!=="TEXTAREA"&&i.onMenuClose():c&&i.openMenu("first"):(c&&(i.openAfterFocus=!0),i.focusInput()),l.target.tagName!=="INPUT"&&l.target.tagName!=="TEXTAREA"&&l.preventDefault()}},i.onDropdownIndicatorMouseDown=function(l){if(!(l&&l.type==="mousedown"&&l.button!==0)&&!i.props.isDisabled){var c=i.props,u=c.isMulti,d=c.menuIsOpen;i.focusInput(),d?(i.setState({inputIsHiddenAfterUpdate:!u}),i.onMenuClose()):i.openMenu("first"),l.preventDefault()}},i.onClearIndicatorMouseDown=function(l){l&&l.type==="mousedown"&&l.button!==0||(i.clearValue(),l.preventDefault(),i.openAfterFocus=!1,l.type==="touchend"?i.focusInput():setTimeout(function(){return i.focusInput()}))},i.onScroll=function(l){typeof i.props.closeMenuOnScroll=="boolean"?l.target instanceof HTMLElement&&Jv(l.target)&&i.props.onMenuClose():typeof i.props.closeMenuOnScroll=="function"&&i.props.closeMenuOnScroll(l)&&i.props.onMenuClose()},i.onCompositionStart=function(){i.isComposing=!0},i.onCompositionEnd=function(){i.isComposing=!1},i.onTouchStart=function(l){var c=l.touches,u=c&&c.item(0);u&&(i.initialTouchX=u.clientX,i.initialTouchY=u.clientY,i.userIsDragging=!1)},i.onTouchMove=function(l){var c=l.touches,u=c&&c.item(0);if(u){var d=Math.abs(u.clientX-i.initialTouchX),h=Math.abs(u.clientY-i.initialTouchY),f=5;i.userIsDragging=d>f||h>f}},i.onTouchEnd=function(l){i.userIsDragging||(i.controlRef&&!i.controlRef.contains(l.target)&&i.menuListRef&&!i.menuListRef.contains(l.target)&&i.blurInput(),i.initialTouchX=0,i.initialTouchY=0)},i.onControlTouchEnd=function(l){i.userIsDragging||i.onControlMouseDown(l)},i.onClearIndicatorTouchEnd=function(l){i.userIsDragging||i.onClearIndicatorMouseDown(l)},i.onDropdownIndicatorTouchEnd=function(l){i.userIsDragging||i.onDropdownIndicatorMouseDown(l)},i.handleInputChange=function(l){var c=i.props.inputValue,u=l.currentTarget.value;i.setState({inputIsHiddenAfterUpdate:!1}),i.onInputChange(u,{action:"input-change",prevInputValue:c}),i.props.menuIsOpen||i.onMenuOpen()},i.onInputFocus=function(l){i.props.onFocus&&i.props.onFocus(l),i.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(i.openAfterFocus||i.props.openMenuOnFocus)&&i.openMenu("first"),i.openAfterFocus=!1},i.onInputBlur=function(l){var c=i.props.inputValue;if(i.menuListRef&&i.menuListRef.contains(document.activeElement)){i.inputRef.focus();return}i.props.onBlur&&i.props.onBlur(l),i.onInputChange("",{action:"input-blur",prevInputValue:c}),i.onMenuClose(),i.setState({focusedValue:null,isFocused:!1})},i.onOptionHover=function(l){if(!(i.blockOptionHover||i.state.focusedOption===l)){var c=i.getFocusableOptions(),u=c.indexOf(l);i.setState({focusedOption:l,focusedOptionId:u>-1?i.getFocusedOptionId(l):null})}},i.shouldHideSelectedOptions=function(){return g5(i.props)},i.onValueInputFocus=function(l){l.preventDefault(),l.stopPropagation(),i.focus()},i.onKeyDown=function(l){var c=i.props,u=c.isMulti,d=c.backspaceRemovesValue,h=c.escapeClearsValue,f=c.inputValue,g=c.isClearable,m=c.isDisabled,v=c.menuIsOpen,_=c.onKeyDown,y=c.tabSelectsValue,w=c.openMenuOnFocus,b=i.state,x=b.focusedOption,T=b.focusedValue,I=b.selectValue;if(!m&&!(typeof _=="function"&&(_(l),l.defaultPrevented))){switch(i.blockOptionHover=!0,l.key){case"ArrowLeft":if(!u||f)return;i.focusValue("previous");break;case"ArrowRight":if(!u||f)return;i.focusValue("next");break;case"Delete":case"Backspace":if(f)return;if(T)i.removeValue(T);else{if(!d)return;u?i.popValue():g&&i.clearValue()}break;case"Tab":if(i.isComposing||l.shiftKey||!v||!y||!x||w&&i.isOptionSelected(x,I))return;i.selectOption(x);break;case"Enter":if(l.keyCode===229)break;if(v){if(!x||i.isComposing)return;i.selectOption(x);break}return;case"Escape":v?(i.setState({inputIsHiddenAfterUpdate:!1}),i.onInputChange("",{action:"menu-close",prevInputValue:f}),i.onMenuClose()):g&&h&&i.clearValue();break;case" ":if(f)return;if(!v){i.openMenu("first");break}if(!x)return;i.selectOption(x);break;case"ArrowUp":v?i.focusOption("up"):i.openMenu("last");break;case"ArrowDown":v?i.focusOption("down"):i.openMenu("first");break;case"PageUp":if(!v)return;i.focusOption("pageup");break;case"PageDown":if(!v)return;i.focusOption("pagedown");break;case"Home":if(!v)return;i.focusOption("first");break;case"End":if(!v)return;i.focusOption("last");break;default:return}l.preventDefault()}},i.state.instancePrefix="react-select-"+(i.props.instanceId||++Kpe),i.state.selectValue=bN(r.value),r.menuIsOpen&&i.state.selectValue.length){var s=i.getFocusableOptionsWithIds(),o=i.buildFocusableOptions(),a=o.indexOf(i.state.selectValue[0]);i.state.focusableOptionsWithIds=s,i.state.focusedOption=o[a],i.state.focusedOptionId=Pw(s,o[a])}return i}return CB(n,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&xN(this.menuListRef,this.focusedOptionRef)}},{key:"componentDidUpdate",value:function(i){var s=this.props,o=s.isDisabled,a=s.menuIsOpen,l=this.state.isFocused;(l&&!o&&i.isDisabled||l&&a&&!i.menuIsOpen)&&this.focusInput(),l&&o&&!i.isDisabled?this.setState({isFocused:!1},this.onMenuClose):!l&&!o&&i.isDisabled&&this.inputRef===document.activeElement&&this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(xN(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(i,s){this.props.onInputChange(i,s)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(i){var s=this,o=this.state,a=o.selectValue,l=o.isFocused,c=this.buildFocusableOptions(),u=i==="first"?0:c.length-1;if(!this.props.isMulti){var d=c.indexOf(a[0]);d>-1&&(u=d)}this.scrollToFocusedOptionOnUpdate=!(l&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:c[u],focusedOptionId:this.getFocusedOptionId(c[u])},function(){return s.onMenuOpen()})}},{key:"focusValue",value:function(i){var s=this.state,o=s.selectValue,a=s.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var l=o.indexOf(a);a||(l=-1);var c=o.length-1,u=-1;if(o.length){switch(i){case"previous":l===0?u=0:l===-1?u=c:u=l-1;break;case"next":l>-1&&l<c&&(u=l+1);break}this.setState({inputIsHidden:u!==-1,focusedValue:o[u]})}}}},{key:"focusOption",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",s=this.props.pageSize,o=this.state.focusedOption,a=this.getFocusableOptions();if(a.length){var l=0,c=a.indexOf(o);o||(c=-1),i==="up"?l=c>0?c-1:a.length-1:i==="down"?l=(c+1)%a.length:i==="pageup"?(l=c-s,l<0&&(l=0)):i==="pagedown"?(l=c+s,l>a.length-1&&(l=a.length-1)):i==="last"&&(l=a.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:a[l],focusedValue:null,focusedOptionId:this.getFocusedOptionId(a[l])})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(Aw):ge(ge({},Aw),this.props.theme):Aw}},{key:"getCommonProps",value:function(){var i=this.clearValue,s=this.cx,o=this.getStyles,a=this.getClassNames,l=this.getValue,c=this.selectOption,u=this.setValue,d=this.props,h=d.isMulti,f=d.isRtl,g=d.options,m=this.hasValue();return{clearValue:i,cx:s,getStyles:o,getClassNames:a,getValue:l,hasValue:m,isMulti:h,isRtl:f,options:g,selectOption:c,selectProps:d,setValue:u,theme:this.getTheme()}}},{key:"hasValue",value:function(){var i=this.state.selectValue;return i.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var i=this.props,s=i.isClearable,o=i.isMulti;return s===void 0?o:s}},{key:"isOptionDisabled",value:function(i,s){return h5(this.props,i,s)}},{key:"isOptionSelected",value:function(i,s){return f5(this.props,i,s)}},{key:"filterOption",value:function(i,s){return p5(this.props,i,s)}},{key:"formatOptionLabel",value:function(i,s){if(typeof this.props.formatOptionLabel=="function"){var o=this.props.inputValue,a=this.state.selectValue;return this.props.formatOptionLabel(i,{context:s,inputValue:o,selectValue:a})}else return this.getOptionLabel(i)}},{key:"formatGroupLabel",value:function(i){return this.props.formatGroupLabel(i)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var i=this.props,s=i.isDisabled,o=i.isSearchable,a=i.inputId,l=i.inputValue,c=i.tabIndex,u=i.form,d=i.menuIsOpen,h=i.required,f=this.getComponents(),g=f.Input,m=this.state,v=m.inputIsHidden,_=m.ariaSelection,y=this.commonProps,w=a||this.getElementId("input"),b=ge(ge(ge({"aria-autocomplete":"list","aria-expanded":d,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":h,role:"combobox","aria-activedescendant":this.isAppleDevice?void 0:this.state.focusedOptionId||""},d&&{"aria-controls":this.getElementId("listbox")}),!o&&{"aria-readonly":!0}),this.hasValue()?(_==null?void 0:_.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return o?S.createElement(g,ye({},y,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:w,innerRef:this.getInputRef,isDisabled:s,isHidden:v,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:c,form:u,type:"text",value:l},b)):S.createElement(wpe,ye({id:w,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:My,onFocus:this.onInputFocus,disabled:s,tabIndex:c,inputMode:"none",form:u,value:""},b))}},{key:"renderPlaceholderOrValue",value:function(){var i=this,s=this.getComponents(),o=s.MultiValue,a=s.MultiValueContainer,l=s.MultiValueLabel,c=s.MultiValueRemove,u=s.SingleValue,d=s.Placeholder,h=this.commonProps,f=this.props,g=f.controlShouldRenderValue,m=f.isDisabled,v=f.isMulti,_=f.inputValue,y=f.placeholder,w=this.state,b=w.selectValue,x=w.focusedValue,T=w.isFocused;if(!this.hasValue()||!g)return _?null:S.createElement(d,ye({},h,{key:"placeholder",isDisabled:m,isFocused:T,innerProps:{id:this.getElementId("placeholder")}}),y);if(v)return b.map(function(E,k){var D=E===x,F="".concat(i.getOptionLabel(E),"-").concat(i.getOptionValue(E));return S.createElement(o,ye({},h,{components:{Container:a,Label:l,Remove:c},isFocused:D,isDisabled:m,key:F,index:k,removeProps:{onClick:function(){return i.removeValue(E)},onTouchEnd:function(){return i.removeValue(E)},onMouseDown:function(X){X.preventDefault()}},data:E}),i.formatOptionLabel(E,"value"))});if(_)return null;var I=b[0];return S.createElement(u,ye({},h,{data:I,isDisabled:m}),this.formatOptionLabel(I,"value"))}},{key:"renderClearIndicator",value:function(){var i=this.getComponents(),s=i.ClearIndicator,o=this.commonProps,a=this.props,l=a.isDisabled,c=a.isLoading,u=this.state.isFocused;if(!this.isClearable()||!s||l||!this.hasValue()||c)return null;var d={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return S.createElement(s,ye({},o,{innerProps:d,isFocused:u}))}},{key:"renderLoadingIndicator",value:function(){var i=this.getComponents(),s=i.LoadingIndicator,o=this.commonProps,a=this.props,l=a.isDisabled,c=a.isLoading,u=this.state.isFocused;if(!s||!c)return null;var d={"aria-hidden":"true"};return S.createElement(s,ye({},o,{innerProps:d,isDisabled:l,isFocused:u}))}},{key:"renderIndicatorSeparator",value:function(){var i=this.getComponents(),s=i.DropdownIndicator,o=i.IndicatorSeparator;if(!s||!o)return null;var a=this.commonProps,l=this.props.isDisabled,c=this.state.isFocused;return S.createElement(o,ye({},a,{isDisabled:l,isFocused:c}))}},{key:"renderDropdownIndicator",value:function(){var i=this.getComponents(),s=i.DropdownIndicator;if(!s)return null;var o=this.commonProps,a=this.props.isDisabled,l=this.state.isFocused,c={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return S.createElement(s,ye({},o,{innerProps:c,isDisabled:a,isFocused:l}))}},{key:"renderMenu",value:function(){var i=this,s=this.getComponents(),o=s.Group,a=s.GroupHeading,l=s.Menu,c=s.MenuList,u=s.MenuPortal,d=s.LoadingMessage,h=s.NoOptionsMessage,f=s.Option,g=this.commonProps,m=this.state.focusedOption,v=this.props,_=v.captureMenuScroll,y=v.inputValue,w=v.isLoading,b=v.loadingMessage,x=v.minMenuHeight,T=v.maxMenuHeight,I=v.menuIsOpen,E=v.menuPlacement,k=v.menuPosition,D=v.menuPortalTarget,F=v.menuShouldBlockScroll,K=v.menuShouldScrollIntoView,X=v.noOptionsMessage,le=v.onMenuScrollToTop,C=v.onMenuScrollToBottom;if(!I)return null;var R=function($,B){var ce=$.type,Q=$.data,me=$.isDisabled,we=$.isSelected,he=$.label,et=$.value,Rt=m===Q,Ue=me?void 0:function(){return i.onOptionHover(Q)},it=me?void 0:function(){return i.selectOption(Q)},er="".concat(i.getElementId("option"),"-").concat(B),qi={id:er,onClick:it,onMouseMove:Ue,onMouseOver:Ue,tabIndex:-1,role:"option","aria-selected":i.isAppleDevice?void 0:we};return S.createElement(f,ye({},g,{innerProps:qi,data:Q,isDisabled:me,isSelected:we,key:er,label:he,type:ce,value:et,isFocused:Rt,innerRef:Rt?i.getFocusedOptionRef:void 0}),i.formatOptionLabel($.data,"menu"))},V;if(this.hasOptions())V=this.getCategorizedOptions().map(function(A){if(A.type==="group"){var $=A.data,B=A.options,ce=A.index,Q="".concat(i.getElementId("group"),"-").concat(ce),me="".concat(Q,"-heading");return S.createElement(o,ye({},g,{key:Q,data:$,options:B,Heading:a,headingProps:{id:me,data:A.data},label:i.formatGroupLabel(A.data)}),A.options.map(function(we){return R(we,"".concat(ce,"-").concat(we.index))}))}else if(A.type==="option")return R(A,"".concat(A.index))});else if(w){var M=b({inputValue:y});if(M===null)return null;V=S.createElement(d,g,M)}else{var U=X({inputValue:y});if(U===null)return null;V=S.createElement(h,g,U)}var j={minMenuHeight:x,maxMenuHeight:T,menuPlacement:E,menuPosition:k,menuShouldScrollIntoView:K},ie=S.createElement(Jhe,ye({},g,j),function(A){var $=A.ref,B=A.placerProps,ce=B.placement,Q=B.maxHeight;return S.createElement(l,ye({},g,j,{innerRef:$,innerProps:{onMouseDown:i.onMenuMouseDown,onMouseMove:i.onMenuMouseMove},isLoading:w,placement:ce}),S.createElement(Ipe,{captureEnabled:_,onTopArrive:le,onBottomArrive:C,lockEnabled:F},function(me){return S.createElement(c,ye({},g,{innerRef:function(he){i.getMenuListRef(he),me(he)},innerProps:{role:"listbox","aria-multiselectable":g.isMulti,id:i.getElementId("listbox")},isLoading:w,maxHeight:Q,focusedOption:m}),V)}))});return D||k==="fixed"?S.createElement(u,ye({},g,{appendTo:D,controlElement:this.controlRef,menuPlacement:E,menuPosition:k}),ie):ie}},{key:"renderFormField",value:function(){var i=this,s=this.props,o=s.delimiter,a=s.isDisabled,l=s.isMulti,c=s.name,u=s.required,d=this.state.selectValue;if(u&&!this.hasValue()&&!a)return S.createElement(kpe,{name:c,onFocus:this.onValueInputFocus});if(!(!c||a))if(l)if(o){var h=d.map(function(m){return i.getOptionValue(m)}).join(o);return S.createElement("input",{name:c,type:"hidden",value:h})}else{var f=d.length>0?d.map(function(m,v){return S.createElement("input",{key:"i-".concat(v),name:c,type:"hidden",value:i.getOptionValue(m)})}):S.createElement("input",{name:c,type:"hidden",value:""});return S.createElement("div",null,f)}else{var g=d[0]?this.getOptionValue(d[0]):"";return S.createElement("input",{name:c,type:"hidden",value:g})}}},{key:"renderLiveRegion",value:function(){var i=this.commonProps,s=this.state,o=s.ariaSelection,a=s.focusedOption,l=s.focusedValue,c=s.isFocused,u=s.selectValue,d=this.getFocusableOptions();return S.createElement(ppe,ye({},i,{id:this.getElementId("live-region"),ariaSelection:o,focusedOption:a,focusedValue:l,isFocused:c,selectValue:u,focusableOptions:d,isAppleDevice:this.isAppleDevice}))}},{key:"render",value:function(){var i=this.getComponents(),s=i.Control,o=i.IndicatorsContainer,a=i.SelectContainer,l=i.ValueContainer,c=this.props,u=c.className,d=c.id,h=c.isDisabled,f=c.menuIsOpen,g=this.state.isFocused,m=this.commonProps=this.getCommonProps();return S.createElement(a,ye({},m,{className:u,innerProps:{id:d,onKeyDown:this.onKeyDown},isDisabled:h,isFocused:g}),this.renderLiveRegion(),S.createElement(s,ye({},m,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:h,isFocused:g,menuIsOpen:f}),S.createElement(l,ye({},m,{isDisabled:h}),this.renderPlaceholderOrValue(),this.renderInput()),S.createElement(o,ye({},m,{isDisabled:h}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(i,s){var o=s.prevProps,a=s.clearFocusValueOnUpdate,l=s.inputIsHiddenAfterUpdate,c=s.ariaSelection,u=s.isFocused,d=s.prevWasFocused,h=s.instancePrefix,f=i.options,g=i.value,m=i.menuIsOpen,v=i.inputValue,_=i.isMulti,y=bN(g),w={};if(o&&(g!==o.value||f!==o.options||m!==o.menuIsOpen||v!==o.inputValue)){var b=m?Hpe(i,y):[],x=m?LN(_m(i,y),"".concat(h,"-option")):[],T=a?qpe(s,y):null,I=Gpe(s,b),E=Pw(x,I);w={selectValue:y,focusedOption:I,focusedOptionId:E,focusableOptionsWithIds:x,focusedValue:T,clearFocusValueOnUpdate:!1}}var k=l!=null&&i!==o?{inputIsHidden:l,inputIsHiddenAfterUpdate:void 0}:{},D=c,F=u&&d;return u&&!F&&(D={value:kg(_,y,y[0]||null),options:y,action:"initial-input-focus"},F=!d),(c==null?void 0:c.action)==="initial-input-focus"&&(D=null),ge(ge(ge({},w),k),{},{prevProps:i,ariaSelection:D,prevWasFocused:F})}}]),n}(S.Component);m5.defaultProps=Wpe;var Qpe=S.forwardRef(function(t,e){var n=dde(t);return S.createElement(m5,ye({ref:e},n))}),Fy=Qpe;const Ype=({handleCreditCardData:t,hiddenBackground:e,disabledFields:n,cardDetails:r})=>{const[i,s]=S.useState(""),[o,a]=S.useState(""),[l,c]=S.useState(""),[u,d]=S.useState(""),{t:h}=Qe(),f=v=>{let w=v.target.value.replace(/[^\d\s]/g,"").replace(/[^0-9]+/g,"").replace(/(.{4})/g,"$1 ").trim();s(w)};S.useEffect(()=>{r&&(s(r.cardNumber),a(r.cardName),c(r.expDate),d(r.ccv))},[r]),S.useEffect(()=>{g()},[i,o,l,u]);function g(){t({cardNumber:i,cardName:o,expDate:l,ccv:u})}const m=v=>{let _=v.target.value.replace(/[^0-9]+/g,"");_.length===1&&parseInt(_)>1&&(_="0"+_),_.length===2&&parseInt(_)>12&&(_=_.substring(0,1),console.log("value",_)),_.length>2&&(_=_.substring(0,2)+"/"+_.substring(2)),_.length===3&&v.target.value.length===2&&(_=_.substring(0,2)),c(_)};return p.jsxs("div",{className:"flex w-full flex-col justify-center items-center relative",children:[p.jsx("h1",{className:`title text-black dark:text-white ${e&&"hidden"}`,children:h("creditCardTitle")}),p.jsxs("div",{className:"card-wrapper",children:[p.jsxs("div",{className:`circles ${e&&"hidden"}`,children:[p.jsx("div",{className:"circle circle-1"}),p.jsx("div",{className:"circle circle-2"})]}),p.jsx("div",{className:"card",children:p.jsxs("form",{children:[p.jsxs("div",{className:"logo text-gray-900 dark:text-white",children:[p.jsx("i",{className:"material-icons -m-0.5",children:"circle"}),p.jsx("i",{className:"material-icons -m-0.5",children:"circle"}),p.jsx("i",{className:"material-icons -m-0.5",children:"circle"}),p.jsx("i",{className:"material-icons -m-0.5",children:"circle"})]}),p.jsxs("div",{className:"card-number",children:[p.jsx("label",{className:"label text-black dark:text-white",children:h("cardNumber")}),p.jsx("input",{id:"card-number",className:"text-black dark:text-white placeholder-black dark:placeholder-gray-300",value:i,onChange:f,placeholder:"1234 1234 1234 1234",type:"text",maxLength:"19",disabled:n,required:!0}),p.jsx("span",{className:`${!n&&"card-underline"} bg-gray-600 dark:bg-white `})]}),p.jsx("br",{}),p.jsxs("div",{className:"group whitespace-nowrap",children:[p.jsxs("div",{className:"card-name",children:[p.jsx("label",{className:"label text-black dark:text-white",children:h("cardHolder")}),p.jsx("input",{id:"card-name",className:"text-black dark:text-white placeholder-black dark:placeholder-gray-300",value:o,onChange:v=>a(v.target.value.toUpperCase()),placeholder:"Safa Khier",type:"text",disabled:n,required:!0}),p.jsx("span",{className:`${!n&&"card-underline"} bg-gray-600 dark:bg-white `})]}),p.jsxs("div",{className:"expiration-date",children:[p.jsx("label",{className:"label text-black dark:text-white",children:h("expDate")}),p.jsx("input",{id:"card-exp",className:"text-black dark:text-white placeholder-black dark:placeholder-gray-300",value:l,onChange:m,placeholder:"10/25",type:"text",maxLength:"5",disabled:n,required:!0}),p.jsx("span",{className:`${!n&&"card-underline"} bg-gray-600 dark:bg-white `})]}),p.jsxs("div",{className:"ccv",children:[p.jsx("label",{className:"label text-black dark:text-white",children:h("cvv")}),p.jsx("input",{id:"card-ccv",className:"text-black dark:text-white placeholder-black dark:placeholder-gray-300",value:u,onChange:v=>d(v.target.value.replace(/[^0-9]+/g,"")),placeholder:"123",type:"text",maxLength:"3",disabled:n,required:!0}),p.jsx("span",{className:`${!n&&"card-underline"} bg-gray-600 dark:bg-white `})]})]})]})})]})]})},Xpe=({currencies:t,currentUser:e,currentUserData:n,fetchUserData:r,alert:i})=>{const{t:s}=Qe(),[o,a]=S.useState(!1),[l,c]=S.useState(""),[u,d]=S.useState(),[h,f]=S.useState({cardNumber:"",cardName:"",expDate:"",ccv:""}),g=E=>{f(E)};function m(){if(!u){i({title:"error",message:"errorSelectCurrency"});return}if(!l){i({title:"error",message:"errorEnterAmount"});return}if(h.cardNumber.length!==19)return i({title:"error",message:"errorInvalidCardNumber"}),!1;if(h.cardName==="")return i({title:"error",message:"errorInvalidCardName"}),!1;const E=new Date,k=E.getMonth()+1,D=E.getFullYear().toString().slice(2,4),F=h.expDate.split("/");return h.expDate.length!==5||parseInt(F[1])<D||parseInt(F[0])<=k&&parseInt(F[1])==parseInt(D)?(i({title:"error",message:"errorInvalidExpDate"}),!1):h.ccv.length!==3?(i({title:"error",message:"errorInvalidCCV"}),!1):!0}async function v(){if(!m())return;const E=l.replace(/[^0-9.]/g,""),k=(parseFloat(E)||0)/u.current_price;let D=u.current_price*k;n.wallet.forEach(F=>{const K=t.find(X=>X.id===F.id).current_price;D+=F.amount*K});try{a(!0),await gse(n,u,parseFloat(k),parseFloat(E),h,D),r(e),i({title:"success",message:"successBuyCrypto"})}catch(F){console.log(F),i({title:"error",message:"errorSomethingWentWrong"})}finally{a(!1),c(""),d(null),f({cardNumber:"",cardName:"",expDate:"",ccv:""})}}const _=E=>{let F=E.target.value.replace(/[^\d\s]/g,"").replace(/[^0-9]+/g,"").replace(/(.{4})/g,"$1 ").trim();f({...h,cardNumber:F})},y=E=>{let k=E.target.value.replace(/[^0-9]+/g,"");k.length===1&&parseInt(k)>1&&(k="0"+k),k.length===2&&parseInt(k)>12&&(k=k.substring(0,1),console.log("value",k)),k.length>2&&(k=k.substring(0,2)+"/"+k.substring(2)),k.length===3&&E.target.value.length===2&&(k=k.substring(0,2)),f({...h,expDate:k})},w=({innerProps:E,isFocused:k,isSelected:D,data:F})=>p.jsxs("div",{...E,className:`text-sm flex justify-between items-center p-2 ${k&&"bg-gray-300 dark:bg-gray-600"} ${D&&"font-bold text-custom-teal"}`,children:[p.jsxs("div",{className:"flex justify-start h-full items-center",children:[p.jsx("img",{className:"w-6 h-6 mr-2",loading:"lazy",src:F.image,alt:F.label+" Logo"}),p.jsxs("div",{className:"flex flex-col justify-center items-start",children:[F.symbol.toUpperCase(),p.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:F.label})]})]}),D&&p.jsx("i",{className:"material-icons",children:"done"})]}),b=({data:E})=>p.jsxs("div",{className:"flex items-center",children:[p.jsx("img",{src:E.image,style:{width:20,height:20,marginRight:8}}),"≈ "+x()+" "+E.symbol.toUpperCase()]}),x=()=>{if(!u)return 0;const E=l.replace(/[^0-9.]/g,"");let k=(parseFloat(E)||0)/u.current_price;return xn(k)},T=E=>{if(E.target.value==="$"){c("");return}const k=E.target.value.replace(/[^0-9.]/g,"");if(k===""){c("");return}if(parseFloat(k)>2e4)return;const D=parseFloat(k).toLocaleString("en-US");c("$"+(D||0))};function I(){return p.jsxs("div",{className:"",children:[p.jsx("label",{className:"font-bold",children:s("cardNumber")}),p.jsx("input",{type:"text",value:h.cardNumber,className:"react-input w-full rounded focus:ring-transparent text-lg",onChange:_,placeholder:"1234 1234 1234 1234",maxLength:"19"}),p.jsx("label",{className:"font-bold",children:s("cardHolder")}),p.jsx("input",{type:"text",value:h.cardName,className:"react-input w-full rounded focus:ring-transparent text-lg",placeholder:"Safa Khier",onChange:E=>f({...h,cardName:E.target.value.toUpperCase()})}),p.jsxs("div",{className:"flex gap-5 w-full",children:[p.jsxs("div",{className:"w-full",children:[p.jsx("label",{className:"font-bold",children:s("expDate")}),p.jsx("input",{type:"text",value:h.expDate,className:"react-input w-full rounded focus:ring-transparent text-lg",onChange:y,placeholder:"10/25",maxLength:"5"})]}),p.jsxs("div",{className:"w-full",children:[p.jsx("label",{className:"font-bold",children:s("cvv")}),p.jsx("input",{type:"text",value:h.ccv,onChange:E=>f({...h,ccv:E.target.value.replace(/[^0-9]+/g,"")}),className:"react-input w-full rounded focus:ring-transparent text-lg",maxLength:"3",placeholder:"123"})]})]})]})}return p.jsxs("div",{className:"grid xl:grid-cols-2 h-full w-full xl:p-10 xl:border rounded-xl dark:border-gray-600",children:[p.jsxs("div",{className:"w-full max-h-full md:p-5 flex flex-col justify-between items-start text-xl",children:[p.jsxs("div",{className:"text-lg w-full h-full flex flex-col gap-10",children:[p.jsxs("div",{className:"flex flex-col w-full",children:[p.jsx("label",{className:"font-bold mb-1",children:s("spend")}),p.jsx("input",{type:"text",value:l,className:"react-input w-full rounded focus:ring-transparent text-lg",onChange:T,placeholder:"$10 - $20,000"})]}),p.jsxs("div",{className:"flex flex-col w-full",children:[p.jsx("label",{className:"font-bold",children:s("receive")}),p.jsx(Fy,{value:u,className:"react-select-container w-full",classNamePrefix:"react-select",placeholder:s("search")+"...",isOptionSelected:E=>u?E.id===u.id:!1,onChange:E=>d(E),components:{Option:w,SingleValue:b},options:t,isLoading:!t})]})]}),p.jsx("button",{onClick:v,disabled:o,className:`hidden xl:flex justify-center items-center w-full font-bold bg-custom-teal ${!o&&"hover:bg-teal-500"} h-14 rounded`,children:o?p.jsxs("div",{className:"loading-container",children:[p.jsx("span",{className:"dot"}),p.jsx("span",{className:"dot"}),p.jsx("span",{className:"dot"})]}):s("buy")})]}),p.jsx("div",{className:"p-14 hidden md:flex",children:p.jsx(Ype,{handleCreditCardData:g,hiddenBackground:!1,disabledFields:!1,cardDetails:h})}),p.jsxs("div",{className:"flex flex-col md:hidden mt-10",children:[p.jsx("label",{className:"font-bold text-xl mb-5",children:s("creditCardDetails")}),I()]}),p.jsx("button",{onClick:v,disabled:o,className:`flex justify-center items-center xl:hidden w-full font-bold bg-custom-teal ${!o&&"hover:bg-teal-500"} mt-10 h-11 rounded`,children:o?p.jsxs("div",{className:"loading-container",children:[p.jsx("span",{className:"dot"}),p.jsx("span",{className:"dot"}),p.jsx("span",{className:"dot"})]}):s("buy")})]})},Jpe=({currencies:t,currentUserData:e,fetchUserData:n,currentUser:r,alert:i})=>{const{t:s}=Qe(),[o,a]=S.useState([]),[l,c]=S.useState(""),[u,d]=S.useState(),[h,f]=S.useState(!1),[g,m]=S.useState("");S.useEffect(()=>{if(!e.wallet||t.length===0)return;const E=e.wallet.map(k=>{const D=t.find(F=>F.id===k.id);return{amount:k.amount,...D}});console.log(E),a(E)},[e.wallet,t]);const v=()=>!(!u||!g||!l);async function _(){if(v())try{f(!0),await mse(e,u,g,parseFloat(l.replace(/[^0-9.]/g,"")),parseFloat(x())),n(r),i({title:"success",message:"successTradeCrypto"})}catch(E){console.log(E),i({title:"error",message:"errorSomethingWentWrong"})}finally{f(!1),c(""),d(null),m(null)}}const y=({innerProps:E,isFocused:k,isSelected:D,data:F})=>{const K=!D&&(g&&F.id===g.id||u&&F.id===u.id);return p.jsxs("div",{...E,className:`text-sm flex justify-between items-center p-2 
        ${k&&"bg-gray-300 dark:bg-gray-600"} 
        ${D&&"font-bold text-custom-teal"} 
        ${K&&"text-gray-500 dark:text-gray-400 opacity-50"}`,children:[p.jsxs("div",{className:"flex justify-start h-full items-center",children:[p.jsx("img",{className:"w-6 h-6 mr-2",loading:"lazy",src:F.image,alt:F.name+" Logo"}),p.jsxs("div",{className:"flex flex-col justify-center items-start",children:[F.symbol.toUpperCase(),p.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:F.name})]})]}),D?p.jsx("i",{className:"material-icons",children:"done"}):K&&p.jsx("i",{className:"material-icons",children:"block"})]})},w=({data:E})=>p.jsxs("div",{className:"flex items-center",children:[p.jsx("img",{src:E.image,style:{width:20,height:20,marginRight:8}}),"≈ "+x()+" "+E.symbol.toUpperCase()]}),b=({data:E})=>p.jsxs("div",{className:"flex items-center",children:[p.jsx("img",{src:E.image,style:{width:20,height:20,marginRight:8}}),E.symbol.toUpperCase(),p.jsx("div",{className:"pl-2 text-gray-500 dark:text-gray-400",children:" ("+E.name+")"})]}),x=()=>{if(!g||!u)return 0;let k=(u.current_price*parseFloat(l.replace(/[^0-9.]/g,""))||0)/g.current_price;return xn(k)},T=E=>{var X;let k=E.target.value;k==="."&&(k="0."),k=k.replace(/[^0-9.]/g,"");const D=k.split(".");if(D.length>2&&(k=D[0]+"."+D.slice(1).join("")),k===""||k==="."){c(k);return}if(!u)return"";const F=((X=e.wallet.find(le=>u.id===le.id))==null?void 0:X.amount)||0;parseFloat(k)>F||c(k)},I=()=>u?"(Up To ≈ "+e.wallet.find(k=>u.id===k.id).amount+")":"";return p.jsxs("div",{className:"flex flex-col lg:flex-row h-full w-full md:p-10 md:border rounded-xl dark:border-gray-600 text-lg",children:[p.jsx("div",{className:"w-full max-h-full md:p-5 flex flex-col  justify-between items-start text-xl",children:p.jsxs("div",{className:" w-full h-full flex flex-col md:gap-10",children:[p.jsxs("div",{className:"flex flex-col w-full",children:[p.jsx("label",{className:"font-bold",children:s("spend")}),p.jsx(Fy,{value:u,className:"react-select-container w-full py-5",classNamePrefix:"react-select",placeholder:s("search")+"...",onChange:d,isOptionDisabled:E=>g?E.id===g.id:!1,isOptionSelected:E=>u?E.id===u.id:!1,components:{Option:y,SingleValue:b},options:o,isClearable:!0,isLoading:t&&t.length===0||t===null})]}),p.jsxs("div",{className:"flex flex-col w-full",children:[p.jsx("label",{className:"font-bold mb-1",children:s("amount")}),p.jsx("input",{type:"text",value:l,className:"react-input w-full rounded focus:ring-transparent text-lg",onChange:T,placeholder:s(u?"selectAmount":"selectCurrencyFirst"),disabled:!u}),p.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-300",children:u?`select amount...${I()}`:""})]})]})}),p.jsx("div",{children:p.jsx("i",{className:"material-icons w-full text-9xl text-custom-teal p-10 h-full flex justify-center items-center",children:"currency_exchange"})}),p.jsxs("div",{className:"w-full md:p-5 flex flex-col justify-between items-center",children:[p.jsxs("div",{className:"flex flex-col w-full",children:[p.jsx("label",{className:"font-bold mb-1",children:s("receive")}),p.jsx(Fy,{value:g,className:"react-select-container w-full py-5",classNamePrefix:"react-select",placeholder:s("search")+"...",isOptionDisabled:E=>u?E.id===u.id:!1,isOptionSelected:E=>g?E.id===g.id:!1,onChange:E=>m(E),components:{Option:y,SingleValue:w},options:t,isLoading:t&&t.length===0||t===null})]}),p.jsx("button",{onClick:_,disabled:h,className:`flex justify-center items-center w-full font-bold bg-custom-teal ${!h&&"hover:bg-teal-500"} h-11 rounded`,children:h?p.jsxs("div",{className:"loading-container",children:[p.jsx("span",{className:"dot"}),p.jsx("span",{className:"dot"}),p.jsx("span",{className:"dot"})]}):p.jsx("div",{children:s("trade")})})]})]})};function Zpe(){const{t}=Qe(),{currentUser:e,currentUserData:n,fetchUserData:r}=Ns(),[i,s]=S.useState(!1),o=()=>s(!0),a=()=>s(!1),[l,c]=S.useState({title:"",message:"",messageType:"",action:null}),[u,d]=S.useState("buy"),[h,f]=S.useState(),g=qf($o),[m,v]=S.useState({width:0,transform:"translateX(0px)"}),_=S.useRef([]),[y,w]=S.useState(window.innerWidth);S.useEffect(()=>{if(_.current[u]){const{offsetLeft:E,clientWidth:k}=_.current[u];v({width:k,transform:`translateX(${E}px)`})}},[u,_,y]),S.useEffect(()=>{console.log(g),f(g.data.map(E=>({id:E.id,label:E.name,image:E.image,symbol:E.symbol,...E})))},[g.data]),S.useEffect(()=>{const E=()=>{w(window.innerWidth)};return window.addEventListener("resize",E),()=>{window.removeEventListener("resize",E)}},[]);const b=({title:E,message:k,messageType:D,action:F})=>{c({title:E,message:k,messageType:D,action:F}),o()},x=()=>{switch(u){case"buy":return p.jsx(Xpe,{currencies:h,currentUser:e,currentUserData:n,fetchUserData:r,alert:b});case"trade":return p.jsx(Jpe,{currencies:h,currentUser:e,currentUserData:n,fetchUserData:r,alert:b});default:return null}},T=E=>{switch(E){case"buy":return"shopping_cart";case"trade":return"compare_arrows";default:return""}},I=E=>p.jsx("div",{className:`flex flex-col justify-start items-center text-xl font-semibold ${u===E&&"text-custom-teal"}`,children:p.jsxs("button",{ref:k=>_.current[E]=k,className:"flex justify-center items-center gap-2 p-1 hover:text-gray-500 dark:hover:text-gray-300",onClick:()=>d(E),children:[p.jsx("i",{className:"material-icons",children:T(E)}),t(E)]})});return p.jsxs("div",{className:"scrollable-content content w-full",children:[p.jsxs("div",{className:"p-5 text-slate-950 dark:text-white flex flex-col items-center justify-start",children:[p.jsxs("div",{className:"w-full xl:w-[80%] flex flex-col justify-center items-start border-b md:p-0",children:[p.jsxs("div",{className:"flex justify-between md:justify-start w-full gap-5 relative",children:[I("buy"),I("trade")]}),p.jsx("div",{className:"w-full border-2 rounded border-custom-teal",style:{...m,transition:"width 0.3s ease, transform 0.3s ease"}})]}),p.jsx("div",{className:"pt-5 md:p-5 h-full w-full xl:w-[80%]",children:x()})]}),p.jsx(wl,{title:l.title,message:l.message,isVisible:i,onClose:a,messageType:l.messageType,action:l.action}),p.jsx(bl,{})]})}function ege(){const{t}=Qe(),{currentUser:e,currentUserData:n,fetchUserData:r}=Ns(),[i,s]=S.useState(),[o,a]=S.useState([]),l=qf($o),[c,u]=S.useState(""),[d,h]=S.useState({accountNumber:"",branchNumber:"",bankNumber:""}),[f,g]=S.useState(!1),[m,v]=S.useState(!1),_=()=>v(!0),y=()=>v(!1),[w,b]=S.useState({title:"",message:"",messageType:"",action:()=>{}});S.useEffect(()=>{if(!n||l.data.length===0)return;const C=n.wallet.map(R=>{const V=l.data.find(M=>M.id===R.id);return{...V,...R,label:V.name}});a(C)},[l.data]);const x=({innerProps:C,isFocused:R,isSelected:V,data:M})=>p.jsxs("div",{...C,className:`text-sm flex justify-between items-center p-2 ${R&&"bg-gray-300 dark:bg-gray-600"} ${V&&"font-bold text-custom-teal"}`,children:[p.jsxs("div",{className:"flex justify-start h-full items-center",children:[p.jsx("img",{className:"w-6 h-6 mr-2",loading:"lazy",src:M.image,alt:M.label+" Logo"}),p.jsxs("div",{className:"flex flex-col justify-center items-start",children:[M.symbol.toUpperCase(),p.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:M.label})]})]}),V&&p.jsx("i",{className:"material-icons",children:"done"})]}),T=({data:C})=>p.jsxs("div",{className:"flex items-center",children:[p.jsx("img",{src:C.image,style:{width:20,height:20,marginRight:8}}),C.symbol.toUpperCase()+" ("+C.label+")"]}),I=C=>{let R=C.target.value;R==="."&&(R="0."),R=R.replace(/[^0-9.]/g,"");const V=R.split(".");if(V.length>2&&(R=V[0]+"."+V.slice(1).join("")),R===""||R==="."){u(R);return}if(!i)return"";const M=E();parseFloat(R)>M||u(R)},E=()=>{var R;return i&&((R=n.wallet.find(V=>i.id===V.id))==null?void 0:R.amount)||0},k=()=>{if(!i)return"Select a currency to withdraw First...";const C=E();return`(${t("max")}: ${C} ${i.symbol.toUpperCase()})`},D=()=>i?`${t("enterAmount")} (${t("forExample")} ${E().toFixed(10)} ${i.symbol.toUpperCase()})`:t("selectCurrencyFirst"),F=C=>{let R=C.target.value;R=R.replace(/[^0-9]/g,""),R.length>=7&&(R=R.slice(0,6)+"/"+R.slice(6)),h({...d,accountNumber:R})},K=()=>i?c?!d.accountNumber||d.accountNumber.length<9?(X("error","errorEnterYourAccountNumber"),!1):!d.branchNumber||d.branchNumber.length<3?(X("error","errorEnterYourBranchNumber"),!1):!d.bankNumber||d.bankNumber.length<2?(X("error","errorEnterYourBankNumber"),!1):!0:(X("error","errorEnterAmountToWithdraw"),!1):(X("error","errorSelectCurrencyToWithdraw"),!1),X=(C,R,V,M)=>{b({title:C,message:R,messageType:V,action:M}),_()},le=async()=>{if(K())try{g(!0);let C=0;if(!i)return;n.wallet.forEach(R=>{const V=o.find(M=>M.id===R.id).current_price;C+=R.amount*V}),C-=i.current_price*c,await yse(n,i,parseFloat(c),d,C),r(e),X("success","successWithdrawnSuccessfully")}catch(C){console.error("Error: ",C),X("error","errorOccurredWhileWithdrawingYourFunds")}finally{g(!1),s(null),u(""),h({accountNumber:"",branchNumber:"",bankNumber:""})}};return p.jsxs("div",{className:"scrollable-content content items-center text-black dark:text-white",children:[p.jsxs("div",{className:"flex flex-col w-full lg:w-[70%] justify-center lg:border rounded-lg lg:m-10 p-5",children:[p.jsx("h1",{className:"mb-5 text-3xl font-bold w-full",children:t("withdraw")}),p.jsxs("div",{className:"flex flex-col lg:flex-row justify-center items-center gap-5",children:[p.jsxs("div",{className:"flex flex-col w-full gap-10",children:[p.jsxs("div",{className:"flex flex-col w-full",children:[p.jsx("label",{className:"font-bold mb-1",children:t("currency")}),p.jsx(Fy,{className:"react-select-container w-full",classNamePrefix:"react-select",placeholder:t("search")+"...",isOptionSelected:C=>i?C.id===i.id:!1,onChange:s,components:{Option:x,SingleValue:T},options:o,value:i,isClearable:!0,isLoading:o.length===0})]}),p.jsxs("div",{className:"flex flex-col w-full",children:[p.jsxs("div",{className:"flex justify-start items-center gap-2",children:[p.jsx("label",{className:"font-bold mb-1",children:t("amount")}),p.jsx("p",{className:"text-sm text-gray-400",children:i&&k()})]}),p.jsx("input",{type:"text",value:c,onChange:I,className:"react-input w-full rounded focus:ring-transparent text-lg",placeholder:D(),disabled:!i})]})]}),p.jsxs("div",{className:"flex flex-col w-full h-full justify-between",children:[p.jsxs("div",{className:"flex flex-col w-full",children:[p.jsx("label",{className:"font-bold mb-1",children:t("accountNumber")}),p.jsx("input",{type:"text",value:d.accountNumber,onChange:F,className:"react-input w-full rounded focus:ring-transparent text-lg",placeholder:"123456/12",maxLength:"9"})]}),p.jsxs("div",{className:"flex gap-5",children:[p.jsxs("div",{className:"flex flex-col w-full",children:[p.jsx("label",{className:"font-bold mb-1",children:t("branchNumber")}),p.jsx("input",{type:"text",value:d.branchNumber,onChange:C=>{const R=C.target.value.replace(/[^0-9]/g,"");h({...d,branchNumber:R})},className:"react-input w-full rounded focus:ring-transparent text-lg",placeholder:"123",maxLength:"3"})]}),p.jsxs("div",{className:"flex flex-col w-full",children:[p.jsx("label",{className:"font-bold mb-1",children:t("bankNumber")}),p.jsx("input",{type:"text",value:d.bankNumber,onChange:C=>{const R=C.target.value.replace(/[^0-9]/g,"");h({...d,bankNumber:R})},className:"react-input w-full rounded focus:ring-transparent text-lg",placeholder:"10",maxLength:"2"})]})]})]})]}),p.jsx("button",{onClick:le,disabled:f,className:`flex justify-center items-center w-full font-bold bg-custom-teal ${!f&&"hover:bg-teal-500"} h-11 rounded mt-10`,children:f?p.jsxs("div",{className:"loading-container",children:[p.jsx("span",{className:"dot"}),p.jsx("span",{className:"dot"}),p.jsx("span",{className:"dot"})]}):t("withdraw")})]}),p.jsx(wl,{title:w.title,message:w.message,isVisible:m,onClose:y,messageType:w.messageType,action:w.action}),p.jsx(bl,{})]})}const tge=t=>{const e=t.data;function n(i){let s=i.getDate(),o=i.getMonth()+1,a=i.getFullYear(),l=i.getHours(),c=i.getMinutes();return s=s<10?"0"+s:s,o=o<10?"0"+o:o,l=l<10?"0"+l:l,c=c<10?"0"+c:c,`${s}/${o}/${a}, ${l}:${c}`}const r=()=>p.jsxs("div",{className:"flex flex-col justify-center items-end",children:[p.jsx("div",{children:xn(e.amount)+" "+e.symbol.toUpperCase()}),p.jsx("div",{className:"font-semibold text-sm text-gray-500 dark:text-gray-400",children:"$"+xn(e.price)})]});return p.jsxs("tr",{className:"border-b hover:bg-gray-200 dark:hover:bg-gray-900 font-bold",children:[p.jsx("td",{className:"py-2",children:p.jsxs("div",{className:"flex justify-start h-full items-center",children:[p.jsx("img",{className:"w-6 h-6 mr-2",loading:"lazy",src:e.image,alt:e.name+" Logo"}),p.jsxs("div",{className:"flex flex-col justify-center items-start",children:[e.symbol.toUpperCase(),p.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:e.name})]})]})}),p.jsx("td",{className:"py-2 text-end",children:r()}),p.jsx("td",{className:"py-2 md:table-cell hidden text-end",children:e.creditCardDetails.cardNumber}),p.jsx("td",{className:"py-2 text-end",children:n(mi(e.timestamp))})]})};function nge({transactions:t,currencies:e}){const{t:n}=Qe(),r=7,[i,s]=S.useState([]),[o,a]=S.useState([]),[l,c]=S.useState({field:"",asc:null}),[u,d]=S.useState(1);S.useEffect(()=>{h()},[t,e]);function h(){if(!t||!e)return;const y=t.filter(w=>w.transactionType==="buy").map(w=>{const b=e.find(x=>x.id===w.currencyId);return b?{...w,name:b.name,image:b.image,symbol:b.symbol}:null}).filter(w=>w!==null);y.sort((w,b)=>mi(b.timestamp)-mi(w.timestamp)),s(y),_()}S.useEffect(()=>{Math.ceil(o.length/r)<u&&d(1),_()},[i]);const f=()=>Math.ceil(i.length/r)||1;S.useEffect(()=>{_()},[u]);function g(y){if(l.field===y){if(l.asc===!1){a(o.sort((w,b)=>typeof w[y]=="number"?b[y]-w[y]:(""+b[y]).localeCompare(w[y]))),c({field:y,asc:!0});return}_(),c({field:"",asc:null});return}a(o.sort((w,b)=>typeof w[y]=="number"?w[y]-b[y]:(""+w[y]).localeCompare(b[y]))),c({field:y,asc:!1})}const m=(y,w)=>p.jsxs("div",{className:`flex py-2 ${w==="coin"||w==="spent coin"||w==="type"?"justify-start":"justify-end"} items-center`,children:[n(w),v(y)?p.jsx("i",{className:"material-icons",children:l.asc?"expand_less":"expand_more"}):null]});function v(y){return l.field===y}function _(){a(i.slice((u-1)*r,u*r))}return p.jsxs("div",{children:[p.jsxs("table",{className:"w-full h-full",children:[p.jsx("thead",{children:p.jsxs("tr",{className:"border-b",children:[p.jsx("th",{onClick:()=>g("name"),className:"cursor-pointer bg-white dark:bg-gray-800 ",children:m("name","coin")}),p.jsx("th",{onClick:()=>g("amount"),className:"cursor-pointer bg-white dark:bg-gray-800",children:m("amount","amount")}),p.jsx("th",{onClick:()=>g("creditCardDetails"),className:"cursor-pointer bg-white dark:bg-gray-800 md:table-cell hidden",children:m("creditCardDetails","cardNumber")}),p.jsx("th",{onClick:()=>g("timestamp"),className:"cursor-pointer bg-white dark:bg-gray-800",children:m("timestamp","time")})]})}),p.jsx("tbody",{children:o.map((y,w)=>p.jsx(tge,{data:y,index:w+1+(u-1)*r,header:!1},y.id))})]}),p.jsx("div",{className:`${o.length===0?"":"hidden"} h-20`,children:p.jsx(ku,{})}),p.jsx(Ru,{totalPageNumber:f,currentPage:u,setCurrentPage:d})]})}const rge=t=>{const e=t.data;Qe();function n(r){let i=r.getDate(),s=r.getMonth()+1,o=r.getFullYear(),a=r.getHours(),l=r.getMinutes();return i=i<10?"0"+i:i,s=s<10?"0"+s:s,a=a<10?"0"+a:a,l=l<10?"0"+l:l,`${i}/${s}/${o}, ${a}:${l}`}return p.jsxs("tr",{className:"border-b hover:bg-gray-200 dark:hover:bg-gray-900 font-bold",children:[p.jsx("td",{className:"py-2 md:table-cell hidden",children:p.jsxs("div",{className:"flex justify-start h-full items-center",children:[p.jsx("img",{className:"w-6 h-6 mr-2",loading:"lazy",src:e.soldCurrency.image,alt:e.soldCurrency.name+" Logo"}),p.jsxs("div",{className:"flex flex-col justify-start items-start",children:[e.soldCurrency.symbol.toUpperCase(),p.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:e.soldCurrency.name})]})]})}),p.jsx("td",{className:"py-2 md:hidden",children:p.jsxs("div",{className:"flex justify-start h-full items-center",children:[p.jsx("img",{className:"w-6 h-6 mr-2",loading:"lazy",src:e.soldCurrency.image,alt:e.soldCurrency.name+" Logo"}),p.jsxs("div",{className:"flex flex-col justify-start items-start",children:[e.soldCurrency.symbol.toUpperCase(),p.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:xn(e.soldCurrency.amount)+" "+e.soldCurrency.symbol.toUpperCase()})]})]})}),p.jsx("td",{className:"py-2 md:table-cell hidden",children:p.jsxs("div",{className:"flex justify-start h-full items-center",children:[p.jsx("img",{className:"w-6 h-6 mr-2",loading:"lazy",src:e.boughtCurrency.image,alt:e.boughtCurrency.name+" Logo"}),p.jsxs("div",{className:"flex flex-col justify-center items-start",children:[e.boughtCurrency.symbol.toUpperCase(),p.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:e.boughtCurrency.name})]})]})}),p.jsx("td",{className:"py-2 md:hidden",children:p.jsxs("div",{className:"flex justify-start h-full items-center",children:[p.jsx("img",{className:"w-6 h-6 mr-2",loading:"lazy",src:e.boughtCurrency.image,alt:e.boughtCurrency.name+" Logo"}),p.jsxs("div",{className:"flex flex-col justify-center items-start",children:[e.boughtCurrency.symbol.toUpperCase(),p.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:xn(e.boughtCurrency.amount)+" "+e.boughtCurrency.symbol.toUpperCase()})]})]})}),p.jsx("td",{className:"py-2 text-end md:table-cell hidden",children:xn(e.soldCurrency.amount)+" "+e.soldCurrency.symbol.toUpperCase()}),p.jsx("td",{className:"py-2 text-end md:table-cell hidden",children:xn(e.boughtCurrency.amount)+" "+e.boughtCurrency.symbol.toUpperCase()}),p.jsx("td",{className:"py-2 text-end md:table-cell hidden",children:n(mi(e.timestamp))})]})};function ige({transactions:t,currencies:e}){const{t:n}=Qe(),r=7,[i,s]=S.useState([]),[o,a]=S.useState([]),[l,c]=S.useState({field:"",asc:null}),[u,d]=S.useState(1);S.useEffect(()=>{h()},[t,e]);function h(){if(!t||!e)return;const y=t.filter(w=>w.transactionType==="trade").map(w=>{const b=e.find(T=>T.id===w.soldCurrency.id),x=e.find(T=>T.id===w.boughtCurrency.id);return{...w,soldCurrency:{...w.soldCurrency,name:b.name,symbol:b.symbol,image:b.image},boughtCurrency:{...w.boughtCurrency,name:x.name,symbol:x.symbol,image:x.image}}});y.sort((w,b)=>mi(b.timestamp)-mi(w.timestamp)),s(y),_()}S.useEffect(()=>{Math.ceil(o.length/r)<u&&d(1),_()},[i]);const f=()=>Math.ceil(i.length/r)||1;S.useEffect(()=>{_()},[u]);function g(y,w=null){if(l.field===y||l.field===y+"."+w){if(l.asc===!1){if(a(o.sort((b,x)=>typeof b[y]=="number"||typeof b[y][w]=="number"?w?x[y][w]-b[y][w]:x[y]-b[y]:w?(""+x[y][w]).localeCompare(b[y][w]):(""+x[y]).localeCompare(b[y]))),w){c({field:y+"."+w,asc:!0});return}c({field:y,asc:!0});return}_(),c({field:"",asc:null});return}if(a(o.sort((b,x)=>typeof b[y]=="number"||typeof b[y][w]=="number"?w?b[y][w]-x[y][w]:b[y]-x[y]:w?(""+b[y][w]).localeCompare(x[y][w]):(""+b[y]).localeCompare(x[y]))),w){c({field:y+"."+w,asc:!1});return}c({field:y,asc:!1})}const m=(y,w)=>p.jsxs("div",{className:`flex py-2 ${w==="toCurrency"||w==="fromCurrency"?"justify-start":"justify-end"} items-center`,children:[n(w),v(y)?p.jsx("i",{className:"material-icons",children:l.asc?"expand_less":"expand_more"}):null]});function v(y){return l.field===y}function _(){a(i.slice((u-1)*r,u*r))}return p.jsxs("div",{children:[p.jsxs("table",{className:"w-full h-full",children:[p.jsx("thead",{children:p.jsxs("tr",{className:"border-b",children:[p.jsx("th",{onClick:()=>g("soldCurrency","name"),className:"cursor-pointer bg-white dark:bg-gray-800 ",children:m("soldCurrency.name","fromCurrency")}),p.jsx("th",{onClick:()=>g("boughtCurrency","name"),className:"cursor-pointer bg-white dark:bg-gray-800 ",children:m("boughtCurrency.name","toCurrency")}),p.jsx("th",{onClick:()=>g("soldCurrency","amount"),className:"cursor-pointer bg-white dark:bg-gray-800 md:table-cell hidden",children:m("soldCurrency.amount","quantitySold")}),p.jsx("th",{onClick:()=>g("boughtCurrency","amount"),className:"cursor-pointer bg-white dark:bg-gray-800 md:table-cell hidden",children:m("boughtCurrency.amount","quantityBought")}),p.jsx("th",{onClick:()=>g("timestamp"),className:"cursor-pointer bg-white dark:bg-gray-800 md:table-cell hidden",children:m("timestamp","time")})]})}),p.jsx("tbody",{children:o.map((y,w)=>p.jsx(rge,{data:y,index:w+1+(u-1)*r,header:!1},y.id))})]}),p.jsx("div",{className:`${o.length===0?"":"hidden"} h-20`,children:p.jsx(ku,{})}),p.jsx(Ru,{totalPageNumber:f,currentPage:u,setCurrentPage:d})]})}const sge=t=>{const e=t.data;function n(i){let s=i.getDate(),o=i.getMonth()+1,a=i.getFullYear(),l=i.getHours(),c=i.getMinutes();return s=s<10?"0"+s:s,o=o<10?"0"+o:o,l=l<10?"0"+l:l,c=c<10?"0"+c:c,`${s}/${o}/${a}, ${l}:${c}`}const r=()=>p.jsxs("div",{className:"flex flex-col justify-center items-end",children:[p.jsx("div",{children:parseFloat(e.amount.toFixed(5)).toLocaleString()+" "+e.symbol.toUpperCase()}),p.jsx("div",{className:"font-semibold text-sm text-gray-500 dark:text-gray-400",children:"$"+xn(e.price)})]});return p.jsxs("tr",{className:"border-b hover:bg-gray-200 dark:hover:bg-gray-900 font-bold",children:[p.jsx("td",{className:"py-2",children:p.jsxs("div",{className:"flex justify-start h-full items-center",children:[p.jsx("img",{className:"w-6 h-6 mr-2",loading:"lazy",src:e.image,alt:e.name+" Logo"}),p.jsxs("div",{className:"flex flex-col justify-center items-start",children:[e.symbol.toUpperCase(),p.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:e.name})]})]})}),p.jsx("td",{className:"py-2 text-end",children:r()}),p.jsxs("td",{className:"py-2 md:table-cell hidden text-end",children:["******",e.bankAccountDetails.accountNumber.slice(-3)]}),p.jsx("td",{className:"py-2 text-end",children:n(mi(e.timestamp))})]})};function oge({transactions:t,currencies:e}){const{t:n}=Qe(),r=7,[i,s]=S.useState([]),[o,a]=S.useState([]),[l,c]=S.useState({field:"",asc:null}),[u,d]=S.useState(1);S.useEffect(()=>{h()},[t,e]);function h(){if(!t||!e)return;const y=t.filter(w=>w.transactionType==="withdraw").map(w=>{const b=e.find(x=>x.id===w.currencyId);return b?{...w,name:b.name,image:b.image,symbol:b.symbol}:null}).filter(w=>w!==null);y.sort((w,b)=>mi(b.timestamp)-mi(w.timestamp)),s(y),_()}S.useEffect(()=>{Math.ceil(o.length/r)<u&&d(1),_()},[i]);const f=()=>Math.ceil(i.length/r)||1;S.useEffect(()=>{_()},[u]);function g(y){if(l.field===y){if(l.asc===!1){a(o.sort((w,b)=>typeof w[y]=="number"?b[y]-w[y]:(""+b[y]).localeCompare(w[y]))),c({field:y,asc:!0});return}_(),c({field:"",asc:null});return}a(o.sort((w,b)=>typeof w[y]=="number"?w[y]-b[y]:(""+w[y]).localeCompare(b[y]))),c({field:y,asc:!1})}const m=(y,w)=>p.jsxs("div",{className:`flex py-2 ${w==="coin"||w==="spent coin"||w==="type"?"justify-start":"justify-end"} items-center`,children:[n(w),v(y)?p.jsx("i",{className:"material-icons",children:l.asc?"expand_less":"expand_more"}):null]});function v(y){return l.field===y}function _(){a(i.slice((u-1)*r,u*r))}return p.jsxs("div",{children:[p.jsxs("table",{className:"w-full h-full",children:[p.jsx("thead",{children:p.jsxs("tr",{className:"border-b",children:[p.jsx("th",{onClick:()=>g("name"),className:"cursor-pointer bg-white dark:bg-gray-800 ",children:m("name","coin")}),p.jsx("th",{onClick:()=>g("amount"),className:"cursor-pointer bg-white dark:bg-gray-800",children:m("amount","amount")}),p.jsx("th",{className:"cursor-pointer bg-white dark:bg-gray-800 md:table-cell hidden",children:m("accountNumber","accountNumber")}),p.jsx("th",{onClick:()=>g("timestamp"),className:"cursor-pointer bg-white dark:bg-gray-800",children:m("timestamp","time")})]})}),p.jsx("tbody",{children:o.map((y,w)=>p.jsx(sge,{data:y,index:w+1+(u-1)*r,header:!1},y.id))})]}),p.jsx("div",{className:`${o.length===0?"":"hidden"} h-20`,children:p.jsx(ku,{})}),p.jsx(Ru,{totalPageNumber:f,currentPage:u,setCurrentPage:d})]})}function age(){const{t}=Qe(),{currentUserData:e}=Ns(),[n,r]=S.useState("buy"),[i,s]=S.useState([]),o=qf($o),[a,l]=S.useState(window.innerWidth),[c,u]=S.useState({width:0,transform:"translateX(0px)"}),d=S.useRef([]);S.useEffect(()=>{if(d.current[n]){const{offsetLeft:m,clientWidth:v}=d.current[n];u({width:v,transform:`translateX(${m}px)`})}},[n,d,a]),S.useEffect(()=>{s(o.data.map(m=>({id:m.id,label:m.name,image:m.image,symbol:m.symbol,...m})))},[o.data]),S.useEffect(()=>{const m=()=>{l(window.innerWidth)};return window.addEventListener("resize",m),()=>{window.removeEventListener("resize",m)}},[]);const h=()=>{switch(n){case"buy":return p.jsx(nge,{transactions:e.transactions,currencies:i});case"trade":return p.jsx(ige,{transactions:e.transactions,currencies:i});case"withdraw":return p.jsx(oge,{transactions:e.transactions,currencies:i});default:return null}},f=m=>{switch(m){case"buy":return"shopping_cart";case"trade":return"compare_arrows";case"withdraw":return"account_balance";default:return""}},g=m=>p.jsx("div",{className:`flex flex-col justify-start items-center text-xl font-semibold ${n===m&&"text-custom-teal"}`,children:p.jsxs("button",{ref:v=>d.current[m]=v,className:"flex justify-center items-center gap-2 p-1 hover:text-gray-500 dark:hover:text-gray-300",onClick:()=>r(m),children:[p.jsx("i",{className:"material-icons",children:f(m)}),t(m)]})});return p.jsxs("div",{className:"scrollable-content content",children:[p.jsxs("div",{className:"p-5 text-slate-950 dark:text-white flex flex-col items-center justify-start",children:[p.jsx("h1",{className:"mb-5 text-3xl font-bold w-full",children:t("transactions-history")}),p.jsxs("div",{className:"w-full xl:w-[80%] flex flex-col justify-center items-start border-b md:p-0",children:[p.jsxs("div",{className:"flex justify-between md:justify-start w-full gap-5 relative",children:[g("buy"),g("trade"),g("withdraw")]}),p.jsx("div",{className:"w-full border-2 rounded border-custom-teal",style:{...c,transition:"width 0.3s ease, transform 0.3s ease"}})]}),p.jsx("div",{className:"pt-5 md:p-5 h-full w-full xl:w-[80%]",children:h()})]}),p.jsx(bl,{})]})}var FN={};const jN="@firebase/database",$N="1.0.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let y5="";function lge(t){y5=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cge{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),wn(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:jh(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uge{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return di(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _5=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new cge(e)}}catch{}return new uge},xa=_5("localStorage"),vS=_5("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ec=new Gf("@firebase/database"),dge=function(){let t=1;return function(){return t++}}(),v5=function(t){const e=C7(t),n=new S7;n.update(e);const r=n.digest();return JE.encodeByteArray(r)},Ip=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Ip.apply(null,r):typeof r=="object"?e+=wn(r):e+=r,e+=" "}return e};let Na=null,UN=!0;const hge=function(t,e){ee(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(Ec.logLevel=ke.VERBOSE,Na=Ec.log.bind(Ec),e&&vS.set("logging_enabled",!0)):typeof t=="function"?Na=t:(Na=null,vS.remove("logging_enabled"))},On=function(...t){if(UN===!0&&(UN=!1,Na===null&&vS.get("logging_enabled")===!0&&hge(!0)),Na){const e=Ip.apply(null,t);Na(e)}},Cp=function(t){return function(...e){On(t,...e)}},wS=function(...t){const e="FIREBASE INTERNAL ERROR: "+Ip(...t);Ec.error(e)},nl=function(...t){const e=`FIREBASE FATAL ERROR: ${Ip(...t)}`;throw Ec.error(e),new Error(e)},Cr=function(...t){const e="FIREBASE WARNING: "+Ip(...t);Ec.warn(e)},fge=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Cr("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},w5=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},pge=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},su="[MIN_NAME]",rl="[MAX_NAME]",Pu=function(t,e){if(t===e)return 0;if(t===su||e===rl)return-1;if(e===su||t===rl)return 1;{const n=BN(t),r=BN(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},gge=function(t,e){return t===e?0:t<e?-1:1},hd=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+wn(e))},k1=function(t){if(typeof t!="object"||t===null)return wn(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=wn(e[r]),n+=":",n+=k1(t[e[r]]);return n+="}",n},b5=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function Qr(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const x5=function(t){ee(!w5(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let i,s,o,a,l;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));const c=[];for(l=n;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(l=e;l;l-=1)c.push(s%2?1:0),s=Math.floor(s/2);c.push(i?1:0),c.reverse();const u=c.join("");let d="";for(l=0;l<64;l+=8){let h=parseInt(u.substr(l,8),2).toString(16);h.length===1&&(h="0"+h),d=d+h}return d.toLowerCase()},mge=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},yge=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"},_ge=new RegExp("^-?(0*)\\d{1,10}$"),vge=-2147483648,wge=2147483647,BN=function(t){if(_ge.test(t)){const e=Number(t);if(e>=vge&&e<=wge)return e}return null},Rp=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw Cr("Exception was thrown by user callback.",n),e},Math.floor(0))}},bge=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},ph=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xge{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Cr(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sge{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(On("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Cr(e)}}class bS{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}bS.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A1="5",S5="v",E5="s",T5="r",I5="f",C5=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,R5="ls",k5="p",xS="ac",A5="websocket",P5="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ege{constructor(e,n,r,i,s=!1,o="",a=!1,l=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=xa.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&xa.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function Tge(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function N5(t,e,n){ee(typeof e=="string","typeof type must == string"),ee(typeof n=="object","typeof params must == object");let r;if(e===A5)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===P5)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);Tge(t)&&(n.ns=t.namespace);const i=[];return Qr(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ige{constructor(){this.counters_={}}incrementCounter(e,n=1){di(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return l7(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nw={},Dw={};function P1(t){const e=t.toString();return Nw[e]||(Nw[e]=new Ige),Nw[e]}function Cge(t,e){const n=t.toString();return Dw[n]||(Dw[n]=e()),Dw[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rge{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Rp(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zN="start",kge="close",Age="pLPCommand",Pge="pRTLPCB",D5="id",O5="pw",M5="ser",Nge="cb",Dge="seg",Oge="ts",Mge="d",Lge="dframe",L5=1870,V5=30,Vge=L5-V5,Fge=25e3,jge=3e4;class oc{constructor(e,n,r,i,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Cp(e),this.stats_=P1(n),this.urlFn=l=>(this.appCheckToken&&(l[xS]=this.appCheckToken),N5(n,P5,l))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new Rge(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(jge)),pge(()=>{if(this.isClosed_)return;this.scriptTagHolder=new N1((...s)=>{const[o,a,l,c,u]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===zN)this.id=a,this.password=l;else if(o===kge)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[zN]="t",r[M5]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[Nge]=this.scriptTagHolder.uniqueCallbackIdentifier),r[S5]=A1,this.transportSessionId&&(r[E5]=this.transportSessionId),this.lastSessionId&&(r[R5]=this.lastSessionId),this.applicationId&&(r[k5]=this.applicationId),this.appCheckToken&&(r[xS]=this.appCheckToken),typeof location<"u"&&location.hostname&&C5.test(location.hostname)&&(r[T5]=I5);const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){oc.forceAllow_=!0}static forceDisallow(){oc.forceDisallow_=!0}static isAvailable(){return oc.forceAllow_?!0:!oc.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!mge()&&!yge()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=wn(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=M2(n),i=b5(r,Vge);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[Lge]="t",r[D5]=e,r[O5]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=wn(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class N1{constructor(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=dge(),window[Age+this.uniqueCallbackIdentifier]=e,window[Pge+this.uniqueCallbackIdentifier]=n,this.myIFrame=N1.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){On("frame writing exception"),a.stack&&On(a.stack),On(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||On("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[D5]=this.myID,e[O5]=this.myPW,e[M5]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+V5+r.length<=L5;){const o=this.pendingSegs.shift();r=r+"&"+Dge+i+"="+o.seg+"&"+Oge+i+"="+o.ts+"&"+Mge+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(Fge)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{On("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $ge=16384,Uge=45e3;let jy=null;typeof MozWebSocket<"u"?jy=MozWebSocket:typeof WebSocket<"u"&&(jy=WebSocket);class ni{constructor(e,n,r,i,s,o,a){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Cp(this.connId),this.stats_=P1(n),this.connURL=ni.connectionURL_(n,o,a,i,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,i,s){const o={};return o[S5]=A1,typeof location<"u"&&location.hostname&&C5.test(location.hostname)&&(o[T5]=I5),n&&(o[E5]=n),r&&(o[R5]=r),i&&(o[xS]=i),s&&(o[k5]=s),N5(e,A5,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,xa.set("previous_websocket_failure",!0);try{let r;j2(),this.mySock=new jy(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){ni.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&jy!==null&&!ni.forceDisallow_}static previouslyFailed(){return xa.isInMemoryStorage||xa.get("previous_websocket_failure")===!0}markConnectionHealthy(){xa.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=jh(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(ee(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=wn(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=b5(n,$ge);r.length>1&&this.sendString_(String(r.length));for(let i=0;i<r.length;i++)this.sendString_(r[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(Uge))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}ni.responsesRequiredToBeHealthy=2;ni.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cf{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[oc,ni]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=ni&&ni.isAvailable();let r=n&&!ni.previouslyFailed();if(e.webSocketOnly&&(n||Cr("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[ni];else{const i=this.transports_=[];for(const s of Cf.ALL_TRANSPORTS)s&&s.isAvailable()&&i.push(s);Cf.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Cf.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bge=6e4,zge=5e3,Wge=10*1024,Hge=100*1024,Ow="t",WN="d",qge="s",HN="r",Gge="e",qN="o",GN="a",KN="n",QN="p",Kge="h";class Qge{constructor(e,n,r,i,s,o,a,l,c,u){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Cp("c:"+this.id+":"),this.transportManager_=new Cf(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=ph(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>Hge?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>Wge?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Ow in e){const n=e[Ow];n===GN?this.upgradeIfSecondaryHealthy_():n===HN?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===qN&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=hd("t",e),r=hd("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:QN,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:GN,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:KN,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=hd("t",e),r=hd("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=hd(Ow,e);if(WN in e){const r=e[WN];if(n===Kge){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===KN){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===qge?this.onConnectionShutdown_(r):n===HN?this.onReset_(r):n===Gge?wS("Server Error: "+r):n===qN?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):wS("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),A1!==r&&Cr("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),ph(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(Bge))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):ph(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(zge))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:QN,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(xa.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F5{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let j5=class{constructor(e){this.allowedEvents_=e,this.listeners_={},ee(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){ee(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $y extends j5{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!tT()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new $y}getInitialEvent(e){return ee(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YN=32,XN=768;class mt{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function Xe(){return new mt("")}function Le(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Do(t){return t.pieces_.length-t.pieceNum_}function at(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new mt(t.pieces_,e)}function $5(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function Yge(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function U5(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function B5(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new mt(e,0)}function ln(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof mt)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new mt(n,0)}function Oe(t){return t.pieceNum_>=t.pieces_.length}function zr(t,e){const n=Le(t),r=Le(e);if(n===null)return e;if(n===r)return zr(at(t),at(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function z5(t,e){if(Do(t)!==Do(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function ii(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(Do(t)>Do(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class Xge{constructor(e,n){this.errorPrefix_=n,this.parts_=U5(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=F_(this.parts_[r]);W5(this)}}function Jge(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=F_(e),W5(t)}function Zge(t){const e=t.parts_.pop();t.byteLength_-=F_(e),t.parts_.length>0&&(t.byteLength_-=1)}function W5(t){if(t.byteLength_>XN)throw new Error(t.errorPrefix_+"has a key path longer than "+XN+" bytes ("+t.byteLength_+").");if(t.parts_.length>YN)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+YN+") or object contains a cycle "+oa(t))}function oa(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D1 extends j5{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new D1}getInitialEvent(e){return ee(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fd=1e3,eme=60*5*1e3,JN=30*1e3,tme=1.3,nme=3e4,rme="server_kill",ZN=3;class ps extends F5{constructor(e,n,r,i,s,o,a,l){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=i,this.onServerInfoUpdate_=s,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=ps.nextPersistentConnectionId_++,this.log_=Cp("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=fd,this.maxReconnectDelay_=eme,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!j2())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");D1.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&$y.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const i=++this.requestNumber_,s={r:i,a:e,b:n};this.log_(wn(s)),ee(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),r&&(this.requestCBHash_[i]=r)}get(e){this.initConnection_();const n=new eT,i={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),n.promise}listen(e,n,r,i){this.initConnection_();const s=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+s),this.listens.has(o)||this.listens.set(o,new Map),ee(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),ee(!this.listens.get(o).has(s),"listen() called twice for same path/queryId.");const a={onComplete:i,hashFn:n,query:e,tag:r};this.listens.get(o).set(s,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),i=n._queryIdentifier;this.log_("Listen on "+r+" for "+i);const s={p:r},o="q";e.tag&&(s.q=n._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(o,s,a=>{const l=a.d,c=a.s;ps.warnOnListenWarnings_(l,n),(this.listens.get(r)&&this.listens.get(r).get(i))===e&&(this.log_("listen response",a),c!=="ok"&&this.removeListen_(r,i),e.onComplete&&e.onComplete(c,l))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&di(e,"w")){const r=Fc(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const i='".indexOn": "'+n._queryParams.getIndex().toString()+'"',s=n._path.toString();Cr(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||x7(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=JN)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=b7(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,i=>{const s=i.s,o=i.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+i),ee(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,i)&&this.connected_&&this.sendUnlisten_(r,i,e._queryObject,n)}sendUnlisten_(e,n,r,i){this.log_("Unlisten on "+e+" for "+n);const s={p:e},o="n";i&&(s.q=r,s.t=i),this.sendRequest(o,s)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,i){const s={p:n,d:r};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,o=>{i&&setTimeout(()=>{i(o.s,o.d)},Math.floor(0))})}put(e,n,r,i){this.putInternal("p",e,n,r,i)}merge(e,n,r,i){this.putInternal("m",e,n,r,i)}putInternal(e,n,r,i,s){this.initConnection_();const o={p:n,d:r};s!==void 0&&(o.h=s),this.outstandingPuts_.push({action:e,request:o,onComplete:i}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,s=>{this.log_(n+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(s.s,s.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const s=r.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+wn(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):wS("Unrecognized action received from server: "+wn(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){ee(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=fd,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=fd,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>nme&&(this.reconnectDelay_=fd),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*tme)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+ps.nextConnectionId_++,s=this.lastSessionId;let o=!1,a=null;const l=function(){a?a.close():(o=!0,r())},c=function(d){ee(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(d)};this.realtime_={close:l,sendRequest:c};const u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,h]=await Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);o?On("getToken() completed but was canceled"):(On("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=h&&h.token,a=new Qge(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,f=>{Cr(f+" ("+this.repoInfo_.toString()+")"),this.interrupt(rme)},s))}catch(d){this.log_("Failed to get token: "+d),o||(this.repoInfo_.nodeAdmin&&Cr(d),l())}}}interrupt(e){On("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){On("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Xb(this.interruptReasons_)&&(this.reconnectDelay_=fd,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(s=>k1(s)).join("$"):r="default";const i=this.removeListen_(e,r);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,n){const r=new mt(e).toString();let i;if(this.listens.has(r)){const s=this.listens.get(r);i=s.get(n),s.delete(n),s.size===0&&this.listens.delete(r)}else i=void 0;return i}onAuthRevoked_(e,n){On("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=ZN&&(this.reconnectDelay_=JN,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){On("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=ZN&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+y5.replace(/\./g,"-")]=1,tT()?e["framework.cordova"]=1:V_()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=$y.getInstance().currentlyOnline();return Xb(this.interruptReasons_)&&e}}ps.nextPersistentConnectionId_=0;ps.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new Ve(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zv{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new Ve(su,e),i=new Ve(su,n);return this.compare(r,i)!==0}minPost(){return Ve.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ag;class H5 extends Zv{static get __EMPTY_NODE(){return Ag}static set __EMPTY_NODE(e){Ag=e}compare(e,n){return Pu(e.name,n.name)}isDefinedOn(e){throw fu("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Ve.MIN}maxPost(){return new Ve(rl,Ag)}makePost(e,n){return ee(typeof e=="string","KeyIndex indexValue must always be a string."),new Ve(e,Ag)}toString(){return".key"}}const Tc=new H5;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pg{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class an{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??an.RED,this.left=i??dr.EMPTY_NODE,this.right=s??dr.EMPTY_NODE}copy(e,n,r,i,s){return new an(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return s<0?i=i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i=i.copy(null,n,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return dr.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,i;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return dr.EMPTY_NODE;i=r.right.min_(),r=r.copy(i.key,i.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,an.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,an.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}an.RED=!0;an.BLACK=!1;class ime{copy(e,n,r,i,s){return this}insert(e,n,r){return new an(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class dr{constructor(e,n=dr.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new dr(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,an.BLACK,null,null))}remove(e){return new dr(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,an.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Pg(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Pg(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Pg(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Pg(this.root_,null,this.comparator_,!0,e)}}dr.EMPTY_NODE=new ime;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sme(t,e){return Pu(t.name,e.name)}function O1(t,e){return Pu(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let SS;function ome(t){SS=t}const q5=function(t){return typeof t=="number"?"number:"+x5(t):"string:"+t},G5=function(t){if(t.isLeafNode()){const e=t.val();ee(typeof e=="string"||typeof e=="number"||typeof e=="object"&&di(e,".sv"),"Priority must be a string or number.")}else ee(t===SS||t.isEmpty(),"priority of unexpected type.");ee(t===SS||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eD;class nn{constructor(e,n=nn.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,ee(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),G5(this.priorityNode_)}static set __childrenNodeConstructor(e){eD=e}static get __childrenNodeConstructor(){return eD}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new nn(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:nn.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Oe(e)?this:Le(e)===".priority"?this.priorityNode_:nn.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:nn.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=Le(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(ee(r!==".priority"||Do(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,nn.__childrenNodeConstructor.EMPTY_NODE.updateChild(at(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+q5(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=x5(this.value_):e+=this.value_,this.lazyHash_=v5(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===nn.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof nn.__childrenNodeConstructor?-1:(ee(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,i=nn.VALUE_TYPE_ORDER.indexOf(n),s=nn.VALUE_TYPE_ORDER.indexOf(r);return ee(i>=0,"Unknown leaf type: "+n),ee(s>=0,"Unknown leaf type: "+r),i===s?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}nn.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let K5,Q5;function ame(t){K5=t}function lme(t){Q5=t}class cme extends Zv{compare(e,n){const r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?Pu(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Ve.MIN}maxPost(){return new Ve(rl,new nn("[PRIORITY-POST]",Q5))}makePost(e,n){const r=K5(e);return new Ve(n,new nn("[PRIORITY-POST]",r))}toString(){return".priority"}}const Vn=new cme;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ume=Math.log(2);class dme{constructor(e){const n=s=>parseInt(Math.log(s)/ume,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Uy=function(t,e,n,r){t.sort(e);const i=function(l,c){const u=c-l;let d,h;if(u===0)return null;if(u===1)return d=t[l],h=n?n(d):d,new an(h,d.node,an.BLACK,null,null);{const f=parseInt(u/2,10)+l,g=i(l,f),m=i(f+1,c);return d=t[f],h=n?n(d):d,new an(h,d.node,an.BLACK,g,m)}},s=function(l){let c=null,u=null,d=t.length;const h=function(g,m){const v=d-g,_=d;d-=g;const y=i(v+1,_),w=t[v],b=n?n(w):w;f(new an(b,w.node,m,null,y))},f=function(g){c?(c.left=g,c=g):(u=g,c=g)};for(let g=0;g<l.count;++g){const m=l.nextBitIsOne(),v=Math.pow(2,l.count-(g+1));m?h(v,an.BLACK):(h(v,an.BLACK),h(v,an.RED))}return u},o=new dme(t.length),a=s(o);return new dr(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mw;const Vl={};class cs{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return ee(Vl&&Vn,"ChildrenNode.ts has not been loaded"),Mw=Mw||new cs({".priority":Vl},{".priority":Vn}),Mw}get(e){const n=Fc(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof dr?n:null}hasIndex(e){return di(this.indexSet_,e.toString())}addIndex(e,n){ee(e!==Tc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=n.getIterator(Ve.Wrap);let o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=Uy(r,e.getCompare()):a=Vl;const l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;const u=Object.assign({},this.indexes_);return u[l]=a,new cs(u,c)}addToIndexes(e,n){const r=Ym(this.indexes_,(i,s)=>{const o=Fc(this.indexSet_,s);if(ee(o,"Missing index implementation for "+s),i===Vl)if(o.isDefinedOn(e.node)){const a=[],l=n.getIterator(Ve.Wrap);let c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),Uy(a,o.getCompare())}else return Vl;else{const a=n.get(e.name);let l=i;return a&&(l=l.remove(new Ve(e.name,a))),l.insert(e,e.node)}});return new cs(r,this.indexSet_)}removeFromIndexes(e,n){const r=Ym(this.indexes_,i=>{if(i===Vl)return i;{const s=n.get(e.name);return s?i.remove(new Ve(e.name,s)):i}});return new cs(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pd;class We{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&G5(this.priorityNode_),this.children_.isEmpty()&&ee(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return pd||(pd=new We(new dr(O1),null,cs.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||pd}updatePriority(e){return this.children_.isEmpty()?this:new We(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?pd:n}}getChild(e){const n=Le(e);return n===null?this:this.getImmediateChild(n).getChild(at(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(ee(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new Ve(e,n);let i,s;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));const o=i.isEmpty()?pd:this.priorityNode_;return new We(i,o,s)}}updateChild(e,n){const r=Le(e);if(r===null)return n;{ee(Le(e)!==".priority"||Do(e)===1,".priority must be the last token in a path");const i=this.getImmediateChild(r).updateChild(at(e),n);return this.updateImmediateChild(r,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,i=0,s=!0;if(this.forEachChild(Vn,(o,a)=>{n[o]=a.val(e),r++,s&&We.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):s=!1}),!e&&s&&i<2*r){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+q5(this.getPriority().val())+":"),this.forEachChild(Vn,(n,r)=>{const i=r.hash();i!==""&&(e+=":"+n+":"+i)}),this.lazyHash_=e===""?"":v5(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const i=this.resolveIndex_(r);if(i){const s=i.getPredecessorKey(new Ve(e,n));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new Ve(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new Ve(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(i=>n(i.name,i.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,i=>i);{const i=this.children_.getIteratorFrom(e.name,Ve.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)<0;)i.getNext(),s=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,i=>i);{const i=this.children_.getReverseIteratorFrom(e.name,Ve.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)>0;)i.getNext(),s=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===kp?-1:0}withIndex(e){if(e===Tc||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new We(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Tc||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(Vn),i=n.getIterator(Vn);let s=r.getNext(),o=i.getNext();for(;s&&o;){if(s.name!==o.name||!s.node.equals(o.node))return!1;s=r.getNext(),o=i.getNext()}return s===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===Tc?null:this.indexMap_.get(e.toString())}}We.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class hme extends We{constructor(){super(new dr(O1),We.EMPTY_NODE,cs.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return We.EMPTY_NODE}isEmpty(){return!1}}const kp=new hme;Object.defineProperties(Ve,{MIN:{value:new Ve(su,We.EMPTY_NODE)},MAX:{value:new Ve(rl,kp)}});H5.__EMPTY_NODE=We.EMPTY_NODE;nn.__childrenNodeConstructor=We;ome(kp);lme(kp);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fme=!0;function Mn(t,e=null){if(t===null)return We.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),ee(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new nn(n,Mn(e))}if(!(t instanceof Array)&&fme){const n=[];let r=!1;if(Qr(t,(o,a)=>{if(o.substring(0,1)!=="."){const l=Mn(a);l.isEmpty()||(r=r||!l.getPriority().isEmpty(),n.push(new Ve(o,l)))}}),n.length===0)return We.EMPTY_NODE;const s=Uy(n,sme,o=>o.name,O1);if(r){const o=Uy(n,Vn.getCompare());return new We(s,Mn(e),new cs({".priority":o},{".priority":Vn}))}else return new We(s,Mn(e),cs.Default)}else{let n=We.EMPTY_NODE;return Qr(t,(r,i)=>{if(di(t,r)&&r.substring(0,1)!=="."){const s=Mn(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(Mn(e))}}ame(Mn);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pme extends Zv{constructor(e){super(),this.indexPath_=e,ee(!Oe(e)&&Le(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?Pu(e.name,n.name):s}makePost(e,n){const r=Mn(e),i=We.EMPTY_NODE.updateChild(this.indexPath_,r);return new Ve(n,i)}maxPost(){const e=We.EMPTY_NODE.updateChild(this.indexPath_,kp);return new Ve(rl,e)}toString(){return U5(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gme extends Zv{compare(e,n){const r=e.node.compareTo(n.node);return r===0?Pu(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Ve.MIN}maxPost(){return Ve.MAX}makePost(e,n){const r=Mn(e);return new Ve(n,r)}toString(){return".value"}}const mme=new gme;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yme(t){return{type:"value",snapshotNode:t}}function _me(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function vme(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function tD(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function wme(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Vn}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return ee(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return ee(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:su}hasEnd(){return this.endSet_}getIndexEndValue(){return ee(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return ee(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:rl}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return ee(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Vn}copy(){const e=new M1;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function nD(t){const e={};if(t.isDefault())return e;let n;if(t.index_===Vn?n="$priority":t.index_===mme?n="$value":t.index_===Tc?n="$key":(ee(t.index_ instanceof pme,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=wn(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=wn(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+wn(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=wn(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+wn(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function rD(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==Vn&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class By extends F5{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Cp("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(ee(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=By.getListenId_(e,r),a={};this.listens_[o]=a;const l=nD(e._queryParams);this.restRequest_(s+".json",l,(c,u)=>{let d=u;if(c===404&&(d=null,c=null),c===null&&this.onDataUpdate_(s,d,!1,r),Fc(this.listens_,o)===a){let h;c?c===401?h="permission_denied":h="rest_error:"+c:h="ok",i(h,null)}})}unlisten(e,n){const r=By.getListenId_(e,n);delete this.listens_[r]}get(e){const n=nD(e._queryParams),r=e._path.toString(),i=new eT;return this.restRequest_(r+".json",n,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+hl(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=jh(a.responseText)}catch{Cr("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,l)}else a.status!==401&&a.status!==404&&Cr("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bme{constructor(){this.rootNode_=We.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zy(){return{value:null,children:new Map}}function Y5(t,e,n){if(Oe(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=Le(e);t.children.has(r)||t.children.set(r,zy());const i=t.children.get(r);e=at(e),Y5(i,e,n)}}function ES(t,e,n){t.value!==null?n(e,t.value):xme(t,(r,i)=>{const s=new mt(e.toString()+"/"+r);ES(i,s,n)})}function xme(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sme{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&Qr(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iD=10*1e3,Eme=30*1e3,Tme=5*60*1e3;class Ime{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new Sme(e);const r=iD+(Eme-iD)*Math.random();ph(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;Qr(e,(i,s)=>{s>0&&di(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),ph(this.reportStats_.bind(this),Math.floor(Math.random()*2*Tme))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Oi;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Oi||(Oi={}));function X5(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function J5(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Z5(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wy{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=Oi.ACK_USER_WRITE,this.source=X5()}operationForChild(e){if(Oe(this.path)){if(this.affectedTree.value!=null)return ee(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new mt(e));return new Wy(Xe(),n,this.revert)}}else return ee(Le(this.path)===e,"operationForChild called for unrelated child."),new Wy(at(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=Oi.OVERWRITE}operationForChild(e){return Oe(this.path)?new il(this.source,Xe(),this.snap.getImmediateChild(e)):new il(this.source,at(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=Oi.MERGE}operationForChild(e){if(Oe(this.path)){const n=this.children.subtree(new mt(e));return n.isEmpty()?null:n.value?new il(this.source,Xe(),n.value):new Rf(this.source,Xe(),n)}else return ee(Le(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Rf(this.source,at(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L1{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Oe(e))return this.isFullyInitialized()&&!this.filtered_;const n=Le(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function Cme(t,e,n,r){const i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(wme(o.childName,o.snapshotNode))}),gd(t,i,"child_removed",e,r,n),gd(t,i,"child_added",e,r,n),gd(t,i,"child_moved",s,r,n),gd(t,i,"child_changed",e,r,n),gd(t,i,"value",e,r,n),i}function gd(t,e,n,r,i,s){const o=r.filter(a=>a.type===n);o.sort((a,l)=>kme(t,a,l)),o.forEach(a=>{const l=Rme(t,a,s);i.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,t.query_))})})}function Rme(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function kme(t,e,n){if(e.childName==null||n.childName==null)throw fu("Should only compare child_ events.");const r=new Ve(e.childName,e.snapshotNode),i=new Ve(n.childName,n.snapshotNode);return t.index_.compare(r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e4(t,e){return{eventCache:t,serverCache:e}}function gh(t,e,n,r){return e4(new L1(e,n,r),t.serverCache)}function t4(t,e,n,r){return e4(t.eventCache,new L1(e,n,r))}function TS(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function sl(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lw;const Ame=()=>(Lw||(Lw=new dr(gge)),Lw);class ot{constructor(e,n=Ame()){this.value=e,this.children=n}static fromObject(e){let n=new ot(null);return Qr(e,(r,i)=>{n=n.set(new mt(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:Xe(),value:this.value};if(Oe(e))return null;{const r=Le(e),i=this.children.get(r);if(i!==null){const s=i.findRootMostMatchingPathAndValue(at(e),n);return s!=null?{path:ln(new mt(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Oe(e))return this;{const n=Le(e),r=this.children.get(n);return r!==null?r.subtree(at(e)):new ot(null)}}set(e,n){if(Oe(e))return new ot(n,this.children);{const r=Le(e),s=(this.children.get(r)||new ot(null)).set(at(e),n),o=this.children.insert(r,s);return new ot(this.value,o)}}remove(e){if(Oe(e))return this.children.isEmpty()?new ot(null):new ot(null,this.children);{const n=Le(e),r=this.children.get(n);if(r){const i=r.remove(at(e));let s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new ot(null):new ot(this.value,s)}else return this}}get(e){if(Oe(e))return this.value;{const n=Le(e),r=this.children.get(n);return r?r.get(at(e)):null}}setTree(e,n){if(Oe(e))return n;{const r=Le(e),s=(this.children.get(r)||new ot(null)).setTree(at(e),n);let o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new ot(this.value,o)}}fold(e){return this.fold_(Xe(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(ln(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,Xe(),n)}findOnPath_(e,n,r){const i=this.value?r(n,this.value):!1;if(i)return i;if(Oe(e))return null;{const s=Le(e),o=this.children.get(s);return o?o.findOnPath_(at(e),ln(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,Xe(),n)}foreachOnPath_(e,n,r){if(Oe(e))return this;{this.value&&r(n,this.value);const i=Le(e),s=this.children.get(i);return s?s.foreachOnPath_(at(e),ln(n,i),r):new ot(null)}}foreach(e){this.foreach_(Xe(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(ln(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(e){this.writeTree_=e}static empty(){return new ci(new ot(null))}}function mh(t,e,n){if(Oe(e))return new ci(new ot(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const i=r.path;let s=r.value;const o=zr(i,e);return s=s.updateChild(o,n),new ci(t.writeTree_.set(i,s))}else{const i=new ot(n),s=t.writeTree_.setTree(e,i);return new ci(s)}}}function sD(t,e,n){let r=t;return Qr(n,(i,s)=>{r=mh(r,ln(e,i),s)}),r}function oD(t,e){if(Oe(e))return ci.empty();{const n=t.writeTree_.setTree(e,new ot(null));return new ci(n)}}function IS(t,e){return Sl(t,e)!=null}function Sl(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(zr(n.path,e)):null}function aD(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Vn,(r,i)=>{e.push(new Ve(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new Ve(r,i.value))}),e}function go(t,e){if(Oe(e))return t;{const n=Sl(t,e);return n!=null?new ci(new ot(n)):new ci(t.writeTree_.subtree(e))}}function CS(t){return t.writeTree_.isEmpty()}function ou(t,e){return n4(Xe(),t.writeTree_,e)}function n4(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(ee(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=n4(ln(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(ln(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r4(t,e){return l4(e,t)}function Pme(t,e,n,r,i){ee(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=mh(t.visibleWrites,e,n)),t.lastWriteId=r}function Nme(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function Dme(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);ee(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&Ome(a,r.path)?i=!1:ii(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return Mme(t),!0;if(r.snap)t.visibleWrites=oD(t.visibleWrites,r.path);else{const a=r.children;Qr(a,l=>{t.visibleWrites=oD(t.visibleWrites,ln(r.path,l))})}return!0}else return!1}function Ome(t,e){if(t.snap)return ii(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&ii(ln(t.path,n),e))return!0;return!1}function Mme(t){t.visibleWrites=i4(t.allWrites,Lme,Xe()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function Lme(t){return t.visible}function i4(t,e,n){let r=ci.empty();for(let i=0;i<t.length;++i){const s=t[i];if(e(s)){const o=s.path;let a;if(s.snap)ii(n,o)?(a=zr(n,o),r=mh(r,a,s.snap)):ii(o,n)&&(a=zr(o,n),r=mh(r,Xe(),s.snap.getChild(a)));else if(s.children){if(ii(n,o))a=zr(n,o),r=sD(r,a,s.children);else if(ii(o,n))if(a=zr(o,n),Oe(a))r=sD(r,Xe(),s.children);else{const l=Fc(s.children,Le(a));if(l){const c=l.getChild(at(a));r=mh(r,Xe(),c)}}}else throw fu("WriteRecord should have .snap or .children")}}return r}function s4(t,e,n,r,i){if(!r&&!i){const s=Sl(t.visibleWrites,e);if(s!=null)return s;{const o=go(t.visibleWrites,e);if(CS(o))return n;if(n==null&&!IS(o,Xe()))return null;{const a=n||We.EMPTY_NODE;return ou(o,a)}}}else{const s=go(t.visibleWrites,e);if(!i&&CS(s))return n;if(!i&&n==null&&!IS(s,Xe()))return null;{const o=function(c){return(c.visible||i)&&(!r||!~r.indexOf(c.writeId))&&(ii(c.path,e)||ii(e,c.path))},a=i4(t.allWrites,o,e),l=n||We.EMPTY_NODE;return ou(a,l)}}}function Vme(t,e,n){let r=We.EMPTY_NODE;const i=Sl(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Vn,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){const s=go(t.visibleWrites,e);return n.forEachChild(Vn,(o,a)=>{const l=ou(go(s,new mt(o)),a);r=r.updateImmediateChild(o,l)}),aD(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const s=go(t.visibleWrites,e);return aD(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function Fme(t,e,n,r,i){ee(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=ln(e,n);if(IS(t.visibleWrites,s))return null;{const o=go(t.visibleWrites,s);return CS(o)?i.getChild(n):ou(o,i.getChild(n))}}function jme(t,e,n,r){const i=ln(e,n),s=Sl(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){const o=go(t.visibleWrites,i);return ou(o,r.getNode().getImmediateChild(n))}else return null}function $me(t,e){return Sl(t.visibleWrites,e)}function Ume(t,e,n,r,i,s,o){let a;const l=go(t.visibleWrites,e),c=Sl(l,Xe());if(c!=null)a=c;else if(n!=null)a=ou(l,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const u=[],d=o.getCompare(),h=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let f=h.getNext();for(;f&&u.length<i;)d(f,r)!==0&&u.push(f),f=h.getNext();return u}else return[]}function Bme(){return{visibleWrites:ci.empty(),allWrites:[],lastWriteId:-1}}function RS(t,e,n,r){return s4(t.writeTree,t.treePath,e,n,r)}function o4(t,e){return Vme(t.writeTree,t.treePath,e)}function lD(t,e,n,r){return Fme(t.writeTree,t.treePath,e,n,r)}function Hy(t,e){return $me(t.writeTree,ln(t.treePath,e))}function zme(t,e,n,r,i,s){return Ume(t.writeTree,t.treePath,e,n,r,i,s)}function V1(t,e,n){return jme(t.writeTree,t.treePath,e,n)}function a4(t,e){return l4(ln(t.treePath,e),t.writeTree)}function l4(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wme{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;ee(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),ee(r!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,tD(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,vme(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,_me(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,tD(r,e.snapshotNode,i.oldSnap));else throw fu("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hme{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const c4=new Hme;class F1{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new L1(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return V1(this.writes_,e,r)}}getChildAfterChild(e,n,r){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:sl(this.viewCache_),s=zme(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}}function qme(t,e){ee(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),ee(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function Gme(t,e,n,r,i){const s=new Wme;let o,a;if(n.type===Oi.OVERWRITE){const c=n;c.source.fromUser?o=kS(t,e,c.path,c.snap,r,i,s):(ee(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!Oe(c.path),o=qy(t,e,c.path,c.snap,r,i,a,s))}else if(n.type===Oi.MERGE){const c=n;c.source.fromUser?o=Qme(t,e,c.path,c.children,r,i,s):(ee(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=AS(t,e,c.path,c.children,r,i,a,s))}else if(n.type===Oi.ACK_USER_WRITE){const c=n;c.revert?o=Jme(t,e,c.path,r,i,s):o=Yme(t,e,c.path,c.affectedTree,r,i,s)}else if(n.type===Oi.LISTEN_COMPLETE)o=Xme(t,e,n.path,r,s);else throw fu("Unknown operation type: "+n.type);const l=s.getChanges();return Kme(e,o,l),{viewCache:o,changes:l}}function Kme(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=TS(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(yme(TS(e)))}}function u4(t,e,n,r,i,s){const o=e.eventCache;if(Hy(r,n)!=null)return e;{let a,l;if(Oe(n))if(ee(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=sl(e),u=c instanceof We?c:We.EMPTY_NODE,d=o4(r,u);a=t.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{const c=RS(r,sl(e));a=t.filter.updateFullNode(e.eventCache.getNode(),c,s)}else{const c=Le(n);if(c===".priority"){ee(Do(n)===1,"Can't have a priority with additional path components");const u=o.getNode();l=e.serverCache.getNode();const d=lD(r,n,u,l);d!=null?a=t.filter.updatePriority(u,d):a=o.getNode()}else{const u=at(n);let d;if(o.isCompleteForChild(c)){l=e.serverCache.getNode();const h=lD(r,n,o.getNode(),l);h!=null?d=o.getNode().getImmediateChild(c).updateChild(u,h):d=o.getNode().getImmediateChild(c)}else d=V1(r,c,e.serverCache);d!=null?a=t.filter.updateChild(o.getNode(),c,d,u,i,s):a=o.getNode()}}return gh(e,a,o.isFullyInitialized()||Oe(n),t.filter.filtersNodes())}}function qy(t,e,n,r,i,s,o,a){const l=e.serverCache;let c;const u=o?t.filter:t.filter.getIndexedFilter();if(Oe(n))c=u.updateFullNode(l.getNode(),r,null);else if(u.filtersNodes()&&!l.isFiltered()){const f=l.getNode().updateChild(n,r);c=u.updateFullNode(l.getNode(),f,null)}else{const f=Le(n);if(!l.isCompleteForPath(n)&&Do(n)>1)return e;const g=at(n),v=l.getNode().getImmediateChild(f).updateChild(g,r);f===".priority"?c=u.updatePriority(l.getNode(),v):c=u.updateChild(l.getNode(),f,v,g,c4,null)}const d=t4(e,c,l.isFullyInitialized()||Oe(n),u.filtersNodes()),h=new F1(i,d,s);return u4(t,d,n,i,h,a)}function kS(t,e,n,r,i,s,o){const a=e.eventCache;let l,c;const u=new F1(i,e,s);if(Oe(n))c=t.filter.updateFullNode(e.eventCache.getNode(),r,o),l=gh(e,c,!0,t.filter.filtersNodes());else{const d=Le(n);if(d===".priority")c=t.filter.updatePriority(e.eventCache.getNode(),r),l=gh(e,c,a.isFullyInitialized(),a.isFiltered());else{const h=at(n),f=a.getNode().getImmediateChild(d);let g;if(Oe(h))g=r;else{const m=u.getCompleteChild(d);m!=null?$5(h)===".priority"&&m.getChild(B5(h)).isEmpty()?g=m:g=m.updateChild(h,r):g=We.EMPTY_NODE}if(f.equals(g))l=e;else{const m=t.filter.updateChild(a.getNode(),d,g,h,u,o);l=gh(e,m,a.isFullyInitialized(),t.filter.filtersNodes())}}}return l}function cD(t,e){return t.eventCache.isCompleteForChild(e)}function Qme(t,e,n,r,i,s,o){let a=e;return r.foreach((l,c)=>{const u=ln(n,l);cD(e,Le(u))&&(a=kS(t,a,u,c,i,s,o))}),r.foreach((l,c)=>{const u=ln(n,l);cD(e,Le(u))||(a=kS(t,a,u,c,i,s,o))}),a}function uD(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function AS(t,e,n,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,c;Oe(n)?c=r:c=new ot(null).setTree(n,r);const u=e.serverCache.getNode();return c.children.inorderTraversal((d,h)=>{if(u.hasChild(d)){const f=e.serverCache.getNode().getImmediateChild(d),g=uD(t,f,h);l=qy(t,l,new mt(d),g,i,s,o,a)}}),c.children.inorderTraversal((d,h)=>{const f=!e.serverCache.isCompleteForChild(d)&&h.value===null;if(!u.hasChild(d)&&!f){const g=e.serverCache.getNode().getImmediateChild(d),m=uD(t,g,h);l=qy(t,l,new mt(d),m,i,s,o,a)}}),l}function Yme(t,e,n,r,i,s,o){if(Hy(i,n)!=null)return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(r.value!=null){if(Oe(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return qy(t,e,n,l.getNode().getChild(n),i,s,a,o);if(Oe(n)){let c=new ot(null);return l.getNode().forEachChild(Tc,(u,d)=>{c=c.set(new mt(u),d)}),AS(t,e,n,c,i,s,a,o)}else return e}else{let c=new ot(null);return r.foreach((u,d)=>{const h=ln(n,u);l.isCompleteForPath(h)&&(c=c.set(u,l.getNode().getChild(h)))}),AS(t,e,n,c,i,s,a,o)}}function Xme(t,e,n,r,i){const s=e.serverCache,o=t4(e,s.getNode(),s.isFullyInitialized()||Oe(n),s.isFiltered());return u4(t,o,n,r,c4,i)}function Jme(t,e,n,r,i,s){let o;if(Hy(r,n)!=null)return e;{const a=new F1(r,e,i),l=e.eventCache.getNode();let c;if(Oe(n)||Le(n)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=RS(r,sl(e));else{const d=e.serverCache.getNode();ee(d instanceof We,"serverChildren would be complete if leaf node"),u=o4(r,d)}u=u,c=t.filter.updateFullNode(l,u,s)}else{const u=Le(n);let d=V1(r,u,e.serverCache);d==null&&e.serverCache.isCompleteForChild(u)&&(d=l.getImmediateChild(u)),d!=null?c=t.filter.updateChild(l,u,d,at(n),a,s):e.eventCache.getNode().hasChild(u)?c=t.filter.updateChild(l,u,We.EMPTY_NODE,at(n),a,s):c=l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=RS(r,sl(e)),o.isLeafNode()&&(c=t.filter.updateFullNode(c,o,s)))}return o=e.serverCache.isFullyInitialized()||Hy(r,Xe())!=null,gh(e,c,o,t.filter.filtersNodes())}}function Zme(t,e){const n=sl(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!Oe(e)&&!n.getImmediateChild(Le(e)).isEmpty())?n.getChild(e):null}function dD(t,e,n,r){e.type===Oi.MERGE&&e.source.queryId!==null&&(ee(sl(t.viewCache_),"We should always have a full cache before handling merges"),ee(TS(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,s=Gme(t.processor_,i,e,n,r);return qme(t.processor_,s.viewCache),ee(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,eye(t,s.changes,s.viewCache.eventCache.getNode(),null)}function eye(t,e,n,r){const i=r?[r]:t.eventRegistrations_;return Cme(t.eventGenerator_,e,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hD;function tye(t){ee(!hD,"__referenceConstructor has already been defined"),hD=t}function j1(t,e,n,r){const i=e.source.queryId;if(i!==null){const s=t.views.get(i);return ee(s!=null,"SyncTree gave us an op for an invalid query."),dD(s,e,n,r)}else{let s=[];for(const o of t.views.values())s=s.concat(dD(o,e,n,r));return s}}function $1(t,e){let n=null;for(const r of t.views.values())n=n||Zme(r,e);return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fD;function nye(t){ee(!fD,"__referenceConstructor has already been defined"),fD=t}class pD{constructor(e){this.listenProvider_=e,this.syncPointTree_=new ot(null),this.pendingWriteTree_=Bme(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function rye(t,e,n,r,i){return Pme(t.pendingWriteTree_,e,n,r,i),i?t0(t,new il(X5(),e,n)):[]}function ac(t,e,n=!1){const r=Nme(t.pendingWriteTree_,e);if(Dme(t.pendingWriteTree_,e)){let s=new ot(null);return r.snap!=null?s=s.set(Xe(),!0):Qr(r.children,o=>{s=s.set(new mt(o),!0)}),t0(t,new Wy(r.path,s,n))}else return[]}function e0(t,e,n){return t0(t,new il(J5(),e,n))}function iye(t,e,n){const r=ot.fromObject(n);return t0(t,new Rf(J5(),e,r))}function sye(t,e,n,r){const i=p4(t,r);if(i!=null){const s=g4(i),o=s.path,a=s.queryId,l=zr(o,e),c=new il(Z5(a),l,n);return m4(t,o,c)}else return[]}function oye(t,e,n,r){const i=p4(t,r);if(i){const s=g4(i),o=s.path,a=s.queryId,l=zr(o,e),c=ot.fromObject(n),u=new Rf(Z5(a),l,c);return m4(t,o,u)}else return[]}function d4(t,e,n){const i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{const l=zr(o,e),c=$1(a,l);if(c)return c});return s4(i,e,s,n,!0)}function t0(t,e){return h4(e,t.syncPointTree_,null,r4(t.pendingWriteTree_,Xe()))}function h4(t,e,n,r){if(Oe(t.path))return f4(t,e,n,r);{const i=e.get(Xe());n==null&&i!=null&&(n=$1(i,Xe()));let s=[];const o=Le(t.path),a=t.operationForChild(o),l=e.children.get(o);if(l&&a){const c=n?n.getImmediateChild(o):null,u=a4(r,o);s=s.concat(h4(a,l,c,u))}return i&&(s=s.concat(j1(i,t,r,n))),s}}function f4(t,e,n,r){const i=e.get(Xe());n==null&&i!=null&&(n=$1(i,Xe()));let s=[];return e.children.inorderTraversal((o,a)=>{const l=n?n.getImmediateChild(o):null,c=a4(r,o),u=t.operationForChild(o);u&&(s=s.concat(f4(u,a,l,c)))}),i&&(s=s.concat(j1(i,t,r,n))),s}function p4(t,e){return t.tagToQueryMap.get(e)}function g4(t){const e=t.indexOf("$");return ee(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new mt(t.substr(0,e))}}function m4(t,e,n){const r=t.syncPointTree_.get(e);ee(r,"Missing sync point for query tag that we're tracking");const i=r4(t.pendingWriteTree_,e);return j1(r,n,i,null)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U1{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new U1(n)}node(){return this.node_}}class B1{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=ln(this.path_,e);return new B1(this.syncTree_,n)}node(){return d4(this.syncTree_,this.path_)}}const aye=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},gD=function(t,e,n){if(!t||typeof t!="object")return t;if(ee(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return lye(t[".sv"],e,n);if(typeof t[".sv"]=="object")return cye(t[".sv"],e);ee(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},lye=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:ee(!1,"Unexpected server value: "+t)}},cye=function(t,e,n){t.hasOwnProperty("increment")||ee(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&ee(!1,"Unexpected increment value: "+r);const i=e.node();if(ee(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return typeof o!="number"?r:o+r},uye=function(t,e,n,r){return z1(e,new B1(n,t),r)},dye=function(t,e,n){return z1(t,new U1(e),n)};function z1(t,e,n){const r=t.getPriority().val(),i=gD(r,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const o=t,a=gD(o.getValue(),e,n);return a!==o.getValue()||i!==o.getPriority().val()?new nn(a,Mn(i)):t}else{const o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new nn(i))),o.forEachChild(Vn,(a,l)=>{const c=z1(l,e.getImmediateChild(a),n);c!==l&&(s=s.updateImmediateChild(a,c))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W1{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function H1(t,e){let n=e instanceof mt?e:new mt(e),r=t,i=Le(n);for(;i!==null;){const s=Fc(r.node.children,i)||{children:{},childCount:0};r=new W1(i,r,s),n=at(n),i=Le(n)}return r}function Nu(t){return t.node.value}function y4(t,e){t.node.value=e,PS(t)}function _4(t){return t.node.childCount>0}function hye(t){return Nu(t)===void 0&&!_4(t)}function n0(t,e){Qr(t.node.children,(n,r)=>{e(new W1(n,t,r))})}function v4(t,e,n,r){n&&!r&&e(t),n0(t,i=>{v4(i,e,!0,r)}),n&&r&&e(t)}function fye(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function Ap(t){return new mt(t.parent===null?t.name:Ap(t.parent)+"/"+t.name)}function PS(t){t.parent!==null&&pye(t.parent,t.name,t)}function pye(t,e,n){const r=hye(n),i=di(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,PS(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,PS(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gye=/[\[\].#$\/\u0000-\u001F\u007F]/,mye=/[\[\].#$\u0000-\u001F\u007F]/,Vw=10*1024*1024,w4=function(t){return typeof t=="string"&&t.length!==0&&!gye.test(t)},yye=function(t){return typeof t=="string"&&t.length!==0&&!mye.test(t)},_ye=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),yye(t)},b4=function(t,e,n){const r=n instanceof mt?new Xge(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+oa(r));if(typeof e=="function")throw new Error(t+"contains a function "+oa(r)+" with contents = "+e.toString());if(w5(e))throw new Error(t+"contains "+e.toString()+" "+oa(r));if(typeof e=="string"&&e.length>Vw/3&&F_(e)>Vw)throw new Error(t+"contains a string greater than "+Vw+" utf8 bytes "+oa(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(Qr(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!w4(o)))throw new Error(t+" contains an invalid key ("+o+") "+oa(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);Jge(r,o),b4(t,a,r),Zge(r)}),i&&s)throw new Error(t+' contains ".value" child '+oa(r)+" in addition to actual children.")}},vye=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!w4(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!_ye(n))throw new Error(I7(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wye{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function bye(t,e){let n=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();n!==null&&!z5(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function El(t,e,n){bye(t,n),xye(t,r=>ii(r,e)||ii(e,r))}function xye(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const i=t.eventLists_[r];if(i){const s=i.path;e(s)?(Sye(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function Sye(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();Na&&On("event: "+n.toString()),Rp(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eye="repo_interrupt",Tye=25;class Iye{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new wye,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=zy(),this.transactionQueueTree_=new W1,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Cye(t,e,n){if(t.stats_=P1(t.repoInfo_),t.forceRestClient_||bge())t.server_=new By(t.repoInfo_,(r,i,s,o)=>{mD(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>yD(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{wn(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new ps(t.repoInfo_,e,(r,i,s,o)=>{mD(t,r,i,s,o)},r=>{yD(t,r)},r=>{kye(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=Cge(t.repoInfo_,()=>new Ime(t.stats_,t.server_)),t.infoData_=new bme,t.infoSyncTree_=new pD({startListening:(r,i,s,o)=>{let a=[];const l=t.infoData_.getNode(r._path);return l.isEmpty()||(a=e0(t.infoSyncTree_,r._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),q1(t,"connected",!1),t.serverSyncTree_=new pD({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(a,l)=>{const c=o(a,l);El(t.eventQueue_,r._path,c)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function Rye(t){const n=t.infoData_.getNode(new mt(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function x4(t){return aye({timestamp:Rye(t)})}function mD(t,e,n,r,i){t.dataUpdateCount++;const s=new mt(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){const l=Ym(n,c=>Mn(c));o=oye(t.serverSyncTree_,s,l,i)}else{const l=Mn(n);o=sye(t.serverSyncTree_,s,l,i)}else if(r){const l=Ym(n,c=>Mn(c));o=iye(t.serverSyncTree_,s,l)}else{const l=Mn(n);o=e0(t.serverSyncTree_,s,l)}let a=s;o.length>0&&(a=K1(t,s)),El(t.eventQueue_,a,o)}function yD(t,e){q1(t,"connected",e),e===!1&&Pye(t)}function kye(t,e){Qr(e,(n,r)=>{q1(t,n,r)})}function q1(t,e,n){const r=new mt("/.info/"+e),i=Mn(n);t.infoData_.updateSnapshot(r,i);const s=e0(t.infoSyncTree_,r,i);El(t.eventQueue_,r,s)}function Aye(t){return t.nextWriteId_++}function Pye(t){S4(t,"onDisconnectEvents");const e=x4(t),n=zy();ES(t.onDisconnect_,Xe(),(i,s)=>{const o=uye(i,s,t.serverSyncTree_,e);Y5(n,i,o)});let r=[];ES(n,Xe(),(i,s)=>{r=r.concat(e0(t.serverSyncTree_,i,s));const o=Mye(t,i);K1(t,o)}),t.onDisconnect_=zy(),El(t.eventQueue_,Xe(),r)}function Nye(t){t.persistentConnection_&&t.persistentConnection_.interrupt(Eye)}function S4(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),On(n,...e)}function E4(t,e,n){return d4(t.serverSyncTree_,e,n)||We.EMPTY_NODE}function G1(t,e=t.transactionQueueTree_){if(e||r0(t,e),Nu(e)){const n=I4(t,e);ee(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&Dye(t,Ap(e),n)}else _4(e)&&n0(e,n=>{G1(t,n)})}function Dye(t,e,n){const r=n.map(c=>c.currentWriteId),i=E4(t,e,r);let s=i;const o=i.hash();for(let c=0;c<n.length;c++){const u=n[c];ee(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;const d=zr(e,u.path);s=s.updateChild(d,u.currentOutputSnapshotRaw)}const a=s.val(!0),l=e;t.server_.put(l.toString(),a,c=>{S4(t,"transaction put response",{path:l.toString(),status:c});let u=[];if(c==="ok"){const d=[];for(let h=0;h<n.length;h++)n[h].status=2,u=u.concat(ac(t.serverSyncTree_,n[h].currentWriteId)),n[h].onComplete&&d.push(()=>n[h].onComplete(null,!0,n[h].currentOutputSnapshotResolved)),n[h].unwatcher();r0(t,H1(t.transactionQueueTree_,e)),G1(t,t.transactionQueueTree_),El(t.eventQueue_,e,u);for(let h=0;h<d.length;h++)Rp(d[h])}else{if(c==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{Cr("transaction at "+l.toString()+" failed: "+c);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=c}K1(t,e)}},o)}function K1(t,e){const n=T4(t,e),r=Ap(n),i=I4(t,n);return Oye(t,i,r),r}function Oye(t,e,n){if(e.length===0)return;const r=[];let i=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],c=zr(n,l.path);let u=!1,d;if(ee(c!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)u=!0,d=l.abortReason,i=i.concat(ac(t.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=Tye)u=!0,d="maxretry",i=i.concat(ac(t.serverSyncTree_,l.currentWriteId,!0));else{const h=E4(t,l.path,o);l.currentInputSnapshot=h;const f=e[a].update(h.val());if(f!==void 0){b4("transaction failed: Data returned ",f,l.path);let g=Mn(f);typeof f=="object"&&f!=null&&di(f,".priority")||(g=g.updatePriority(h.getPriority()));const v=l.currentWriteId,_=x4(t),y=dye(g,h,_);l.currentOutputSnapshotRaw=g,l.currentOutputSnapshotResolved=y,l.currentWriteId=Aye(t),o.splice(o.indexOf(v),1),i=i.concat(rye(t.serverSyncTree_,l.path,y,l.currentWriteId,l.applyLocally)),i=i.concat(ac(t.serverSyncTree_,v,!0))}else u=!0,d="nodata",i=i.concat(ac(t.serverSyncTree_,l.currentWriteId,!0))}El(t.eventQueue_,n,i),i=[],u&&(e[a].status=2,function(h){setTimeout(h,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(d),!1,null))))}r0(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)Rp(r[a]);G1(t,t.transactionQueueTree_)}function T4(t,e){let n,r=t.transactionQueueTree_;for(n=Le(e);n!==null&&Nu(r)===void 0;)r=H1(r,n),e=at(e),n=Le(e);return r}function I4(t,e){const n=[];return C4(t,e,n),n.sort((r,i)=>r.order-i.order),n}function C4(t,e,n){const r=Nu(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);n0(e,i=>{C4(t,i,n)})}function r0(t,e){const n=Nu(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,y4(e,n.length>0?n:void 0)}n0(e,r=>{r0(t,r)})}function Mye(t,e){const n=Ap(T4(t,e)),r=H1(t.transactionQueueTree_,e);return fye(r,i=>{Fw(t,i)}),Fw(t,r),v4(r,i=>{Fw(t,i)}),n}function Fw(t,e){const n=Nu(e);if(n){const r=[];let i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(ee(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(ee(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(ac(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?y4(e,void 0):n.length=s+1,El(t.eventQueue_,Ap(e),i);for(let o=0;o<r.length;o++)Rp(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lye(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function Vye(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Cr(`Invalid query segment '${n}' in query '${t}'`)}return e}const _D=function(t,e){const n=Fye(t),r=n.namespace;n.domain==="firebase.com"&&nl(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&nl("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||fge();const i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new Ege(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new mt(n.pathString)}},Fye=function(t){let e="",n="",r="",i="",s="",o=!0,a="https",l=443;if(typeof t=="string"){let c=t.indexOf("//");c>=0&&(a=t.substring(0,c-1),t=t.substring(c+2));let u=t.indexOf("/");u===-1&&(u=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(u,d)),u<d&&(i=Lye(t.substring(u,d)));const h=Vye(t.substring(Math.min(t.length,d)));c=e.indexOf(":"),c>=0?(o=a==="https"||a==="wss",l=parseInt(e.substring(c+1),10)):c=e.length;const f=e.slice(0,c);if(f.toLowerCase()==="localhost")n="localhost";else if(f.split(".").length<=2)n=f;else{const g=e.indexOf(".");r=e.substring(0,g).toLowerCase(),n=e.substring(g+1),s=r}"ns"in h&&(s=h.ns)}return{host:e,port:l,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q1{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return Oe(this._path)?null:$5(this._path)}get ref(){return new Du(this._repo,this._path)}get _queryIdentifier(){const e=rD(this._queryParams),n=k1(e);return n==="{}"?"default":n}get _queryObject(){return rD(this._queryParams)}isEqual(e){if(e=fe(e),!(e instanceof Q1))return!1;const n=this._repo===e._repo,r=z5(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+Yge(this._path)}}class Du extends Q1{constructor(e,n){super(e,n,new M1,!1)}get parent(){const e=B5(this._path);return e===null?null:new Du(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}tye(Du);nye(Du);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jye="FIREBASE_DATABASE_EMULATOR_HOST",NS={};let $ye=!1;function Uye(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||nl("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),On("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=_D(s,i),a=o.repoInfo,l,c;typeof process<"u"&&FN&&(c=FN[jye]),c?(l=!0,s=`http://${c}?ns=${a.namespace}`,o=_D(s,i),a=o.repoInfo):l=!o.repoInfo.secure;const u=i&&l?new bS(bS.OWNER):new Sge(t.name,t.options,e);vye("Invalid Firebase Database URL",o),Oe(o.path)||nl("Database URL must point to the root of a Firebase Database (not including a child path).");const d=zye(a,t,u,new xge(t.name,n));return new Wye(d,t)}function Bye(t,e){const n=NS[e];(!n||n[t.key]!==t)&&nl(`Database ${e}(${t.repoInfo_}) has already been deleted.`),Nye(t),delete n[t.key]}function zye(t,e,n,r){let i=NS[e.name];i||(i={},NS[e.name]=i);let s=i[t.toURLString()];return s&&nl("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new Iye(t,$ye,n,r),i[t.toURLString()]=s,s}class Wye{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(Cye(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Du(this._repo,Xe())),this._rootInternal}_delete(){return this._rootInternal!==null&&(Bye(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&nl("Cannot call "+e+" on a deleted database.")}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hye(t){lge(Is),ws(new hi("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return Uye(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),Hr(jN,$N,t),Hr(jN,$N,"esm2017")}ps.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};ps.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};Hye();const qye=()=>{const{t}=Qe(),{currentUser:e,currentUserData:n,fetchUserData:r}=Ns(),[i,s]=S.useState(!1),o=()=>s(!0),a=()=>s(!1),[l,c]=S.useState({title:"",message:"",messageType:"",type:""}),[u,d]=S.useState(!1),[h,f]=S.useState(e.email||""),[g,m]=S.useState(e.displayName.split(" ")[0]||""),[v,_]=S.useState(e.displayName.split(" ")[1]||""),[y,w]=S.useState(n.phone||""),[b,x]=S.useState(""),[T,I]=S.useState(""),[E,k]=S.useState(!1),[D,F]=S.useState(!1);S.useEffect(()=>(document.title=t("settings")+" | "+t("cryptoPulse"),()=>{document.title=t("cryptoPulse")}),[]);const K=V=>{const M=V.target.value;if(!(M.length>10)){if(M.length===0)return w("");/^\d+$/.test(M)&&w(M)}},X=()=>{(g===""||v===""||y===""||b!==""&&T===""||b===""&&T!=="")&&(c({title:"error",message:"errorFillAllFields",type:"error"}),o()),b!==""&&T.length<6&&(c({title:"error",message:"passwordTooShort",type:"error"}),o()),c({title:"confirmAction",message:"confirmUpdateProfile",action:le,messageType:"confirm-warnning",type:"confirm-warnning"}),o()},le=async()=>{k(!0),vse(g,v,y,b,T).then(async()=>{await r(),c({title:"success",message:"profileUpdatedSuccessfully",type:"success"}),o()}).catch(V=>{V.message.includes("Re-authentication failed")?(console.error("Re-authentication failed. Please log in again."),c({title:"error",message:"errorWrongPassword",type:"error"}),o()):(console.error("An error occurred:",V.message),c({title:"error",message:"somethingWentWrong",type:"error"}),o())}).finally(()=>{k(!1)})},C=async()=>{F(!0);try{await _se()}catch{c({title:"error",message:"somethingWentWrong",type:"error"}),o()}finally{F(!1)}},R=()=>{mT(Ao,h).then(()=>{c({title:"success",message:"resetPasswordEmailSent",type:"success"}),o()}).catch(V=>{console.log(V)})};return p.jsxs("div",{className:"scrollable-content content",children:[p.jsxs("div",{className:"grid md:grid-cols-2 w-full h-full py-5 overflow-y-auto",children:[p.jsxs("div",{className:"flex justify-end",children:[p.jsx("img",{src:bp,loading:"lazy",alt:"CryptoPulse logo",className:"flex max-h-[350px] w-auto md:max-h-[550px] p-5 m-auto"}),p.jsx("div",{className:"h-full bg-gray-300 dark:bg-gray-600 hidden md:block w-px mx-[10px]"})]}),p.jsxs("div",{className:"flex flex-col justify-center gap-5 mx-10 ",children:[p.jsx("h1",{className:"text-5xl font-bold text-slate-950 dark:text-white",children:t("profile")}),p.jsx("input",{type:"text",value:h,className:"mt-10 h-10 pl-3 text-sm text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:t("mail"),disabled:!0}),p.jsxs("div",{className:"flex gap-4",children:[p.jsx("input",{type:"text",value:g,onChange:V=>m(V.target.value),className:"w-full pl-3 h-10 text-sm text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:t("firstName")}),p.jsx("input",{type:"text",value:v,onChange:V=>_(V.target.value),className:"w-full pl-3 h-10 text-sm text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:t("lastName")})]}),p.jsx("input",{type:"text",value:y,onChange:K,className:"h-10 pl-3 text-sm text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:t("phone")}),p.jsxs("div",{className:"flex flex-col gap-1",children:[p.jsxs("div",{className:"flex gap-4",children:[p.jsx("input",{type:u?"text":"password",value:b,onChange:V=>x(V.target.value),className:"w-full h-10 pl-3 text-sm text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:t("oldPassword"),autoComplete:"new-password"}),p.jsx("input",{type:u?"text":"password",value:T,onChange:V=>I(V.target.value),className:"w-full h-10 pl-3 text-sm text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:t("newPassword"),autoComplete:"new-password"})]}),p.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:t("changePassword")})]}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx("input",{type:"checkbox",onClick:()=>d(!u)}),p.jsx("label",{className:"text-gray-800 dark:text-white",children:t("showPassword")})]}),p.jsx("button",{type:"button",onClick:X,className:`mt-10 h-10 text-gray-800 font-bold px-5 rounded-lg bg-custom-teal ${!E&&"hover:bg-teal-500"} flex justify-start items-center`,children:E?p.jsxs("div",{className:"loading-container",children:[p.jsx("span",{className:"dot"}),p.jsx("span",{className:"dot"}),p.jsx("span",{className:"dot"})]}):t("updateProfile")}),p.jsx("button",{type:"button",onClick:()=>{c({...l,title:"confirmAction",message:"confirmDeleteAccount",action:C,messageType:"confirm-warnning",type:"confirm-warnning"}),o()},className:`h-10 text-gray-800 font-bold px-5 rounded-lg bg-red bg-opacity-50 ${!D&&"hover:bg-opacity-100"} flex justify-start items-center`,children:D?p.jsxs("div",{className:"loading-container",children:[p.jsx("span",{className:"dot"}),p.jsx("span",{className:"dot"}),p.jsx("span",{className:"dot"})]}):t("deleteAccount")}),p.jsx("a",{className:" text-gray-500 dark:text-gray-300 cursor-pointer font-semibold underline",onClick:R,children:t("forgotPassword")})]})]}),p.jsx(wl,{title:l.title,message:l.message,messageType:l.messageType,action:l.action,isVisible:i,onClose:a})]})},md="/assets/usa-BeFRcQv-.png",jw="/assets/germany-RcDfzgS0.webp",$w="/assets/italy-k4diam-A.webp",Uw="/assets/china-BJC3NXIF.png",Bw="/assets/russia-BFOhkMUR.png",Gye={type:"logger",log(t){this.output("log",t)},warn(t){this.output("warn",t)},error(t){this.output("error",t)},output(t,e){console&&console[t]&&console[t].apply(console,e)}};class Gy{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(e,n)}init(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=n.prefix||"i18next:",this.logger=e||Gye,this.options=n,this.debug=n.debug}log(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"log","",!0)}warn(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"warn","",!0)}error(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"error","")}deprecate(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"warn","WARNING DEPRECATED: ",!0)}forward(e,n,r,i){return i&&!this.debug?null:(typeof e[0]=="string"&&(e[0]=`${r}${this.prefix} ${e[0]}`),this.logger[n](e))}create(e){return new Gy(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new Gy(this.logger,e)}}var Mi=new Gy;class i0{constructor(){this.observers={}}on(e,n){return e.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const i=this.observers[r].get(n)||0;this.observers[r].set(n,i+1)}),this}off(e,n){if(this.observers[e]){if(!n){delete this.observers[e];return}this.observers[e].delete(n)}}emit(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];this.observers[e]&&Array.from(this.observers[e].entries()).forEach(o=>{let[a,l]=o;for(let c=0;c<l;c++)a(...r)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(o=>{let[a,l]=o;for(let c=0;c<l;c++)a.apply(a,[e,...r])})}}function yd(){let t,e;const n=new Promise((r,i)=>{t=r,e=i});return n.resolve=t,n.reject=e,n}function vD(t){return t==null?"":""+t}function Kye(t,e,n){t.forEach(r=>{e[r]&&(n[r]=e[r])})}const Qye=/###/g;function yh(t,e,n){function r(a){return a&&a.indexOf("###")>-1?a.replace(Qye,"."):a}function i(){return!t||typeof t=="string"}const s=typeof e!="string"?e:e.split(".");let o=0;for(;o<s.length-1;){if(i())return{};const a=r(s[o]);!t[a]&&n&&(t[a]=new n),Object.prototype.hasOwnProperty.call(t,a)?t=t[a]:t={},++o}return i()?{}:{obj:t,k:r(s[o])}}function wD(t,e,n){const{obj:r,k:i}=yh(t,e,Object);if(r!==void 0||e.length===1){r[i]=n;return}let s=e[e.length-1],o=e.slice(0,e.length-1),a=yh(t,o,Object);for(;a.obj===void 0&&o.length;)s=`${o[o.length-1]}.${s}`,o=o.slice(0,o.length-1),a=yh(t,o,Object),a&&a.obj&&typeof a.obj[`${a.k}.${s}`]<"u"&&(a.obj=void 0);a.obj[`${a.k}.${s}`]=n}function Yye(t,e,n,r){const{obj:i,k:s}=yh(t,e,Object);i[s]=i[s]||[],r&&(i[s]=i[s].concat(n)),r||i[s].push(n)}function Ky(t,e){const{obj:n,k:r}=yh(t,e);if(n)return n[r]}function Xye(t,e,n){const r=Ky(t,n);return r!==void 0?r:Ky(e,n)}function R4(t,e,n){for(const r in e)r!=="__proto__"&&r!=="constructor"&&(r in t?typeof t[r]=="string"||t[r]instanceof String||typeof e[r]=="string"||e[r]instanceof String?n&&(t[r]=e[r]):R4(t[r],e[r],n):t[r]=e[r]);return t}function Fl(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var Jye={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function Zye(t){return typeof t=="string"?t.replace(/[&<>"'\/]/g,e=>Jye[e]):t}class e_e{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const n=this.regExpMap.get(e);if(n!==void 0)return n;const r=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,r),this.regExpQueue.push(e),r}}const t_e=[" ",",","?","!",";"],n_e=new e_e(20);function r_e(t,e,n){e=e||"",n=n||"";const r=t_e.filter(o=>e.indexOf(o)<0&&n.indexOf(o)<0);if(r.length===0)return!0;const i=n_e.getRegExp(`(${r.map(o=>o==="?"?"\\?":o).join("|")})`);let s=!i.test(t);if(!s){const o=t.indexOf(n);o>0&&!i.test(t.substring(0,o))&&(s=!0)}return s}function DS(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!t)return;if(t[e])return t[e];const r=e.split(n);let i=t;for(let s=0;s<r.length;){if(!i||typeof i!="object")return;let o,a="";for(let l=s;l<r.length;++l)if(l!==s&&(a+=n),a+=r[l],o=i[a],o!==void 0){if(["string","number","boolean"].indexOf(typeof o)>-1&&l<r.length-1)continue;s+=l-s+1;break}i=o}return i}function Qy(t){return t&&t.indexOf("_")>0?t.replace("_","-"):t}class bD extends i0{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const n=this.options.ns.indexOf(e);n>-1&&this.options.ns.splice(n,1)}getResource(e,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const s=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,o=i.ignoreJSONStructure!==void 0?i.ignoreJSONStructure:this.options.ignoreJSONStructure;let a;e.indexOf(".")>-1?a=e.split("."):(a=[e,n],r&&(Array.isArray(r)?a.push(...r):typeof r=="string"&&s?a.push(...r.split(s)):a.push(r)));const l=Ky(this.data,a);return!l&&!n&&!r&&e.indexOf(".")>-1&&(e=a[0],n=a[1],r=a.slice(2).join(".")),l||!o||typeof r!="string"?l:DS(this.data&&this.data[e]&&this.data[e][n],r,s)}addResource(e,n,r,i){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const o=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator;let a=[e,n];r&&(a=a.concat(o?r.split(o):r)),e.indexOf(".")>-1&&(a=e.split("."),i=n,n=a[1]),this.addNamespaces(n),wD(this.data,a,i),s.silent||this.emit("added",e,n,r,i)}addResources(e,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const s in r)(typeof r[s]=="string"||Object.prototype.toString.apply(r[s])==="[object Array]")&&this.addResource(e,n,s,r[s],{silent:!0});i.silent||this.emit("added",e,n,r)}addResourceBundle(e,n,r,i,s){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},a=[e,n];e.indexOf(".")>-1&&(a=e.split("."),i=r,r=n,n=a[1]),this.addNamespaces(n);let l=Ky(this.data,a)||{};o.skipCopy||(r=JSON.parse(JSON.stringify(r))),i?R4(l,r,s):l={...l,...r},wD(this.data,a,l),o.silent||this.emit("added",e,n,r)}removeResourceBundle(e,n){this.hasResourceBundle(e,n)&&delete this.data[e][n],this.removeNamespaces(n),this.emit("removed",e,n)}hasResourceBundle(e,n){return this.getResource(e,n)!==void 0}getResourceBundle(e,n){return n||(n=this.options.defaultNS),this.options.compatibilityAPI==="v1"?{...this.getResource(e,n)}:this.getResource(e,n)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const n=this.getDataByLanguage(e);return!!(n&&Object.keys(n)||[]).find(i=>n[i]&&Object.keys(n[i]).length>0)}toJSON(){return this.data}}var k4={processors:{},addPostProcessor(t){this.processors[t.name]=t},handle(t,e,n,r,i){return t.forEach(s=>{this.processors[s]&&(e=this.processors[s].process(e,n,r,i))}),e}};const xD={};class Yy extends i0{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Kye(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Mi.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(e==null)return!1;const r=this.resolve(e,n);return r&&r.res!==void 0}extractFromKey(e,n){let r=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const i=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator;let s=n.ns||this.options.defaultNS||[];const o=r&&e.indexOf(r)>-1,a=!this.options.userDefinedKeySeparator&&!n.keySeparator&&!this.options.userDefinedNsSeparator&&!n.nsSeparator&&!r_e(e,r,i);if(o&&!a){const l=e.match(this.interpolator.nestingRegexp);if(l&&l.length>0)return{key:e,namespaces:s};const c=e.split(r);(r!==i||r===i&&this.options.ns.indexOf(c[0])>-1)&&(s=c.shift()),e=c.join(i)}return typeof s=="string"&&(s=[s]),{key:e,namespaces:s}}translate(e,n,r){if(typeof n!="object"&&this.options.overloadTranslationOptionHandler&&(n=this.options.overloadTranslationOptionHandler(arguments)),typeof n=="object"&&(n={...n}),n||(n={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);const i=n.returnDetails!==void 0?n.returnDetails:this.options.returnDetails,s=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator,{key:o,namespaces:a}=this.extractFromKey(e[e.length-1],n),l=a[a.length-1],c=n.lng||this.language,u=n.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(c&&c.toLowerCase()==="cimode"){if(u){const b=n.nsSeparator||this.options.nsSeparator;return i?{res:`${l}${b}${o}`,usedKey:o,exactUsedKey:o,usedLng:c,usedNS:l,usedParams:this.getUsedParamsDetails(n)}:`${l}${b}${o}`}return i?{res:o,usedKey:o,exactUsedKey:o,usedLng:c,usedNS:l,usedParams:this.getUsedParamsDetails(n)}:o}const d=this.resolve(e,n);let h=d&&d.res;const f=d&&d.usedKey||o,g=d&&d.exactUsedKey||o,m=Object.prototype.toString.apply(h),v=["[object Number]","[object Function]","[object RegExp]"],_=n.joinArrays!==void 0?n.joinArrays:this.options.joinArrays,y=!this.i18nFormat||this.i18nFormat.handleAsObject;if(y&&h&&(typeof h!="string"&&typeof h!="boolean"&&typeof h!="number")&&v.indexOf(m)<0&&!(typeof _=="string"&&m==="[object Array]")){if(!n.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const b=this.options.returnedObjectHandler?this.options.returnedObjectHandler(f,h,{...n,ns:a}):`key '${o} (${this.language})' returned an object instead of string.`;return i?(d.res=b,d.usedParams=this.getUsedParamsDetails(n),d):b}if(s){const b=m==="[object Array]",x=b?[]:{},T=b?g:f;for(const I in h)if(Object.prototype.hasOwnProperty.call(h,I)){const E=`${T}${s}${I}`;x[I]=this.translate(E,{...n,joinArrays:!1,ns:a}),x[I]===E&&(x[I]=h[I])}h=x}}else if(y&&typeof _=="string"&&m==="[object Array]")h=h.join(_),h&&(h=this.extendTranslation(h,e,n,r));else{let b=!1,x=!1;const T=n.count!==void 0&&typeof n.count!="string",I=Yy.hasDefaultValue(n),E=T?this.pluralResolver.getSuffix(c,n.count,n):"",k=n.ordinal&&T?this.pluralResolver.getSuffix(c,n.count,{ordinal:!1}):"",D=T&&!n.ordinal&&n.count===0&&this.pluralResolver.shouldUseIntlApi(),F=D&&n[`defaultValue${this.options.pluralSeparator}zero`]||n[`defaultValue${E}`]||n[`defaultValue${k}`]||n.defaultValue;!this.isValidLookup(h)&&I&&(b=!0,h=F),this.isValidLookup(h)||(x=!0,h=o);const X=(n.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&x?void 0:h,le=I&&F!==h&&this.options.updateMissing;if(x||b||le){if(this.logger.log(le?"updateKey":"missingKey",c,l,o,le?F:h),s){const M=this.resolve(o,{...n,keySeparator:!1});M&&M.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let C=[];const R=this.languageUtils.getFallbackCodes(this.options.fallbackLng,n.lng||this.language);if(this.options.saveMissingTo==="fallback"&&R&&R[0])for(let M=0;M<R.length;M++)C.push(R[M]);else this.options.saveMissingTo==="all"?C=this.languageUtils.toResolveHierarchy(n.lng||this.language):C.push(n.lng||this.language);const V=(M,U,j)=>{const ie=I&&j!==h?j:X;this.options.missingKeyHandler?this.options.missingKeyHandler(M,l,U,ie,le,n):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(M,l,U,ie,le,n),this.emit("missingKey",M,l,U,h)};this.options.saveMissing&&(this.options.saveMissingPlurals&&T?C.forEach(M=>{const U=this.pluralResolver.getSuffixes(M,n);D&&n[`defaultValue${this.options.pluralSeparator}zero`]&&U.indexOf(`${this.options.pluralSeparator}zero`)<0&&U.push(`${this.options.pluralSeparator}zero`),U.forEach(j=>{V([M],o+j,n[`defaultValue${j}`]||F)})}):V(C,o,F))}h=this.extendTranslation(h,e,n,d,r),x&&h===o&&this.options.appendNamespaceToMissingKey&&(h=`${l}:${o}`),(x||b)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?h=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${l}:${o}`:o,b?h:void 0):h=this.options.parseMissingKeyHandler(h))}return i?(d.res=h,d.usedParams=this.getUsedParamsDetails(n),d):h}extendTranslation(e,n,r,i,s){var o=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const c=typeof e=="string"&&(r&&r.interpolation&&r.interpolation.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let u;if(c){const h=e.match(this.interpolator.nestingRegexp);u=h&&h.length}let d=r.replace&&typeof r.replace!="string"?r.replace:r;if(this.options.interpolation.defaultVariables&&(d={...this.options.interpolation.defaultVariables,...d}),e=this.interpolator.interpolate(e,d,r.lng||this.language,r),c){const h=e.match(this.interpolator.nestingRegexp),f=h&&h.length;u<f&&(r.nest=!1)}!r.lng&&this.options.compatibilityAPI!=="v1"&&i&&i.res&&(r.lng=i.usedLng),r.nest!==!1&&(e=this.interpolator.nest(e,function(){for(var h=arguments.length,f=new Array(h),g=0;g<h;g++)f[g]=arguments[g];return s&&s[0]===f[0]&&!r.context?(o.logger.warn(`It seems you are nesting recursively key: ${f[0]} in key: ${n[0]}`),null):o.translate(...f,n)},r)),r.interpolation&&this.interpolator.reset()}const a=r.postProcess||this.options.postProcess,l=typeof a=="string"?[a]:a;return e!=null&&l&&l.length&&r.applyPostProcessor!==!1&&(e=k4.handle(l,e,n,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...i,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),e}resolve(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r,i,s,o,a;return typeof e=="string"&&(e=[e]),e.forEach(l=>{if(this.isValidLookup(r))return;const c=this.extractFromKey(l,n),u=c.key;i=u;let d=c.namespaces;this.options.fallbackNS&&(d=d.concat(this.options.fallbackNS));const h=n.count!==void 0&&typeof n.count!="string",f=h&&!n.ordinal&&n.count===0&&this.pluralResolver.shouldUseIntlApi(),g=n.context!==void 0&&(typeof n.context=="string"||typeof n.context=="number")&&n.context!=="",m=n.lngs?n.lngs:this.languageUtils.toResolveHierarchy(n.lng||this.language,n.fallbackLng);d.forEach(v=>{this.isValidLookup(r)||(a=v,!xD[`${m[0]}-${v}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(a)&&(xD[`${m[0]}-${v}`]=!0,this.logger.warn(`key "${i}" for languages "${m.join(", ")}" won't get resolved as namespace "${a}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),m.forEach(_=>{if(this.isValidLookup(r))return;o=_;const y=[u];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(y,u,_,v,n);else{let b;h&&(b=this.pluralResolver.getSuffix(_,n.count,n));const x=`${this.options.pluralSeparator}zero`,T=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(h&&(y.push(u+b),n.ordinal&&b.indexOf(T)===0&&y.push(u+b.replace(T,this.options.pluralSeparator)),f&&y.push(u+x)),g){const I=`${u}${this.options.contextSeparator}${n.context}`;y.push(I),h&&(y.push(I+b),n.ordinal&&b.indexOf(T)===0&&y.push(I+b.replace(T,this.options.pluralSeparator)),f&&y.push(I+x))}}let w;for(;w=y.pop();)this.isValidLookup(r)||(s=w,r=this.getResource(_,v,w,n))}))})}),{res:r,usedKey:i,exactUsedKey:s,usedLng:o,usedNS:a}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,n,r,i):this.resourceStore.getResource(e,n,r,i)}getUsedParamsDetails(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=e.replace&&typeof e.replace!="string";let i=r?e.replace:e;if(r&&typeof e.count<"u"&&(i.count=e.count),this.options.interpolation.defaultVariables&&(i={...this.options.interpolation.defaultVariables,...i}),!r){i={...i};for(const s of n)delete i[s]}return i}static hasDefaultValue(e){const n="defaultValue";for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&n===r.substring(0,n.length)&&e[r]!==void 0)return!0;return!1}}function zw(t){return t.charAt(0).toUpperCase()+t.slice(1)}class SD{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Mi.create("languageUtils")}getScriptPartFromCode(e){if(e=Qy(e),!e||e.indexOf("-")<0)return null;const n=e.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}getLanguagePartFromCode(e){if(e=Qy(e),!e||e.indexOf("-")<0)return e;const n=e.split("-");return this.formatLanguageCode(n[0])}formatLanguageCode(e){if(typeof e=="string"&&e.indexOf("-")>-1){const n=["hans","hant","latn","cyrl","cans","mong","arab"];let r=e.split("-");return this.options.lowerCaseLng?r=r.map(i=>i.toLowerCase()):r.length===2?(r[0]=r[0].toLowerCase(),r[1]=r[1].toUpperCase(),n.indexOf(r[1].toLowerCase())>-1&&(r[1]=zw(r[1].toLowerCase()))):r.length===3&&(r[0]=r[0].toLowerCase(),r[1].length===2&&(r[1]=r[1].toUpperCase()),r[0]!=="sgn"&&r[2].length===2&&(r[2]=r[2].toUpperCase()),n.indexOf(r[1].toLowerCase())>-1&&(r[1]=zw(r[1].toLowerCase())),n.indexOf(r[2].toLowerCase())>-1&&(r[2]=zw(r[2].toLowerCase()))),r.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let n;return e.forEach(r=>{if(n)return;const i=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(i))&&(n=i)}),!n&&this.options.supportedLngs&&e.forEach(r=>{if(n)return;const i=this.getLanguagePartFromCode(r);if(this.isSupportedCode(i))return n=i;n=this.options.supportedLngs.find(s=>{if(s===i)return s;if(!(s.indexOf("-")<0&&i.indexOf("-")<0)&&(s.indexOf("-")>0&&i.indexOf("-")<0&&s.substring(0,s.indexOf("-"))===i||s.indexOf(i)===0&&i.length>1))return s})}),n||(n=this.getFallbackCodes(this.options.fallbackLng)[0]),n}getFallbackCodes(e,n){if(!e)return[];if(typeof e=="function"&&(e=e(n)),typeof e=="string"&&(e=[e]),Object.prototype.toString.apply(e)==="[object Array]")return e;if(!n)return e.default||[];let r=e[n];return r||(r=e[this.getScriptPartFromCode(n)]),r||(r=e[this.formatLanguageCode(n)]),r||(r=e[this.getLanguagePartFromCode(n)]),r||(r=e.default),r||[]}toResolveHierarchy(e,n){const r=this.getFallbackCodes(n||this.options.fallbackLng||[],e),i=[],s=o=>{o&&(this.isSupportedCode(o)?i.push(o):this.logger.warn(`rejecting language code not found in supportedLngs: ${o}`))};return typeof e=="string"&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&s(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&s(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&s(this.getLanguagePartFromCode(e))):typeof e=="string"&&s(this.formatLanguageCode(e)),r.forEach(o=>{i.indexOf(o)<0&&s(this.formatLanguageCode(o))}),i}}let i_e=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],s_e={1:function(t){return+(t>1)},2:function(t){return+(t!=1)},3:function(t){return 0},4:function(t){return t%10==1&&t%100!=11?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2},5:function(t){return t==0?0:t==1?1:t==2?2:t%100>=3&&t%100<=10?3:t%100>=11?4:5},6:function(t){return t==1?0:t>=2&&t<=4?1:2},7:function(t){return t==1?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2},8:function(t){return t==1?0:t==2?1:t!=8&&t!=11?2:3},9:function(t){return+(t>=2)},10:function(t){return t==1?0:t==2?1:t<7?2:t<11?3:4},11:function(t){return t==1||t==11?0:t==2||t==12?1:t>2&&t<20?2:3},12:function(t){return+(t%10!=1||t%100==11)},13:function(t){return+(t!==0)},14:function(t){return t==1?0:t==2?1:t==3?2:3},15:function(t){return t%10==1&&t%100!=11?0:t%10>=2&&(t%100<10||t%100>=20)?1:2},16:function(t){return t%10==1&&t%100!=11?0:t!==0?1:2},17:function(t){return t==1||t%10==1&&t%100!=11?0:1},18:function(t){return t==0?0:t==1?1:2},19:function(t){return t==1?0:t==0||t%100>1&&t%100<11?1:t%100>10&&t%100<20?2:3},20:function(t){return t==1?0:t==0||t%100>0&&t%100<20?1:2},21:function(t){return t%100==1?1:t%100==2?2:t%100==3||t%100==4?3:0},22:function(t){return t==1?0:t==2?1:(t<0||t>10)&&t%10==0?2:3}};const o_e=["v1","v2","v3"],a_e=["v4"],ED={zero:0,one:1,two:2,few:3,many:4,other:5};function l_e(){const t={};return i_e.forEach(e=>{e.lngs.forEach(n=>{t[n]={numbers:e.nr,plurals:s_e[e.fc]}})}),t}class c_e{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=e,this.options=n,this.logger=Mi.create("pluralResolver"),(!this.options.compatibilityJSON||a_e.includes(this.options.compatibilityJSON))&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=l_e()}addRule(e,n){this.rules[e]=n}getRule(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(Qy(e==="dev"?"en":e),{type:n.ordinal?"ordinal":"cardinal"})}catch{return}return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}needsPlural(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=this.getRule(e,n);return this.shouldUseIntlApi()?r&&r.resolvedOptions().pluralCategories.length>1:r&&r.numbers.length>1}getPluralFormsOfKey(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(e,r).map(i=>`${n}${i}`)}getSuffixes(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=this.getRule(e,n);return r?this.shouldUseIntlApi()?r.resolvedOptions().pluralCategories.sort((i,s)=>ED[i]-ED[s]).map(i=>`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${i}`):r.numbers.map(i=>this.getSuffix(e,i,n)):[]}getSuffix(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i=this.getRule(e,r);return i?this.shouldUseIntlApi()?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${i.select(n)}`:this.getSuffixRetroCompatible(i,n):(this.logger.warn(`no plural rule found for: ${e}`),"")}getSuffixRetroCompatible(e,n){const r=e.noAbs?e.plurals(n):e.plurals(Math.abs(n));let i=e.numbers[r];this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1&&(i===2?i="plural":i===1&&(i=""));const s=()=>this.options.prepend&&i.toString()?this.options.prepend+i.toString():i.toString();return this.options.compatibilityJSON==="v1"?i===1?"":typeof i=="number"?`_plural_${i.toString()}`:s():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1?s():this.options.prepend&&r.toString()?this.options.prepend+r.toString():r.toString()}shouldUseIntlApi(){return!o_e.includes(this.options.compatibilityJSON)}}function TD(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,s=Xye(t,e,n);return!s&&i&&typeof n=="string"&&(s=DS(t,n,r),s===void 0&&(s=DS(e,n,r))),s}class u_e{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=Mi.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||(n=>n),this.init(e)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const n=e.interpolation;this.escape=n.escape!==void 0?n.escape:Zye,this.escapeValue=n.escapeValue!==void 0?n.escapeValue:!0,this.useRawValueToEscape=n.useRawValueToEscape!==void 0?n.useRawValueToEscape:!1,this.prefix=n.prefix?Fl(n.prefix):n.prefixEscaped||"{{",this.suffix=n.suffix?Fl(n.suffix):n.suffixEscaped||"}}",this.formatSeparator=n.formatSeparator?n.formatSeparator:n.formatSeparator||",",this.unescapePrefix=n.unescapeSuffix?"":n.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":n.unescapeSuffix||"",this.nestingPrefix=n.nestingPrefix?Fl(n.nestingPrefix):n.nestingPrefixEscaped||Fl("$t("),this.nestingSuffix=n.nestingSuffix?Fl(n.nestingSuffix):n.nestingSuffixEscaped||Fl(")"),this.nestingOptionsSeparator=n.nestingOptionsSeparator?n.nestingOptionsSeparator:n.nestingOptionsSeparator||",",this.maxReplaces=n.maxReplaces?n.maxReplaces:1e3,this.alwaysFormat=n.alwaysFormat!==void 0?n.alwaysFormat:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(n,r)=>n&&n.source===r?(n.lastIndex=0,n):new RegExp(r,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,n,r,i){let s,o,a;const l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function c(g){return g.replace(/\$/g,"$$$$")}const u=g=>{if(g.indexOf(this.formatSeparator)<0){const y=TD(n,l,g,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(y,void 0,r,{...i,...n,interpolationkey:g}):y}const m=g.split(this.formatSeparator),v=m.shift().trim(),_=m.join(this.formatSeparator).trim();return this.format(TD(n,l,v,this.options.keySeparator,this.options.ignoreJSONStructure),_,r,{...i,...n,interpolationkey:v})};this.resetRegExp();const d=i&&i.missingInterpolationHandler||this.options.missingInterpolationHandler,h=i&&i.interpolation&&i.interpolation.skipOnVariables!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:g=>c(g)},{regex:this.regexp,safeValue:g=>this.escapeValue?c(this.escape(g)):c(g)}].forEach(g=>{for(a=0;s=g.regex.exec(e);){const m=s[1].trim();if(o=u(m),o===void 0)if(typeof d=="function"){const _=d(e,s,i);o=typeof _=="string"?_:""}else if(i&&Object.prototype.hasOwnProperty.call(i,m))o="";else if(h){o=s[0];continue}else this.logger.warn(`missed to pass in variable ${m} for interpolating ${e}`),o="";else typeof o!="string"&&!this.useRawValueToEscape&&(o=vD(o));const v=g.safeValue(o);if(e=e.replace(s[0],v),h?(g.regex.lastIndex+=o.length,g.regex.lastIndex-=s[0].length):g.regex.lastIndex=0,a++,a>=this.maxReplaces)break}}),e}nest(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i,s,o;function a(l,c){const u=this.nestingOptionsSeparator;if(l.indexOf(u)<0)return l;const d=l.split(new RegExp(`${u}[ ]*{`));let h=`{${d[1]}`;l=d[0],h=this.interpolate(h,o);const f=h.match(/'/g),g=h.match(/"/g);(f&&f.length%2===0&&!g||g.length%2!==0)&&(h=h.replace(/'/g,'"'));try{o=JSON.parse(h),c&&(o={...c,...o})}catch(m){return this.logger.warn(`failed parsing options string in nesting for key ${l}`,m),`${l}${u}${h}`}return delete o.defaultValue,l}for(;i=this.nestingRegexp.exec(e);){let l=[];o={...r},o=o.replace&&typeof o.replace!="string"?o.replace:o,o.applyPostProcessor=!1,delete o.defaultValue;let c=!1;if(i[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(i[1])){const u=i[1].split(this.formatSeparator).map(d=>d.trim());i[1]=u.shift(),l=u,c=!0}if(s=n(a.call(this,i[1].trim(),o),o),s&&i[0]===e&&typeof s!="string")return s;typeof s!="string"&&(s=vD(s)),s||(this.logger.warn(`missed to resolve ${i[1]} for nesting ${e}`),s=""),c&&(s=l.reduce((u,d)=>this.format(u,d,r.lng,{...r,interpolationkey:i[1].trim()}),s.trim())),e=e.replace(i[0],s),this.regexp.lastIndex=0}return e}}function d_e(t){let e=t.toLowerCase().trim();const n={};if(t.indexOf("(")>-1){const r=t.split("(");e=r[0].toLowerCase().trim();const i=r[1].substring(0,r[1].length-1);e==="currency"&&i.indexOf(":")<0?n.currency||(n.currency=i.trim()):e==="relativetime"&&i.indexOf(":")<0?n.range||(n.range=i.trim()):i.split(";").forEach(o=>{if(!o)return;const[a,...l]=o.split(":"),c=l.join(":").trim().replace(/^'+|'+$/g,"");n[a.trim()]||(n[a.trim()]=c),c==="false"&&(n[a.trim()]=!1),c==="true"&&(n[a.trim()]=!0),isNaN(c)||(n[a.trim()]=parseInt(c,10))})}return{formatName:e,formatOptions:n}}function jl(t){const e={};return function(r,i,s){const o=i+JSON.stringify(s);let a=e[o];return a||(a=t(Qy(i),s),e[o]=a),a(r)}}class h_e{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=Mi.create("formatter"),this.options=e,this.formats={number:jl((n,r)=>{const i=new Intl.NumberFormat(n,{...r});return s=>i.format(s)}),currency:jl((n,r)=>{const i=new Intl.NumberFormat(n,{...r,style:"currency"});return s=>i.format(s)}),datetime:jl((n,r)=>{const i=new Intl.DateTimeFormat(n,{...r});return s=>i.format(s)}),relativetime:jl((n,r)=>{const i=new Intl.RelativeTimeFormat(n,{...r});return s=>i.format(s,r.range||"day")}),list:jl((n,r)=>{const i=new Intl.ListFormat(n,{...r});return s=>i.format(s)})},this.init(e)}init(e){const r=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}}).interpolation;this.formatSeparator=r.formatSeparator?r.formatSeparator:r.formatSeparator||","}add(e,n){this.formats[e.toLowerCase().trim()]=n}addCached(e,n){this.formats[e.toLowerCase().trim()]=jl(n)}format(e,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return n.split(this.formatSeparator).reduce((a,l)=>{const{formatName:c,formatOptions:u}=d_e(l);if(this.formats[c]){let d=a;try{const h=i&&i.formatParams&&i.formatParams[i.interpolationkey]||{},f=h.locale||h.lng||i.locale||i.lng||r;d=this.formats[c](a,f,{...u,...i,...h})}catch(h){this.logger.warn(h)}return d}else this.logger.warn(`there was no format function for ${c}`);return a},e)}}function f_e(t,e){t.pending[e]!==void 0&&(delete t.pending[e],t.pendingCount--)}class p_e extends i0{constructor(e,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=e,this.store=n,this.services=r,this.languageUtils=r.languageUtils,this.options=i,this.logger=Mi.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=i.maxParallelReads||10,this.readingCalls=0,this.maxRetries=i.maxRetries>=0?i.maxRetries:5,this.retryTimeout=i.retryTimeout>=1?i.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(r,i.backend,i)}queueLoad(e,n,r,i){const s={},o={},a={},l={};return e.forEach(c=>{let u=!0;n.forEach(d=>{const h=`${c}|${d}`;!r.reload&&this.store.hasResourceBundle(c,d)?this.state[h]=2:this.state[h]<0||(this.state[h]===1?o[h]===void 0&&(o[h]=!0):(this.state[h]=1,u=!1,o[h]===void 0&&(o[h]=!0),s[h]===void 0&&(s[h]=!0),l[d]===void 0&&(l[d]=!0)))}),u||(a[c]=!0)}),(Object.keys(s).length||Object.keys(o).length)&&this.queue.push({pending:o,pendingCount:Object.keys(o).length,loaded:{},errors:[],callback:i}),{toLoad:Object.keys(s),pending:Object.keys(o),toLoadLanguages:Object.keys(a),toLoadNamespaces:Object.keys(l)}}loaded(e,n,r){const i=e.split("|"),s=i[0],o=i[1];n&&this.emit("failedLoading",s,o,n),r&&this.store.addResourceBundle(s,o,r,void 0,void 0,{skipCopy:!0}),this.state[e]=n?-1:2;const a={};this.queue.forEach(l=>{Yye(l.loaded,[s],o),f_e(l,e),n&&l.errors.push(n),l.pendingCount===0&&!l.done&&(Object.keys(l.loaded).forEach(c=>{a[c]||(a[c]={});const u=l.loaded[c];u.length&&u.forEach(d=>{a[c][d]===void 0&&(a[c][d]=!0)})}),l.done=!0,l.errors.length?l.callback(l.errors):l.callback())}),this.emit("loaded",a),this.queue=this.queue.filter(l=>!l.done)}read(e,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,o=arguments.length>5?arguments[5]:void 0;if(!e.length)return o(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:n,fcName:r,tried:i,wait:s,callback:o});return}this.readingCalls++;const a=(c,u)=>{if(this.readingCalls--,this.waitingReads.length>0){const d=this.waitingReads.shift();this.read(d.lng,d.ns,d.fcName,d.tried,d.wait,d.callback)}if(c&&u&&i<this.maxRetries){setTimeout(()=>{this.read.call(this,e,n,r,i+1,s*2,o)},s);return}o(c,u)},l=this.backend[r].bind(this.backend);if(l.length===2){try{const c=l(e,n);c&&typeof c.then=="function"?c.then(u=>a(null,u)).catch(a):a(null,c)}catch(c){a(c)}return}return l(e,n,a)}prepareLoading(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();typeof e=="string"&&(e=this.languageUtils.toResolveHierarchy(e)),typeof n=="string"&&(n=[n]);const s=this.queueLoad(e,n,r,i);if(!s.toLoad.length)return s.pending.length||i(),null;s.toLoad.forEach(o=>{this.loadOne(o)})}load(e,n,r){this.prepareLoading(e,n,{},r)}reload(e,n,r){this.prepareLoading(e,n,{reload:!0},r)}loadOne(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r=e.split("|"),i=r[0],s=r[1];this.read(i,s,"read",void 0,void 0,(o,a)=>{o&&this.logger.warn(`${n}loading namespace ${s} for language ${i} failed`,o),!o&&a&&this.logger.log(`${n}loaded namespace ${s} for language ${i}`,a),this.loaded(e,o,a)})}saveMissing(e,n,r,i,s){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},a=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(n)){this.logger.warn(`did not save key "${r}" as the namespace "${n}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if(this.backend&&this.backend.create){const l={...o,isUpdate:s},c=this.backend.create.bind(this.backend);if(c.length<6)try{let u;c.length===5?u=c(e,n,r,i,l):u=c(e,n,r,i),u&&typeof u.then=="function"?u.then(d=>a(null,d)).catch(a):a(null,u)}catch(u){a(u)}else c(e,n,r,i,a,l)}!e||!e[0]||this.store.addResource(e[0],n,r,i)}}}function ID(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(e){let n={};if(typeof e[1]=="object"&&(n=e[1]),typeof e[1]=="string"&&(n.defaultValue=e[1]),typeof e[2]=="string"&&(n.tDescription=e[2]),typeof e[2]=="object"||typeof e[3]=="object"){const r=e[3]||e[2];Object.keys(r).forEach(i=>{n[i]=r[i]})}return n},interpolation:{escapeValue:!0,format:t=>t,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function CD(t){return typeof t.ns=="string"&&(t.ns=[t.ns]),typeof t.fallbackLng=="string"&&(t.fallbackLng=[t.fallbackLng]),typeof t.fallbackNS=="string"&&(t.fallbackNS=[t.fallbackNS]),t.supportedLngs&&t.supportedLngs.indexOf("cimode")<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),t}function Ng(){}function g_e(t){Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(n=>{typeof t[n]=="function"&&(t[n]=t[n].bind(t))})}class kf extends i0{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;if(super(),this.options=CD(e),this.services={},this.logger=Mi,this.modules={external:[]},g_e(this),n&&!this.isInitialized&&!e.isClone){if(!this.options.initImmediate)return this.init(e,n),this;setTimeout(()=>{this.init(e,n)},0)}}init(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof n=="function"&&(r=n,n={}),!n.defaultNS&&n.defaultNS!==!1&&n.ns&&(typeof n.ns=="string"?n.defaultNS=n.ns:n.ns.indexOf("translation")<0&&(n.defaultNS=n.ns[0]));const i=ID();this.options={...i,...this.options,...CD(n)},this.options.compatibilityAPI!=="v1"&&(this.options.interpolation={...i.interpolation,...this.options.interpolation}),n.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=n.keySeparator),n.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=n.nsSeparator);function s(u){return u?typeof u=="function"?new u:u:null}if(!this.options.isClone){this.modules.logger?Mi.init(s(this.modules.logger),this.options):Mi.init(null,this.options);let u;this.modules.formatter?u=this.modules.formatter:typeof Intl<"u"&&(u=h_e);const d=new SD(this.options);this.store=new bD(this.options.resources,this.options);const h=this.services;h.logger=Mi,h.resourceStore=this.store,h.languageUtils=d,h.pluralResolver=new c_e(d,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),u&&(!this.options.interpolation.format||this.options.interpolation.format===i.interpolation.format)&&(h.formatter=s(u),h.formatter.init(h,this.options),this.options.interpolation.format=h.formatter.format.bind(h.formatter)),h.interpolator=new u_e(this.options),h.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},h.backendConnector=new p_e(s(this.modules.backend),h.resourceStore,h,this.options),h.backendConnector.on("*",function(f){for(var g=arguments.length,m=new Array(g>1?g-1:0),v=1;v<g;v++)m[v-1]=arguments[v];e.emit(f,...m)}),this.modules.languageDetector&&(h.languageDetector=s(this.modules.languageDetector),h.languageDetector.init&&h.languageDetector.init(h,this.options.detection,this.options)),this.modules.i18nFormat&&(h.i18nFormat=s(this.modules.i18nFormat),h.i18nFormat.init&&h.i18nFormat.init(this)),this.translator=new Yy(this.services,this.options),this.translator.on("*",function(f){for(var g=arguments.length,m=new Array(g>1?g-1:0),v=1;v<g;v++)m[v-1]=arguments[v];e.emit(f,...m)}),this.modules.external.forEach(f=>{f.init&&f.init(this)})}if(this.format=this.options.interpolation.format,r||(r=Ng),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const u=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);u.length>0&&u[0]!=="dev"&&(this.options.lng=u[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(u=>{this[u]=function(){return e.store[u](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(u=>{this[u]=function(){return e.store[u](...arguments),e}});const l=yd(),c=()=>{const u=(d,h)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),l.resolve(h),r(d,h)};if(this.languages&&this.options.compatibilityAPI!=="v1"&&!this.isInitialized)return u(null,this.t.bind(this));this.changeLanguage(this.options.lng,u)};return this.options.resources||!this.options.initImmediate?c():setTimeout(c,0),l}loadResources(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ng;const i=typeof e=="string"?e:this.language;if(typeof e=="function"&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if(i&&i.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const s=[],o=a=>{if(!a||a==="cimode")return;this.services.languageUtils.toResolveHierarchy(a).forEach(c=>{c!=="cimode"&&s.indexOf(c)<0&&s.push(c)})};i?o(i):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(l=>o(l)),this.options.preload&&this.options.preload.forEach(a=>o(a)),this.services.backendConnector.load(s,this.options.ns,a=>{!a&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(a)})}else r(null)}reloadResources(e,n,r){const i=yd();return e||(e=this.languages),n||(n=this.options.ns),r||(r=Ng),this.services.backendConnector.reload(e,n,s=>{i.resolve(),r(s)}),i}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&k4.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1))for(let n=0;n<this.languages.length;n++){const r=this.languages[n];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}}changeLanguage(e,n){var r=this;this.isLanguageChangingTo=e;const i=yd();this.emit("languageChanging",e);const s=l=>{this.language=l,this.languages=this.services.languageUtils.toResolveHierarchy(l),this.resolvedLanguage=void 0,this.setResolvedLanguage(l)},o=(l,c)=>{c?(s(c),this.translator.changeLanguage(c),this.isLanguageChangingTo=void 0,this.emit("languageChanged",c),this.logger.log("languageChanged",c)):this.isLanguageChangingTo=void 0,i.resolve(function(){return r.t(...arguments)}),n&&n(l,function(){return r.t(...arguments)})},a=l=>{!e&&!l&&this.services.languageDetector&&(l=[]);const c=typeof l=="string"?l:this.services.languageUtils.getBestMatchFromCodes(l);c&&(this.language||s(c),this.translator.language||this.translator.changeLanguage(c),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(c)),this.loadResources(c,u=>{o(u,c)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?a(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(a):this.services.languageDetector.detect(a):a(e),i}getFixedT(e,n,r){var i=this;const s=function(o,a){let l;if(typeof a!="object"){for(var c=arguments.length,u=new Array(c>2?c-2:0),d=2;d<c;d++)u[d-2]=arguments[d];l=i.options.overloadTranslationOptionHandler([o,a].concat(u))}else l={...a};l.lng=l.lng||s.lng,l.lngs=l.lngs||s.lngs,l.ns=l.ns||s.ns,l.keyPrefix=l.keyPrefix||r||s.keyPrefix;const h=i.options.keySeparator||".";let f;return l.keyPrefix&&Array.isArray(o)?f=o.map(g=>`${l.keyPrefix}${h}${g}`):f=l.keyPrefix?`${l.keyPrefix}${h}${o}`:o,i.t(f,l)};return typeof e=="string"?s.lng=e:s.lngs=e,s.ns=n,s.keyPrefix=r,s}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=n.lng||this.resolvedLanguage||this.languages[0],i=this.options?this.options.fallbackLng:!1,s=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const o=(a,l)=>{const c=this.services.backendConnector.state[`${a}|${l}`];return c===-1||c===2};if(n.precheck){const a=n.precheck(this,o);if(a!==void 0)return a}return!!(this.hasResourceBundle(r,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||o(r,e)&&(!i||o(s,e)))}loadNamespaces(e,n){const r=yd();return this.options.ns?(typeof e=="string"&&(e=[e]),e.forEach(i=>{this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}),this.loadResources(i=>{r.resolve(),n&&n(i)}),r):(n&&n(),Promise.resolve())}loadLanguages(e,n){const r=yd();typeof e=="string"&&(e=[e]);const i=this.options.preload||[],s=e.filter(o=>i.indexOf(o)<0);return s.length?(this.options.preload=i.concat(s),this.loadResources(o=>{r.resolve(),n&&n(o)}),r):(n&&n(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!e)return"rtl";const n=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=this.services&&this.services.languageUtils||new SD(ID());return n.indexOf(r.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return new kf(e,n)}cloneInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ng;const r=e.forkResourceStore;r&&delete e.forkResourceStore;const i={...this.options,...e,isClone:!0},s=new kf(i);return(e.debug!==void 0||e.prefix!==void 0)&&(s.logger=s.logger.clone(e)),["store","services","language"].forEach(a=>{s[a]=this[a]}),s.services={...this.services},s.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},r&&(s.store=new bD(this.store.data,i),s.services.resourceStore=s.store),s.translator=new Yy(s.services,i),s.translator.on("*",function(a){for(var l=arguments.length,c=new Array(l>1?l-1:0),u=1;u<l;u++)c[u-1]=arguments[u];s.emit(a,...c)}),s.init(i,n),s.translator.options=i,s.translator.backendConnector.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},s}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Zt=kf.createInstance();Zt.createInstance=kf.createInstance;Zt.createInstance;Zt.dir;Zt.init;Zt.loadResources;Zt.reloadResources;Zt.use;Zt.changeLanguage;Zt.getFixedT;Zt.t;Zt.exists;Zt.setDefaultNamespace;Zt.hasLoadedNamespace;Zt.loadNamespaces;Zt.loadLanguages;const m_e=({isUserMenuOpen:t})=>{const[e,n]=S.useState(t),[r,i]=S.useState(!1),{currentUser:s}=Ns(),{t:o}=Qe(),[a,l]=S.useState(!1),c=()=>l(!0),u=()=>l(!1),[d,h]=S.useState(!1);S.useEffect(()=>{!t&&e?(i(!0),setTimeout(()=>n(!1),500)):t&&!e&&(n(!0),i(!1))},[t,e]);const f=async()=>{try{await AV(Ao)}catch(g){alert(g.message)}};return!e||!s?null:p.jsxs("div",{className:"overflow-hidden",children:[p.jsxs("div",{className:`h-[calc(100vh-86px)] flex flex-col justify-start right-0 items-center m-2 py-5 rounded-2xl absolute bg-white bg-opacity-5 border border-gray-200 dark:border-gray-600 min-w-96 font-bold text-black dark:text-white ${r?"slide-out-right":"slide-in-right"}`,style:{backdropFilter:"blur(10px)"},children:[p.jsx("div",{className:"flex justify-end items-end w-full pr-5",children:p.jsx("button",{onClick:()=>Hn("/home/settings"),className:"material-icons p-1 rounded-full hover:text-gray-500 dark:hover:text-gray-200",children:"settings"})}),p.jsxs("div",{className:"w-[75%] h-full flex flex-col justify-between items-center gap-4",children:[p.jsxs("div",{className:"flex flex-col justify-center items-center gap-3",children:[p.jsx("i",{className:"material-icons",style:{fontSize:"100px"},children:"account_circle"}),p.jsx("p",{children:s.displayName})]}),p.jsxs("div",{className:"flex flex-col justify-start items-start w-full h-full py-10 gap-3",children:[p.jsxs("button",{onClick:()=>Hn("/home/coins"),className:"flex justify-start items-start w-full h-10 gap-3 p-2 border-b border-gray-400 hover:bg-opacity-30 dark:hover:bg-opacity-50 hover:bg-gray-300 dark:hover:bg-gray-800 rounded-t-md",children:[p.jsx("i",{className:"material-icons",children:"monetization_on"}),p.jsx("p",{children:o("coins")})]}),p.jsxs("button",{onClick:()=>Hn("/home/news"),className:"flex justify-start items-start w-full h-10 gap-3 p-2 border-b border-gray-400 hover:bg-opacity-30 dark:hover:bg-opacity-50 hover:bg-gray-300 dark:hover:bg-gray-800 rounded-t-md",children:[p.jsx("i",{className:"material-icons",children:"feed"}),p.jsx("p",{children:o("news")})]}),p.jsxs("button",{onClick:()=>Hn("/home/transactions-history"),className:"flex justify-start items-start w-full h-10 gap-3 p-2 border-b border-gray-400 hover:bg-opacity-30 dark:hover:bg-opacity-50 hover:bg-gray-300 dark:hover:bg-gray-800 rounded-t-md",children:[p.jsx("i",{className:"material-icons",children:"history"}),p.jsx("p",{children:o("transactions-history")})]}),p.jsxs("div",{className:"w-full flex",children:[p.jsxs("button",{onClick:()=>Hn("/home/dashboard"),className:"flex justify-start items-start w-full h-10 gap-3 p-2 border-b border-gray-400 hover:bg-opacity-30 dark:hover:bg-opacity-50 hover:bg-gray-300 dark:hover:bg-gray-800 rounded-t-md",children:[p.jsx("i",{className:"material-icons",children:"dashboard"}),p.jsx("p",{children:o("dashboard")})]}),p.jsx("button",{onClick:()=>{h(!d)},className:"material-icons",children:d?"expand_less":"expand_more"})]}),d&&p.jsxs("div",{className:"w-full flex flex-col pl-5 gap-3",children:[p.jsxs("button",{onClick:()=>{Hn("/home/dashboard/cashin")},className:"flex justify-start items-start w-full h-10 gap-3 p-2 border-b border-gray-400 hover:bg-gray-300 dark:hover:bg-gray-800 hover:bg-opacity-30 dark:hover:bg-opacity-50 rounded-t-md",children:[p.jsx("i",{className:"material-icons",children:"shopping_cart"}),p.jsx("p",{children:o("cashIn")})]}),p.jsxs("button",{onClick:()=>{Hn("/home/dashboard/withdraw")},className:"flex justify-start items-start w-full h-10 gap-3 p-2 border-b border-gray-400 hover:bg-gray-300 dark:hover:bg-gray-800 hover:bg-opacity-30 dark:hover:bg-opacity-50 rounded-t-md",children:[p.jsx("i",{className:"material-icons",children:"account_balance"}),p.jsx("p",{children:o("withdraw")})]})]})]}),p.jsxs("button",{className:"w-full p-5 h-12 flex justify-start items-center bg-gray-300 dark:bg-gray-800 rounded-lg gap-2 hover:bg-gray-400 dark:hover:bg-gray-900",onClick:c,children:[p.jsx("i",{className:"material-icons",children:"logout"}),o("signOut")]})]})]}),p.jsx("div",{className:"absolute",children:p.jsx(wl,{title:"signOutTitle",message:"signOutMessage",messageType:"confirm-warnning",action:f,isVisible:a,onClose:u})})]})},y_e=({isSearchOpen:t,searchData:e})=>{const[n,r]=S.useState(t),[i,s]=S.useState(!1),[o,a]=_o($o),[l,c]=_o(XE),{t:u}=Qe(),d=g=>{const m=g.target.value.toLowerCase();e==="coins"?f(m):e==="news"&&h(m)},h=g=>{const v=[...l.data].filter(_=>_.title.toLowerCase().includes(g)||_.body.toLowerCase().includes(g)||_.tags.toLowerCase().includes(g)||_.categories.toLowerCase().includes(g));c({...l,filterdData:v})},f=g=>{const v=[...o.data].filter(_=>_.name.toLowerCase().includes(g)||_.symbol.toLowerCase().includes(g));a({...o,filterdData:v})};return S.useEffect(()=>{!t&&n?(s(!0),setTimeout(()=>r(!1),500)):t&&!n&&(r(!0),s(!1))},[t,n]),n?p.jsx("div",{className:`flex flex-col justify-center p-5 items-center w-full rounded-b-2xl -z-10 absolute bg-gray-200 dark:bg-gray-900 opacity-95 font-bold text-black dark:text-white ${i?"slide-out-top":"slide-in-top"}`,children:p.jsxs("div",{className:"relative w-full",children:[p.jsx("div",{className:"absolute inset-y-0 start-0 flex items-center pl-2 pointer-events-none material-icons text-gray-500 dark:text-gray-400",children:"search"}),p.jsx("input",{type:"text",onChange:d,className:"pl-9 w-full p-2 text-sm text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:u("search")+"..."})]})}):null};function __e(){const{t}=Qe(),[e,n]=S.useState({days:0,hours:0,minutes:0,seconds:0});return S.useEffect(()=>{const a=new Date("April 21, 2024 18:01:00 UTC").getTime(),l=setInterval(()=>{const c=new Date().getTime(),u=a-c,d=Math.floor(u/864e5),h=Math.floor(u%864e5/36e5),f=Math.floor(u%36e5/6e4),g=Math.floor(u%6e4/1e3);n({days:d,hours:h,minutes:f,seconds:g})},1e3);return()=>{clearInterval(l)}},[]),p.jsxs("div",{className:"flex justify-start items-center font-semibold w-[300px]",children:[t("bitcoinHalving")+": ",p.jsx("h1",{className:"ml-2",children:e.days+"D "+e.hours+"H "+e.minutes+"M "+e.seconds+"S"})]})}function v_e(){const{t}=Qe(),[e,n]=S.useState(!1),[r,i]=S.useState(!1),[s,o]=S.useState(!1),[a,l]=S.useState(!1),[c,u]=S.useState(!1),[d,h]=S.useState(!1),[f,g]=S.useState(!1),m=()=>g(!0),v=()=>g(!1),[_,y]=_o(N2),{currentUser:w,currentUserData:b}=Ns(),[x,T]=S.useState(md),[I,E]=S.useState(""),k=g_();S.useEffect(()=>{console.log(b)},[b]);const D=[{title:"coins",icon:"monetization_on"},{title:"news",icon:"feed"},{title:"transactions-history",icon:"history"}],F=[{title:"cashIn",icon:"shopping_cart"},{title:"withdraw",icon:"account_balance"}],K=async()=>{try{await AV(Ao)}catch(R){alert(R.message)}};S.useEffect(()=>{const R=k.pathname.split("/");E(R[R.length-1])},[k]),S.useEffect(()=>{switch(Zt.language){case"en":T(md);break;case"de":T(jw);break;case"it":T($w);break;case"zh":T(Uw);break;case"ru":T(Bw);break;default:T(md)}},[Zt.language]);function X(R){n(!1),R==="light"?(document.documentElement.classList.remove("dark"),localStorage.theme="light",y({..._,theme:"light"})):(document.documentElement.classList.add("dark"),localStorage.theme="dark",y({..._,theme:"dark"}))}function le(R,V){i(!1),Zt.changeLanguage(R),T(V)}const C=(R,V)=>p.jsxs("button",{type:"button",onClick:()=>le(R,V),className:"w-full h-10 px-5 flex items-center text-black dark:text-white hover:bg-gray-100 dark:hover:bg-gray-600 gap-2",children:[p.jsx("img",{src:V,loading:"lazy",width:20,height:20}),t(R)]});return p.jsxs("div",{className:"z-10",children:[p.jsxs("nav",{className:"flex flex-wrap items-center justify-between mx-auto p-4 bg-gray-100 border-gray-200 dark:bg-gray-900",children:[p.jsxs("div",{className:"flex items-center space-x-3 rtl:space-x-reverse cursor-pointer",onClick:()=>Hn("/home"),children:[p.jsx("img",{src:bp,loading:"lazy",alt:"CryptoPulse logo",className:"h-8"}),p.jsx("span",{className:"self-center text-2xl font-semibold whitespace-nowrap dark:text-white",children:t("cryptoPulse")})]}),p.jsxs("div",{className:"flex md:order-2",children:[!a&&(I==="coins"||I==="news")&&p.jsx("button",{type:"button",onClick:()=>o(!s),className:"inline-flex items-center p-2 mr-2 w-10 h-10 justify-center text-sm text-gray-500 rounded-lg md:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600",children:p.jsx("i",{className:"material-icons",children:"search"})}),w?p.jsx("div",{className:"dropdown",children:p.jsx("button",{type:"button",onClick:()=>{o(!1),l(!a)},className:"inline-flex items-center p-2 w-10 h-10 justify-center text-sm text-gray-500 rounded-lg md:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600",children:p.jsx("i",{className:"material-icons",children:a?"close":"menu"})})}):p.jsxs("div",{className:"flex md:hidden flex-row items-center",children:[p.jsx("button",{onClick:()=>Hn("/welcome/signup"),type:"button",className:"material-icons text-black dark:text-white hover:bg-gray-100 p-2 mx-2 hover:rounded-full dark:hover:bg-gray-700",children:"edit"}),p.jsx("button",{onClick:()=>Hn("/welcome/login"),type:"button",className:"material-icons text-black dark:text-white hover:bg-gray-100 p-2 mx-2 hover:rounded-full dark:hover:bg-gray-700",children:"login"})]})]}),p.jsxs("div",{className:"text-black dark:text-white hidden justify-start items-center lg:order-2 rtl:space-x-reverse xl:flex",children:[p.jsx("img",{className:"mr-2",src:"https://assets.coingecko.com/coins/images/1/large/bitcoin.png?1696501400",loading:"lazy",width:20,height:20}),p.jsx(__e,{})]}),p.jsxs("div",{className:"hidden items-center md:order-2 space-x-2 md:space-x-0 rtl:space-x-reverse md:flex",children:[p.jsxs("div",{className:"dropdown",children:[p.jsx("button",{onClick:()=>{i(!1),u(!1),n(!e)},type:"button",className:"material-icons text-black dark:text-white hover:bg-gray-200 p-2 mx-4 hover:rounded-full dark:hover:bg-gray-700",children:_.theme==="dark"?"dark_mode":"light_mode"}),e&&p.jsxs("div",{className:"z-50 my-4 text-base py-2 font-medium list-none bg-white divide-gray-100 rounded-lg shadow dark:bg-gray-700 absolute origin-top left-0 mt-2",style:{width:"max-content"},children:[p.jsxs("button",{onClick:()=>X("light"),type:"button",className:"h-10 px-5 flex items-center text-black dark:text-white hover:bg-gray-100 dark:hover:bg-gray-600",style:{width:"-webkit-fill-available"},children:[p.jsx("i",{className:"material-icons mr-2",children:"light_mode"}),t("lightMode")]}),p.jsxs("button",{onClick:()=>X("dark"),type:"button",className:"h-10 px-5 flex items-center text-black dark:text-white hover:bg-gray-100 dark:hover:bg-gray-600",style:{width:"-webkit-fill-available"},children:[p.jsx("i",{className:"material-icons mr-2",children:"dark_mode"}),t("darkMode")]})]})]}),p.jsxs("div",{className:"dropdown",children:[p.jsxs("button",{onClick:()=>{n(!1),u(!1),i(!r)},type:"button",className:"inline-flex items-center font-medium p-2 text-sm text-gray-900 dark:text-white rounded-lg cursor-pointer hover:bg-gray-200 dark:hover:bg-gray-700 mr-2",children:[p.jsx("img",{src:x,loading:"lazy",width:20,height:20,className:"mr-2"}),t("languageName"),p.jsx("i",{className:"material-icons",children:"arrow_drop_down"})]}),r&&p.jsxs("div",{className:"z-50 my-4 py-2 font-medium text-base list-none bg-white divide-gray-200 rounded-lg shadow dark:bg-gray-700 absolute origin-top left-0 mt-2 w-max",children:[C("en",md),C("ru",Bw),C("de",jw),C("it",$w),C("zh",Uw)]})]}),w&&b&&p.jsxs("button",{type:"button",onClick:()=>{n(!1),i(!1),u(!c)},className:"flex items-center font-medium p-2 text-sm text-gray-900 dark:text-white rounded-lg hover:bg-gray-200 dark:hover:bg-gray-700",children:[p.jsx("i",{className:"material-icons mr-2",children:"account_circle"}),p.jsxs("span",{children:[" ",w.displayName," "]})]}),!w||!b?p.jsxs("div",{className:"space-x-4",children:[p.jsx("button",{onClick:()=>Hn("/welcome/signup"),className:"text-gray-800 px-2 py-2 rounded-xl dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 dark:hover:text-white",children:t("signUp")}),p.jsx("button",{onClick:()=>Hn("/welcome/login"),className:"text-gray-800 px-2 py-2 rounded-xl dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 dark:hover:text-white",children:t("logIn")})]}):null]})]}),p.jsx(y_e,{isSearchOpen:s,searchData:I}),p.jsx(m_e,{isUserMenuOpen:c}),a&&w&&p.jsxs("div",{className:"scrollable-content content items-center p-5 absolute md:hidden bg-opacity-95 bg-gray-200 dark:bg-gray-700 font-bold text-black dark:text-white",style:{backdropFilter:"blur(10px)",WebkitBackdropFilter:"blur(10px)"},children:[p.jsxs("div",{className:"flex flex-col justify-center items-center w-full",children:[p.jsx("div",{className:"flex justify-end items-end w-full",children:p.jsx("button",{onClick:()=>Hn("/home/settings"),className:"material-icons p-1 rounded-full hover:text-gray-500 dark:hover:text-gray-200",children:"settings"})}),p.jsxs("div",{className:"w-[80%] flex flex-col justify-center items-center gap-4 pb-10",children:[p.jsxs("div",{className:"flex flex-col justify-center items-center gap-3",children:[p.jsx("i",{className:"material-icons",style:{fontSize:"100px"},children:"account_circle"}),p.jsx("p",{children:w&&w.displayName})]}),D.map(R=>p.jsxs("a",{href:`/home/${R.title}`,className:"flex h-10 gap-5 w-full px-5 border-b border-gray-400",onClick:()=>E(R.title),children:[p.jsx("i",{className:"material-icons",children:R.icon}),t(R.title)]},R.title)),p.jsxs("div",{className:"w-full flex items-start",children:[p.jsxs("a",{href:"/home/dashboard",className:"flex h-10 gap-5 w-full px-5 border-b border-gray-400",onClick:()=>E("dashboard"),children:[p.jsx("i",{className:"material-icons",children:"dashboard"}),t("dashboard")]},"dashboard"),p.jsx("button",{onClick:()=>{h(!d)},className:"material-icons",children:d?"expand_less":"expand_more"})]}),d&&F.map(R=>p.jsx("a",{href:`/home/dashboard/${R.title}`,className:"flex w-full pl-10 h-10  ",onClick:()=>E(R.title),children:p.jsxs("div",{className:"w-full flex gap-5 border-b border-gray-400",children:[p.jsx("i",{className:"material-icons",children:R.icon}),t(R.title)]})},R.title)),p.jsxs("div",{className:"w-full py-2",children:[p.jsxs("button",{onClick:()=>i(!r),className:"flex justify-between items-center gap-1",children:[p.jsx("i",{className:"material-icons",children:"translate"}),t("languageName"),p.jsx("i",{className:"material-icons",children:"expand_more"})]}),r&&p.jsxs("div",{className:"flex flex-col justify-center items-start gap-3 py-2 px-7",children:[p.jsx("button",{onClick:()=>le("en",md),className:"flex justify-between items-center",children:"English (US)"}),p.jsx("button",{onClick:()=>le("ru",Bw),className:"flex justify-between items-center",children:"Русский"}),p.jsx("button",{onClick:()=>le("de",jw),className:"flex justify-between items-center",children:"Deutsch"}),p.jsx("button",{onClick:()=>le("it",$w),className:"flex justify-between items-center",children:"Italiano"}),p.jsx("button",{onClick:()=>le("zh",Uw),className:"flex justify-between items-center",children:"中文 (繁體)"})]})]}),p.jsxs("div",{className:"w-full p-5 h-12 flex justify-between items-center bg-gray-300 dark:bg-gray-800 rounded-lg",children:[t("darkMode"),p.jsxs("label",{className:"toggle-switch",children:[p.jsx("input",{type:"checkbox",checked:_.theme==="dark",onChange:R=>X(R.target.checked?"dark":"light")}),p.jsx("span",{className:"switch"})]})]}),p.jsxs("button",{className:"w-full p-5 h-12 flex justify-start items-center bg-gray-300 dark:bg-gray-800 rounded-lg gap-2 hover:bg-gray-400 dark:hover:bg-gray-900",onClick:m,children:[p.jsx("i",{className:"material-icons",children:"logout"}),t("signOut")]})]})]}),p.jsxs("div",{className:"flex gap-4 text-lg ",children:[p.jsx("a",{href:"https://www.instagram.com",className:"fa fa-instagram cursor-pointer p-1 text-fuchsia-400",target:"_blank","aria-hidden":"true"}),p.jsx("a",{href:"https://wa.me/972543921507",className:"fa fa-whatsapp cursor-pointer p-1 text-green",target:"_blank","aria-hidden":"true"}),p.jsx("a",{href:"https://www.facebook.com",className:"fa fa-facebook-official cursor-pointer p-1 text-blue-500",target:"_blank","aria-hidden":"true"})]})]}),p.jsx(wl,{title:"signOutTitle",message:"signOutMessage",messageType:"confirm-warnning",action:K,isVisible:f,onClose:v})]})}const RD=({isAuthenticated:t,children:e})=>t?p.jsx(rc,{to:"/home",replace:!0}):e;function w_e(){const[t,e]=_o(N2),{currentUser:n}=Ns();return S.useEffect(()=>{localStorage.theme==="dark"||!("theme"in localStorage)&&window.matchMedia("(prefers-color-scheme: dark)").matches?(document.documentElement.classList.add("dark"),e({...t,theme:"dark"})):(document.documentElement.classList.remove("dark"),e({...t,theme:"light"}))},[]),p.jsxs("div",{className:"App flex flex-col",children:[p.jsx(v_e,{}),p.jsxs(d9,{children:[p.jsxs(Qt,{path:"welcome",element:p.jsx(RD,{isAuthenticated:n,children:p.jsx($b,{})}),children:[p.jsx(Qt,{path:"",element:p.jsx(tde,{})}),p.jsx(Qt,{path:"login",element:p.jsx(Bse,{})}),p.jsx(Qt,{path:"signup",element:p.jsx(zse,{})}),p.jsx(Qt,{path:"*",element:p.jsx(rc,{replace:!0,to:""})})]}),p.jsxs(Qt,{path:"home",element:p.jsx(wse,{isAuthenticated:n}),children:[p.jsx(Qt,{index:!0,element:p.jsx(Use,{})}),p.jsx(Qt,{path:"settings",element:p.jsx(qye,{})}),p.jsx(Qt,{path:"coins",element:p.jsx(Xue,{})}),p.jsx(Qt,{path:"news",element:p.jsx(ede,{})}),p.jsx(Qt,{path:"transactions-history",element:p.jsx(age,{})}),p.jsxs(Qt,{path:"dashboard",element:p.jsx($b,{}),children:[p.jsx(Qt,{path:"",element:p.jsx(ide,{})}),p.jsx(Qt,{path:"cashin",element:p.jsx(Zpe,{})}),p.jsx(Qt,{path:"withdraw",element:p.jsx(ege,{})}),p.jsx(Qt,{path:"*",element:p.jsx(rc,{replace:!0,to:""})})]}),p.jsx(Qt,{path:"*",element:p.jsx(rc,{replace:!0,to:""})})]}),p.jsx(Qt,{path:"*",element:p.jsx(RD,{isAuthenticated:n,children:p.jsx(rc,{replace:!0,to:"/welcome"})})})]})]})}function Hn(t){window.location.replace(t)}function OS(t){"@babel/helpers - typeof";return OS=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},OS(t)}function A4(){return typeof XMLHttpRequest=="function"||(typeof XMLHttpRequest>"u"?"undefined":OS(XMLHttpRequest))==="object"}function b_e(t){return!!t&&typeof t.then=="function"}function x_e(t){return b_e(t)?t:Promise.resolve(t)}function S_e(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var MS={exports:{}},Dg={exports:{}},kD;function E_e(){return kD||(kD=1,function(t,e){var n=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof $d<"u"&&$d,r=function(){function s(){this.fetch=!1,this.DOMException=n.DOMException}return s.prototype=n,new s}();(function(s){(function(o){var a=typeof s<"u"&&s||typeof self<"u"&&self||typeof a<"u"&&a,l={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function c(C){return C&&DataView.prototype.isPrototypeOf(C)}if(l.arrayBuffer)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],d=ArrayBuffer.isView||function(C){return C&&u.indexOf(Object.prototype.toString.call(C))>-1};function h(C){if(typeof C!="string"&&(C=String(C)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(C)||C==="")throw new TypeError('Invalid character in header field name: "'+C+'"');return C.toLowerCase()}function f(C){return typeof C!="string"&&(C=String(C)),C}function g(C){var R={next:function(){var V=C.shift();return{done:V===void 0,value:V}}};return l.iterable&&(R[Symbol.iterator]=function(){return R}),R}function m(C){this.map={},C instanceof m?C.forEach(function(R,V){this.append(V,R)},this):Array.isArray(C)?C.forEach(function(R){this.append(R[0],R[1])},this):C&&Object.getOwnPropertyNames(C).forEach(function(R){this.append(R,C[R])},this)}m.prototype.append=function(C,R){C=h(C),R=f(R);var V=this.map[C];this.map[C]=V?V+", "+R:R},m.prototype.delete=function(C){delete this.map[h(C)]},m.prototype.get=function(C){return C=h(C),this.has(C)?this.map[C]:null},m.prototype.has=function(C){return this.map.hasOwnProperty(h(C))},m.prototype.set=function(C,R){this.map[h(C)]=f(R)},m.prototype.forEach=function(C,R){for(var V in this.map)this.map.hasOwnProperty(V)&&C.call(R,this.map[V],V,this)},m.prototype.keys=function(){var C=[];return this.forEach(function(R,V){C.push(V)}),g(C)},m.prototype.values=function(){var C=[];return this.forEach(function(R){C.push(R)}),g(C)},m.prototype.entries=function(){var C=[];return this.forEach(function(R,V){C.push([V,R])}),g(C)},l.iterable&&(m.prototype[Symbol.iterator]=m.prototype.entries);function v(C){if(C.bodyUsed)return Promise.reject(new TypeError("Already read"));C.bodyUsed=!0}function _(C){return new Promise(function(R,V){C.onload=function(){R(C.result)},C.onerror=function(){V(C.error)}})}function y(C){var R=new FileReader,V=_(R);return R.readAsArrayBuffer(C),V}function w(C){var R=new FileReader,V=_(R);return R.readAsText(C),V}function b(C){for(var R=new Uint8Array(C),V=new Array(R.length),M=0;M<R.length;M++)V[M]=String.fromCharCode(R[M]);return V.join("")}function x(C){if(C.slice)return C.slice(0);var R=new Uint8Array(C.byteLength);return R.set(new Uint8Array(C)),R.buffer}function T(){return this.bodyUsed=!1,this._initBody=function(C){this.bodyUsed=this.bodyUsed,this._bodyInit=C,C?typeof C=="string"?this._bodyText=C:l.blob&&Blob.prototype.isPrototypeOf(C)?this._bodyBlob=C:l.formData&&FormData.prototype.isPrototypeOf(C)?this._bodyFormData=C:l.searchParams&&URLSearchParams.prototype.isPrototypeOf(C)?this._bodyText=C.toString():l.arrayBuffer&&l.blob&&c(C)?(this._bodyArrayBuffer=x(C.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):l.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(C)||d(C))?this._bodyArrayBuffer=x(C):this._bodyText=C=Object.prototype.toString.call(C):this._bodyText="",this.headers.get("content-type")||(typeof C=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):l.searchParams&&URLSearchParams.prototype.isPrototypeOf(C)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},l.blob&&(this.blob=function(){var C=v(this);if(C)return C;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var C=v(this);return C||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else return this.blob().then(y)}),this.text=function(){var C=v(this);if(C)return C;if(this._bodyBlob)return w(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(b(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},l.formData&&(this.formData=function(){return this.text().then(D)}),this.json=function(){return this.text().then(JSON.parse)},this}var I=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function E(C){var R=C.toUpperCase();return I.indexOf(R)>-1?R:C}function k(C,R){if(!(this instanceof k))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');R=R||{};var V=R.body;if(C instanceof k){if(C.bodyUsed)throw new TypeError("Already read");this.url=C.url,this.credentials=C.credentials,R.headers||(this.headers=new m(C.headers)),this.method=C.method,this.mode=C.mode,this.signal=C.signal,!V&&C._bodyInit!=null&&(V=C._bodyInit,C.bodyUsed=!0)}else this.url=String(C);if(this.credentials=R.credentials||this.credentials||"same-origin",(R.headers||!this.headers)&&(this.headers=new m(R.headers)),this.method=E(R.method||this.method||"GET"),this.mode=R.mode||this.mode||null,this.signal=R.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&V)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(V),(this.method==="GET"||this.method==="HEAD")&&(R.cache==="no-store"||R.cache==="no-cache")){var M=/([?&])_=[^&]*/;if(M.test(this.url))this.url=this.url.replace(M,"$1_="+new Date().getTime());else{var U=/\?/;this.url+=(U.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}k.prototype.clone=function(){return new k(this,{body:this._bodyInit})};function D(C){var R=new FormData;return C.trim().split("&").forEach(function(V){if(V){var M=V.split("="),U=M.shift().replace(/\+/g," "),j=M.join("=").replace(/\+/g," ");R.append(decodeURIComponent(U),decodeURIComponent(j))}}),R}function F(C){var R=new m,V=C.replace(/\r?\n[\t ]+/g," ");return V.split("\r").map(function(M){return M.indexOf(`
`)===0?M.substr(1,M.length):M}).forEach(function(M){var U=M.split(":"),j=U.shift().trim();if(j){var ie=U.join(":").trim();R.append(j,ie)}}),R}T.call(k.prototype);function K(C,R){if(!(this instanceof K))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');R||(R={}),this.type="default",this.status=R.status===void 0?200:R.status,this.ok=this.status>=200&&this.status<300,this.statusText=R.statusText===void 0?"":""+R.statusText,this.headers=new m(R.headers),this.url=R.url||"",this._initBody(C)}T.call(K.prototype),K.prototype.clone=function(){return new K(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new m(this.headers),url:this.url})},K.error=function(){var C=new K(null,{status:0,statusText:""});return C.type="error",C};var X=[301,302,303,307,308];K.redirect=function(C,R){if(X.indexOf(R)===-1)throw new RangeError("Invalid status code");return new K(null,{status:R,headers:{location:C}})},o.DOMException=a.DOMException;try{new o.DOMException}catch{o.DOMException=function(R,V){this.message=R,this.name=V;var M=Error(R);this.stack=M.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function le(C,R){return new Promise(function(V,M){var U=new k(C,R);if(U.signal&&U.signal.aborted)return M(new o.DOMException("Aborted","AbortError"));var j=new XMLHttpRequest;function ie(){j.abort()}j.onload=function(){var $={status:j.status,statusText:j.statusText,headers:F(j.getAllResponseHeaders()||"")};$.url="responseURL"in j?j.responseURL:$.headers.get("X-Request-URL");var B="response"in j?j.response:j.responseText;setTimeout(function(){V(new K(B,$))},0)},j.onerror=function(){setTimeout(function(){M(new TypeError("Network request failed"))},0)},j.ontimeout=function(){setTimeout(function(){M(new TypeError("Network request failed"))},0)},j.onabort=function(){setTimeout(function(){M(new o.DOMException("Aborted","AbortError"))},0)};function A($){try{return $===""&&a.location.href?a.location.href:$}catch{return $}}j.open(U.method,A(U.url),!0),U.credentials==="include"?j.withCredentials=!0:U.credentials==="omit"&&(j.withCredentials=!1),"responseType"in j&&(l.blob?j.responseType="blob":l.arrayBuffer&&U.headers.get("Content-Type")&&U.headers.get("Content-Type").indexOf("application/octet-stream")!==-1&&(j.responseType="arraybuffer")),R&&typeof R.headers=="object"&&!(R.headers instanceof m)?Object.getOwnPropertyNames(R.headers).forEach(function($){j.setRequestHeader($,f(R.headers[$]))}):U.headers.forEach(function($,B){j.setRequestHeader(B,$)}),U.signal&&(U.signal.addEventListener("abort",ie),j.onreadystatechange=function(){j.readyState===4&&U.signal.removeEventListener("abort",ie)}),j.send(typeof U._bodyInit>"u"?null:U._bodyInit)})}return le.polyfill=!0,a.fetch||(a.fetch=le,a.Headers=m,a.Request=k,a.Response=K),o.Headers=m,o.Request=k,o.Response=K,o.fetch=le,o})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var i=n.fetch?n:r;e=i.fetch,e.default=i.fetch,e.fetch=i.fetch,e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response,t.exports=e}(Dg,Dg.exports)),Dg.exports}(function(t,e){var n;if(typeof fetch=="function"&&(typeof $d<"u"&&$d.fetch?n=$d.fetch:typeof window<"u"&&window.fetch?n=window.fetch:n=fetch),typeof S_e<"u"&&(typeof window>"u"||typeof window.document>"u")){var r=n||E_e();r.default&&(r=r.default),e.default=r,t.exports=e.default}})(MS,MS.exports);var P4=MS.exports;const N4=VS(P4),AD=UD({__proto__:null,default:N4},[P4]);function PD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ND(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?PD(Object(n),!0).forEach(function(r){T_e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):PD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function T_e(t,e,n){return e=I_e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function I_e(t){var e=C_e(t,"string");return ol(e)=="symbol"?e:String(e)}function C_e(t,e){if(ol(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(ol(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ol(t){"@babel/helpers - typeof";return ol=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ol(t)}var gs;typeof fetch=="function"&&(typeof global<"u"&&global.fetch?gs=global.fetch:typeof window<"u"&&window.fetch?gs=window.fetch:gs=fetch);var Af;A4()&&(typeof global<"u"&&global.XMLHttpRequest?Af=global.XMLHttpRequest:typeof window<"u"&&window.XMLHttpRequest&&(Af=window.XMLHttpRequest));var Xy;typeof ActiveXObject=="function"&&(typeof global<"u"&&global.ActiveXObject?Xy=global.ActiveXObject:typeof window<"u"&&window.ActiveXObject&&(Xy=window.ActiveXObject));!gs&&AD&&!Af&&!Xy&&(gs=N4||AD);typeof gs!="function"&&(gs=void 0);var LS=function(e,n){if(n&&ol(n)==="object"){var r="";for(var i in n)r+="&"+encodeURIComponent(i)+"="+encodeURIComponent(n[i]);if(!r)return e;e=e+(e.indexOf("?")!==-1?"&":"?")+r.slice(1)}return e},DD=function(e,n,r,i){var s=function(l){if(!l.ok)return r(l.statusText||"Error",{status:l.status});l.text().then(function(c){r(null,{status:l.status,data:c})}).catch(r)};if(i){var o=i(e,n);if(o instanceof Promise){o.then(s).catch(r);return}}typeof fetch=="function"?fetch(e,n).then(s).catch(r):gs(e,n).then(s).catch(r)},OD=!1,R_e=function(e,n,r,i){e.queryStringParams&&(n=LS(n,e.queryStringParams));var s=ND({},typeof e.customHeaders=="function"?e.customHeaders():e.customHeaders);typeof window>"u"&&typeof global<"u"&&typeof global.process<"u"&&global.process.versions&&global.process.versions.node&&(s["User-Agent"]="i18next-http-backend (node/".concat(global.process.version,"; ").concat(global.process.platform," ").concat(global.process.arch,")")),r&&(s["Content-Type"]="application/json");var o=typeof e.requestOptions=="function"?e.requestOptions(r):e.requestOptions,a=ND({method:r?"POST":"GET",body:r?e.stringify(r):void 0,headers:s},OD?{}:o),l=typeof e.alternateFetch=="function"&&e.alternateFetch.length>=1?e.alternateFetch:void 0;try{DD(n,a,i,l)}catch(c){if(!o||Object.keys(o).length===0||!c.message||c.message.indexOf("not implemented")<0)return i(c);try{Object.keys(o).forEach(function(u){delete a[u]}),DD(n,a,i,l),OD=!0}catch(u){i(u)}}},k_e=function(e,n,r,i){r&&ol(r)==="object"&&(r=LS("",r).slice(1)),e.queryStringParams&&(n=LS(n,e.queryStringParams));try{var s;Af?s=new Af:s=new Xy("MSXML2.XMLHTTP.3.0"),s.open(r?"POST":"GET",n,1),e.crossDomain||s.setRequestHeader("X-Requested-With","XMLHttpRequest"),s.withCredentials=!!e.withCredentials,r&&s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s.overrideMimeType&&s.overrideMimeType("application/json");var o=e.customHeaders;if(o=typeof o=="function"?o():o,o)for(var a in o)s.setRequestHeader(a,o[a]);s.onreadystatechange=function(){s.readyState>3&&i(s.status>=400?s.statusText:null,{status:s.status,data:s.responseText})},s.send(r)}catch(l){console&&console.log(l)}},A_e=function(e,n,r,i){if(typeof r=="function"&&(i=r,r=void 0),i=i||function(){},gs&&n.indexOf("file:")!==0)return R_e(e,n,r,i);if(A4()||typeof ActiveXObject=="function")return k_e(e,n,r,i);i(new Error("No fetch and no xhr implementation found!"))};function Pf(t){"@babel/helpers - typeof";return Pf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pf(t)}function MD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ww(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?MD(Object(n),!0).forEach(function(r){D4(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):MD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function P_e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function LD(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,O4(r.key),r)}}function N_e(t,e,n){return e&&LD(t.prototype,e),n&&LD(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function D4(t,e,n){return e=O4(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function O4(t){var e=D_e(t,"string");return Pf(e)=="symbol"?e:String(e)}function D_e(t,e){if(Pf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Pf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var O_e=function(){return{loadPath:"/locales/{{lng}}/{{ns}}.json",addPath:"/locales/add/{{lng}}/{{ns}}",parse:function(n){return JSON.parse(n)},stringify:JSON.stringify,parsePayload:function(n,r,i){return D4({},r,i||"")},parseLoadPayload:function(n,r){},request:A_e,reloadInterval:typeof window<"u"?!1:60*60*1e3,customHeaders:{},queryStringParams:{},crossDomain:!1,withCredentials:!1,overrideMimeType:!1,requestOptions:{mode:"cors",credentials:"same-origin",cache:"default"}}},M4=function(){function t(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};P_e(this,t),this.services=e,this.options=n,this.allOptions=r,this.type="backend",this.init(e,n,r)}return N_e(t,[{key:"init",value:function(n){var r=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=n,this.options=Ww(Ww(Ww({},O_e()),this.options||{}),i),this.allOptions=s,this.services&&this.options.reloadInterval&&setInterval(function(){return r.reload()},this.options.reloadInterval)}},{key:"readMulti",value:function(n,r,i){this._readAny(n,n,r,r,i)}},{key:"read",value:function(n,r,i){this._readAny([n],n,[r],r,i)}},{key:"_readAny",value:function(n,r,i,s,o){var a=this,l=this.options.loadPath;typeof this.options.loadPath=="function"&&(l=this.options.loadPath(n,i)),l=x_e(l),l.then(function(c){if(!c)return o(null,{});var u=a.services.interpolator.interpolate(c,{lng:n.join("+"),ns:i.join("+")});a.loadUrl(u,o,r,s)})}},{key:"loadUrl",value:function(n,r,i,s){var o=this,a=typeof i=="string"?[i]:i,l=typeof s=="string"?[s]:s,c=this.options.parseLoadPayload(a,l);this.options.request(this.options,n,c,function(u,d){if(d&&(d.status>=500&&d.status<600||!d.status))return r("failed loading "+n+"; status code: "+d.status,!0);if(d&&d.status>=400&&d.status<500)return r("failed loading "+n+"; status code: "+d.status,!1);if(!d&&u&&u.message&&u.message.indexOf("Failed to fetch")>-1)return r("failed loading "+n+": "+u.message,!0);if(u)return r(u,!1);var h,f;try{typeof d.data=="string"?h=o.options.parse(d.data,i,s):h=d.data}catch{f="failed parsing "+n+" to json"}if(f)return r(f,!1);r(null,h)})}},{key:"create",value:function(n,r,i,s,o){var a=this;if(this.options.addPath){typeof n=="string"&&(n=[n]);var l=this.options.parsePayload(r,i,s),c=0,u=[],d=[];n.forEach(function(h){var f=a.options.addPath;typeof a.options.addPath=="function"&&(f=a.options.addPath(h,r));var g=a.services.interpolator.interpolate(f,{lng:h,ns:r});a.options.request(a.options,g,l,function(m,v){c+=1,u.push(m),d.push(v),c===n.length&&typeof o=="function"&&o(u,d)})})}}},{key:"reload",value:function(){var n=this,r=this.services,i=r.backendConnector,s=r.languageUtils,o=r.logger,a=i.language;if(!(a&&a.toLowerCase()==="cimode")){var l=[],c=function(d){var h=s.toResolveHierarchy(d);h.forEach(function(f){l.indexOf(f)<0&&l.push(f)})};c(a),this.allOptions.preload&&this.allOptions.preload.forEach(function(u){return c(u)}),l.forEach(function(u){n.allOptions.ns.forEach(function(d){i.read(u,d,"read",null,null,function(h,f){h&&o.warn("loading namespace ".concat(d," for language ").concat(u," failed"),h),!h&&f&&o.log("loaded namespace ".concat(d," for language ").concat(u),f),i.loaded("".concat(u,"|").concat(d),h,f)})})})}}}]),t}();M4.type="backend";var L4=[],M_e=L4.forEach,L_e=L4.slice;function V_e(t){return M_e.call(L_e.call(arguments,1),function(e){if(e)for(var n in e)t[n]===void 0&&(t[n]=e[n])}),t}var VD=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,F_e=function(e,n,r){var i=r||{};i.path=i.path||"/";var s=encodeURIComponent(n),o="".concat(e,"=").concat(s);if(i.maxAge>0){var a=i.maxAge-0;if(Number.isNaN(a))throw new Error("maxAge should be a Number");o+="; Max-Age=".concat(Math.floor(a))}if(i.domain){if(!VD.test(i.domain))throw new TypeError("option domain is invalid");o+="; Domain=".concat(i.domain)}if(i.path){if(!VD.test(i.path))throw new TypeError("option path is invalid");o+="; Path=".concat(i.path)}if(i.expires){if(typeof i.expires.toUTCString!="function")throw new TypeError("option expires is invalid");o+="; Expires=".concat(i.expires.toUTCString())}if(i.httpOnly&&(o+="; HttpOnly"),i.secure&&(o+="; Secure"),i.sameSite){var l=typeof i.sameSite=="string"?i.sameSite.toLowerCase():i.sameSite;switch(l){case!0:o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"strict":o+="; SameSite=Strict";break;case"none":o+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return o},FD={create:function(e,n,r,i){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};r&&(s.expires=new Date,s.expires.setTime(s.expires.getTime()+r*60*1e3)),i&&(s.domain=i),document.cookie=F_e(e,encodeURIComponent(n),s)},read:function(e){for(var n="".concat(e,"="),r=document.cookie.split(";"),i=0;i<r.length;i++){for(var s=r[i];s.charAt(0)===" ";)s=s.substring(1,s.length);if(s.indexOf(n)===0)return s.substring(n.length,s.length)}return null},remove:function(e){this.create(e,"",-1)}},j_e={name:"cookie",lookup:function(e){var n;if(e.lookupCookie&&typeof document<"u"){var r=FD.read(e.lookupCookie);r&&(n=r)}return n},cacheUserLanguage:function(e,n){n.lookupCookie&&typeof document<"u"&&FD.create(n.lookupCookie,e,n.cookieMinutes,n.cookieDomain,n.cookieOptions)}},$_e={name:"querystring",lookup:function(e){var n;if(typeof window<"u"){var r=window.location.search;!window.location.search&&window.location.hash&&window.location.hash.indexOf("?")>-1&&(r=window.location.hash.substring(window.location.hash.indexOf("?")));for(var i=r.substring(1),s=i.split("&"),o=0;o<s.length;o++){var a=s[o].indexOf("=");if(a>0){var l=s[o].substring(0,a);l===e.lookupQuerystring&&(n=s[o].substring(a+1))}}}return n}},_d=null,jD=function(){if(_d!==null)return _d;try{_d=window!=="undefined"&&window.localStorage!==null;var e="i18next.translate.boo";window.localStorage.setItem(e,"foo"),window.localStorage.removeItem(e)}catch{_d=!1}return _d},U_e={name:"localStorage",lookup:function(e){var n;if(e.lookupLocalStorage&&jD()){var r=window.localStorage.getItem(e.lookupLocalStorage);r&&(n=r)}return n},cacheUserLanguage:function(e,n){n.lookupLocalStorage&&jD()&&window.localStorage.setItem(n.lookupLocalStorage,e)}},vd=null,$D=function(){if(vd!==null)return vd;try{vd=window!=="undefined"&&window.sessionStorage!==null;var e="i18next.translate.boo";window.sessionStorage.setItem(e,"foo"),window.sessionStorage.removeItem(e)}catch{vd=!1}return vd},B_e={name:"sessionStorage",lookup:function(e){var n;if(e.lookupSessionStorage&&$D()){var r=window.sessionStorage.getItem(e.lookupSessionStorage);r&&(n=r)}return n},cacheUserLanguage:function(e,n){n.lookupSessionStorage&&$D()&&window.sessionStorage.setItem(n.lookupSessionStorage,e)}},z_e={name:"navigator",lookup:function(e){var n=[];if(typeof navigator<"u"){if(navigator.languages)for(var r=0;r<navigator.languages.length;r++)n.push(navigator.languages[r]);navigator.userLanguage&&n.push(navigator.userLanguage),navigator.language&&n.push(navigator.language)}return n.length>0?n:void 0}},W_e={name:"htmlTag",lookup:function(e){var n,r=e.htmlTag||(typeof document<"u"?document.documentElement:null);return r&&typeof r.getAttribute=="function"&&(n=r.getAttribute("lang")),n}},H_e={name:"path",lookup:function(e){var n;if(typeof window<"u"){var r=window.location.pathname.match(/\/([a-zA-Z-]*)/g);if(r instanceof Array)if(typeof e.lookupFromPathIndex=="number"){if(typeof r[e.lookupFromPathIndex]!="string")return;n=r[e.lookupFromPathIndex].replace("/","")}else n=r[0].replace("/","")}return n}},q_e={name:"subdomain",lookup:function(e){var n=typeof e.lookupFromSubdomainIndex=="number"?e.lookupFromSubdomainIndex+1:1,r=typeof window<"u"&&window.location&&window.location.hostname&&window.location.hostname.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i);if(r)return r[n]}};function G_e(){return{order:["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"],lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:function(e){return e}}}var V4=function(){function t(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};IB(this,t),this.type="languageDetector",this.detectors={},this.init(e,n)}return CB(t,[{key:"init",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=n||{languageUtils:{}},this.options=V_e(r,this.options||{},G_e()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=function(s){return s.replace("-","_")}),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=i,this.addDetector(j_e),this.addDetector($_e),this.addDetector(U_e),this.addDetector(B_e),this.addDetector(z_e),this.addDetector(W_e),this.addDetector(H_e),this.addDetector(q_e)}},{key:"addDetector",value:function(n){this.detectors[n.name]=n}},{key:"detect",value:function(n){var r=this;n||(n=this.options.order);var i=[];return n.forEach(function(s){if(r.detectors[s]){var o=r.detectors[s].lookup(r.options);o&&typeof o=="string"&&(o=[o]),o&&(i=i.concat(o))}}),i=i.map(function(s){return r.options.convertDetectedLanguage(s)}),this.services.languageUtils.getBestMatchFromCodes?i:i.length>0?i[0]:null}},{key:"cacheUserLanguage",value:function(n,r){var i=this;r||(r=this.options.caches),r&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(n)>-1||r.forEach(function(s){i.detectors[s]&&i.detectors[s].cacheUserLanguage(n,i.options)}))}}]),t}();V4.type="languageDetector";Zt.use(M4).use(V4).use(Nse).init({supportedLngs:["en","it","zh","ru","de"],fallbackLng:"en",detection:{order:["querystring","cookie","localStorage","path","subdomain"],caches:["cookie"]},backend:{loadPath:"/locales/{{lng}}/{{ns}}.json"}});const K_e=qw.createRoot(document.getElementById("root"));K_e.render(p.jsx(rt.StrictMode,{children:p.jsx(p9,{children:p.jsx(s7,{children:p.jsx($se,{children:p.jsx(w_e,{})})})})}));
