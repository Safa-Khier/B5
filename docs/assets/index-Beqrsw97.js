var dV=Object.defineProperty;var fV=(t,e,n)=>e in t?dV(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var q=(t,e,n)=>(fV(t,typeof e!="symbol"?e+"":e,n),n);function cA(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var nu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Q0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var uA={exports:{}},Sg={},hA={exports:{}},ke={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uh=Symbol.for("react.element"),pV=Symbol.for("react.portal"),gV=Symbol.for("react.fragment"),mV=Symbol.for("react.strict_mode"),yV=Symbol.for("react.profiler"),_V=Symbol.for("react.provider"),vV=Symbol.for("react.context"),wV=Symbol.for("react.forward_ref"),bV=Symbol.for("react.suspense"),SV=Symbol.for("react.memo"),EV=Symbol.for("react.lazy"),AS=Symbol.iterator;function TV(t){return t===null||typeof t!="object"?null:(t=AS&&t[AS]||t["@@iterator"],typeof t=="function"?t:null)}var dA={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},fA=Object.assign,pA={};function Ml(t,e,n){this.props=t,this.context=e,this.refs=pA,this.updater=n||dA}Ml.prototype.isReactComponent={};Ml.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ml.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function gA(){}gA.prototype=Ml.prototype;function Y0(t,e,n){this.props=t,this.context=e,this.refs=pA,this.updater=n||dA}var X0=Y0.prototype=new gA;X0.constructor=Y0;fA(X0,Ml.prototype);X0.isPureReactComponent=!0;var kS=Array.isArray,mA=Object.prototype.hasOwnProperty,J0={current:null},yA={key:!0,ref:!0,__self:!0,__source:!0};function _A(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)mA.call(e,r)&&!yA.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Uh,type:t,key:s,ref:o,props:i,_owner:J0.current}}function IV(t,e){return{$$typeof:Uh,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Z0(t){return typeof t=="object"&&t!==null&&t.$$typeof===Uh}function xV(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var PS=/\/+/g;function uy(t,e){return typeof t=="object"&&t!==null&&t.key!=null?xV(""+t.key):e.toString(36)}function Af(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Uh:case pV:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+uy(o,0):r,kS(i)?(n="",t!=null&&(n=t.replace(PS,"$&/")+"/"),Af(i,e,n,"",function(c){return c})):i!=null&&(Z0(i)&&(i=IV(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(PS,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",kS(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+uy(s,a);o+=Af(s,e,n,l,i)}else if(l=TV(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+uy(s,a++),o+=Af(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Nd(t,e,n){if(t==null)return t;var r=[],i=0;return Af(t,r,"","",function(s){return e.call(n,s,i++)}),r}function RV(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var bn={current:null},kf={transition:null},AV={ReactCurrentDispatcher:bn,ReactCurrentBatchConfig:kf,ReactCurrentOwner:J0};ke.Children={map:Nd,forEach:function(t,e,n){Nd(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Nd(t,function(){e++}),e},toArray:function(t){return Nd(t,function(e){return e})||[]},only:function(t){if(!Z0(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ke.Component=Ml;ke.Fragment=gV;ke.Profiler=yV;ke.PureComponent=Y0;ke.StrictMode=mV;ke.Suspense=bV;ke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=AV;ke.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=fA({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=J0.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)mA.call(e,l)&&!yA.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Uh,type:t.type,key:i,ref:s,props:r,_owner:o}};ke.createContext=function(t){return t={$$typeof:vV,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:_V,_context:t},t.Consumer=t};ke.createElement=_A;ke.createFactory=function(t){var e=_A.bind(null,t);return e.type=t,e};ke.createRef=function(){return{current:null}};ke.forwardRef=function(t){return{$$typeof:wV,render:t}};ke.isValidElement=Z0;ke.lazy=function(t){return{$$typeof:EV,_payload:{_status:-1,_result:t},_init:RV}};ke.memo=function(t,e){return{$$typeof:SV,type:t,compare:e===void 0?null:e}};ke.startTransition=function(t){var e=kf.transition;kf.transition={};try{t()}finally{kf.transition=e}};ke.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};ke.useCallback=function(t,e){return bn.current.useCallback(t,e)};ke.useContext=function(t){return bn.current.useContext(t)};ke.useDebugValue=function(){};ke.useDeferredValue=function(t){return bn.current.useDeferredValue(t)};ke.useEffect=function(t,e){return bn.current.useEffect(t,e)};ke.useId=function(){return bn.current.useId()};ke.useImperativeHandle=function(t,e,n){return bn.current.useImperativeHandle(t,e,n)};ke.useInsertionEffect=function(t,e){return bn.current.useInsertionEffect(t,e)};ke.useLayoutEffect=function(t,e){return bn.current.useLayoutEffect(t,e)};ke.useMemo=function(t,e){return bn.current.useMemo(t,e)};ke.useReducer=function(t,e,n){return bn.current.useReducer(t,e,n)};ke.useRef=function(t){return bn.current.useRef(t)};ke.useState=function(t){return bn.current.useState(t)};ke.useSyncExternalStore=function(t,e,n){return bn.current.useSyncExternalStore(t,e,n)};ke.useTransition=function(){return bn.current.useTransition()};ke.version="18.2.0";hA.exports=ke;var U=hA.exports;const We=Q0(U),kV=cA({__proto__:null,default:We},[U]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PV=U,CV=Symbol.for("react.element"),NV=Symbol.for("react.fragment"),DV=Object.prototype.hasOwnProperty,OV=PV.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,LV={key:!0,ref:!0,__self:!0,__source:!0};function vA(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)DV.call(e,r)&&!LV.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:CV,type:t,key:s,ref:o,props:i,_owner:OV.current}}Sg.Fragment=NV;Sg.jsx=vA;Sg.jsxs=vA;uA.exports=Sg;var b=uA.exports,A_={},wA={exports:{}},Yn={},bA={exports:{}},SA={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(D,B){var O=D.length;D.push(B);e:for(;0<O;){var re=O-1>>>1,R=D[re];if(0<i(R,B))D[re]=B,D[O]=R,O=re;else break e}}function n(D){return D.length===0?null:D[0]}function r(D){if(D.length===0)return null;var B=D[0],O=D.pop();if(O!==B){D[0]=O;e:for(var re=0,R=D.length,V=R>>>1;re<V;){var j=2*(re+1)-1,ce=D[j],Y=j+1,we=D[Y];if(0>i(ce,O))Y<R&&0>i(we,ce)?(D[re]=we,D[Y]=O,re=Y):(D[re]=ce,D[j]=O,re=j);else if(Y<R&&0>i(we,O))D[re]=we,D[Y]=O,re=Y;else break e}}return B}function i(D,B){var O=D.sortIndex-B.sortIndex;return O!==0?O:D.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,h=null,d=3,f=!1,p=!1,g=!1,_=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(D){for(var B=n(c);B!==null;){if(B.callback===null)r(c);else if(B.startTime<=D)r(c),B.sortIndex=B.expirationTime,e(l,B);else break;B=n(c)}}function w(D){if(g=!1,v(D),!p)if(n(l)!==null)p=!0,N(S);else{var B=n(c);B!==null&&G(w,B.startTime-D)}}function S(D,B){p=!1,g&&(g=!1,y(A),A=-1),f=!0;var O=d;try{for(v(B),h=n(l);h!==null&&(!(h.expirationTime>B)||D&&!ee());){var re=h.callback;if(typeof re=="function"){h.callback=null,d=h.priorityLevel;var R=re(h.expirationTime<=B);B=t.unstable_now(),typeof R=="function"?h.callback=R:h===n(l)&&r(l),v(B)}else r(l);h=n(l)}if(h!==null)var V=!0;else{var j=n(c);j!==null&&G(w,j.startTime-B),V=!1}return V}finally{h=null,d=O,f=!1}}var E=!1,T=null,A=-1,$=5,L=-1;function ee(){return!(t.unstable_now()-L<$)}function se(){if(T!==null){var D=t.unstable_now();L=D;var B=!0;try{B=T(!0,D)}finally{B?he():(E=!1,T=null)}}else E=!1}var he;if(typeof m=="function")he=function(){m(se)};else if(typeof MessageChannel<"u"){var be=new MessageChannel,I=be.port2;be.port1.onmessage=se,he=function(){I.postMessage(null)}}else he=function(){_(se,0)};function N(D){T=D,E||(E=!0,he())}function G(D,B){A=_(function(){D(t.unstable_now())},B)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(D){D.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,N(S))},t.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<D?Math.floor(1e3/D):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(D){switch(d){case 1:case 2:case 3:var B=3;break;default:B=d}var O=d;d=B;try{return D()}finally{d=O}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(D,B){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var O=d;d=D;try{return B()}finally{d=O}},t.unstable_scheduleCallback=function(D,B,O){var re=t.unstable_now();switch(typeof O=="object"&&O!==null?(O=O.delay,O=typeof O=="number"&&0<O?re+O:re):O=re,D){case 1:var R=-1;break;case 2:R=250;break;case 5:R=1073741823;break;case 4:R=1e4;break;default:R=5e3}return R=O+R,D={id:u++,callback:B,priorityLevel:D,startTime:O,expirationTime:R,sortIndex:-1},O>re?(D.sortIndex=O,e(c,D),n(l)===null&&D===n(c)&&(g?(y(A),A=-1):g=!0,G(w,O-re))):(D.sortIndex=R,e(l,D),p||f||(p=!0,N(S))),D},t.unstable_shouldYield=ee,t.unstable_wrapCallback=function(D){var B=d;return function(){var O=d;d=B;try{return D.apply(this,arguments)}finally{d=O}}}})(SA);bA.exports=SA;var MV=bA.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EA=U,Kn=MV;function W(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var TA=new Set,Nu={};function Yo(t,e){sl(t,e),sl(t+"Capture",e)}function sl(t,e){for(Nu[t]=e,t=0;t<e.length;t++)TA.add(e[t])}var bi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),k_=Object.prototype.hasOwnProperty,VV=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,CS={},NS={};function FV(t){return k_.call(NS,t)?!0:k_.call(CS,t)?!1:VV.test(t)?NS[t]=!0:(CS[t]=!0,!1)}function $V(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function UV(t,e,n,r){if(e===null||typeof e>"u"||$V(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Sn(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Zt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Zt[t]=new Sn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Zt[e]=new Sn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Zt[t]=new Sn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Zt[t]=new Sn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Zt[t]=new Sn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Zt[t]=new Sn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Zt[t]=new Sn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Zt[t]=new Sn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Zt[t]=new Sn(t,5,!1,t.toLowerCase(),null,!1,!1)});var ew=/[\-:]([a-z])/g;function tw(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(ew,tw);Zt[e]=new Sn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(ew,tw);Zt[e]=new Sn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(ew,tw);Zt[e]=new Sn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Zt[t]=new Sn(t,1,!1,t.toLowerCase(),null,!1,!1)});Zt.xlinkHref=new Sn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Zt[t]=new Sn(t,1,!1,t.toLowerCase(),null,!0,!0)});function nw(t,e,n,r){var i=Zt.hasOwnProperty(e)?Zt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(UV(e,n,i,r)&&(n=null),r||i===null?FV(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Ai=EA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Dd=Symbol.for("react.element"),Ra=Symbol.for("react.portal"),Aa=Symbol.for("react.fragment"),rw=Symbol.for("react.strict_mode"),P_=Symbol.for("react.profiler"),IA=Symbol.for("react.provider"),xA=Symbol.for("react.context"),iw=Symbol.for("react.forward_ref"),C_=Symbol.for("react.suspense"),N_=Symbol.for("react.suspense_list"),sw=Symbol.for("react.memo"),Ui=Symbol.for("react.lazy"),RA=Symbol.for("react.offscreen"),DS=Symbol.iterator;function oc(t){return t===null||typeof t!="object"?null:(t=DS&&t[DS]||t["@@iterator"],typeof t=="function"?t:null)}var dt=Object.assign,hy;function Vc(t){if(hy===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);hy=e&&e[1]||""}return`
`+hy+t}var dy=!1;function fy(t,e){if(!t||dy)return"";dy=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{dy=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Vc(t):""}function BV(t){switch(t.tag){case 5:return Vc(t.type);case 16:return Vc("Lazy");case 13:return Vc("Suspense");case 19:return Vc("SuspenseList");case 0:case 2:case 15:return t=fy(t.type,!1),t;case 11:return t=fy(t.type.render,!1),t;case 1:return t=fy(t.type,!0),t;default:return""}}function D_(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Aa:return"Fragment";case Ra:return"Portal";case P_:return"Profiler";case rw:return"StrictMode";case C_:return"Suspense";case N_:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case xA:return(t.displayName||"Context")+".Consumer";case IA:return(t._context.displayName||"Context")+".Provider";case iw:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case sw:return e=t.displayName||null,e!==null?e:D_(t.type)||"Memo";case Ui:e=t._payload,t=t._init;try{return D_(t(e))}catch{}}return null}function jV(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return D_(e);case 8:return e===rw?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function fs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function AA(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function zV(t){var e=AA(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Od(t){t._valueTracker||(t._valueTracker=zV(t))}function kA(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=AA(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function lp(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function O_(t,e){var n=e.checked;return dt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function OS(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=fs(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function PA(t,e){e=e.checked,e!=null&&nw(t,"checked",e,!1)}function L_(t,e){PA(t,e);var n=fs(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?M_(t,e.type,n):e.hasOwnProperty("defaultValue")&&M_(t,e.type,fs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function LS(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function M_(t,e,n){(e!=="number"||lp(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Fc=Array.isArray;function Ba(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+fs(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function V_(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(W(91));return dt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function MS(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(W(92));if(Fc(n)){if(1<n.length)throw Error(W(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:fs(n)}}function CA(t,e){var n=fs(e.value),r=fs(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function VS(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function NA(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function F_(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?NA(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ld,DA=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ld=Ld||document.createElement("div"),Ld.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ld.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Du(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ru={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},WV=["Webkit","ms","Moz","O"];Object.keys(ru).forEach(function(t){WV.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ru[e]=ru[t]})});function OA(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ru.hasOwnProperty(t)&&ru[t]?(""+e).trim():e+"px"}function LA(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=OA(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var HV=dt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function $_(t,e){if(e){if(HV[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(W(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(W(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(W(61))}if(e.style!=null&&typeof e.style!="object")throw Error(W(62))}}function U_(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var B_=null;function ow(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var j_=null,ja=null,za=null;function FS(t){if(t=zh(t)){if(typeof j_!="function")throw Error(W(280));var e=t.stateNode;e&&(e=Rg(e),j_(t.stateNode,t.type,e))}}function MA(t){ja?za?za.push(t):za=[t]:ja=t}function VA(){if(ja){var t=ja,e=za;if(za=ja=null,FS(t),e)for(t=0;t<e.length;t++)FS(e[t])}}function FA(t,e){return t(e)}function $A(){}var py=!1;function UA(t,e,n){if(py)return t(e,n);py=!0;try{return FA(t,e,n)}finally{py=!1,(ja!==null||za!==null)&&($A(),VA())}}function Ou(t,e){var n=t.stateNode;if(n===null)return null;var r=Rg(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(W(231,e,typeof n));return n}var z_=!1;if(bi)try{var ac={};Object.defineProperty(ac,"passive",{get:function(){z_=!0}}),window.addEventListener("test",ac,ac),window.removeEventListener("test",ac,ac)}catch{z_=!1}function qV(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var iu=!1,cp=null,up=!1,W_=null,KV={onError:function(t){iu=!0,cp=t}};function GV(t,e,n,r,i,s,o,a,l){iu=!1,cp=null,qV.apply(KV,arguments)}function QV(t,e,n,r,i,s,o,a,l){if(GV.apply(this,arguments),iu){if(iu){var c=cp;iu=!1,cp=null}else throw Error(W(198));up||(up=!0,W_=c)}}function Xo(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function BA(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function $S(t){if(Xo(t)!==t)throw Error(W(188))}function YV(t){var e=t.alternate;if(!e){if(e=Xo(t),e===null)throw Error(W(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return $S(i),t;if(s===r)return $S(i),e;s=s.sibling}throw Error(W(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(W(189))}}if(n.alternate!==r)throw Error(W(190))}if(n.tag!==3)throw Error(W(188));return n.stateNode.current===n?t:e}function jA(t){return t=YV(t),t!==null?zA(t):null}function zA(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=zA(t);if(e!==null)return e;t=t.sibling}return null}var WA=Kn.unstable_scheduleCallback,US=Kn.unstable_cancelCallback,XV=Kn.unstable_shouldYield,JV=Kn.unstable_requestPaint,St=Kn.unstable_now,ZV=Kn.unstable_getCurrentPriorityLevel,aw=Kn.unstable_ImmediatePriority,HA=Kn.unstable_UserBlockingPriority,hp=Kn.unstable_NormalPriority,eF=Kn.unstable_LowPriority,qA=Kn.unstable_IdlePriority,Eg=null,Wr=null;function tF(t){if(Wr&&typeof Wr.onCommitFiberRoot=="function")try{Wr.onCommitFiberRoot(Eg,t,void 0,(t.current.flags&128)===128)}catch{}}var wr=Math.clz32?Math.clz32:iF,nF=Math.log,rF=Math.LN2;function iF(t){return t>>>=0,t===0?32:31-(nF(t)/rF|0)|0}var Md=64,Vd=4194304;function $c(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function dp(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=$c(a):(s&=o,s!==0&&(r=$c(s)))}else o=n&~i,o!==0?r=$c(o):s!==0&&(r=$c(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-wr(e),i=1<<n,r|=t[n],e&=~i;return r}function sF(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function oF(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-wr(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=sF(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function H_(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function KA(){var t=Md;return Md<<=1,!(Md&4194240)&&(Md=64),t}function gy(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Bh(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-wr(e),t[e]=n}function aF(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-wr(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function lw(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-wr(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Me=0;function GA(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var QA,cw,YA,XA,JA,q_=!1,Fd=[],ns=null,rs=null,is=null,Lu=new Map,Mu=new Map,zi=[],lF="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function BS(t,e){switch(t){case"focusin":case"focusout":ns=null;break;case"dragenter":case"dragleave":rs=null;break;case"mouseover":case"mouseout":is=null;break;case"pointerover":case"pointerout":Lu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mu.delete(e.pointerId)}}function lc(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=zh(e),e!==null&&cw(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function cF(t,e,n,r,i){switch(e){case"focusin":return ns=lc(ns,t,e,n,r,i),!0;case"dragenter":return rs=lc(rs,t,e,n,r,i),!0;case"mouseover":return is=lc(is,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Lu.set(s,lc(Lu.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Mu.set(s,lc(Mu.get(s)||null,t,e,n,r,i)),!0}return!1}function ZA(t){var e=lo(t.target);if(e!==null){var n=Xo(e);if(n!==null){if(e=n.tag,e===13){if(e=BA(n),e!==null){t.blockedOn=e,JA(t.priority,function(){YA(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Pf(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=K_(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);B_=r,n.target.dispatchEvent(r),B_=null}else return e=zh(n),e!==null&&cw(e),t.blockedOn=n,!1;e.shift()}return!0}function jS(t,e,n){Pf(t)&&n.delete(e)}function uF(){q_=!1,ns!==null&&Pf(ns)&&(ns=null),rs!==null&&Pf(rs)&&(rs=null),is!==null&&Pf(is)&&(is=null),Lu.forEach(jS),Mu.forEach(jS)}function cc(t,e){t.blockedOn===e&&(t.blockedOn=null,q_||(q_=!0,Kn.unstable_scheduleCallback(Kn.unstable_NormalPriority,uF)))}function Vu(t){function e(i){return cc(i,t)}if(0<Fd.length){cc(Fd[0],t);for(var n=1;n<Fd.length;n++){var r=Fd[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ns!==null&&cc(ns,t),rs!==null&&cc(rs,t),is!==null&&cc(is,t),Lu.forEach(e),Mu.forEach(e),n=0;n<zi.length;n++)r=zi[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<zi.length&&(n=zi[0],n.blockedOn===null);)ZA(n),n.blockedOn===null&&zi.shift()}var Wa=Ai.ReactCurrentBatchConfig,fp=!0;function hF(t,e,n,r){var i=Me,s=Wa.transition;Wa.transition=null;try{Me=1,uw(t,e,n,r)}finally{Me=i,Wa.transition=s}}function dF(t,e,n,r){var i=Me,s=Wa.transition;Wa.transition=null;try{Me=4,uw(t,e,n,r)}finally{Me=i,Wa.transition=s}}function uw(t,e,n,r){if(fp){var i=K_(t,e,n,r);if(i===null)Iy(t,e,r,pp,n),BS(t,r);else if(cF(i,t,e,n,r))r.stopPropagation();else if(BS(t,r),e&4&&-1<lF.indexOf(t)){for(;i!==null;){var s=zh(i);if(s!==null&&QA(s),s=K_(t,e,n,r),s===null&&Iy(t,e,r,pp,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Iy(t,e,r,null,n)}}var pp=null;function K_(t,e,n,r){if(pp=null,t=ow(r),t=lo(t),t!==null)if(e=Xo(t),e===null)t=null;else if(n=e.tag,n===13){if(t=BA(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return pp=t,null}function ek(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ZV()){case aw:return 1;case HA:return 4;case hp:case eF:return 16;case qA:return 536870912;default:return 16}default:return 16}}var Ki=null,hw=null,Cf=null;function tk(){if(Cf)return Cf;var t,e=hw,n=e.length,r,i="value"in Ki?Ki.value:Ki.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Cf=i.slice(t,1<r?1-r:void 0)}function Nf(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function $d(){return!0}function zS(){return!1}function Xn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?$d:zS,this.isPropagationStopped=zS,this}return dt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=$d)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=$d)},persist:function(){},isPersistent:$d}),e}var Vl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dw=Xn(Vl),jh=dt({},Vl,{view:0,detail:0}),fF=Xn(jh),my,yy,uc,Tg=dt({},jh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fw,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==uc&&(uc&&t.type==="mousemove"?(my=t.screenX-uc.screenX,yy=t.screenY-uc.screenY):yy=my=0,uc=t),my)},movementY:function(t){return"movementY"in t?t.movementY:yy}}),WS=Xn(Tg),pF=dt({},Tg,{dataTransfer:0}),gF=Xn(pF),mF=dt({},jh,{relatedTarget:0}),_y=Xn(mF),yF=dt({},Vl,{animationName:0,elapsedTime:0,pseudoElement:0}),_F=Xn(yF),vF=dt({},Vl,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),wF=Xn(vF),bF=dt({},Vl,{data:0}),HS=Xn(bF),SF={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},EF={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},TF={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function IF(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=TF[t])?!!e[t]:!1}function fw(){return IF}var xF=dt({},jh,{key:function(t){if(t.key){var e=SF[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Nf(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?EF[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fw,charCode:function(t){return t.type==="keypress"?Nf(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Nf(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),RF=Xn(xF),AF=dt({},Tg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qS=Xn(AF),kF=dt({},jh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fw}),PF=Xn(kF),CF=dt({},Vl,{propertyName:0,elapsedTime:0,pseudoElement:0}),NF=Xn(CF),DF=dt({},Tg,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),OF=Xn(DF),LF=[9,13,27,32],pw=bi&&"CompositionEvent"in window,su=null;bi&&"documentMode"in document&&(su=document.documentMode);var MF=bi&&"TextEvent"in window&&!su,nk=bi&&(!pw||su&&8<su&&11>=su),KS=" ",GS=!1;function rk(t,e){switch(t){case"keyup":return LF.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ik(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ka=!1;function VF(t,e){switch(t){case"compositionend":return ik(e);case"keypress":return e.which!==32?null:(GS=!0,KS);case"textInput":return t=e.data,t===KS&&GS?null:t;default:return null}}function FF(t,e){if(ka)return t==="compositionend"||!pw&&rk(t,e)?(t=tk(),Cf=hw=Ki=null,ka=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return nk&&e.locale!=="ko"?null:e.data;default:return null}}var $F={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function QS(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!$F[t.type]:e==="textarea"}function sk(t,e,n,r){MA(r),e=gp(e,"onChange"),0<e.length&&(n=new dw("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ou=null,Fu=null;function UF(t){mk(t,0)}function Ig(t){var e=Na(t);if(kA(e))return t}function BF(t,e){if(t==="change")return e}var ok=!1;if(bi){var vy;if(bi){var wy="oninput"in document;if(!wy){var YS=document.createElement("div");YS.setAttribute("oninput","return;"),wy=typeof YS.oninput=="function"}vy=wy}else vy=!1;ok=vy&&(!document.documentMode||9<document.documentMode)}function XS(){ou&&(ou.detachEvent("onpropertychange",ak),Fu=ou=null)}function ak(t){if(t.propertyName==="value"&&Ig(Fu)){var e=[];sk(e,Fu,t,ow(t)),UA(UF,e)}}function jF(t,e,n){t==="focusin"?(XS(),ou=e,Fu=n,ou.attachEvent("onpropertychange",ak)):t==="focusout"&&XS()}function zF(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ig(Fu)}function WF(t,e){if(t==="click")return Ig(e)}function HF(t,e){if(t==="input"||t==="change")return Ig(e)}function qF(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Er=typeof Object.is=="function"?Object.is:qF;function $u(t,e){if(Er(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!k_.call(e,i)||!Er(t[i],e[i]))return!1}return!0}function JS(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ZS(t,e){var n=JS(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=JS(n)}}function lk(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?lk(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function ck(){for(var t=window,e=lp();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=lp(t.document)}return e}function gw(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function KF(t){var e=ck(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&lk(n.ownerDocument.documentElement,n)){if(r!==null&&gw(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=ZS(n,s);var o=ZS(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var GF=bi&&"documentMode"in document&&11>=document.documentMode,Pa=null,G_=null,au=null,Q_=!1;function eE(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Q_||Pa==null||Pa!==lp(r)||(r=Pa,"selectionStart"in r&&gw(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),au&&$u(au,r)||(au=r,r=gp(G_,"onSelect"),0<r.length&&(e=new dw("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Pa)))}function Ud(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ca={animationend:Ud("Animation","AnimationEnd"),animationiteration:Ud("Animation","AnimationIteration"),animationstart:Ud("Animation","AnimationStart"),transitionend:Ud("Transition","TransitionEnd")},by={},uk={};bi&&(uk=document.createElement("div").style,"AnimationEvent"in window||(delete Ca.animationend.animation,delete Ca.animationiteration.animation,delete Ca.animationstart.animation),"TransitionEvent"in window||delete Ca.transitionend.transition);function xg(t){if(by[t])return by[t];if(!Ca[t])return t;var e=Ca[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in uk)return by[t]=e[n];return t}var hk=xg("animationend"),dk=xg("animationiteration"),fk=xg("animationstart"),pk=xg("transitionend"),gk=new Map,tE="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ks(t,e){gk.set(t,e),Yo(e,[t])}for(var Sy=0;Sy<tE.length;Sy++){var Ey=tE[Sy],QF=Ey.toLowerCase(),YF=Ey[0].toUpperCase()+Ey.slice(1);ks(QF,"on"+YF)}ks(hk,"onAnimationEnd");ks(dk,"onAnimationIteration");ks(fk,"onAnimationStart");ks("dblclick","onDoubleClick");ks("focusin","onFocus");ks("focusout","onBlur");ks(pk,"onTransitionEnd");sl("onMouseEnter",["mouseout","mouseover"]);sl("onMouseLeave",["mouseout","mouseover"]);sl("onPointerEnter",["pointerout","pointerover"]);sl("onPointerLeave",["pointerout","pointerover"]);Yo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Yo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Yo("onBeforeInput",["compositionend","keypress","textInput","paste"]);Yo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Yo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Yo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Uc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),XF=new Set("cancel close invalid load scroll toggle".split(" ").concat(Uc));function nE(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,QV(r,e,void 0,t),t.currentTarget=null}function mk(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;nE(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;nE(i,a,c),s=l}}}if(up)throw t=W_,up=!1,W_=null,t}function qe(t,e){var n=e[ev];n===void 0&&(n=e[ev]=new Set);var r=t+"__bubble";n.has(r)||(yk(e,t,2,!1),n.add(r))}function Ty(t,e,n){var r=0;e&&(r|=4),yk(n,t,r,e)}var Bd="_reactListening"+Math.random().toString(36).slice(2);function Uu(t){if(!t[Bd]){t[Bd]=!0,TA.forEach(function(n){n!=="selectionchange"&&(XF.has(n)||Ty(n,!1,t),Ty(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Bd]||(e[Bd]=!0,Ty("selectionchange",!1,e))}}function yk(t,e,n,r){switch(ek(e)){case 1:var i=hF;break;case 4:i=dF;break;default:i=uw}n=i.bind(null,e,n,t),i=void 0,!z_||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Iy(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=lo(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}UA(function(){var c=s,u=ow(n),h=[];e:{var d=gk.get(t);if(d!==void 0){var f=dw,p=t;switch(t){case"keypress":if(Nf(n)===0)break e;case"keydown":case"keyup":f=RF;break;case"focusin":p="focus",f=_y;break;case"focusout":p="blur",f=_y;break;case"beforeblur":case"afterblur":f=_y;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=WS;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=gF;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=PF;break;case hk:case dk:case fk:f=_F;break;case pk:f=NF;break;case"scroll":f=fF;break;case"wheel":f=OF;break;case"copy":case"cut":case"paste":f=wF;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=qS}var g=(e&4)!==0,_=!g&&t==="scroll",y=g?d!==null?d+"Capture":null:d;g=[];for(var m=c,v;m!==null;){v=m;var w=v.stateNode;if(v.tag===5&&w!==null&&(v=w,y!==null&&(w=Ou(m,y),w!=null&&g.push(Bu(m,w,v)))),_)break;m=m.return}0<g.length&&(d=new f(d,p,null,n,u),h.push({event:d,listeners:g}))}}if(!(e&7)){e:{if(d=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",d&&n!==B_&&(p=n.relatedTarget||n.fromElement)&&(lo(p)||p[Si]))break e;if((f||d)&&(d=u.window===u?u:(d=u.ownerDocument)?d.defaultView||d.parentWindow:window,f?(p=n.relatedTarget||n.toElement,f=c,p=p?lo(p):null,p!==null&&(_=Xo(p),p!==_||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=c),f!==p)){if(g=WS,w="onMouseLeave",y="onMouseEnter",m="mouse",(t==="pointerout"||t==="pointerover")&&(g=qS,w="onPointerLeave",y="onPointerEnter",m="pointer"),_=f==null?d:Na(f),v=p==null?d:Na(p),d=new g(w,m+"leave",f,n,u),d.target=_,d.relatedTarget=v,w=null,lo(u)===c&&(g=new g(y,m+"enter",p,n,u),g.target=v,g.relatedTarget=_,w=g),_=w,f&&p)t:{for(g=f,y=p,m=0,v=g;v;v=ua(v))m++;for(v=0,w=y;w;w=ua(w))v++;for(;0<m-v;)g=ua(g),m--;for(;0<v-m;)y=ua(y),v--;for(;m--;){if(g===y||y!==null&&g===y.alternate)break t;g=ua(g),y=ua(y)}g=null}else g=null;f!==null&&rE(h,d,f,g,!1),p!==null&&_!==null&&rE(h,_,p,g,!0)}}e:{if(d=c?Na(c):window,f=d.nodeName&&d.nodeName.toLowerCase(),f==="select"||f==="input"&&d.type==="file")var S=BF;else if(QS(d))if(ok)S=HF;else{S=zF;var E=jF}else(f=d.nodeName)&&f.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(S=WF);if(S&&(S=S(t,c))){sk(h,S,n,u);break e}E&&E(t,d,c),t==="focusout"&&(E=d._wrapperState)&&E.controlled&&d.type==="number"&&M_(d,"number",d.value)}switch(E=c?Na(c):window,t){case"focusin":(QS(E)||E.contentEditable==="true")&&(Pa=E,G_=c,au=null);break;case"focusout":au=G_=Pa=null;break;case"mousedown":Q_=!0;break;case"contextmenu":case"mouseup":case"dragend":Q_=!1,eE(h,n,u);break;case"selectionchange":if(GF)break;case"keydown":case"keyup":eE(h,n,u)}var T;if(pw)e:{switch(t){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else ka?rk(t,n)&&(A="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(A="onCompositionStart");A&&(nk&&n.locale!=="ko"&&(ka||A!=="onCompositionStart"?A==="onCompositionEnd"&&ka&&(T=tk()):(Ki=u,hw="value"in Ki?Ki.value:Ki.textContent,ka=!0)),E=gp(c,A),0<E.length&&(A=new HS(A,t,null,n,u),h.push({event:A,listeners:E}),T?A.data=T:(T=ik(n),T!==null&&(A.data=T)))),(T=MF?VF(t,n):FF(t,n))&&(c=gp(c,"onBeforeInput"),0<c.length&&(u=new HS("onBeforeInput","beforeinput",null,n,u),h.push({event:u,listeners:c}),u.data=T))}mk(h,e)})}function Bu(t,e,n){return{instance:t,listener:e,currentTarget:n}}function gp(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Ou(t,n),s!=null&&r.unshift(Bu(t,s,i)),s=Ou(t,e),s!=null&&r.push(Bu(t,s,i))),t=t.return}return r}function ua(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function rE(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=Ou(n,s),l!=null&&o.unshift(Bu(n,l,a))):i||(l=Ou(n,s),l!=null&&o.push(Bu(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var JF=/\r\n?/g,ZF=/\u0000|\uFFFD/g;function iE(t){return(typeof t=="string"?t:""+t).replace(JF,`
`).replace(ZF,"")}function jd(t,e,n){if(e=iE(e),iE(t)!==e&&n)throw Error(W(425))}function mp(){}var Y_=null,X_=null;function J_(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Z_=typeof setTimeout=="function"?setTimeout:void 0,e5=typeof clearTimeout=="function"?clearTimeout:void 0,sE=typeof Promise=="function"?Promise:void 0,t5=typeof queueMicrotask=="function"?queueMicrotask:typeof sE<"u"?function(t){return sE.resolve(null).then(t).catch(n5)}:Z_;function n5(t){setTimeout(function(){throw t})}function xy(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Vu(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Vu(e)}function ss(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function oE(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Fl=Math.random().toString(36).slice(2),Nr="__reactFiber$"+Fl,ju="__reactProps$"+Fl,Si="__reactContainer$"+Fl,ev="__reactEvents$"+Fl,r5="__reactListeners$"+Fl,i5="__reactHandles$"+Fl;function lo(t){var e=t[Nr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Si]||n[Nr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=oE(t);t!==null;){if(n=t[Nr])return n;t=oE(t)}return e}t=n,n=t.parentNode}return null}function zh(t){return t=t[Nr]||t[Si],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Na(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(W(33))}function Rg(t){return t[ju]||null}var tv=[],Da=-1;function Ps(t){return{current:t}}function Xe(t){0>Da||(t.current=tv[Da],tv[Da]=null,Da--)}function ze(t,e){Da++,tv[Da]=t.current,t.current=e}var ps={},un=Ps(ps),Dn=Ps(!1),Ro=ps;function ol(t,e){var n=t.type.contextTypes;if(!n)return ps;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function On(t){return t=t.childContextTypes,t!=null}function yp(){Xe(Dn),Xe(un)}function aE(t,e,n){if(un.current!==ps)throw Error(W(168));ze(un,e),ze(Dn,n)}function _k(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(W(108,jV(t)||"Unknown",i));return dt({},n,r)}function _p(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ps,Ro=un.current,ze(un,t),ze(Dn,Dn.current),!0}function lE(t,e,n){var r=t.stateNode;if(!r)throw Error(W(169));n?(t=_k(t,e,Ro),r.__reactInternalMemoizedMergedChildContext=t,Xe(Dn),Xe(un),ze(un,t)):Xe(Dn),ze(Dn,n)}var si=null,Ag=!1,Ry=!1;function vk(t){si===null?si=[t]:si.push(t)}function s5(t){Ag=!0,vk(t)}function Cs(){if(!Ry&&si!==null){Ry=!0;var t=0,e=Me;try{var n=si;for(Me=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}si=null,Ag=!1}catch(i){throw si!==null&&(si=si.slice(t+1)),WA(aw,Cs),i}finally{Me=e,Ry=!1}}return null}var Oa=[],La=0,vp=null,wp=0,nr=[],rr=0,Ao=null,li=1,ci="";function Ys(t,e){Oa[La++]=wp,Oa[La++]=vp,vp=t,wp=e}function wk(t,e,n){nr[rr++]=li,nr[rr++]=ci,nr[rr++]=Ao,Ao=t;var r=li;t=ci;var i=32-wr(r)-1;r&=~(1<<i),n+=1;var s=32-wr(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,li=1<<32-wr(e)+i|n<<i|r,ci=s+t}else li=1<<s|n<<i|r,ci=t}function mw(t){t.return!==null&&(Ys(t,1),wk(t,1,0))}function yw(t){for(;t===vp;)vp=Oa[--La],Oa[La]=null,wp=Oa[--La],Oa[La]=null;for(;t===Ao;)Ao=nr[--rr],nr[rr]=null,ci=nr[--rr],nr[rr]=null,li=nr[--rr],nr[rr]=null}var qn=null,Wn=null,nt=!1,_r=null;function bk(t,e){var n=sr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function cE(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,qn=t,Wn=ss(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,qn=t,Wn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ao!==null?{id:li,overflow:ci}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=sr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,qn=t,Wn=null,!0):!1;default:return!1}}function nv(t){return(t.mode&1)!==0&&(t.flags&128)===0}function rv(t){if(nt){var e=Wn;if(e){var n=e;if(!cE(t,e)){if(nv(t))throw Error(W(418));e=ss(n.nextSibling);var r=qn;e&&cE(t,e)?bk(r,n):(t.flags=t.flags&-4097|2,nt=!1,qn=t)}}else{if(nv(t))throw Error(W(418));t.flags=t.flags&-4097|2,nt=!1,qn=t}}}function uE(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;qn=t}function zd(t){if(t!==qn)return!1;if(!nt)return uE(t),nt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!J_(t.type,t.memoizedProps)),e&&(e=Wn)){if(nv(t))throw Sk(),Error(W(418));for(;e;)bk(t,e),e=ss(e.nextSibling)}if(uE(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(W(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Wn=ss(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Wn=null}}else Wn=qn?ss(t.stateNode.nextSibling):null;return!0}function Sk(){for(var t=Wn;t;)t=ss(t.nextSibling)}function al(){Wn=qn=null,nt=!1}function _w(t){_r===null?_r=[t]:_r.push(t)}var o5=Ai.ReactCurrentBatchConfig;function mr(t,e){if(t&&t.defaultProps){e=dt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var bp=Ps(null),Sp=null,Ma=null,vw=null;function ww(){vw=Ma=Sp=null}function bw(t){var e=bp.current;Xe(bp),t._currentValue=e}function iv(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ha(t,e){Sp=t,vw=Ma=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(kn=!0),t.firstContext=null)}function cr(t){var e=t._currentValue;if(vw!==t)if(t={context:t,memoizedValue:e,next:null},Ma===null){if(Sp===null)throw Error(W(308));Ma=t,Sp.dependencies={lanes:0,firstContext:t}}else Ma=Ma.next=t;return e}var co=null;function Sw(t){co===null?co=[t]:co.push(t)}function Ek(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Sw(e)):(n.next=i.next,i.next=n),e.interleaved=n,Ei(t,r)}function Ei(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Bi=!1;function Ew(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Tk(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function yi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function os(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ce&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Ei(t,n)}return i=r.interleaved,i===null?(e.next=e,Sw(r)):(e.next=i.next,i.next=e),r.interleaved=e,Ei(t,n)}function Df(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,lw(t,n)}}function hE(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ep(t,e,n,r){var i=t.updateQueue;Bi=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var h=i.baseState;o=0,u=c=l=null,a=s;do{var d=a.lane,f=a.eventTime;if((r&d)===d){u!==null&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,g=a;switch(d=e,f=n,g.tag){case 1:if(p=g.payload,typeof p=="function"){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,d=typeof p=="function"?p.call(f,h,d):p,d==null)break e;h=dt({},h,d);break e;case 2:Bi=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,d=i.effects,d===null?i.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=f,l=h):u=u.next=f,o|=d;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;d=a,a=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(u===null&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Po|=o,t.lanes=o,t.memoizedState=h}}function dE(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(W(191,i));i.call(r)}}}var Ik=new EA.Component().refs;function sv(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:dt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var kg={isMounted:function(t){return(t=t._reactInternals)?Xo(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=mn(),i=ls(t),s=yi(r,i);s.payload=e,n!=null&&(s.callback=n),e=os(t,s,i),e!==null&&(br(e,t,i,r),Df(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=mn(),i=ls(t),s=yi(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=os(t,s,i),e!==null&&(br(e,t,i,r),Df(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=mn(),r=ls(t),i=yi(n,r);i.tag=2,e!=null&&(i.callback=e),e=os(t,i,r),e!==null&&(br(e,t,r,n),Df(e,t,r))}};function fE(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!$u(n,r)||!$u(i,s):!0}function xk(t,e,n){var r=!1,i=ps,s=e.contextType;return typeof s=="object"&&s!==null?s=cr(s):(i=On(e)?Ro:un.current,r=e.contextTypes,s=(r=r!=null)?ol(t,i):ps),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=kg,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function pE(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&kg.enqueueReplaceState(e,e.state,null)}function ov(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=Ik,Ew(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=cr(s):(s=On(e)?Ro:un.current,i.context=ol(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(sv(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&kg.enqueueReplaceState(i,i.state,null),Ep(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function hc(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(W(309));var r=n.stateNode}if(!r)throw Error(W(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===Ik&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(W(284));if(!n._owner)throw Error(W(290,t))}return t}function Wd(t,e){throw t=Object.prototype.toString.call(e),Error(W(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function gE(t){var e=t._init;return e(t._payload)}function Rk(t){function e(y,m){if(t){var v=y.deletions;v===null?(y.deletions=[m],y.flags|=16):v.push(m)}}function n(y,m){if(!t)return null;for(;m!==null;)e(y,m),m=m.sibling;return null}function r(y,m){for(y=new Map;m!==null;)m.key!==null?y.set(m.key,m):y.set(m.index,m),m=m.sibling;return y}function i(y,m){return y=cs(y,m),y.index=0,y.sibling=null,y}function s(y,m,v){return y.index=v,t?(v=y.alternate,v!==null?(v=v.index,v<m?(y.flags|=2,m):v):(y.flags|=2,m)):(y.flags|=1048576,m)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,m,v,w){return m===null||m.tag!==6?(m=Oy(v,y.mode,w),m.return=y,m):(m=i(m,v),m.return=y,m)}function l(y,m,v,w){var S=v.type;return S===Aa?u(y,m,v.props.children,w,v.key):m!==null&&(m.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Ui&&gE(S)===m.type)?(w=i(m,v.props),w.ref=hc(y,m,v),w.return=y,w):(w=$f(v.type,v.key,v.props,null,y.mode,w),w.ref=hc(y,m,v),w.return=y,w)}function c(y,m,v,w){return m===null||m.tag!==4||m.stateNode.containerInfo!==v.containerInfo||m.stateNode.implementation!==v.implementation?(m=Ly(v,y.mode,w),m.return=y,m):(m=i(m,v.children||[]),m.return=y,m)}function u(y,m,v,w,S){return m===null||m.tag!==7?(m=vo(v,y.mode,w,S),m.return=y,m):(m=i(m,v),m.return=y,m)}function h(y,m,v){if(typeof m=="string"&&m!==""||typeof m=="number")return m=Oy(""+m,y.mode,v),m.return=y,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Dd:return v=$f(m.type,m.key,m.props,null,y.mode,v),v.ref=hc(y,null,m),v.return=y,v;case Ra:return m=Ly(m,y.mode,v),m.return=y,m;case Ui:var w=m._init;return h(y,w(m._payload),v)}if(Fc(m)||oc(m))return m=vo(m,y.mode,v,null),m.return=y,m;Wd(y,m)}return null}function d(y,m,v,w){var S=m!==null?m.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return S!==null?null:a(y,m,""+v,w);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Dd:return v.key===S?l(y,m,v,w):null;case Ra:return v.key===S?c(y,m,v,w):null;case Ui:return S=v._init,d(y,m,S(v._payload),w)}if(Fc(v)||oc(v))return S!==null?null:u(y,m,v,w,null);Wd(y,v)}return null}function f(y,m,v,w,S){if(typeof w=="string"&&w!==""||typeof w=="number")return y=y.get(v)||null,a(m,y,""+w,S);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Dd:return y=y.get(w.key===null?v:w.key)||null,l(m,y,w,S);case Ra:return y=y.get(w.key===null?v:w.key)||null,c(m,y,w,S);case Ui:var E=w._init;return f(y,m,v,E(w._payload),S)}if(Fc(w)||oc(w))return y=y.get(v)||null,u(m,y,w,S,null);Wd(m,w)}return null}function p(y,m,v,w){for(var S=null,E=null,T=m,A=m=0,$=null;T!==null&&A<v.length;A++){T.index>A?($=T,T=null):$=T.sibling;var L=d(y,T,v[A],w);if(L===null){T===null&&(T=$);break}t&&T&&L.alternate===null&&e(y,T),m=s(L,m,A),E===null?S=L:E.sibling=L,E=L,T=$}if(A===v.length)return n(y,T),nt&&Ys(y,A),S;if(T===null){for(;A<v.length;A++)T=h(y,v[A],w),T!==null&&(m=s(T,m,A),E===null?S=T:E.sibling=T,E=T);return nt&&Ys(y,A),S}for(T=r(y,T);A<v.length;A++)$=f(T,y,A,v[A],w),$!==null&&(t&&$.alternate!==null&&T.delete($.key===null?A:$.key),m=s($,m,A),E===null?S=$:E.sibling=$,E=$);return t&&T.forEach(function(ee){return e(y,ee)}),nt&&Ys(y,A),S}function g(y,m,v,w){var S=oc(v);if(typeof S!="function")throw Error(W(150));if(v=S.call(v),v==null)throw Error(W(151));for(var E=S=null,T=m,A=m=0,$=null,L=v.next();T!==null&&!L.done;A++,L=v.next()){T.index>A?($=T,T=null):$=T.sibling;var ee=d(y,T,L.value,w);if(ee===null){T===null&&(T=$);break}t&&T&&ee.alternate===null&&e(y,T),m=s(ee,m,A),E===null?S=ee:E.sibling=ee,E=ee,T=$}if(L.done)return n(y,T),nt&&Ys(y,A),S;if(T===null){for(;!L.done;A++,L=v.next())L=h(y,L.value,w),L!==null&&(m=s(L,m,A),E===null?S=L:E.sibling=L,E=L);return nt&&Ys(y,A),S}for(T=r(y,T);!L.done;A++,L=v.next())L=f(T,y,A,L.value,w),L!==null&&(t&&L.alternate!==null&&T.delete(L.key===null?A:L.key),m=s(L,m,A),E===null?S=L:E.sibling=L,E=L);return t&&T.forEach(function(se){return e(y,se)}),nt&&Ys(y,A),S}function _(y,m,v,w){if(typeof v=="object"&&v!==null&&v.type===Aa&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Dd:e:{for(var S=v.key,E=m;E!==null;){if(E.key===S){if(S=v.type,S===Aa){if(E.tag===7){n(y,E.sibling),m=i(E,v.props.children),m.return=y,y=m;break e}}else if(E.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Ui&&gE(S)===E.type){n(y,E.sibling),m=i(E,v.props),m.ref=hc(y,E,v),m.return=y,y=m;break e}n(y,E);break}else e(y,E);E=E.sibling}v.type===Aa?(m=vo(v.props.children,y.mode,w,v.key),m.return=y,y=m):(w=$f(v.type,v.key,v.props,null,y.mode,w),w.ref=hc(y,m,v),w.return=y,y=w)}return o(y);case Ra:e:{for(E=v.key;m!==null;){if(m.key===E)if(m.tag===4&&m.stateNode.containerInfo===v.containerInfo&&m.stateNode.implementation===v.implementation){n(y,m.sibling),m=i(m,v.children||[]),m.return=y,y=m;break e}else{n(y,m);break}else e(y,m);m=m.sibling}m=Ly(v,y.mode,w),m.return=y,y=m}return o(y);case Ui:return E=v._init,_(y,m,E(v._payload),w)}if(Fc(v))return p(y,m,v,w);if(oc(v))return g(y,m,v,w);Wd(y,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,m!==null&&m.tag===6?(n(y,m.sibling),m=i(m,v),m.return=y,y=m):(n(y,m),m=Oy(v,y.mode,w),m.return=y,y=m),o(y)):n(y,m)}return _}var ll=Rk(!0),Ak=Rk(!1),Wh={},Hr=Ps(Wh),zu=Ps(Wh),Wu=Ps(Wh);function uo(t){if(t===Wh)throw Error(W(174));return t}function Tw(t,e){switch(ze(Wu,e),ze(zu,t),ze(Hr,Wh),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:F_(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=F_(e,t)}Xe(Hr),ze(Hr,e)}function cl(){Xe(Hr),Xe(zu),Xe(Wu)}function kk(t){uo(Wu.current);var e=uo(Hr.current),n=F_(e,t.type);e!==n&&(ze(zu,t),ze(Hr,n))}function Iw(t){zu.current===t&&(Xe(Hr),Xe(zu))}var ct=Ps(0);function Tp(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ay=[];function xw(){for(var t=0;t<Ay.length;t++)Ay[t]._workInProgressVersionPrimary=null;Ay.length=0}var Of=Ai.ReactCurrentDispatcher,ky=Ai.ReactCurrentBatchConfig,ko=0,ut=null,Ct=null,Vt=null,Ip=!1,lu=!1,Hu=0,a5=0;function tn(){throw Error(W(321))}function Rw(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Er(t[n],e[n]))return!1;return!0}function Aw(t,e,n,r,i,s){if(ko=s,ut=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Of.current=t===null||t.memoizedState===null?h5:d5,t=n(r,i),lu){s=0;do{if(lu=!1,Hu=0,25<=s)throw Error(W(301));s+=1,Vt=Ct=null,e.updateQueue=null,Of.current=f5,t=n(r,i)}while(lu)}if(Of.current=xp,e=Ct!==null&&Ct.next!==null,ko=0,Vt=Ct=ut=null,Ip=!1,e)throw Error(W(300));return t}function kw(){var t=Hu!==0;return Hu=0,t}function Pr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Vt===null?ut.memoizedState=Vt=t:Vt=Vt.next=t,Vt}function ur(){if(Ct===null){var t=ut.alternate;t=t!==null?t.memoizedState:null}else t=Ct.next;var e=Vt===null?ut.memoizedState:Vt.next;if(e!==null)Vt=e,Ct=t;else{if(t===null)throw Error(W(310));Ct=t,t={memoizedState:Ct.memoizedState,baseState:Ct.baseState,baseQueue:Ct.baseQueue,queue:Ct.queue,next:null},Vt===null?ut.memoizedState=Vt=t:Vt=Vt.next=t}return Vt}function qu(t,e){return typeof e=="function"?e(t):e}function Py(t){var e=ur(),n=e.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=t;var r=Ct,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((ko&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var h={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,ut.lanes|=u,Po|=u}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,Er(r,e.memoizedState)||(kn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,ut.lanes|=s,Po|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Cy(t){var e=ur(),n=e.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Er(s,e.memoizedState)||(kn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function Pk(){}function Ck(t,e){var n=ut,r=ur(),i=e(),s=!Er(r.memoizedState,i);if(s&&(r.memoizedState=i,kn=!0),r=r.queue,Pw(Ok.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Vt!==null&&Vt.memoizedState.tag&1){if(n.flags|=2048,Ku(9,Dk.bind(null,n,r,i,e),void 0,null),Ut===null)throw Error(W(349));ko&30||Nk(n,e,i)}return i}function Nk(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ut.updateQueue,e===null?(e={lastEffect:null,stores:null},ut.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Dk(t,e,n,r){e.value=n,e.getSnapshot=r,Lk(e)&&Mk(t)}function Ok(t,e,n){return n(function(){Lk(e)&&Mk(t)})}function Lk(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Er(t,n)}catch{return!0}}function Mk(t){var e=Ei(t,1);e!==null&&br(e,t,1,-1)}function mE(t){var e=Pr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:qu,lastRenderedState:t},e.queue=t,t=t.dispatch=u5.bind(null,ut,t),[e.memoizedState,t]}function Ku(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ut.updateQueue,e===null?(e={lastEffect:null,stores:null},ut.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Vk(){return ur().memoizedState}function Lf(t,e,n,r){var i=Pr();ut.flags|=t,i.memoizedState=Ku(1|e,n,void 0,r===void 0?null:r)}function Pg(t,e,n,r){var i=ur();r=r===void 0?null:r;var s=void 0;if(Ct!==null){var o=Ct.memoizedState;if(s=o.destroy,r!==null&&Rw(r,o.deps)){i.memoizedState=Ku(e,n,s,r);return}}ut.flags|=t,i.memoizedState=Ku(1|e,n,s,r)}function yE(t,e){return Lf(8390656,8,t,e)}function Pw(t,e){return Pg(2048,8,t,e)}function Fk(t,e){return Pg(4,2,t,e)}function $k(t,e){return Pg(4,4,t,e)}function Uk(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Bk(t,e,n){return n=n!=null?n.concat([t]):null,Pg(4,4,Uk.bind(null,e,t),n)}function Cw(){}function jk(t,e){var n=ur();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Rw(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function zk(t,e){var n=ur();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Rw(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Wk(t,e,n){return ko&21?(Er(n,e)||(n=KA(),ut.lanes|=n,Po|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,kn=!0),t.memoizedState=n)}function l5(t,e){var n=Me;Me=n!==0&&4>n?n:4,t(!0);var r=ky.transition;ky.transition={};try{t(!1),e()}finally{Me=n,ky.transition=r}}function Hk(){return ur().memoizedState}function c5(t,e,n){var r=ls(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},qk(t))Kk(e,n);else if(n=Ek(t,e,n,r),n!==null){var i=mn();br(n,t,r,i),Gk(n,e,r)}}function u5(t,e,n){var r=ls(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(qk(t))Kk(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Er(a,o)){var l=e.interleaved;l===null?(i.next=i,Sw(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=Ek(t,e,i,r),n!==null&&(i=mn(),br(n,t,r,i),Gk(n,e,r))}}function qk(t){var e=t.alternate;return t===ut||e!==null&&e===ut}function Kk(t,e){lu=Ip=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Gk(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,lw(t,n)}}var xp={readContext:cr,useCallback:tn,useContext:tn,useEffect:tn,useImperativeHandle:tn,useInsertionEffect:tn,useLayoutEffect:tn,useMemo:tn,useReducer:tn,useRef:tn,useState:tn,useDebugValue:tn,useDeferredValue:tn,useTransition:tn,useMutableSource:tn,useSyncExternalStore:tn,useId:tn,unstable_isNewReconciler:!1},h5={readContext:cr,useCallback:function(t,e){return Pr().memoizedState=[t,e===void 0?null:e],t},useContext:cr,useEffect:yE,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Lf(4194308,4,Uk.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Lf(4194308,4,t,e)},useInsertionEffect:function(t,e){return Lf(4,2,t,e)},useMemo:function(t,e){var n=Pr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Pr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=c5.bind(null,ut,t),[r.memoizedState,t]},useRef:function(t){var e=Pr();return t={current:t},e.memoizedState=t},useState:mE,useDebugValue:Cw,useDeferredValue:function(t){return Pr().memoizedState=t},useTransition:function(){var t=mE(!1),e=t[0];return t=l5.bind(null,t[1]),Pr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ut,i=Pr();if(nt){if(n===void 0)throw Error(W(407));n=n()}else{if(n=e(),Ut===null)throw Error(W(349));ko&30||Nk(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,yE(Ok.bind(null,r,s,t),[t]),r.flags|=2048,Ku(9,Dk.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Pr(),e=Ut.identifierPrefix;if(nt){var n=ci,r=li;n=(r&~(1<<32-wr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Hu++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=a5++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},d5={readContext:cr,useCallback:jk,useContext:cr,useEffect:Pw,useImperativeHandle:Bk,useInsertionEffect:Fk,useLayoutEffect:$k,useMemo:zk,useReducer:Py,useRef:Vk,useState:function(){return Py(qu)},useDebugValue:Cw,useDeferredValue:function(t){var e=ur();return Wk(e,Ct.memoizedState,t)},useTransition:function(){var t=Py(qu)[0],e=ur().memoizedState;return[t,e]},useMutableSource:Pk,useSyncExternalStore:Ck,useId:Hk,unstable_isNewReconciler:!1},f5={readContext:cr,useCallback:jk,useContext:cr,useEffect:Pw,useImperativeHandle:Bk,useInsertionEffect:Fk,useLayoutEffect:$k,useMemo:zk,useReducer:Cy,useRef:Vk,useState:function(){return Cy(qu)},useDebugValue:Cw,useDeferredValue:function(t){var e=ur();return Ct===null?e.memoizedState=t:Wk(e,Ct.memoizedState,t)},useTransition:function(){var t=Cy(qu)[0],e=ur().memoizedState;return[t,e]},useMutableSource:Pk,useSyncExternalStore:Ck,useId:Hk,unstable_isNewReconciler:!1};function ul(t,e){try{var n="",r=e;do n+=BV(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Ny(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function av(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var p5=typeof WeakMap=="function"?WeakMap:Map;function Qk(t,e,n){n=yi(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ap||(Ap=!0,yv=r),av(t,e)},n}function Yk(t,e,n){n=yi(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){av(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){av(t,e),typeof r!="function"&&(as===null?as=new Set([this]):as.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function _E(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new p5;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=A5.bind(null,t,e,n),e.then(t,t))}function vE(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function wE(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=yi(-1,1),e.tag=2,os(n,e,1))),n.lanes|=1),t)}var g5=Ai.ReactCurrentOwner,kn=!1;function dn(t,e,n,r){e.child=t===null?Ak(e,null,n,r):ll(e,t.child,n,r)}function bE(t,e,n,r,i){n=n.render;var s=e.ref;return Ha(e,i),r=Aw(t,e,n,r,s,i),n=kw(),t!==null&&!kn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ti(t,e,i)):(nt&&n&&mw(e),e.flags|=1,dn(t,e,r,i),e.child)}function SE(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!$w(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Xk(t,e,s,r,i)):(t=$f(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:$u,n(o,r)&&t.ref===e.ref)return Ti(t,e,i)}return e.flags|=1,t=cs(s,r),t.ref=e.ref,t.return=e,e.child=t}function Xk(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if($u(s,r)&&t.ref===e.ref)if(kn=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(kn=!0);else return e.lanes=t.lanes,Ti(t,e,i)}return lv(t,e,n,r,i)}function Jk(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ze(Fa,Bn),Bn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ze(Fa,Bn),Bn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,ze(Fa,Bn),Bn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,ze(Fa,Bn),Bn|=r;return dn(t,e,i,n),e.child}function Zk(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function lv(t,e,n,r,i){var s=On(n)?Ro:un.current;return s=ol(e,s),Ha(e,i),n=Aw(t,e,n,r,s,i),r=kw(),t!==null&&!kn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ti(t,e,i)):(nt&&r&&mw(e),e.flags|=1,dn(t,e,n,i),e.child)}function EE(t,e,n,r,i){if(On(n)){var s=!0;_p(e)}else s=!1;if(Ha(e,i),e.stateNode===null)Mf(t,e),xk(e,n,r),ov(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=cr(c):(c=On(n)?Ro:un.current,c=ol(e,c));var u=n.getDerivedStateFromProps,h=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&pE(e,o,r,c),Bi=!1;var d=e.memoizedState;o.state=d,Ep(e,r,o,i),l=e.memoizedState,a!==r||d!==l||Dn.current||Bi?(typeof u=="function"&&(sv(e,n,u,r),l=e.memoizedState),(a=Bi||fE(e,n,a,r,d,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Tk(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:mr(e.type,a),o.props=c,h=e.pendingProps,d=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=cr(l):(l=On(n)?Ro:un.current,l=ol(e,l));var f=n.getDerivedStateFromProps;(u=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||d!==l)&&pE(e,o,r,l),Bi=!1,d=e.memoizedState,o.state=d,Ep(e,r,o,i);var p=e.memoizedState;a!==h||d!==p||Dn.current||Bi?(typeof f=="function"&&(sv(e,n,f,r),p=e.memoizedState),(c=Bi||fE(e,n,c,r,d,p,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),o.props=r,o.state=p,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),r=!1)}return cv(t,e,n,r,s,i)}function cv(t,e,n,r,i,s){Zk(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&lE(e,n,!1),Ti(t,e,s);r=e.stateNode,g5.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=ll(e,t.child,null,s),e.child=ll(e,null,a,s)):dn(t,e,a,s),e.memoizedState=r.state,i&&lE(e,n,!0),e.child}function eP(t){var e=t.stateNode;e.pendingContext?aE(t,e.pendingContext,e.pendingContext!==e.context):e.context&&aE(t,e.context,!1),Tw(t,e.containerInfo)}function TE(t,e,n,r,i){return al(),_w(i),e.flags|=256,dn(t,e,n,r),e.child}var uv={dehydrated:null,treeContext:null,retryLane:0};function hv(t){return{baseLanes:t,cachePool:null,transitions:null}}function tP(t,e,n){var r=e.pendingProps,i=ct.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),ze(ct,i&1),t===null)return rv(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Dg(o,r,0,null),t=vo(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=hv(n),e.memoizedState=uv,t):Nw(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return m5(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=cs(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=cs(a,s):(s=vo(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?hv(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=uv,r}return s=t.child,t=s.sibling,r=cs(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Nw(t,e){return e=Dg({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Hd(t,e,n,r){return r!==null&&_w(r),ll(e,t.child,null,n),t=Nw(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function m5(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Ny(Error(W(422))),Hd(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Dg({mode:"visible",children:r.children},i,0,null),s=vo(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&ll(e,t.child,null,o),e.child.memoizedState=hv(o),e.memoizedState=uv,s);if(!(e.mode&1))return Hd(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(W(419)),r=Ny(s,r,void 0),Hd(t,e,o,r)}if(a=(o&t.childLanes)!==0,kn||a){if(r=Ut,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Ei(t,i),br(r,t,i,-1))}return Fw(),r=Ny(Error(W(421))),Hd(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=k5.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Wn=ss(i.nextSibling),qn=e,nt=!0,_r=null,t!==null&&(nr[rr++]=li,nr[rr++]=ci,nr[rr++]=Ao,li=t.id,ci=t.overflow,Ao=e),e=Nw(e,r.children),e.flags|=4096,e)}function IE(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),iv(t.return,e,n)}function Dy(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function nP(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(dn(t,e,r.children,n),r=ct.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&IE(t,n,e);else if(t.tag===19)IE(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ze(ct,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Tp(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Dy(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Tp(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Dy(e,!0,n,null,s);break;case"together":Dy(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Mf(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ti(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Po|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(W(153));if(e.child!==null){for(t=e.child,n=cs(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=cs(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function y5(t,e,n){switch(e.tag){case 3:eP(e),al();break;case 5:kk(e);break;case 1:On(e.type)&&_p(e);break;case 4:Tw(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;ze(bp,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ze(ct,ct.current&1),e.flags|=128,null):n&e.child.childLanes?tP(t,e,n):(ze(ct,ct.current&1),t=Ti(t,e,n),t!==null?t.sibling:null);ze(ct,ct.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return nP(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ze(ct,ct.current),r)break;return null;case 22:case 23:return e.lanes=0,Jk(t,e,n)}return Ti(t,e,n)}var rP,dv,iP,sP;rP=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};dv=function(){};iP=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,uo(Hr.current);var s=null;switch(n){case"input":i=O_(t,i),r=O_(t,r),s=[];break;case"select":i=dt({},i,{value:void 0}),r=dt({},r,{value:void 0}),s=[];break;case"textarea":i=V_(t,i),r=V_(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=mp)}$_(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Nu.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Nu.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&qe("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};sP=function(t,e,n,r){n!==r&&(e.flags|=4)};function dc(t,e){if(!nt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function nn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function _5(t,e,n){var r=e.pendingProps;switch(yw(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return nn(e),null;case 1:return On(e.type)&&yp(),nn(e),null;case 3:return r=e.stateNode,cl(),Xe(Dn),Xe(un),xw(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(zd(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,_r!==null&&(wv(_r),_r=null))),dv(t,e),nn(e),null;case 5:Iw(e);var i=uo(Wu.current);if(n=e.type,t!==null&&e.stateNode!=null)iP(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(W(166));return nn(e),null}if(t=uo(Hr.current),zd(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Nr]=e,r[ju]=s,t=(e.mode&1)!==0,n){case"dialog":qe("cancel",r),qe("close",r);break;case"iframe":case"object":case"embed":qe("load",r);break;case"video":case"audio":for(i=0;i<Uc.length;i++)qe(Uc[i],r);break;case"source":qe("error",r);break;case"img":case"image":case"link":qe("error",r),qe("load",r);break;case"details":qe("toggle",r);break;case"input":OS(r,s),qe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},qe("invalid",r);break;case"textarea":MS(r,s),qe("invalid",r)}$_(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&jd(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&jd(r.textContent,a,t),i=["children",""+a]):Nu.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&qe("scroll",r)}switch(n){case"input":Od(r),LS(r,s,!0);break;case"textarea":Od(r),VS(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=mp)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=NA(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Nr]=e,t[ju]=r,rP(t,e,!1,!1),e.stateNode=t;e:{switch(o=U_(n,r),n){case"dialog":qe("cancel",t),qe("close",t),i=r;break;case"iframe":case"object":case"embed":qe("load",t),i=r;break;case"video":case"audio":for(i=0;i<Uc.length;i++)qe(Uc[i],t);i=r;break;case"source":qe("error",t),i=r;break;case"img":case"image":case"link":qe("error",t),qe("load",t),i=r;break;case"details":qe("toggle",t),i=r;break;case"input":OS(t,r),i=O_(t,r),qe("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=dt({},r,{value:void 0}),qe("invalid",t);break;case"textarea":MS(t,r),i=V_(t,r),qe("invalid",t);break;default:i=r}$_(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?LA(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&DA(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Du(t,l):typeof l=="number"&&Du(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Nu.hasOwnProperty(s)?l!=null&&s==="onScroll"&&qe("scroll",t):l!=null&&nw(t,s,l,o))}switch(n){case"input":Od(t),LS(t,r,!1);break;case"textarea":Od(t),VS(t);break;case"option":r.value!=null&&t.setAttribute("value",""+fs(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Ba(t,!!r.multiple,s,!1):r.defaultValue!=null&&Ba(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=mp)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return nn(e),null;case 6:if(t&&e.stateNode!=null)sP(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(W(166));if(n=uo(Wu.current),uo(Hr.current),zd(e)){if(r=e.stateNode,n=e.memoizedProps,r[Nr]=e,(s=r.nodeValue!==n)&&(t=qn,t!==null))switch(t.tag){case 3:jd(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&jd(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Nr]=e,e.stateNode=r}return nn(e),null;case 13:if(Xe(ct),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(nt&&Wn!==null&&e.mode&1&&!(e.flags&128))Sk(),al(),e.flags|=98560,s=!1;else if(s=zd(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(W(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(W(317));s[Nr]=e}else al(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;nn(e),s=!1}else _r!==null&&(wv(_r),_r=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ct.current&1?Nt===0&&(Nt=3):Fw())),e.updateQueue!==null&&(e.flags|=4),nn(e),null);case 4:return cl(),dv(t,e),t===null&&Uu(e.stateNode.containerInfo),nn(e),null;case 10:return bw(e.type._context),nn(e),null;case 17:return On(e.type)&&yp(),nn(e),null;case 19:if(Xe(ct),s=e.memoizedState,s===null)return nn(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)dc(s,!1);else{if(Nt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Tp(t),o!==null){for(e.flags|=128,dc(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ze(ct,ct.current&1|2),e.child}t=t.sibling}s.tail!==null&&St()>hl&&(e.flags|=128,r=!0,dc(s,!1),e.lanes=4194304)}else{if(!r)if(t=Tp(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),dc(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!nt)return nn(e),null}else 2*St()-s.renderingStartTime>hl&&n!==1073741824&&(e.flags|=128,r=!0,dc(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=St(),e.sibling=null,n=ct.current,ze(ct,r?n&1|2:n&1),e):(nn(e),null);case 22:case 23:return Vw(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Bn&1073741824&&(nn(e),e.subtreeFlags&6&&(e.flags|=8192)):nn(e),null;case 24:return null;case 25:return null}throw Error(W(156,e.tag))}function v5(t,e){switch(yw(e),e.tag){case 1:return On(e.type)&&yp(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return cl(),Xe(Dn),Xe(un),xw(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Iw(e),null;case 13:if(Xe(ct),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(W(340));al()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Xe(ct),null;case 4:return cl(),null;case 10:return bw(e.type._context),null;case 22:case 23:return Vw(),null;case 24:return null;default:return null}}var qd=!1,on=!1,w5=typeof WeakSet=="function"?WeakSet:Set,ne=null;function Va(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ft(t,e,r)}else n.current=null}function fv(t,e,n){try{n()}catch(r){ft(t,e,r)}}var xE=!1;function b5(t,e){if(Y_=fp,t=ck(),gw(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,h=t,d=null;t:for(;;){for(var f;h!==n||i!==0&&h.nodeType!==3||(a=o+i),h!==s||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(f=h.firstChild)!==null;)d=h,h=f;for(;;){if(h===t)break t;if(d===n&&++c===i&&(a=o),d===s&&++u===r&&(l=o),(f=h.nextSibling)!==null)break;h=d,d=h.parentNode}h=f}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(X_={focusedElem:t,selectionRange:n},fp=!1,ne=e;ne!==null;)if(e=ne,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ne=t;else for(;ne!==null;){e=ne;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,_=p.memoizedState,y=e.stateNode,m=y.getSnapshotBeforeUpdate(e.elementType===e.type?g:mr(e.type,g),_);y.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(W(163))}}catch(w){ft(e,e.return,w)}if(t=e.sibling,t!==null){t.return=e.return,ne=t;break}ne=e.return}return p=xE,xE=!1,p}function cu(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&fv(e,n,s)}i=i.next}while(i!==r)}}function Cg(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function pv(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function oP(t){var e=t.alternate;e!==null&&(t.alternate=null,oP(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Nr],delete e[ju],delete e[ev],delete e[r5],delete e[i5])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function aP(t){return t.tag===5||t.tag===3||t.tag===4}function RE(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||aP(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function gv(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=mp));else if(r!==4&&(t=t.child,t!==null))for(gv(t,e,n),t=t.sibling;t!==null;)gv(t,e,n),t=t.sibling}function mv(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(mv(t,e,n),t=t.sibling;t!==null;)mv(t,e,n),t=t.sibling}var qt=null,yr=!1;function Li(t,e,n){for(n=n.child;n!==null;)lP(t,e,n),n=n.sibling}function lP(t,e,n){if(Wr&&typeof Wr.onCommitFiberUnmount=="function")try{Wr.onCommitFiberUnmount(Eg,n)}catch{}switch(n.tag){case 5:on||Va(n,e);case 6:var r=qt,i=yr;qt=null,Li(t,e,n),qt=r,yr=i,qt!==null&&(yr?(t=qt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):qt.removeChild(n.stateNode));break;case 18:qt!==null&&(yr?(t=qt,n=n.stateNode,t.nodeType===8?xy(t.parentNode,n):t.nodeType===1&&xy(t,n),Vu(t)):xy(qt,n.stateNode));break;case 4:r=qt,i=yr,qt=n.stateNode.containerInfo,yr=!0,Li(t,e,n),qt=r,yr=i;break;case 0:case 11:case 14:case 15:if(!on&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&fv(n,e,o),i=i.next}while(i!==r)}Li(t,e,n);break;case 1:if(!on&&(Va(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){ft(n,e,a)}Li(t,e,n);break;case 21:Li(t,e,n);break;case 22:n.mode&1?(on=(r=on)||n.memoizedState!==null,Li(t,e,n),on=r):Li(t,e,n);break;default:Li(t,e,n)}}function AE(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new w5),e.forEach(function(r){var i=P5.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function pr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:qt=a.stateNode,yr=!1;break e;case 3:qt=a.stateNode.containerInfo,yr=!0;break e;case 4:qt=a.stateNode.containerInfo,yr=!0;break e}a=a.return}if(qt===null)throw Error(W(160));lP(s,o,i),qt=null,yr=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){ft(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)cP(e,t),e=e.sibling}function cP(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(pr(e,t),Ar(t),r&4){try{cu(3,t,t.return),Cg(3,t)}catch(g){ft(t,t.return,g)}try{cu(5,t,t.return)}catch(g){ft(t,t.return,g)}}break;case 1:pr(e,t),Ar(t),r&512&&n!==null&&Va(n,n.return);break;case 5:if(pr(e,t),Ar(t),r&512&&n!==null&&Va(n,n.return),t.flags&32){var i=t.stateNode;try{Du(i,"")}catch(g){ft(t,t.return,g)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&PA(i,s),U_(a,o);var c=U_(a,s);for(o=0;o<l.length;o+=2){var u=l[o],h=l[o+1];u==="style"?LA(i,h):u==="dangerouslySetInnerHTML"?DA(i,h):u==="children"?Du(i,h):nw(i,u,h,c)}switch(a){case"input":L_(i,s);break;case"textarea":CA(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?Ba(i,!!s.multiple,f,!1):d!==!!s.multiple&&(s.defaultValue!=null?Ba(i,!!s.multiple,s.defaultValue,!0):Ba(i,!!s.multiple,s.multiple?[]:"",!1))}i[ju]=s}catch(g){ft(t,t.return,g)}}break;case 6:if(pr(e,t),Ar(t),r&4){if(t.stateNode===null)throw Error(W(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(g){ft(t,t.return,g)}}break;case 3:if(pr(e,t),Ar(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Vu(e.containerInfo)}catch(g){ft(t,t.return,g)}break;case 4:pr(e,t),Ar(t);break;case 13:pr(e,t),Ar(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Lw=St())),r&4&&AE(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(on=(c=on)||u,pr(e,t),on=c):pr(e,t),Ar(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(ne=t,u=t.child;u!==null;){for(h=ne=u;ne!==null;){switch(d=ne,f=d.child,d.tag){case 0:case 11:case 14:case 15:cu(4,d,d.return);break;case 1:Va(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){r=d,n=d.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(g){ft(r,n,g)}}break;case 5:Va(d,d.return);break;case 22:if(d.memoizedState!==null){PE(h);continue}}f!==null?(f.return=d,ne=f):PE(h)}u=u.sibling}e:for(u=null,h=t;;){if(h.tag===5){if(u===null){u=h;try{i=h.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=OA("display",o))}catch(g){ft(t,t.return,g)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(g){ft(t,t.return,g)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:pr(e,t),Ar(t),r&4&&AE(t);break;case 21:break;default:pr(e,t),Ar(t)}}function Ar(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(aP(n)){var r=n;break e}n=n.return}throw Error(W(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Du(i,""),r.flags&=-33);var s=RE(t);mv(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=RE(t);gv(t,a,o);break;default:throw Error(W(161))}}catch(l){ft(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function S5(t,e,n){ne=t,uP(t)}function uP(t,e,n){for(var r=(t.mode&1)!==0;ne!==null;){var i=ne,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||qd;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||on;a=qd;var c=on;if(qd=o,(on=l)&&!c)for(ne=i;ne!==null;)o=ne,l=o.child,o.tag===22&&o.memoizedState!==null?CE(i):l!==null?(l.return=o,ne=l):CE(i);for(;s!==null;)ne=s,uP(s),s=s.sibling;ne=i,qd=a,on=c}kE(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,ne=s):kE(t)}}function kE(t){for(;ne!==null;){var e=ne;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:on||Cg(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!on)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:mr(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&dE(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}dE(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&Vu(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(W(163))}on||e.flags&512&&pv(e)}catch(d){ft(e,e.return,d)}}if(e===t){ne=null;break}if(n=e.sibling,n!==null){n.return=e.return,ne=n;break}ne=e.return}}function PE(t){for(;ne!==null;){var e=ne;if(e===t){ne=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ne=n;break}ne=e.return}}function CE(t){for(;ne!==null;){var e=ne;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Cg(4,e)}catch(l){ft(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){ft(e,i,l)}}var s=e.return;try{pv(e)}catch(l){ft(e,s,l)}break;case 5:var o=e.return;try{pv(e)}catch(l){ft(e,o,l)}}}catch(l){ft(e,e.return,l)}if(e===t){ne=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ne=a;break}ne=e.return}}var E5=Math.ceil,Rp=Ai.ReactCurrentDispatcher,Dw=Ai.ReactCurrentOwner,lr=Ai.ReactCurrentBatchConfig,Ce=0,Ut=null,At=null,Yt=0,Bn=0,Fa=Ps(0),Nt=0,Gu=null,Po=0,Ng=0,Ow=0,uu=null,Rn=null,Lw=0,hl=1/0,ii=null,Ap=!1,yv=null,as=null,Kd=!1,Gi=null,kp=0,hu=0,_v=null,Vf=-1,Ff=0;function mn(){return Ce&6?St():Vf!==-1?Vf:Vf=St()}function ls(t){return t.mode&1?Ce&2&&Yt!==0?Yt&-Yt:o5.transition!==null?(Ff===0&&(Ff=KA()),Ff):(t=Me,t!==0||(t=window.event,t=t===void 0?16:ek(t.type)),t):1}function br(t,e,n,r){if(50<hu)throw hu=0,_v=null,Error(W(185));Bh(t,n,r),(!(Ce&2)||t!==Ut)&&(t===Ut&&(!(Ce&2)&&(Ng|=n),Nt===4&&Wi(t,Yt)),Ln(t,r),n===1&&Ce===0&&!(e.mode&1)&&(hl=St()+500,Ag&&Cs()))}function Ln(t,e){var n=t.callbackNode;oF(t,e);var r=dp(t,t===Ut?Yt:0);if(r===0)n!==null&&US(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&US(n),e===1)t.tag===0?s5(NE.bind(null,t)):vk(NE.bind(null,t)),t5(function(){!(Ce&6)&&Cs()}),n=null;else{switch(GA(r)){case 1:n=aw;break;case 4:n=HA;break;case 16:n=hp;break;case 536870912:n=qA;break;default:n=hp}n=_P(n,hP.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function hP(t,e){if(Vf=-1,Ff=0,Ce&6)throw Error(W(327));var n=t.callbackNode;if(qa()&&t.callbackNode!==n)return null;var r=dp(t,t===Ut?Yt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Pp(t,r);else{e=r;var i=Ce;Ce|=2;var s=fP();(Ut!==t||Yt!==e)&&(ii=null,hl=St()+500,_o(t,e));do try{x5();break}catch(a){dP(t,a)}while(!0);ww(),Rp.current=s,Ce=i,At!==null?e=0:(Ut=null,Yt=0,e=Nt)}if(e!==0){if(e===2&&(i=H_(t),i!==0&&(r=i,e=vv(t,i))),e===1)throw n=Gu,_o(t,0),Wi(t,r),Ln(t,St()),n;if(e===6)Wi(t,r);else{if(i=t.current.alternate,!(r&30)&&!T5(i)&&(e=Pp(t,r),e===2&&(s=H_(t),s!==0&&(r=s,e=vv(t,s))),e===1))throw n=Gu,_o(t,0),Wi(t,r),Ln(t,St()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(W(345));case 2:Xs(t,Rn,ii);break;case 3:if(Wi(t,r),(r&130023424)===r&&(e=Lw+500-St(),10<e)){if(dp(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){mn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Z_(Xs.bind(null,t,Rn,ii),e);break}Xs(t,Rn,ii);break;case 4:if(Wi(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-wr(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=St()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*E5(r/1960))-r,10<r){t.timeoutHandle=Z_(Xs.bind(null,t,Rn,ii),r);break}Xs(t,Rn,ii);break;case 5:Xs(t,Rn,ii);break;default:throw Error(W(329))}}}return Ln(t,St()),t.callbackNode===n?hP.bind(null,t):null}function vv(t,e){var n=uu;return t.current.memoizedState.isDehydrated&&(_o(t,e).flags|=256),t=Pp(t,e),t!==2&&(e=Rn,Rn=n,e!==null&&wv(e)),t}function wv(t){Rn===null?Rn=t:Rn.push.apply(Rn,t)}function T5(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Er(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Wi(t,e){for(e&=~Ow,e&=~Ng,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-wr(e),r=1<<n;t[n]=-1,e&=~r}}function NE(t){if(Ce&6)throw Error(W(327));qa();var e=dp(t,0);if(!(e&1))return Ln(t,St()),null;var n=Pp(t,e);if(t.tag!==0&&n===2){var r=H_(t);r!==0&&(e=r,n=vv(t,r))}if(n===1)throw n=Gu,_o(t,0),Wi(t,e),Ln(t,St()),n;if(n===6)throw Error(W(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Xs(t,Rn,ii),Ln(t,St()),null}function Mw(t,e){var n=Ce;Ce|=1;try{return t(e)}finally{Ce=n,Ce===0&&(hl=St()+500,Ag&&Cs())}}function Co(t){Gi!==null&&Gi.tag===0&&!(Ce&6)&&qa();var e=Ce;Ce|=1;var n=lr.transition,r=Me;try{if(lr.transition=null,Me=1,t)return t()}finally{Me=r,lr.transition=n,Ce=e,!(Ce&6)&&Cs()}}function Vw(){Bn=Fa.current,Xe(Fa)}function _o(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,e5(n)),At!==null)for(n=At.return;n!==null;){var r=n;switch(yw(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&yp();break;case 3:cl(),Xe(Dn),Xe(un),xw();break;case 5:Iw(r);break;case 4:cl();break;case 13:Xe(ct);break;case 19:Xe(ct);break;case 10:bw(r.type._context);break;case 22:case 23:Vw()}n=n.return}if(Ut=t,At=t=cs(t.current,null),Yt=Bn=e,Nt=0,Gu=null,Ow=Ng=Po=0,Rn=uu=null,co!==null){for(e=0;e<co.length;e++)if(n=co[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}co=null}return t}function dP(t,e){do{var n=At;try{if(ww(),Of.current=xp,Ip){for(var r=ut.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Ip=!1}if(ko=0,Vt=Ct=ut=null,lu=!1,Hu=0,Dw.current=null,n===null||n.return===null){Nt=1,Gu=e,At=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Yt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var d=u.alternate;d?(u.updateQueue=d.updateQueue,u.memoizedState=d.memoizedState,u.lanes=d.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=vE(o);if(f!==null){f.flags&=-257,wE(f,o,a,s,e),f.mode&1&&_E(s,c,e),e=f,l=c;var p=e.updateQueue;if(p===null){var g=new Set;g.add(l),e.updateQueue=g}else p.add(l);break e}else{if(!(e&1)){_E(s,c,e),Fw();break e}l=Error(W(426))}}else if(nt&&a.mode&1){var _=vE(o);if(_!==null){!(_.flags&65536)&&(_.flags|=256),wE(_,o,a,s,e),_w(ul(l,a));break e}}s=l=ul(l,a),Nt!==4&&(Nt=2),uu===null?uu=[s]:uu.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var y=Qk(s,l,e);hE(s,y);break e;case 1:a=l;var m=s.type,v=s.stateNode;if(!(s.flags&128)&&(typeof m.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(as===null||!as.has(v)))){s.flags|=65536,e&=-e,s.lanes|=e;var w=Yk(s,a,e);hE(s,w);break e}}s=s.return}while(s!==null)}gP(n)}catch(S){e=S,At===n&&n!==null&&(At=n=n.return);continue}break}while(!0)}function fP(){var t=Rp.current;return Rp.current=xp,t===null?xp:t}function Fw(){(Nt===0||Nt===3||Nt===2)&&(Nt=4),Ut===null||!(Po&268435455)&&!(Ng&268435455)||Wi(Ut,Yt)}function Pp(t,e){var n=Ce;Ce|=2;var r=fP();(Ut!==t||Yt!==e)&&(ii=null,_o(t,e));do try{I5();break}catch(i){dP(t,i)}while(!0);if(ww(),Ce=n,Rp.current=r,At!==null)throw Error(W(261));return Ut=null,Yt=0,Nt}function I5(){for(;At!==null;)pP(At)}function x5(){for(;At!==null&&!XV();)pP(At)}function pP(t){var e=yP(t.alternate,t,Bn);t.memoizedProps=t.pendingProps,e===null?gP(t):At=e,Dw.current=null}function gP(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=v5(n,e),n!==null){n.flags&=32767,At=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Nt=6,At=null;return}}else if(n=_5(n,e,Bn),n!==null){At=n;return}if(e=e.sibling,e!==null){At=e;return}At=e=t}while(e!==null);Nt===0&&(Nt=5)}function Xs(t,e,n){var r=Me,i=lr.transition;try{lr.transition=null,Me=1,R5(t,e,n,r)}finally{lr.transition=i,Me=r}return null}function R5(t,e,n,r){do qa();while(Gi!==null);if(Ce&6)throw Error(W(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(W(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(aF(t,s),t===Ut&&(At=Ut=null,Yt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Kd||(Kd=!0,_P(hp,function(){return qa(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=lr.transition,lr.transition=null;var o=Me;Me=1;var a=Ce;Ce|=4,Dw.current=null,b5(t,n),cP(n,t),KF(X_),fp=!!Y_,X_=Y_=null,t.current=n,S5(n),JV(),Ce=a,Me=o,lr.transition=s}else t.current=n;if(Kd&&(Kd=!1,Gi=t,kp=i),s=t.pendingLanes,s===0&&(as=null),tF(n.stateNode),Ln(t,St()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Ap)throw Ap=!1,t=yv,yv=null,t;return kp&1&&t.tag!==0&&qa(),s=t.pendingLanes,s&1?t===_v?hu++:(hu=0,_v=t):hu=0,Cs(),null}function qa(){if(Gi!==null){var t=GA(kp),e=lr.transition,n=Me;try{if(lr.transition=null,Me=16>t?16:t,Gi===null)var r=!1;else{if(t=Gi,Gi=null,kp=0,Ce&6)throw Error(W(331));var i=Ce;for(Ce|=4,ne=t.current;ne!==null;){var s=ne,o=s.child;if(ne.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(ne=c;ne!==null;){var u=ne;switch(u.tag){case 0:case 11:case 15:cu(8,u,s)}var h=u.child;if(h!==null)h.return=u,ne=h;else for(;ne!==null;){u=ne;var d=u.sibling,f=u.return;if(oP(u),u===c){ne=null;break}if(d!==null){d.return=f,ne=d;break}ne=f}}}var p=s.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var _=g.sibling;g.sibling=null,g=_}while(g!==null)}}ne=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,ne=o;else e:for(;ne!==null;){if(s=ne,s.flags&2048)switch(s.tag){case 0:case 11:case 15:cu(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,ne=y;break e}ne=s.return}}var m=t.current;for(ne=m;ne!==null;){o=ne;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,ne=v;else e:for(o=m;ne!==null;){if(a=ne,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Cg(9,a)}}catch(S){ft(a,a.return,S)}if(a===o){ne=null;break e}var w=a.sibling;if(w!==null){w.return=a.return,ne=w;break e}ne=a.return}}if(Ce=i,Cs(),Wr&&typeof Wr.onPostCommitFiberRoot=="function")try{Wr.onPostCommitFiberRoot(Eg,t)}catch{}r=!0}return r}finally{Me=n,lr.transition=e}}return!1}function DE(t,e,n){e=ul(n,e),e=Qk(t,e,1),t=os(t,e,1),e=mn(),t!==null&&(Bh(t,1,e),Ln(t,e))}function ft(t,e,n){if(t.tag===3)DE(t,t,n);else for(;e!==null;){if(e.tag===3){DE(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(as===null||!as.has(r))){t=ul(n,t),t=Yk(e,t,1),e=os(e,t,1),t=mn(),e!==null&&(Bh(e,1,t),Ln(e,t));break}}e=e.return}}function A5(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=mn(),t.pingedLanes|=t.suspendedLanes&n,Ut===t&&(Yt&n)===n&&(Nt===4||Nt===3&&(Yt&130023424)===Yt&&500>St()-Lw?_o(t,0):Ow|=n),Ln(t,e)}function mP(t,e){e===0&&(t.mode&1?(e=Vd,Vd<<=1,!(Vd&130023424)&&(Vd=4194304)):e=1);var n=mn();t=Ei(t,e),t!==null&&(Bh(t,e,n),Ln(t,n))}function k5(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),mP(t,n)}function P5(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(W(314))}r!==null&&r.delete(e),mP(t,n)}var yP;yP=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Dn.current)kn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return kn=!1,y5(t,e,n);kn=!!(t.flags&131072)}else kn=!1,nt&&e.flags&1048576&&wk(e,wp,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Mf(t,e),t=e.pendingProps;var i=ol(e,un.current);Ha(e,n),i=Aw(null,e,r,t,i,n);var s=kw();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,On(r)?(s=!0,_p(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Ew(e),i.updater=kg,e.stateNode=i,i._reactInternals=e,ov(e,r,t,n),e=cv(null,e,r,!0,s,n)):(e.tag=0,nt&&s&&mw(e),dn(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Mf(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=N5(r),t=mr(r,t),i){case 0:e=lv(null,e,r,t,n);break e;case 1:e=EE(null,e,r,t,n);break e;case 11:e=bE(null,e,r,t,n);break e;case 14:e=SE(null,e,r,mr(r.type,t),n);break e}throw Error(W(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:mr(r,i),lv(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:mr(r,i),EE(t,e,r,i,n);case 3:e:{if(eP(e),t===null)throw Error(W(387));r=e.pendingProps,s=e.memoizedState,i=s.element,Tk(t,e),Ep(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=ul(Error(W(423)),e),e=TE(t,e,r,n,i);break e}else if(r!==i){i=ul(Error(W(424)),e),e=TE(t,e,r,n,i);break e}else for(Wn=ss(e.stateNode.containerInfo.firstChild),qn=e,nt=!0,_r=null,n=Ak(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(al(),r===i){e=Ti(t,e,n);break e}dn(t,e,r,n)}e=e.child}return e;case 5:return kk(e),t===null&&rv(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,J_(r,i)?o=null:s!==null&&J_(r,s)&&(e.flags|=32),Zk(t,e),dn(t,e,o,n),e.child;case 6:return t===null&&rv(e),null;case 13:return tP(t,e,n);case 4:return Tw(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ll(e,null,r,n):dn(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:mr(r,i),bE(t,e,r,i,n);case 7:return dn(t,e,e.pendingProps,n),e.child;case 8:return dn(t,e,e.pendingProps.children,n),e.child;case 12:return dn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,ze(bp,r._currentValue),r._currentValue=o,s!==null)if(Er(s.value,o)){if(s.children===i.children&&!Dn.current){e=Ti(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=yi(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),iv(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(W(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),iv(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}dn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Ha(e,n),i=cr(i),r=r(i),e.flags|=1,dn(t,e,r,n),e.child;case 14:return r=e.type,i=mr(r,e.pendingProps),i=mr(r.type,i),SE(t,e,r,i,n);case 15:return Xk(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:mr(r,i),Mf(t,e),e.tag=1,On(r)?(t=!0,_p(e)):t=!1,Ha(e,n),xk(e,r,i),ov(e,r,i,n),cv(null,e,r,!0,t,n);case 19:return nP(t,e,n);case 22:return Jk(t,e,n)}throw Error(W(156,e.tag))};function _P(t,e){return WA(t,e)}function C5(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function sr(t,e,n,r){return new C5(t,e,n,r)}function $w(t){return t=t.prototype,!(!t||!t.isReactComponent)}function N5(t){if(typeof t=="function")return $w(t)?1:0;if(t!=null){if(t=t.$$typeof,t===iw)return 11;if(t===sw)return 14}return 2}function cs(t,e){var n=t.alternate;return n===null?(n=sr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function $f(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")$w(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Aa:return vo(n.children,i,s,e);case rw:o=8,i|=8;break;case P_:return t=sr(12,n,e,i|2),t.elementType=P_,t.lanes=s,t;case C_:return t=sr(13,n,e,i),t.elementType=C_,t.lanes=s,t;case N_:return t=sr(19,n,e,i),t.elementType=N_,t.lanes=s,t;case RA:return Dg(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case IA:o=10;break e;case xA:o=9;break e;case iw:o=11;break e;case sw:o=14;break e;case Ui:o=16,r=null;break e}throw Error(W(130,t==null?t:typeof t,""))}return e=sr(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function vo(t,e,n,r){return t=sr(7,t,r,e),t.lanes=n,t}function Dg(t,e,n,r){return t=sr(22,t,r,e),t.elementType=RA,t.lanes=n,t.stateNode={isHidden:!1},t}function Oy(t,e,n){return t=sr(6,t,null,e),t.lanes=n,t}function Ly(t,e,n){return e=sr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function D5(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gy(0),this.expirationTimes=gy(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gy(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Uw(t,e,n,r,i,s,o,a,l){return t=new D5(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=sr(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ew(s),t}function O5(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ra,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function vP(t){if(!t)return ps;t=t._reactInternals;e:{if(Xo(t)!==t||t.tag!==1)throw Error(W(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(On(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(W(171))}if(t.tag===1){var n=t.type;if(On(n))return _k(t,n,e)}return e}function wP(t,e,n,r,i,s,o,a,l){return t=Uw(n,r,!0,t,i,s,o,a,l),t.context=vP(null),n=t.current,r=mn(),i=ls(n),s=yi(r,i),s.callback=e??null,os(n,s,i),t.current.lanes=i,Bh(t,i,r),Ln(t,r),t}function Og(t,e,n,r){var i=e.current,s=mn(),o=ls(i);return n=vP(n),e.context===null?e.context=n:e.pendingContext=n,e=yi(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=os(i,e,o),t!==null&&(br(t,i,o,s),Df(t,i,o)),o}function Cp(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function OE(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Bw(t,e){OE(t,e),(t=t.alternate)&&OE(t,e)}function L5(){return null}var bP=typeof reportError=="function"?reportError:function(t){console.error(t)};function jw(t){this._internalRoot=t}Lg.prototype.render=jw.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(W(409));Og(t,e,null,null)};Lg.prototype.unmount=jw.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Co(function(){Og(null,t,null,null)}),e[Si]=null}};function Lg(t){this._internalRoot=t}Lg.prototype.unstable_scheduleHydration=function(t){if(t){var e=XA();t={blockedOn:null,target:t,priority:e};for(var n=0;n<zi.length&&e!==0&&e<zi[n].priority;n++);zi.splice(n,0,t),n===0&&ZA(t)}};function zw(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Mg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function LE(){}function M5(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=Cp(o);s.call(c)}}var o=wP(e,r,t,0,null,!1,!1,"",LE);return t._reactRootContainer=o,t[Si]=o.current,Uu(t.nodeType===8?t.parentNode:t),Co(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=Cp(l);a.call(c)}}var l=Uw(t,0,!1,null,null,!1,!1,"",LE);return t._reactRootContainer=l,t[Si]=l.current,Uu(t.nodeType===8?t.parentNode:t),Co(function(){Og(e,l,n,r)}),l}function Vg(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Cp(o);a.call(l)}}Og(e,o,t,i)}else o=M5(n,e,t,i,r);return Cp(o)}QA=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=$c(e.pendingLanes);n!==0&&(lw(e,n|1),Ln(e,St()),!(Ce&6)&&(hl=St()+500,Cs()))}break;case 13:Co(function(){var r=Ei(t,1);if(r!==null){var i=mn();br(r,t,1,i)}}),Bw(t,1)}};cw=function(t){if(t.tag===13){var e=Ei(t,134217728);if(e!==null){var n=mn();br(e,t,134217728,n)}Bw(t,134217728)}};YA=function(t){if(t.tag===13){var e=ls(t),n=Ei(t,e);if(n!==null){var r=mn();br(n,t,e,r)}Bw(t,e)}};XA=function(){return Me};JA=function(t,e){var n=Me;try{return Me=t,e()}finally{Me=n}};j_=function(t,e,n){switch(e){case"input":if(L_(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Rg(r);if(!i)throw Error(W(90));kA(r),L_(r,i)}}}break;case"textarea":CA(t,n);break;case"select":e=n.value,e!=null&&Ba(t,!!n.multiple,e,!1)}};FA=Mw;$A=Co;var V5={usingClientEntryPoint:!1,Events:[zh,Na,Rg,MA,VA,Mw]},fc={findFiberByHostInstance:lo,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},F5={bundleType:fc.bundleType,version:fc.version,rendererPackageName:fc.rendererPackageName,rendererConfig:fc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ai.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=jA(t),t===null?null:t.stateNode},findFiberByHostInstance:fc.findFiberByHostInstance||L5,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gd.isDisabled&&Gd.supportsFiber)try{Eg=Gd.inject(F5),Wr=Gd}catch{}}Yn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=V5;Yn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!zw(e))throw Error(W(200));return O5(t,e,null,n)};Yn.createRoot=function(t,e){if(!zw(t))throw Error(W(299));var n=!1,r="",i=bP;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Uw(t,1,!1,null,null,n,!1,r,i),t[Si]=e.current,Uu(t.nodeType===8?t.parentNode:t),new jw(e)};Yn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(W(188)):(t=Object.keys(t).join(","),Error(W(268,t)));return t=jA(e),t=t===null?null:t.stateNode,t};Yn.flushSync=function(t){return Co(t)};Yn.hydrate=function(t,e,n){if(!Mg(e))throw Error(W(200));return Vg(null,t,e,!0,n)};Yn.hydrateRoot=function(t,e,n){if(!zw(t))throw Error(W(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=bP;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=wP(e,null,t,1,n??null,i,!1,s,o),t[Si]=e.current,Uu(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Lg(e)};Yn.render=function(t,e,n){if(!Mg(e))throw Error(W(200));return Vg(null,t,e,!1,n)};Yn.unmountComponentAtNode=function(t){if(!Mg(t))throw Error(W(40));return t._reactRootContainer?(Co(function(){Vg(null,null,t,!1,function(){t._reactRootContainer=null,t[Si]=null})}),!0):!1};Yn.unstable_batchedUpdates=Mw;Yn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Mg(n))throw Error(W(200));if(t==null||t._reactInternals===void 0)throw Error(W(38));return Vg(t,e,n,!1,r)};Yn.version="18.2.0-next-9e3b772b8-20220608";function SP(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(SP)}catch(t){console.error(t)}}SP(),wA.exports=Yn;var EP=wA.exports;const $5=Q0(EP);var ME=EP;A_.createRoot=ME.createRoot,A_.hydrateRoot=ME.hydrateRoot;/**
 * @remix-run/router v1.15.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Qu(){return Qu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Qu.apply(this,arguments)}var Qi;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Qi||(Qi={}));const VE="popstate";function U5(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return bv("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:IP(i)}return j5(e,n,null,t)}function kt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function TP(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function B5(){return Math.random().toString(36).substr(2,8)}function FE(t,e){return{usr:t.state,key:t.key,idx:e}}function bv(t,e,n,r){return n===void 0&&(n=null),Qu({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?$l(e):e,{state:n,key:e&&e.key||r||B5()})}function IP(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function $l(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function j5(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Qi.Pop,l=null,c=u();c==null&&(c=0,o.replaceState(Qu({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function h(){a=Qi.Pop;let _=u(),y=_==null?null:_-c;c=_,l&&l({action:a,location:g.location,delta:y})}function d(_,y){a=Qi.Push;let m=bv(g.location,_,y);n&&n(m,_),c=u()+1;let v=FE(m,c),w=g.createHref(m);try{o.pushState(v,"",w)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;i.location.assign(w)}s&&l&&l({action:a,location:g.location,delta:1})}function f(_,y){a=Qi.Replace;let m=bv(g.location,_,y);n&&n(m,_),c=u();let v=FE(m,c),w=g.createHref(m);o.replaceState(v,"",w),s&&l&&l({action:a,location:g.location,delta:0})}function p(_){let y=i.location.origin!=="null"?i.location.origin:i.location.href,m=typeof _=="string"?_:IP(_);return m=m.replace(/ $/,"%20"),kt(y,"No window.location.(origin|href) available to create URL for href: "+m),new URL(m,y)}let g={get action(){return a},get location(){return t(i,o)},listen(_){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(VE,h),l=_,()=>{i.removeEventListener(VE,h),l=null}},createHref(_){return e(i,_)},createURL:p,encodeLocation(_){let y=p(_);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:d,replace:f,go(_){return o.go(_)}};return g}var $E;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})($E||($E={}));function z5(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?$l(e):e,i=AP(r.pathname||"/",n);if(i==null)return null;let s=xP(t);W5(s);let o=null;for(let a=0;o==null&&a<s.length;++a){let l=n4(i);o=Z5(s[a],l)}return o}function xP(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(kt(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=wo([r,l.relativePath]),u=n.concat(l);s.children&&s.children.length>0&&(kt(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),xP(s.children,e,u,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:X5(c,s.index),routesMeta:u})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of RP(s.path))i(s,o,l)}),e}function RP(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=RP(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function W5(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:J5(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const H5=/^:[\w-]+$/,q5=3,K5=2,G5=1,Q5=10,Y5=-2,UE=t=>t==="*";function X5(t,e){let n=t.split("/"),r=n.length;return n.some(UE)&&(r+=Y5),e&&(r+=K5),n.filter(i=>!UE(i)).reduce((i,s)=>i+(H5.test(s)?q5:s===""?G5:Q5),r)}function J5(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function Z5(t,e){let{routesMeta:n}=t,r={},i="/",s=[];for(let o=0;o<n.length;++o){let a=n[o],l=o===n.length-1,c=i==="/"?e:e.slice(i.length)||"/",u=e4({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},c);if(!u)return null;Object.assign(r,u.params);let h=a.route;s.push({params:r,pathname:wo([i,u.pathname]),pathnameBase:o4(wo([i,u.pathnameBase])),route:h}),u.pathnameBase!=="/"&&(i=wo([i,u.pathnameBase]))}return s}function e4(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=t4(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,u,h)=>{let{paramName:d,isOptional:f}=u;if(d==="*"){let g=a[h]||"";o=s.slice(0,s.length-g.length).replace(/(.)\/+$/,"$1")}const p=a[h];return f&&!p?c[d]=void 0:c[d]=(p||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function t4(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),TP(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function n4(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return TP(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function AP(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function r4(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?$l(t):t;return{pathname:n?n.startsWith("/")?n:i4(n,e):e,search:a4(r),hash:l4(i)}}function i4(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function My(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function s4(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function kP(t,e){let n=s4(t);return e?n.map((r,i)=>i===t.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function PP(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=$l(t):(i=Qu({},t),kt(!i.pathname||!i.pathname.includes("?"),My("?","pathname","search",i)),kt(!i.pathname||!i.pathname.includes("#"),My("#","pathname","hash",i)),kt(!i.search||!i.search.includes("#"),My("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let h=e.length-1;if(!r&&o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),h-=1;i.pathname=d.join("/")}a=h>=0?e[h]:"/"}let l=r4(i,a),c=o&&o!=="/"&&o.endsWith("/"),u=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const wo=t=>t.join("/").replace(/\/\/+/g,"/"),o4=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),a4=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,l4=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function c4(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const CP=["post","put","patch","delete"];new Set(CP);const u4=["get",...CP];new Set(u4);/**
 * React Router v6.22.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Yu(){return Yu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Yu.apply(this,arguments)}const Ww=U.createContext(null),h4=U.createContext(null),Hh=U.createContext(null),Fg=U.createContext(null),Ns=U.createContext({outlet:null,matches:[],isDataRoute:!1}),NP=U.createContext(null);function qh(){return U.useContext(Fg)!=null}function Hw(){return qh()||kt(!1),U.useContext(Fg).location}function DP(t){U.useContext(Hh).static||U.useLayoutEffect(t)}function d4(){let{isDataRoute:t}=U.useContext(Ns);return t?R4():f4()}function f4(){qh()||kt(!1);let t=U.useContext(Ww),{basename:e,future:n,navigator:r}=U.useContext(Hh),{matches:i}=U.useContext(Ns),{pathname:s}=Hw(),o=JSON.stringify(kP(i,n.v7_relativeSplatPath)),a=U.useRef(!1);return DP(()=>{a.current=!0}),U.useCallback(function(c,u){if(u===void 0&&(u={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let h=PP(c,JSON.parse(o),s,u.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:wo([e,h.pathname])),(u.replace?r.replace:r.push)(h,u.state,u)},[e,r,o,s,t])}const p4=U.createContext(null);function g4(t){let e=U.useContext(Ns).outlet;return e&&U.createElement(p4.Provider,{value:t},e)}function m4(t,e){return y4(t,e)}function y4(t,e,n,r){qh()||kt(!1);let{navigator:i}=U.useContext(Hh),{matches:s}=U.useContext(Ns),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=Hw(),u;if(e){var h;let _=typeof e=="string"?$l(e):e;l==="/"||(h=_.pathname)!=null&&h.startsWith(l)||kt(!1),u=_}else u=c;let d=u.pathname||"/",f=d;if(l!=="/"){let _=l.replace(/^\//,"").split("/");f="/"+d.replace(/^\//,"").split("/").slice(_.length).join("/")}let p=z5(t,{pathname:f}),g=S4(p&&p.map(_=>Object.assign({},_,{params:Object.assign({},a,_.params),pathname:wo([l,i.encodeLocation?i.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?l:wo([l,i.encodeLocation?i.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),s,n,r);return e&&g?U.createElement(Fg.Provider,{value:{location:Yu({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Qi.Pop}},g):g}function _4(){let t=x4(),e=c4(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return U.createElement(U.Fragment,null,U.createElement("h2",null,"Unexpected Application Error!"),U.createElement("h3",{style:{fontStyle:"italic"}},e),n?U.createElement("pre",{style:i},n):null,null)}const v4=U.createElement(_4,null);class w4 extends U.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?U.createElement(Ns.Provider,{value:this.props.routeContext},U.createElement(NP.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function b4(t){let{routeContext:e,match:n,children:r}=t,i=U.useContext(Ww);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),U.createElement(Ns.Provider,{value:e},r)}function S4(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if((s=n)!=null&&s.errors)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let u=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id]));u>=0||kt(!1),o=o.slice(0,Math.min(o.length,u+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let h=o[u];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=u),h.route.id){let{loaderData:d,errors:f}=n,p=h.route.loader&&d[h.route.id]===void 0&&(!f||f[h.route.id]===void 0);if(h.route.lazy||p){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((u,h,d)=>{let f,p=!1,g=null,_=null;n&&(f=a&&h.route.id?a[h.route.id]:void 0,g=h.route.errorElement||v4,l&&(c<0&&d===0?(A4("route-fallback",!1),p=!0,_=null):c===d&&(p=!0,_=h.route.hydrateFallbackElement||null)));let y=e.concat(o.slice(0,d+1)),m=()=>{let v;return f?v=g:p?v=_:h.route.Component?v=U.createElement(h.route.Component,null):h.route.element?v=h.route.element:v=u,U.createElement(b4,{match:h,routeContext:{outlet:u,matches:y,isDataRoute:n!=null},children:v})};return n&&(h.route.ErrorBoundary||h.route.errorElement||d===0)?U.createElement(w4,{location:n.location,revalidation:n.revalidation,component:g,error:f,children:m(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):m()},null)}var OP=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(OP||{}),Np=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Np||{});function E4(t){let e=U.useContext(Ww);return e||kt(!1),e}function T4(t){let e=U.useContext(h4);return e||kt(!1),e}function I4(t){let e=U.useContext(Ns);return e||kt(!1),e}function LP(t){let e=I4(),n=e.matches[e.matches.length-1];return n.route.id||kt(!1),n.route.id}function x4(){var t;let e=U.useContext(NP),n=T4(Np.UseRouteError),r=LP(Np.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function R4(){let{router:t}=E4(OP.UseNavigateStable),e=LP(Np.UseNavigateStable),n=U.useRef(!1);return DP(()=>{n.current=!0}),U.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Yu({fromRouteId:e},s)))},[t,e])}const BE={};function A4(t,e,n){!e&&!BE[t]&&(BE[t]=!0)}function du(t){let{to:e,replace:n,state:r,relative:i}=t;qh()||kt(!1);let{future:s,static:o}=U.useContext(Hh),{matches:a}=U.useContext(Ns),{pathname:l}=Hw(),c=d4(),u=PP(e,kP(a,s.v7_relativeSplatPath),l,i==="path"),h=JSON.stringify(u);return U.useEffect(()=>c(JSON.parse(h),{replace:n,state:r,relative:i}),[c,h,i,n,r]),null}function MP(t){return g4(t.context)}function $n(t){kt(!1)}function k4(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Qi.Pop,navigator:s,static:o=!1,future:a}=t;qh()&&kt(!1);let l=e.replace(/^\/*/,"/"),c=U.useMemo(()=>({basename:l,navigator:s,static:o,future:Yu({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=$l(r));let{pathname:u="/",search:h="",hash:d="",state:f=null,key:p="default"}=r,g=U.useMemo(()=>{let _=AP(u,l);return _==null?null:{location:{pathname:_,search:h,hash:d,state:f,key:p},navigationType:i}},[l,u,h,d,f,p,i]);return g==null?null:U.createElement(Hh.Provider,{value:c},U.createElement(Fg.Provider,{children:n,value:g}))}function P4(t){let{children:e,location:n}=t;return m4(Sv(e),n)}new Promise(()=>{});function Sv(t,e){e===void 0&&(e=[]);let n=[];return U.Children.forEach(t,(r,i)=>{if(!U.isValidElement(r))return;let s=[...e,i];if(r.type===U.Fragment){n.push.apply(n,Sv(r.props.children,s));return}r.type!==$n&&kt(!1),!r.props.index||!r.props.children||kt(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Sv(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.22.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const C4="6";try{window.__reactRouterVersion=C4}catch{}const N4="startTransition",jE=kV[N4];function D4(t){let{basename:e,children:n,future:r,window:i}=t,s=U.useRef();s.current==null&&(s.current=U5({window:i,v5Compat:!0}));let o=s.current,[a,l]=U.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},u=U.useCallback(h=>{c&&jE?jE(()=>l(h)):l(h)},[l,c]);return U.useLayoutEffect(()=>o.listen(u),[o,u]),U.createElement(k4,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}var zE;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(zE||(zE={}));var WE;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(WE||(WE={}));var VP={};function O4(t){const e=new Error(t);if(e.stack===void 0)try{throw e}catch{}return e}var L4=O4,Se=L4;function M4(t){return!!t&&typeof t.then=="function"}var Qe=M4;function V4(t,e){if(t!=null)return t;throw Se(e??"Got unexpected null or undefined")}var rt=V4;function ye(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class $g{getValue(){throw Se("BaseLoadable")}toPromise(){throw Se("BaseLoadable")}valueMaybe(){throw Se("BaseLoadable")}valueOrThrow(){throw Se(`Loadable expected value, but in "${this.state}" state`)}promiseMaybe(){throw Se("BaseLoadable")}promiseOrThrow(){throw Se(`Loadable expected promise, but in "${this.state}" state`)}errorMaybe(){throw Se("BaseLoadable")}errorOrThrow(){throw Se(`Loadable expected error, but in "${this.state}" state`)}is(e){return e.state===this.state&&e.contents===this.contents}map(e){throw Se("BaseLoadable")}}class F4 extends $g{constructor(e){super(),ye(this,"state","hasValue"),ye(this,"contents",void 0),this.contents=e}getValue(){return this.contents}toPromise(){return Promise.resolve(this.contents)}valueMaybe(){return this.contents}valueOrThrow(){return this.contents}promiseMaybe(){}errorMaybe(){}map(e){try{const n=e(this.contents);return Qe(n)?No(n):dl(n)?n:Kh(n)}catch(n){return Qe(n)?No(n.next(()=>this.map(e))):Ug(n)}}}class $4 extends $g{constructor(e){super(),ye(this,"state","hasError"),ye(this,"contents",void 0),this.contents=e}getValue(){throw this.contents}toPromise(){return Promise.reject(this.contents)}valueMaybe(){}promiseMaybe(){}errorMaybe(){return this.contents}errorOrThrow(){return this.contents}map(e){return this}}class FP extends $g{constructor(e){super(),ye(this,"state","loading"),ye(this,"contents",void 0),this.contents=e}getValue(){throw this.contents}toPromise(){return this.contents}valueMaybe(){}promiseMaybe(){return this.contents}promiseOrThrow(){return this.contents}errorMaybe(){}map(e){return No(this.contents.then(n=>{const r=e(n);if(dl(r)){const i=r;switch(i.state){case"hasValue":return i.contents;case"hasError":throw i.contents;case"loading":return i.contents}}return r}).catch(n=>{if(Qe(n))return n.then(()=>this.map(e).contents);throw n}))}}function Kh(t){return Object.freeze(new F4(t))}function Ug(t){return Object.freeze(new $4(t))}function No(t){return Object.freeze(new FP(t))}function $P(){return Object.freeze(new FP(new Promise(()=>{})))}function U4(t){return t.every(e=>e.state==="hasValue")?Kh(t.map(e=>e.contents)):t.some(e=>e.state==="hasError")?Ug(rt(t.find(e=>e.state==="hasError"),"Invalid loadable passed to loadableAll").contents):No(Promise.all(t.map(e=>e.contents)))}function UP(t){const n=(Array.isArray(t)?t:Object.getOwnPropertyNames(t).map(i=>t[i])).map(i=>dl(i)?i:Qe(i)?No(i):Kh(i)),r=U4(n);return Array.isArray(t)?r:r.map(i=>Object.getOwnPropertyNames(t).reduce((s,o,a)=>({...s,[o]:i[a]}),{}))}function dl(t){return t instanceof $g}const B4={of:t=>Qe(t)?No(t):dl(t)?t:Kh(t),error:t=>Ug(t),loading:()=>$P(),all:UP,isLoadable:dl};var Jo={loadableWithValue:Kh,loadableWithError:Ug,loadableWithPromise:No,loadableLoading:$P,loadableAll:UP,isLoadable:dl,RecoilLoadable:B4},j4=Jo.loadableWithValue,z4=Jo.loadableWithError,W4=Jo.loadableWithPromise,H4=Jo.loadableLoading,q4=Jo.loadableAll,K4=Jo.isLoadable,G4=Jo.RecoilLoadable,Gh=Object.freeze({__proto__:null,loadableWithValue:j4,loadableWithError:z4,loadableWithPromise:W4,loadableLoading:H4,loadableAll:q4,isLoadable:K4,RecoilLoadable:G4});const Ev={RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED:!0,RECOIL_GKS_ENABLED:new Set(["recoil_hamt_2020","recoil_sync_external_store","recoil_suppress_rerender_in_callback","recoil_memory_managament_2020"])};function Q4(t,e){var n,r;const i=(n=VP[t])===null||n===void 0||(r=n.toLowerCase())===null||r===void 0?void 0:r.trim();if(i==null||i==="")return;if(!["true","false"].includes(i))throw Se(`process.env.${t} value must be 'true', 'false', or empty: ${i}`);e(i==="true")}function Y4(t,e){var n;const r=(n=VP[t])===null||n===void 0?void 0:n.trim();r==null||r===""||e(r.split(/\s*,\s*|\s+/))}function X4(){var t;typeof process>"u"||((t=process)===null||t===void 0?void 0:t.env)!=null&&(Q4("RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED",e=>{Ev.RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED=e}),Y4("RECOIL_GKS_ENABLED",e=>{e.forEach(n=>{Ev.RECOIL_GKS_ENABLED.add(n)})}))}X4();var Ul=Ev;function Bg(t){return Ul.RECOIL_GKS_ENABLED.has(t)}Bg.setPass=t=>{Ul.RECOIL_GKS_ENABLED.add(t)};Bg.setFail=t=>{Ul.RECOIL_GKS_ENABLED.delete(t)};Bg.clear=()=>{Ul.RECOIL_GKS_ENABLED.clear()};var Be=Bg;function J4(t,e,{error:n}={}){return null}var Z4=J4,qw=Z4,Vy,Fy,$y;const e3=(Vy=We.createMutableSource)!==null&&Vy!==void 0?Vy:We.unstable_createMutableSource,BP=(Fy=We.useMutableSource)!==null&&Fy!==void 0?Fy:We.unstable_useMutableSource,jP=($y=We.useSyncExternalStore)!==null&&$y!==void 0?$y:We.unstable_useSyncExternalStore;function t3(){var t;const{ReactCurrentDispatcher:e,ReactCurrentOwner:n}=We.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;return((t=e==null?void 0:e.current)!==null&&t!==void 0?t:n.currentDispatcher).useSyncExternalStore!=null}function n3(){return Be("recoil_transition_support")?{mode:"TRANSITION_SUPPORT",early:!0,concurrent:!0}:Be("recoil_sync_external_store")&&jP!=null?{mode:"SYNC_EXTERNAL_STORE",early:!0,concurrent:!1}:Be("recoil_mutable_source")&&BP!=null&&typeof window<"u"&&!window.$disableRecoilValueMutableSource_TEMP_HACK_DO_NOT_USE?Be("recoil_suppress_rerender_in_callback")?{mode:"MUTABLE_SOURCE",early:!0,concurrent:!0}:{mode:"MUTABLE_SOURCE",early:!1,concurrent:!1}:Be("recoil_suppress_rerender_in_callback")?{mode:"LEGACY",early:!0,concurrent:!1}:{mode:"LEGACY",early:!1,concurrent:!1}}function r3(){return!1}var Qh={createMutableSource:e3,useMutableSource:BP,useSyncExternalStore:jP,currentRendererSupportsUseSyncExternalStore:t3,reactMode:n3,isFastRefreshEnabled:r3};class Kw{constructor(e){ye(this,"key",void 0),this.key=e}toJSON(){return{key:this.key}}}class zP extends Kw{}class WP extends Kw{}function i3(t){return t instanceof zP||t instanceof WP}var jg={AbstractRecoilValue:Kw,RecoilState:zP,RecoilValueReadOnly:WP,isRecoilValue:i3},s3=jg.AbstractRecoilValue,o3=jg.RecoilState,a3=jg.RecoilValueReadOnly,l3=jg.isRecoilValue,fl=Object.freeze({__proto__:null,AbstractRecoilValue:s3,RecoilState:o3,RecoilValueReadOnly:a3,isRecoilValue:l3});function c3(t,e){return function*(){let n=0;for(const r of t)yield e(r,n++)}()}var zg=c3;class HP{}const u3=new HP,Do=new Map,Gw=new Map;function h3(t){return zg(t,e=>rt(Gw.get(e)))}function d3(t){if(Do.has(t)){const e=`Duplicate atom key "${t}". This is a FATAL ERROR in
      production. But it is safe to ignore this warning if it occurred because of
      hot module replacement.`;console.warn(e)}}function f3(t){Ul.RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED&&d3(t.key),Do.set(t.key,t);const e=t.set==null?new fl.RecoilValueReadOnly(t.key):new fl.RecoilState(t.key);return Gw.set(t.key,e),e}class qP extends Error{}function p3(t){const e=Do.get(t);if(e==null)throw new qP(`Missing definition for RecoilValue: "${t}""`);return e}function g3(t){return Do.get(t)}const Dp=new Map;function m3(t){var e;if(!Be("recoil_memory_managament_2020"))return;const n=Do.get(t);if(n!=null&&(e=n.shouldDeleteConfigOnRelease)!==null&&e!==void 0&&e.call(n)){var r;Do.delete(t),(r=KP(t))===null||r===void 0||r(),Dp.delete(t)}}function y3(t,e){Be("recoil_memory_managament_2020")&&(e===void 0?Dp.delete(t):Dp.set(t,e))}function KP(t){return Dp.get(t)}var Vn={nodes:Do,recoilValues:Gw,registerNode:f3,getNode:p3,getNodeMaybe:g3,deleteNodeConfigIfPossible:m3,setConfigDeletionHandler:y3,getConfigDeletionHandler:KP,recoilValuesForKeys:h3,NodeMissingError:qP,DefaultValue:HP,DEFAULT_VALUE:u3};function _3(t,e){e()}var v3={enqueueExecution:_3};function w3(t,e){return e={exports:{}},t(e,e.exports),e.exports}var b3=w3(function(t){var e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},n={},r=5,i=Math.pow(2,r),s=i-1,o=i/2,a=i/4,l={},c=function(x){return function(){return x}},u=n.hash=function(P){var x=typeof P>"u"?"undefined":e(P);if(x==="number")return P;x!=="string"&&(P+="");for(var z=0,J=0,Z=P.length;J<Z;++J){var ie=P.charCodeAt(J);z=(z<<5)-z+ie|0}return z},h=function(x){return x-=x>>1&1431655765,x=(x&858993459)+(x>>2&858993459),x=x+(x>>4)&252645135,x+=x>>8,x+=x>>16,x&127},d=function(x,z){return z>>>x&s},f=function(x){return 1<<x},p=function(x,z){return h(x&z-1)},g=function(x,z,J,Z){var ie=Z;if(!x){var pe=Z.length;ie=new Array(pe);for(var de=0;de<pe;++de)ie[de]=Z[de]}return ie[z]=J,ie},_=function(x,z,J){var Z=J.length-1,ie=0,pe=0,de=J;if(x)ie=pe=z;else for(de=new Array(Z);ie<z;)de[pe++]=J[ie++];for(++ie;ie<=Z;)de[pe++]=J[ie++];return x&&(de.length=Z),de},y=function(x,z,J,Z){var ie=Z.length;if(x){for(var pe=ie;pe>=z;)Z[pe--]=Z[pe];return Z[z]=J,Z}for(var de=0,fe=0,Ee=new Array(ie+1);de<z;)Ee[fe++]=Z[de++];for(Ee[z]=J;de<ie;)Ee[++fe]=Z[de++];return Ee},m=1,v=2,w=3,S=4,E={__hamt_isEmpty:!0},T=function(x){return x===E||x&&x.__hamt_isEmpty},A=function(x,z,J,Z){return{type:m,edit:x,hash:z,key:J,value:Z,_modify:D}},$=function(x,z,J){return{type:v,edit:x,hash:z,children:J,_modify:B}},L=function(x,z,J){return{type:w,edit:x,mask:z,children:J,_modify:O}},ee=function(x,z,J){return{type:S,edit:x,size:z,children:J,_modify:re}},se=function(x){return x===E||x.type===m||x.type===v},he=function(x,z,J,Z,ie){for(var pe=[],de=Z,fe=0,Ee=0;de;++Ee)de&1&&(pe[Ee]=ie[fe++]),de>>>=1;return pe[z]=J,ee(x,fe+1,pe)},be=function(x,z,J,Z){for(var ie=new Array(z-1),pe=0,de=0,fe=0,Ee=Z.length;fe<Ee;++fe)if(fe!==J){var tt=Z[fe];tt&&!T(tt)&&(ie[pe++]=tt,de|=1<<fe)}return L(x,de,ie)},I=function P(x,z,J,Z,ie,pe){if(J===ie)return $(x,J,[pe,Z]);var de=d(z,J),fe=d(z,ie);return L(x,f(de)|f(fe),de===fe?[P(x,z+r,J,Z,ie,pe)]:de<fe?[Z,pe]:[pe,Z])},N=function(x,z,J,Z,ie,pe,de,fe){for(var Ee=ie.length,tt=0;tt<Ee;++tt){var En=ie[tt];if(J(de,En.key)){var Lt=En.value,er=pe(Lt);return er===Lt?ie:er===l?(--fe.value,_(x,tt,ie)):g(x,tt,A(z,Z,de,er),ie)}}var fr=pe();return fr===l?ie:(++fe.value,g(x,Ee,A(z,Z,de,fr),ie))},G=function(x,z){return x===z.edit},D=function(x,z,J,Z,ie,pe,de){if(z(pe,this.key)){var fe=Z(this.value);return fe===this.value?this:fe===l?(--de.value,E):G(x,this)?(this.value=fe,this):A(x,ie,pe,fe)}var Ee=Z();return Ee===l?this:(++de.value,I(x,J,this.hash,this,ie,A(x,ie,pe,Ee)))},B=function(x,z,J,Z,ie,pe,de){if(ie===this.hash){var fe=G(x,this),Ee=N(fe,x,z,this.hash,this.children,Z,pe,de);return Ee===this.children?this:Ee.length>1?$(x,this.hash,Ee):Ee[0]}var tt=Z();return tt===l?this:(++de.value,I(x,J,this.hash,this,ie,A(x,ie,pe,tt)))},O=function(x,z,J,Z,ie,pe,de){var fe=this.mask,Ee=this.children,tt=d(J,ie),En=f(tt),Lt=p(fe,En),er=fe&En,fr=er?Ee[Lt]:E,ca=fr._modify(x,z,J+r,Z,ie,pe,de);if(fr===ca)return this;var Cd=G(x,this),ic=fe,sc=void 0;if(er&&T(ca)){if(ic&=~En,!ic)return E;if(Ee.length<=2&&se(Ee[Lt^1]))return Ee[Lt^1];sc=_(Cd,Lt,Ee)}else if(!er&&!T(ca)){if(Ee.length>=o)return he(x,tt,ca,fe,Ee);ic|=En,sc=y(Cd,Lt,ca,Ee)}else sc=g(Cd,Lt,ca,Ee);return Cd?(this.mask=ic,this.children=sc,this):L(x,ic,sc)},re=function(x,z,J,Z,ie,pe,de){var fe=this.size,Ee=this.children,tt=d(J,ie),En=Ee[tt],Lt=(En||E)._modify(x,z,J+r,Z,ie,pe,de);if(En===Lt)return this;var er=G(x,this),fr=void 0;if(T(En)&&!T(Lt))++fe,fr=g(er,tt,Lt,Ee);else if(!T(En)&&T(Lt)){if(--fe,fe<=a)return be(x,fe,tt,Ee);fr=g(er,tt,E,Ee)}else fr=g(er,tt,Lt,Ee);return er?(this.size=fe,this.children=fr,this):ee(x,fe,fr)};E._modify=function(P,x,z,J,Z,ie,pe){var de=J();return de===l?E:(++pe.value,A(P,Z,ie,de))};function R(P,x,z,J,Z){this._editable=P,this._edit=x,this._config=z,this._root=J,this._size=Z}R.prototype.setTree=function(P,x){return this._editable?(this._root=P,this._size=x,this):P===this._root?this:new R(this._editable,this._edit,this._config,P,x)};var V=n.tryGetHash=function(P,x,z,J){for(var Z=J._root,ie=0,pe=J._config.keyEq;;)switch(Z.type){case m:return pe(z,Z.key)?Z.value:P;case v:{if(x===Z.hash)for(var de=Z.children,fe=0,Ee=de.length;fe<Ee;++fe){var tt=de[fe];if(pe(z,tt.key))return tt.value}return P}case w:{var En=d(ie,x),Lt=f(En);if(Z.mask&Lt){Z=Z.children[p(Z.mask,Lt)],ie+=r;break}return P}case S:{if(Z=Z.children[d(ie,x)],Z){ie+=r;break}return P}default:return P}};R.prototype.tryGetHash=function(P,x,z){return V(P,x,z,this)};var j=n.tryGet=function(P,x,z){return V(P,z._config.hash(x),x,z)};R.prototype.tryGet=function(P,x){return j(P,x,this)};var ce=n.getHash=function(P,x,z){return V(void 0,P,x,z)};R.prototype.getHash=function(P,x){return ce(P,x,this)},n.get=function(P,x){return V(void 0,x._config.hash(P),P,x)},R.prototype.get=function(P,x){return j(x,P,this)};var Y=n.has=function(P,x,z){return V(l,P,x,z)!==l};R.prototype.hasHash=function(P,x){return Y(P,x,this)};var we=n.has=function(P,x){return Y(x._config.hash(P),P,x)};R.prototype.has=function(P){return we(P,this)};var Te=function(x,z){return x===z};n.make=function(P){return new R(0,0,{keyEq:P&&P.keyEq||Te,hash:P&&P.hash||u},E,0)},n.empty=n.make();var ue=n.isEmpty=function(P){return P&&!!T(P._root)};R.prototype.isEmpty=function(){return ue(this)};var et=n.modifyHash=function(P,x,z,J){var Z={value:J._size},ie=J._root._modify(J._editable?J._edit:NaN,J._config.keyEq,0,P,x,z,Z);return J.setTree(ie,Z.value)};R.prototype.modifyHash=function(P,x,z){return et(z,P,x,this)};var Pt=n.modify=function(P,x,z){return et(P,z._config.hash(x),x,z)};R.prototype.modify=function(P,x){return Pt(x,P,this)};var Fe=n.setHash=function(P,x,z,J){return et(c(z),P,x,J)};R.prototype.setHash=function(P,x,z){return Fe(P,x,z,this)};var lt=n.set=function(P,x,z){return Fe(z._config.hash(P),P,x,z)};R.prototype.set=function(P,x){return lt(P,x,this)};var dr=c(l),Ws=n.removeHash=function(P,x,z){return et(dr,P,x,z)};R.prototype.removeHash=R.prototype.deleteHash=function(P,x){return Ws(P,x,this)};var Zn=n.remove=function(P,x){return Ws(x._config.hash(P),P,x)};R.prototype.remove=R.prototype.delete=function(P){return Zn(P,this)};var Fn=n.beginMutation=function(P){return new R(P._editable+1,P._edit+1,P._config,P._root,P._size)};R.prototype.beginMutation=function(){return Fn(this)};var TS=n.endMutation=function(P){return P._editable=P._editable&&P._editable-1,P};R.prototype.endMutation=function(){return TS(this)};var nV=n.mutate=function(P,x){var z=Fn(x);return P(z),TS(z)};R.prototype.mutate=function(P){return nV(P,this)};var ay=function(x){return x&&IS(x[0],x[1],x[2],x[3],x[4])},IS=function(x,z,J,Z,ie){for(;J<x;){var pe=z[J++];if(pe&&!T(pe))return xS(pe,Z,[x,z,J,Z,ie])}return ay(ie)},xS=function(x,z,J){switch(x.type){case m:return{value:z(x),rest:J};case v:case S:case w:var Z=x.children;return IS(Z.length,Z,0,z,J);default:return ay(J)}},rV={done:!0};function ly(P){this.v=P}ly.prototype.next=function(){if(!this.v)return rV;var P=this.v;return this.v=ay(P.rest),P},ly.prototype[Symbol.iterator]=function(){return this};var cy=function(x,z){return new ly(xS(x._root,z))},iV=function(x){return[x.key,x.value]},sV=n.entries=function(P){return cy(P,iV)};R.prototype.entries=R.prototype[Symbol.iterator]=function(){return sV(this)};var oV=function(x){return x.key},aV=n.keys=function(P){return cy(P,oV)};R.prototype.keys=function(){return aV(this)};var lV=function(x){return x.value},cV=n.values=R.prototype.values=function(P){return cy(P,lV)};R.prototype.values=function(){return cV(this)};var RS=n.fold=function(P,x,z){var J=z._root;if(J.type===m)return P(x,J.value,J.key);for(var Z=[J.children],ie=void 0;ie=Z.pop();)for(var pe=0,de=ie.length;pe<de;){var fe=ie[pe++];fe&&fe.type&&(fe.type===m?x=P(x,fe.value,fe.key):Z.push(fe.children))}return x};R.prototype.fold=function(P,x){return RS(P,x,this)};var uV=n.forEach=function(P,x){return RS(function(z,J,Z){return P(J,Z,x)},null,x)};R.prototype.forEach=function(P){return uV(P,this)};var hV=n.count=function(P){return P._size};R.prototype.count=function(){return hV(this)},Object.defineProperty(R.prototype,"size",{get:R.prototype.count}),t.exports?t.exports=n:(void 0).hamt=n});class S3{constructor(e){ye(this,"_map",void 0),this._map=new Map(e==null?void 0:e.entries())}keys(){return this._map.keys()}entries(){return this._map.entries()}get(e){return this._map.get(e)}has(e){return this._map.has(e)}set(e,n){return this._map.set(e,n),this}delete(e){return this._map.delete(e),this}clone(){return Yw(this)}toMap(){return new Map(this._map)}}class Qw{constructor(e){if(ye(this,"_hamt",b3.empty.beginMutation()),e instanceof Qw){const n=e._hamt.endMutation();e._hamt=n.beginMutation(),this._hamt=n.beginMutation()}else if(e)for(const[n,r]of e.entries())this._hamt.set(n,r)}keys(){return this._hamt.keys()}entries(){return this._hamt.entries()}get(e){return this._hamt.get(e)}has(e){return this._hamt.has(e)}set(e,n){return this._hamt.set(e,n),this}delete(e){return this._hamt.delete(e),this}clone(){return Yw(this)}toMap(){return new Map(this._hamt)}}function Yw(t){return Be("recoil_hamt_2020")?new Qw(t):new S3(t)}var E3={persistentMap:Yw},T3=E3.persistentMap,I3=Object.freeze({__proto__:null,persistentMap:T3});function x3(t,...e){const n=new Set;e:for(const r of t){for(const i of e)if(i.has(r))continue e;n.add(r)}return n}var fu=x3;function R3(t,e){const n=new Map;return t.forEach((r,i)=>{n.set(i,e(r,i))}),n}var Op=R3;function A3(){return{nodeDeps:new Map,nodeToNodeSubscriptions:new Map}}function k3(t){return{nodeDeps:Op(t.nodeDeps,e=>new Set(e)),nodeToNodeSubscriptions:Op(t.nodeToNodeSubscriptions,e=>new Set(e))}}function Uy(t,e,n,r){const{nodeDeps:i,nodeToNodeSubscriptions:s}=n,o=i.get(t);if(o&&r&&o!==r.nodeDeps.get(t))return;i.set(t,e);const a=o==null?e:fu(e,o);for(const l of a)s.has(l)||s.set(l,new Set),rt(s.get(l)).add(t);if(o){const l=fu(o,e);for(const c of l){if(!s.has(c))return;const u=rt(s.get(c));u.delete(t),u.size===0&&s.delete(c)}}}function P3(t,e,n,r){var i,s,o,a;const l=n.getState();r===l.currentTree.version||r===((i=l.nextTree)===null||i===void 0?void 0:i.version)||((s=l.previousTree)===null||s===void 0||s.version);const c=n.getGraph(r);if(Uy(t,e,c),r===((o=l.previousTree)===null||o===void 0?void 0:o.version)){const h=n.getGraph(l.currentTree.version);Uy(t,e,h,c)}if(r===((a=l.previousTree)===null||a===void 0?void 0:a.version)||r===l.currentTree.version){var u;const h=(u=l.nextTree)===null||u===void 0?void 0:u.version;if(h!==void 0){const d=n.getGraph(h);Uy(t,e,d,c)}}}var Yh={cloneGraph:k3,graph:A3,saveDepsToStore:P3};let C3=0;const N3=()=>C3++;let D3=0;const O3=()=>D3++;let L3=0;const M3=()=>L3++;var Wg={getNextTreeStateVersion:N3,getNextStoreID:O3,getNextComponentID:M3};const{persistentMap:HE}=I3,{graph:V3}=Yh,{getNextTreeStateVersion:GP}=Wg;function QP(){const t=GP();return{version:t,stateID:t,transactionMetadata:{},dirtyAtoms:new Set,atomValues:HE(),nonvalidatedAtoms:HE()}}function F3(){const t=QP();return{currentTree:t,nextTree:null,previousTree:null,commitDepth:0,knownAtoms:new Set,knownSelectors:new Set,transactionSubscriptions:new Map,nodeTransactionSubscriptions:new Map,nodeToComponentSubscriptions:new Map,queuedComponentCallbacks_DEPRECATED:[],suspendedComponentResolvers:new Set,graphsByVersion:new Map().set(t.version,V3()),retention:{referenceCounts:new Map,nodesRetainedByZone:new Map,retainablesToCheckForRelease:new Set},nodeCleanupFunctions:new Map}}var YP={makeEmptyTreeState:QP,makeEmptyStoreState:F3,getNextTreeStateVersion:GP};class XP{}function $3(){return new XP}var Hg={RetentionZone:XP,retentionZone:$3};function U3(t,e){const n=new Set(t);return n.add(e),n}function B3(t,e){const n=new Set(t);return n.delete(e),n}function j3(t,e,n){const r=new Map(t);return r.set(e,n),r}function z3(t,e,n){const r=new Map(t);return r.set(e,n(r.get(e))),r}function W3(t,e){const n=new Map(t);return n.delete(e),n}function H3(t,e){const n=new Map(t);return e.forEach(r=>n.delete(r)),n}var JP={setByAddingToSet:U3,setByDeletingFromSet:B3,mapBySettingInMap:j3,mapByUpdatingInMap:z3,mapByDeletingFromMap:W3,mapByDeletingMultipleFromMap:H3};function*q3(t,e){let n=0;for(const r of t)e(r,n++)&&(yield r)}var Xw=q3;function K3(t,e){return new Proxy(t,{get:(r,i)=>(!(i in r)&&i in e&&(r[i]=e[i]()),r[i]),ownKeys:r=>Object.keys(r)})}var ZP=K3;const{getNode:Xh,getNodeMaybe:G3,recoilValuesForKeys:qE}=Vn,{RetentionZone:KE}=Hg,{setByAddingToSet:Q3}=JP,Y3=Object.freeze(new Set);class X3 extends Error{}function J3(t,e,n){if(!Be("recoil_memory_managament_2020"))return()=>{};const{nodesRetainedByZone:r}=t.getState().retention;function i(s){let o=r.get(s);o||r.set(s,o=new Set),o.add(e)}if(n instanceof KE)i(n);else if(Array.isArray(n))for(const s of n)i(s);return()=>{if(!Be("recoil_memory_managament_2020"))return;const{retention:s}=t.getState();function o(a){const l=s.nodesRetainedByZone.get(a);l==null||l.delete(e),l&&l.size===0&&s.nodesRetainedByZone.delete(a)}if(n instanceof KE)o(n);else if(Array.isArray(n))for(const a of n)o(a)}}function Jw(t,e,n,r){const i=t.getState();if(i.nodeCleanupFunctions.has(n))return;const s=Xh(n),o=J3(t,n,s.retainedBy),a=s.init(t,e,r);i.nodeCleanupFunctions.set(n,()=>{a(),o()})}function Z3(t,e,n){Jw(t,t.getState().currentTree,e,n)}function e$(t,e){var n;const r=t.getState();(n=r.nodeCleanupFunctions.get(e))===null||n===void 0||n(),r.nodeCleanupFunctions.delete(e)}function t$(t,e,n){return Jw(t,e,n,"get"),Xh(n).get(t,e)}function eC(t,e,n){return Xh(n).peek(t,e)}function n$(t,e,n){var r;const i=G3(e);return i==null||(r=i.invalidate)===null||r===void 0||r.call(i,t),{...t,atomValues:t.atomValues.clone().delete(e),nonvalidatedAtoms:t.nonvalidatedAtoms.clone().set(e,n),dirtyAtoms:Q3(t.dirtyAtoms,e)}}function r$(t,e,n,r){const i=Xh(n);if(i.set==null)throw new X3(`Attempt to set read-only RecoilValue: ${n}`);const s=i.set;return Jw(t,e,n,"set"),s(t,e,r)}function i$(t,e,n){const r=t.getState(),i=t.getGraph(e.version),s=Xh(n).nodeType;return ZP({type:s},{loadable:()=>eC(t,e,n),isActive:()=>r.knownAtoms.has(n)||r.knownSelectors.has(n),isSet:()=>s==="selector"?!1:e.atomValues.has(n),isModified:()=>e.dirtyAtoms.has(n),deps:()=>{var o;return qE((o=i.nodeDeps.get(n))!==null&&o!==void 0?o:[])},subscribers:()=>{var o,a;return{nodes:qE(Xw(tC(t,e,new Set([n])),l=>l!==n)),components:zg((o=(a=r.nodeToComponentSubscriptions.get(n))===null||a===void 0?void 0:a.values())!==null&&o!==void 0?o:[],([l])=>({name:l}))}}})}function tC(t,e,n){const r=new Set,i=Array.from(n),s=t.getGraph(e.version);for(let a=i.pop();a;a=i.pop()){var o;r.add(a);const l=(o=s.nodeToNodeSubscriptions.get(a))!==null&&o!==void 0?o:Y3;for(const c of l)r.has(c)||i.push(c)}return r}var Ds={getNodeLoadable:t$,peekNodeLoadable:eC,setNodeValue:r$,initializeNode:Z3,cleanUpNode:e$,setUnvalidatedAtomValue_DEPRECATED:n$,peekNodeInfo:i$,getDownstreamNodes:tC};let nC=null;function s$(t){nC=t}function o$(){var t;(t=nC)===null||t===void 0||t()}var rC={setInvalidateMemoizedSnapshot:s$,invalidateMemoizedSnapshot:o$};const{getDownstreamNodes:a$,getNodeLoadable:iC,setNodeValue:l$}=Ds,{getNextComponentID:c$}=Wg,{getNode:u$,getNodeMaybe:sC}=Vn,{DefaultValue:Zw}=Vn,{reactMode:h$}=Qh,{AbstractRecoilValue:d$,RecoilState:f$,RecoilValueReadOnly:p$,isRecoilValue:g$}=fl,{invalidateMemoizedSnapshot:m$}=rC;function y$(t,{key:e},n=t.getState().currentTree){var r,i;const s=t.getState();n.version===s.currentTree.version||n.version===((r=s.nextTree)===null||r===void 0?void 0:r.version)||(n.version,(i=s.previousTree)===null||i===void 0||i.version);const o=iC(t,n,e);return o.state==="loading"&&o.contents.catch(()=>{}),o}function _$(t,e){const n=t.clone();return e.forEach((r,i)=>{r.state==="hasValue"&&r.contents instanceof Zw?n.delete(i):n.set(i,r)}),n}function v$(t,e,{key:n},r){if(typeof r=="function"){const i=iC(t,e,n);if(i.state==="loading"){const s=`Tried to set atom or selector "${n}" using an updater function while the current state is pending, this is not currently supported.`;throw Se(s)}else if(i.state==="hasError")throw i.contents;return r(i.contents)}else return r}function w$(t,e,n){if(n.type==="set"){const{recoilValue:i,valueOrUpdater:s}=n,o=v$(t,e,i,s),a=l$(t,e,i.key,o);for(const[l,c]of a.entries())Tv(e,l,c)}else if(n.type==="setLoadable"){const{recoilValue:{key:i},loadable:s}=n;Tv(e,i,s)}else if(n.type==="markModified"){const{recoilValue:{key:i}}=n;e.dirtyAtoms.add(i)}else if(n.type==="setUnvalidated"){var r;const{recoilValue:{key:i},unvalidatedValue:s}=n,o=sC(i);o==null||(r=o.invalidate)===null||r===void 0||r.call(o,e),e.atomValues.delete(i),e.nonvalidatedAtoms.set(i,s),e.dirtyAtoms.add(i)}else qw(`Unknown action ${n.type}`)}function Tv(t,e,n){n.state==="hasValue"&&n.contents instanceof Zw?t.atomValues.delete(e):t.atomValues.set(e,n),t.dirtyAtoms.add(e),t.nonvalidatedAtoms.delete(e)}function oC(t,e){t.replaceState(n=>{const r=aC(n);for(const i of e)w$(t,r,i);return lC(t,r),m$(),r})}function qg(t,e){if(pu.length){const n=pu[pu.length-1];let r=n.get(t);r||n.set(t,r=[]),r.push(e)}else oC(t,[e])}const pu=[];function b$(){const t=new Map;return pu.push(t),()=>{for(const[e,n]of t)oC(e,n);pu.pop()}}function aC(t){return{...t,atomValues:t.atomValues.clone(),nonvalidatedAtoms:t.nonvalidatedAtoms.clone(),dirtyAtoms:new Set(t.dirtyAtoms)}}function lC(t,e){const n=a$(t,e,e.dirtyAtoms);for(const s of n){var r,i;(r=sC(s))===null||r===void 0||(i=r.invalidate)===null||i===void 0||i.call(r,e)}}function cC(t,e,n){qg(t,{type:"set",recoilValue:e,valueOrUpdater:n})}function S$(t,e,n){if(n instanceof Zw)return cC(t,e,n);qg(t,{type:"setLoadable",recoilValue:e,loadable:n})}function E$(t,e){qg(t,{type:"markModified",recoilValue:e})}function T$(t,e,n){qg(t,{type:"setUnvalidated",recoilValue:e,unvalidatedValue:n})}function I$(t,{key:e},n,r=null){const i=c$(),s=t.getState();s.nodeToComponentSubscriptions.has(e)||s.nodeToComponentSubscriptions.set(e,new Map),rt(s.nodeToComponentSubscriptions.get(e)).set(i,[r??"<not captured>",n]);const o=h$();if(o.early&&(o.mode==="LEGACY"||o.mode==="MUTABLE_SOURCE")){const a=t.getState().nextTree;a&&a.dirtyAtoms.has(e)&&n(a)}return{release:()=>{const a=t.getState(),l=a.nodeToComponentSubscriptions.get(e);l===void 0||!l.has(i)||(l.delete(i),l.size===0&&a.nodeToComponentSubscriptions.delete(e))}}}function x$(t,e){var n;const{currentTree:r}=t.getState(),i=u$(e.key);(n=i.clearCache)===null||n===void 0||n.call(i,t,r)}var Zr={RecoilValueReadOnly:p$,AbstractRecoilValue:d$,RecoilState:f$,getRecoilValueAsLoadable:y$,setRecoilValue:cC,setRecoilValueLoadable:S$,markRecoilValueModified:E$,setUnvalidatedRecoilValue:T$,subscribeToRecoilValue:I$,isRecoilValue:g$,applyAtomValueWrites:_$,batchStart:b$,writeLoadableToTreeState:Tv,invalidateDownstreams:lC,copyTreeState:aC,refreshRecoilValue:x$};function R$(t,e,n){const r=t.entries();let i=r.next();for(;!i.done;){const s=i.value;if(e.call(n,s[1],s[0],t))return!0;i=r.next()}return!1}var A$=R$;const{cleanUpNode:k$}=Ds,{deleteNodeConfigIfPossible:P$,getNode:uC}=Vn,{RetentionZone:hC}=Hg,C$=12e4,dC=new Set;function fC(t,e){const n=t.getState(),r=n.currentTree;if(n.nextTree)return;const i=new Set;for(const o of e)if(o instanceof hC)for(const a of L$(n,o))i.add(a);else i.add(o);const s=N$(t,i);for(const o of s)O$(t,r,o)}function N$(t,e){const n=t.getState(),r=n.currentTree,i=t.getGraph(r.version),s=new Set,o=new Set;return a(e),s;function a(l){const c=new Set,u=D$(t,r,l,s,o);for(const p of u){var h;if(uC(p).retainedBy==="recoilRoot"){o.add(p);continue}if(((h=n.retention.referenceCounts.get(p))!==null&&h!==void 0?h:0)>0){o.add(p);continue}if(pC(p).some(_=>n.retention.referenceCounts.get(_))){o.add(p);continue}const g=i.nodeToNodeSubscriptions.get(p);if(g&&A$(g,_=>o.has(_))){o.add(p);continue}s.add(p),c.add(p)}const d=new Set;for(const p of c)for(const g of(f=i.nodeDeps.get(p))!==null&&f!==void 0?f:dC){var f;s.has(g)||d.add(g)}d.size&&a(d)}}function D$(t,e,n,r,i){const s=t.getGraph(e.version),o=[],a=new Set;for(;n.size>0;)l(rt(n.values().next().value));return o;function l(c){if(r.has(c)||i.has(c)){n.delete(c);return}if(a.has(c))return;const u=s.nodeToNodeSubscriptions.get(c);if(u)for(const h of u)l(h);a.add(c),n.delete(c),o.push(c)}}function O$(t,e,n){if(!Be("recoil_memory_managament_2020"))return;k$(t,n);const r=t.getState();r.knownAtoms.delete(n),r.knownSelectors.delete(n),r.nodeTransactionSubscriptions.delete(n),r.retention.referenceCounts.delete(n);const i=pC(n);for(const l of i){var s;(s=r.retention.nodesRetainedByZone.get(l))===null||s===void 0||s.delete(n)}e.atomValues.delete(n),e.dirtyAtoms.delete(n),e.nonvalidatedAtoms.delete(n);const o=r.graphsByVersion.get(e.version);if(o){const l=o.nodeDeps.get(n);if(l!==void 0){o.nodeDeps.delete(n);for(const c of l){var a;(a=o.nodeToNodeSubscriptions.get(c))===null||a===void 0||a.delete(n)}}o.nodeToNodeSubscriptions.delete(n)}P$(n)}function L$(t,e){var n;return(n=t.retention.nodesRetainedByZone.get(e))!==null&&n!==void 0?n:dC}function pC(t){const e=uC(t).retainedBy;return e===void 0||e==="components"||e==="recoilRoot"?[]:e instanceof hC?[e]:e}function M$(t,e){const n=t.getState();n.nextTree?n.retention.retainablesToCheckForRelease.add(e):fC(t,new Set([e]))}function V$(t,e,n){var r;if(!Be("recoil_memory_managament_2020"))return;const i=t.getState().retention.referenceCounts,s=((r=i.get(e))!==null&&r!==void 0?r:0)+n;s===0?gC(t,e):i.set(e,s)}function gC(t,e){if(!Be("recoil_memory_managament_2020"))return;t.getState().retention.referenceCounts.delete(e),M$(t,e)}function F$(t){if(!Be("recoil_memory_managament_2020"))return;const e=t.getState();fC(t,e.retention.retainablesToCheckForRelease),e.retention.retainablesToCheckForRelease.clear()}function $$(t){return t===void 0?"recoilRoot":t}var Zo={SUSPENSE_TIMEOUT_MS:C$,updateRetainCount:V$,updateRetainCountToZero:gC,releaseScheduledRetainablesNow:F$,retainedByOptionWithDefault:$$};const{unstable_batchedUpdates:U$}=$5;var B$={unstable_batchedUpdates:U$};const{unstable_batchedUpdates:j$}=B$;var z$={unstable_batchedUpdates:j$};const{batchStart:W$}=Zr,{unstable_batchedUpdates:H$}=z$;let eb=H$||(t=>t());const q$=t=>{eb=t},K$=()=>eb,G$=t=>{eb(()=>{let e=()=>{};try{e=W$(),t()}finally{e()}})};var Kg={getBatcher:K$,setBatcher:q$,batchUpdates:G$};function*Q$(t){for(const e of t)for(const n of e)yield n}var mC=Q$;const yC=typeof Window>"u"||typeof window>"u",Y$=t=>!yC&&(t===window||t instanceof Window),X$=typeof navigator<"u"&&navigator.product==="ReactNative";var Gg={isSSR:yC,isReactNative:X$,isWindow:Y$};function J$(t,e){let n;return(...r)=>{n||(n={});const i=e(...r);return Object.hasOwnProperty.call(n,i)||(n[i]=t(...r)),n[i]}}function Z$(t,e){let n,r;return(...i)=>{const s=e(...i);return n===s||(n=s,r=t(...i)),r}}function eU(t,e){let n,r;return[(...o)=>{const a=e(...o);return n===a||(n=a,r=t(...o)),r},()=>{n=null}]}var tU={memoizeWithArgsHash:J$,memoizeOneWithArgsHash:Z$,memoizeOneWithArgsHashAndInvalidation:eU};const{batchUpdates:Iv}=Kg,{initializeNode:nU,peekNodeInfo:rU}=Ds,{graph:iU}=Yh,{getNextStoreID:sU}=Wg,{DEFAULT_VALUE:oU,recoilValues:GE,recoilValuesForKeys:QE}=Vn,{AbstractRecoilValue:aU,getRecoilValueAsLoadable:lU,setRecoilValue:YE,setUnvalidatedRecoilValue:cU}=Zr,{updateRetainCount:Uf}=Zo,{setInvalidateMemoizedSnapshot:uU}=rC,{getNextTreeStateVersion:hU,makeEmptyStoreState:dU}=YP,{isSSR:fU}=Gg,{memoizeOneWithArgsHashAndInvalidation:pU}=tU;class Qg{constructor(e,n){ye(this,"_store",void 0),ye(this,"_refCount",1),ye(this,"getLoadable",r=>(this.checkRefCount_INTERNAL(),lU(this._store,r))),ye(this,"getPromise",r=>(this.checkRefCount_INTERNAL(),this.getLoadable(r).toPromise())),ye(this,"getNodes_UNSTABLE",r=>{if(this.checkRefCount_INTERNAL(),(r==null?void 0:r.isModified)===!0){if((r==null?void 0:r.isInitialized)===!1)return[];const o=this._store.getState().currentTree;return QE(o.dirtyAtoms)}const i=this._store.getState().knownAtoms,s=this._store.getState().knownSelectors;return(r==null?void 0:r.isInitialized)==null?GE.values():r.isInitialized===!0?QE(mC([i,s])):Xw(GE.values(),({key:o})=>!i.has(o)&&!s.has(o))}),ye(this,"getInfo_UNSTABLE",({key:r})=>(this.checkRefCount_INTERNAL(),rU(this._store,this._store.getState().currentTree,r))),ye(this,"map",r=>{this.checkRefCount_INTERNAL();const i=new xv(this,Iv);return r(i),i}),ye(this,"asyncMap",async r=>{this.checkRefCount_INTERNAL();const i=new xv(this,Iv);return i.retain(),await r(i),i.autoRelease_INTERNAL(),i}),this._store={storeID:sU(),parentStoreID:n,getState:()=>e,replaceState:r=>{e.currentTree=r(e.currentTree)},getGraph:r=>{const i=e.graphsByVersion;if(i.has(r))return rt(i.get(r));const s=iU();return i.set(r,s),s},subscribeToTransactions:()=>({release:()=>{}}),addTransactionMetadata:()=>{throw Se("Cannot subscribe to Snapshots")}};for(const r of this._store.getState().knownAtoms)nU(this._store,r,"get"),Uf(this._store,r,1);this.autoRelease_INTERNAL()}retain(){this._refCount<=0,this._refCount++;let e=!1;return()=>{e||(e=!0,this._release())}}autoRelease_INTERNAL(){fU||window.setTimeout(()=>this._release(),10)}_release(){if(this._refCount--,this._refCount===0){if(this._store.getState().nodeCleanupFunctions.forEach(e=>e()),this._store.getState().nodeCleanupFunctions.clear(),!Be("recoil_memory_managament_2020"))return}else this._refCount<0}isRetained(){return this._refCount>0}checkRefCount_INTERNAL(){Be("recoil_memory_managament_2020")&&this._refCount<=0}getStore_INTERNAL(){return this.checkRefCount_INTERNAL(),this._store}getID(){return this.checkRefCount_INTERNAL(),this._store.getState().currentTree.stateID}getStoreID(){return this.checkRefCount_INTERNAL(),this._store.storeID}}function _C(t,e,n=!1){const r=t.getState(),i=n?hU():e.version;return{currentTree:{version:n?i:e.version,stateID:n?i:e.stateID,transactionMetadata:{...e.transactionMetadata},dirtyAtoms:new Set(e.dirtyAtoms),atomValues:e.atomValues.clone(),nonvalidatedAtoms:e.nonvalidatedAtoms.clone()},commitDepth:0,nextTree:null,previousTree:null,knownAtoms:new Set(r.knownAtoms),knownSelectors:new Set(r.knownSelectors),transactionSubscriptions:new Map,nodeTransactionSubscriptions:new Map,nodeToComponentSubscriptions:new Map,queuedComponentCallbacks_DEPRECATED:[],suspendedComponentResolvers:new Set,graphsByVersion:new Map().set(i,t.getGraph(e.version)),retention:{referenceCounts:new Map,nodesRetainedByZone:new Map,retainablesToCheckForRelease:new Set},nodeCleanupFunctions:new Map(zg(r.nodeCleanupFunctions.entries(),([s])=>[s,()=>{}]))}}function gU(t){const e=new Qg(dU());return t!=null?e.map(t):e}const[XE,vC]=pU((t,e)=>{var n;const r=t.getState(),i=e==="latest"?(n=r.nextTree)!==null&&n!==void 0?n:r.currentTree:rt(r.previousTree);return new Qg(_C(t,i),t.storeID)},(t,e)=>{var n,r;return String(e)+String(t.storeID)+String((n=t.getState().nextTree)===null||n===void 0?void 0:n.version)+String(t.getState().currentTree.version)+String((r=t.getState().previousTree)===null||r===void 0?void 0:r.version)});uU(vC);function mU(t,e="latest"){const n=XE(t,e);return n.isRetained()?n:(vC(),XE(t,e))}class xv extends Qg{constructor(e,n){super(_C(e.getStore_INTERNAL(),e.getStore_INTERNAL().getState().currentTree,!0),e.getStoreID()),ye(this,"_batch",void 0),ye(this,"set",(r,i)=>{this.checkRefCount_INTERNAL();const s=this.getStore_INTERNAL();this._batch(()=>{Uf(s,r.key,1),YE(this.getStore_INTERNAL(),r,i)})}),ye(this,"reset",r=>{this.checkRefCount_INTERNAL();const i=this.getStore_INTERNAL();this._batch(()=>{Uf(i,r.key,1),YE(this.getStore_INTERNAL(),r,oU)})}),ye(this,"setUnvalidatedAtomValues_DEPRECATED",r=>{this.checkRefCount_INTERNAL();const i=this.getStore_INTERNAL();Iv(()=>{for(const[s,o]of r.entries())Uf(i,s,1),cU(i,new aU(s),o)})}),this._batch=n}}var Yg={Snapshot:Qg,MutableSnapshot:xv,freshSnapshot:gU,cloneSnapshot:mU},yU=Yg.Snapshot,_U=Yg.MutableSnapshot,vU=Yg.freshSnapshot,wU=Yg.cloneSnapshot,Xg=Object.freeze({__proto__:null,Snapshot:yU,MutableSnapshot:_U,freshSnapshot:vU,cloneSnapshot:wU});function bU(...t){const e=new Set;for(const n of t)for(const r of n)e.add(r);return e}var SU=bU;const{useRef:EU}=We;function TU(t){const e=EU(t);return e.current===t&&typeof t=="function"&&(e.current=t()),e}var JE=TU;const{getNextTreeStateVersion:IU,makeEmptyStoreState:wC}=YP,{cleanUpNode:xU,getDownstreamNodes:RU,initializeNode:AU,setNodeValue:kU,setUnvalidatedAtomValue_DEPRECATED:PU}=Ds,{graph:CU}=Yh,{cloneGraph:NU}=Yh,{getNextStoreID:bC}=Wg,{createMutableSource:By,reactMode:SC}=Qh,{applyAtomValueWrites:DU}=Zr,{releaseScheduledRetainablesNow:EC}=Zo,{freshSnapshot:OU}=Xg,{useCallback:LU,useContext:TC,useEffect:Rv,useMemo:MU,useRef:VU,useState:FU}=We;function pc(){throw Se("This component must be used inside a <RecoilRoot> component.")}const IC=Object.freeze({storeID:bC(),getState:pc,replaceState:pc,getGraph:pc,subscribeToTransactions:pc,addTransactionMetadata:pc});let Av=!1;function ZE(t){if(Av)throw Se("An atom update was triggered within the execution of a state updater function. State updater functions provided to Recoil must be pure functions.");const e=t.getState();if(e.nextTree===null){Be("recoil_memory_managament_2020")&&Be("recoil_release_on_cascading_update_killswitch_2021")&&e.commitDepth>0&&EC(t);const n=e.currentTree.version,r=IU();e.nextTree={...e.currentTree,version:r,stateID:r,dirtyAtoms:new Set,transactionMetadata:{}},e.graphsByVersion.set(r,NU(rt(e.graphsByVersion.get(n))))}}const xC=We.createContext({current:IC}),Jg=()=>TC(xC),RC=We.createContext(null);function $U(){return TC(RC)}function tb(t,e,n){const r=RU(t,n,n.dirtyAtoms);for(const i of r){const s=e.nodeToComponentSubscriptions.get(i);if(s)for(const[o,[a,l]]of s)l(n)}}function AC(t){const e=t.getState(),n=e.currentTree,r=n.dirtyAtoms;if(r.size){for(const[i,s]of e.nodeTransactionSubscriptions)if(r.has(i))for(const[o,a]of s)a(t);for(const[i,s]of e.transactionSubscriptions)s(t);(!SC().early||e.suspendedComponentResolvers.size>0)&&(tb(t,e,n),e.suspendedComponentResolvers.forEach(i=>i()),e.suspendedComponentResolvers.clear())}e.queuedComponentCallbacks_DEPRECATED.forEach(i=>i(n)),e.queuedComponentCallbacks_DEPRECATED.splice(0,e.queuedComponentCallbacks_DEPRECATED.length)}function UU(t){const e=t.getState();e.commitDepth++;try{const{nextTree:n}=e;if(n==null)return;e.previousTree=e.currentTree,e.currentTree=n,e.nextTree=null,AC(t),e.previousTree!=null?e.graphsByVersion.delete(e.previousTree.version):qw("Ended batch with no previous state, which is unexpected","recoil"),e.previousTree=null,Be("recoil_memory_managament_2020")&&n==null&&EC(t)}finally{e.commitDepth--}}function BU({setNotifyBatcherOfChange:t}){const e=Jg(),[,n]=FU([]);return t(()=>n({})),Rv(()=>(t(()=>n({})),()=>{t(()=>{})}),[t]),Rv(()=>{v3.enqueueExecution("Batcher",()=>{UU(e.current)})}),null}function jU(t,e){const n=wC();return e({set:(r,i)=>{const s=n.currentTree,o=kU(t,s,r.key,i),a=new Set(o.keys()),l=s.nonvalidatedAtoms.clone();for(const c of a)l.delete(c);n.currentTree={...s,dirtyAtoms:SU(s.dirtyAtoms,a),atomValues:DU(s.atomValues,o),nonvalidatedAtoms:l}},setUnvalidatedAtomValues:r=>{r.forEach((i,s)=>{n.currentTree=PU(n.currentTree,s,i)})}}),n}function zU(t){const e=OU(t),n=e.getStore_INTERNAL().getState();return e.retain(),n.nodeCleanupFunctions.forEach(r=>r()),n.nodeCleanupFunctions.clear(),n}let eT=0;function WU({initializeState_DEPRECATED:t,initializeState:e,store_INTERNAL:n,children:r}){let i;const s=f=>{const p=i.current.graphsByVersion;if(p.has(f))return rt(p.get(f));const g=CU();return p.set(f,g),g},o=(f,p)=>{if(p==null){const{transactionSubscriptions:g}=h.current.getState(),_=eT++;return g.set(_,f),{release:()=>{g.delete(_)}}}else{const{nodeTransactionSubscriptions:g}=h.current.getState();g.has(p)||g.set(p,new Map);const _=eT++;return rt(g.get(p)).set(_,f),{release:()=>{const y=g.get(p);y&&(y.delete(_),y.size===0&&g.delete(p))}}}},a=f=>{ZE(h.current);for(const p of Object.keys(f))rt(h.current.getState().nextTree).transactionMetadata[p]=f[p]},l=f=>{ZE(h.current);const p=rt(i.current.nextTree);let g;try{Av=!0,g=f(p)}finally{Av=!1}g!==p&&(i.current.nextTree=g,SC().early&&tb(h.current,i.current,g),rt(c.current)())},c=VU(null),u=LU(f=>{c.current=f},[c]),h=JE(()=>n??{storeID:bC(),getState:()=>i.current,replaceState:l,getGraph:s,subscribeToTransactions:o,addTransactionMetadata:a});n!=null&&(h.current=n),i=JE(()=>t!=null?jU(h.current,t):e!=null?zU(e):wC());const d=MU(()=>By==null?void 0:By(i,()=>i.current.currentTree.version),[i]);return Rv(()=>{const f=h.current;for(const p of new Set(f.getState().knownAtoms))AU(f,p,"get");return()=>{for(const p of f.getState().knownAtoms)xU(f,p)}},[h]),We.createElement(xC.Provider,{value:h},We.createElement(RC.Provider,{value:d},We.createElement(BU,{setNotifyBatcherOfChange:u}),r))}function HU(t){const{override:e,...n}=t,r=Jg();return e===!1&&r.current!==IC?t.children:We.createElement(WU,n)}function qU(){return Jg().current.storeID}var ki={RecoilRoot:HU,useStoreRef:Jg,useRecoilMutableSource:$U,useRecoilStoreID:qU,notifyComponents_FOR_TESTING:tb,sendEndOfBatchNotifications_FOR_TESTING:AC};function KU(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}var GU=KU;const{useEffect:QU,useRef:YU}=We;function XU(t){const e=YU();return QU(()=>{e.current=t}),e.current}var kC=XU;const{useStoreRef:JU}=ki,{SUSPENSE_TIMEOUT_MS:ZU}=Zo,{updateRetainCount:gc}=Zo,{RetentionZone:e6}=Hg,{useEffect:t6,useRef:n6}=We,{isSSR:tT}=Gg;function r6(t){if(Be("recoil_memory_managament_2020"))return i6(t)}function i6(t){const n=(Array.isArray(t)?t:[t]).map(o=>o instanceof e6?o:o.key),r=JU();t6(()=>{if(!Be("recoil_memory_managament_2020"))return;const o=r.current;if(i.current&&!tT)window.clearTimeout(i.current),i.current=null;else for(const a of n)gc(o,a,1);return()=>{for(const a of n)gc(o,a,-1)}},[r,...n]);const i=n6(),s=kC(n);if(!tT&&(s===void 0||!GU(s,n))){const o=r.current;for(const a of n)gc(o,a,1);if(s)for(const a of s)gc(o,a,-1);i.current&&window.clearTimeout(i.current),i.current=window.setTimeout(()=>{i.current=null;for(const a of n)gc(o,a,-1)},ZU)}}var nb=r6;function s6(){return"<component name not available>"}var Jh=s6;const{batchUpdates:o6}=Kg,{DEFAULT_VALUE:PC}=Vn,{currentRendererSupportsUseSyncExternalStore:a6,reactMode:Bl,useMutableSource:l6,useSyncExternalStore:c6}=Qh,{useRecoilMutableSource:u6,useStoreRef:ei}=ki,{AbstractRecoilValue:kv,getRecoilValueAsLoadable:Zh,setRecoilValue:Lp,setUnvalidatedRecoilValue:h6,subscribeToRecoilValue:pl}=Zr,{useCallback:Mn,useEffect:gl,useMemo:CC,useRef:gu,useState:rb}=We,{setByAddingToSet:d6}=JP,{isSSR:f6}=Gg;function ib(t,e,n){if(t.state==="hasValue")return t.contents;throw t.state==="loading"?new Promise(i=>{const s=n.current.getState().suspendedComponentResolvers;s.add(i),f6&&Qe(t.contents)&&t.contents.finally(()=>{s.delete(i)})}):t.state==="hasError"?t.contents:Se(`Invalid value of loadable atom "${e.key}"`)}function p6(){const t=Jh(),e=ei(),[,n]=rb([]),r=gu(new Set);r.current=new Set;const i=gu(new Set),s=gu(new Map),o=Mn(l=>{const c=s.current.get(l);c&&(c.release(),s.current.delete(l))},[s]),a=Mn((l,c)=>{s.current.has(c)&&n([])},[]);return gl(()=>{const l=e.current;fu(r.current,i.current).forEach(c=>{if(s.current.has(c))return;const u=pl(l,new kv(c),d=>a(d,c),t);s.current.set(c,u),l.getState().nextTree?l.getState().queuedComponentCallbacks_DEPRECATED.push(()=>{a(l.getState(),c)}):a(l.getState(),c)}),fu(i.current,r.current).forEach(c=>{o(c)}),i.current=r.current}),gl(()=>{const l=s.current;return fu(r.current,new Set(l.keys())).forEach(c=>{const u=pl(e.current,new kv(c),h=>a(h,c),t);l.set(c,u)}),()=>l.forEach((c,u)=>o(u))},[t,e,o,a]),CC(()=>{function l(p){return g=>{Lp(e.current,p,g)}}function c(p){return()=>Lp(e.current,p,PC)}function u(p){var g;r.current.has(p.key)||(r.current=d6(r.current,p.key));const _=e.current.getState();return Zh(e.current,p,Bl().early&&(g=_.nextTree)!==null&&g!==void 0?g:_.currentTree)}function h(p){const g=u(p);return ib(g,p,e)}function d(p){return[h(p),l(p)]}function f(p){return[u(p),l(p)]}return{getRecoilValue:h,getRecoilValueLoadable:u,getRecoilState:d,getRecoilStateLoadable:f,getSetRecoilState:l,getResetRecoilState:c}},[r,e])}const g6={current:0};function m6(t){const e=ei(),n=Jh(),r=Mn(()=>{var a;const l=e.current,c=l.getState(),u=Bl().early&&(a=c.nextTree)!==null&&a!==void 0?a:c.currentTree;return{loadable:Zh(l,t,u),key:t.key}},[e,t]),i=Mn(a=>{let l;return()=>{var c,u;const h=a();return(c=l)!==null&&c!==void 0&&c.loadable.is(h.loadable)&&((u=l)===null||u===void 0?void 0:u.key)===h.key?l:(l=h,h)}},[]),s=CC(()=>i(r),[r,i]),o=Mn(a=>{const l=e.current;return pl(l,t,a,n).release},[e,t,n]);return c6(o,s,s).loadable}function y6(t){const e=ei(),n=Mn(()=>{var c;const u=e.current,h=u.getState(),d=Bl().early&&(c=h.nextTree)!==null&&c!==void 0?c:h.currentTree;return Zh(u,t,d)},[e,t]),r=Mn(()=>n(),[n]),i=Jh(),s=Mn((c,u)=>{const h=e.current;return pl(h,t,()=>{if(!Be("recoil_suppress_rerender_in_callback"))return u();const f=n();l.current.is(f)||u(),l.current=f},i).release},[e,t,i,n]),o=u6();if(o==null)throw Se("Recoil hooks must be used in components contained within a <RecoilRoot> component.");const a=l6(o,r,s),l=gu(a);return gl(()=>{l.current=a}),a}function Pv(t){const e=ei(),n=Jh(),r=Mn(()=>{var l;const c=e.current,u=c.getState(),h=Bl().early&&(l=u.nextTree)!==null&&l!==void 0?l:u.currentTree;return Zh(c,t,h)},[e,t]),i=Mn(()=>({loadable:r(),key:t.key}),[r,t.key]),s=Mn(l=>{const c=i();return l.loadable.is(c.loadable)&&l.key===c.key?l:c},[i]);gl(()=>{const l=pl(e.current,t,c=>{a(s)},n);return a(s),l.release},[n,t,e,s]);const[o,a]=rb(i);return o.key!==t.key?i().loadable:o.loadable}function _6(t){const e=ei(),[,n]=rb([]),r=Jh(),i=Mn(()=>{var a;const l=e.current,c=l.getState(),u=Bl().early&&(a=c.nextTree)!==null&&a!==void 0?a:c.currentTree;return Zh(l,t,u)},[e,t]),s=i(),o=gu(s);return gl(()=>{o.current=s}),gl(()=>{const a=e.current,l=a.getState(),c=pl(a,t,h=>{var d;if(!Be("recoil_suppress_rerender_in_callback"))return n([]);const f=i();(d=o.current)!==null&&d!==void 0&&d.is(f)||n(f),o.current=f},r);if(l.nextTree)a.getState().queuedComponentCallbacks_DEPRECATED.push(()=>{o.current=null,n([])});else{var u;if(!Be("recoil_suppress_rerender_in_callback"))return n([]);const h=i();(u=o.current)!==null&&u!==void 0&&u.is(h)||n(h),o.current=h}return c.release},[r,i,t,e]),s}function sb(t){return Be("recoil_memory_managament_2020")&&nb(t),{TRANSITION_SUPPORT:Pv,SYNC_EXTERNAL_STORE:a6()?m6:Pv,MUTABLE_SOURCE:y6,LEGACY:_6}[Bl().mode](t)}function NC(t){const e=ei(),n=sb(t);return ib(n,t,e)}function Zg(t){const e=ei();return Mn(n=>{Lp(e.current,t,n)},[e,t])}function v6(t){const e=ei();return Mn(()=>{Lp(e.current,t,PC)},[e,t])}function w6(t){return[NC(t),Zg(t)]}function b6(t){return[sb(t),Zg(t)]}function S6(){const t=ei();return(e,n={})=>{o6(()=>{t.current.addTransactionMetadata(n),e.forEach((r,i)=>h6(t.current,new kv(i),r))})}}function DC(t){return Be("recoil_memory_managament_2020")&&nb(t),Pv(t)}function OC(t){const e=ei(),n=DC(t);return ib(n,t,e)}function E6(t){return[OC(t),Zg(t)]}var T6={recoilComponentGetRecoilValueCount_FOR_TESTING:g6,useRecoilInterface:p6,useRecoilState:w6,useRecoilStateLoadable:b6,useRecoilValue:NC,useRecoilValueLoadable:sb,useResetRecoilState:v6,useSetRecoilState:Zg,useSetUnvalidatedAtomValues:S6,useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE:DC,useRecoilValue_TRANSITION_SUPPORT_UNSTABLE:OC,useRecoilState_TRANSITION_SUPPORT_UNSTABLE:E6};function I6(t,e){const n=new Map;for(const[r,i]of t)e(i,r)&&n.set(r,i);return n}var x6=I6;function R6(t,e){const n=new Set;for(const r of t)e(r)&&n.add(r);return n}var A6=R6;function k6(...t){const e=new Map;for(let n=0;n<t.length;n++){const r=t[n].keys();let i;for(;!(i=r.next()).done;)e.set(i.value,t[n].get(i.value))}return e}var P6=k6;const{batchUpdates:C6}=Kg,{DEFAULT_VALUE:N6,getNode:LC,nodes:D6}=Vn,{useStoreRef:ob}=ki,{AbstractRecoilValue:O6,setRecoilValueLoadable:L6}=Zr,{SUSPENSE_TIMEOUT_MS:M6}=Zo,{cloneSnapshot:Mp}=Xg,{useCallback:em,useEffect:MC,useRef:nT,useState:V6}=We,{isSSR:rT}=Gg;function tm(t){const e=ob();MC(()=>e.current.subscribeToTransactions(t).release,[t,e])}function iT(t){const e=t.atomValues.toMap(),n=Op(x6(e,(r,i)=>{const o=LC(i).persistence_UNSTABLE;return o!=null&&o.type!=="none"&&r.state==="hasValue"}),r=>r.contents);return P6(t.nonvalidatedAtoms.toMap(),n)}function F6(t){tm(em(e=>{let n=e.getState().previousTree;const r=e.getState().currentTree;n||(n=e.getState().currentTree);const i=iT(r),s=iT(n),o=Op(D6,l=>{var c,u,h,d;return{persistence_UNSTABLE:{type:(c=(u=l.persistence_UNSTABLE)===null||u===void 0?void 0:u.type)!==null&&c!==void 0?c:"none",backButton:(h=(d=l.persistence_UNSTABLE)===null||d===void 0?void 0:d.backButton)!==null&&h!==void 0?h:!1}}}),a=A6(r.dirtyAtoms,l=>i.has(l)||s.has(l));t({atomValues:i,previousAtomValues:s,atomInfo:o,modifiedAtoms:a,transactionMetadata:{...r.transactionMetadata}})},[t]))}function $6(t){tm(em(e=>{const n=Mp(e,"latest"),r=Mp(e,"previous");t({snapshot:n,previousSnapshot:r})},[t]))}function U6(){const t=ob(),[e,n]=V6(()=>Mp(t.current)),r=kC(e),i=nT(),s=nT();if(tm(em(a=>n(Mp(a)),[])),MC(()=>{const a=e.retain();if(i.current&&!rT){var l;window.clearTimeout(i.current),i.current=null,(l=s.current)===null||l===void 0||l.call(s),s.current=null}return()=>{window.setTimeout(a,10)}},[e]),r!==e&&!rT){if(i.current){var o;window.clearTimeout(i.current),i.current=null,(o=s.current)===null||o===void 0||o.call(s),s.current=null}s.current=e.retain(),i.current=window.setTimeout(()=>{var a;i.current=null,(a=s.current)===null||a===void 0||a.call(s),s.current=null},M6)}return e}function VC(t,e){var n;const r=t.getState(),i=(n=r.nextTree)!==null&&n!==void 0?n:r.currentTree,s=e.getStore_INTERNAL().getState().currentTree;C6(()=>{const o=new Set;for(const c of[i.atomValues.keys(),s.atomValues.keys()])for(const u of c){var a,l;((a=i.atomValues.get(u))===null||a===void 0?void 0:a.contents)!==((l=s.atomValues.get(u))===null||l===void 0?void 0:l.contents)&&LC(u).shouldRestoreFromSnapshots&&o.add(u)}o.forEach(c=>{L6(t,new O6(c),s.atomValues.has(c)?rt(s.atomValues.get(c)):N6)}),t.replaceState(c=>({...c,stateID:e.getID()}))})}function B6(){const t=ob();return em(e=>VC(t.current,e),[t])}var FC={useRecoilSnapshot:U6,gotoSnapshot:VC,useGotoRecoilSnapshot:B6,useRecoilTransactionObserver:$6,useTransactionObservation_DEPRECATED:F6,useTransactionSubscription_DEPRECATED:tm};const{peekNodeInfo:j6}=Ds,{useStoreRef:z6}=ki;function W6(){const t=z6();return({key:e})=>j6(t.current,t.current.getState().currentTree,e)}var H6=W6;const{reactMode:q6}=Qh,{RecoilRoot:K6,useStoreRef:G6}=ki,{useMemo:Q6}=We;function Y6(){q6().mode==="MUTABLE_SOURCE"&&console.warn("Warning: There are known issues using useRecoilBridgeAcrossReactRoots() in recoil_mutable_source rendering mode.  Please consider upgrading to recoil_sync_external_store mode.");const t=G6().current;return Q6(()=>{function e({children:n}){return We.createElement(K6,{store_INTERNAL:t},n)}return e},[t])}var X6=Y6;const{loadableWithValue:J6}=Gh,{initializeNode:Z6}=Ds,{DEFAULT_VALUE:eB,getNode:tB}=Vn,{copyTreeState:nB,getRecoilValueAsLoadable:rB,invalidateDownstreams:iB,writeLoadableToTreeState:sB}=Zr;function sT(t){return tB(t.key).nodeType==="atom"}class oB{constructor(e,n){ye(this,"_store",void 0),ye(this,"_treeState",void 0),ye(this,"_changes",void 0),ye(this,"get",r=>{if(this._changes.has(r.key))return this._changes.get(r.key);if(!sT(r))throw Se("Reading selectors within atomicUpdate is not supported");const i=rB(this._store,r,this._treeState);if(i.state==="hasValue")return i.contents;throw i.state==="hasError"?i.contents:Se(`Expected Recoil atom ${r.key} to have a value, but it is in a loading state.`)}),ye(this,"set",(r,i)=>{if(!sT(r))throw Se("Setting selectors within atomicUpdate is not supported");if(typeof i=="function"){const s=this.get(r);this._changes.set(r.key,i(s))}else Z6(this._store,r.key,"set"),this._changes.set(r.key,i)}),ye(this,"reset",r=>{this.set(r,eB)}),this._store=e,this._treeState=n,this._changes=new Map}newTreeState_INTERNAL(){if(this._changes.size===0)return this._treeState;const e=nB(this._treeState);for(const[n,r]of this._changes)sB(e,n,J6(r));return iB(this._store,e),e}}function aB(t){return e=>{t.replaceState(n=>{const r=new oB(t,n);return e(r),r.newTreeState_INTERNAL()})}}var lB={atomicUpdater:aB},cB=lB.atomicUpdater,$C=Object.freeze({__proto__:null,atomicUpdater:cB});function uB(t,e){if(!t)throw new Error(e)}var hB=uB,Bc=hB;const{atomicUpdater:dB}=$C,{batchUpdates:fB}=Kg,{DEFAULT_VALUE:pB}=Vn,{useStoreRef:gB}=ki,{refreshRecoilValue:mB,setRecoilValue:oT}=Zr,{cloneSnapshot:yB}=Xg,{gotoSnapshot:_B}=FC,{useCallback:vB}=We;class UC{}const wB=new UC;function BC(t,e,n,r){let i=wB,s;if(fB(()=>{const a="useRecoilCallback() expects a function that returns a function: it accepts a function of the type (RecoilInterface) => (Args) => ReturnType and returns a callback function (Args) => ReturnType, where RecoilInterface is an object {snapshot, set, ...} and Args and ReturnType are the argument and return types of the callback you want to create.  Please see the docs at recoiljs.org for details.";if(typeof e!="function")throw Se(a);const l=ZP({...r??{},set:(u,h)=>oT(t,u,h),reset:u=>oT(t,u,pB),refresh:u=>mB(t,u),gotoSnapshot:u=>_B(t,u),transact_UNSTABLE:u=>dB(t)(u)},{snapshot:()=>{const u=yB(t);return s=u.retain(),u}}),c=e(l);if(typeof c!="function")throw Se(a);i=c(...n)}),i instanceof UC&&Bc(!1),Qe(i))i=i.finally(()=>{var a;(a=s)===null||a===void 0||a()});else{var o;(o=s)===null||o===void 0||o()}return i}function bB(t,e){const n=gB();return vB((...r)=>BC(n.current,t,r),e!=null?[...e,n]:void 0)}var jC={recoilCallback:BC,useRecoilCallback:bB};const{useStoreRef:SB}=ki,{refreshRecoilValue:EB}=Zr,{useCallback:TB}=We;function IB(t){const e=SB();return TB(()=>{const n=e.current;EB(n,t)},[t,e])}var xB=IB;const{atomicUpdater:RB}=$C,{useStoreRef:AB}=ki,{useMemo:kB}=We;function PB(t,e){const n=AB();return kB(()=>(...r)=>{RB(n.current)(s=>{t(s)(...r)})},e!=null?[...e,n]:void 0)}var CB=PB;class NB{constructor(e){ye(this,"value",void 0),this.value=e}}var DB={WrappedValue:NB},OB=DB.WrappedValue,zC=Object.freeze({__proto__:null,WrappedValue:OB});const{isFastRefreshEnabled:LB}=Qh;class aT extends Error{}class MB{constructor(e){var n,r,i;ye(this,"_name",void 0),ye(this,"_numLeafs",void 0),ye(this,"_root",void 0),ye(this,"_onHit",void 0),ye(this,"_onSet",void 0),ye(this,"_mapNodeValue",void 0),this._name=e==null?void 0:e.name,this._numLeafs=0,this._root=null,this._onHit=(n=e==null?void 0:e.onHit)!==null&&n!==void 0?n:()=>{},this._onSet=(r=e==null?void 0:e.onSet)!==null&&r!==void 0?r:()=>{},this._mapNodeValue=(i=e==null?void 0:e.mapNodeValue)!==null&&i!==void 0?i:s=>s}size(){return this._numLeafs}root(){return this._root}get(e,n){var r;return(r=this.getLeafNode(e,n))===null||r===void 0?void 0:r.value}getLeafNode(e,n){if(this._root==null)return;let r=this._root;for(;r;){if(n==null||n.onNodeVisit(r),r.type==="leaf")return this._onHit(r),r;const i=this._mapNodeValue(e(r.nodeKey));r=r.branches.get(i)}}set(e,n,r){const i=()=>{var s,o,a,l;let c,u;for(const[_,y]of e){var h,d,f;const m=this._root;if((m==null?void 0:m.type)==="leaf")throw this.invalidCacheError();const v=c;if(c=v?v.branches.get(u):m,c=(h=c)!==null&&h!==void 0?h:{type:"branch",nodeKey:_,parent:v,branches:new Map,branchKey:u},c.type!=="branch"||c.nodeKey!==_)throw this.invalidCacheError();v==null||v.branches.set(u,c),r==null||(d=r.onNodeVisit)===null||d===void 0||d.call(r,c),u=this._mapNodeValue(y),this._root=(f=this._root)!==null&&f!==void 0?f:c}const p=c?(s=c)===null||s===void 0?void 0:s.branches.get(u):this._root;if(p!=null&&(p.type!=="leaf"||p.branchKey!==u))throw this.invalidCacheError();const g={type:"leaf",value:n,parent:c,branchKey:u};(o=c)===null||o===void 0||o.branches.set(u,g),this._root=(a=this._root)!==null&&a!==void 0?a:g,this._numLeafs++,this._onSet(g),r==null||(l=r.onNodeVisit)===null||l===void 0||l.call(r,g)};try{i()}catch(s){if(s instanceof aT)this.clear(),i();else throw s}}delete(e){const n=this.root();if(!n)return!1;if(e===n)return this._root=null,this._numLeafs=0,!0;let r=e.parent,i=e.branchKey;for(;r;){var s;if(r.branches.delete(i),r===n)return r.branches.size===0?(this._root=null,this._numLeafs=0):this._numLeafs--,!0;if(r.branches.size>0)break;i=(s=r)===null||s===void 0?void 0:s.branchKey,r=r.parent}for(;r!==n;r=r.parent)if(r==null)return!1;return this._numLeafs--,!0}clear(){this._numLeafs=0,this._root=null}invalidCacheError(){const e=LB()?"Possible Fast Refresh module reload detected.  This may also be caused by an selector returning inconsistent values. Resetting cache.":"Invalid cache values.  This happens when selectors do not return consistent values for the same input dependency values.  That may also be caused when using Fast Refresh to change a selector implementation.  Resetting cache.";throw qw(e+(this._name!=null?` - ${this._name}`:"")),new aT}}var VB={TreeCache:MB},FB=VB.TreeCache,WC=Object.freeze({__proto__:null,TreeCache:FB});class $B{constructor(e){var n;ye(this,"_maxSize",void 0),ye(this,"_size",void 0),ye(this,"_head",void 0),ye(this,"_tail",void 0),ye(this,"_map",void 0),ye(this,"_keyMapper",void 0),this._maxSize=e.maxSize,this._size=0,this._head=null,this._tail=null,this._map=new Map,this._keyMapper=(n=e.mapKey)!==null&&n!==void 0?n:r=>r}head(){return this._head}tail(){return this._tail}size(){return this._size}maxSize(){return this._maxSize}has(e){return this._map.has(this._keyMapper(e))}get(e){const n=this._keyMapper(e),r=this._map.get(n);if(r)return this.set(e,r.value),r.value}set(e,n){const r=this._keyMapper(e);this._map.get(r)&&this.delete(e);const s=this.head(),o={key:e,right:s,left:null,value:n};s?s.left=o:this._tail=o,this._map.set(r,o),this._head=o,this._size++,this._maybeDeleteLRU()}_maybeDeleteLRU(){this.size()>this.maxSize()&&this.deleteLru()}deleteLru(){const e=this.tail();e&&this.delete(e.key)}delete(e){const n=this._keyMapper(e);if(!this._size||!this._map.has(n))return;const r=rt(this._map.get(n)),i=r.right,s=r.left;i&&(i.left=r.left),s&&(s.right=r.right),r===this.head()&&(this._head=i),r===this.tail()&&(this._tail=s),this._map.delete(n),this._size--}clear(){this._size=0,this._head=null,this._tail=null,this._map=new Map}}var UB={LRUCache:$B},BB=UB.LRUCache,HC=Object.freeze({__proto__:null,LRUCache:BB});const{LRUCache:jB}=HC,{TreeCache:zB}=WC;function WB({name:t,maxSize:e,mapNodeValue:n=r=>r}){const r=new jB({maxSize:e}),i=new zB({name:t,mapNodeValue:n,onHit:s=>{r.set(s,!0)},onSet:s=>{const o=r.tail();r.set(s,!0),o&&i.size()>e&&i.delete(o.key)}});return i}var lT=WB;function gr(t,e,n){if(typeof t=="string"&&!t.includes('"')&&!t.includes("\\"))return`"${t}"`;switch(typeof t){case"undefined":return"";case"boolean":return t?"true":"false";case"number":case"symbol":return String(t);case"string":return JSON.stringify(t);case"function":if((e==null?void 0:e.allowFunctions)!==!0)throw Se("Attempt to serialize function in a Recoil cache key");return`__FUNCTION(${t.name})__`}if(t===null)return"null";if(typeof t!="object"){var r;return(r=JSON.stringify(t))!==null&&r!==void 0?r:""}if(Qe(t))return"__PROMISE__";if(Array.isArray(t))return`[${t.map((i,s)=>gr(i,e,s.toString()))}]`;if(typeof t.toJSON=="function")return gr(t.toJSON(n),e,n);if(t instanceof Map){const i={};for(const[s,o]of t)i[typeof s=="string"?s:gr(s,e)]=o;return gr(i,e,n)}return t instanceof Set?gr(Array.from(t).sort((i,s)=>gr(i,e).localeCompare(gr(s,e))),e,n):Symbol!==void 0&&t[Symbol.iterator]!=null&&typeof t[Symbol.iterator]=="function"?gr(Array.from(t),e,n):`{${Object.keys(t).filter(i=>t[i]!==void 0).sort().map(i=>`${gr(i,e)}:${gr(t[i],e,i)}`).join(",")}}`}function HB(t,e={allowFunctions:!1}){return gr(t,e)}var nm=HB;const{TreeCache:qB}=WC,Qd={equality:"reference",eviction:"keep-all",maxSize:1/0};function KB({equality:t=Qd.equality,eviction:e=Qd.eviction,maxSize:n=Qd.maxSize}=Qd,r){const i=GB(t);return QB(e,n,i,r)}function GB(t){switch(t){case"reference":return e=>e;case"value":return e=>nm(e)}throw Se(`Unrecognized equality policy ${t}`)}function QB(t,e,n,r){switch(t){case"keep-all":return new qB({name:r,mapNodeValue:n});case"lru":return lT({name:r,maxSize:rt(e),mapNodeValue:n});case"most-recent":return lT({name:r,maxSize:1,mapNodeValue:n})}throw Se(`Unrecognized eviction policy ${t}`)}var YB=KB;function XB(t){return()=>null}var JB={startPerfBlock:XB};const{isLoadable:ZB,loadableWithError:Yd,loadableWithPromise:e9,loadableWithValue:jy}=Gh,{WrappedValue:qC}=zC,{getNodeLoadable:Xd,peekNodeLoadable:t9,setNodeValue:n9}=Ds,{saveDepsToStore:r9}=Yh,{DEFAULT_VALUE:i9,getConfigDeletionHandler:s9,getNode:o9,registerNode:cT}=Vn,{isRecoilValue:a9}=fl,{markRecoilValueModified:uT}=Zr,{retainedByOptionWithDefault:l9}=Zo,{recoilCallback:c9}=jC,{startPerfBlock:u9}=JB;class KC{}const mc=new KC,yc=[],Jd=new Map,h9=(()=>{let t=0;return()=>t++})();function GC(t){let e=null;const{key:n,get:r,cachePolicy_UNSTABLE:i}=t,s=t.set!=null?t.set:void 0,o=new Set,a=YB(i??{equality:"reference",eviction:"keep-all"},n),l=l9(t.retainedBy_UNSTABLE),c=new Map;let u=0;function h(){return!Be("recoil_memory_managament_2020")||u>0}function d(R){return R.getState().knownSelectors.add(n),u++,()=>{u--}}function f(){return s9(n)!==void 0&&!h()}function p(R,V,j,ce,Y){N(V,ce,Y),g(R,j)}function g(R,V){be(R,V)&&he(R),y(V,!0)}function _(R,V){be(R,V)&&(rt(L(R)).stateVersions.clear(),y(V,!1))}function y(R,V){const j=Jd.get(R);if(j!=null){for(const ce of j)uT(ce,rt(e));V&&Jd.delete(R)}}function m(R,V){let j=Jd.get(V);j==null&&Jd.set(V,j=new Set),j.add(R)}function v(R,V,j,ce,Y,we){return V.then(Te=>{if(!h())throw he(R),mc;const ue=jy(Te);return p(R,j,Y,ue,ce),Te}).catch(Te=>{if(!h())throw he(R),mc;if(Qe(Te))return w(R,Te,j,ce,Y,we);const ue=Yd(Te);throw p(R,j,Y,ue,ce),Te})}function w(R,V,j,ce,Y,we){return V.then(Te=>{if(!h())throw he(R),mc;we.loadingDepKey!=null&&we.loadingDepPromise===V?j.atomValues.set(we.loadingDepKey,jy(Te)):R.getState().knownSelectors.forEach(Fe=>{j.atomValues.delete(Fe)});const ue=T(R,j);if(ue&&ue.state!=="loading"){if((be(R,Y)||L(R)==null)&&g(R,Y),ue.state==="hasValue")return ue.contents;throw ue.contents}if(!be(R,Y)){const Fe=$(R,j);if(Fe!=null)return Fe.loadingLoadable.contents}const[et,Pt]=E(R,j,Y);if(et.state!=="loading"&&p(R,j,Y,et,Pt),et.state==="hasError")throw et.contents;return et.contents}).catch(Te=>{if(Te instanceof KC)throw mc;if(!h())throw he(R),mc;const ue=Yd(Te);throw p(R,j,Y,ue,ce),Te})}function S(R,V,j,ce){var Y,we,Te,ue;if(be(R,ce)||V.version===((Y=R.getState())===null||Y===void 0||(we=Y.currentTree)===null||we===void 0?void 0:we.version)||V.version===((Te=R.getState())===null||Te===void 0||(ue=Te.nextTree)===null||ue===void 0?void 0:ue.version)){var et,Pt,Fe;r9(n,j,R,(et=(Pt=R.getState())===null||Pt===void 0||(Fe=Pt.nextTree)===null||Fe===void 0?void 0:Fe.version)!==null&&et!==void 0?et:R.getState().currentTree.version)}for(const lt of j)o.add(lt)}function E(R,V,j){const ce=u9(n);let Y=!0,we=!0;const Te=()=>{ce(),we=!1};let ue,et=!1,Pt;const Fe={loadingDepKey:null,loadingDepPromise:null},lt=new Map;function dr({key:Zn}){const Fn=Xd(R,V,Zn);switch(lt.set(Zn,Fn),Y||(S(R,V,new Set(lt.keys()),j),_(R,j)),Fn.state){case"hasValue":return Fn.contents;case"hasError":throw Fn.contents;case"loading":throw Fe.loadingDepKey=Zn,Fe.loadingDepPromise=Fn.contents,Fn.contents}throw Se("Invalid Loadable state")}const Ws=Zn=>(...Fn)=>{if(we)throw Se("Callbacks from getCallback() should only be called asynchronously after the selector is evalutated.  It can be used for selectors to return objects with callbacks that can work with Recoil state without a subscription.");return e==null&&Bc(!1),c9(R,Zn,Fn,{node:e})};try{ue=r({get:dr,getCallback:Ws}),ue=a9(ue)?dr(ue):ue,ZB(ue)&&(ue.state==="hasError"&&(et=!0),ue=ue.contents),Qe(ue)?ue=v(R,ue,V,lt,j,Fe).finally(Te):Te(),ue=ue instanceof qC?ue.value:ue}catch(Zn){ue=Zn,Qe(ue)?ue=w(R,ue,V,lt,j,Fe).finally(Te):(et=!0,Te())}return et?Pt=Yd(ue):Qe(ue)?Pt=e9(ue):Pt=jy(ue),Y=!1,se(R,j,lt),S(R,V,new Set(lt.keys()),j),[Pt,lt]}function T(R,V){let j=V.atomValues.get(n);if(j!=null)return j;const ce=new Set;try{j=a.get(we=>(typeof we!="string"&&Bc(!1),Xd(R,V,we).contents),{onNodeVisit:we=>{we.type==="branch"&&we.nodeKey!==n&&ce.add(we.nodeKey)}})}catch(we){throw Se(`Problem with cache lookup for selector "${n}": ${we.message}`)}if(j){var Y;V.atomValues.set(n,j),S(R,V,ce,(Y=L(R))===null||Y===void 0?void 0:Y.executionID)}return j}function A(R,V){const j=T(R,V);if(j!=null)return he(R),j;const ce=$(R,V);if(ce!=null){var Y;return((Y=ce.loadingLoadable)===null||Y===void 0?void 0:Y.state)==="loading"&&m(R,ce.executionID),ce.loadingLoadable}const we=h9(),[Te,ue]=E(R,V,we);return Te.state==="loading"?(ee(R,we,Te,ue,V),m(R,we)):(he(R),N(V,Te,ue)),Te}function $(R,V){const j=mC([c.has(R)?[rt(c.get(R))]:[],zg(Xw(c,([Y])=>Y!==R),([,Y])=>Y)]);function ce(Y){for(const[we,Te]of Y)if(!Xd(R,V,we).is(Te))return!0;return!1}for(const Y of j){if(Y.stateVersions.get(V.version)||!ce(Y.depValuesDiscoveredSoFarDuringAsyncWork))return Y.stateVersions.set(V.version,!0),Y;Y.stateVersions.set(V.version,!1)}}function L(R){return c.get(R)}function ee(R,V,j,ce,Y){c.set(R,{depValuesDiscoveredSoFarDuringAsyncWork:ce,executionID:V,loadingLoadable:j,stateVersions:new Map([[Y.version,!0]])})}function se(R,V,j){if(be(R,V)){const ce=L(R);ce!=null&&(ce.depValuesDiscoveredSoFarDuringAsyncWork=j)}}function he(R){c.delete(R)}function be(R,V){var j;return V===((j=L(R))===null||j===void 0?void 0:j.executionID)}function I(R){return Array.from(R.entries()).map(([V,j])=>[V,j.contents])}function N(R,V,j){R.atomValues.set(n,V);try{a.set(I(j),V)}catch(ce){throw Se(`Problem with setting cache for selector "${n}": ${ce.message}`)}}function G(R){if(yc.includes(n)){const V=`Recoil selector has circular dependencies: ${yc.slice(yc.indexOf(n)).join("  ")}`;return Yd(Se(V))}yc.push(n);try{return R()}finally{yc.pop()}}function D(R,V){const j=V.atomValues.get(n);return j??a.get(ce=>{var Y;return typeof ce!="string"&&Bc(!1),(Y=t9(R,V,ce))===null||Y===void 0?void 0:Y.contents})}function B(R,V){return G(()=>A(R,V))}function O(R){R.atomValues.delete(n)}function re(R,V){e==null&&Bc(!1);for(const ce of o){var j;const Y=o9(ce);(j=Y.clearCache)===null||j===void 0||j.call(Y,R,V)}o.clear(),O(V),a.clear(),uT(R,e)}return s!=null?e=cT({key:n,nodeType:"selector",peek:D,get:B,set:(V,j,ce)=>{let Y=!1;const we=new Map;function Te({key:Fe}){if(Y)throw Se("Recoil: Async selector sets are not currently supported.");const lt=Xd(V,j,Fe);if(lt.state==="hasValue")return lt.contents;if(lt.state==="loading"){const dr=`Getting value of asynchronous atom or selector "${Fe}" in a pending state while setting selector "${n}" is not yet supported.`;throw Se(dr)}else throw lt.contents}function ue(Fe,lt){if(Y)throw Se("Recoil: Async selector sets are not currently supported.");const dr=typeof lt=="function"?lt(Te(Fe)):lt;n9(V,j,Fe.key,dr).forEach((Zn,Fn)=>we.set(Fn,Zn))}function et(Fe){ue(Fe,i9)}const Pt=s({set:ue,get:Te,reset:et},ce);if(Pt!==void 0)throw Qe(Pt)?Se("Recoil: Async selector sets are not currently supported."):Se("Recoil: selector set should be a void function.");return Y=!0,we},init:d,invalidate:O,clearCache:re,shouldDeleteConfigOnRelease:f,dangerouslyAllowMutability:t.dangerouslyAllowMutability,shouldRestoreFromSnapshots:!1,retainedBy:l}):e=cT({key:n,nodeType:"selector",peek:D,get:B,init:d,invalidate:O,clearCache:re,shouldDeleteConfigOnRelease:f,dangerouslyAllowMutability:t.dangerouslyAllowMutability,shouldRestoreFromSnapshots:!1,retainedBy:l})}GC.value=t=>new qC(t);var ml=GC;const{isLoadable:d9,loadableWithError:zy,loadableWithPromise:Wy,loadableWithValue:ha}=Gh,{WrappedValue:QC}=zC,{peekNodeInfo:f9}=Ds,{DEFAULT_VALUE:no,DefaultValue:ji,getConfigDeletionHandler:YC,registerNode:p9,setConfigDeletionHandler:g9}=Vn,{isRecoilValue:m9}=fl,{getRecoilValueAsLoadable:y9,markRecoilValueModified:_9,setRecoilValue:hT,setRecoilValueLoadable:v9}=Zr,{retainedByOptionWithDefault:w9}=Zo,_c=t=>t instanceof QC?t.value:t;function b9(t){const{key:e,persistence_UNSTABLE:n}=t,r=w9(t.retainedBy_UNSTABLE);let i=0;function s(m){return Wy(m.then(v=>(o=ha(v),v)).catch(v=>{throw o=zy(v),v}))}let o=Qe(t.default)?s(t.default):d9(t.default)?t.default.state==="loading"?s(t.default.contents):t.default:ha(_c(t.default));o.contents;let a;const l=new Map;function c(m){return m}function u(m,v){const w=v.then(S=>{var E,T;return((T=((E=m.getState().nextTree)!==null&&E!==void 0?E:m.getState().currentTree).atomValues.get(e))===null||T===void 0?void 0:T.contents)===w&&hT(m,y,S),S}).catch(S=>{var E,T;throw((T=((E=m.getState().nextTree)!==null&&E!==void 0?E:m.getState().currentTree).atomValues.get(e))===null||T===void 0?void 0:T.contents)===w&&v9(m,y,zy(S)),S});return w}function h(m,v,w){var S;i++;const E=()=>{var L;i--,(L=l.get(m))===null||L===void 0||L.forEach(ee=>ee()),l.delete(m)};if(m.getState().knownAtoms.add(e),o.state==="loading"){const L=()=>{var ee;((ee=m.getState().nextTree)!==null&&ee!==void 0?ee:m.getState().currentTree).atomValues.has(e)||_9(m,y)};o.contents.finally(L)}const T=(S=t.effects)!==null&&S!==void 0?S:t.effects_UNSTABLE;if(T!=null){let L=function(O){if(be&&O.key===e){const re=he;return re instanceof ji?d(m,v):Qe(re)?Wy(re.then(R=>R instanceof ji?o.toPromise():R)):ha(re)}return y9(m,O)},ee=function(O){return L(O).toPromise()},se=function(O){var re;const R=f9(m,(re=m.getState().nextTree)!==null&&re!==void 0?re:m.getState().currentTree,O.key);return be&&O.key===e&&!(he instanceof ji)?{...R,isSet:!0,loadable:L(O)}:R},he=no,be=!0,I=!1,N=null;const G=O=>re=>{if(be){const R=L(y),V=R.state==="hasValue"?R.contents:no;he=typeof re=="function"?re(V):re,Qe(he)&&(he=he.then(j=>(N={effect:O,value:j},j)))}else{if(Qe(re))throw Se("Setting atoms to async values is not implemented.");typeof re!="function"&&(N={effect:O,value:_c(re)}),hT(m,y,typeof re=="function"?R=>{const V=_c(re(R));return N={effect:O,value:V},V}:_c(re))}},D=O=>()=>G(O)(no),B=O=>re=>{var R;const{release:V}=m.subscribeToTransactions(j=>{var ce;let{currentTree:Y,previousTree:we}=j.getState();we||(we=Y);const Te=(ce=Y.atomValues.get(e))!==null&&ce!==void 0?ce:o;if(Te.state==="hasValue"){var ue,et,Pt,Fe;const lt=Te.contents,dr=(ue=we.atomValues.get(e))!==null&&ue!==void 0?ue:o,Ws=dr.state==="hasValue"?dr.contents:no;((et=N)===null||et===void 0?void 0:et.effect)!==O||((Pt=N)===null||Pt===void 0?void 0:Pt.value)!==lt?re(lt,Ws,!Y.atomValues.has(e)):((Fe=N)===null||Fe===void 0?void 0:Fe.effect)===O&&(N=null)}},e);l.set(m,[...(R=l.get(m))!==null&&R!==void 0?R:[],V])};for(const O of T)try{const re=O({node:y,storeID:m.storeID,parentStoreID_UNSTABLE:m.parentStoreID,trigger:w,setSelf:G(O),resetSelf:D(O),onSet:B(O),getPromise:ee,getLoadable:L,getInfo_UNSTABLE:se});if(re!=null){var A;l.set(m,[...(A=l.get(m))!==null&&A!==void 0?A:[],re])}}catch(re){he=re,I=!0}if(be=!1,!(he instanceof ji)){var $;const O=I?zy(he):Qe(he)?Wy(u(m,he)):ha(_c(he));O.contents,v.atomValues.set(e,O),($=m.getState().nextTree)===null||$===void 0||$.atomValues.set(e,O)}}return E}function d(m,v){var w,S;return(w=(S=v.atomValues.get(e))!==null&&S!==void 0?S:a)!==null&&w!==void 0?w:o}function f(m,v){if(v.atomValues.has(e))return rt(v.atomValues.get(e));if(v.nonvalidatedAtoms.has(e)){if(a!=null)return a;if(n==null)return o;const w=v.nonvalidatedAtoms.get(e),S=n.validator(w,no);return a=S instanceof ji?o:ha(S),a}else return o}function p(){a=void 0}function g(m,v,w){if(v.atomValues.has(e)){const S=rt(v.atomValues.get(e));if(S.state==="hasValue"&&w===S.contents)return new Map}else if(!v.nonvalidatedAtoms.has(e)&&w instanceof ji)return new Map;return a=void 0,new Map().set(e,ha(w))}function _(){return YC(e)!==void 0&&i<=0}const y=p9({key:e,nodeType:"atom",peek:d,get:f,set:g,init:h,invalidate:p,shouldDeleteConfigOnRelease:_,dangerouslyAllowMutability:t.dangerouslyAllowMutability,persistence_UNSTABLE:t.persistence_UNSTABLE?{type:t.persistence_UNSTABLE.type,backButton:t.persistence_UNSTABLE.backButton}:void 0,shouldRestoreFromSnapshots:!0,retainedBy:r});return y}function ab(t){const{...e}=t,n="default"in t?t.default:new Promise(()=>{});return m9(n)?S9({...e,default:n}):b9({...e,default:n})}function S9(t){const e=ab({...t,default:no,persistence_UNSTABLE:t.persistence_UNSTABLE===void 0?void 0:{...t.persistence_UNSTABLE,validator:r=>r instanceof ji?r:rt(t.persistence_UNSTABLE).validator(r,no)},effects:t.effects,effects_UNSTABLE:t.effects_UNSTABLE}),n=ml({key:`${t.key}__withFallback`,get:({get:r})=>{const i=r(e);return i instanceof ji?t.default:i},set:({set:r},i)=>r(e,i),cachePolicy_UNSTABLE:{eviction:"most-recent"},dangerouslyAllowMutability:t.dangerouslyAllowMutability});return g9(n.key,YC(t.key)),n}ab.value=t=>new QC(t);var XC=ab;class E9{constructor(e){var n;ye(this,"_map",void 0),ye(this,"_keyMapper",void 0),this._map=new Map,this._keyMapper=(n=e==null?void 0:e.mapKey)!==null&&n!==void 0?n:r=>r}size(){return this._map.size}has(e){return this._map.has(this._keyMapper(e))}get(e){return this._map.get(this._keyMapper(e))}set(e,n){this._map.set(this._keyMapper(e),n)}delete(e){this._map.delete(this._keyMapper(e))}clear(){this._map.clear()}}var T9={MapCache:E9},I9=T9.MapCache,x9=Object.freeze({__proto__:null,MapCache:I9});const{LRUCache:dT}=HC,{MapCache:R9}=x9,Zd={equality:"reference",eviction:"none",maxSize:1/0};function A9({equality:t=Zd.equality,eviction:e=Zd.eviction,maxSize:n=Zd.maxSize}=Zd){const r=k9(t);return P9(e,n,r)}function k9(t){switch(t){case"reference":return e=>e;case"value":return e=>nm(e)}throw Se(`Unrecognized equality policy ${t}`)}function P9(t,e,n){switch(t){case"keep-all":return new R9({mapKey:n});case"lru":return new dT({mapKey:n,maxSize:rt(e)});case"most-recent":return new dT({mapKey:n,maxSize:1})}throw Se(`Unrecognized eviction policy ${t}`)}var JC=A9;const{setConfigDeletionHandler:C9}=Vn;function N9(t){var e,n;const r=JC({equality:(e=(n=t.cachePolicyForParams_UNSTABLE)===null||n===void 0?void 0:n.equality)!==null&&e!==void 0?e:"value",eviction:"keep-all"});return i=>{var s,o;const a=r.get(i);if(a!=null)return a;const{cachePolicyForParams_UNSTABLE:l,...c}=t,u="default"in t?t.default:new Promise(()=>{}),h=XC({...c,key:`${t.key}__${(s=nm(i))!==null&&s!==void 0?s:"void"}`,default:typeof u=="function"?u(i):u,retainedBy_UNSTABLE:typeof t.retainedBy_UNSTABLE=="function"?t.retainedBy_UNSTABLE(i):t.retainedBy_UNSTABLE,effects:typeof t.effects=="function"?t.effects(i):typeof t.effects_UNSTABLE=="function"?t.effects_UNSTABLE(i):(o=t.effects)!==null&&o!==void 0?o:t.effects_UNSTABLE});return r.set(i,h),C9(h.key,()=>{r.delete(i)}),h}}var D9=N9;const{setConfigDeletionHandler:O9}=Vn;let L9=0;function M9(t){var e,n;const r=JC({equality:(e=(n=t.cachePolicyForParams_UNSTABLE)===null||n===void 0?void 0:n.equality)!==null&&e!==void 0?e:"value",eviction:"keep-all"});return i=>{var s;let o;try{o=r.get(i)}catch(d){throw Se(`Problem with cache lookup for selector ${t.key}: ${d.message}`)}if(o!=null)return o;const a=`${t.key}__selectorFamily/${(s=nm(i,{allowFunctions:!0}))!==null&&s!==void 0?s:"void"}/${L9++}`,l=d=>t.get(i)(d),c=t.cachePolicy_UNSTABLE,u=typeof t.retainedBy_UNSTABLE=="function"?t.retainedBy_UNSTABLE(i):t.retainedBy_UNSTABLE;let h;if(t.set!=null){const d=t.set;h=ml({key:a,get:l,set:(p,g)=>d(i)(p,g),cachePolicy_UNSTABLE:c,dangerouslyAllowMutability:t.dangerouslyAllowMutability,retainedBy_UNSTABLE:u})}else h=ml({key:a,get:l,cachePolicy_UNSTABLE:c,dangerouslyAllowMutability:t.dangerouslyAllowMutability,retainedBy_UNSTABLE:u});return r.set(i,h),O9(h.key,()=>{r.delete(i)}),h}}var Os=M9;const V9=Os({key:"__constant",get:t=>()=>t,cachePolicyForParams_UNSTABLE:{equality:"reference"}});function F9(t){return V9(t)}var $9=F9;const U9=Os({key:"__error",get:t=>()=>{throw Se(t)},cachePolicyForParams_UNSTABLE:{equality:"reference"}});function B9(t){return U9(t)}var j9=B9;function z9(t){return t}var W9=z9;const{loadableWithError:ZC,loadableWithPromise:eN,loadableWithValue:tN}=Gh;function rm(t,e){const n=Array(e.length).fill(void 0),r=Array(e.length).fill(void 0);for(const[i,s]of e.entries())try{n[i]=t(s)}catch(o){r[i]=o}return[n,r]}function H9(t){return t!=null&&!Qe(t)}function im(t){return Array.isArray(t)?t:Object.getOwnPropertyNames(t).map(e=>t[e])}function Cv(t,e){return Array.isArray(t)?e:Object.getOwnPropertyNames(t).reduce((n,r,i)=>({...n,[r]:e[i]}),{})}function Ka(t,e,n){const r=n.map((i,s)=>i==null?tN(e[s]):Qe(i)?eN(i):ZC(i));return Cv(t,r)}function q9(t,e){return e.map((n,r)=>n===void 0?t[r]:n)}const K9=Os({key:"__waitForNone",get:t=>({get:e})=>{const n=im(t),[r,i]=rm(e,n);return Ka(t,r,i)},dangerouslyAllowMutability:!0}),G9=Os({key:"__waitForAny",get:t=>({get:e})=>{const n=im(t),[r,i]=rm(e,n);return i.some(s=>!Qe(s))?Ka(t,r,i):new Promise(s=>{for(const[o,a]of i.entries())Qe(a)&&a.then(l=>{r[o]=l,i[o]=void 0,s(Ka(t,r,i))}).catch(l=>{i[o]=l,s(Ka(t,r,i))})})},dangerouslyAllowMutability:!0}),Q9=Os({key:"__waitForAll",get:t=>({get:e})=>{const n=im(t),[r,i]=rm(e,n);if(i.every(o=>o==null))return Cv(t,r);const s=i.find(H9);if(s!=null)throw s;return Promise.all(i).then(o=>Cv(t,q9(r,o)))},dangerouslyAllowMutability:!0}),Y9=Os({key:"__waitForAllSettled",get:t=>({get:e})=>{const n=im(t),[r,i]=rm(e,n);return i.every(s=>!Qe(s))?Ka(t,r,i):Promise.all(i.map((s,o)=>Qe(s)?s.then(a=>{r[o]=a,i[o]=void 0}).catch(a=>{r[o]=void 0,i[o]=a}):null)).then(()=>Ka(t,r,i))},dangerouslyAllowMutability:!0}),X9=Os({key:"__noWait",get:t=>({get:e})=>{try{return ml.value(tN(e(t)))}catch(n){return ml.value(Qe(n)?eN(n):ZC(n))}},dangerouslyAllowMutability:!0});var J9={waitForNone:K9,waitForAny:G9,waitForAll:Q9,waitForAllSettled:Y9,noWait:X9};const{RecoilLoadable:Z9}=Gh,{DefaultValue:ej}=Vn,{RecoilRoot:tj,useRecoilStoreID:nj}=ki,{isRecoilValue:rj}=fl,{retentionZone:ij}=Hg,{freshSnapshot:sj}=Xg,{useRecoilState:oj,useRecoilState_TRANSITION_SUPPORT_UNSTABLE:aj,useRecoilStateLoadable:lj,useRecoilValue:cj,useRecoilValue_TRANSITION_SUPPORT_UNSTABLE:uj,useRecoilValueLoadable:hj,useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE:dj,useResetRecoilState:fj,useSetRecoilState:pj}=T6,{useGotoRecoilSnapshot:gj,useRecoilSnapshot:mj,useRecoilTransactionObserver:yj}=FC,{useRecoilCallback:_j}=jC,{noWait:vj,waitForAll:wj,waitForAllSettled:bj,waitForAny:Sj,waitForNone:Ej}=J9;var lb={DefaultValue:ej,isRecoilValue:rj,RecoilLoadable:Z9,RecoilEnv:Ul,RecoilRoot:tj,useRecoilStoreID:nj,useRecoilBridgeAcrossReactRoots_UNSTABLE:X6,atom:XC,selector:ml,atomFamily:D9,selectorFamily:Os,constSelector:$9,errorSelector:j9,readOnlySelector:W9,noWait:vj,waitForNone:Ej,waitForAny:Sj,waitForAll:wj,waitForAllSettled:bj,useRecoilValue:cj,useRecoilValueLoadable:hj,useRecoilState:oj,useRecoilStateLoadable:lj,useSetRecoilState:pj,useResetRecoilState:fj,useGetRecoilValueInfo_UNSTABLE:H6,useRecoilRefresher_UNSTABLE:xB,useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE:dj,useRecoilValue_TRANSITION_SUPPORT_UNSTABLE:uj,useRecoilState_TRANSITION_SUPPORT_UNSTABLE:aj,useRecoilCallback:_j,useRecoilTransaction_UNSTABLE:CB,useGotoRecoilSnapshot:gj,useRecoilSnapshot:mj,useRecoilTransactionObserver_UNSTABLE:yj,snapshot_UNSTABLE:sj,useRetain:nb,retentionZone:ij},Tj=lb.RecoilRoot,Ij=lb.atom,cb=lb.useRecoilState;const ui="/assets/usa-BeFRcQv-.png",ub=Ij({key:"webSettings",default:{theme:"light",language:"en",languageLogo:ui,selectedTab:"coins"}}),ed="/assets/logo-DRWUd7yX.png",Ga="/assets/germany-RcDfzgS0.webp",Qa="/assets/italy-k4diam-A.webp",Ya="/assets/japan-CxpmQMZT.png",xj="/assets/userIcon-FGfoLkwV.webp";function Rj(){if(console&&console.warn){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];typeof e[0]=="string"&&(e[0]=`react-i18next:: ${e[0]}`),console.warn(...e)}}const fT={};function Nv(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];typeof e[0]=="string"&&fT[e[0]]||(typeof e[0]=="string"&&(fT[e[0]]=new Date),Rj(...e))}const nN=(t,e)=>()=>{if(t.isInitialized)e();else{const n=()=>{setTimeout(()=>{t.off("initialized",n)},0),e()};t.on("initialized",n)}};function pT(t,e,n){t.loadNamespaces(e,nN(t,n))}function gT(t,e,n,r){typeof n=="string"&&(n=[n]),n.forEach(i=>{t.options.ns.indexOf(i)<0&&t.options.ns.push(i)}),t.loadLanguages(e,nN(t,r))}function Aj(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=e.languages[0],i=e.options?e.options.fallbackLng:!1,s=e.languages[e.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const o=(a,l)=>{const c=e.services.backendConnector.state[`${a}|${l}`];return c===-1||c===2};return n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&e.services.backendConnector.backend&&e.isLanguageChangingTo&&!o(e.isLanguageChangingTo,t)?!1:!!(e.hasResourceBundle(r,t)||!e.services.backendConnector.backend||e.options.resources&&!e.options.partialBundledLanguages||o(r,t)&&(!i||o(s,t)))}function kj(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return!e.languages||!e.languages.length?(Nv("i18n.languages were undefined or empty",e.languages),!0):e.options.ignoreJSONStructure!==void 0?e.hasLoadedNamespace(t,{lng:n.lng,precheck:(i,s)=>{if(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&i.services.backendConnector.backend&&i.isLanguageChangingTo&&!s(i.isLanguageChangingTo,t))return!1}}):Aj(t,e,n)}const Pj=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,Cj={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},Nj=t=>Cj[t],Dj=t=>t.replace(Pj,Nj);let Dv={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:Dj};function Oj(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Dv={...Dv,...t}}function Lj(){return Dv}let rN;function Mj(t){rN=t}function Vj(){return rN}const Fj={type:"3rdParty",init(t){Oj(t.options.react),Mj(t)}},$j=U.createContext();class Uj{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(n=>{this.usedNamespaces[n]||(this.usedNamespaces[n]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const Bj=(t,e)=>{const n=U.useRef();return U.useEffect(()=>{n.current=e?n.current:t},[t,e]),n.current};function iN(t,e,n,r){return t.getFixedT(e,n,r)}function jj(t,e,n,r){return U.useCallback(iN(t,e,n,r),[t,e,n,r])}function Jn(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{i18n:n}=e,{i18n:r,defaultNS:i}=U.useContext($j)||{},s=n||r||Vj();if(s&&!s.reportNamespaces&&(s.reportNamespaces=new Uj),!s){Nv("You will need to pass in an i18next instance by using initReactI18next");const w=(E,T)=>typeof T=="string"?T:T&&typeof T=="object"&&typeof T.defaultValue=="string"?T.defaultValue:Array.isArray(E)?E[E.length-1]:E,S=[w,{},!1];return S.t=w,S.i18n={},S.ready=!1,S}s.options.react&&s.options.react.wait!==void 0&&Nv("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const o={...Lj(),...s.options.react,...e},{useSuspense:a,keyPrefix:l}=o;let c=t||i||s.options&&s.options.defaultNS;c=typeof c=="string"?[c]:c||["translation"],s.reportNamespaces.addUsedNamespaces&&s.reportNamespaces.addUsedNamespaces(c);const u=(s.isInitialized||s.initializedStoreOnce)&&c.every(w=>kj(w,s,o)),h=jj(s,e.lng||null,o.nsMode==="fallback"?c:c[0],l),d=()=>h,f=()=>iN(s,e.lng||null,o.nsMode==="fallback"?c:c[0],l),[p,g]=U.useState(d);let _=c.join();e.lng&&(_=`${e.lng}${_}`);const y=Bj(_),m=U.useRef(!0);U.useEffect(()=>{const{bindI18n:w,bindI18nStore:S}=o;m.current=!0,!u&&!a&&(e.lng?gT(s,e.lng,c,()=>{m.current&&g(f)}):pT(s,c,()=>{m.current&&g(f)})),u&&y&&y!==_&&m.current&&g(f);function E(){m.current&&g(f)}return w&&s&&s.on(w,E),S&&s&&s.store.on(S,E),()=>{m.current=!1,w&&s&&w.split(" ").forEach(T=>s.off(T,E)),S&&s&&S.split(" ").forEach(T=>s.store.off(T,E))}},[s,_]),U.useEffect(()=>{m.current&&u&&g(d)},[s,l,u]);const v=[p,s,u];if(v.t=p,v.i18n=s,v.ready=u,u||!u&&!a)return v;throw new Promise(w=>{e.lng?gT(s,e.lng,c,()=>w()):pT(s,c,()=>w())})}const zj={type:"logger",log(t){this.output("log",t)},warn(t){this.output("warn",t)},error(t){this.output("error",t)},output(t,e){console&&console[t]&&console[t].apply(console,e)}};let Wj=class Ov{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(e,n)}init(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=n.prefix||"i18next:",this.logger=e||zj,this.options=n,this.debug=n.debug}log(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"log","",!0)}warn(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"warn","",!0)}error(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"error","")}deprecate(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"warn","WARNING DEPRECATED: ",!0)}forward(e,n,r,i){return i&&!this.debug?null:(typeof e[0]=="string"&&(e[0]=`${r}${this.prefix} ${e[0]}`),this.logger[n](e))}create(e){return new Ov(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new Ov(this.logger,e)}};var Fr=new Wj;class sm{constructor(){this.observers={}}on(e,n){return e.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const i=this.observers[r].get(n)||0;this.observers[r].set(n,i+1)}),this}off(e,n){if(this.observers[e]){if(!n){delete this.observers[e];return}this.observers[e].delete(n)}}emit(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];this.observers[e]&&Array.from(this.observers[e].entries()).forEach(o=>{let[a,l]=o;for(let c=0;c<l;c++)a(...r)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(o=>{let[a,l]=o;for(let c=0;c<l;c++)a.apply(a,[e,...r])})}}function vc(){let t,e;const n=new Promise((r,i)=>{t=r,e=i});return n.resolve=t,n.reject=e,n}function mT(t){return t==null?"":""+t}function Hj(t,e,n){t.forEach(r=>{e[r]&&(n[r]=e[r])})}const qj=/###/g;function mu(t,e,n){function r(a){return a&&a.indexOf("###")>-1?a.replace(qj,"."):a}function i(){return!t||typeof t=="string"}const s=typeof e!="string"?e:e.split(".");let o=0;for(;o<s.length-1;){if(i())return{};const a=r(s[o]);!t[a]&&n&&(t[a]=new n),Object.prototype.hasOwnProperty.call(t,a)?t=t[a]:t={},++o}return i()?{}:{obj:t,k:r(s[o])}}function yT(t,e,n){const{obj:r,k:i}=mu(t,e,Object);if(r!==void 0||e.length===1){r[i]=n;return}let s=e[e.length-1],o=e.slice(0,e.length-1),a=mu(t,o,Object);for(;a.obj===void 0&&o.length;)s=`${o[o.length-1]}.${s}`,o=o.slice(0,o.length-1),a=mu(t,o,Object),a&&a.obj&&typeof a.obj[`${a.k}.${s}`]<"u"&&(a.obj=void 0);a.obj[`${a.k}.${s}`]=n}function Kj(t,e,n,r){const{obj:i,k:s}=mu(t,e,Object);i[s]=i[s]||[],r&&(i[s]=i[s].concat(n)),r||i[s].push(n)}function Vp(t,e){const{obj:n,k:r}=mu(t,e);if(n)return n[r]}function Gj(t,e,n){const r=Vp(t,n);return r!==void 0?r:Vp(e,n)}function sN(t,e,n){for(const r in e)r!=="__proto__"&&r!=="constructor"&&(r in t?typeof t[r]=="string"||t[r]instanceof String||typeof e[r]=="string"||e[r]instanceof String?n&&(t[r]=e[r]):sN(t[r],e[r],n):t[r]=e[r]);return t}function da(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var Qj={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function Yj(t){return typeof t=="string"?t.replace(/[&<>"'\/]/g,e=>Qj[e]):t}class Xj{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const n=this.regExpMap.get(e);if(n!==void 0)return n;const r=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,r),this.regExpQueue.push(e),r}}const Jj=[" ",",","?","!",";"],Zj=new Xj(20);function ez(t,e,n){e=e||"",n=n||"";const r=Jj.filter(o=>e.indexOf(o)<0&&n.indexOf(o)<0);if(r.length===0)return!0;const i=Zj.getRegExp(`(${r.map(o=>o==="?"?"\\?":o).join("|")})`);let s=!i.test(t);if(!s){const o=t.indexOf(n);o>0&&!i.test(t.substring(0,o))&&(s=!0)}return s}function Lv(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!t)return;if(t[e])return t[e];const r=e.split(n);let i=t;for(let s=0;s<r.length;){if(!i||typeof i!="object")return;let o,a="";for(let l=s;l<r.length;++l)if(l!==s&&(a+=n),a+=r[l],o=i[a],o!==void 0){if(["string","number","boolean"].indexOf(typeof o)>-1&&l<r.length-1)continue;s+=l-s+1;break}i=o}return i}function Fp(t){return t&&t.indexOf("_")>0?t.replace("_","-"):t}class _T extends sm{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const n=this.options.ns.indexOf(e);n>-1&&this.options.ns.splice(n,1)}getResource(e,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const s=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,o=i.ignoreJSONStructure!==void 0?i.ignoreJSONStructure:this.options.ignoreJSONStructure;let a;e.indexOf(".")>-1?a=e.split("."):(a=[e,n],r&&(Array.isArray(r)?a.push(...r):typeof r=="string"&&s?a.push(...r.split(s)):a.push(r)));const l=Vp(this.data,a);return!l&&!n&&!r&&e.indexOf(".")>-1&&(e=a[0],n=a[1],r=a.slice(2).join(".")),l||!o||typeof r!="string"?l:Lv(this.data&&this.data[e]&&this.data[e][n],r,s)}addResource(e,n,r,i){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const o=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator;let a=[e,n];r&&(a=a.concat(o?r.split(o):r)),e.indexOf(".")>-1&&(a=e.split("."),i=n,n=a[1]),this.addNamespaces(n),yT(this.data,a,i),s.silent||this.emit("added",e,n,r,i)}addResources(e,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const s in r)(typeof r[s]=="string"||Object.prototype.toString.apply(r[s])==="[object Array]")&&this.addResource(e,n,s,r[s],{silent:!0});i.silent||this.emit("added",e,n,r)}addResourceBundle(e,n,r,i,s){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},a=[e,n];e.indexOf(".")>-1&&(a=e.split("."),i=r,r=n,n=a[1]),this.addNamespaces(n);let l=Vp(this.data,a)||{};o.skipCopy||(r=JSON.parse(JSON.stringify(r))),i?sN(l,r,s):l={...l,...r},yT(this.data,a,l),o.silent||this.emit("added",e,n,r)}removeResourceBundle(e,n){this.hasResourceBundle(e,n)&&delete this.data[e][n],this.removeNamespaces(n),this.emit("removed",e,n)}hasResourceBundle(e,n){return this.getResource(e,n)!==void 0}getResourceBundle(e,n){return n||(n=this.options.defaultNS),this.options.compatibilityAPI==="v1"?{...this.getResource(e,n)}:this.getResource(e,n)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const n=this.getDataByLanguage(e);return!!(n&&Object.keys(n)||[]).find(i=>n[i]&&Object.keys(n[i]).length>0)}toJSON(){return this.data}}var oN={processors:{},addPostProcessor(t){this.processors[t.name]=t},handle(t,e,n,r,i){return t.forEach(s=>{this.processors[s]&&(e=this.processors[s].process(e,n,r,i))}),e}};const vT={};class $p extends sm{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Hj(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Fr.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(e==null)return!1;const r=this.resolve(e,n);return r&&r.res!==void 0}extractFromKey(e,n){let r=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const i=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator;let s=n.ns||this.options.defaultNS||[];const o=r&&e.indexOf(r)>-1,a=!this.options.userDefinedKeySeparator&&!n.keySeparator&&!this.options.userDefinedNsSeparator&&!n.nsSeparator&&!ez(e,r,i);if(o&&!a){const l=e.match(this.interpolator.nestingRegexp);if(l&&l.length>0)return{key:e,namespaces:s};const c=e.split(r);(r!==i||r===i&&this.options.ns.indexOf(c[0])>-1)&&(s=c.shift()),e=c.join(i)}return typeof s=="string"&&(s=[s]),{key:e,namespaces:s}}translate(e,n,r){if(typeof n!="object"&&this.options.overloadTranslationOptionHandler&&(n=this.options.overloadTranslationOptionHandler(arguments)),typeof n=="object"&&(n={...n}),n||(n={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);const i=n.returnDetails!==void 0?n.returnDetails:this.options.returnDetails,s=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator,{key:o,namespaces:a}=this.extractFromKey(e[e.length-1],n),l=a[a.length-1],c=n.lng||this.language,u=n.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(c&&c.toLowerCase()==="cimode"){if(u){const w=n.nsSeparator||this.options.nsSeparator;return i?{res:`${l}${w}${o}`,usedKey:o,exactUsedKey:o,usedLng:c,usedNS:l,usedParams:this.getUsedParamsDetails(n)}:`${l}${w}${o}`}return i?{res:o,usedKey:o,exactUsedKey:o,usedLng:c,usedNS:l,usedParams:this.getUsedParamsDetails(n)}:o}const h=this.resolve(e,n);let d=h&&h.res;const f=h&&h.usedKey||o,p=h&&h.exactUsedKey||o,g=Object.prototype.toString.apply(d),_=["[object Number]","[object Function]","[object RegExp]"],y=n.joinArrays!==void 0?n.joinArrays:this.options.joinArrays,m=!this.i18nFormat||this.i18nFormat.handleAsObject;if(m&&d&&(typeof d!="string"&&typeof d!="boolean"&&typeof d!="number")&&_.indexOf(g)<0&&!(typeof y=="string"&&g==="[object Array]")){if(!n.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const w=this.options.returnedObjectHandler?this.options.returnedObjectHandler(f,d,{...n,ns:a}):`key '${o} (${this.language})' returned an object instead of string.`;return i?(h.res=w,h.usedParams=this.getUsedParamsDetails(n),h):w}if(s){const w=g==="[object Array]",S=w?[]:{},E=w?p:f;for(const T in d)if(Object.prototype.hasOwnProperty.call(d,T)){const A=`${E}${s}${T}`;S[T]=this.translate(A,{...n,joinArrays:!1,ns:a}),S[T]===A&&(S[T]=d[T])}d=S}}else if(m&&typeof y=="string"&&g==="[object Array]")d=d.join(y),d&&(d=this.extendTranslation(d,e,n,r));else{let w=!1,S=!1;const E=n.count!==void 0&&typeof n.count!="string",T=$p.hasDefaultValue(n),A=E?this.pluralResolver.getSuffix(c,n.count,n):"",$=n.ordinal&&E?this.pluralResolver.getSuffix(c,n.count,{ordinal:!1}):"",L=E&&!n.ordinal&&n.count===0&&this.pluralResolver.shouldUseIntlApi(),ee=L&&n[`defaultValue${this.options.pluralSeparator}zero`]||n[`defaultValue${A}`]||n[`defaultValue${$}`]||n.defaultValue;!this.isValidLookup(d)&&T&&(w=!0,d=ee),this.isValidLookup(d)||(S=!0,d=o);const he=(n.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&S?void 0:d,be=T&&ee!==d&&this.options.updateMissing;if(S||w||be){if(this.logger.log(be?"updateKey":"missingKey",c,l,o,be?ee:d),s){const D=this.resolve(o,{...n,keySeparator:!1});D&&D.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let I=[];const N=this.languageUtils.getFallbackCodes(this.options.fallbackLng,n.lng||this.language);if(this.options.saveMissingTo==="fallback"&&N&&N[0])for(let D=0;D<N.length;D++)I.push(N[D]);else this.options.saveMissingTo==="all"?I=this.languageUtils.toResolveHierarchy(n.lng||this.language):I.push(n.lng||this.language);const G=(D,B,O)=>{const re=T&&O!==d?O:he;this.options.missingKeyHandler?this.options.missingKeyHandler(D,l,B,re,be,n):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(D,l,B,re,be,n),this.emit("missingKey",D,l,B,d)};this.options.saveMissing&&(this.options.saveMissingPlurals&&E?I.forEach(D=>{const B=this.pluralResolver.getSuffixes(D,n);L&&n[`defaultValue${this.options.pluralSeparator}zero`]&&B.indexOf(`${this.options.pluralSeparator}zero`)<0&&B.push(`${this.options.pluralSeparator}zero`),B.forEach(O=>{G([D],o+O,n[`defaultValue${O}`]||ee)})}):G(I,o,ee))}d=this.extendTranslation(d,e,n,h,r),S&&d===o&&this.options.appendNamespaceToMissingKey&&(d=`${l}:${o}`),(S||w)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?d=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${l}:${o}`:o,w?d:void 0):d=this.options.parseMissingKeyHandler(d))}return i?(h.res=d,h.usedParams=this.getUsedParamsDetails(n),h):d}extendTranslation(e,n,r,i,s){var o=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const c=typeof e=="string"&&(r&&r.interpolation&&r.interpolation.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let u;if(c){const d=e.match(this.interpolator.nestingRegexp);u=d&&d.length}let h=r.replace&&typeof r.replace!="string"?r.replace:r;if(this.options.interpolation.defaultVariables&&(h={...this.options.interpolation.defaultVariables,...h}),e=this.interpolator.interpolate(e,h,r.lng||this.language,r),c){const d=e.match(this.interpolator.nestingRegexp),f=d&&d.length;u<f&&(r.nest=!1)}!r.lng&&this.options.compatibilityAPI!=="v1"&&i&&i.res&&(r.lng=i.usedLng),r.nest!==!1&&(e=this.interpolator.nest(e,function(){for(var d=arguments.length,f=new Array(d),p=0;p<d;p++)f[p]=arguments[p];return s&&s[0]===f[0]&&!r.context?(o.logger.warn(`It seems you are nesting recursively key: ${f[0]} in key: ${n[0]}`),null):o.translate(...f,n)},r)),r.interpolation&&this.interpolator.reset()}const a=r.postProcess||this.options.postProcess,l=typeof a=="string"?[a]:a;return e!=null&&l&&l.length&&r.applyPostProcessor!==!1&&(e=oN.handle(l,e,n,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...i,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),e}resolve(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r,i,s,o,a;return typeof e=="string"&&(e=[e]),e.forEach(l=>{if(this.isValidLookup(r))return;const c=this.extractFromKey(l,n),u=c.key;i=u;let h=c.namespaces;this.options.fallbackNS&&(h=h.concat(this.options.fallbackNS));const d=n.count!==void 0&&typeof n.count!="string",f=d&&!n.ordinal&&n.count===0&&this.pluralResolver.shouldUseIntlApi(),p=n.context!==void 0&&(typeof n.context=="string"||typeof n.context=="number")&&n.context!=="",g=n.lngs?n.lngs:this.languageUtils.toResolveHierarchy(n.lng||this.language,n.fallbackLng);h.forEach(_=>{this.isValidLookup(r)||(a=_,!vT[`${g[0]}-${_}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(a)&&(vT[`${g[0]}-${_}`]=!0,this.logger.warn(`key "${i}" for languages "${g.join(", ")}" won't get resolved as namespace "${a}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),g.forEach(y=>{if(this.isValidLookup(r))return;o=y;const m=[u];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(m,u,y,_,n);else{let w;d&&(w=this.pluralResolver.getSuffix(y,n.count,n));const S=`${this.options.pluralSeparator}zero`,E=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(d&&(m.push(u+w),n.ordinal&&w.indexOf(E)===0&&m.push(u+w.replace(E,this.options.pluralSeparator)),f&&m.push(u+S)),p){const T=`${u}${this.options.contextSeparator}${n.context}`;m.push(T),d&&(m.push(T+w),n.ordinal&&w.indexOf(E)===0&&m.push(T+w.replace(E,this.options.pluralSeparator)),f&&m.push(T+S))}}let v;for(;v=m.pop();)this.isValidLookup(r)||(s=v,r=this.getResource(y,_,v,n))}))})}),{res:r,usedKey:i,exactUsedKey:s,usedLng:o,usedNS:a}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,n,r,i):this.resourceStore.getResource(e,n,r,i)}getUsedParamsDetails(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=e.replace&&typeof e.replace!="string";let i=r?e.replace:e;if(r&&typeof e.count<"u"&&(i.count=e.count),this.options.interpolation.defaultVariables&&(i={...this.options.interpolation.defaultVariables,...i}),!r){i={...i};for(const s of n)delete i[s]}return i}static hasDefaultValue(e){const n="defaultValue";for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&n===r.substring(0,n.length)&&e[r]!==void 0)return!0;return!1}}function Hy(t){return t.charAt(0).toUpperCase()+t.slice(1)}class wT{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Fr.create("languageUtils")}getScriptPartFromCode(e){if(e=Fp(e),!e||e.indexOf("-")<0)return null;const n=e.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}getLanguagePartFromCode(e){if(e=Fp(e),!e||e.indexOf("-")<0)return e;const n=e.split("-");return this.formatLanguageCode(n[0])}formatLanguageCode(e){if(typeof e=="string"&&e.indexOf("-")>-1){const n=["hans","hant","latn","cyrl","cans","mong","arab"];let r=e.split("-");return this.options.lowerCaseLng?r=r.map(i=>i.toLowerCase()):r.length===2?(r[0]=r[0].toLowerCase(),r[1]=r[1].toUpperCase(),n.indexOf(r[1].toLowerCase())>-1&&(r[1]=Hy(r[1].toLowerCase()))):r.length===3&&(r[0]=r[0].toLowerCase(),r[1].length===2&&(r[1]=r[1].toUpperCase()),r[0]!=="sgn"&&r[2].length===2&&(r[2]=r[2].toUpperCase()),n.indexOf(r[1].toLowerCase())>-1&&(r[1]=Hy(r[1].toLowerCase())),n.indexOf(r[2].toLowerCase())>-1&&(r[2]=Hy(r[2].toLowerCase()))),r.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let n;return e.forEach(r=>{if(n)return;const i=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(i))&&(n=i)}),!n&&this.options.supportedLngs&&e.forEach(r=>{if(n)return;const i=this.getLanguagePartFromCode(r);if(this.isSupportedCode(i))return n=i;n=this.options.supportedLngs.find(s=>{if(s===i)return s;if(!(s.indexOf("-")<0&&i.indexOf("-")<0)&&(s.indexOf("-")>0&&i.indexOf("-")<0&&s.substring(0,s.indexOf("-"))===i||s.indexOf(i)===0&&i.length>1))return s})}),n||(n=this.getFallbackCodes(this.options.fallbackLng)[0]),n}getFallbackCodes(e,n){if(!e)return[];if(typeof e=="function"&&(e=e(n)),typeof e=="string"&&(e=[e]),Object.prototype.toString.apply(e)==="[object Array]")return e;if(!n)return e.default||[];let r=e[n];return r||(r=e[this.getScriptPartFromCode(n)]),r||(r=e[this.formatLanguageCode(n)]),r||(r=e[this.getLanguagePartFromCode(n)]),r||(r=e.default),r||[]}toResolveHierarchy(e,n){const r=this.getFallbackCodes(n||this.options.fallbackLng||[],e),i=[],s=o=>{o&&(this.isSupportedCode(o)?i.push(o):this.logger.warn(`rejecting language code not found in supportedLngs: ${o}`))};return typeof e=="string"&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&s(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&s(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&s(this.getLanguagePartFromCode(e))):typeof e=="string"&&s(this.formatLanguageCode(e)),r.forEach(o=>{i.indexOf(o)<0&&s(this.formatLanguageCode(o))}),i}}let tz=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],nz={1:function(t){return+(t>1)},2:function(t){return+(t!=1)},3:function(t){return 0},4:function(t){return t%10==1&&t%100!=11?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2},5:function(t){return t==0?0:t==1?1:t==2?2:t%100>=3&&t%100<=10?3:t%100>=11?4:5},6:function(t){return t==1?0:t>=2&&t<=4?1:2},7:function(t){return t==1?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2},8:function(t){return t==1?0:t==2?1:t!=8&&t!=11?2:3},9:function(t){return+(t>=2)},10:function(t){return t==1?0:t==2?1:t<7?2:t<11?3:4},11:function(t){return t==1||t==11?0:t==2||t==12?1:t>2&&t<20?2:3},12:function(t){return+(t%10!=1||t%100==11)},13:function(t){return+(t!==0)},14:function(t){return t==1?0:t==2?1:t==3?2:3},15:function(t){return t%10==1&&t%100!=11?0:t%10>=2&&(t%100<10||t%100>=20)?1:2},16:function(t){return t%10==1&&t%100!=11?0:t!==0?1:2},17:function(t){return t==1||t%10==1&&t%100!=11?0:1},18:function(t){return t==0?0:t==1?1:2},19:function(t){return t==1?0:t==0||t%100>1&&t%100<11?1:t%100>10&&t%100<20?2:3},20:function(t){return t==1?0:t==0||t%100>0&&t%100<20?1:2},21:function(t){return t%100==1?1:t%100==2?2:t%100==3||t%100==4?3:0},22:function(t){return t==1?0:t==2?1:(t<0||t>10)&&t%10==0?2:3}};const rz=["v1","v2","v3"],iz=["v4"],bT={zero:0,one:1,two:2,few:3,many:4,other:5};function sz(){const t={};return tz.forEach(e=>{e.lngs.forEach(n=>{t[n]={numbers:e.nr,plurals:nz[e.fc]}})}),t}class oz{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=e,this.options=n,this.logger=Fr.create("pluralResolver"),(!this.options.compatibilityJSON||iz.includes(this.options.compatibilityJSON))&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=sz()}addRule(e,n){this.rules[e]=n}getRule(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(Fp(e==="dev"?"en":e),{type:n.ordinal?"ordinal":"cardinal"})}catch{return}return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}needsPlural(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=this.getRule(e,n);return this.shouldUseIntlApi()?r&&r.resolvedOptions().pluralCategories.length>1:r&&r.numbers.length>1}getPluralFormsOfKey(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(e,r).map(i=>`${n}${i}`)}getSuffixes(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=this.getRule(e,n);return r?this.shouldUseIntlApi()?r.resolvedOptions().pluralCategories.sort((i,s)=>bT[i]-bT[s]).map(i=>`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${i}`):r.numbers.map(i=>this.getSuffix(e,i,n)):[]}getSuffix(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i=this.getRule(e,r);return i?this.shouldUseIntlApi()?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${i.select(n)}`:this.getSuffixRetroCompatible(i,n):(this.logger.warn(`no plural rule found for: ${e}`),"")}getSuffixRetroCompatible(e,n){const r=e.noAbs?e.plurals(n):e.plurals(Math.abs(n));let i=e.numbers[r];this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1&&(i===2?i="plural":i===1&&(i=""));const s=()=>this.options.prepend&&i.toString()?this.options.prepend+i.toString():i.toString();return this.options.compatibilityJSON==="v1"?i===1?"":typeof i=="number"?`_plural_${i.toString()}`:s():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1?s():this.options.prepend&&r.toString()?this.options.prepend+r.toString():r.toString()}shouldUseIntlApi(){return!rz.includes(this.options.compatibilityJSON)}}function ST(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,s=Gj(t,e,n);return!s&&i&&typeof n=="string"&&(s=Lv(t,n,r),s===void 0&&(s=Lv(e,n,r))),s}class az{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=Fr.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||(n=>n),this.init(e)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const n=e.interpolation;this.escape=n.escape!==void 0?n.escape:Yj,this.escapeValue=n.escapeValue!==void 0?n.escapeValue:!0,this.useRawValueToEscape=n.useRawValueToEscape!==void 0?n.useRawValueToEscape:!1,this.prefix=n.prefix?da(n.prefix):n.prefixEscaped||"{{",this.suffix=n.suffix?da(n.suffix):n.suffixEscaped||"}}",this.formatSeparator=n.formatSeparator?n.formatSeparator:n.formatSeparator||",",this.unescapePrefix=n.unescapeSuffix?"":n.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":n.unescapeSuffix||"",this.nestingPrefix=n.nestingPrefix?da(n.nestingPrefix):n.nestingPrefixEscaped||da("$t("),this.nestingSuffix=n.nestingSuffix?da(n.nestingSuffix):n.nestingSuffixEscaped||da(")"),this.nestingOptionsSeparator=n.nestingOptionsSeparator?n.nestingOptionsSeparator:n.nestingOptionsSeparator||",",this.maxReplaces=n.maxReplaces?n.maxReplaces:1e3,this.alwaysFormat=n.alwaysFormat!==void 0?n.alwaysFormat:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(n,r)=>n&&n.source===r?(n.lastIndex=0,n):new RegExp(r,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,n,r,i){let s,o,a;const l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function c(p){return p.replace(/\$/g,"$$$$")}const u=p=>{if(p.indexOf(this.formatSeparator)<0){const m=ST(n,l,p,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(m,void 0,r,{...i,...n,interpolationkey:p}):m}const g=p.split(this.formatSeparator),_=g.shift().trim(),y=g.join(this.formatSeparator).trim();return this.format(ST(n,l,_,this.options.keySeparator,this.options.ignoreJSONStructure),y,r,{...i,...n,interpolationkey:_})};this.resetRegExp();const h=i&&i.missingInterpolationHandler||this.options.missingInterpolationHandler,d=i&&i.interpolation&&i.interpolation.skipOnVariables!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:p=>c(p)},{regex:this.regexp,safeValue:p=>this.escapeValue?c(this.escape(p)):c(p)}].forEach(p=>{for(a=0;s=p.regex.exec(e);){const g=s[1].trim();if(o=u(g),o===void 0)if(typeof h=="function"){const y=h(e,s,i);o=typeof y=="string"?y:""}else if(i&&Object.prototype.hasOwnProperty.call(i,g))o="";else if(d){o=s[0];continue}else this.logger.warn(`missed to pass in variable ${g} for interpolating ${e}`),o="";else typeof o!="string"&&!this.useRawValueToEscape&&(o=mT(o));const _=p.safeValue(o);if(e=e.replace(s[0],_),d?(p.regex.lastIndex+=o.length,p.regex.lastIndex-=s[0].length):p.regex.lastIndex=0,a++,a>=this.maxReplaces)break}}),e}nest(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i,s,o;function a(l,c){const u=this.nestingOptionsSeparator;if(l.indexOf(u)<0)return l;const h=l.split(new RegExp(`${u}[ ]*{`));let d=`{${h[1]}`;l=h[0],d=this.interpolate(d,o);const f=d.match(/'/g),p=d.match(/"/g);(f&&f.length%2===0&&!p||p.length%2!==0)&&(d=d.replace(/'/g,'"'));try{o=JSON.parse(d),c&&(o={...c,...o})}catch(g){return this.logger.warn(`failed parsing options string in nesting for key ${l}`,g),`${l}${u}${d}`}return delete o.defaultValue,l}for(;i=this.nestingRegexp.exec(e);){let l=[];o={...r},o=o.replace&&typeof o.replace!="string"?o.replace:o,o.applyPostProcessor=!1,delete o.defaultValue;let c=!1;if(i[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(i[1])){const u=i[1].split(this.formatSeparator).map(h=>h.trim());i[1]=u.shift(),l=u,c=!0}if(s=n(a.call(this,i[1].trim(),o),o),s&&i[0]===e&&typeof s!="string")return s;typeof s!="string"&&(s=mT(s)),s||(this.logger.warn(`missed to resolve ${i[1]} for nesting ${e}`),s=""),c&&(s=l.reduce((u,h)=>this.format(u,h,r.lng,{...r,interpolationkey:i[1].trim()}),s.trim())),e=e.replace(i[0],s),this.regexp.lastIndex=0}return e}}function lz(t){let e=t.toLowerCase().trim();const n={};if(t.indexOf("(")>-1){const r=t.split("(");e=r[0].toLowerCase().trim();const i=r[1].substring(0,r[1].length-1);e==="currency"&&i.indexOf(":")<0?n.currency||(n.currency=i.trim()):e==="relativetime"&&i.indexOf(":")<0?n.range||(n.range=i.trim()):i.split(";").forEach(o=>{if(!o)return;const[a,...l]=o.split(":"),c=l.join(":").trim().replace(/^'+|'+$/g,"");n[a.trim()]||(n[a.trim()]=c),c==="false"&&(n[a.trim()]=!1),c==="true"&&(n[a.trim()]=!0),isNaN(c)||(n[a.trim()]=parseInt(c,10))})}return{formatName:e,formatOptions:n}}function fa(t){const e={};return function(r,i,s){const o=i+JSON.stringify(s);let a=e[o];return a||(a=t(Fp(i),s),e[o]=a),a(r)}}class cz{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=Fr.create("formatter"),this.options=e,this.formats={number:fa((n,r)=>{const i=new Intl.NumberFormat(n,{...r});return s=>i.format(s)}),currency:fa((n,r)=>{const i=new Intl.NumberFormat(n,{...r,style:"currency"});return s=>i.format(s)}),datetime:fa((n,r)=>{const i=new Intl.DateTimeFormat(n,{...r});return s=>i.format(s)}),relativetime:fa((n,r)=>{const i=new Intl.RelativeTimeFormat(n,{...r});return s=>i.format(s,r.range||"day")}),list:fa((n,r)=>{const i=new Intl.ListFormat(n,{...r});return s=>i.format(s)})},this.init(e)}init(e){const r=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}}).interpolation;this.formatSeparator=r.formatSeparator?r.formatSeparator:r.formatSeparator||","}add(e,n){this.formats[e.toLowerCase().trim()]=n}addCached(e,n){this.formats[e.toLowerCase().trim()]=fa(n)}format(e,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return n.split(this.formatSeparator).reduce((a,l)=>{const{formatName:c,formatOptions:u}=lz(l);if(this.formats[c]){let h=a;try{const d=i&&i.formatParams&&i.formatParams[i.interpolationkey]||{},f=d.locale||d.lng||i.locale||i.lng||r;h=this.formats[c](a,f,{...u,...i,...d})}catch(d){this.logger.warn(d)}return h}else this.logger.warn(`there was no format function for ${c}`);return a},e)}}function uz(t,e){t.pending[e]!==void 0&&(delete t.pending[e],t.pendingCount--)}class hz extends sm{constructor(e,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=e,this.store=n,this.services=r,this.languageUtils=r.languageUtils,this.options=i,this.logger=Fr.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=i.maxParallelReads||10,this.readingCalls=0,this.maxRetries=i.maxRetries>=0?i.maxRetries:5,this.retryTimeout=i.retryTimeout>=1?i.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(r,i.backend,i)}queueLoad(e,n,r,i){const s={},o={},a={},l={};return e.forEach(c=>{let u=!0;n.forEach(h=>{const d=`${c}|${h}`;!r.reload&&this.store.hasResourceBundle(c,h)?this.state[d]=2:this.state[d]<0||(this.state[d]===1?o[d]===void 0&&(o[d]=!0):(this.state[d]=1,u=!1,o[d]===void 0&&(o[d]=!0),s[d]===void 0&&(s[d]=!0),l[h]===void 0&&(l[h]=!0)))}),u||(a[c]=!0)}),(Object.keys(s).length||Object.keys(o).length)&&this.queue.push({pending:o,pendingCount:Object.keys(o).length,loaded:{},errors:[],callback:i}),{toLoad:Object.keys(s),pending:Object.keys(o),toLoadLanguages:Object.keys(a),toLoadNamespaces:Object.keys(l)}}loaded(e,n,r){const i=e.split("|"),s=i[0],o=i[1];n&&this.emit("failedLoading",s,o,n),r&&this.store.addResourceBundle(s,o,r,void 0,void 0,{skipCopy:!0}),this.state[e]=n?-1:2;const a={};this.queue.forEach(l=>{Kj(l.loaded,[s],o),uz(l,e),n&&l.errors.push(n),l.pendingCount===0&&!l.done&&(Object.keys(l.loaded).forEach(c=>{a[c]||(a[c]={});const u=l.loaded[c];u.length&&u.forEach(h=>{a[c][h]===void 0&&(a[c][h]=!0)})}),l.done=!0,l.errors.length?l.callback(l.errors):l.callback())}),this.emit("loaded",a),this.queue=this.queue.filter(l=>!l.done)}read(e,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,o=arguments.length>5?arguments[5]:void 0;if(!e.length)return o(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:n,fcName:r,tried:i,wait:s,callback:o});return}this.readingCalls++;const a=(c,u)=>{if(this.readingCalls--,this.waitingReads.length>0){const h=this.waitingReads.shift();this.read(h.lng,h.ns,h.fcName,h.tried,h.wait,h.callback)}if(c&&u&&i<this.maxRetries){setTimeout(()=>{this.read.call(this,e,n,r,i+1,s*2,o)},s);return}o(c,u)},l=this.backend[r].bind(this.backend);if(l.length===2){try{const c=l(e,n);c&&typeof c.then=="function"?c.then(u=>a(null,u)).catch(a):a(null,c)}catch(c){a(c)}return}return l(e,n,a)}prepareLoading(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();typeof e=="string"&&(e=this.languageUtils.toResolveHierarchy(e)),typeof n=="string"&&(n=[n]);const s=this.queueLoad(e,n,r,i);if(!s.toLoad.length)return s.pending.length||i(),null;s.toLoad.forEach(o=>{this.loadOne(o)})}load(e,n,r){this.prepareLoading(e,n,{},r)}reload(e,n,r){this.prepareLoading(e,n,{reload:!0},r)}loadOne(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r=e.split("|"),i=r[0],s=r[1];this.read(i,s,"read",void 0,void 0,(o,a)=>{o&&this.logger.warn(`${n}loading namespace ${s} for language ${i} failed`,o),!o&&a&&this.logger.log(`${n}loaded namespace ${s} for language ${i}`,a),this.loaded(e,o,a)})}saveMissing(e,n,r,i,s){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},a=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(n)){this.logger.warn(`did not save key "${r}" as the namespace "${n}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if(this.backend&&this.backend.create){const l={...o,isUpdate:s},c=this.backend.create.bind(this.backend);if(c.length<6)try{let u;c.length===5?u=c(e,n,r,i,l):u=c(e,n,r,i),u&&typeof u.then=="function"?u.then(h=>a(null,h)).catch(a):a(null,u)}catch(u){a(u)}else c(e,n,r,i,a,l)}!e||!e[0]||this.store.addResource(e[0],n,r,i)}}}function ET(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(e){let n={};if(typeof e[1]=="object"&&(n=e[1]),typeof e[1]=="string"&&(n.defaultValue=e[1]),typeof e[2]=="string"&&(n.tDescription=e[2]),typeof e[2]=="object"||typeof e[3]=="object"){const r=e[3]||e[2];Object.keys(r).forEach(i=>{n[i]=r[i]})}return n},interpolation:{escapeValue:!0,format:t=>t,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function TT(t){return typeof t.ns=="string"&&(t.ns=[t.ns]),typeof t.fallbackLng=="string"&&(t.fallbackLng=[t.fallbackLng]),typeof t.fallbackNS=="string"&&(t.fallbackNS=[t.fallbackNS]),t.supportedLngs&&t.supportedLngs.indexOf("cimode")<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),t}function ef(){}function dz(t){Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(n=>{typeof t[n]=="function"&&(t[n]=t[n].bind(t))})}class Xu extends sm{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;if(super(),this.options=TT(e),this.services={},this.logger=Fr,this.modules={external:[]},dz(this),n&&!this.isInitialized&&!e.isClone){if(!this.options.initImmediate)return this.init(e,n),this;setTimeout(()=>{this.init(e,n)},0)}}init(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof n=="function"&&(r=n,n={}),!n.defaultNS&&n.defaultNS!==!1&&n.ns&&(typeof n.ns=="string"?n.defaultNS=n.ns:n.ns.indexOf("translation")<0&&(n.defaultNS=n.ns[0]));const i=ET();this.options={...i,...this.options,...TT(n)},this.options.compatibilityAPI!=="v1"&&(this.options.interpolation={...i.interpolation,...this.options.interpolation}),n.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=n.keySeparator),n.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=n.nsSeparator);function s(u){return u?typeof u=="function"?new u:u:null}if(!this.options.isClone){this.modules.logger?Fr.init(s(this.modules.logger),this.options):Fr.init(null,this.options);let u;this.modules.formatter?u=this.modules.formatter:typeof Intl<"u"&&(u=cz);const h=new wT(this.options);this.store=new _T(this.options.resources,this.options);const d=this.services;d.logger=Fr,d.resourceStore=this.store,d.languageUtils=h,d.pluralResolver=new oz(h,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),u&&(!this.options.interpolation.format||this.options.interpolation.format===i.interpolation.format)&&(d.formatter=s(u),d.formatter.init(d,this.options),this.options.interpolation.format=d.formatter.format.bind(d.formatter)),d.interpolator=new az(this.options),d.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},d.backendConnector=new hz(s(this.modules.backend),d.resourceStore,d,this.options),d.backendConnector.on("*",function(f){for(var p=arguments.length,g=new Array(p>1?p-1:0),_=1;_<p;_++)g[_-1]=arguments[_];e.emit(f,...g)}),this.modules.languageDetector&&(d.languageDetector=s(this.modules.languageDetector),d.languageDetector.init&&d.languageDetector.init(d,this.options.detection,this.options)),this.modules.i18nFormat&&(d.i18nFormat=s(this.modules.i18nFormat),d.i18nFormat.init&&d.i18nFormat.init(this)),this.translator=new $p(this.services,this.options),this.translator.on("*",function(f){for(var p=arguments.length,g=new Array(p>1?p-1:0),_=1;_<p;_++)g[_-1]=arguments[_];e.emit(f,...g)}),this.modules.external.forEach(f=>{f.init&&f.init(this)})}if(this.format=this.options.interpolation.format,r||(r=ef),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const u=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);u.length>0&&u[0]!=="dev"&&(this.options.lng=u[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(u=>{this[u]=function(){return e.store[u](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(u=>{this[u]=function(){return e.store[u](...arguments),e}});const l=vc(),c=()=>{const u=(h,d)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),l.resolve(d),r(h,d)};if(this.languages&&this.options.compatibilityAPI!=="v1"&&!this.isInitialized)return u(null,this.t.bind(this));this.changeLanguage(this.options.lng,u)};return this.options.resources||!this.options.initImmediate?c():setTimeout(c,0),l}loadResources(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ef;const i=typeof e=="string"?e:this.language;if(typeof e=="function"&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if(i&&i.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const s=[],o=a=>{if(!a||a==="cimode")return;this.services.languageUtils.toResolveHierarchy(a).forEach(c=>{c!=="cimode"&&s.indexOf(c)<0&&s.push(c)})};i?o(i):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(l=>o(l)),this.options.preload&&this.options.preload.forEach(a=>o(a)),this.services.backendConnector.load(s,this.options.ns,a=>{!a&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(a)})}else r(null)}reloadResources(e,n,r){const i=vc();return e||(e=this.languages),n||(n=this.options.ns),r||(r=ef),this.services.backendConnector.reload(e,n,s=>{i.resolve(),r(s)}),i}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&oN.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1))for(let n=0;n<this.languages.length;n++){const r=this.languages[n];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}}changeLanguage(e,n){var r=this;this.isLanguageChangingTo=e;const i=vc();this.emit("languageChanging",e);const s=l=>{this.language=l,this.languages=this.services.languageUtils.toResolveHierarchy(l),this.resolvedLanguage=void 0,this.setResolvedLanguage(l)},o=(l,c)=>{c?(s(c),this.translator.changeLanguage(c),this.isLanguageChangingTo=void 0,this.emit("languageChanged",c),this.logger.log("languageChanged",c)):this.isLanguageChangingTo=void 0,i.resolve(function(){return r.t(...arguments)}),n&&n(l,function(){return r.t(...arguments)})},a=l=>{!e&&!l&&this.services.languageDetector&&(l=[]);const c=typeof l=="string"?l:this.services.languageUtils.getBestMatchFromCodes(l);c&&(this.language||s(c),this.translator.language||this.translator.changeLanguage(c),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(c)),this.loadResources(c,u=>{o(u,c)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?a(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(a):this.services.languageDetector.detect(a):a(e),i}getFixedT(e,n,r){var i=this;const s=function(o,a){let l;if(typeof a!="object"){for(var c=arguments.length,u=new Array(c>2?c-2:0),h=2;h<c;h++)u[h-2]=arguments[h];l=i.options.overloadTranslationOptionHandler([o,a].concat(u))}else l={...a};l.lng=l.lng||s.lng,l.lngs=l.lngs||s.lngs,l.ns=l.ns||s.ns,l.keyPrefix=l.keyPrefix||r||s.keyPrefix;const d=i.options.keySeparator||".";let f;return l.keyPrefix&&Array.isArray(o)?f=o.map(p=>`${l.keyPrefix}${d}${p}`):f=l.keyPrefix?`${l.keyPrefix}${d}${o}`:o,i.t(f,l)};return typeof e=="string"?s.lng=e:s.lngs=e,s.ns=n,s.keyPrefix=r,s}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=n.lng||this.resolvedLanguage||this.languages[0],i=this.options?this.options.fallbackLng:!1,s=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const o=(a,l)=>{const c=this.services.backendConnector.state[`${a}|${l}`];return c===-1||c===2};if(n.precheck){const a=n.precheck(this,o);if(a!==void 0)return a}return!!(this.hasResourceBundle(r,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||o(r,e)&&(!i||o(s,e)))}loadNamespaces(e,n){const r=vc();return this.options.ns?(typeof e=="string"&&(e=[e]),e.forEach(i=>{this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}),this.loadResources(i=>{r.resolve(),n&&n(i)}),r):(n&&n(),Promise.resolve())}loadLanguages(e,n){const r=vc();typeof e=="string"&&(e=[e]);const i=this.options.preload||[],s=e.filter(o=>i.indexOf(o)<0);return s.length?(this.options.preload=i.concat(s),this.loadResources(o=>{r.resolve(),n&&n(o)}),r):(n&&n(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!e)return"rtl";const n=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=this.services&&this.services.languageUtils||new wT(ET());return n.indexOf(r.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return new Xu(e,n)}cloneInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ef;const r=e.forkResourceStore;r&&delete e.forkResourceStore;const i={...this.options,...e,isClone:!0},s=new Xu(i);return(e.debug!==void 0||e.prefix!==void 0)&&(s.logger=s.logger.clone(e)),["store","services","language"].forEach(a=>{s[a]=this[a]}),s.services={...this.services},s.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},r&&(s.store=new _T(this.store.data,i),s.services.resourceStore=s.store),s.translator=new $p(s.services,i),s.translator.on("*",function(a){for(var l=arguments.length,c=new Array(l>1?l-1:0),u=1;u<l;u++)c[u-1]=arguments[u];s.emit(a,...c)}),s.init(i,n),s.translator.options=i,s.translator.backendConnector.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},s}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const $e=Xu.createInstance();$e.createInstance=Xu.createInstance;$e.createInstance;$e.dir;$e.init;$e.loadResources;$e.reloadResources;$e.use;$e.changeLanguage;$e.getFixedT;$e.t;$e.exists;$e.setDefaultNamespace;$e.hasLoadedNamespace;$e.loadNamespaces;$e.loadLanguages;var IT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aN=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},fz=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},lN={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,u=s>>2,h=(s&3)<<4|a>>4;let d=(a&15)<<2|c>>6,f=c&63;l||(f=64,o||(d=64)),r.push(n[u],n[h],n[d],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(aN(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):fz(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const h=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||h==null)throw new pz;const d=s<<2|a>>4;if(r.push(d),c!==64){const f=a<<4&240|c>>2;if(r.push(f),h!==64){const p=c<<6&192|h;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class pz extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const gz=function(t){const e=aN(t);return lN.encodeByteArray(e,!0)},Up=function(t){return gz(t).replace(/\./g,"")},cN=function(t){try{return lN.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Bp(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!mz(n)||(t[n]=Bp(t[n],e[n]));return t}function mz(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yz(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _z=()=>yz().__FIREBASE_DEFAULTS__,vz=()=>{if(typeof process>"u"||typeof IT>"u")return;const t=IT.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},wz=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&cN(t[1]);return e&&JSON.parse(e)},hb=()=>{try{return _z()||vz()||wz()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},uN=()=>{var t;return(t=hb())===null||t===void 0?void 0:t.config},bz=t=>{var e;return(e=hb())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sz{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ez(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Up(JSON.stringify(n)),Up(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function at(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Tz(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(at())}function db(){var t;const e=(t=hb())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Iz(){return typeof self=="object"&&self.self===self}function hN(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function fb(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function dN(){const t=at();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function fN(){return!db()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ju(){try{return typeof indexedDB=="object"}catch{return!1}}function xz(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rz="FirebaseError";class yn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Rz,Object.setPrototypeOf(this,yn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ea.prototype.create)}}class ea{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?Az(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new yn(i,a,r)}}function Az(t,e){return t.replace(kz,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const kz=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xT(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Pz(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Zu(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(RT(s)&&RT(o)){if(!Zu(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function RT(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jl(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function $a(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function jc(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function pN(t,e){const n=new Cz(t,e);return n.subscribe.bind(n)}class Cz{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Nz(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=qy),i.error===void 0&&(i.error=qy),i.complete===void 0&&(i.complete=qy);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Nz(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function qy(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function le(t){return t&&t._delegate?t._delegate:t}class Qr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Js="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dz{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Sz;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Lz(e))try{this.getOrInitializeService({instanceIdentifier:Js})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Js){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Js){return this.instances.has(e)}getOptions(e=Js){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Oz(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Js){return this.component?this.component.multipleInstances?e:Js:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Oz(t){return t===Js?void 0:t}function Lz(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mz{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Dz(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pb=[];var Ie;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ie||(Ie={}));const gN={debug:Ie.DEBUG,verbose:Ie.VERBOSE,info:Ie.INFO,warn:Ie.WARN,error:Ie.ERROR,silent:Ie.SILENT},Vz=Ie.INFO,Fz={[Ie.DEBUG]:"log",[Ie.VERBOSE]:"log",[Ie.INFO]:"info",[Ie.WARN]:"warn",[Ie.ERROR]:"error"},$z=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=Fz[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class om{constructor(e){this.name=e,this._logLevel=Vz,this._logHandler=$z,this._userLogHandler=null,pb.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ie))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?gN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ie.DEBUG,...e),this._logHandler(this,Ie.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ie.VERBOSE,...e),this._logHandler(this,Ie.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ie.INFO,...e),this._logHandler(this,Ie.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ie.WARN,...e),this._logHandler(this,Ie.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ie.ERROR,...e),this._logHandler(this,Ie.ERROR,...e)}}function Uz(t){pb.forEach(e=>{e.setLogLevel(t)})}function Bz(t,e){for(const n of pb){let r=null;e&&e.level&&(r=gN[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(i,s,...o)=>{const a=o.map(l=>{if(l==null)return null;if(typeof l=="string")return l;if(typeof l=="number"||typeof l=="boolean")return l.toString();if(l instanceof Error)return l.message;try{return JSON.stringify(l)}catch{return null}}).filter(l=>l).join(" ");s>=(r??i.logLevel)&&t({level:Ie[s].toLowerCase(),message:a,args:o,type:i.name})}}}const jz=(t,e)=>e.some(n=>t instanceof n);let AT,kT;function zz(){return AT||(AT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Wz(){return kT||(kT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const mN=new WeakMap,Mv=new WeakMap,yN=new WeakMap,Ky=new WeakMap,gb=new WeakMap;function Hz(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(us(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&mN.set(n,t)}).catch(()=>{}),gb.set(e,t),e}function qz(t){if(Mv.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Mv.set(t,e)}let Vv={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Mv.get(t);if(e==="objectStoreNames")return t.objectStoreNames||yN.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return us(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Kz(t){Vv=t(Vv)}function Gz(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Gy(this),e,...n);return yN.set(r,e.sort?e.sort():[e]),us(r)}:Wz().includes(t)?function(...e){return t.apply(Gy(this),e),us(mN.get(this))}:function(...e){return us(t.apply(Gy(this),e))}}function Qz(t){return typeof t=="function"?Gz(t):(t instanceof IDBTransaction&&qz(t),jz(t,zz())?new Proxy(t,Vv):t)}function us(t){if(t instanceof IDBRequest)return Hz(t);if(Ky.has(t))return Ky.get(t);const e=Qz(t);return e!==t&&(Ky.set(t,e),gb.set(e,t)),e}const Gy=t=>gb.get(t);function Yz(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=us(o);return r&&o.addEventListener("upgradeneeded",l=>{r(us(o.result),l.oldVersion,l.newVersion,us(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const Xz=["get","getKey","getAll","getAllKeys","count"],Jz=["put","add","delete","clear"],Qy=new Map;function PT(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Qy.get(e))return Qy.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=Jz.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Xz.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return Qy.set(e,s),s}Kz(t=>({...t,get:(e,n,r)=>PT(e,n)||t.get(e,n,r),has:(e,n)=>!!PT(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zz{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(e8(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function e8(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Fv="@firebase/app",CT="0.9.29";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oo=new om("@firebase/app"),t8="@firebase/app-compat",n8="@firebase/analytics-compat",r8="@firebase/analytics",i8="@firebase/app-check-compat",s8="@firebase/app-check",o8="@firebase/auth",a8="@firebase/auth-compat",l8="@firebase/database",c8="@firebase/database-compat",u8="@firebase/functions",h8="@firebase/functions-compat",d8="@firebase/installations",f8="@firebase/installations-compat",p8="@firebase/messaging",g8="@firebase/messaging-compat",m8="@firebase/performance",y8="@firebase/performance-compat",_8="@firebase/remote-config",v8="@firebase/remote-config-compat",w8="@firebase/storage",b8="@firebase/storage-compat",S8="@firebase/firestore",E8="@firebase/firestore-compat",T8="firebase",I8="10.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gs="[DEFAULT]",x8={[Fv]:"fire-core",[t8]:"fire-core-compat",[r8]:"fire-analytics",[n8]:"fire-analytics-compat",[s8]:"fire-app-check",[i8]:"fire-app-check-compat",[o8]:"fire-auth",[a8]:"fire-auth-compat",[l8]:"fire-rtdb",[c8]:"fire-rtdb-compat",[u8]:"fire-fn",[h8]:"fire-fn-compat",[d8]:"fire-iid",[f8]:"fire-iid-compat",[p8]:"fire-fcm",[g8]:"fire-fcm-compat",[m8]:"fire-perf",[y8]:"fire-perf-compat",[_8]:"fire-rc",[v8]:"fire-rc-compat",[w8]:"fire-gcs",[b8]:"fire-gcs-compat",[S8]:"fire-fst",[E8]:"fire-fst-compat","fire-js":"fire-js",[T8]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ms=new Map,eh=new Map;function jp(t,e){try{t.container.addComponent(e)}catch(n){Oo.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function _N(t,e){t.container.addOrOverwriteComponent(e)}function ys(t){const e=t.name;if(eh.has(e))return Oo.debug(`There were multiple attempts to register component ${e}.`),!1;eh.set(e,t);for(const n of ms.values())jp(n,t);return!0}function vN(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function R8(t,e,n=gs){vN(t,e).clearInstance(n)}function A8(){eh.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k8={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},_i=new ea("app","Firebase",k8);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let P8=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Qr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw _i.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ls=I8;function mb(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:gs,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw _i.create("bad-app-name",{appName:String(i)});if(n||(n=uN()),!n)throw _i.create("no-options");const s=ms.get(i);if(s){if(Zu(n,s.options)&&Zu(r,s.config))return s;throw _i.create("duplicate-app",{appName:i})}const o=new Mz(i);for(const l of eh.values())o.addComponent(l);const a=new P8(n,r,o);return ms.set(i,a),a}function C8(t=gs){const e=ms.get(t);if(!e&&t===gs&&uN())return mb();if(!e)throw _i.create("no-app",{appName:t});return e}function N8(){return Array.from(ms.values())}async function wN(t){const e=t.name;ms.has(e)&&(ms.delete(e),await Promise.all(t.container.getProviders().map(n=>n.delete())),t.isDeleted=!0)}function qr(t,e,n){var r;let i=(r=x8[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Oo.warn(a.join(" "));return}ys(new Qr(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}function bN(t,e){if(t!==null&&typeof t!="function")throw _i.create("invalid-log-argument");Bz(t,e)}function SN(t){Uz(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D8="firebase-heartbeat-database",O8=1,th="firebase-heartbeat-store";let Yy=null;function EN(){return Yy||(Yy=Yz(D8,O8,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(th)}catch(n){console.warn(n)}}}}).catch(t=>{throw _i.create("idb-open",{originalErrorMessage:t.message})})),Yy}async function L8(t){try{const n=(await EN()).transaction(th),r=await n.objectStore(th).get(TN(t));return await n.done,r}catch(e){if(e instanceof yn)Oo.warn(e.message);else{const n=_i.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Oo.warn(n.message)}}}async function NT(t,e){try{const r=(await EN()).transaction(th,"readwrite");await r.objectStore(th).put(e,TN(t)),await r.done}catch(n){if(n instanceof yn)Oo.warn(n.message);else{const r=_i.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Oo.warn(r.message)}}}function TN(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M8=1024,V8=30*24*60*60*1e3;class F8{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new U8(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=DT();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=V8}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=DT(),{heartbeatsToSend:r,unsentEntries:i}=$8(this._heartbeatsCache.heartbeats),s=Up(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function DT(){return new Date().toISOString().substring(0,10)}function $8(t,e=M8){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),OT(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),OT(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class U8{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Ju()?xz().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await L8(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return NT(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return NT(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function OT(t){return Up(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B8(t){ys(new Qr("platform-logger",e=>new Zz(e),"PRIVATE")),ys(new Qr("heartbeat",e=>new F8(e),"PRIVATE")),qr(Fv,CT,t),qr(Fv,CT,"esm2017"),qr("fire-js","")}B8("");const j8=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:yn,SDK_VERSION:Ls,_DEFAULT_ENTRY_NAME:gs,_addComponent:jp,_addOrOverwriteComponent:_N,_apps:ms,_clearComponents:A8,_components:eh,_getProvider:vN,_registerComponent:ys,_removeServiceInstance:R8,deleteApp:wN,getApp:C8,getApps:N8,initializeApp:mb,onLog:bN,registerVersion:qr,setLogLevel:SN},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z8{constructor(e,n){this._delegate=e,this.firebase=n,jp(e,new Qr("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),wN(this._delegate)))}_getService(e,n=gs){var r;this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(e);return!i.isInitialized()&&((r=i.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&i.initialize(),i.getImmediate({identifier:n})}_removeServiceInstance(e,n=gs){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){jp(this._delegate,e)}_addOrOverwriteComponent(e){_N(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W8={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},LT=new ea("app-compat","Firebase",W8);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H8(t){const e={},n={__esModule:!0,initializeApp:s,app:i,registerVersion:qr,setLogLevel:SN,onLog:bN,apps:null,SDK_VERSION:Ls,INTERNAL:{registerComponent:a,removeApp:r,useAsService:l,modularAPIs:j8}};n.default=n,Object.defineProperty(n,"apps",{get:o});function r(c){delete e[c]}function i(c){if(c=c||gs,!xT(e,c))throw LT.create("no-app",{appName:c});return e[c]}i.App=t;function s(c,u={}){const h=mb(c,u);if(xT(e,h.name))return e[h.name];const d=new t(h,n);return e[h.name]=d,d}function o(){return Object.keys(e).map(c=>e[c])}function a(c){const u=c.name,h=u.replace("-compat","");if(ys(c)&&c.type==="PUBLIC"){const d=(f=i())=>{if(typeof f[h]!="function")throw LT.create("invalid-app-argument",{appName:u});return f[h]()};c.serviceProps!==void 0&&Bp(d,c.serviceProps),n[h]=d,t.prototype[h]=function(...f){return this._getService.bind(this,u).apply(this,c.multipleInstances?f:[])}}return c.type==="PUBLIC"?n[h]:null}function l(c,u){return u==="serverAuth"?null:u}return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IN(){const t=H8(z8);t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:IN,extendNamespace:e,createSubscribe:pN,ErrorFactory:ea,deepExtend:Bp});function e(n){Bp(t,n)}return t}const q8=IN();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MT=new om("@firebase/app-compat"),K8="@firebase/app-compat",G8="0.2.29";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q8(t){qr(K8,G8,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */if(Iz()&&self.firebase!==void 0){MT.warn(`
    Warning: Firebase is already defined in the global scope. Please make sure
    Firebase library is only loaded once.
  `);const t=self.firebase.SDK_VERSION;t&&t.indexOf("LITE")>=0&&MT.warn(`
    Warning: You are trying to load Firebase while using Firebase Performance standalone script.
    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
    `)}const zl=q8;Q8();var Y8="firebase",X8="10.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */zl.registerVersion(Y8,X8,"app-compat");function yb(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}const wc={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},pa={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J8(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}}function xN(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Z8=J8,e7=xN,RN=new ea("auth","Firebase",xN());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zp=new om("@firebase/auth");function t7(t,...e){zp.logLevel<=Ie.WARN&&zp.warn(`Auth (${Ls}): ${t}`,...e)}function Bf(t,...e){zp.logLevel<=Ie.ERROR&&zp.error(`Auth (${Ls}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function en(t,...e){throw _b(t,...e)}function Xt(t,...e){return _b(t,...e)}function AN(t,e,n){const r=Object.assign(Object.assign({},e7()),{[e]:n});return new ea("auth","Firebase",r).create(e,{appName:t.name})}function Wl(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&en(t,"argument-error"),AN(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function _b(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return RN.create(t,...e)}function H(t,e,...n){if(!t)throw _b(e,...n)}function $r(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Bf(e),new Error(e)}function Tr(t,e){t||$r(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nh(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function vb(){return VT()==="http:"||VT()==="https:"}function VT(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n7(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(vb()||hN()||"connection"in navigator)?navigator.onLine:!0}function r7(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td{constructor(e,n){this.shortDelay=e,this.longDelay=n,Tr(n>e,"Short delay should be less than long delay!"),this.isMobile=Tz()||fb()}get(){return n7()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wb(t,e){Tr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;$r("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;$r("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;$r("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i7={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s7=new td(3e4,6e4);function wt(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function bt(t,e,n,r,i={}){return PN(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=jl(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),kN.fetch()(CN(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},s))})}async function PN(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},i7),e);try{const i=new a7(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw zc(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw zc(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw zc(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw zc(t,"user-disabled",o);const u=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw AN(t,u,c);en(t,u)}}catch(i){if(i instanceof yn)throw i;en(t,"network-request-failed",{message:String(i)})}}async function Pi(t,e,n,r,i={}){const s=await bt(t,e,n,r,i);return"mfaPendingCredential"in s&&en(t,"multi-factor-auth-required",{_serverResponse:s}),s}function CN(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?wb(t.config,i):`${t.config.apiScheme}://${i}`}function o7(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class a7{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Xt(this.auth,"network-request-failed")),s7.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function zc(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Xt(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FT(t){return t!==void 0&&t.getResponse!==void 0}function $T(t){return t!==void 0&&t.enterprise!==void 0}class l7{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return o7(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c7(t){return(await bt(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function u7(t,e){return bt(t,"GET","/v2/recaptchaConfig",wt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h7(t,e){return bt(t,"POST","/v1/accounts:delete",e)}async function d7(t,e){return bt(t,"POST","/v1/accounts:update",e)}async function f7(t,e){return bt(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function p7(t,e=!1){const n=le(t),r=await n.getIdToken(e),i=am(r);H(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:yu(Xy(i.auth_time)),issuedAtTime:yu(Xy(i.iat)),expirationTime:yu(Xy(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Xy(t){return Number(t)*1e3}function am(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Bf("JWT malformed, contained fewer than 3 sections"),null;try{const i=cN(n);return i?JSON.parse(i):(Bf("Failed to decode base64 JWT payload"),null)}catch(i){return Bf("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function g7(t){const e=am(t);return H(e,"internal-error"),H(typeof e.exp<"u","internal-error"),H(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ii(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof yn&&m7(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function m7({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y7{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NN{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=yu(this.lastLoginAt),this.creationTime=yu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rh(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Ii(t,f7(n,{idToken:r}));H(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?w7(s.providerUserInfo):[],a=v7(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),u=l?c:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new NN(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function _7(t){const e=le(t);await rh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function v7(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function w7(t){return t.map(e=>{var{providerId:n}=e,r=yb(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function b7(t,e){const n=await PN(t,{},async()=>{const r=jl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=CN(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",kN.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function S7(t,e){return bt(t,"POST","/v2/accounts:revokeToken",wt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){H(e.idToken,"internal-error"),H(typeof e.idToken<"u","internal-error"),H(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):g7(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return H(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await b7(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new ih;return r&&(H(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(H(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(H(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ih,this.toJSON())}_performRefresh(){return $r("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mi(t,e){H(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class bo{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=yb(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new y7(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new NN(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Ii(this,this.stsTokenManager.getToken(this.auth,e));return H(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return p7(this,e)}reload(){return _7(this)}_assign(e){this!==e&&(H(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new bo(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){H(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await rh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Ii(this,h7(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,c,u;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,d=(i=n.email)!==null&&i!==void 0?i:void 0,f=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,g=(a=n.tenantId)!==null&&a!==void 0?a:void 0,_=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,y=(c=n.createdAt)!==null&&c!==void 0?c:void 0,m=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:v,emailVerified:w,isAnonymous:S,providerData:E,stsTokenManager:T}=n;H(v&&T,e,"internal-error");const A=ih.fromJSON(this.name,T);H(typeof v=="string",e,"internal-error"),Mi(h,e.name),Mi(d,e.name),H(typeof w=="boolean",e,"internal-error"),H(typeof S=="boolean",e,"internal-error"),Mi(f,e.name),Mi(p,e.name),Mi(g,e.name),Mi(_,e.name),Mi(y,e.name),Mi(m,e.name);const $=new bo({uid:v,auth:e,email:d,emailVerified:w,displayName:h,isAnonymous:S,photoURL:p,phoneNumber:f,tenantId:g,stsTokenManager:A,createdAt:y,lastLoginAt:m});return E&&Array.isArray(E)&&($.providerData=E.map(L=>Object.assign({},L))),_&&($._redirectEventId=_),$}static async _fromIdTokenResponse(e,n,r=!1){const i=new ih;i.updateFromServerResponse(n);const s=new bo({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await rh(s),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UT=new Map;function Hn(t){Tr(t instanceof Function,"Expected a class definition");let e=UT.get(t);return e?(Tr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,UT.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}DN.type="NONE";const yl=DN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function So(t,e,n){return`firebase:${t}:${e}:${n}`}class Xa{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=So(this.userKey,i.apiKey,s),this.fullPersistenceKey=So("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?bo._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Xa(Hn(yl),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||Hn(yl);const o=So(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const u=await c._get(o);if(u){const h=bo._fromJSON(e,u);c!==s&&(a=h),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Xa(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new Xa(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BT(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(MN(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(ON(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(VN(e))return"Blackberry";if(FN(e))return"Webos";if(bb(e))return"Safari";if((e.includes("chrome/")||LN(e))&&!e.includes("edge/"))return"Chrome";if(nd(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function ON(t=at()){return/firefox\//i.test(t)}function bb(t=at()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function LN(t=at()){return/crios\//i.test(t)}function MN(t=at()){return/iemobile/i.test(t)}function nd(t=at()){return/android/i.test(t)}function VN(t=at()){return/blackberry/i.test(t)}function FN(t=at()){return/webos/i.test(t)}function Hl(t=at()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function E7(t=at()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(t)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(t)}function T7(t=at()){var e;return Hl(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function I7(){return dN()&&document.documentMode===10}function $N(t=at()){return Hl(t)||nd(t)||FN(t)||VN(t)||/windows phone/i.test(t)||MN(t)}function x7(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UN(t,e=[]){let n;switch(t){case"Browser":n=BT(at());break;case"Worker":n=`${BT(at())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ls}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R7{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A7(t,e={}){return bt(t,"GET","/v2/passwordPolicy",wt(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k7=6;class P7{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:k7,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C7{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new jT(this),this.idTokenSubscription=new jT(this),this.beforeStateQueue=new R7(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=RN,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Hn(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Xa.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return H(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await rh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=r7()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?le(e):null;return n&&H(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&H(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(Hn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await A7(this),n=new P7(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ea("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await S7(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Hn(e)||this._popupRedirectResolver;H(n,this,"argument-error"),this.redirectPersistenceManager=await Xa.create(this,[Hn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(H(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return H(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=UN(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&t7(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function yt(t){return le(t)}class jT{constructor(e){this.auth=e,this.observer=null,this.addObserver=pN(n=>this.observer=n)}get next(){return H(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function N7(t){rd=t}function Sb(t){return rd.loadJS(t)}function D7(){return rd.recaptchaV2Script}function O7(){return rd.recaptchaEnterpriseScript}function L7(){return rd.gapiScript}function BN(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const M7="recaptcha-enterprise",V7="NO_RECAPTCHA";class F7{constructor(e){this.type=M7,this.auth=yt(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{u7(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new l7(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;$T(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(V7)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&$T(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=O7();l.length!==0&&(l+=a),Sb(l).then(()=>{i(a,s,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function zT(t,e,n,r=!1){const i=new F7(t);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function sh(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await zT(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await zT(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)})}function $7(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Hn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function U7(t,e,n){const r=yt(t);H(r._canInitEmulator,r,"emulator-config-failed"),H(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=jN(e),{host:o,port:a}=B7(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||j7()}function jN(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function B7(t){const e=jN(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:WT(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:WT(o)}}}function WT(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function j7(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return $r("not implemented")}_getIdTokenResponse(e){return $r("not implemented")}_linkToIdToken(e,n){return $r("not implemented")}_getReauthenticationResolver(e){return $r("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zN(t,e){return bt(t,"POST","/v1/accounts:resetPassword",wt(t,e))}async function z7(t,e){return bt(t,"POST","/v1/accounts:update",e)}async function W7(t,e){return bt(t,"POST","/v1/accounts:signUp",e)}async function H7(t,e){return bt(t,"POST","/v1/accounts:update",wt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q7(t,e){return Pi(t,"POST","/v1/accounts:signInWithPassword",wt(t,e))}async function lm(t,e){return bt(t,"POST","/v1/accounts:sendOobCode",wt(t,e))}async function K7(t,e){return lm(t,e)}async function G7(t,e){return lm(t,e)}async function Q7(t,e){return lm(t,e)}async function Y7(t,e){return lm(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X7(t,e){return Pi(t,"POST","/v1/accounts:signInWithEmailLink",wt(t,e))}async function J7(t,e){return Pi(t,"POST","/v1/accounts:signInWithEmailLink",wt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oh extends ql{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new oh(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new oh(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return sh(e,n,"signInWithPassword",q7);case"emailLink":return X7(e,{email:this._email,oobCode:this._password});default:en(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return sh(e,r,"signUpPassword",W7);case"emailLink":return J7(e,{idToken:n,email:this._email,oobCode:this._password});default:en(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vi(t,e){return Pi(t,"POST","/v1/accounts:signInWithIdp",wt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z7="http://localhost";class Yr extends ql{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Yr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):en("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=yb(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Yr(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return vi(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,vi(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,vi(e,n)}buildRequest(){const e={requestUri:Z7,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=jl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eW(t,e){return bt(t,"POST","/v1/accounts:sendVerificationCode",wt(t,e))}async function tW(t,e){return Pi(t,"POST","/v1/accounts:signInWithPhoneNumber",wt(t,e))}async function nW(t,e){const n=await Pi(t,"POST","/v1/accounts:signInWithPhoneNumber",wt(t,e));if(n.temporaryProof)throw zc(t,"account-exists-with-different-credential",n);return n}const rW={USER_NOT_FOUND:"user-not-found"};async function iW(t,e){const n=Object.assign(Object.assign({},e),{operation:"REAUTH"});return Pi(t,"POST","/v1/accounts:signInWithPhoneNumber",wt(t,n),rW)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo extends ql{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new Eo({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new Eo({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return tW(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return nW(e,Object.assign({idToken:n},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return iW(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:r,verificationCode:i}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:r,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s}=e;return!r&&!n&&!i&&!s?null:new Eo({verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sW(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function oW(t){const e=$a(jc(t)).link,n=e?$a(jc(e)).deep_link_id:null,r=$a(jc(t)).deep_link_id;return(r?$a(jc(r)).link:null)||r||n||e||t}class cm{constructor(e){var n,r,i,s,o,a;const l=$a(jc(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,u=(r=l.oobCode)!==null&&r!==void 0?r:null,h=sW((i=l.mode)!==null&&i!==void 0?i:null);H(c&&u&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=u,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=oW(e);try{return new cm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms{constructor(){this.providerId=Ms.PROVIDER_ID}static credential(e,n){return oh._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=cm.parseLink(n);return H(r,"argument-error"),oh._fromEmailAndCode(e,r.code,r.tenantId)}}Ms.PROVIDER_ID="password";Ms.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ms.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl extends Ci{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Ja extends Kl{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return H("providerId"in n&&"signInMethod"in n,"argument-error"),Yr._fromParams(n)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return H(e.idToken||e.accessToken,"argument-error"),Yr._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return Ja.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Ja.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:o,providerId:a}=e;if(!r&&!i&&!n&&!s||!a)return null;try{return new Ja(a)._credential({idToken:n,accessToken:r,nonce:o,pendingToken:s})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr extends Kl{constructor(){super("facebook.com")}static credential(e){return Yr._fromParams({providerId:Dr.PROVIDER_ID,signInMethod:Dr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Dr.credentialFromTaggedObject(e)}static credentialFromError(e){return Dr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Dr.credential(e.oauthAccessToken)}catch{return null}}}Dr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Dr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or extends Kl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Yr._fromParams({providerId:Or.PROVIDER_ID,signInMethod:Or.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Or.credentialFromTaggedObject(e)}static credentialFromError(e){return Or.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Or.credential(n,r)}catch{return null}}}Or.GOOGLE_SIGN_IN_METHOD="google.com";Or.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr extends Kl{constructor(){super("github.com")}static credential(e){return Yr._fromParams({providerId:Lr.PROVIDER_ID,signInMethod:Lr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Lr.credentialFromTaggedObject(e)}static credentialFromError(e){return Lr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Lr.credential(e.oauthAccessToken)}catch{return null}}}Lr.GITHUB_SIGN_IN_METHOD="github.com";Lr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aW="http://localhost";class _l extends ql{constructor(e,n){super(e,e),this.pendingToken=n}_getIdTokenResponse(e){const n=this.buildRequest();return vi(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,vi(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,vi(e,n)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,pendingToken:s}=n;return!r||!i||!s||r!==i?null:new _l(r,s)}static _create(e,n){return new _l(e,n)}buildRequest(){return{requestUri:aW,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lW="saml.";class Wp extends Ci{constructor(e){H(e.startsWith(lW),"argument-error"),super(e)}static credentialFromResult(e){return Wp.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return Wp.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const n=_l.fromJSON(e);return H(n,"argument-error"),n}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:n,providerId:r}=e;if(!n||!r)return null;try{return _l._create(r,n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr extends Kl{constructor(){super("twitter.com")}static credential(e,n){return Yr._fromParams({providerId:Mr.PROVIDER_ID,signInMethod:Mr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Mr.credentialFromTaggedObject(e)}static credentialFromError(e){return Mr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Mr.credential(n,r)}catch{return null}}}Mr.TWITTER_SIGN_IN_METHOD="twitter.com";Mr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WN(t,e){return Pi(t,"POST","/v1/accounts:signUp",wt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await bo._fromIdTokenResponse(e,r,i),o=HT(r);return new hr({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=HT(r);return new hr({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function HT(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cW(t){var e;const n=yt(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new hr({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await WN(n,{returnSecureToken:!0}),i=await hr._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hp extends yn{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Hp.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Hp(e,n,r,i)}}function HN(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Hp._fromErrorAndOperation(t,s,e,r):s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qN(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uW(t,e){const n=le(t);await um(!0,n,e);const{providerUserInfo:r}=await d7(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),i=qN(r||[]);return n.providerData=n.providerData.filter(s=>i.has(s.providerId)),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function Eb(t,e,n=!1){const r=await Ii(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return hr._forOperation(t,"link",r)}async function um(t,e,n){await rh(e);const r=qN(e.providerData),i=t===!1?"provider-already-linked":"no-such-provider";H(r.has(n)===t,e.auth,i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KN(t,e,n=!1){const{auth:r}=t,i="reauthenticate";try{const s=await Ii(t,HN(r,i,e,t),n);H(s.idToken,r,"internal-error");const o=am(s.idToken);H(o,r,"internal-error");const{sub:a}=o;return H(t.uid===a,r,"user-mismatch"),hr._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&en(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GN(t,e,n=!1){const r="signIn",i=await HN(t,r,e),s=await hr._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function hm(t,e){return GN(yt(t),e)}async function QN(t,e){const n=le(t);return await um(!1,n,e.providerId),Eb(n,e)}async function YN(t,e){return KN(le(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hW(t,e){return Pi(t,"POST","/v1/accounts:signInWithCustomToken",wt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dW(t,e){const n=yt(t),r=await hW(n,{token:e,returnSecureToken:!0}),i=await hr._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?Tb._fromServerResponse(e,n):"totpInfo"in n?Ib._fromServerResponse(e,n):en(e,"internal-error")}}class Tb extends id{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new Tb(n)}}class Ib extends id{constructor(e){super("totp",e)}static _fromServerResponse(e,n){return new Ib(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dm(t,e,n){var r;H(((r=n.url)===null||r===void 0?void 0:r.length)>0,t,"invalid-continue-uri"),H(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(H(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(H(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xb(t){const e=yt(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function XN(t,e,n){const r=yt(t),i={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};n&&dm(r,i,n),await sh(r,i,"getOobCode",G7)}async function fW(t,e,n){await zN(le(t),{oobCode:e,newPassword:n}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&xb(t),r})}async function pW(t,e){await H7(le(t),{oobCode:e})}async function JN(t,e){const n=le(t),r=await zN(n,{oobCode:e}),i=r.requestType;switch(H(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":H(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":H(r.mfaInfo,n,"internal-error");default:H(r.email,n,"internal-error")}let s=null;return r.mfaInfo&&(s=id._fromServerResponse(yt(n),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}}async function gW(t,e){const{data:n}=await JN(le(t),e);return n.email}async function ZN(t,e,n){const r=yt(t),o=await sh(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",WN).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&xb(t),l}),a=await hr._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function e2(t,e,n){return hm(le(t),Ms.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&xb(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mW(t,e,n){const r=yt(t),i={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function s(o,a){H(a.handleCodeInApp,r,"argument-error"),a&&dm(r,o,a)}s(i,n),await sh(r,i,"getOobCode",Q7)}function yW(t,e){const n=cm.parseLink(e);return(n==null?void 0:n.operation)==="EMAIL_SIGNIN"}async function _W(t,e,n){const r=le(t),i=Ms.credentialWithLink(e,n||nh());return H(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),hm(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vW(t,e){return bt(t,"POST","/v1/accounts:createAuthUri",wt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wW(t,e){const n=vb()?nh():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:i}=await vW(le(t),r);return i||[]}async function bW(t,e){const n=le(t),i={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&dm(n.auth,i,e);const{email:s}=await K7(n.auth,i);s!==t.email&&await t.reload()}async function SW(t,e,n){const r=le(t),s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await t.getIdToken(),newEmail:e};n&&dm(r.auth,s,n);const{email:o}=await Y7(r.auth,s);o!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EW(t,e){return bt(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t2(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=le(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await Ii(r,EW(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function TW(t,e){return n2(le(t),e,null)}function IW(t,e){return n2(le(t),null,e)}async function n2(t,e,n){const{auth:r}=t,s={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(s.email=e),n&&(s.password=n);const o=await Ii(t,z7(r,s));await t._updateTokensIfNecessary(o,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xW(t){var e,n;if(!t)return null;const{providerId:r}=t,i=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},s=t.isNewUser||t.kind==="identitytoolkit#SignupNewUserResponse";if(!r&&(t!=null&&t.idToken)){const o=(n=(e=am(t.idToken))===null||e===void 0?void 0:e.firebase)===null||n===void 0?void 0:n.sign_in_provider;if(o){const a=o!=="anonymous"&&o!=="custom"?o:null;return new Za(s,a)}}if(!r)return null;switch(r){case"facebook.com":return new RW(s,i);case"github.com":return new AW(s,i);case"google.com":return new kW(s,i);case"twitter.com":return new PW(s,i,t.screenName||null);case"custom":case"anonymous":return new Za(s,null);default:return new Za(s,r,i)}}class Za{constructor(e,n,r={}){this.isNewUser=e,this.providerId=n,this.profile=r}}class r2 extends Za{constructor(e,n,r,i){super(e,n,r),this.username=i}}class RW extends Za{constructor(e,n){super(e,"facebook.com",n)}}class AW extends r2{constructor(e,n){super(e,"github.com",n,typeof(n==null?void 0:n.login)=="string"?n==null?void 0:n.login:null)}}class kW extends Za{constructor(e,n){super(e,"google.com",n)}}class PW extends r2{constructor(e,n,r){super(e,"twitter.com",n,r)}}function CW(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:xW(n)}function NW(t,e,n,r){return le(t).onAuthStateChanged(e,n,r)}function DW(t){return le(t).signOut()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(e,n,r){this.type=e,this.credential=n,this.user=r}static _fromIdtoken(e,n){return new ho("enroll",e,n)}static _fromMfaPendingCredential(e){return new ho("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var n,r;if(e!=null&&e.multiFactorSession){if(!((n=e.multiFactorSession)===null||n===void 0)&&n.pendingCredential)return ho._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(!((r=e.multiFactorSession)===null||r===void 0)&&r.idToken)return ho._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rb{constructor(e,n,r){this.session=e,this.hints=n,this.signInResolver=r}static _fromError(e,n){const r=yt(e),i=n.customData._serverResponse,s=(i.mfaInfo||[]).map(a=>id._fromServerResponse(r,a));H(i.mfaPendingCredential,r,"internal-error");const o=ho._fromMfaPendingCredential(i.mfaPendingCredential);return new Rb(o,s,async a=>{const l=await a._process(r,o);delete i.mfaInfo,delete i.mfaPendingCredential;const c=Object.assign(Object.assign({},i),{idToken:l.idToken,refreshToken:l.refreshToken});switch(n.operationType){case"signIn":const u=await hr._fromIdTokenResponse(r,n.operationType,c);return await r._updateCurrentUser(u.user),u;case"reauthenticate":return H(n.user,r,"internal-error"),hr._forOperation(n.user,n.operationType,c);default:en(r,"internal-error")}})}async resolveSignIn(e){const n=e;return this.signInResolver(n)}}function OW(t,e){var n;const r=le(t),i=e;return H(e.customData.operationType,r,"argument-error"),H((n=i.customData._serverResponse)===null||n===void 0?void 0:n.mfaPendingCredential,r,"argument-error"),Rb._fromError(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LW(t,e){return bt(t,"POST","/v2/accounts/mfaEnrollment:start",wt(t,e))}function MW(t,e){return bt(t,"POST","/v2/accounts/mfaEnrollment:finalize",wt(t,e))}function VW(t,e){return bt(t,"POST","/v2/accounts/mfaEnrollment:withdraw",wt(t,e))}class Ab{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(n=>{n.mfaInfo&&(this.enrolledFactors=n.mfaInfo.map(r=>id._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new Ab(e)}async getSession(){return ho._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,n){const r=e,i=await this.getSession(),s=await Ii(this.user,r._process(this.user.auth,i,n));return await this.user._updateTokensIfNecessary(s),this.user.reload()}async unenroll(e){const n=typeof e=="string"?e:e.uid,r=await this.user.getIdToken();try{const i=await Ii(this.user,VW(this.user.auth,{idToken:r,mfaEnrollmentId:n}));this.enrolledFactors=this.enrolledFactors.filter(({uid:s})=>s!==n),await this.user._updateTokensIfNecessary(i),await this.user.reload()}catch(i){throw i}}}const Jy=new WeakMap;function FW(t){const e=le(t);return Jy.has(e)||Jy.set(e,Ab._fromUser(e)),Jy.get(e)}const qp="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(qp,"1"),this.storage.removeItem(qp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $W(){const t=at();return bb(t)||Hl(t)}const UW=1e3,BW=10;class s2 extends i2{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=$W()&&x7(),this.fallbackToPolling=$N(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);I7()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,BW):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},UW)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}s2.type="LOCAL";const kb=s2;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2 extends i2{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}o2.type="SESSION";const Lo=o2;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jW(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new fm(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await jW(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}fm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sd(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zW{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=sd("",20);i.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(h){const d=h;if(d.data.eventId===c)switch(d.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(d.data.response);break;default:clearTimeout(u),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rt(){return window}function WW(t){Rt().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pb(){return typeof Rt().WorkerGlobalScope<"u"&&typeof Rt().importScripts=="function"}async function HW(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function qW(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function KW(){return Pb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a2="firebaseLocalStorageDb",GW=1,Kp="firebaseLocalStorage",l2="fbase_key";class od{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function pm(t,e){return t.transaction([Kp],e?"readwrite":"readonly").objectStore(Kp)}function QW(){const t=indexedDB.deleteDatabase(a2);return new od(t).toPromise()}function $v(){const t=indexedDB.open(a2,GW);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Kp,{keyPath:l2})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Kp)?e(r):(r.close(),await QW(),e(await $v()))})})}async function qT(t,e,n){const r=pm(t,!0).put({[l2]:e,value:n});return new od(r).toPromise()}async function YW(t,e){const n=pm(t,!1).get(e),r=await new od(n).toPromise();return r===void 0?null:r.value}function KT(t,e){const n=pm(t,!0).delete(e);return new od(n).toPromise()}const XW=800,JW=3;class c2{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await $v(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>JW)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Pb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=fm._getInstance(KW()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await HW(),!this.activeServiceWorker)return;this.sender=new zW(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||qW()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await $v();return await qT(e,qp,"1"),await KT(e,qp),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>qT(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>YW(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>KT(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=pm(i,!1).getAll();return new od(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),XW)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}c2.type="LOCAL";const ah=c2;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZW(t,e){return bt(t,"POST","/v2/accounts/mfaSignIn:start",wt(t,e))}function eH(t,e){return bt(t,"POST","/v2/accounts/mfaSignIn:finalize",wt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tH=500,nH=6e4,tf=1e12;class rH{constructor(e){this.auth=e,this.counter=tf,this._widgets=new Map}render(e,n){const r=this.counter;return this._widgets.set(r,new iH(e,this.auth.name,n||{})),this.counter++,r}reset(e){var n;const r=e||tf;(n=this._widgets.get(r))===null||n===void 0||n.delete(),this._widgets.delete(r)}getResponse(e){var n;const r=e||tf;return((n=this._widgets.get(r))===null||n===void 0?void 0:n.getResponse())||""}async execute(e){var n;const r=e||tf;return(n=this._widgets.get(r))===null||n===void 0||n.execute(),""}}class iH{constructor(e,n,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i=typeof e=="string"?document.getElementById(e):e;H(i,"argument-error",{appName:n}),this.container=i,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=sH(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},nH)},tH))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function sH(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<t;r++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zy=BN("rcb"),oH=new td(3e4,6e4);class aH{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=Rt().grecaptcha)===null||e===void 0)&&e.render)}load(e,n=""){return H(lH(n),e,"argument-error"),this.shouldResolveImmediately(n)&&FT(Rt().grecaptcha)?Promise.resolve(Rt().grecaptcha):new Promise((r,i)=>{const s=Rt().setTimeout(()=>{i(Xt(e,"network-request-failed"))},oH.get());Rt()[Zy]=()=>{Rt().clearTimeout(s),delete Rt()[Zy];const a=Rt().grecaptcha;if(!a||!FT(a)){i(Xt(e,"internal-error"));return}const l=a.render;a.render=(c,u)=>{const h=l(c,u);return this.counter++,h},this.hostLanguage=n,r(a)};const o=`${D7()}?${jl({onload:Zy,render:"explicit",hl:n})}`;Sb(o).catch(()=>{clearTimeout(s),i(Xt(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!(!((n=Rt().grecaptcha)===null||n===void 0)&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function lH(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class cH{async load(e){return new rH(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u2="recaptcha",uH={theme:"light",type:"image"};let hH=class{constructor(e,n,r=Object.assign({},uH)){this.parameters=r,this.type=u2,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=yt(e),this.isInvisible=this.parameters.size==="invisible",H(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const i=typeof n=="string"?document.getElementById(n):n;H(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new cH:new aH,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),r=n.getResponse(e);return r||new Promise(i=>{const s=o=>{o&&(this.tokenChangeListeners.delete(s),i(o))};this.tokenChangeListeners.add(s),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){H(!this.parameters.sitekey,this.auth,"argument-error"),H(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),H(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(r=>r(n)),typeof e=="function")e(n);else if(typeof e=="string"){const r=Rt()[e];typeof r=="function"&&r(n)}}}assertNotDestroyed(){H(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){H(vb()&&!Pb(),this.auth,"internal-error"),await dH(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await c7(this.auth);H(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return H(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function dH(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cb{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=Eo._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function fH(t,e,n){const r=yt(t),i=await gm(r,e,le(n));return new Cb(i,s=>hm(r,s))}async function pH(t,e,n){const r=le(t);await um(!1,r,"phone");const i=await gm(r.auth,e,le(n));return new Cb(i,s=>QN(r,s))}async function gH(t,e,n){const r=le(t),i=await gm(r.auth,e,le(n));return new Cb(i,s=>YN(r,s))}async function gm(t,e,n){var r;const i=await n.verify();try{H(typeof i=="string",t,"argument-error"),H(n.type===u2,t,"argument-error");let s;if(typeof e=="string"?s={phoneNumber:e}:s=e,"session"in s){const o=s.session;if("phoneNumber"in s)return H(o.type==="enroll",t,"internal-error"),(await LW(t,{idToken:o.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}})).phoneSessionInfo.sessionInfo;{H(o.type==="signin",t,"internal-error");const a=((r=s.multiFactorHint)===null||r===void 0?void 0:r.uid)||s.multiFactorUid;return H(a,t,"missing-multi-factor-info"),(await ZW(t,{mfaPendingCredential:o.credential,mfaEnrollmentId:a,phoneSignInInfo:{recaptchaToken:i}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:o}=await eW(t,{phoneNumber:s.phoneNumber,recaptchaToken:i});return o}}finally{n._reset()}}async function mH(t,e){await Eb(le(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mo=class jf{constructor(e){this.providerId=jf.PROVIDER_ID,this.auth=yt(e)}verifyPhoneNumber(e,n){return gm(this.auth,e,le(n))}static credential(e,n){return Eo._fromVerification(e,n)}static credentialFromResult(e){const n=e;return jf.credentialFromTaggedObject(n)}static credentialFromError(e){return jf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:n,temporaryProof:r}=e;return n&&r?Eo._fromTokenResponse(n,r):null}};Mo.PROVIDER_ID="phone";Mo.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ta(t,e){return e?Hn(e):(H(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nb extends ql{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return vi(e,this._buildIdpRequest())}_linkToIdToken(e,n){return vi(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return vi(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function yH(t){return GN(t.auth,new Nb(t),t.bypassAuthState)}function _H(t){const{auth:e,user:n}=t;return H(n,e,"internal-error"),KN(n,new Nb(t),t.bypassAuthState)}async function vH(t){const{auth:e,user:n}=t;return H(n,e,"internal-error"),Eb(n,new Nb(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return yH;case"linkViaPopup":case"linkViaRedirect":return vH;case"reauthViaPopup":case"reauthViaRedirect":return _H;default:en(this.auth,"internal-error")}}resolve(e){Tr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Tr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wH=new td(2e3,1e4);async function bH(t,e,n){const r=yt(t);Wl(t,e,Ci);const i=ta(r,n);return new hi(r,"signInViaPopup",e,i).executeNotNull()}async function SH(t,e,n){const r=le(t);Wl(r.auth,e,Ci);const i=ta(r.auth,n);return new hi(r.auth,"reauthViaPopup",e,i,r).executeNotNull()}async function EH(t,e,n){const r=le(t);Wl(r.auth,e,Ci);const i=ta(r.auth,n);return new hi(r.auth,"linkViaPopup",e,i,r).executeNotNull()}class hi extends h2{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,hi.currentPopupAction&&hi.currentPopupAction.cancel(),hi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return H(e,this.auth,"internal-error"),e}async onExecution(){Tr(this.filter.length===1,"Popup operations only handle one event");const e=sd();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Xt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Xt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,hi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Xt(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,wH.get())};e()}}hi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TH="pendingRedirect",_u=new Map;class IH extends h2{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=_u.get(this.auth._key());if(!e){try{const r=await xH(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}_u.set(this.auth._key(),e)}return this.bypassAuthState||_u.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function xH(t,e){const n=f2(e),r=d2(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}async function Db(t,e){return d2(t)._set(f2(e),"true")}function RH(){_u.clear()}function Ob(t,e){_u.set(t._key(),e)}function d2(t){return Hn(t._redirectPersistence)}function f2(t){return So(TH,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AH(t,e,n){return kH(t,e,n)}async function kH(t,e,n){const r=yt(t);Wl(t,e,Ci),await r._initializationPromise;const i=ta(r,n);return await Db(i,r),i._openRedirect(r,e,"signInViaRedirect")}function PH(t,e,n){return CH(t,e,n)}async function CH(t,e,n){const r=le(t);Wl(r.auth,e,Ci),await r.auth._initializationPromise;const i=ta(r.auth,n);await Db(i,r.auth);const s=await p2(r);return i._openRedirect(r.auth,e,"reauthViaRedirect",s)}function NH(t,e,n){return DH(t,e,n)}async function DH(t,e,n){const r=le(t);Wl(r.auth,e,Ci),await r.auth._initializationPromise;const i=ta(r.auth,n);await um(!1,r,e.providerId),await Db(i,r.auth);const s=await p2(r);return i._openRedirect(r.auth,e,"linkViaRedirect",s)}async function OH(t,e){return await yt(t)._initializationPromise,mm(t,e,!1)}async function mm(t,e,n=!1){const r=yt(t),i=ta(r,e),o=await new IH(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}async function p2(t){const e=sd(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LH=10*60*1e3;class g2{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!MH(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!m2(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Xt(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=LH&&this.cachedEventUids.clear(),this.cachedEventUids.has(GT(e))}saveEventToCache(e){this.cachedEventUids.add(GT(e)),this.lastProcessedEventTime=Date.now()}}function GT(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function m2({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function MH(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return m2(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y2(t,e={}){return bt(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VH=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,FH=/^https?/;async function $H(t){if(t.config.emulator)return;const{authorizedDomains:e}=await y2(t);for(const n of e)try{if(UH(n))return}catch{}en(t,"unauthorized-domain")}function UH(t){const e=nh(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!FH.test(n))return!1;if(VH.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BH=new td(3e4,6e4);function QT(){const t=Rt().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function jH(t){return new Promise((e,n)=>{var r,i,s;function o(){QT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{QT(),n(Xt(t,"network-request-failed"))},timeout:BH.get()})}if(!((i=(r=Rt().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Rt().gapi)===null||s===void 0)&&s.load)o();else{const a=BN("iframefcb");return Rt()[a]=()=>{gapi.load?o():n(Xt(t,"network-request-failed"))},Sb(`${L7()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw zf=null,e})}let zf=null;function zH(t){return zf=zf||jH(t),zf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WH=new td(5e3,15e3),HH="__/auth/iframe",qH="emulator/auth/iframe",KH={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},GH=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function QH(t){const e=t.config;H(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?wb(e,qH):`https://${t.config.authDomain}/${HH}`,r={apiKey:e.apiKey,appName:t.name,v:Ls},i=GH.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${jl(r).slice(1)}`}async function YH(t){const e=await zH(t),n=Rt().gapi;return H(n,t,"internal-error"),e.open({where:document.body,url:QH(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:KH,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Xt(t,"network-request-failed"),a=Rt().setTimeout(()=>{s(o)},WH.get());function l(){Rt().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XH={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},JH=500,ZH=600,eq="_blank",tq="http://localhost";class YT{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function nq(t,e,n,r=JH,i=ZH){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},XH),{width:r.toString(),height:i.toString(),top:s,left:o}),c=at().toLowerCase();n&&(a=LN(c)?eq:n),ON(c)&&(e=e||tq,l.scrollbars="yes");const u=Object.entries(l).reduce((d,[f,p])=>`${d}${f}=${p},`,"");if(T7(c)&&a!=="_self")return rq(e||"",a),new YT(null);const h=window.open(e||"",a,u);H(h,t,"popup-blocked");try{h.focus()}catch{}return new YT(h)}function rq(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iq="__/auth/handler",sq="emulator/auth/handler",oq=encodeURIComponent("fac");async function Uv(t,e,n,r,i,s){H(t.config.authDomain,t,"auth-domain-config-required"),H(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ls,eventId:i};if(e instanceof Ci){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Pz(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,h]of Object.entries(s||{}))o[u]=h}if(e instanceof Kl){const u=e.getScopes().filter(h=>h!=="");u.length>0&&(o.scopes=u.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];const l=await t._getAppCheckToken(),c=l?`#${oq}=${encodeURIComponent(l)}`:"";return`${aq(t)}?${jl(a).slice(1)}${c}`}function aq({config:t}){return t.emulator?wb(t,sq):`https://${t.authDomain}/${iq}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e_="webStorageSupport";class lq{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Lo,this._completeRedirectFn=mm,this._overrideRedirectResult=Ob}async _openPopup(e,n,r,i){var s;Tr((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await Uv(e,n,r,nh(),i);return nq(e,o,sd())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await Uv(e,n,r,nh(),i);return WW(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Tr(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await YH(e),r=new g2(e);return n.register("authEvent",i=>(H(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(e_,{type:e_},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[e_];o!==void 0&&n(!!o),en(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=$H(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return $N()||bb()||Hl()}}const cq=lq;class uq{constructor(e){this.factorId=e}_process(e,n,r){switch(n.type){case"enroll":return this._finalizeEnroll(e,n.credential,r);case"signin":return this._finalizeSignIn(e,n.credential);default:return $r("unexpected MultiFactorSessionType")}}}class Lb extends uq{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new Lb(e)}_finalizeEnroll(e,n,r){return MW(e,{idToken:n,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,n){return eH(e,{mfaPendingCredential:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class _2{constructor(){}static assertion(e){return Lb._fromCredential(e)}}_2.FACTOR_ID="phone";var XT="@firebase/auth",JT="1.6.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hq{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){H(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dq(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function fq(t){ys(new Qr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;H(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:UN(t)},c=new C7(r,i,s,l);return $7(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ys(new Qr("auth-internal",e=>{const n=yt(e.getProvider("auth").getImmediate());return(r=>new hq(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),qr(XT,JT,dq(t)),qr(XT,JT,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pq=5*60;bz("authIdTokenMaxAge");function gq(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}N7({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Xt("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",gq().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});fq("Browser");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vo(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mq=2e3;async function yq(t,e,n){var r;const{BuildInfo:i}=Vo();Tr(e.sessionId,"AuthEvent did not contain a session ID");const s=await Sq(e.sessionId),o={};return Hl()?o.ibi=i.packageName:nd()?o.apn=i.packageName:en(t,"operation-not-supported-in-this-environment"),i.displayName&&(o.appDisplayName=i.displayName),o.sessionId=s,Uv(t,n,e.type,void 0,(r=e.eventId)!==null&&r!==void 0?r:void 0,o)}async function _q(t){const{BuildInfo:e}=Vo(),n={};Hl()?n.iosBundleId=e.packageName:nd()?n.androidPackageName=e.packageName:en(t,"operation-not-supported-in-this-environment"),await y2(t,n)}function vq(t){const{cordova:e}=Vo();return new Promise(n=>{e.plugins.browsertab.isAvailable(r=>{let i=null;r?e.plugins.browsertab.openUrl(t):i=e.InAppBrowser.open(t,E7()?"_blank":"_system","location=yes"),n(i)})})}async function wq(t,e,n){const{cordova:r}=Vo();let i=()=>{};try{await new Promise((s,o)=>{let a=null;function l(){var h;s();const d=(h=r.plugins.browsertab)===null||h===void 0?void 0:h.close;typeof d=="function"&&d(),typeof(n==null?void 0:n.close)=="function"&&n.close()}function c(){a||(a=window.setTimeout(()=>{o(Xt(t,"redirect-cancelled-by-user"))},mq))}function u(){(document==null?void 0:document.visibilityState)==="visible"&&c()}e.addPassiveListener(l),document.addEventListener("resume",c,!1),nd()&&document.addEventListener("visibilitychange",u,!1),i=()=>{e.removePassiveListener(l),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",u,!1),a&&window.clearTimeout(a)}})}finally{i()}}function bq(t){var e,n,r,i,s,o,a,l,c,u;const h=Vo();H(typeof((e=h==null?void 0:h.universalLinks)===null||e===void 0?void 0:e.subscribe)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),H(typeof((n=h==null?void 0:h.BuildInfo)===null||n===void 0?void 0:n.packageName)<"u",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),H(typeof((s=(i=(r=h==null?void 0:h.cordova)===null||r===void 0?void 0:r.plugins)===null||i===void 0?void 0:i.browsertab)===null||s===void 0?void 0:s.openUrl)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),H(typeof((l=(a=(o=h==null?void 0:h.cordova)===null||o===void 0?void 0:o.plugins)===null||a===void 0?void 0:a.browsertab)===null||l===void 0?void 0:l.isAvailable)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),H(typeof((u=(c=h==null?void 0:h.cordova)===null||c===void 0?void 0:c.InAppBrowser)===null||u===void 0?void 0:u.open)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function Sq(t){const e=Eq(t),n=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(n)).map(i=>i.toString(16).padStart(2,"0")).join("")}function Eq(t){if(Tr(/[0-9a-zA-Z]+/.test(t),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(t);const e=new ArrayBuffer(t.length),n=new Uint8Array(e);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tq=20;class Iq extends g2{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach(n=>n(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function xq(t,e,n=null){return{type:e,eventId:n,urlResponse:null,sessionId:kq(),postBody:null,tenantId:t.tenantId,error:Xt(t,"no-auth-event")}}function Rq(t,e){return Bv()._set(jv(t),e)}async function ZT(t){const e=await Bv()._get(jv(t));return e&&await Bv()._remove(jv(t)),e}function Aq(t,e){var n,r;const i=Cq(e);if(i.includes("/__/auth/callback")){const s=Wf(i),o=s.firebaseError?Pq(decodeURIComponent(s.firebaseError)):null,a=(r=(n=o==null?void 0:o.code)===null||n===void 0?void 0:n.split("auth/"))===null||r===void 0?void 0:r[1],l=a?Xt(a):null;return l?{type:t.type,eventId:t.eventId,tenantId:t.tenantId,error:l,urlResponse:null,sessionId:null,postBody:null}:{type:t.type,eventId:t.eventId,tenantId:t.tenantId,sessionId:t.sessionId,urlResponse:i,postBody:null}}return null}function kq(){const t=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<Tq;n++){const r=Math.floor(Math.random()*e.length);t.push(e.charAt(r))}return t.join("")}function Bv(){return Hn(kb)}function jv(t){return So("authEvent",t.config.apiKey,t.name)}function Pq(t){try{return JSON.parse(t)}catch{return null}}function Cq(t){const e=Wf(t),n=e.link?decodeURIComponent(e.link):void 0,r=Wf(n).link,i=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return Wf(i).link||i||r||n||t}function Wf(t){if(!(t!=null&&t.includes("?")))return{};const[e,...n]=t.split("?");return $a(n.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nq=500;class Dq{constructor(){this._redirectPersistence=Lo,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=mm,this._overrideRedirectResult=Ob}async _initialize(e){const n=e._key();let r=this.eventManagers.get(n);return r||(r=new Iq(e),this.eventManagers.set(n,r),this.attachCallbackListeners(e,r)),r}_openPopup(e){en(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,n,r,i){bq(e);const s=await this._initialize(e);await s.initialized(),s.resetRedirect(),RH(),await this._originValidation(e);const o=xq(e,r,i);await Rq(e,o);const a=await yq(e,o,n),l=await vq(a);return wq(e,s,l)}_isIframeWebStorageSupported(e,n){throw new Error("Method not implemented.")}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=_q(e)),this.originValidationPromises[n]}attachCallbackListeners(e,n){const{universalLinks:r,handleOpenURL:i,BuildInfo:s}=Vo(),o=setTimeout(async()=>{await ZT(e),n.onEvent(eI())},Nq),a=async u=>{clearTimeout(o);const h=await ZT(e);let d=null;h&&(u!=null&&u.url)&&(d=Aq(h,u.url)),n.onEvent(d||eI())};typeof r<"u"&&typeof r.subscribe=="function"&&r.subscribe(null,a);const l=i,c=`${s.packageName.toLowerCase()}://`;Vo().handleOpenURL=async u=>{if(u.toLowerCase().startsWith(c)&&a({url:u}),typeof l=="function")try{l(u)}catch(h){console.error(h)}}}}const Oq=Dq;function eI(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Xt("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lq(t,e){yt(t)._logFramework(e)}var Mq="@firebase/auth-compat",Vq="0.5.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fq=1e3;function vu(){var t;return((t=self==null?void 0:self.location)===null||t===void 0?void 0:t.protocol)||null}function $q(){return vu()==="http:"||vu()==="https:"}function v2(t=at()){return!!((vu()==="file:"||vu()==="ionic:"||vu()==="capacitor:")&&t.toLowerCase().match(/iphone|ipad|ipod|android/))}function Uq(){return fb()||db()}function Bq(){return dN()&&(document==null?void 0:document.documentMode)===11}function jq(t=at()){return/Edge\/\d+/.test(t)}function zq(t=at()){return Bq()||jq(t)}function w2(){try{const t=self.localStorage,e=sd();if(t)return t.setItem(e,"1"),t.removeItem(e),zq()?Ju():!0}catch{return Mb()&&Ju()}return!1}function Mb(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function t_(){return($q()||hN()||v2())&&!Uq()&&w2()&&!Mb()}function b2(){return v2()&&typeof document<"u"}async function Wq(){return b2()?new Promise(t=>{const e=setTimeout(()=>{t(!1)},Fq);document.addEventListener("deviceready",()=>{clearTimeout(e),t(!0)})}):!1}function Hq(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zn={LOCAL:"local",NONE:"none",SESSION:"session"},bc=H,S2="persistence";function qq(t,e){if(bc(Object.values(zn).includes(e),t,"invalid-persistence-type"),fb()){bc(e!==zn.SESSION,t,"unsupported-persistence-type");return}if(db()){bc(e===zn.NONE,t,"unsupported-persistence-type");return}if(Mb()){bc(e===zn.NONE||e===zn.LOCAL&&Ju(),t,"unsupported-persistence-type");return}bc(e===zn.NONE||w2(),t,"unsupported-persistence-type")}async function zv(t){await t._initializationPromise;const e=E2(),n=So(S2,t.config.apiKey,t.name);e&&e.setItem(n,t._getPersistence())}function Kq(t,e){const n=E2();if(!n)return[];const r=So(S2,t,e);switch(n.getItem(r)){case zn.NONE:return[yl];case zn.LOCAL:return[ah,Lo];case zn.SESSION:return[Lo];default:return[]}}function E2(){var t;try{return((t=Hq())===null||t===void 0?void 0:t.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gq=H;class Yi{constructor(){this.browserResolver=Hn(cq),this.cordovaResolver=Hn(Oq),this.underlyingResolver=null,this._redirectPersistence=Lo,this._completeRedirectFn=mm,this._overrideRedirectResult=Ob}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,n,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,n,r,i)}async _openRedirect(e,n,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,n,r,i)}_isIframeWebStorageSupported(e,n){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,n)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return b2()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Gq(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await Wq();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T2(t){return t.unwrap()}function Qq(t){return t.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yq(t){return I2(t)}function Xq(t,e){var n;const r=(n=e.customData)===null||n===void 0?void 0:n._tokenResponse;if((e==null?void 0:e.code)==="auth/multi-factor-auth-required"){const i=e;i.resolver=new Jq(t,OW(t,e))}else if(r){const i=I2(e),s=e;i&&(s.credential=i,s.tenantId=r.tenantId||void 0,s.email=r.email||void 0,s.phoneNumber=r.phoneNumber||void 0)}}function I2(t){const{_tokenResponse:e}=t instanceof yn?t.customData:t;if(!e)return null;if(!(t instanceof yn)&&"temporaryProof"in e&&"phoneNumber"in e)return Mo.credentialFromResult(t);const n=e.providerId;if(!n||n===wc.PASSWORD)return null;let r;switch(n){case wc.GOOGLE:r=Or;break;case wc.FACEBOOK:r=Dr;break;case wc.GITHUB:r=Lr;break;case wc.TWITTER:r=Mr;break;default:const{oauthIdToken:i,oauthAccessToken:s,oauthTokenSecret:o,pendingToken:a,nonce:l}=e;return!s&&!o&&!i&&!a?null:a?n.startsWith("saml.")?_l._create(n,a):Yr._fromParams({providerId:n,signInMethod:n,pendingToken:a,idToken:i,accessToken:s}):new Ja(n).credential({idToken:i,accessToken:s,rawNonce:l})}return t instanceof yn?r.credentialFromError(t):r.credentialFromResult(t)}function In(t,e){return e.catch(n=>{throw n instanceof yn&&Xq(t,n),n}).then(n=>{const r=n.operationType,i=n.user;return{operationType:r,credential:Yq(n),additionalUserInfo:CW(n),user:ym.getOrCreate(i)}})}async function Wv(t,e){const n=await e;return{verificationId:n.verificationId,confirm:r=>In(t,n.confirm(r))}}class Jq{constructor(e,n){this.resolver=n,this.auth=Qq(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return In(T2(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ym=class Wc{constructor(e){this._delegate=e,this.multiFactor=FW(e)}static getOrCreate(e){return Wc.USER_MAP.has(e)||Wc.USER_MAP.set(e,new Wc(e)),Wc.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return In(this.auth,QN(this._delegate,e))}async linkWithPhoneNumber(e,n){return Wv(this.auth,pH(this._delegate,e,n))}async linkWithPopup(e){return In(this.auth,EH(this._delegate,e,Yi))}async linkWithRedirect(e){return await zv(yt(this.auth)),NH(this._delegate,e,Yi)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return In(this.auth,YN(this._delegate,e))}reauthenticateWithPhoneNumber(e,n){return Wv(this.auth,gH(this._delegate,e,n))}reauthenticateWithPopup(e){return In(this.auth,SH(this._delegate,e,Yi))}async reauthenticateWithRedirect(e){return await zv(yt(this.auth)),PH(this._delegate,e,Yi)}sendEmailVerification(e){return bW(this._delegate,e)}async unlink(e){return await uW(this._delegate,e),this}updateEmail(e){return TW(this._delegate,e)}updatePassword(e){return IW(this._delegate,e)}updatePhoneNumber(e){return mH(this._delegate,e)}updateProfile(e){return t2(this._delegate,e)}verifyBeforeUpdateEmail(e,n){return SW(this._delegate,e,n)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}};ym.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sc=H;class Hv{constructor(e,n){if(this.app=e,n.isInitialized()){this._delegate=n.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:r}=e.options;Sc(r,"invalid-api-key",{appName:e.name}),Sc(r,"invalid-api-key",{appName:e.name});const i=typeof window<"u"?Yi:void 0;this._delegate=n.initialize({options:{persistence:Zq(r,e.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(Z8),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ym.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,n){U7(this._delegate,e,n)}applyActionCode(e){return pW(this._delegate,e)}checkActionCode(e){return JN(this._delegate,e)}confirmPasswordReset(e,n){return fW(this._delegate,e,n)}async createUserWithEmailAndPassword(e,n){return In(this._delegate,ZN(this._delegate,e,n))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return wW(this._delegate,e)}isSignInWithEmailLink(e){return yW(this._delegate,e)}async getRedirectResult(){Sc(t_(),this._delegate,"operation-not-supported-in-this-environment");const e=await OH(this._delegate,Yi);return e?In(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){Lq(this._delegate,e)}onAuthStateChanged(e,n,r){const{next:i,error:s,complete:o}=tI(e,n,r);return this._delegate.onAuthStateChanged(i,s,o)}onIdTokenChanged(e,n,r){const{next:i,error:s,complete:o}=tI(e,n,r);return this._delegate.onIdTokenChanged(i,s,o)}sendSignInLinkToEmail(e,n){return mW(this._delegate,e,n)}sendPasswordResetEmail(e,n){return XN(this._delegate,e,n||void 0)}async setPersistence(e){qq(this._delegate,e);let n;switch(e){case zn.SESSION:n=Lo;break;case zn.LOCAL:n=await Hn(ah)._isAvailable()?ah:kb;break;case zn.NONE:n=yl;break;default:return en("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(n)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return In(this._delegate,cW(this._delegate))}signInWithCredential(e){return In(this._delegate,hm(this._delegate,e))}signInWithCustomToken(e){return In(this._delegate,dW(this._delegate,e))}signInWithEmailAndPassword(e,n){return In(this._delegate,e2(this._delegate,e,n))}signInWithEmailLink(e,n){return In(this._delegate,_W(this._delegate,e,n))}signInWithPhoneNumber(e,n){return Wv(this._delegate,fH(this._delegate,e,n))}async signInWithPopup(e){return Sc(t_(),this._delegate,"operation-not-supported-in-this-environment"),In(this._delegate,bH(this._delegate,e,Yi))}async signInWithRedirect(e){return Sc(t_(),this._delegate,"operation-not-supported-in-this-environment"),await zv(this._delegate),AH(this._delegate,e,Yi)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return gW(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}Hv.Persistence=zn;function tI(t,e,n){let r=t;typeof t!="function"&&({next:r,error:e,complete:n}=t);const i=r;return{next:o=>i(o&&ym.getOrCreate(o)),error:e,complete:n}}function Zq(t,e){const n=Kq(t,e);if(typeof self<"u"&&!n.includes(ah)&&n.push(ah),typeof window<"u")for(const r of[kb,Lo])n.includes(r)||n.push(r);return n.includes(yl)||n.push(yl),n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vb{constructor(){this.providerId="phone",this._delegate=new Mo(T2(zl.auth()))}static credential(e,n){return Mo.credential(e,n)}verifyPhoneNumber(e,n){return this._delegate.verifyPhoneNumber(e,n)}unwrap(){return this._delegate}}Vb.PHONE_SIGN_IN_METHOD=Mo.PHONE_SIGN_IN_METHOD;Vb.PROVIDER_ID=Mo.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eK=H;class tK{constructor(e,n,r=zl.app()){var i;eK((i=r.options)===null||i===void 0?void 0:i.apiKey,"invalid-api-key",{appName:r.name}),this._delegate=new hH(r.auth(),e,n),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nK="auth-compat";function rK(t){t.INTERNAL.registerComponent(new Qr(nK,e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("auth");return new Hv(n,r)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:pa.EMAIL_SIGNIN,PASSWORD_RESET:pa.PASSWORD_RESET,RECOVER_EMAIL:pa.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:pa.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:pa.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:pa.VERIFY_EMAIL}},EmailAuthProvider:Ms,FacebookAuthProvider:Dr,GithubAuthProvider:Lr,GoogleAuthProvider:Or,OAuthProvider:Ja,SAMLAuthProvider:Wp,PhoneAuthProvider:Vb,PhoneMultiFactorGenerator:_2,RecaptchaVerifier:tK,TwitterAuthProvider:Mr,Auth:Hv,AuthCredential:ql,Error:yn}).setInstantiationMode("LAZY").setMultipleInstances(!1)),t.registerVersion(Mq,Vq)}rK(zl);var iK=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},X,Fb=Fb||{},ge=iK||self;function _m(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function ad(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function sK(t){return Object.prototype.hasOwnProperty.call(t,n_)&&t[n_]||(t[n_]=++oK)}var n_="closure_uid_"+(1e9*Math.random()>>>0),oK=0;function aK(t,e,n){return t.call.apply(t.bind,arguments)}function lK(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function ln(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?ln=aK:ln=lK,ln.apply(null,arguments)}function nf(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function zt(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function Vs(){this.s=this.s,this.o=this.o}var cK=0;Vs.prototype.s=!1;Vs.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),cK!=0)&&sK(this)};Vs.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const x2=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function $b(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function nI(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(_m(r)){const i=t.length||0,s=r.length||0;t.length=i+s;for(let o=0;o<s;o++)t[i+o]=r[o]}else t.push(r)}}function cn(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}cn.prototype.h=function(){this.defaultPrevented=!0};var uK=function(){if(!ge.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{const n=()=>{};ge.addEventListener("test",n,e),ge.removeEventListener("test",n,e)}catch{}return t}();function lh(t){return/^[\s\xa0]*$/.test(t)}function vm(){var t=ge.navigator;return t&&(t=t.userAgent)?t:""}function Vr(t){return vm().indexOf(t)!=-1}function Ub(t){return Ub[" "](t),t}Ub[" "]=function(){};function hK(t,e){var n=rG;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var dK=Vr("Opera"),vl=Vr("Trident")||Vr("MSIE"),R2=Vr("Edge"),qv=R2||vl,A2=Vr("Gecko")&&!(vm().toLowerCase().indexOf("webkit")!=-1&&!Vr("Edge"))&&!(Vr("Trident")||Vr("MSIE"))&&!Vr("Edge"),fK=vm().toLowerCase().indexOf("webkit")!=-1&&!Vr("Edge");function k2(){var t=ge.document;return t?t.documentMode:void 0}var Kv;e:{var r_="",i_=function(){var t=vm();if(A2)return/rv:([^\);]+)(\)|;)/.exec(t);if(R2)return/Edge\/([\d\.]+)/.exec(t);if(vl)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(fK)return/WebKit\/(\S+)/.exec(t);if(dK)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(i_&&(r_=i_?i_[1]:""),vl){var s_=k2();if(s_!=null&&s_>parseFloat(r_)){Kv=String(s_);break e}}Kv=r_}var Gv;if(ge.document&&vl){var rI=k2();Gv=rI||parseInt(Kv,10)||void 0}else Gv=void 0;var pK=Gv;function ch(t,e){if(cn.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(A2){e:{try{Ub(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:gK[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&ch.$.h.call(this)}}zt(ch,cn);var gK={2:"touch",3:"pen",4:"mouse"};ch.prototype.h=function(){ch.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var ld="closure_listenable_"+(1e6*Math.random()|0),mK=0;function yK(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++mK,this.fa=this.ia=!1}function wm(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function Bb(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function _K(t,e){for(const n in t)e.call(void 0,t[n],n,t)}function P2(t){const e={};for(const n in t)e[n]=t[n];return e}const iI="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C2(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let s=0;s<iI.length;s++)n=iI[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function bm(t){this.src=t,this.g={},this.h=0}bm.prototype.add=function(t,e,n,r,i){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var o=Yv(t,e,r,i);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new yK(e,this.src,s,!!r,i),e.ia=n,t.push(e)),e};function Qv(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=x2(r,e),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(wm(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function Yv(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==r)return i}return-1}var jb="closure_lm_"+(1e6*Math.random()|0),o_={};function N2(t,e,n,r,i){if(r&&r.once)return O2(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)N2(t,e[s],n,r,i);return null}return n=Hb(n),t&&t[ld]?t.O(e,n,ad(r)?!!r.capture:!!r,i):D2(t,e,n,!1,r,i)}function D2(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=ad(i)?!!i.capture:!!i,a=Wb(t);if(a||(t[jb]=a=new bm(t)),n=a.add(e,n,r,o,s),n.proxy)return n;if(r=vK(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)uK||(i=o),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(M2(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function vK(){function t(n){return e.call(t.src,t.listener,n)}const e=wK;return t}function O2(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)O2(t,e[s],n,r,i);return null}return n=Hb(n),t&&t[ld]?t.P(e,n,ad(r)?!!r.capture:!!r,i):D2(t,e,n,!0,r,i)}function L2(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)L2(t,e[s],n,r,i);else r=ad(r)?!!r.capture:!!r,n=Hb(n),t&&t[ld]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=Yv(s,n,r,i),-1<n&&(wm(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=Wb(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Yv(e,n,r,i)),(n=-1<t?e[t]:null)&&zb(n))}function zb(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[ld])Qv(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(M2(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Wb(e))?(Qv(n,t),n.h==0&&(n.src=null,e[jb]=null)):wm(t)}}}function M2(t){return t in o_?o_[t]:o_[t]="on"+t}function wK(t,e){if(t.fa)t=!0;else{e=new ch(e,this);var n=t.listener,r=t.la||t.src;t.ia&&zb(t),t=n.call(r,e)}return t}function Wb(t){return t=t[jb],t instanceof bm?t:null}var a_="__closure_events_fn_"+(1e9*Math.random()>>>0);function Hb(t){return typeof t=="function"?t:(t[a_]||(t[a_]=function(e){return t.handleEvent(e)}),t[a_])}function jt(){Vs.call(this),this.i=new bm(this),this.S=this,this.J=null}zt(jt,Vs);jt.prototype[ld]=!0;jt.prototype.removeEventListener=function(t,e,n,r){L2(this,t,e,n,r)};function Jt(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new cn(e,t);else if(e instanceof cn)e.target=e.target||t;else{var i=e;e=new cn(r,t),C2(e,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=rf(o,r,!0,e)&&i}if(o=e.g=t,i=rf(o,r,!0,e)&&i,i=rf(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)o=e.g=n[s],i=rf(o,r,!1,e)&&i}jt.prototype.N=function(){if(jt.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)wm(n[r]);delete t.g[e],t.h--}}this.J=null};jt.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};jt.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function rf(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&Qv(t.i,o),i=a.call(l,r)!==!1&&i}}return i&&!r.defaultPrevented}var qb=ge.JSON.stringify;class bK{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function SK(){var t=Kb;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class EK{constructor(){this.h=this.g=null}add(e,n){const r=V2.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var V2=new bK(()=>new TK,t=>t.reset());class TK{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function IK(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function xK(t){ge.setTimeout(()=>{throw t},0)}let uh,hh=!1,Kb=new EK,F2=()=>{const t=ge.Promise.resolve(void 0);uh=()=>{t.then(RK)}};var RK=()=>{for(var t;t=SK();){try{t.h.call(t.g)}catch(n){xK(n)}var e=V2;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}hh=!1};function Sm(t,e){jt.call(this),this.h=t||1,this.g=e||ge,this.j=ln(this.qb,this),this.l=Date.now()}zt(Sm,jt);X=Sm.prototype;X.ga=!1;X.T=null;X.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Jt(this,"tick"),this.ga&&(Gb(this),this.start()))}};X.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Gb(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}X.N=function(){Sm.$.N.call(this),Gb(this),delete this.g};function Qb(t,e,n){if(typeof t=="function")n&&(t=ln(t,n));else if(t&&typeof t.handleEvent=="function")t=ln(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:ge.setTimeout(t,e||0)}function $2(t){t.g=Qb(()=>{t.g=null,t.i&&(t.i=!1,$2(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class AK extends Vs{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:$2(this)}N(){super.N(),this.g&&(ge.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function dh(t){Vs.call(this),this.h=t,this.g={}}zt(dh,Vs);var sI=[];function U2(t,e,n,r){Array.isArray(n)||(n&&(sI[0]=n.toString()),n=sI);for(var i=0;i<n.length;i++){var s=N2(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function B2(t){Bb(t.g,function(e,n){this.g.hasOwnProperty(n)&&zb(e)},t),t.g={}}dh.prototype.N=function(){dh.$.N.call(this),B2(this)};dh.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Em(){this.g=!0}Em.prototype.Ea=function(){this.g=!1};function kK(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");o=2<=h.length&&h[1]=="type"?o+(u+"="+c+"&"):o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+o})}function PK(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+s+" "+o})}function Ua(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+NK(t,n)+(r?" "+r:"")})}function CK(t,e){t.info(function(){return"TIMEOUT: "+e})}Em.prototype.info=function(){};function NK(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return qb(n)}catch{return e}}var na={},oI=null;function Tm(){return oI=oI||new jt}na.Ta="serverreachability";function j2(t){cn.call(this,na.Ta,t)}zt(j2,cn);function fh(t){const e=Tm();Jt(e,new j2(e))}na.STAT_EVENT="statevent";function z2(t,e){cn.call(this,na.STAT_EVENT,t),this.stat=e}zt(z2,cn);function gn(t){const e=Tm();Jt(e,new z2(e,t))}na.Ua="timingevent";function W2(t,e){cn.call(this,na.Ua,t),this.size=e}zt(W2,cn);function cd(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return ge.setTimeout(function(){t()},e)}var Im={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},H2={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Yb(){}Yb.prototype.h=null;function aI(t){return t.h||(t.h=t.i())}function q2(){}var ud={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Xb(){cn.call(this,"d")}zt(Xb,cn);function Jb(){cn.call(this,"c")}zt(Jb,cn);var Xv;function xm(){}zt(xm,Yb);xm.prototype.g=function(){return new XMLHttpRequest};xm.prototype.i=function(){return{}};Xv=new xm;function hd(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new dh(this),this.P=DK,t=qv?125:void 0,this.V=new Sm(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new K2}function K2(){this.i=null,this.g="",this.h=!1}var DK=45e3,G2={},Jv={};X=hd.prototype;X.setTimeout=function(t){this.P=t};function Zv(t,e,n){t.L=1,t.A=Am(xi(e)),t.u=n,t.S=!0,Q2(t,null)}function Q2(t,e){t.G=Date.now(),dd(t),t.B=xi(t.A);var n=t.B,r=t.W;Array.isArray(r)||(r=[String(r)]),rD(n.i,"t",r),t.o=0,n=t.l.J,t.h=new K2,t.g=TD(t.l,n?e:null,!t.u),0<t.O&&(t.M=new AK(ln(t.Pa,t,t.g),t.O)),U2(t.U,t.g,"readystatechange",t.nb),e=t.I?P2(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),fh(),kK(t.j,t.v,t.B,t.m,t.W,t.u)}X.nb=function(t){t=t.target;const e=this.M;e&&Ur(t)==3?e.l():this.Pa(t)};X.Pa=function(t){try{if(t==this.g)e:{const u=Ur(this.g);var e=this.g.Ia();const h=this.g.da();if(!(3>u)&&(u!=3||qv||this.g&&(this.h.h||this.g.ja()||hI(this.g)))){this.J||u!=4||e==7||(e==8||0>=h?fh(3):fh(2)),Rm(this);var n=this.g.da();this.ca=n;t:if(Y2(this)){var r=hI(this.g);t="";var i=r.length,s=Ur(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){fo(this),wu(this);var o="";break t}this.h.i=new ge.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.length=0,this.h.g+=t,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,PK(this.j,this.v,this.B,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!lh(a)){var c=a;break t}}c=null}if(n=c)Ua(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,e0(this,n);else{this.i=!1,this.s=3,gn(12),fo(this),wu(this);break e}}this.S?(X2(this,u,o),qv&&this.i&&u==3&&(U2(this.U,this.V,"tick",this.mb),this.V.start())):(Ua(this.j,this.m,o,null),e0(this,o)),u==4&&fo(this),this.i&&!this.J&&(u==4?wD(this.l,this):(this.i=!1,dd(this)))}else eG(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.s=3,gn(12)):(this.s=0,gn(13)),fo(this),wu(this)}}}catch{}finally{}};function Y2(t){return t.g?t.v=="GET"&&t.L!=2&&t.l.Ha:!1}function X2(t,e,n){let r=!0,i;for(;!t.J&&t.o<n.length;)if(i=OK(t,n),i==Jv){e==4&&(t.s=4,gn(14),r=!1),Ua(t.j,t.m,null,"[Incomplete Response]");break}else if(i==G2){t.s=4,gn(15),Ua(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else Ua(t.j,t.m,i,null),e0(t,i);Y2(t)&&t.o!=0&&(t.h.g=t.h.g.slice(t.o),t.o=0),e!=4||n.length!=0||t.h.h||(t.s=1,gn(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),i1(e),e.M=!0,gn(11))):(Ua(t.j,t.m,n,"[Invalid Chunked Response]"),fo(t),wu(t))}X.mb=function(){if(this.g){var t=Ur(this.g),e=this.g.ja();this.o<e.length&&(Rm(this),X2(this,t,e),this.i&&t!=4&&dd(this))}};function OK(t,e){var n=t.o,r=e.indexOf(`
`,n);return r==-1?Jv:(n=Number(e.substring(n,r)),isNaN(n)?G2:(r+=1,r+n>e.length?Jv:(e=e.slice(r,r+n),t.o=r+n,e)))}X.cancel=function(){this.J=!0,fo(this)};function dd(t){t.Y=Date.now()+t.P,J2(t,t.P)}function J2(t,e){if(t.C!=null)throw Error("WatchDog timer not null");t.C=cd(ln(t.lb,t),e)}function Rm(t){t.C&&(ge.clearTimeout(t.C),t.C=null)}X.lb=function(){this.C=null;const t=Date.now();0<=t-this.Y?(CK(this.j,this.B),this.L!=2&&(fh(),gn(17)),fo(this),this.s=2,wu(this)):J2(this,this.Y-t)};function wu(t){t.l.H==0||t.J||wD(t.l,t)}function fo(t){Rm(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,Gb(t.V),B2(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function e0(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||t0(n.i,t))){if(!t.K&&t0(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)Yp(n),Nm(n);else break e;r1(n),gn(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=cd(ln(n.ib,n),6e3));if(1>=oD(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else po(n,11)}else if((t.K||n.g==t)&&Yp(n),!lh(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let c=i[e];if(n.V=c[0],c=c[1],n.H==2)if(c[0]=="c"){n.K=c[1],n.pa=c[2];const u=c[3];u!=null&&(n.ra=u,n.l.info("VER="+n.ra));const h=c[4];h!=null&&(n.Ga=h,n.l.info("SVER="+n.Ga));const d=c[5];d!=null&&typeof d=="number"&&0<d&&(r=1.5*d,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const f=t.g;if(f){const p=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(p){var s=r.i;s.g||p.indexOf("spdy")==-1&&p.indexOf("quic")==-1&&p.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(Zb(s,s.h),s.h=null))}if(r.F){const g=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;g&&(r.Da=g,Ke(r.I,r.F,g))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=t;if(r.wa=ED(r,r.J?r.pa:null,r.Y),o.K){aD(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.C&&(Rm(a),dd(a)),r.g=o}else _D(r);0<n.j.length&&Dm(n)}else c[0]!="stop"&&c[0]!="close"||po(n,7);else n.H==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?po(n,7):n1(n):c[0]!="noop"&&n.h&&n.h.Aa(c),n.A=0)}}fh(4)}catch{}}function LK(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(_m(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function MK(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(_m(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}function Z2(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(_m(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=MK(t),r=LK(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}var eD=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function VK(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function To(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof To){this.h=t.h,Gp(this,t.j),this.s=t.s,this.g=t.g,Qp(this,t.m),this.l=t.l;var e=t.i,n=new ph;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),lI(this,n),this.o=t.o}else t&&(e=String(t).match(eD))?(this.h=!1,Gp(this,e[1]||"",!0),this.s=Hc(e[2]||""),this.g=Hc(e[3]||"",!0),Qp(this,e[4]),this.l=Hc(e[5]||"",!0),lI(this,e[6]||"",!0),this.o=Hc(e[7]||"")):(this.h=!1,this.i=new ph(null,this.h))}To.prototype.toString=function(){var t=[],e=this.j;e&&t.push(qc(e,cI,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(qc(e,cI,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(qc(n,n.charAt(0)=="/"?UK:$K,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",qc(n,jK)),t.join("")};function xi(t){return new To(t)}function Gp(t,e,n){t.j=n?Hc(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Qp(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function lI(t,e,n){e instanceof ph?(t.i=e,zK(t.i,t.h)):(n||(e=qc(e,BK)),t.i=new ph(e,t.h))}function Ke(t,e,n){t.i.set(e,n)}function Am(t){return Ke(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Hc(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function qc(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,FK),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function FK(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var cI=/[#\/\?@]/g,$K=/[#\?:]/g,UK=/[#\?]/g,BK=/[#\?@]/g,jK=/#/g;function ph(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Fs(t){t.g||(t.g=new Map,t.h=0,t.i&&VK(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}X=ph.prototype;X.add=function(t,e){Fs(this),this.i=null,t=Gl(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function tD(t,e){Fs(t),e=Gl(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function nD(t,e){return Fs(t),e=Gl(t,e),t.g.has(e)}X.forEach=function(t,e){Fs(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)};X.ta=function(){Fs(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n};X.Z=function(t){Fs(this);let e=[];if(typeof t=="string")nD(this,t)&&(e=e.concat(this.g.get(Gl(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};X.set=function(t,e){return Fs(this),this.i=null,t=Gl(this,t),nD(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};X.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function rD(t,e,n){tD(t,e),0<n.length&&(t.i=null,t.g.set(Gl(t,e),$b(n)),t.h+=n.length)}X.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;o[r]!==""&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};function Gl(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function zK(t,e){e&&!t.j&&(Fs(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(tD(this,r),rD(this,i,n))},t)),t.j=e}var WK=class{constructor(t,e){this.g=t,this.map=e}};function iD(t){this.l=t||HK,ge.PerformanceNavigationTiming?(t=ge.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(ge.g&&ge.g.Ka&&ge.g.Ka()&&ge.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var HK=10;function sD(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function oD(t){return t.h?1:t.g?t.g.size:0}function t0(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function Zb(t,e){t.g?t.g.add(e):t.h=e}function aD(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}iD.prototype.cancel=function(){if(this.i=lD(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function lD(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return $b(t.i)}var qK=class{stringify(t){return ge.JSON.stringify(t,void 0)}parse(t){return ge.JSON.parse(t,void 0)}};function KK(){this.g=new qK}function GK(t,e,n){const r=n||"";try{Z2(t,function(i,s){let o=i;ad(i)&&(o=qb(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function QK(t,e){const n=new Em;if(ge.Image){const r=new Image;r.onload=nf(sf,n,r,"TestLoadImage: loaded",!0,e),r.onerror=nf(sf,n,r,"TestLoadImage: error",!1,e),r.onabort=nf(sf,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=nf(sf,n,r,"TestLoadImage: timeout",!1,e),ge.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function sf(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function km(t){this.l=t.ec||null,this.j=t.ob||!1}zt(km,Yb);km.prototype.g=function(){return new Pm(this.l,this.j)};km.prototype.i=function(t){return function(){return t}}({});function Pm(t,e){jt.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=e1,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}zt(Pm,jt);var e1=0;X=Pm.prototype;X.open=function(t,e){if(this.readyState!=e1)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,gh(this)};X.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||ge).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};X.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,fd(this)),this.readyState=e1};X.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,gh(this)),this.g&&(this.readyState=3,gh(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof ge.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;cD(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function cD(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}X.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?fd(this):gh(this),this.readyState==3&&cD(this)}};X.Za=function(t){this.g&&(this.response=this.responseText=t,fd(this))};X.Ya=function(t){this.g&&(this.response=t,fd(this))};X.ka=function(){this.g&&fd(this)};function fd(t){t.readyState=4,t.l=null,t.j=null,t.A=null,gh(t)}X.setRequestHeader=function(t,e){this.v.append(t,e)};X.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};X.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function gh(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Pm.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var YK=ge.JSON.parse;function _t(t){jt.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=uD,this.L=this.M=!1}zt(_t,jt);var uD="",XK=/^https?$/i,JK=["POST","PUT"];X=_t.prototype;X.Oa=function(t){this.M=t};X.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Xv.g(),this.C=this.u?aI(this.u):aI(Xv),this.g.onreadystatechange=ln(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){uI(this,s);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const s of r.keys())n.set(s,r.get(s));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),i=ge.FormData&&t instanceof ge.FormData,!(0<=x2(JK,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{fD(this),0<this.B&&((this.L=ZK(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ln(this.ua,this)):this.A=Qb(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){uI(this,s)}};function ZK(t){return vl&&typeof t.timeout=="number"&&t.ontimeout!==void 0}X.ua=function(){typeof Fb<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Jt(this,"timeout"),this.abort(8))};function uI(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,hD(t),Cm(t)}function hD(t){t.F||(t.F=!0,Jt(t,"complete"),Jt(t,"error"))}X.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Jt(this,"complete"),Jt(this,"abort"),Cm(this))};X.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Cm(this,!0)),_t.$.N.call(this)};X.La=function(){this.s||(this.G||this.v||this.l?dD(this):this.kb())};X.kb=function(){dD(this)};function dD(t){if(t.h&&typeof Fb<"u"&&(!t.C[1]||Ur(t)!=4||t.da()!=2)){if(t.v&&Ur(t)==4)Qb(t.La,0,t);else if(Jt(t,"readystatechange"),Ur(t)==4){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=o===0){var i=String(t.I).match(eD)[1]||null;!i&&ge.self&&ge.self.location&&(i=ge.self.location.protocol.slice(0,-1)),r=!XK.test(i?i.toLowerCase():"")}n=r}if(n)Jt(t,"complete"),Jt(t,"success");else{t.m=6;try{var s=2<Ur(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",hD(t)}}finally{Cm(t)}}}}function Cm(t,e){if(t.g){fD(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||Jt(t,"ready");try{n.onreadystatechange=r}catch{}}}function fD(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(ge.clearTimeout(t.A),t.A=null)}X.isActive=function(){return!!this.g};function Ur(t){return t.g?t.g.readyState:0}X.da=function(){try{return 2<Ur(this)?this.g.status:-1}catch{return-1}};X.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};X.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),YK(e)}};function hI(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case uD:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function eG(t){const e={};t=(t.g&&2<=Ur(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(lh(t[r]))continue;var n=IK(t[r]);const i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const s=e[i]||[];e[i]=s,s.push(n)}_K(e,function(r){return r.join(", ")})}X.Ia=function(){return this.m};X.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function pD(t){let e="";return Bb(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function t1(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=pD(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):Ke(t,e,n))}function Ec(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function gD(t){this.Ga=0,this.j=[],this.l=new Em,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Ec("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Ec("baseRetryDelayMs",5e3,t),this.hb=Ec("retryDelaySeedMs",1e4,t),this.eb=Ec("forwardChannelMaxRetries",2,t),this.xa=Ec("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new iD(t&&t.concurrentRequestLimit),this.Ja=new KK,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}X=gD.prototype;X.ra=8;X.H=1;function n1(t){if(mD(t),t.H==3){var e=t.W++,n=xi(t.I);if(Ke(n,"SID",t.K),Ke(n,"RID",e),Ke(n,"TYPE","terminate"),pd(t,n),e=new hd(t,t.l,e),e.L=2,e.A=Am(xi(n)),n=!1,ge.navigator&&ge.navigator.sendBeacon)try{n=ge.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&ge.Image&&(new Image().src=e.A,n=!0),n||(e.g=TD(e.l,null),e.g.ha(e.A)),e.G=Date.now(),dd(e)}SD(t)}function Nm(t){t.g&&(i1(t),t.g.cancel(),t.g=null)}function mD(t){Nm(t),t.u&&(ge.clearTimeout(t.u),t.u=null),Yp(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&ge.clearTimeout(t.m),t.m=null)}function Dm(t){if(!sD(t.i)&&!t.m){t.m=!0;var e=t.Na;uh||F2(),hh||(uh(),hh=!0),Kb.add(e,t),t.C=0}}function tG(t,e){return oD(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=cd(ln(t.Na,t,e),bD(t,t.C)),t.C++,!0)}X.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const i=new hd(this,this.l,t);let s=this.s;if(this.U&&(s?(s=P2(s),C2(s,this.U)):s=this.U),this.o!==null||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=yD(this,i,e),n=xi(this.I),Ke(n,"RID",t),Ke(n,"CVER",22),this.F&&Ke(n,"X-HTTP-Session-Id",this.F),pd(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(pD(s)))+"&"+e:this.o&&t1(n,this.o,s)),Zb(this.i,i),this.bb&&Ke(n,"TYPE","init"),this.P?(Ke(n,"$req",e),Ke(n,"SID","null"),i.aa=!0,Zv(i,n,null)):Zv(i,n,e),this.H=2}}else this.H==3&&(t?dI(this,t):this.j.length==0||sD(this.i)||dI(this))};function dI(t,e){var n;e?n=e.m:n=t.W++;const r=xi(t.I);Ke(r,"SID",t.K),Ke(r,"RID",n),Ke(r,"AID",t.V),pd(t,r),t.o&&t.s&&t1(r,t.o,t.s),n=new hd(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=yD(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),Zb(t.i,n),Zv(n,r,e)}function pd(t,e){t.na&&Bb(t.na,function(n,r){Ke(e,r,n)}),t.h&&Z2({},function(n,r){Ke(e,r,n)})}function yD(t,e,n){n=Math.min(t.j.length,n);var r=t.h?ln(t.h.Va,t.h,t):null;e:{var i=t.j;let s=-1;for(;;){const o=["count="+n];s==-1?0<n?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let l=0;l<n;l++){let c=i[l].g;const u=i[l].map;if(c-=s,0>c)s=Math.max(0,i[l].g-100),a=!1;else try{GK(u,o,"req"+c+"_")}catch{r&&r(u)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function _D(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;uh||F2(),hh||(uh(),hh=!0),Kb.add(e,t),t.A=0}}function r1(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=cd(ln(t.Ma,t),bD(t,t.A)),t.A++,!0)}X.Ma=function(){if(this.u=null,vD(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=cd(ln(this.jb,this),t)}};X.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,gn(10),Nm(this),vD(this))};function i1(t){t.B!=null&&(ge.clearTimeout(t.B),t.B=null)}function vD(t){t.g=new hd(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=xi(t.wa);Ke(e,"RID","rpc"),Ke(e,"SID",t.K),Ke(e,"AID",t.V),Ke(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Ke(e,"TO",t.qa),Ke(e,"TYPE","xmlhttp"),pd(t,e),t.o&&t.s&&t1(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=Am(xi(e)),n.u=null,n.S=!0,Q2(n,t)}X.ib=function(){this.v!=null&&(this.v=null,Nm(this),r1(this),gn(19))};function Yp(t){t.v!=null&&(ge.clearTimeout(t.v),t.v=null)}function wD(t,e){var n=null;if(t.g==e){Yp(t),i1(t),t.g=null;var r=2}else if(t0(t.i,e))n=e.F,aD(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.u?e.u.length:0,e=Date.now()-e.G;var i=t.C;r=Tm(),Jt(r,new W2(r,n)),Dm(t)}else _D(t);else if(i=e.s,i==3||i==0&&0<e.ca||!(r==1&&tG(t,e)||r==2&&r1(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:po(t,5);break;case 4:po(t,10);break;case 3:po(t,6);break;default:po(t,2)}}}function bD(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function po(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=ln(t.pb,t);n||(n=new To("//www.google.com/images/cleardot.gif"),ge.location&&ge.location.protocol=="http"||Gp(n,"https"),Am(n)),QK(n.toString(),r)}else gn(2);t.H=0,t.h&&t.h.za(e),SD(t),mD(t)}X.pb=function(t){t?(this.l.info("Successfully pinged google.com"),gn(2)):(this.l.info("Failed to ping google.com"),gn(1))};function SD(t){if(t.H=0,t.ma=[],t.h){const e=lD(t.i);(e.length!=0||t.j.length!=0)&&(nI(t.ma,e),nI(t.ma,t.j),t.i.i.length=0,$b(t.j),t.j.length=0),t.h.ya()}}function ED(t,e,n){var r=n instanceof To?xi(n):new To(n);if(r.g!="")e&&(r.g=e+"."+r.g),Qp(r,r.m);else{var i=ge.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new To(null);r&&Gp(s,r),e&&(s.g=e),i&&Qp(s,i),n&&(s.l=n),r=s}return n=t.F,e=t.Da,n&&e&&Ke(r,n,e),Ke(r,"VER",t.ra),pd(t,r),r}function TD(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=t.Ha&&!t.va?new _t(new km({ob:n})):new _t(t.va),e.Oa(t.J),e}X.isActive=function(){return!!this.h&&this.h.isActive(this)};function ID(){}X=ID.prototype;X.Ba=function(){};X.Aa=function(){};X.za=function(){};X.ya=function(){};X.isActive=function(){return!0};X.Va=function(){};function Xp(){if(vl&&!(10<=Number(pK)))throw Error("Environmental error: no available transport.")}Xp.prototype.g=function(t,e){return new Gn(t,e)};function Gn(t,e){jt.call(this),this.g=new gD(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!lh(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!lh(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new Ql(this)}zt(Gn,jt);Gn.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;gn(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=ED(t,null,t.Y),Dm(t)};Gn.prototype.close=function(){n1(this.g)};Gn.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=qb(t),t=n);e.j.push(new WK(e.fb++,t)),e.H==3&&Dm(e)};Gn.prototype.N=function(){this.g.h=null,delete this.j,n1(this.g),delete this.g,Gn.$.N.call(this)};function xD(t){Xb.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}zt(xD,Xb);function RD(){Jb.call(this),this.status=1}zt(RD,Jb);function Ql(t){this.g=t}zt(Ql,ID);Ql.prototype.Ba=function(){Jt(this.g,"a")};Ql.prototype.Aa=function(t){Jt(this.g,new xD(t))};Ql.prototype.za=function(t){Jt(this.g,new RD)};Ql.prototype.ya=function(){Jt(this.g,"b")};function nG(){this.blockSize=-1}function Ir(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}zt(Ir,nG);Ir.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function l_(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var s=t.g[3],o=e+(s^n&(i^s))+r[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[1]+3905402710&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[2]+606105819&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[3]+3250441966&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[5]+1200080426&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[6]+2821735955&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[7]+4249261313&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[9]+2336552879&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[10]+4294925233&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[11]+2304563134&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[13]+4254626195&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[14]+2792965006&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[15]+1236535329&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(i^s&(n^i))+r[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[6]+3225465664&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[11]+643717713&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[0]+3921069994&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[10]+38016083&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[15]+3634488961&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[4]+3889429448&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[14]+3275163606&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[3]+4107603335&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[8]+1163531501&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[2]+4243563512&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[7]+1735328473&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[12]+2368359562&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(n^i^s)+r[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[8]+2272392833&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[11]+1839030562&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[14]+4259657740&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[4]+1272893353&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[7]+4139469664&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[10]+3200236656&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[0]+3936430074&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[3]+3572445317&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[6]+76029189&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[12]+3873151461&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[15]+530742520&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[2]+3299628645&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(i^(n|~s))+r[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[7]+1126891415&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[14]+2878612391&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[5]+4237533241&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[3]+2399980690&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[10]+4293915773&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[1]+2240044497&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[15]+4264355552&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[6]+2734768916&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[13]+1309151649&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[11]+3174756917&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[2]+718787259&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}Ir.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(i==0)for(;s<=n;)l_(this,t,s),s+=this.blockSize;if(typeof t=="string"){for(;s<e;)if(r[i++]=t.charCodeAt(s++),i==this.blockSize){l_(this,r),i=0;break}}else for(;s<e;)if(r[i++]=t[s++],i==this.blockSize){l_(this,r),i=0;break}}this.h=i,this.i+=e};Ir.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function Ve(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=t[i]|0;r&&s==e||(n[i]=s,r=!1)}this.g=n}var rG={};function s1(t){return-128<=t&&128>t?hK(t,function(e){return new Ve([e|0],0>e?-1:0)}):new Ve([t|0],0>t?-1:0)}function Br(t){if(isNaN(t)||!isFinite(t))return el;if(0>t)return Gt(Br(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=n0;return new Ve(e,0)}function AD(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return Gt(AD(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Br(Math.pow(e,8)),r=el,i=0;i<t.length;i+=8){var s=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+s),e);8>s?(s=Br(Math.pow(e,s)),r=r.R(s).add(Br(o))):(r=r.R(n),r=r.add(Br(o)))}return r}var n0=4294967296,el=s1(0),r0=s1(1),fI=s1(16777216);X=Ve.prototype;X.ea=function(){if(ir(this))return-Gt(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:n0+r)*e,e*=n0}return t};X.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(di(this))return"0";if(ir(this))return"-"+Gt(this).toString(t);for(var e=Br(Math.pow(t,6)),n=this,r="";;){var i=Zp(n,e).g;n=Jp(n,i.R(e));var s=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=i,di(n))return s+r;for(;6>s.length;)s="0"+s;r=s+r}};X.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function di(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function ir(t){return t.h==-1}X.X=function(t){return t=Jp(this,t),ir(t)?-1:di(t)?0:1};function Gt(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new Ve(n,~t.h).add(r0)}X.abs=function(){return ir(this)?Gt(this):this};X.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var s=r+(this.D(i)&65535)+(t.D(i)&65535),o=(s>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new Ve(n,n[n.length-1]&-2147483648?-1:0)};function Jp(t,e){return t.add(Gt(e))}X.R=function(t){if(di(this)||di(t))return el;if(ir(this))return ir(t)?Gt(this).R(Gt(t)):Gt(Gt(this).R(t));if(ir(t))return Gt(this.R(Gt(t)));if(0>this.X(fI)&&0>t.X(fI))return Br(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var s=this.D(r)>>>16,o=this.D(r)&65535,a=t.D(i)>>>16,l=t.D(i)&65535;n[2*r+2*i]+=o*l,of(n,2*r+2*i),n[2*r+2*i+1]+=s*l,of(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,of(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,of(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new Ve(n,0)};function of(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Tc(t,e){this.g=t,this.h=e}function Zp(t,e){if(di(e))throw Error("division by zero");if(di(t))return new Tc(el,el);if(ir(t))return e=Zp(Gt(t),e),new Tc(Gt(e.g),Gt(e.h));if(ir(e))return e=Zp(t,Gt(e)),new Tc(Gt(e.g),e.h);if(30<t.g.length){if(ir(t)||ir(e))throw Error("slowDivide_ only works with positive integers.");for(var n=r0,r=e;0>=r.X(t);)n=pI(n),r=pI(r);var i=ga(n,1),s=ga(r,1);for(r=ga(r,2),n=ga(n,2);!di(r);){var o=s.add(r);0>=o.X(t)&&(i=i.add(n),s=o),r=ga(r,1),n=ga(n,1)}return e=Jp(t,i.R(e)),new Tc(i,e)}for(i=el;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),s=Br(n),o=s.R(e);ir(o)||0<o.X(t);)n-=r,s=Br(n),o=s.R(e);di(s)&&(s=r0),i=i.add(s),t=Jp(t,o)}return new Tc(i,t)}X.gb=function(t){return Zp(this,t).h};X.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new Ve(n,this.h&t.h)};X.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new Ve(n,this.h|t.h)};X.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new Ve(n,this.h^t.h)};function pI(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new Ve(n,t.h)}function ga(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],s=0;s<r;s++)i[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new Ve(i,t.h)}Xp.prototype.createWebChannel=Xp.prototype.g;Gn.prototype.send=Gn.prototype.u;Gn.prototype.open=Gn.prototype.m;Gn.prototype.close=Gn.prototype.close;Im.NO_ERROR=0;Im.TIMEOUT=8;Im.HTTP_ERROR=6;H2.COMPLETE="complete";q2.EventType=ud;ud.OPEN="a";ud.CLOSE="b";ud.ERROR="c";ud.MESSAGE="d";jt.prototype.listen=jt.prototype.O;_t.prototype.listenOnce=_t.prototype.P;_t.prototype.getLastError=_t.prototype.Sa;_t.prototype.getLastErrorCode=_t.prototype.Ia;_t.prototype.getStatus=_t.prototype.da;_t.prototype.getResponseJson=_t.prototype.Wa;_t.prototype.getResponseText=_t.prototype.ja;_t.prototype.send=_t.prototype.ha;_t.prototype.setWithCredentials=_t.prototype.Oa;Ir.prototype.digest=Ir.prototype.l;Ir.prototype.reset=Ir.prototype.reset;Ir.prototype.update=Ir.prototype.j;Ve.prototype.add=Ve.prototype.add;Ve.prototype.multiply=Ve.prototype.R;Ve.prototype.modulo=Ve.prototype.gb;Ve.prototype.compare=Ve.prototype.X;Ve.prototype.toNumber=Ve.prototype.ea;Ve.prototype.toString=Ve.prototype.toString;Ve.prototype.getBits=Ve.prototype.D;Ve.fromNumber=Br;Ve.fromString=AD;var iG=function(){return new Xp},sG=function(){return Tm()},c_=Im,oG=H2,aG=na,gI={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},af=q2,lG=_t,cG=Ir,tl=Ve;const mI="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ft.UNAUTHENTICATED=new Ft(null),Ft.GOOGLE_CREDENTIALS=new Ft("google-credentials-uid"),Ft.FIRST_PARTY=new Ft("first-party-uid"),Ft.MOCK_USER=new Ft("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yl="10.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _s=new om("@firebase/firestore");function Sa(){return _s.logLevel}function uG(t){_s.setLogLevel(t)}function F(t,...e){if(_s.logLevel<=Ie.DEBUG){const n=e.map(o1);_s.debug(`Firestore (${Yl}): ${t}`,...n)}}function Et(t,...e){if(_s.logLevel<=Ie.ERROR){const n=e.map(o1);_s.error(`Firestore (${Yl}): ${t}`,...n)}}function xr(t,...e){if(_s.logLevel<=Ie.WARN){const n=e.map(o1);_s.warn(`Firestore (${Yl}): ${t}`,...n)}}function o1(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function te(t="Unexpected state"){const e=`FIRESTORE (${Yl}) INTERNAL ASSERTION FAILED: `+t;throw Et(e),new Error(e)}function oe(t,e){t||te()}function hG(t,e){t||te()}function Q(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class M extends yn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kD{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class dG{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ft.UNAUTHENTICATED))}shutdown(){}}class fG{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class pG{constructor(e){this.t=e,this.currentUser=Ft.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new Bt;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Bt,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{F("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(F("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Bt)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(F("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(oe(typeof r.accessToken=="string"),new kD(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return oe(e===null||typeof e=="string"),new Ft(e)}}class gG{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Ft.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class mG{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new gG(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Ft.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class yG{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class _G{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=s=>{s.error!=null&&F("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,F("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{F("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):F("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(oe(typeof n.token=="string"),this.R=n.token,new yG(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vG(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PD{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=vG(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function me(t,e){return t<e?-1:t>e?1:0}function wl(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function CD(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new M(C.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new M(C.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new M(C.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new M(C.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ot.fromMillis(Date.now())}static fromDate(e){return ot.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new ot(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?me(this.nanoseconds,e.nanoseconds):me(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ae(e)}static min(){return new ae(new ot(0,0))}static max(){return new ae(new ot(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh{constructor(e,n,r){n===void 0?n=0:n>e.length&&te(),r===void 0?r=e.length-n:r>e.length-n&&te(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return mh.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof mh?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class xe extends mh{construct(e,n,r){return new xe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new M(C.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new xe(n)}static emptyPath(){return new xe([])}}const wG=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class it extends mh{construct(e,n,r){return new it(e,n,r)}static isValidIdentifier(e){return wG.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),it.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new it(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new M(C.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new M(C.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new M(C.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new M(C.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new it(n)}static emptyPath(){return new it([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.path=e}static fromPath(e){return new K(xe.fromString(e))}static fromName(e){return new K(xe.fromString(e).popFirst(5))}static empty(){return new K(xe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&xe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return xe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new K(new xe(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eg{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function i0(t){return t.fields.find(e=>e.kind===2)}function Zs(t){return t.fields.filter(e=>e.kind!==2)}eg.UNKNOWN_ID=-1;class Hf{constructor(e,n){this.fieldPath=e,this.kind=n}}class yh{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new yh(0,Qn.min())}}function ND(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ae.fromTimestamp(r===1e9?new ot(n+1,0):new ot(n,r));return new Qn(i,K.empty(),e)}function DD(t){return new Qn(t.readTime,t.key,-1)}class Qn{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Qn(ae.min(),K.empty(),-1)}static max(){return new Qn(ae.max(),K.empty(),-1)}}function a1(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=K.comparator(t.documentKey,e.documentKey),n!==0?n:me(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class LD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $s(t){if(t.code!==C.FAILED_PRECONDITION||t.message!==OD)throw t;F("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&te(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new k((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof k?n:k.resolve(n)}catch(n){return k.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):k.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):k.reject(n)}static resolve(e){return new k((n,r)=>{n(e)})}static reject(e){return new k((n,r)=>{r(e)})}static waitFor(e){return new k((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=k.resolve(!1);for(const r of e)n=n.next(i=>i?k.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new k((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(u=>{o[c]=u,++a,a===s&&r(o)},u=>i(u))}})}static doWhile(e,n){return new k((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new Bt,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new bu(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=l1(r.target.error);this.V.reject(new bu(e,i))}}static open(e,n,r,i){try{return new Om(n,e.transaction(i,r))}catch(s){throw new bu(n,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(F("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new SG(n)}}class or{constructor(e,n,r){this.name=e,this.version=n,this.p=r,or.S(at())===12.2&&Et("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return F("SimpleDb","Removing database:",e),ro(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Ju())return!1;if(or.C())return!0;const e=at(),n=or.S(e),r=0<n&&n<10,i=or.v(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){const n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}async O(e){return this.db||(F("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const o=s.target.result;n(o)},i.onblocked=()=>{r(new bu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const o=s.target.error;o.name==="VersionError"?r(new M(C.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new M(C.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new bu(e,o))},i.onupgradeneeded=s=>{F("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.p.N(o,i.transaction,s.oldVersion,this.version).next(()=>{F("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.L&&(this.db.onversionchange=n=>this.L(n)),this.db}B(e){this.L=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const s=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.O(e);const a=Om.open(this.db,e,s?"readonly":"readwrite",r),l=i(a).next(c=>(a.g(),c)).catch(c=>(a.abort(c),k.reject(c))).toPromise();return l.catch(()=>{}),await a.m,l}catch(a){const l=a,c=l.name!=="FirebaseError"&&o<3;if(F("SimpleDb","Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}class bG{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return ro(this.k.delete())}}class bu extends M{constructor(e,n){super(C.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Us(t){return t.name==="IndexedDbTransactionError"}class SG{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(F("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(F("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ro(r)}add(e){return F("SimpleDb","ADD",this.store.name,e,e),ro(this.store.add(e))}get(e){return ro(this.store.get(e)).next(n=>(n===void 0&&(n=null),F("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return F("SimpleDb","DELETE",this.store.name,e),ro(this.store.delete(e))}count(){return F("SimpleDb","COUNT",this.store.name),ro(this.store.count())}W(e,n){const r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new k((o,a)=>{s.onerror=l=>{a(l.target.error)},s.onsuccess=l=>{o(l.target.result)}})}{const s=this.cursor(r),o=[];return this.G(s,(a,l)=>{o.push(l)}).next(()=>o)}}j(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new k((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}H(e,n){F("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.J=!1;const i=this.cursor(r);return this.G(i,(s,o,a)=>a.delete())}Y(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.G(i,n)}Z(e){const n=this.cursor({});return new k((r,i)=>{n.onerror=s=>{const o=l1(s.target.error);i(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}G(e,n){const r=[];return new k((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const l=new bG(a),c=n(a.primaryKey,a.value,l);if(c instanceof k){const u=c.catch(h=>(l.done(),k.reject(h)));r.push(u)}l.isDone?i():l.$===null?a.continue():a.continue(l.$)}}).next(()=>k.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function ro(t){return new k((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=l1(r.target.error);n(i)}})}let yI=!1;function l1(t){const e=or.S(at());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new M("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return yI||(yI=!0,setTimeout(()=>{throw r},0)),r}}return t}class EG{constructor(e,n){this.asyncQueue=e,this.X=n,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}ee(e){F("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{F("IndexBackfiller",`Documents written: ${await this.X.te()}`)}catch(n){Us(n)?F("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):await $s(n)}await this.ee(6e4)})}}class TG{constructor(e,n){this.localStore=e,this.persistence=n}async te(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.ne(n,e))}ne(e,n){const r=new Set;let i=n,s=!0;return k.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return F("IndexBackfiller",`Processing collection: ${o}`),this.re(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>n-i)}re(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.ie(i,s)).next(a=>(F("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}ie(e,n){let r=e;return n.changes.forEach((i,s)=>{const o=DD(s);a1(o,r)>0&&(r=o)}),new Qn(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.se(r),this.oe=r=>n.writeSequenceNumber(r))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.oe&&this.oe(e),e}}Pn._e=-1;function gd(t){return t==null}function _h(t){return t===0&&1/t==-1/0}function MD(t){return typeof t=="number"&&Number.isInteger(t)&&!_h(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _n(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=_I(e)),e=IG(t.get(n),e);return _I(e)}function IG(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function _I(t){return t+""}function jr(t){const e=t.length;if(oe(e>=2),e===2)return oe(t.charAt(0)===""&&t.charAt(1)===""),xe.emptyPath();const n=e-2,r=[];let i="";for(let s=0;s<e;){const o=t.indexOf("",s);switch((o<0||o>n)&&te(),t.charAt(o+1)){case"":const a=t.substring(s,o);let l;i.length===0?l=a:(i+=a,l=i,i=""),r.push(l);break;case"":i+=t.substring(s,o),i+="\0";break;case"":i+=t.substring(s,o+1);break;default:te()}s=o+2}return new xe(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vI=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qf(t,e){return[t,_n(e)]}function VD(t,e,n){return[t,_n(e),n]}const xG={},RG=["prefixPath","collectionGroup","readTime","documentId"],AG=["prefixPath","collectionGroup","documentId"],kG=["collectionGroup","readTime","prefixPath","documentId"],PG=["canonicalId","targetId"],CG=["targetId","path"],NG=["path","targetId"],DG=["collectionId","parent"],OG=["indexId","uid"],LG=["uid","sequenceNumber"],MG=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],VG=["indexId","uid","orderedDocumentKey"],FG=["userId","collectionPath","documentId"],$G=["userId","collectionPath","largestBatchId"],UG=["userId","collectionGroup","largestBatchId"],FD=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],BG=[...FD,"documentOverlays"],$D=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],UD=$D,jG=[...UD,"indexConfiguration","indexState","indexEntries"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s0 extends LD{constructor(e,n){super(),this.ae=e,this.currentSequenceNumber=n}}function Wt(t,e){const n=Q(t);return or.M(n.ae,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wI(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ra(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function BD(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class He{constructor(e,n){this.comparator=e,this.root=n||Kt.EMPTY}insert(e,n){return new He(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Kt.BLACK,null,null))}remove(e){return new He(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Kt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new lf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new lf(this.root,e,this.comparator,!1)}getReverseIterator(){return new lf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new lf(this.root,e,this.comparator,!0)}}class lf{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Kt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Kt.RED,this.left=i??Kt.EMPTY,this.right=s??Kt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Kt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Kt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Kt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Kt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Kt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw te();const e=this.left.check();if(e!==this.right.check())throw te();return e+(this.isRed()?0:1)}}Kt.EMPTY=null,Kt.RED=!0,Kt.BLACK=!1;Kt.EMPTY=new class{constructor(){this.size=0}get key(){throw te()}get value(){throw te()}get color(){throw te()}get left(){throw te()}get right(){throw te()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Kt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{constructor(e){this.comparator=e,this.data=new He(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new bI(this.data.getIterator())}getIteratorFrom(e){return new bI(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ue)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ue(this.comparator);return n.data=e,n}}class bI{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ma(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e){this.fields=e,e.sort(it.comparator)}static empty(){return new Cn([])}unionWith(e){let n=new Ue(it.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Cn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return wl(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jD extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zG(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new jD("Invalid base64 string: "+s):s}}(e);return new Ot(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Ot(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return me(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ot.EMPTY_BYTE_STRING=new Ot("");const WG=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function vs(t){if(oe(!!t),typeof t=="string"){let e=0;const n=WG.exec(t);if(oe(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:pt(t.seconds),nanos:pt(t.nanos)}}function pt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ws(t){return typeof t=="string"?Ot.fromBase64String(t):Ot.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lm(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function c1(t){const e=t.mapValue.fields.__previous_value__;return Lm(e)?c1(e):e}function vh(t){const e=vs(t.mapValue.fields.__local_write_time__.timestampValue);return new ot(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HG{constructor(e,n,r,i,s,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class bs{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new bs("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof bs&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xi={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Kf={nullValue:"NULL_VALUE"};function Fo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Lm(t)?4:zD(t)?9007199254740991:10:te()}function Xr(t,e){if(t===e)return!0;const n=Fo(t);if(n!==Fo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return vh(t).isEqual(vh(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=vs(i.timestampValue),a=vs(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return ws(i.bytesValue).isEqual(ws(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return pt(i.geoPointValue.latitude)===pt(s.geoPointValue.latitude)&&pt(i.geoPointValue.longitude)===pt(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return pt(i.integerValue)===pt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=pt(i.doubleValue),a=pt(s.doubleValue);return o===a?_h(o)===_h(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return wl(t.arrayValue.values||[],e.arrayValue.values||[],Xr);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(wI(o)!==wI(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Xr(o[l],a[l])))return!1;return!0}(t,e);default:return te()}}function wh(t,e){return(t.values||[]).find(n=>Xr(n,e))!==void 0}function Ss(t,e){if(t===e)return 0;const n=Fo(t),r=Fo(e);if(n!==r)return me(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return me(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=pt(s.integerValue||s.doubleValue),l=pt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return SI(t.timestampValue,e.timestampValue);case 4:return SI(vh(t),vh(e));case 5:return me(t.stringValue,e.stringValue);case 6:return function(s,o){const a=ws(s),l=ws(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=me(a[c],l[c]);if(u!==0)return u}return me(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=me(pt(s.latitude),pt(o.latitude));return a!==0?a:me(pt(s.longitude),pt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){const a=s.values||[],l=o.values||[];for(let c=0;c<a.length&&c<l.length;++c){const u=Ss(a[c],l[c]);if(u)return u}return me(a.length,l.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===Xi.mapValue&&o===Xi.mapValue)return 0;if(s===Xi.mapValue)return 1;if(o===Xi.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let h=0;h<l.length&&h<u.length;++h){const d=me(l[h],u[h]);if(d!==0)return d;const f=Ss(a[l[h]],c[u[h]]);if(f!==0)return f}return me(l.length,u.length)}(t.mapValue,e.mapValue);default:throw te()}}function SI(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return me(t,e);const n=vs(t),r=vs(e),i=me(n.seconds,r.seconds);return i!==0?i:me(n.nanos,r.nanos)}function bl(t){return o0(t)}function o0(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=vs(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ws(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return K.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=o0(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${o0(n.fields[o])}`;return i+"}"}(t.mapValue):te()}function $o(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function a0(t){return!!t&&"integerValue"in t}function bh(t){return!!t&&"arrayValue"in t}function EI(t){return!!t&&"nullValue"in t}function TI(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Gf(t){return!!t&&"mapValue"in t}function Su(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ra(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Su(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Su(t.arrayValue.values[n]);return e}return Object.assign({},t)}function zD(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function qG(t){return"nullValue"in t?Kf:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?$o(bs.empty(),K.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:te()}function KG(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?$o(bs.empty(),K.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?Xi:te()}function II(t,e){const n=Ss(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function xI(t,e){const n=Ss(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this.value=e}static empty(){return new Qt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Gf(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Su(n)}setAll(e){let n=it.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Su(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Gf(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Xr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Gf(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){ra(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Qt(Su(this.value))}}function WD(t){const e=[];return ra(t.fields,(n,r)=>{const i=new it([n]);if(Gf(r)){const s=WD(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Cn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Ge(e,0,ae.min(),ae.min(),ae.min(),Qt.empty(),0)}static newFoundDocument(e,n,r,i){return new Ge(e,1,n,ae.min(),r,i,0)}static newNoDocument(e,n){return new Ge(e,2,n,ae.min(),ae.min(),Qt.empty(),0)}static newUnknownDocument(e,n){return new Ge(e,3,n,ae.min(),ae.min(),Qt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Qt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Qt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ge&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ge(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{constructor(e,n){this.position=e,this.inclusive=n}}function RI(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=K.comparator(K.fromName(o.referenceValue),n.key):r=Ss(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function AI(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Xr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh{constructor(e,n="asc"){this.field=e,this.dir=n}}function GG(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HD{}class Re extends HD{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new QG(e,n,r):n==="array-contains"?new JG(e,r):n==="in"?new XD(e,r):n==="not-in"?new ZG(e,r):n==="array-contains-any"?new eQ(e,r):new Re(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new YG(e,r):new XG(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ss(n,this.value)):n!==null&&Fo(this.value)===Fo(n)&&this.matchesComparison(Ss(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return te()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Le extends HD{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new Le(e,n)}matches(e){return Sl(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function Sl(t){return t.op==="and"}function l0(t){return t.op==="or"}function u1(t){return qD(t)&&Sl(t)}function qD(t){for(const e of t.filters)if(e instanceof Le)return!1;return!0}function c0(t){if(t instanceof Re)return t.field.canonicalString()+t.op.toString()+bl(t.value);if(u1(t))return t.filters.map(e=>c0(e)).join(",");{const e=t.filters.map(n=>c0(n)).join(",");return`${t.op}(${e})`}}function KD(t,e){return t instanceof Re?function(r,i){return i instanceof Re&&r.op===i.op&&r.field.isEqual(i.field)&&Xr(r.value,i.value)}(t,e):t instanceof Le?function(r,i){return i instanceof Le&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&KD(o,i.filters[a]),!0):!1}(t,e):void te()}function GD(t,e){const n=t.filters.concat(e);return Le.create(n,t.op)}function QD(t){return t instanceof Re?function(n){return`${n.field.canonicalString()} ${n.op} ${bl(n.value)}`}(t):t instanceof Le?function(n){return n.op.toString()+" {"+n.getFilters().map(QD).join(" ,")+"}"}(t):"Filter"}class QG extends Re{constructor(e,n,r){super(e,n,r),this.key=K.fromName(r.referenceValue)}matches(e){const n=K.comparator(e.key,this.key);return this.matchesComparison(n)}}class YG extends Re{constructor(e,n){super(e,"in",n),this.keys=YD("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class XG extends Re{constructor(e,n){super(e,"not-in",n),this.keys=YD("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function YD(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>K.fromName(r.referenceValue))}class JG extends Re{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return bh(n)&&wh(n.arrayValue,this.value)}}class XD extends Re{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&wh(this.value.arrayValue,n)}}class ZG extends Re{constructor(e,n){super(e,"not-in",n)}matches(e){if(wh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!wh(this.value.arrayValue,n)}}class eQ extends Re{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!bh(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>wh(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tQ{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ce=null}}function u0(t,e=null,n=[],r=[],i=null,s=null,o=null){return new tQ(t,e,n,r,i,s,o)}function Uo(t){const e=Q(t);if(e.ce===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>c0(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),gd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>bl(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>bl(r)).join(",")),e.ce=n}return e.ce}function md(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!GG(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!KD(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!AI(t.startAt,e.startAt)&&AI(t.endAt,e.endAt)}function tg(t){return K.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function ng(t,e){return t.filters.filter(n=>n instanceof Re&&n.field.isEqual(e))}function kI(t,e,n){let r=Kf,i=!0;for(const s of ng(t,e)){let o=Kf,a=!0;switch(s.op){case"<":case"<=":o=qG(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=Kf}II({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];II({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}function PI(t,e,n){let r=Xi,i=!0;for(const s of ng(t,e)){let o=Xi,a=!0;switch(s.op){case">=":case">":o=KG(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=Xi}xI({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];xI({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function JD(t,e,n,r,i,s,o,a){return new Ni(t,e,n,r,i,s,o,a)}function Xl(t){return new Ni(t)}function CI(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function h1(t){return t.collectionGroup!==null}function nl(t){const e=Q(t);if(e.le===null){e.le=[];const n=new Set;for(const s of e.explicitOrderBy)e.le.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ue(it.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.le.push(new Sh(s,r))}),n.has(it.keyField().canonicalString())||e.le.push(new Sh(it.keyField(),r))}return e.le}function vn(t){const e=Q(t);return e.he||(e.he=nQ(e,nl(t))),e.he}function nQ(t,e){if(t.limitType==="F")return u0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Sh(i.field,s)});const n=t.endAt?new Es(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Es(t.startAt.position,t.startAt.inclusive):null;return u0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function h0(t,e){const n=t.filters.concat([e]);return new Ni(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function rg(t,e,n){return new Ni(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function yd(t,e){return md(vn(t),vn(e))&&t.limitType===e.limitType}function ZD(t){return`${Uo(vn(t))}|lt:${t.limitType}`}function Ea(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>QD(i)).join(", ")}]`),gd(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>bl(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>bl(i)).join(",")),`Target(${r})`}(vn(t))}; limitType=${t.limitType})`}function _d(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):K.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of nl(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const c=RI(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,nl(r),i)||r.endAt&&!function(o,a,l){const c=RI(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,nl(r),i))}(t,e)}function eO(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function tO(t){return(e,n)=>{let r=!1;for(const i of nl(t)){const s=rQ(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function rQ(t,e,n){const r=t.field.isKeyField()?K.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?Ss(l,c):te()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return te()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ra(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return BD(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iQ=new He(K.comparator);function Nn(){return iQ}const nO=new He(K.comparator);function Kc(...t){let e=nO;for(const n of t)e=e.insert(n.key,n);return e}function rO(t){let e=nO;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function zr(){return Eu()}function iO(){return Eu()}function Eu(){return new Bs(t=>t.toString(),(t,e)=>t.isEqual(e))}const sQ=new He(K.comparator),oQ=new Ue(K.comparator);function ve(...t){let e=oQ;for(const n of t)e=e.add(n);return e}const aQ=new Ue(me);function d1(){return aQ}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sO(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:_h(e)?"-0":e}}function oO(t){return{integerValue:""+t}}function aO(t,e){return MD(e)?oO(e):sO(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm{constructor(){this._=void 0}}function lQ(t,e,n){return t instanceof El?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Lm(s)&&(s=c1(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Bo?cO(t,e):t instanceof jo?uO(t,e):function(i,s){const o=lO(i,s),a=NI(o)+NI(i.Ie);return a0(o)&&a0(i.Ie)?oO(a):sO(i.serializer,a)}(t,e)}function cQ(t,e,n){return t instanceof Bo?cO(t,e):t instanceof jo?uO(t,e):n}function lO(t,e){return t instanceof Tl?function(r){return a0(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class El extends Mm{}class Bo extends Mm{constructor(e){super(),this.elements=e}}function cO(t,e){const n=hO(e);for(const r of t.elements)n.some(i=>Xr(i,r))||n.push(r);return{arrayValue:{values:n}}}class jo extends Mm{constructor(e){super(),this.elements=e}}function uO(t,e){let n=hO(e);for(const r of t.elements)n=n.filter(i=>!Xr(i,r));return{arrayValue:{values:n}}}class Tl extends Mm{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function NI(t){return pt(t.integerValue||t.doubleValue)}function hO(t){return bh(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{constructor(e,n){this.field=e,this.transform=n}}function uQ(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Bo&&i instanceof Bo||r instanceof jo&&i instanceof jo?wl(r.elements,i.elements,Xr):r instanceof Tl&&i instanceof Tl?Xr(r.Ie,i.Ie):r instanceof El&&i instanceof El}(t.transform,e.transform)}class hQ{constructor(e,n){this.version=e,this.transformResults=n}}class st{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new st}static exists(e){return new st(void 0,e)}static updateTime(e){return new st(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Qf(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Vm{}function dO(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Zl(t.key,st.none()):new Jl(t.key,t.data,st.none());{const n=t.data,r=Qt.empty();let i=new Ue(it.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Di(t.key,r,new Cn(i.toArray()),st.none())}}function dQ(t,e,n){t instanceof Jl?function(i,s,o){const a=i.value.clone(),l=OI(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Di?function(i,s,o){if(!Qf(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=OI(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(fO(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Tu(t,e,n,r){return t instanceof Jl?function(s,o,a,l){if(!Qf(s.precondition,o))return a;const c=s.value.clone(),u=LI(s.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Di?function(s,o,a,l){if(!Qf(s.precondition,o))return a;const c=LI(s.fieldTransforms,l,o),u=o.data;return u.setAll(fO(s)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(s,o,a){return Qf(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function fQ(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=lO(r.transform,i||null);s!=null&&(n===null&&(n=Qt.empty()),n.set(r.field,s))}return n||null}function DI(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&wl(r,i,(s,o)=>uQ(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Jl extends Vm{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Di extends Vm{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function fO(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function OI(t,e,n){const r=new Map;oe(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,cQ(o,a,n[i]))}return r}function LI(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,lQ(s,o,e))}return r}class Zl extends Vm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class f1 extends Vm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p1{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&dQ(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Tu(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Tu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=iO();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=dO(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(ae.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ve())}isEqual(e){return this.batchId===e.batchId&&wl(this.mutations,e.mutations,(n,r)=>DI(n,r))&&wl(this.baseMutations,e.baseMutations,(n,r)=>DI(n,r))}}class g1{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){oe(e.mutations.length===r.length);let i=function(){return sQ}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new g1(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m1{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pQ{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xt,Pe;function pO(t){switch(t){default:return te();case C.CANCELLED:case C.UNKNOWN:case C.DEADLINE_EXCEEDED:case C.RESOURCE_EXHAUSTED:case C.INTERNAL:case C.UNAVAILABLE:case C.UNAUTHENTICATED:return!1;case C.INVALID_ARGUMENT:case C.NOT_FOUND:case C.ALREADY_EXISTS:case C.PERMISSION_DENIED:case C.FAILED_PRECONDITION:case C.ABORTED:case C.OUT_OF_RANGE:case C.UNIMPLEMENTED:case C.DATA_LOSS:return!0}}function gO(t){if(t===void 0)return Et("GRPC error has no .code"),C.UNKNOWN;switch(t){case xt.OK:return C.OK;case xt.CANCELLED:return C.CANCELLED;case xt.UNKNOWN:return C.UNKNOWN;case xt.DEADLINE_EXCEEDED:return C.DEADLINE_EXCEEDED;case xt.RESOURCE_EXHAUSTED:return C.RESOURCE_EXHAUSTED;case xt.INTERNAL:return C.INTERNAL;case xt.UNAVAILABLE:return C.UNAVAILABLE;case xt.UNAUTHENTICATED:return C.UNAUTHENTICATED;case xt.INVALID_ARGUMENT:return C.INVALID_ARGUMENT;case xt.NOT_FOUND:return C.NOT_FOUND;case xt.ALREADY_EXISTS:return C.ALREADY_EXISTS;case xt.PERMISSION_DENIED:return C.PERMISSION_DENIED;case xt.FAILED_PRECONDITION:return C.FAILED_PRECONDITION;case xt.ABORTED:return C.ABORTED;case xt.OUT_OF_RANGE:return C.OUT_OF_RANGE;case xt.UNIMPLEMENTED:return C.UNIMPLEMENTED;case xt.DATA_LOSS:return C.DATA_LOSS;default:return te()}}(Pe=xt||(xt={}))[Pe.OK=0]="OK",Pe[Pe.CANCELLED=1]="CANCELLED",Pe[Pe.UNKNOWN=2]="UNKNOWN",Pe[Pe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Pe[Pe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Pe[Pe.NOT_FOUND=5]="NOT_FOUND",Pe[Pe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Pe[Pe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Pe[Pe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Pe[Pe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Pe[Pe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Pe[Pe.ABORTED=10]="ABORTED",Pe[Pe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Pe[Pe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Pe[Pe.INTERNAL=13]="INTERNAL",Pe[Pe.UNAVAILABLE=14]="UNAVAILABLE",Pe[Pe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mO(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gQ=new tl([4294967295,4294967295],0);function MI(t){const e=mO().encode(t),n=new cG;return n.update(e),new Uint8Array(n.digest())}function VI(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new tl([n,r],0),new tl([i,s],0)]}class y1{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Gc(`Invalid padding: ${n}`);if(r<0)throw new Gc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Gc(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Gc(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=tl.fromNumber(this.Te)}de(e,n,r){let i=e.add(n.multiply(tl.fromNumber(r)));return i.compare(gQ)===1&&(i=new tl([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const n=MI(e),[r,i]=VI(n);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);if(!this.Ae(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new y1(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Te===0)return;const n=MI(e),[r,i]=VI(n);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);this.Re(o)}}Re(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Gc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,bd.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new wd(ae.min(),i,new He(me),Nn(),ve())}}class bd{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new bd(r,n,ve(),ve(),ve())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf{constructor(e,n,r,i){this.Ve=e,this.removedTargetIds=n,this.key=r,this.me=i}}class yO{constructor(e,n){this.targetId=e,this.fe=n}}class _O{constructor(e,n,r=Ot.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class FI{constructor(){this.ge=0,this.pe=UI(),this.ye=Ot.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=ve(),n=ve(),r=ve();return this.pe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:te()}}),new bd(this.ye,this.we,e,n,r)}Fe(){this.Se=!1,this.pe=UI()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,oe(this.ge>=0)}Le(){this.Se=!0,this.we=!0}}class mQ{constructor(e){this.Be=e,this.ke=new Map,this.qe=Nn(),this.Qe=$I(),this.Ke=new He(me)}$e(e){for(const n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(const n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{const r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(e.resumeToken));break;default:te()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((r,i)=>{this.je(i)&&n(i)})}Je(e){const n=e.targetId,r=e.fe.count,i=this.Ye(n);if(i){const s=i.target;if(tg(s))if(r===0){const o=new K(s.path);this.We(n,o,Ge.newNoDocument(o,ae.min()))}else oe(r===1);else{const o=this.Ze(n);if(o!==r){const a=this.Xe(e),l=a?this.et(a,e,o):1;if(l!==0){this.He(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,c)}}}}}Xe(e){const n=e.fe.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=ws(r).toUint8Array()}catch(l){if(l instanceof jD)return xr("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new y1(o,i,s)}catch(l){return xr(l instanceof Gc?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Te===0?null:a}et(e,n,r){return n.fe.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){const r=this.Be.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Be.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.We(n,s,null),i++)}),i}it(e){const n=new Map;this.ke.forEach((s,o)=>{const a=this.Ye(o);if(a){if(s.current&&tg(a.target)){const l=new K(a.target.path);this.qe.get(l)!==null||this.st(o,l)||this.We(o,l,Ge.newNoDocument(l,e))}s.De&&(n.set(o,s.ve()),s.Fe())}});let r=ve();this.Qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Ye(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.qe.forEach((s,o)=>o.setReadTime(e));const i=new wd(e,n,this.Ke,this.qe,r);return this.qe=Nn(),this.Qe=$I(),this.Ke=new He(me),i}Ue(e,n){if(!this.je(e))return;const r=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,r){if(!this.je(e))return;const i=this.ze(e);this.st(e,n)?i.Me(n,1):i.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(e){this.ke.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Be.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new FI,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new Ue(me),this.Qe=this.Qe.insert(e,n)),n}je(e){const n=this.Ye(e)!==null;return n||F("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.ke.get(e);return n&&n.be?null:this.Be._t(e)}He(e){this.ke.set(e,new FI),this.Be.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Be.getRemoteKeysForTarget(e).has(n)}}function $I(){return new He(K.comparator)}function UI(){return new He(K.comparator)}const yQ={asc:"ASCENDING",desc:"DESCENDING"},_Q={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},vQ={and:"AND",or:"OR"};class wQ{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function d0(t,e){return t.useProto3Json||gd(e)?e:{value:e}}function Il(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function vO(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function bQ(t,e){return Il(t,e.toTimestamp())}function It(t){return oe(!!t),ae.fromTimestamp(function(n){const r=vs(n);return new ot(r.seconds,r.nanos)}(t))}function _1(t,e){return f0(t,e).canonicalString()}function f0(t,e){const n=function(i){return new xe(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function wO(t){const e=xe.fromString(t);return oe(PO(e)),e}function Eh(t,e){return _1(t.databaseId,e.path)}function Kr(t,e){const n=wO(e);if(n.get(1)!==t.databaseId.projectId)throw new M(C.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new M(C.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new K(EO(n))}function bO(t,e){return _1(t.databaseId,e)}function SO(t){const e=wO(t);return e.length===4?xe.emptyPath():EO(e)}function p0(t){return new xe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function EO(t){return oe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function BI(t,e,n){return{name:Eh(t,e),fields:n.value.mapValue.fields}}function TO(t,e,n){const r=Kr(t,e.name),i=It(e.updateTime),s=e.createTime?It(e.createTime):ae.min(),o=new Qt({mapValue:{fields:e.fields}}),a=Ge.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function SQ(t,e){return"found"in e?function(r,i){oe(!!i.found),i.found.name,i.found.updateTime;const s=Kr(r,i.found.name),o=It(i.found.updateTime),a=i.found.createTime?It(i.found.createTime):ae.min(),l=new Qt({mapValue:{fields:i.found.fields}});return Ge.newFoundDocument(s,o,a,l)}(t,e):"missing"in e?function(r,i){oe(!!i.missing),oe(!!i.readTime);const s=Kr(r,i.missing),o=It(i.readTime);return Ge.newNoDocument(s,o)}(t,e):te()}function EQ(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:te()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,u){return c.useProto3Json?(oe(u===void 0||typeof u=="string"),Ot.fromBase64String(u||"")):(oe(u===void 0||u instanceof Uint8Array),Ot.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const u=c.code===void 0?C.UNKNOWN:gO(c.code);return new M(u,c.message||"")}(o);n=new _O(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Kr(t,r.document.name),s=It(r.document.updateTime),o=r.document.createTime?It(r.document.createTime):ae.min(),a=new Qt({mapValue:{fields:r.document.fields}}),l=Ge.newFoundDocument(i,s,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new Yf(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Kr(t,r.document),s=r.readTime?It(r.readTime):ae.min(),o=Ge.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Yf([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Kr(t,r.document),s=r.removedTargetIds||[];n=new Yf([],s,i,null)}else{if(!("filter"in e))return te();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new pQ(i,s),a=r.targetId;n=new yO(a,o)}}return n}function Th(t,e){let n;if(e instanceof Jl)n={update:BI(t,e.key,e.value)};else if(e instanceof Zl)n={delete:Eh(t,e.key)};else if(e instanceof Di)n={update:BI(t,e.key,e.data),updateMask:kQ(e.fieldMask)};else{if(!(e instanceof f1))return te();n={verify:Eh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof El)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Bo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof jo)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Tl)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw te()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:bQ(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:te()}(t,e.precondition)),n}function g0(t,e){const n=e.currentDocument?function(s){return s.updateTime!==void 0?st.updateTime(It(s.updateTime)):s.exists!==void 0?st.exists(s.exists):st.none()}(e.currentDocument):st.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let l=null;if("setToServerValue"in a)oe(a.setToServerValue==="REQUEST_TIME"),l=new El;else if("appendMissingElements"in a){const u=a.appendMissingElements.values||[];l=new Bo(u)}else if("removeAllFromArray"in a){const u=a.removeAllFromArray.values||[];l=new jo(u)}else"increment"in a?l=new Tl(o,a.increment):te();const c=it.fromServerFormat(a.fieldPath);return new vd(c,l)}(t,i)):[];if(e.update){e.update.name;const i=Kr(t,e.update.name),s=new Qt({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(l){const c=l.fieldPaths||[];return new Cn(c.map(u=>it.fromServerFormat(u)))}(e.updateMask);return new Di(i,s,o,n,r)}return new Jl(i,s,n,r)}if(e.delete){const i=Kr(t,e.delete);return new Zl(i,n)}if(e.verify){const i=Kr(t,e.verify);return new f1(i,n)}return te()}function TQ(t,e){return t&&t.length>0?(oe(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?It(i.updateTime):It(s);return o.isEqual(ae.min())&&(o=It(s)),new hQ(o,i.transformResults||[])}(n,e))):[]}function IO(t,e){return{documents:[bO(t,e.path)]}}function xO(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=bO(t,i);const s=function(c){if(c.length!==0)return kO(Le.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(u=>function(d){return{field:Ta(d.field),direction:xQ(d.dir)}}(u))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=d0(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ut:n,parent:i}}function RO(t){let e=SO(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){oe(r===1);const u=n.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let s=[];n.where&&(s=function(h){const d=AO(h);return d instanceof Le&&u1(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(d=>function(p){return new Sh(Ia(p.field),function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(d))}(n.orderBy));let a=null;n.limit&&(a=function(h){let d;return d=typeof h=="object"?h.value:h,gd(d)?null:d}(n.limit));let l=null;n.startAt&&(l=function(h){const d=!!h.before,f=h.values||[];return new Es(f,d)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const d=!h.before,f=h.values||[];return new Es(f,d)}(n.endAt)),JD(e,i,o,s,a,"F",l,c)}function IQ(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return te()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function AO(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ia(n.unaryFilter.field);return Re.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Ia(n.unaryFilter.field);return Re.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Ia(n.unaryFilter.field);return Re.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ia(n.unaryFilter.field);return Re.create(o,"!=",{nullValue:"NULL_VALUE"});default:return te()}}(t):t.fieldFilter!==void 0?function(n){return Re.create(Ia(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return te()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Le.create(n.compositeFilter.filters.map(r=>AO(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return te()}}(n.compositeFilter.op))}(t):te()}function xQ(t){return yQ[t]}function RQ(t){return _Q[t]}function AQ(t){return vQ[t]}function Ta(t){return{fieldPath:t.canonicalString()}}function Ia(t){return it.fromServerFormat(t.fieldPath)}function kO(t){return t instanceof Re?function(n){if(n.op==="=="){if(TI(n.value))return{unaryFilter:{field:Ta(n.field),op:"IS_NAN"}};if(EI(n.value))return{unaryFilter:{field:Ta(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(TI(n.value))return{unaryFilter:{field:Ta(n.field),op:"IS_NOT_NAN"}};if(EI(n.value))return{unaryFilter:{field:Ta(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ta(n.field),op:RQ(n.op),value:n.value}}}(t):t instanceof Le?function(n){const r=n.getFilters().map(i=>kO(i));return r.length===1?r[0]:{compositeFilter:{op:AQ(n.op),filters:r}}}(t):te()}function kQ(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function PO(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(e,n,r,i,s=ae.min(),o=ae.min(),a=Ot.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new fi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new fi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new fi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new fi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CO{constructor(e){this.ct=e}}function PQ(t,e){let n;if(e.document)n=TO(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=K.fromSegments(e.noDocument.path),i=Wo(e.noDocument.readTime);n=Ge.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return te();{const r=K.fromSegments(e.unknownDocument.path),i=Wo(e.unknownDocument.version);n=Ge.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){const s=new ot(i[0],i[1]);return ae.fromTimestamp(s)}(e.readTime)),n}function jI(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:ig(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,o){return{name:Eh(s,o.key),fields:o.data.value.mapValue.fields,updateTime:Il(s,o.version.toTimestamp()),createTime:Il(s,o.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:zo(e.version)};else{if(!e.isUnknownDocument())return te();r.unknownDocument={path:n.path.toArray(),version:zo(e.version)}}return r}function ig(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function zo(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Wo(t){const e=new ot(t.seconds,t.nanoseconds);return ae.fromTimestamp(e)}function io(t,e){const n=(e.baseMutations||[]).map(s=>g0(t.ct,s));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map(s=>g0(t.ct,s)),i=ot.fromMillis(e.localWriteTimeMs);return new p1(e.batchId,i,n,r)}function Qc(t){const e=Wo(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Wo(t.lastLimboFreeSnapshotVersion):ae.min();let r;return r=function(s){return s.documents!==void 0}(t.query)?function(s){return oe(s.documents.length===1),vn(Xl(SO(s.documents[0])))}(t.query):function(s){return vn(RO(s))}(t.query),new fi(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,Ot.fromBase64String(t.resumeToken))}function NO(t,e){const n=zo(e.snapshotVersion),r=zo(e.lastLimboFreeSnapshotVersion);let i;i=tg(e.target)?IO(t.ct,e.target):xO(t.ct,e.target).ut;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Uo(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function v1(t){const e=RO({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?rg(e,e.limit,"L"):e}function u_(t,e){return new m1(e.largestBatchId,g0(t.ct,e.overlayMutation))}function zI(t,e){const n=e.path.lastSegment();return[t,_n(e.path.popLast()),n]}function WI(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:zo(r.readTime),documentKey:_n(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CQ{getBundleMetadata(e,n){return HI(e).get(n).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:Wo(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,n){return HI(e).put(function(i){return{bundleId:i.id,createTime:zo(It(i.createTime)),version:i.version}}(n))}getNamedQuery(e,n){return qI(e).get(n).next(r=>{if(r)return function(s){return{name:s.name,query:v1(s.bundledQuery),readTime:Wo(s.readTime)}}(r)})}saveNamedQuery(e,n){return qI(e).put(function(i){return{name:i.name,readTime:zo(It(i.readTime)),bundledQuery:i.bundledQuery}}(n))}}function HI(t){return Wt(t,"bundles")}function qI(t){return Wt(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fm{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){const r=n.uid||"";return new Fm(e,r)}getOverlay(e,n){return Ic(e).get(zI(this.userId,n)).next(r=>r?u_(this.serializer,r):null)}getOverlays(e,n){const r=zr();return k.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((s,o)=>{const a=new m1(n,o);i.push(this.ht(e,a))}),k.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(o=>i.add(_n(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(Ic(e).H("collectionPathOverlayIndex",a))}),k.waitFor(s)}getOverlaysForCollection(e,n,r){const i=zr(),s=_n(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Ic(e).W("collectionPathOverlayIndex",o).next(a=>{for(const l of a){const c=u_(this.serializer,l);i.set(c.getKey(),c)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const s=zr();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Ic(e).Y({index:"collectionGroupOverlayIndex",range:a},(l,c,u)=>{const h=u_(this.serializer,c);s.size()<i||h.largestBatchId===o?(s.set(h.getKey(),h),o=h.largestBatchId):u.done()}).next(()=>s)}ht(e,n){return Ic(e).put(function(i,s,o){const[a,l,c]=zI(s,o.mutation.key);return{userId:s,collectionPath:l,documentId:c,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Th(i.ct,o.mutation)}}(this.serializer,this.userId,n))}}function Ic(t){return Wt(t,"documentOverlays")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{constructor(){}Pt(e,n){this.It(e,n),n.Tt()}It(e,n){if("nullValue"in e)this.Et(n,5);else if("booleanValue"in e)this.Et(n,10),n.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(n,15),n.dt(pt(e.integerValue));else if("doubleValue"in e){const r=pt(e.doubleValue);isNaN(r)?this.Et(n,13):(this.Et(n,15),_h(r)?n.dt(0):n.dt(r))}else if("timestampValue"in e){const r=e.timestampValue;this.Et(n,20),typeof r=="string"?n.At(r):(n.At(`${r.seconds||""}`),n.dt(r.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,n),this.Vt(n);else if("bytesValue"in e)this.Et(n,30),n.ft(ws(e.bytesValue)),this.Vt(n);else if("referenceValue"in e)this.gt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Et(n,45),n.dt(r.latitude||0),n.dt(r.longitude||0)}else"mapValue"in e?zD(e)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,n),this.Vt(n)):"arrayValue"in e?(this.wt(e.arrayValue,n),this.Vt(n)):te()}Rt(e,n){this.Et(n,25),this.St(e,n)}St(e,n){n.At(e)}yt(e,n){const r=e.fields||{};this.Et(n,55);for(const i of Object.keys(r))this.Rt(i,n),this.It(r[i],n)}wt(e,n){const r=e.values||[];this.Et(n,50);for(const i of r)this.It(i,n)}gt(e,n){this.Et(n,37),K.fromName(e).path.forEach(r=>{this.Et(n,60),this.St(r,n)})}Et(e,n){e.dt(n)}Vt(e){e.dt(2)}}so.bt=new so;function NQ(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function KI(t){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=NQ(255&r[s]);if(i+=o,o!==8)break}return i}(t);return Math.ceil(e/8)}class DQ{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ct(r.value),r=n.next();this.vt()}Ft(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Mt(r.value),r=n.next();this.xt()}Ot(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ct(r);else if(r<2048)this.Ct(960|r>>>6),this.Ct(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ct(480|r>>>12),this.Ct(128|63&r>>>6),this.Ct(128|63&r);else{const i=n.codePointAt(0);this.Ct(240|i>>>18),this.Ct(128|63&i>>>12),this.Ct(128|63&i>>>6),this.Ct(128|63&i)}}this.vt()}Nt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Mt(r);else if(r<2048)this.Mt(960|r>>>6),this.Mt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Mt(480|r>>>12),this.Mt(128|63&r>>>6),this.Mt(128|63&r);else{const i=n.codePointAt(0);this.Mt(240|i>>>18),this.Mt(128|63&i>>>12),this.Mt(128|63&i>>>6),this.Mt(128|63&i)}}this.xt()}Lt(e){const n=this.Bt(e),r=KI(n);this.kt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}qt(e){const n=this.Bt(e),r=KI(n);this.kt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Bt(e){const n=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Ct(e){const n=255&e;n===0?(this.Kt(0),this.Kt(255)):n===255?(this.Kt(255),this.Kt(0)):this.Kt(n)}Mt(e){const n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class OQ{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Lt(e)}Tt(){this.Gt.Qt()}}class LQ{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}}class xc{constructor(){this.Gt=new DQ,this.zt=new OQ(this.Gt),this.jt=new LQ(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return e===0?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Jt(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new oo(this.indexId,this.documentKey,this.arrayValue,r)}}function Vi(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=GI(t.arrayValue,e.arrayValue),n!==0?n:(n=GI(t.directionalValue,e.directionalValue),n!==0?n:K.comparator(t.documentKey,e.documentKey)))}function GI(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QI{constructor(e){this.Yt=new Ue((n,r)=>it.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(const n of e.filters){const r=n;r.isInequality()?this.Yt=this.Yt.add(r):this.Xt.push(r)}}get en(){return this.Yt.size>1}tn(e){if(oe(e.collectionGroup===this.collectionId),this.en)return!1;const n=i0(e);if(n!==void 0&&!this.nn(n))return!1;const r=Zs(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.nn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Yt.size>0){const a=this.Yt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const l=r[s];if(!this.rn(a,l)||!this.sn(this.Zt[o++],l))return!1}++s}for(;s<r.length;++s){const a=r[s];if(o>=this.Zt.length||!this.sn(this.Zt[o++],a))return!1}return!0}on(){if(this.en)return null;let e=new Ue(it.comparator);const n=[];for(const r of this.Xt)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new Hf(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Hf(r.field,0))}for(const r of this.Zt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Hf(r.field,r.dir==="asc"?0:1)));return new eg(eg.UNKNOWN_ID,this.collectionId,n,yh.empty())}nn(e){for(const n of this.Xt)if(this.rn(n,e))return!0;return!1}rn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}sn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DO(t){var e,n;if(oe(t instanceof Re||t instanceof Le),t instanceof Re){if(t instanceof XD){const i=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(s=>Re.create(t.field,"==",s)))||[];return Le.create(i,"or")}return t}const r=t.filters.map(i=>DO(i));return Le.create(r,t.op)}function MQ(t){if(t.getFilters().length===0)return[];const e=_0(DO(t));return oe(OO(e)),m0(e)||y0(e)?[e]:e.getFilters()}function m0(t){return t instanceof Re}function y0(t){return t instanceof Le&&u1(t)}function OO(t){return m0(t)||y0(t)||function(n){if(n instanceof Le&&l0(n)){for(const r of n.getFilters())if(!m0(r)&&!y0(r))return!1;return!0}return!1}(t)}function _0(t){if(oe(t instanceof Re||t instanceof Le),t instanceof Re)return t;if(t.filters.length===1)return _0(t.filters[0]);const e=t.filters.map(r=>_0(r));let n=Le.create(e,t.op);return n=sg(n),OO(n)?n:(oe(n instanceof Le),oe(Sl(n)),oe(n.filters.length>1),n.filters.reduce((r,i)=>w1(r,i)))}function w1(t,e){let n;return oe(t instanceof Re||t instanceof Le),oe(e instanceof Re||e instanceof Le),n=t instanceof Re?e instanceof Re?function(i,s){return Le.create([i,s],"and")}(t,e):YI(t,e):e instanceof Re?YI(e,t):function(i,s){if(oe(i.filters.length>0&&s.filters.length>0),Sl(i)&&Sl(s))return GD(i,s.getFilters());const o=l0(i)?i:s,a=l0(i)?s:i,l=o.filters.map(c=>w1(c,a));return Le.create(l,"or")}(t,e),sg(n)}function YI(t,e){if(Sl(e))return GD(e,t.getFilters());{const n=e.filters.map(r=>w1(t,r));return Le.create(n,"or")}}function sg(t){if(oe(t instanceof Re||t instanceof Le),t instanceof Re)return t;const e=t.getFilters();if(e.length===1)return sg(e[0]);if(qD(t))return t;const n=e.map(i=>sg(i)),r=[];return n.forEach(i=>{i instanceof Re?r.push(i):i instanceof Le&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Le.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VQ{constructor(){this._n=new b1}addToCollectionParentIndex(e,n){return this._n.add(n),k.resolve()}getCollectionParents(e,n){return k.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return k.resolve()}deleteFieldIndex(e,n){return k.resolve()}deleteAllFieldIndexes(e){return k.resolve()}createTargetIndexes(e,n){return k.resolve()}getDocumentsMatchingTarget(e,n){return k.resolve(null)}getIndexType(e,n){return k.resolve(0)}getFieldIndexes(e,n){return k.resolve([])}getNextCollectionGroupToUpdate(e){return k.resolve(null)}getMinOffset(e,n){return k.resolve(Qn.min())}getMinOffsetFromCollectionGroup(e,n){return k.resolve(Qn.min())}updateCollectionGroup(e,n,r){return k.resolve()}updateIndexEntries(e,n){return k.resolve()}}class b1{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Ue(xe.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ue(xe.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cf=new Uint8Array(0);class FQ{constructor(e,n){this.databaseId=n,this.an=new b1,this.un=new Bs(r=>Uo(r),(r,i)=>md(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.an.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.an.add(n)});const s={collectionId:r,parent:_n(i)};return XI(e).put(s)}return k.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[CD(n),""],!1,!0);return XI(e).W(i).next(s=>{for(const o of s){if(o.collectionId!==n)break;r.push(jr(o.parent))}return r})}addFieldIndex(e,n){const r=Rc(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(n);delete i.indexId;const s=r.add(i);if(n.indexState){const o=_a(e);return s.next(a=>{o.put(WI(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const r=Rc(e),i=_a(e),s=ya(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=Rc(e),r=ya(e),i=_a(e);return n.H().next(()=>r.H()).next(()=>i.H())}createTargetIndexes(e,n){return k.forEach(this.cn(n),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){const s=new QI(r).on();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,n){const r=ya(e);let i=!0;const s=new Map;return k.forEach(this.cn(n),o=>this.ln(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=ve();const a=[];return k.forEach(s,(l,c)=>{F("IndexedDbIndexManager",`Using index ${function(v){return`id=${v.indexId}|cg=${v.collectionGroup}|f=${v.fields.map(w=>`${w.fieldPath}:${w.kind}`).join(",")}`}(l)} to execute ${Uo(n)}`);const u=function(v,w){const S=i0(w);if(S===void 0)return null;for(const E of ng(v,S.fieldPath))switch(E.op){case"array-contains-any":return E.value.arrayValue.values||[];case"array-contains":return[E.value]}return null}(c,l),h=function(v,w){const S=new Map;for(const E of Zs(w))for(const T of ng(v,E.fieldPath))switch(T.op){case"==":case"in":S.set(E.fieldPath.canonicalString(),T.value);break;case"not-in":case"!=":return S.set(E.fieldPath.canonicalString(),T.value),Array.from(S.values())}return null}(c,l),d=function(v,w){const S=[];let E=!0;for(const T of Zs(w)){const A=T.kind===0?kI(v,T.fieldPath,v.startAt):PI(v,T.fieldPath,v.startAt);S.push(A.value),E&&(E=A.inclusive)}return new Es(S,E)}(c,l),f=function(v,w){const S=[];let E=!0;for(const T of Zs(w)){const A=T.kind===0?PI(v,T.fieldPath,v.endAt):kI(v,T.fieldPath,v.endAt);S.push(A.value),E&&(E=A.inclusive)}return new Es(S,E)}(c,l),p=this.hn(l,c,d),g=this.hn(l,c,f),_=this.Pn(l,c,h),y=this.In(l.indexId,u,p,d.inclusive,g,f.inclusive,_);return k.forEach(y,m=>r.j(m,n.limit).next(v=>{v.forEach(w=>{const S=K.fromSegments(w.documentKey);o.has(S)||(o=o.add(S),a.push(S))})}))}).next(()=>a)}return k.resolve(null)})}cn(e){let n=this.un.get(e);return n||(e.filters.length===0?n=[e]:n=MQ(Le.create(e.filters,"and")).map(r=>u0(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,n),n)}In(e,n,r,i,s,o,a){const l=(n!=null?n.length:1)*Math.max(r.length,s.length),c=l/(n!=null?n.length:1),u=[];for(let h=0;h<l;++h){const d=n?this.Tn(n[h/c]):cf,f=this.En(e,d,r[h%c],i),p=this.dn(e,d,s[h%c],o),g=a.map(_=>this.En(e,d,_,!0));u.push(...this.createRange(f,p,g))}return u}En(e,n,r,i){const s=new oo(e,K.empty(),n,r);return i?s:s.Jt()}dn(e,n,r,i){const s=new oo(e,K.empty(),n,r);return i?s.Jt():s}ln(e,n){const r=new QI(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.tn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const i=this.cn(n);return k.forEach(i,s=>this.ln(e,s).next(o=>{o?r!==0&&o.fields.length<function(l){let c=new Ue(it.comparator),u=!1;for(const h of l.filters)for(const d of h.getFlattenedFilters())d.field.isKeyField()||(d.op==="array-contains"||d.op==="array-contains-any"?u=!0:c=c.add(d.field));for(const h of l.orderBy)h.field.isKeyField()||(c=c.add(h.field));return c.size+(u?1:0)}(s)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&i.length>1&&r===2?1:r)}An(e,n){const r=new xc;for(const i of Zs(e)){const s=n.data.field(i.fieldPath);if(s==null)return null;const o=r.Ht(i.kind);so.bt.Pt(s,o)}return r.Wt()}Tn(e){const n=new xc;return so.bt.Pt(e,n.Ht(0)),n.Wt()}Rn(e,n){const r=new xc;return so.bt.Pt($o(this.databaseId,n),r.Ht(function(s){const o=Zs(s);return o.length===0?0:o[o.length-1].kind}(e))),r.Wt()}Pn(e,n,r){if(r===null)return[];let i=[];i.push(new xc);let s=0;for(const o of Zs(e)){const a=r[s++];for(const l of i)if(this.Vn(n,o.fieldPath)&&bh(a))i=this.mn(i,o,a);else{const c=l.Ht(o.kind);so.bt.Pt(a,c)}}return this.fn(i)}hn(e,n,r){return this.Pn(e,n,r.position)}fn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].Wt();return n}mn(e,n,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const l=new xc;l.seed(a.Wt()),so.bt.Pt(o,l.Ht(n.kind)),s.push(l)}return s}Vn(e,n){return!!e.filters.find(r=>r instanceof Re&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=Rc(e),i=_a(e);return(n?r.W("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.W()).next(s=>{const o=[];return k.forEach(s,a=>i.get([a.indexId,this.uid]).next(l=>{o.push(function(u,h){const d=h?new yh(h.sequenceNumber,new Qn(Wo(h.readTime),new K(jr(h.documentKey)),h.largestBatchId)):yh.empty(),f=u.fields.map(([p,g])=>new Hf(it.fromServerFormat(p),g));return new eg(u.indexId,u.collectionGroup,f,d)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:me(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=Rc(e),s=_a(e);return this.gn(e).next(o=>i.W("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>k.forEach(a,l=>s.put(WI(l.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){const r=new Map;return k.forEach(n,(i,s)=>{const o=r.get(i.collectionGroup);return(o?k.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),k.forEach(a,l=>this.pn(e,i,l).next(c=>{const u=this.yn(s,l);return c.isEqual(u)?k.resolve():this.wn(e,s,l,c,u)}))))})}Sn(e,n,r,i){return ya(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.Rn(r,n.key),documentKey:n.key.path.toArray()})}bn(e,n,r,i){return ya(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.Rn(r,n.key),n.key.path.toArray()])}pn(e,n,r){const i=ya(e);let s=new Ue(Vi);return i.Y({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.Rn(r,n)])},(o,a)=>{s=s.add(new oo(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>s)}yn(e,n){let r=new Ue(Vi);const i=this.An(n,e);if(i==null)return r;const s=i0(n);if(s!=null){const o=e.data.field(s.fieldPath);if(bh(o))for(const a of o.arrayValue.values||[])r=r.add(new oo(n.indexId,e.key,this.Tn(a),i))}else r=r.add(new oo(n.indexId,e.key,cf,i));return r}wn(e,n,r,i,s){F("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const o=[];return function(l,c,u,h,d){const f=l.getIterator(),p=c.getIterator();let g=ma(f),_=ma(p);for(;g||_;){let y=!1,m=!1;if(g&&_){const v=u(g,_);v<0?m=!0:v>0&&(y=!0)}else g!=null?m=!0:y=!0;y?(h(_),_=ma(p)):m?(d(g),g=ma(f)):(g=ma(f),_=ma(p))}}(i,s,Vi,a=>{o.push(this.Sn(e,n,r,a))},a=>{o.push(this.bn(e,n,r,a))}),k.waitFor(o)}gn(e){let n=1;return _a(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>Vi(o,a)).filter((o,a,l)=>!a||Vi(o,l[a-1])!==0);const i=[];i.push(e);for(const o of r){const a=Vi(o,e),l=Vi(o,n);if(a===0)i[0]=e.Jt();else if(a>0&&l<0)i.push(o),i.push(o.Jt());else if(l>0)break}i.push(n);const s=[];for(let o=0;o<i.length;o+=2){if(this.Dn(i[o],i[o+1]))return[];const a=[i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,cf,[]],l=[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,cf,[]];s.push(IDBKeyRange.bound(a,l))}return s}Dn(e,n){return Vi(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(JI)}getMinOffset(e,n){return k.mapArray(this.cn(n),r=>this.ln(e,r).next(i=>i||te())).next(JI)}}function XI(t){return Wt(t,"collectionParents")}function ya(t){return Wt(t,"indexEntries")}function Rc(t){return Wt(t,"indexConfiguration")}function _a(t){return Wt(t,"indexState")}function JI(t){oe(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;a1(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Qn(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZI={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class xn{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new xn(e,xn.DEFAULT_COLLECTION_PERCENTILE,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LO(t,e,n){const r=t.store("mutations"),i=t.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.Y({range:o},(u,h,d)=>(a++,d.delete()));s.push(l.next(()=>{oe(a===1)}));const c=[];for(const u of n.mutations){const h=VD(e,u.key.path,n.batchId);s.push(i.delete(h)),c.push(u.key)}return k.waitFor(s).next(()=>c)}function og(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw te();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xn.DEFAULT_COLLECTION_PERCENTILE=10,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,xn.DEFAULT=new xn(41943040,xn.DEFAULT_COLLECTION_PERCENTILE,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),xn.DISABLED=new xn(-1,0,0);class $m{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Cn={}}static lt(e,n,r,i){oe(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new $m(s,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Fi(e).Y({index:"userMutationsIndex",range:r},(i,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const s=xa(e),o=Fi(e);return o.add({}).next(a=>{oe(typeof a=="number");const l=new p1(a,n,r,i),c=function(f,p,g){const _=g.baseMutations.map(m=>Th(f.ct,m)),y=g.mutations.map(m=>Th(f.ct,m));return{userId:p,batchId:g.batchId,localWriteTimeMs:g.localWriteTime.toMillis(),baseMutations:_,mutations:y}}(this.serializer,this.userId,l),u=[];let h=new Ue((d,f)=>me(d.canonicalString(),f.canonicalString()));for(const d of i){const f=VD(this.userId,d.key.path,a);h=h.add(d.key.path.popLast()),u.push(o.put(c)),u.push(s.put(f,xG))}return h.forEach(d=>{u.push(this.indexManager.addToCollectionParentIndex(e,d))}),e.addOnCommittedListener(()=>{this.Cn[a]=l.keys()}),k.waitFor(u).next(()=>l)})}lookupMutationBatch(e,n){return Fi(e).get(n).next(r=>r?(oe(r.userId===this.userId),io(this.serializer,r)):null)}vn(e,n){return this.Cn[n]?k.resolve(this.Cn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.Cn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return Fi(e).Y({index:"userMutationsIndex",range:i},(o,a,l)=>{a.userId===this.userId&&(oe(a.batchId>=r),s=io(this.serializer,a)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Fi(e).Y({index:"userMutationsIndex",range:n,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Fi(e).W("userMutationsIndex",n).next(r=>r.map(i=>io(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=qf(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return xa(e).Y({range:i},(o,a,l)=>{const[c,u,h]=o,d=jr(u);if(c===this.userId&&n.path.isEqual(d))return Fi(e).get(h).next(f=>{if(!f)throw te();oe(f.userId===this.userId),s.push(io(this.serializer,f))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ue(me);const i=[];return n.forEach(s=>{const o=qf(this.userId,s.path),a=IDBKeyRange.lowerBound(o),l=xa(e).Y({range:a},(c,u,h)=>{const[d,f,p]=c,g=jr(f);d===this.userId&&s.path.isEqual(g)?r=r.add(p):h.done()});i.push(l)}),k.waitFor(i).next(()=>this.Fn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,s=qf(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new Ue(me);return xa(e).Y({range:o},(l,c,u)=>{const[h,d,f]=l,p=jr(d);h===this.userId&&r.isPrefixOf(p)?p.length===i&&(a=a.add(f)):u.done()}).next(()=>this.Fn(e,a))}Fn(e,n){const r=[],i=[];return n.forEach(s=>{i.push(Fi(e).get(s).next(o=>{if(o===null)throw te();oe(o.userId===this.userId),r.push(io(this.serializer,o))}))}),k.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return LO(e.ae,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.Mn(n.batchId)}),k.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return k.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return xa(e).Y({range:r},(s,o,a)=>{if(s[0]===this.userId){const l=jr(s[1]);i.push(l)}else a.done()}).next(()=>{oe(i.length===0)})})}containsKey(e,n){return MO(e,this.userId,n)}xn(e){return VO(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function MO(t,e,n){const r=qf(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return xa(t).Y({range:s,J:!0},(a,l,c)=>{const[u,h,d]=a;u===e&&h===i&&(o=!0),c.done()}).next(()=>o)}function Fi(t){return Wt(t,"mutations")}function xa(t){return Wt(t,"documentMutations")}function VO(t){return Wt(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new Ho(0)}static Ln(){return new Ho(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $Q{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Bn(e).next(n=>{const r=new Ho(n.highestTargetId);return n.highestTargetId=r.next(),this.kn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(n=>ae.fromTimestamp(new ot(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.Bn(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.kn(e,i)))}addTargetData(e,n){return this.qn(e,n).next(()=>this.Bn(e).next(r=>(r.targetCount+=1,this.Qn(n,r),this.kn(e,r))))}updateTargetData(e,n){return this.qn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>va(e).delete(n.targetId)).next(()=>this.Bn(e)).next(r=>(oe(r.targetCount>0),r.targetCount-=1,this.kn(e,r)))}removeTargets(e,n,r){let i=0;const s=[];return va(e).Y((o,a)=>{const l=Qc(a);l.sequenceNumber<=n&&r.get(l.targetId)===null&&(i++,s.push(this.removeTargetData(e,l)))}).next(()=>k.waitFor(s)).next(()=>i)}forEachTarget(e,n){return va(e).Y((r,i)=>{const s=Qc(i);n(s)})}Bn(e){return ex(e).get("targetGlobalKey").next(n=>(oe(n!==null),n))}kn(e,n){return ex(e).put("targetGlobalKey",n)}qn(e,n){return va(e).put(NO(this.serializer,n))}Qn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Bn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=Uo(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return va(e).Y({range:i,index:"queryTargetsIndex"},(o,a,l)=>{const c=Qc(a);md(n,c.target)&&(s=c,l.done())}).next(()=>s)}addMatchingKeys(e,n,r){const i=[],s=Hi(e);return n.forEach(o=>{const a=_n(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),k.waitFor(i)}removeMatchingKeys(e,n,r){const i=Hi(e);return k.forEach(n,s=>{const o=_n(s.path);return k.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){const r=Hi(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Hi(e);let s=ve();return i.Y({range:r,J:!0},(o,a,l)=>{const c=jr(o[1]),u=new K(c);s=s.add(u)}).next(()=>s)}containsKey(e,n){const r=_n(n.path),i=IDBKeyRange.bound([r],[CD(r)],!1,!0);let s=0;return Hi(e).Y({index:"documentTargetsIndex",J:!0,range:i},([o,a],l,c)=>{o!==0&&(s++,c.done())}).next(()=>s>0)}_t(e,n){return va(e).get(n).next(r=>r?Qc(r):null)}}function va(t){return Wt(t,"targets")}function ex(t){return Wt(t,"targetGlobal")}function Hi(t){return Wt(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tx([t,e],[n,r]){const i=me(t,n);return i===0?me(e,r):i}class UQ{constructor(e){this.Kn=e,this.buffer=new Ue(tx),this.$n=0}Un(){return++this.$n}Wn(e){const n=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();tx(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class BQ{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Gn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return this.Gn!==null}zn(e){F("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Gn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Us(n)?F("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await $s(n)}await this.zn(3e5)})}}class jQ{constructor(e,n){this.jn=e,this.params=n}calculateTargetCount(e,n){return this.jn.Hn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return k.resolve(Pn._e);const r=new UQ(n);return this.jn.forEachTarget(e,i=>r.Wn(i.sequenceNumber)).next(()=>this.jn.Jn(e,i=>r.Wn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.jn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(F("LruGarbageCollector","Garbage collection skipped; disabled"),k.resolve(ZI)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(F("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ZI):this.Yn(e,n))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,n){let r,i,s,o,a,l,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(F("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),i=this.params.maximumSequenceNumbersToCollect):i=h,o=Date.now(),this.nthSequenceNumber(e,i))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,n))).next(h=>(s=h,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(c=Date.now(),Sa()<=Ie.DEBUG&&F("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-u}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${h} documents in `+(c-l)+`ms
Total Duration: ${c-u}ms`),k.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:h})))}}function zQ(t,e){return new jQ(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WQ{constructor(e,n){this.db=e,this.garbageCollector=zQ(this,n)}Hn(e){const n=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}Zn(e){let n=0;return this.Jn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Jn(e,n){return this.Xn(e,(r,i)=>n(i))}addReference(e,n,r){return uf(e,r)}removeReference(e,n,r){return uf(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return uf(e,n)}er(e,n){return function(i,s){let o=!1;return VO(i).Z(a=>MO(i,a,s).next(l=>(l&&(o=!0),k.resolve(!l)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Xn(e,(o,a)=>{if(a<=n){const l=this.er(e,o).next(c=>{if(!c)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,ae.min()),Hi(e).delete(function(h){return[0,_n(h.path)]}(o))))});i.push(l)}}).next(()=>k.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return uf(e,n)}Xn(e,n){const r=Hi(e);let i,s=Pn._e;return r.Y({index:"documentTargetsIndex"},([o,a],{path:l,sequenceNumber:c})=>{o===0?(s!==Pn._e&&n(new K(jr(i)),s),s=c,i=l):s=Pn._e}).next(()=>{s!==Pn._e&&n(new K(jr(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function uf(t,e){return Hi(t).put(function(r,i){return{targetId:0,path:_n(r.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FO{constructor(){this.changes=new Bs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ge.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?k.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HQ{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Hs(e).put(r)}removeEntry(e,n,r){return Hs(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],ig(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.tr(e,r)))}getEntry(e,n){let r=Ge.newInvalidDocument(n);return Hs(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Ac(n))},(i,s)=>{r=this.nr(n,s)}).next(()=>r)}rr(e,n){let r={size:0,document:Ge.newInvalidDocument(n)};return Hs(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Ac(n))},(i,s)=>{r={document:this.nr(n,s),size:og(s)}}).next(()=>r)}getEntries(e,n){let r=Nn();return this.ir(e,n,(i,s)=>{const o=this.nr(i,s);r=r.insert(i,o)}).next(()=>r)}sr(e,n){let r=Nn(),i=new He(K.comparator);return this.ir(e,n,(s,o)=>{const a=this.nr(s,o);r=r.insert(s,a),i=i.insert(s,og(o))}).next(()=>({documents:r,_r:i}))}ir(e,n,r){if(n.isEmpty())return k.resolve();let i=new Ue(ix);n.forEach(l=>i=i.add(l));const s=IDBKeyRange.bound(Ac(i.first()),Ac(i.last())),o=i.getIterator();let a=o.getNext();return Hs(e).Y({index:"documentKeyIndex",range:s},(l,c,u)=>{const h=K.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&ix(a,h)<0;)r(a,null),a=o.getNext();a&&a.isEqual(h)&&(r(a,c),a=o.hasNext()?o.getNext():null),a?u.U(Ac(a)):u.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,s){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),ig(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Hs(e).W(IDBKeyRange.bound(a,l,!0)).next(c=>{s==null||s.incrementDocumentReadCount(c.length);let u=Nn();for(const h of c){const d=this.nr(K.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);d.isFoundDocument()&&(_d(n,d)||i.has(d.key))&&(u=u.insert(d.key,d))}return u})}getAllFromCollectionGroup(e,n,r,i){let s=Nn();const o=rx(n,r),a=rx(n,Qn.max());return Hs(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(l,c,u)=>{const h=this.nr(K.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);s=s.insert(h.key,h),s.size===i&&u.done()}).next(()=>s)}newChangeBuffer(e){return new qQ(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return nx(e).get("remoteDocumentGlobalKey").next(n=>(oe(!!n),n))}tr(e,n){return nx(e).put("remoteDocumentGlobalKey",n)}nr(e,n){if(n){const r=PQ(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(ae.min())))return r}return Ge.newInvalidDocument(e)}}function $O(t){return new HQ(t)}class qQ extends FO{constructor(e,n){super(),this.ar=e,this.trackRemovals=n,this.ur=new Bs(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new Ue((s,o)=>me(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.ur.get(s);if(n.push(this.ar.removeEntry(e,s,a.readTime)),o.isValidDocument()){const l=jI(this.ar.serializer,o);i=i.add(s.path.popLast());const c=og(l);r+=c-a.size,n.push(this.ar.addEntry(e,s,l))}else if(r-=a.size,this.trackRemovals){const l=jI(this.ar.serializer,o.convertToNoDocument(ae.min()));n.push(this.ar.addEntry(e,s,l))}}),i.forEach(s=>{n.push(this.ar.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.ar.updateMetadata(e,r)),k.waitFor(n)}getFromCache(e,n){return this.ar.rr(e,n).next(r=>(this.ur.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.ar.sr(e,n).next(({documents:r,_r:i})=>(i.forEach((s,o)=>{this.ur.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function nx(t){return Wt(t,"remoteDocumentGlobal")}function Hs(t){return Wt(t,"remoteDocumentsV14")}function Ac(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function rx(t,e){const n=e.documentKey.path.toArray();return[t,ig(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function ix(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=me(n[s],r[s]),i)return i;return i=me(n.length,r.length),i||(i=me(n[n.length-2],r[r.length-2]),i||me(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KQ{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UO{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Tu(r.mutation,i,Cn.empty(),ot.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ve()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ve()){const i=zr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Kc();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=zr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ve()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Nn();const o=Eu(),a=function(){return Eu()}();return n.forEach((l,c)=>{const u=r.get(c.key);i.has(c.key)&&(u===void 0||u.mutation instanceof Di)?s=s.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),Tu(u.mutation,c,u.mutation.getFieldMask(),ot.now())):o.set(c.key,Cn.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,u)=>o.set(c,u)),n.forEach((c,u)=>{var h;return a.set(c,new KQ(u,(h=o.get(c))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Eu();let i=new He((o,a)=>o-a),s=ve();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let u=r.get(l)||Cn.empty();u=a.applyToLocalView(c,u),r.set(l,u);const h=(i.get(a.batchId)||ve()).add(l);i=i.insert(a.batchId,h)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,h=iO();u.forEach(d=>{if(!s.has(d)){const f=dO(n.get(d),r.get(d));f!==null&&h.set(d,f),s=s.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return k.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return K.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):h1(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):k.resolve(zr());let a=-1,l=s;return o.next(c=>k.forEach(c,(u,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(u)?k.resolve():this.remoteDocumentCache.getEntry(e,u).next(d=>{l=l.insert(u,d)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,ve())).next(u=>({batchId:a,changes:rO(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new K(n)).next(r=>{let i=Kc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Kc();return this.indexManager.getCollectionParents(e,s).next(a=>k.forEach(a,l=>{const c=function(h,d){return new Ni(d,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(u=>{u.forEach((h,d)=>{o=o.insert(h,d)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,c)=>{const u=c.getKey();o.get(u)===null&&(o=o.insert(u,Ge.newInvalidDocument(u)))});let a=Kc();return o.forEach((l,c)=>{const u=s.get(l);u!==void 0&&Tu(u.mutation,c,Cn.empty(),ot.now()),_d(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GQ{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return k.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:It(i.createTime)}}(n)),k.resolve()}getNamedQuery(e,n){return k.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(i){return{name:i.name,query:v1(i.bundledQuery),readTime:It(i.readTime)}}(n)),k.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QQ{constructor(){this.overlays=new He(K.comparator),this.hr=new Map}getOverlay(e,n){return k.resolve(this.overlays.get(n))}getOverlays(e,n){const r=zr();return k.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),k.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),k.resolve()}getOverlaysForCollection(e,n,r){const i=zr(),s=n.length+1,o=new K(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return k.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new He((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let u=s.get(c.largestBatchId);u===null&&(u=zr(),s=s.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=zr(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=i)););return k.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new m1(n,r));let s=this.hr.get(n);s===void 0&&(s=ve(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1{constructor(){this.Pr=new Ue(Mt.Ir),this.Tr=new Ue(Mt.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){const r=new Mt(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new Mt(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){const n=new K(new xe([])),r=new Mt(n,e),i=new Mt(n,e+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const n=new K(new xe([])),r=new Mt(n,e),i=new Mt(n,e+1);let s=ve();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Mt(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Mt{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return K.comparator(e.key,n.key)||me(e.pr,n.pr)}static Er(e,n){return me(e.pr,n.pr)||K.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YQ{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Ue(Mt.Ir)}checkEmpty(e){return k.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new p1(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.wr=this.wr.add(new Mt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return k.resolve(o)}lookupMutationBatch(e,n){return k.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.br(r),s=i<0?0:i;return k.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return k.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return k.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Mt(n,0),i=new Mt(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{const a=this.Sr(o.pr);s.push(a)}),k.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ue(me);return n.forEach(i=>{const s=new Mt(i,0),o=new Mt(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),k.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;K.isDocumentKey(s)||(s=s.child(""));const o=new Mt(new K(s),0);let a=new Ue(me);return this.wr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.pr)),!0)},o),k.resolve(this.Dr(a))}Dr(e){const n=[];return e.forEach(r=>{const i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){oe(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return k.forEach(n.mutations,i=>{const s=new Mt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){const r=new Mt(n,0),i=this.wr.firstAfterOrEqual(r);return k.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,k.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){const n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XQ{constructor(e){this.vr=e,this.docs=function(){return new He(K.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return k.resolve(r?r.document.mutableCopy():Ge.newInvalidDocument(n))}getEntries(e,n){let r=Nn();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Ge.newInvalidDocument(i))}),k.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Nn();const o=n.path,a=new K(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||a1(DD(u),r)<=0||(i.has(u.key)||_d(n,u))&&(s=s.insert(u.key,u.mutableCopy()))}return k.resolve(s)}getAllFromCollectionGroup(e,n,r,i){te()}Fr(e,n){return k.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new JQ(this)}getSize(e){return k.resolve(this.size)}}class JQ extends FO{constructor(e){super(),this.ar=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),k.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZQ{constructor(e){this.persistence=e,this.Mr=new Bs(n=>Uo(n),md),this.lastRemoteSnapshotVersion=ae.min(),this.highestTargetId=0,this.Or=0,this.Nr=new S1,this.targetCount=0,this.Lr=Ho.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,i)=>n(i)),k.resolve()}getLastRemoteSnapshotVersion(e){return k.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return k.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),k.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),k.resolve()}qn(e){this.Mr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Lr=new Ho(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,k.resolve()}updateTargetData(e,n){return this.qn(n),k.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,k.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),k.waitFor(s).next(()=>i)}getTargetCount(e){return k.resolve(this.targetCount)}getTargetData(e,n){const r=this.Mr.get(n)||null;return k.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),k.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),k.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),k.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Nr.gr(n);return k.resolve(r)}containsKey(e,n){return k.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BO{constructor(e,n){this.Br={},this.overlays={},this.kr=new Pn(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new ZQ(this),this.indexManager=new VQ,this.remoteDocumentCache=function(i){return new XQ(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new CO(n),this.$r=new GQ(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new QQ,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new YQ(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){F("MemoryPersistence","Starting transaction:",e);const i=new eY(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(e,n){return k.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}}class eY extends LD{constructor(e){super(),this.currentSequenceNumber=e}}class Um{constructor(e){this.persistence=e,this.zr=new S1,this.jr=null}static Hr(e){return new Um(e)}get Jr(){if(this.jr)return this.jr;throw te()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),k.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),k.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),k.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return k.forEach(this.Jr,r=>{const i=K.fromPath(r);return this.Yr(e,i).next(s=>{s||n.removeEntry(i,ae.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return k.or([()=>k.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tY{constructor(e){this.serializer=e}N(e,n,r,i){const s=new Om("createOrUpgrade",n);r<1&&i>=1&&(function(l){l.createObjectStore("owner")}(e),function(l){l.createObjectStore("mutationQueues",{keyPath:"userId"}),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",vI,{unique:!0}),l.createObjectStore("documentMutations")}(e),sx(e),function(l){l.createObjectStore("remoteDocuments")}(e));let o=k.resolve();return r<3&&i>=3&&(r!==0&&(function(l){l.deleteObjectStore("targetDocuments"),l.deleteObjectStore("targets"),l.deleteObjectStore("targetGlobal")}(e),sx(e)),o=o.next(()=>function(l){const c=l.store("targetGlobal"),u={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ae.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",u)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(l,c){return c.store("mutations").W().next(u=>{l.deleteObjectStore("mutations"),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",vI,{unique:!0});const h=c.store("mutations"),d=u.map(f=>h.put(f));return k.waitFor(d)})}(e,s))),o=o.next(()=>{(function(l){l.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.Xr(s))),r<6&&i>=6&&(o=o.next(()=>(function(l){l.createObjectStore("remoteDocumentGlobal")}(e),this.ei(s)))),r<7&&i>=7&&(o=o.next(()=>this.ti(s))),r<8&&i>=8&&(o=o.next(()=>this.ni(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.ri(s))),r<11&&i>=11&&(o=o.next(()=>{(function(l){l.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(l){l.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(l){const c=l.createObjectStore("documentOverlays",{keyPath:FG});c.createIndex("collectionPathOverlayIndex",$G,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",UG,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(l){const c=l.createObjectStore("remoteDocumentsV14",{keyPath:RG});c.createIndex("documentKeyIndex",AG),c.createIndex("collectionGroupIndex",kG)}(e)).next(()=>this.ii(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.si(e,s))),r<15&&i>=15&&(o=o.next(()=>function(l){l.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),l.createObjectStore("indexState",{keyPath:OG}).createIndex("sequenceNumberIndex",LG,{unique:!1}),l.createObjectStore("indexEntries",{keyPath:MG}).createIndex("documentKeyIndex",VG,{unique:!1})}(e))),o}ei(e){let n=0;return e.store("remoteDocuments").Y((r,i)=>{n+=og(i)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Xr(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.W().next(i=>k.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",o).next(a=>k.forEach(a,l=>{oe(l.userId===s.userId);const c=io(this.serializer,l);return LO(e,s.userId,c).next(()=>{})}))}))}ti(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.Y((o,a)=>{const l=new xe(o),c=function(h){return[0,_n(h)]}(l);s.push(n.get(c).next(u=>u?k.resolve():(h=>n.put({targetId:0,path:_n(h),sequenceNumber:i.highestListenSequenceNumber}))(l)))}).next(()=>k.waitFor(s))})}ni(e,n){e.createObjectStore("collectionParents",{keyPath:DG});const r=n.store("collectionParents"),i=new b1,s=o=>{if(i.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:_n(l)})}};return n.store("remoteDocuments").Y({J:!0},(o,a)=>{const l=new xe(o);return s(l.popLast())}).next(()=>n.store("documentMutations").Y({J:!0},([o,a,l],c)=>{const u=jr(a);return s(u.popLast())}))}ri(e){const n=e.store("targets");return n.Y((r,i)=>{const s=Qc(i),o=NO(this.serializer,s);return n.put(o)})}ii(e,n){const r=n.store("remoteDocuments"),i=[];return r.Y((s,o)=>{const a=n.store("remoteDocumentsV14"),l=function(h){return h.document?new K(xe.fromString(h.document.name).popFirst(5)):h.noDocument?K.fromSegments(h.noDocument.path):h.unknownDocument?K.fromSegments(h.unknownDocument.path):te()}(o).path.toArray(),c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(c))}).next(()=>k.waitFor(i))}si(e,n){const r=n.store("mutations"),i=$O(this.serializer),s=new BO(Um.Hr,this.serializer.ct);return r.W().next(o=>{const a=new Map;return o.forEach(l=>{var c;let u=(c=a.get(l.userId))!==null&&c!==void 0?c:ve();io(this.serializer,l).keys().forEach(h=>u=u.add(h)),a.set(l.userId,u)}),k.forEach(a,(l,c)=>{const u=new Ft(c),h=Fm.lt(this.serializer,u),d=s.getIndexManager(u),f=$m.lt(u,this.serializer,d,s.referenceDelegate);return new UO(i,f,h,d).recalculateAndSaveOverlaysForDocumentKeys(new s0(n,Pn._e),l).next()})})}}function sx(t){t.createObjectStore("targetDocuments",{keyPath:CG}).createIndex("documentTargetsIndex",NG,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",PG,{unique:!0}),t.createObjectStore("targetGlobal")}const h_="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class E1{constructor(e,n,r,i,s,o,a,l,c,u,h=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.oi=s,this.window=o,this.document=a,this._i=c,this.ai=u,this.ui=h,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=d=>Promise.resolve(),!E1.D())throw new M(C.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new WQ(this,i),this.Ti=n+"main",this.serializer=new CO(l),this.Ei=new or(this.Ti,this.ui,new tY(this.serializer)),this.Qr=new $Q(this.referenceDelegate,this.serializer),this.remoteDocumentCache=$O(this.serializer),this.$r=new CQ,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,u===!1&&Et("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new M(C.FAILED_PRECONDITION,h_);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Qr.getHighestSequenceNumber(e))}).then(e=>{this.kr=new Pn(e,this._i)}).then(()=>{this.qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}fi(e){return this.Ii=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.B(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget(async()=>{this.started&&await this.Ai()}))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>hf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(e).next(n=>{n||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(e)).next(n=>this.isPrimary&&!n?this.yi(e).next(()=>!1):!!n&&this.wi(e).next(()=>!0))).catch(e=>{if(Us(e))return F("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return F("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.oi.enqueueRetryable(()=>this.Ii(e)),this.isPrimary=e})}gi(e){return kc(e).get("owner").next(n=>k.resolve(this.Si(n)))}bi(e){return hf(e).delete(this.clientId)}async Di(){if(this.isPrimary&&!this.Ci(this.Pi,18e5)){this.Pi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=Wt(n,"clientMetadata");return r.W().next(i=>{const s=this.vi(i,18e5),o=i.filter(a=>s.indexOf(a)===-1);return k.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.di)for(const n of e)this.di.removeItem(this.Fi(n.clientId))}}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?k.resolve(!0):kc(e).get("owner").next(n=>{if(n!==null&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)){if(this.Si(n)&&this.networkEnabled)return!0;if(!this.Si(n)){if(!n.allowTabSynchronization)throw new M(C.FAILED_PRECONDITION,h_);return!1}}return!(!this.networkEnabled||!this.inForeground)||hf(e).W().next(r=>this.vi(r,5e3).find(i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&F("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),await this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const n=new s0(e,Pn._e);return this.yi(n).next(()=>this.bi(n))}),this.Ei.close(),this.Li()}vi(e,n){return e.filter(r=>this.Ci(r.updateTimeMs,n)&&!this.Mi(r.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>hf(e).W().next(n=>this.vi(n,18e5).map(r=>r.clientId)))}get started(){return this.qr}getMutationQueue(e,n){return $m.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new FQ(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Fm.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,n,r){F("IndexedDbPersistence","Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",s=function(l){return l===15?jG:l===14?UD:l===13?$D:l===12?BG:l===11?FD:void te()}(this.ui);let o;return this.Ei.runTransaction(e,i,s,a=>(o=new s0(a,this.kr?this.kr.next():Pn._e),n==="readwrite-primary"?this.gi(o).next(l=>!!l||this.pi(o)).next(l=>{if(!l)throw Et(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new M(C.FAILED_PRECONDITION,OD);return r(o)}).next(l=>this.wi(o).next(()=>l)):this.ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}ki(e){return kc(e).get("owner").next(n=>{if(n!==null&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)&&!this.Si(n)&&!(this.ai||this.allowTabSynchronization&&n.allowTabSynchronization))throw new M(C.FAILED_PRECONDITION,h_)})}wi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return kc(e).put("owner",n)}static D(){return or.D()}yi(e){const n=kc(e);return n.get("owner").next(r=>this.Si(r)?(F("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):k.resolve())}Ci(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(Et(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Ri(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground=this.document.visibilityState==="visible")}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.ci=()=>{this.xi();const n=/(?:Version|Mobile)\/1[456]/;fN()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var n;try{const r=((n=this.di)===null||n===void 0?void 0:n.getItem(this.Fi(e)))!==null;return F("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Et("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){Et("Failed to set zombie client id.",e)}}Li(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function kc(t){return Wt(t,"owner")}function hf(t){return Wt(t,"clientMetadata")}function T1(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I1{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(e,n){let r=ve(),i=ve();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new I1(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nY{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jO{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return fN()?8:or.v(at())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ji(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new nY;return this.Ji(e,n,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(e,n,o,a.size)})}).next(()=>s.result)}Yi(e,n,r,i){return r.documentReadCount<this.Wi?(Sa()<=Ie.DEBUG&&F("QueryEngine","SDK will not create cache indexes for query:",Ea(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),k.resolve()):(Sa()<=Ie.DEBUG&&F("QueryEngine","Query:",Ea(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(Sa()<=Ie.DEBUG&&F("QueryEngine","The SDK decides to create cache indexes for query:",Ea(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,vn(n))):k.resolve())}ji(e,n){if(CI(n))return k.resolve(null);let r=vn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=rg(n,null,"F"),r=vn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=ve(...s);return this.zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.Zi(n,a);return this.Xi(n,c,o,l.readTime)?this.ji(e,rg(n,null,"F")):this.es(e,c,n,l)}))})))}Hi(e,n,r,i){return CI(n)||i.isEqual(ae.min())?k.resolve(null):this.zi.getDocuments(e,r).next(s=>{const o=this.Zi(n,s);return this.Xi(n,o,r,i)?k.resolve(null):(Sa()<=Ie.DEBUG&&F("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ea(n)),this.es(e,o,n,ND(i,-1)).next(a=>a))})}Zi(e,n){let r=new Ue(tO(e));return n.forEach((i,s)=>{_d(e,s)&&(r=r.add(s))}),r}Xi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(e,n,r){return Sa()<=Ie.DEBUG&&F("QueryEngine","Using full collection scan to execute query:",Ea(n)),this.zi.getDocumentsMatchingQuery(e,n,Qn.min(),r)}es(e,n,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rY{constructor(e,n,r,i){this.persistence=e,this.ts=n,this.serializer=i,this.ns=new He(me),this.rs=new Bs(s=>Uo(s),md),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new UO(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}}function zO(t,e,n,r){return new rY(t,e,n,r)}async function WO(t,e){const n=Q(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n._s(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=ve();for(const c of i){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of s){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(r,l).next(c=>({us:c,removedBatchIds:o,addedBatchIds:a}))})})}function iY(t,e){const n=Q(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(a,l,c,u){const h=c.batch,d=h.keys();let f=k.resolve();return d.forEach(p=>{f=f.next(()=>u.getEntry(l,p)).next(g=>{const _=c.docVersions.get(p);oe(_!==null),g.version.compareTo(_)<0&&(h.applyToRemoteDocument(g,c),g.isValidDocument()&&(g.setReadTime(c.commitVersion),u.addEntry(g)))})}),f.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=ve();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function HO(t){const e=Q(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function sY(t,e){const n=Q(t),r=e.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const a=[];e.targetChanges.forEach((u,h)=>{const d=i.get(h);if(!d)return;a.push(n.Qr.removeMatchingKeys(s,u.removedDocuments,h).next(()=>n.Qr.addMatchingKeys(s,u.addedDocuments,h)));let f=d.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?f=f.withResumeToken(Ot.EMPTY_BYTE_STRING,ae.min()).withLastLimboFreeSnapshotVersion(ae.min()):u.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(u.resumeToken,r)),i=i.insert(h,f),function(g,_,y){return g.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-g.snapshotVersion.toMicroseconds()>=3e8?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(d,f,u)&&a.push(n.Qr.updateTargetData(s,f))});let l=Nn(),c=ve();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(qO(s,o,e.documentUpdates).next(u=>{l=u.cs,c=u.ls})),!r.isEqual(ae.min())){const u=n.Qr.getLastRemoteSnapshotVersion(s).next(h=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(u)}return k.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.ns=i,s))}function qO(t,e,n){let r=ve(),i=ve();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Nn();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(ae.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):F("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{cs:o,ls:i}})}function oY(t,e){const n=Q(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function xl(t,e){const n=Q(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,e).next(s=>s?(i=s,k.resolve(i)):n.Qr.allocateTargetId(r).next(o=>(i=new fi(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(e,r.targetId)),r})}async function Rl(t,e,n){const r=Q(t),i=r.ns.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Us(o))throw o;F("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)}function ag(t,e,n){const r=Q(t);let i=ae.min(),s=ve();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,u){const h=Q(l),d=h.rs.get(u);return d!==void 0?k.resolve(h.ns.get(d)):h.Qr.getTargetData(c,u)}(r,o,vn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ts.getDocumentsMatchingQuery(o,e,n?i:ae.min(),n?s:ve())).next(a=>(QO(r,eO(e),a),{documents:a,hs:s})))}function KO(t,e){const n=Q(t),r=Q(n.Qr),i=n.ns.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",s=>r._t(s,e).next(o=>o?o.target:null))}function GO(t,e){const n=Q(t),r=n.ss.get(e)||ae.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.os.getAllFromCollectionGroup(i,e,ND(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(QO(n,e,i),i))}function QO(t,e,n){let r=t.ss.get(e)||ae.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.ss.set(e,r)}async function aY(t,e,n,r){const i=Q(t);let s=ve(),o=Nn();for(const c of n){const u=e.Ps(c.metadata.name);c.document&&(s=s.add(u));const h=e.Is(c);h.setReadTime(e.Ts(c.metadata.readTime)),o=o.insert(u,h)}const a=i.os.newChangeBuffer({trackRemovals:!0}),l=await xl(i,function(u){return vn(Xl(xe.fromString(`__bundle__/docs/${u}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",c=>qO(c,a,o).next(u=>(a.apply(c),u)).next(u=>i.Qr.removeMatchingKeysForTargetId(c,l.targetId).next(()=>i.Qr.addMatchingKeys(c,s,l.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(c,u.cs,u.ls)).next(()=>u.cs)))}async function lY(t,e,n=ve()){const r=await xl(t,vn(v1(e.bundledQuery))),i=Q(t);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=It(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.$r.saveNamedQuery(s,e);const a=r.withResumeToken(Ot.EMPTY_BYTE_STRING,o);return i.ns=i.ns.insert(a.targetId,a),i.Qr.updateTargetData(s,a).next(()=>i.Qr.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Qr.addMatchingKeys(s,n,r.targetId)).next(()=>i.$r.saveNamedQuery(s,e))})}function ox(t,e){return`firestore_clients_${t}_${e}`}function ax(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function d_(t,e){return`firestore_targets_${t}_${e}`}class lg{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Es(e,n,r){const i=JSON.parse(r);let s,o=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new M(i.error.code,i.error.message))),o?new lg(e,n,i.state,s):(Et("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Iu{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Es(e,n){const r=JSON.parse(n);let i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new M(r.error.code,r.error.message))),s?new Iu(e,r.state,i):(Et("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class cg{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Es(e,n){const r=JSON.parse(n);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=d1();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=MD(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new cg(e,s):(Et("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class x1{constructor(e,n){this.clientId=e,this.onlineState=n}static Es(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new x1(n.clientId,n.onlineState):(Et("SharedClientState",`Failed to parse online state: ${e}`),null)}}class v0{constructor(){this.activeTargetIds=d1()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class f_{constructor(e,n,r,i,s){this.window=e,this.oi=n,this.persistenceKey=r,this.Vs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new He(me),this.started=!1,this.ys=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ws=ox(this.persistenceKey,this.Vs),this.Ss=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.ps=this.ps.insert(this.Vs,new v0),this.bs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.vs=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this.Fs=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Bi();for(const r of e){if(r===this.Vs)continue;const i=this.getItem(ox(this.persistenceKey,r));if(i){const s=cg.Es(r,i);s&&(this.ps=this.ps.insert(s.clientId,s))}}this.Ms();const n=this.storage.getItem(this.vs);if(n){const r=this.xs(n);r&&this.Os(r)}for(const r of this.ys)this.gs(r);this.ys=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let n=!1;return this.ps.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Ls(e,"pending")}updateMutationState(e,n,r){this.Ls(e,n,r),this.Bs(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(d_(this.persistenceKey,e));if(r){const i=Iu.Es(e,r);i&&(n=i.state)}}return this.ks.As(e),this.Ms(),n}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(d_(this.persistenceKey,e))}updateQueryState(e,n,r){this.qs(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Bs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return F("SharedClientState","READ",e,n),n}setItem(e,n){F("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){F("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){const n=e;if(n.storageArea===this.storage){if(F("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ws)return void Et("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.bs.test(n.key)){if(n.newValue==null){const r=this.$s(n.key);return this.Us(r,null)}{const r=this.Ws(n.key,n.newValue);if(r)return this.Us(r.clientId,r)}}else if(this.Ds.test(n.key)){if(n.newValue!==null){const r=this.Gs(n.key,n.newValue);if(r)return this.zs(r)}}else if(this.Cs.test(n.key)){if(n.newValue!==null){const r=this.js(n.key,n.newValue);if(r)return this.Hs(r)}}else if(n.key===this.vs){if(n.newValue!==null){const r=this.xs(n.newValue);if(r)return this.Os(r)}}else if(n.key===this.Ss){const r=function(s){let o=Pn._e;if(s!=null)try{const a=JSON.parse(s);oe(typeof a=="number"),o=a}catch(a){Et("SharedClientState","Failed to read sequence number from WebStorage",a)}return o}(n.newValue);r!==Pn._e&&this.sequenceNumberHandler(r)}else if(n.key===this.Fs){const r=this.Js(n.newValue);await Promise.all(r.map(i=>this.syncEngine.Ys(i)))}}}else this.ys.push(n)})}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Ls(e,n,r){const i=new lg(this.currentUser,e,n,r),s=ax(this.persistenceKey,this.currentUser,e);this.setItem(s,i.ds())}Bs(e){const n=ax(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Qs(e){const n={clientId:this.Vs,onlineState:e};this.storage.setItem(this.vs,JSON.stringify(n))}qs(e,n,r){const i=d_(this.persistenceKey,e),s=new Iu(e,n,r);this.setItem(i,s.ds())}Ks(e){const n=JSON.stringify(Array.from(e));this.setItem(this.Fs,n)}$s(e){const n=this.bs.exec(e);return n?n[1]:null}Ws(e,n){const r=this.$s(e);return cg.Es(r,n)}Gs(e,n){const r=this.Ds.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return lg.Es(new Ft(s),i,n)}js(e,n){const r=this.Cs.exec(e),i=Number(r[1]);return Iu.Es(i,n)}xs(e){return x1.Es(e)}Js(e){return JSON.parse(e)}async zs(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Zs(e.batchId,e.state,e.error);F("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,n){const r=n?this.ps.insert(e,n):this.ps.remove(e),i=this.Ns(this.ps),s=this.Ns(r),o=[],a=[];return s.forEach(l=>{i.has(l)||o.push(l)}),i.forEach(l=>{s.has(l)||a.push(l)}),this.syncEngine.eo(o,a).then(()=>{this.ps=r})}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let n=d1();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}}class YO{constructor(){this.no=new v0,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,r){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new v0,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cY{io(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lx{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){F("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){F("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let df=null;function p_(){return df===null?df=function(){return 268435456+Math.round(2147483648*Math.random())}():df++,"0x"+df.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uY={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hY{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rn="WebChannelConnection";class dY extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.fo=r+"://"+n.host,this.po=`projects/${i}/databases/${s}`,this.yo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get wo(){return!1}So(n,r,i,s,o){const a=p_(),l=this.bo(n,r.toUriEncodedString());F("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(c,s,o),this.Co(n,l,c,i).then(u=>(F("RestConnection",`Received RPC '${n}' ${a}: `,u),u),u=>{throw xr("RestConnection",`RPC '${n}' ${a} failed with error: `,u,"url: ",l,"request:",i),u})}vo(n,r,i,s,o,a){return this.So(n,r,i,s,o)}Do(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Yl}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}bo(n,r){const i=uY[n];return`${this.fo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,n,r,i){const s=p_();return new Promise((o,a)=>{const l=new lG;l.setWithCredentials(!0),l.listenOnce(oG.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case c_.NO_ERROR:const u=l.getResponseJson();F(rn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(u)),o(u);break;case c_.TIMEOUT:F(rn,`RPC '${e}' ${s} timed out`),a(new M(C.DEADLINE_EXCEEDED,"Request time out"));break;case c_.HTTP_ERROR:const h=l.getStatus();if(F(rn,`RPC '${e}' ${s} failed with status:`,h,"response text:",l.getResponseText()),h>0){let d=l.getResponseJson();Array.isArray(d)&&(d=d[0]);const f=d==null?void 0:d.error;if(f&&f.status&&f.message){const p=function(_){const y=_.toLowerCase().replace(/_/g,"-");return Object.values(C).indexOf(y)>=0?y:C.UNKNOWN}(f.status);a(new M(p,f.message))}else a(new M(C.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new M(C.UNAVAILABLE,"Connection failed."));break;default:te()}}finally{F(rn,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);F(rn,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",c,r,15)})}Fo(e,n,r){const i=p_(),s=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=iG(),a=sG(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Do(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const u=s.join("");F(rn,`Creating RPC '${e}' stream ${i}: ${u}`,l);const h=o.createWebChannel(u,l);let d=!1,f=!1;const p=new hY({lo:_=>{f?F(rn,`Not sending because RPC '${e}' stream ${i} is closed:`,_):(d||(F(rn,`Opening RPC '${e}' stream ${i} transport.`),h.open(),d=!0),F(rn,`RPC '${e}' stream ${i} sending:`,_),h.send(_))},ho:()=>h.close()}),g=(_,y,m)=>{_.listen(y,v=>{try{m(v)}catch(w){setTimeout(()=>{throw w},0)}})};return g(h,af.EventType.OPEN,()=>{f||F(rn,`RPC '${e}' stream ${i} transport opened.`)}),g(h,af.EventType.CLOSE,()=>{f||(f=!0,F(rn,`RPC '${e}' stream ${i} transport closed`),p.Vo())}),g(h,af.EventType.ERROR,_=>{f||(f=!0,xr(rn,`RPC '${e}' stream ${i} transport errored:`,_),p.Vo(new M(C.UNAVAILABLE,"The operation could not be completed")))}),g(h,af.EventType.MESSAGE,_=>{var y;if(!f){const m=_.data[0];oe(!!m);const v=m,w=v.error||((y=v[0])===null||y===void 0?void 0:y.error);if(w){F(rn,`RPC '${e}' stream ${i} received error:`,w);const S=w.status;let E=function($){const L=xt[$];if(L!==void 0)return gO(L)}(S),T=w.message;E===void 0&&(E=C.INTERNAL,T="Unknown error status: "+S+" with message "+w.message),f=!0,p.Vo(new M(E,T)),h.close()}else F(rn,`RPC '${e}' stream ${i} received:`,m),p.mo(m)}}),g(a,aG.STAT_EVENT,_=>{_.stat===gI.PROXY?F(rn,`RPC '${e}' stream ${i} detected buffering proxy`):_.stat===gI.NOPROXY&&F(rn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{p.Ro()},0),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XO(){return typeof window<"u"?window:null}function Xf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sd(t){return new wQ(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R1{constructor(e,n,r=1e3,i=1.5,s=6e4){this.oi=e,this.timerId=n,this.Mo=r,this.xo=i,this.Oo=s,this.No=0,this.Lo=null,this.Bo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();const n=Math.floor(this.No+this.Qo()),r=Math.max(0,Date.now()-this.Bo),i=Math.max(0,n-r);i>0&&F("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.No} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Lo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Bo=Date.now(),e())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){this.Lo!==null&&(this.Lo.skipDelay(),this.Lo=null)}cancel(){this.Lo!==null&&(this.Lo.cancel(),this.Lo=null)}Qo(){return(Math.random()-.5)*this.No}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JO{constructor(e,n,r,i,s,o,a,l){this.oi=e,this.$o=r,this.Uo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new R1(e,n)}Ho(){return this.state===1||this.state===5||this.Jo()}Jo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Yo()}async stop(){this.Ho()&&await this.close(0)}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&this.Go===null&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(e){this.n_(),this.stream.send(e)}async e_(){if(this.Jo())return this.close(0)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}async close(e,n){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,e!==4?this.jo.reset():n&&n.code===C.RESOURCE_EXHAUSTED?(Et(n.toString()),Et("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):n&&n.code===C.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.To(n)}i_(){}auth(){this.state=1;const e=this.s_(this.Wo),n=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Wo===n&&this.o_(r,i)},r=>{e(()=>{const i=new M(C.UNKNOWN,"Fetching auth token failed: "+r.message);return this.__(i)})})}o_(e,n){const r=this.s_(this.Wo);this.stream=this.a_(e,n),this.stream.Po(()=>{r(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(i=>{r(()=>this.__(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Yo(){this.state=5,this.jo.qo(async()=>{this.state=0,this.start()})}__(e){return F("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}s_(e){return n=>{this.oi.enqueueAndForget(()=>this.Wo===e?n():(F("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class fY extends JO{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}a_(e,n){return this.connection.Fo("Listen",e,n)}onMessage(e){this.jo.reset();const n=EQ(this.serializer,e),r=function(s){if(!("targetChange"in s))return ae.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ae.min():o.readTime?It(o.readTime):ae.min()}(e);return this.listener.u_(n,r)}c_(e){const n={};n.database=p0(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=tg(l)?{documents:IO(s,l)}:{query:xO(s,l).ut},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=vO(s,o.resumeToken);const c=d0(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(ae.min())>0){a.readTime=Il(s,o.snapshotVersion.toTimestamp());const c=d0(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=IQ(this.serializer,e);r&&(n.labels=r),this.t_(n)}l_(e){const n={};n.database=p0(this.serializer),n.removeTarget=e,this.t_(n)}}class pY extends JO{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,n){return this.connection.Fo("Write",e,n)}onMessage(e){if(oe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();const n=TQ(e.writeResults,e.commitTime),r=It(e.commitTime);return this.listener.T_(r,n)}return oe(!e.writeResults||e.writeResults.length===0),this.h_=!0,this.listener.E_()}d_(){const e={};e.database=p0(this.serializer),this.t_(e)}I_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Th(this.serializer,r))};this.t_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gY extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.A_=!1}R_(){if(this.A_)throw new M(C.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,n,r,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.So(e,f0(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===C.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new M(C.UNKNOWN,s.toString())})}vo(e,n,r,i,s){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.vo(e,f0(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===C.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new M(C.UNKNOWN,o.toString())})}terminate(){this.A_=!0,this.connection.terminate()}}class mY{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){this.m_===0&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(e){this.state==="Online"?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.y_("Offline")))}set(e){this.b_(),this.m_=0,e==="Online"&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(Et(n),this.g_=!1):F("OnlineStateTracker",n)}b_(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yY{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=s,this.M_.io(o=>{r.enqueueAndForget(async()=>{js(this)&&(F("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=Q(l);c.v_.add(4),await ec(c),c.x_.set("Unknown"),c.v_.delete(4),await Ed(c)}(this))})}),this.x_=new mY(r,i)}}async function Ed(t){if(js(t))for(const e of t.F_)await e(!0)}async function ec(t){for(const e of t.F_)await e(!1)}function Bm(t,e){const n=Q(t);n.C_.has(e.targetId)||(n.C_.set(e.targetId,e),P1(n)?k1(n):nc(n).Jo()&&A1(n,e))}function Al(t,e){const n=Q(t),r=nc(n);n.C_.delete(e),r.Jo()&&ZO(n,e),n.C_.size===0&&(r.Jo()?r.Xo():js(n)&&n.x_.set("Unknown"))}function A1(t,e){if(t.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ae.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}nc(t).c_(e)}function ZO(t,e){t.O_.Oe(e),nc(t).l_(e)}function k1(t){t.O_=new mQ({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.C_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),nc(t).start(),t.x_.p_()}function P1(t){return js(t)&&!nc(t).Ho()&&t.C_.size>0}function js(t){return Q(t).v_.size===0}function eL(t){t.O_=void 0}async function _Y(t){t.C_.forEach((e,n)=>{A1(t,e)})}async function vY(t,e){eL(t),P1(t)?(t.x_.S_(e),k1(t)):t.x_.set("Unknown")}async function wY(t,e,n){if(t.x_.set("Online"),e instanceof _O&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.C_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.C_.delete(a),i.O_.removeTarget(a))}(t,e)}catch(r){F("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await ug(t,r)}else if(e instanceof Yf?t.O_.$e(e):e instanceof yO?t.O_.Je(e):t.O_.Ge(e),!n.isEqual(ae.min()))try{const r=await HO(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.O_.it(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=s.C_.get(c);u&&s.C_.set(c,u.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const u=s.C_.get(l);if(!u)return;s.C_.set(l,u.withResumeToken(Ot.EMPTY_BYTE_STRING,u.snapshotVersion)),ZO(s,l);const h=new fi(u.target,l,c,u.sequenceNumber);A1(s,h)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){F("RemoteStore","Failed to raise snapshot:",r),await ug(t,r)}}async function ug(t,e,n){if(!Us(e))throw e;t.v_.add(1),await ec(t),t.x_.set("Offline"),n||(n=()=>HO(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{F("RemoteStore","Retrying IndexedDB access"),await n(),t.v_.delete(1),await Ed(t)})}function tL(t,e){return e().catch(n=>ug(t,n,e))}async function tc(t){const e=Q(t),n=Ts(e);let r=e.D_.length>0?e.D_[e.D_.length-1].batchId:-1;for(;bY(e);)try{const i=await oY(e.localStore,r);if(i===null){e.D_.length===0&&n.Xo();break}r=i.batchId,SY(e,i)}catch(i){await ug(e,i)}nL(e)&&rL(e)}function bY(t){return js(t)&&t.D_.length<10}function SY(t,e){t.D_.push(e);const n=Ts(t);n.Jo()&&n.P_&&n.I_(e.mutations)}function nL(t){return js(t)&&!Ts(t).Ho()&&t.D_.length>0}function rL(t){Ts(t).start()}async function EY(t){Ts(t).d_()}async function TY(t){const e=Ts(t);for(const n of t.D_)e.I_(n.mutations)}async function IY(t,e,n){const r=t.D_.shift(),i=g1.from(r,e,n);await tL(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await tc(t)}async function xY(t,e){e&&Ts(t).P_&&await async function(r,i){if(function(o){return pO(o)&&o!==C.ABORTED}(i.code)){const s=r.D_.shift();Ts(r).Zo(),await tL(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await tc(r)}}(t,e),nL(t)&&rL(t)}async function cx(t,e){const n=Q(t);n.asyncQueue.verifyOperationInProgress(),F("RemoteStore","RemoteStore received new credentials");const r=js(n);n.v_.add(3),await ec(n),r&&n.x_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.v_.delete(3),await Ed(n)}async function w0(t,e){const n=Q(t);e?(n.v_.delete(2),await Ed(n)):e||(n.v_.add(2),await ec(n),n.x_.set("Unknown"))}function nc(t){return t.N_||(t.N_=function(n,r,i){const s=Q(n);return s.R_(),new fY(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:_Y.bind(null,t),To:vY.bind(null,t),u_:wY.bind(null,t)}),t.F_.push(async e=>{e?(t.N_.Zo(),P1(t)?k1(t):t.x_.set("Unknown")):(await t.N_.stop(),eL(t))})),t.N_}function Ts(t){return t.L_||(t.L_=function(n,r,i){const s=Q(n);return s.R_(),new pY(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:EY.bind(null,t),To:xY.bind(null,t),E_:TY.bind(null,t),T_:IY.bind(null,t)}),t.F_.push(async e=>{e?(t.L_.Zo(),await tc(t)):(await t.L_.stop(),t.D_.length>0&&(F("RemoteStore",`Stopping write stream with ${t.D_.length} pending writes`),t.D_=[]))})),t.L_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C1{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Bt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new C1(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new M(C.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function rc(t,e){if(Et("AsyncQueue",`${e}: ${t}`),Us(t))return new M(C.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl{constructor(e){this.comparator=e?(n,r)=>e(n,r)||K.comparator(n.key,r.key):(n,r)=>K.comparator(n.key,r.key),this.keyedMap=Kc(),this.sortedSet=new He(this.comparator)}static emptySet(e){return new rl(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof rl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new rl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ux{constructor(){this.B_=new He(K.comparator)}track(e){const n=e.doc.key,r=this.B_.get(n);r?e.type!==0&&r.type===3?this.B_=this.B_.insert(n,e):e.type===3&&r.type!==1?this.B_=this.B_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.B_=this.B_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.B_=this.B_.remove(n):e.type===1&&r.type===2?this.B_=this.B_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):te():this.B_=this.B_.insert(n,e)}k_(){const e=[];return this.B_.inorderTraversal((n,r)=>{e.push(r)}),e}}class kl{constructor(e,n,r,i,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new kl(e,n,rl.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&yd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RY{constructor(){this.q_=void 0,this.Q_=[]}K_(){return this.Q_.some(e=>e.U_())}}class AY{constructor(){this.queries=new Bs(e=>ZD(e),yd),this.onlineState="Unknown",this.W_=new Set}}async function N1(t,e){const n=Q(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.K_()&&e.U_()&&(r=2):(s=new RY,r=e.U_()?0:1);try{switch(r){case 0:s.q_=await n.onListen(i,!0);break;case 1:s.q_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=rc(o,`Initialization of query '${Ea(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.Q_.push(e),e.G_(n.onlineState),s.q_&&e.z_(s.q_)&&O1(n)}async function D1(t,e){const n=Q(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.Q_.indexOf(e);o>=0&&(s.Q_.splice(o,1),s.Q_.length===0?i=e.U_()?0:1:!s.K_()&&e.U_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function kY(t,e){const n=Q(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.Q_)a.z_(i)&&(r=!0);o.q_=i}}r&&O1(n)}function PY(t,e,n){const r=Q(t),i=r.queries.get(e);if(i)for(const s of i.Q_)s.onError(n);r.queries.delete(e)}function O1(t){t.W_.forEach(e=>{e.next()})}var b0,hx;(hx=b0||(b0={})).j_="default",hx.Cache="cache";class L1{constructor(e,n,r){this.query=e,this.H_=n,this.J_=!1,this.Y_=null,this.onlineState="Unknown",this.options=r||{}}z_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new kl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.J_?this.Z_(e)&&(this.H_.next(e),n=!0):this.X_(e,this.onlineState)&&(this.ea(e),n=!0),this.Y_=e,n}onError(e){this.H_.error(e)}G_(e){this.onlineState=e;let n=!1;return this.Y_&&!this.J_&&this.X_(this.Y_,e)&&(this.ea(this.Y_),n=!0),n}X_(e,n){if(!e.fromCache||!this.U_())return!0;const r=n!=="Offline";return(!this.options.ta||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Z_(e){if(e.docChanges.length>0)return!0;const n=this.Y_&&this.Y_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ea(e){e=kl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.J_=!0,this.H_.next(e)}U_(){return this.options.source!==b0.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CY{constructor(e,n){this.na=e,this.byteLength=n}ra(){return"metadata"in this.na}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dx{constructor(e){this.serializer=e}Ps(e){return Kr(this.serializer,e)}Is(e){return e.metadata.exists?TO(this.serializer,e.document,!1):Ge.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return It(e)}}class NY{constructor(e,n,r){this.ia=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=iL(e)}sa(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.na.namedQuery)this.queries.push(e.na.namedQuery);else if(e.na.documentMetadata){this.documents.push({metadata:e.na.documentMetadata}),e.na.documentMetadata.exists||++n;const r=xe.fromString(e.na.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.na.document&&(this.documents[this.documents.length-1].document=e.na.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}oa(e){const n=new Map,r=new dx(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.Ps(i.metadata.name);for(const o of i.metadata.queries){const a=(n.get(o)||ve()).add(s);n.set(o,a)}}return n}async complete(){const e=await aY(this.localStore,new dx(this.serializer),this.documents,this.ia.id),n=this.oa(this.documents);for(const r of this.queries)await lY(this.localStore,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,_a:this.collectionGroups,aa:e}}}function iL(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sL{constructor(e){this.key=e}}class oL{constructor(e){this.key=e}}class aL{constructor(e,n){this.query=e,this.ua=n,this.ca=null,this.hasCachedResults=!1,this.current=!1,this.la=ve(),this.mutatedKeys=ve(),this.ha=tO(e),this.Pa=new rl(this.ha)}get Ia(){return this.ua}Ta(e,n){const r=n?n.Ea:new ux,i=n?n.Pa:this.Pa;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,h)=>{const d=i.get(u),f=_d(this.query,h)?h:null,p=!!d&&this.mutatedKeys.has(d.key),g=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let _=!1;d&&f?d.data.isEqual(f.data)?p!==g&&(r.track({type:3,doc:f}),_=!0):this.da(d,f)||(r.track({type:2,doc:f}),_=!0,(l&&this.ha(f,l)>0||c&&this.ha(f,c)<0)&&(a=!0)):!d&&f?(r.track({type:0,doc:f}),_=!0):d&&!f&&(r.track({type:1,doc:d}),_=!0,(l||c)&&(a=!0)),_&&(f?(o=o.add(f),s=g?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),r.track({type:1,doc:u})}return{Pa:o,Ea:r,Xi:a,mutatedKeys:s}}da(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Pa;this.Pa=e.Pa,this.mutatedKeys=e.mutatedKeys;const o=e.Ea.k_();o.sort((u,h)=>function(f,p){const g=_=>{switch(_){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return te()}};return g(f)-g(p)}(u.type,h.type)||this.ha(u.doc,h.doc)),this.Aa(r),i=i!=null&&i;const a=n&&!i?this.Ra():[],l=this.la.size===0&&this.current&&!i?1:0,c=l!==this.ca;return this.ca=l,o.length!==0||c?{snapshot:new kl(this.query,e.Pa,s,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),Va:a}:{Va:a}}G_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Pa:this.Pa,Ea:new ux,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{Va:[]}}ma(e){return!this.ua.has(e)&&!!this.Pa.has(e)&&!this.Pa.get(e).hasLocalMutations}Aa(e){e&&(e.addedDocuments.forEach(n=>this.ua=this.ua.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ua=this.ua.delete(n)),this.current=e.current)}Ra(){if(!this.current)return[];const e=this.la;this.la=ve(),this.Pa.forEach(r=>{this.ma(r.key)&&(this.la=this.la.add(r.key))});const n=[];return e.forEach(r=>{this.la.has(r)||n.push(new oL(r))}),this.la.forEach(r=>{e.has(r)||n.push(new sL(r))}),n}fa(e){this.ua=e.hs,this.la=ve();const n=this.Ta(e.documents);return this.applyChanges(n,!0)}ga(){return kl.fromInitialDocuments(this.query,this.Pa,this.mutatedKeys,this.ca===0,this.hasCachedResults)}}class DY{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class OY{constructor(e){this.key=e,this.pa=!1}}class LY{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.ya={},this.wa=new Bs(a=>ZD(a),yd),this.Sa=new Map,this.ba=new Set,this.Da=new He(K.comparator),this.Ca=new Map,this.va=new S1,this.Fa={},this.Ma=new Map,this.xa=Ho.Ln(),this.onlineState="Unknown",this.Oa=void 0}get isPrimaryClient(){return this.Oa===!0}}async function MY(t,e,n=!0){const r=jm(t);let i;const s=r.wa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ga()):i=await lL(r,e,n,!0),i}async function VY(t,e){const n=jm(t);await lL(n,e,!0,!1)}async function lL(t,e,n,r){const i=await xl(t.localStore,vn(e)),s=i.targetId,o=n?t.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=await M1(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&Bm(t.remoteStore,i),a}async function M1(t,e,n,r,i){t.Na=(h,d,f)=>async function(g,_,y,m){let v=_.view.Ta(y);v.Xi&&(v=await ag(g.localStore,_.query,!1).then(({documents:T})=>_.view.Ta(T,v)));const w=m&&m.targetChanges.get(_.targetId),S=m&&m.targetMismatches.get(_.targetId)!=null,E=_.view.applyChanges(v,g.isPrimaryClient,w,S);return S0(g,_.targetId,E.Va),E.snapshot}(t,h,d,f);const s=await ag(t.localStore,e,!0),o=new aL(e,s.hs),a=o.Ta(s.documents),l=bd.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,l);S0(t,n,c.Va);const u=new DY(e,n,o);return t.wa.set(e,u),t.Sa.has(n)?t.Sa.get(n).push(e):t.Sa.set(n,[e]),c.snapshot}async function FY(t,e,n){const r=Q(t),i=r.wa.get(e),s=r.Sa.get(i.targetId);if(s.length>1)return r.Sa.set(i.targetId,s.filter(o=>!yd(o,e))),void r.wa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Rl(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Al(r.remoteStore,i.targetId),Pl(r,i.targetId)}).catch($s)):(Pl(r,i.targetId),await Rl(r.localStore,i.targetId,!0))}async function $Y(t,e){const n=Q(t),r=n.wa.get(e),i=n.Sa.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Al(n.remoteStore,r.targetId))}async function UY(t,e,n){const r=U1(t);try{const i=await function(o,a){const l=Q(o),c=ot.now(),u=a.reduce((f,p)=>f.add(p.key),ve());let h,d;return l.persistence.runTransaction("Locally write mutations","readwrite",f=>{let p=Nn(),g=ve();return l.os.getEntries(f,u).next(_=>{p=_,p.forEach((y,m)=>{m.isValidDocument()||(g=g.add(y))})}).next(()=>l.localDocuments.getOverlayedDocuments(f,p)).next(_=>{h=_;const y=[];for(const m of a){const v=fQ(m,h.get(m.key).overlayedDocument);v!=null&&y.push(new Di(m.key,v,WD(v.value.mapValue),st.exists(!0)))}return l.mutationQueue.addMutationBatch(f,c,y,a)}).next(_=>{d=_;const y=_.applyToLocalDocumentSet(h,g);return l.documentOverlayCache.saveOverlays(f,_.batchId,y)})}).then(()=>({batchId:d.batchId,changes:rO(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.Fa[o.currentUser.toKey()];c||(c=new He(me)),c=c.insert(a,l),o.Fa[o.currentUser.toKey()]=c}(r,i.batchId,n),await Oi(r,i.changes),await tc(r.remoteStore)}catch(i){const s=rc(i,"Failed to persist write");n.reject(s)}}async function cL(t,e){const n=Q(t);try{const r=await sY(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Ca.get(s);o&&(oe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.pa=!0:i.modifiedDocuments.size>0?oe(o.pa):i.removedDocuments.size>0&&(oe(o.pa),o.pa=!1))}),await Oi(n,r,e)}catch(r){await $s(r)}}function fx(t,e,n){const r=Q(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.wa.forEach((s,o)=>{const a=o.view.G_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=Q(o);l.onlineState=a;let c=!1;l.queries.forEach((u,h)=>{for(const d of h.Q_)d.G_(a)&&(c=!0)}),c&&O1(l)}(r.eventManager,e),i.length&&r.ya.u_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function BY(t,e,n){const r=Q(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Ca.get(e),s=i&&i.key;if(s){let o=new He(K.comparator);o=o.insert(s,Ge.newNoDocument(s,ae.min()));const a=ve().add(s),l=new wd(ae.min(),new Map,new He(me),o,a);await cL(r,l),r.Da=r.Da.remove(s),r.Ca.delete(e),$1(r)}else await Rl(r.localStore,e,!1).then(()=>Pl(r,e,n)).catch($s)}async function jY(t,e){const n=Q(t),r=e.batch.batchId;try{const i=await iY(n.localStore,e);F1(n,r,null),V1(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Oi(n,i)}catch(i){await $s(i)}}async function zY(t,e,n){const r=Q(t);try{const i=await function(o,a){const l=Q(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,a).next(h=>(oe(h!==null),u=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(r.localStore,e);F1(r,e,n),V1(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Oi(r,i)}catch(i){await $s(i)}}async function WY(t,e){const n=Q(t);js(n.remoteStore)||F("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(o){const a=Q(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",l=>a.mutationQueue.getHighestUnacknowledgedBatchId(l))}(n.localStore);if(r===-1)return void e.resolve();const i=n.Ma.get(r)||[];i.push(e),n.Ma.set(r,i)}catch(r){const i=rc(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}function V1(t,e){(t.Ma.get(e)||[]).forEach(n=>{n.resolve()}),t.Ma.delete(e)}function F1(t,e,n){const r=Q(t);let i=r.Fa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Fa[r.currentUser.toKey()]=i}}function Pl(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Sa.get(e))t.wa.delete(r),n&&t.ya.La(r,n);t.Sa.delete(e),t.isPrimaryClient&&t.va.Vr(e).forEach(r=>{t.va.containsKey(r)||uL(t,r)})}function uL(t,e){t.ba.delete(e.path.canonicalString());const n=t.Da.get(e);n!==null&&(Al(t.remoteStore,n),t.Da=t.Da.remove(e),t.Ca.delete(n),$1(t))}function S0(t,e,n){for(const r of n)r instanceof sL?(t.va.addReference(r.key,e),HY(t,r)):r instanceof oL?(F("SyncEngine","Document no longer in limbo: "+r.key),t.va.removeReference(r.key,e),t.va.containsKey(r.key)||uL(t,r.key)):te()}function HY(t,e){const n=e.key,r=n.path.canonicalString();t.Da.get(n)||t.ba.has(r)||(F("SyncEngine","New document in limbo: "+n),t.ba.add(r),$1(t))}function $1(t){for(;t.ba.size>0&&t.Da.size<t.maxConcurrentLimboResolutions;){const e=t.ba.values().next().value;t.ba.delete(e);const n=new K(xe.fromString(e)),r=t.xa.next();t.Ca.set(r,new OY(n)),t.Da=t.Da.insert(n,r),Bm(t.remoteStore,new fi(vn(Xl(n.path)),r,"TargetPurposeLimboResolution",Pn._e))}}async function Oi(t,e,n){const r=Q(t),i=[],s=[],o=[];r.wa.isEmpty()||(r.wa.forEach((a,l)=>{o.push(r.Na(l,e,n).then(c=>{if((c||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,c!=null&&c.fromCache?"not-current":"current"),c){i.push(c);const u=I1.Ki(l.targetId,c);s.push(u)}}))}),await Promise.all(o),r.ya.u_(i),await async function(l,c){const u=Q(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>k.forEach(c,d=>k.forEach(d.qi,f=>u.persistence.referenceDelegate.addReference(h,d.targetId,f)).next(()=>k.forEach(d.Qi,f=>u.persistence.referenceDelegate.removeReference(h,d.targetId,f)))))}catch(h){if(!Us(h))throw h;F("LocalStore","Failed to update sequence numbers: "+h)}for(const h of c){const d=h.targetId;if(!h.fromCache){const f=u.ns.get(d),p=f.snapshotVersion,g=f.withLastLimboFreeSnapshotVersion(p);u.ns=u.ns.insert(d,g)}}}(r.localStore,s))}async function qY(t,e){const n=Q(t);if(!n.currentUser.isEqual(e)){F("SyncEngine","User change. New user:",e.toKey());const r=await WO(n.localStore,e);n.currentUser=e,function(s,o){s.Ma.forEach(a=>{a.forEach(l=>{l.reject(new M(C.CANCELLED,o))})}),s.Ma.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Oi(n,r.us)}}function KY(t,e){const n=Q(t),r=n.Ca.get(e);if(r&&r.pa)return ve().add(r.key);{let i=ve();const s=n.Sa.get(e);if(!s)return i;for(const o of s){const a=n.wa.get(o);i=i.unionWith(a.view.Ia)}return i}}async function GY(t,e){const n=Q(t),r=await ag(n.localStore,e.query,!0),i=e.view.fa(r);return n.isPrimaryClient&&S0(n,e.targetId,i.Va),i}async function QY(t,e){const n=Q(t);return GO(n.localStore,e).then(r=>Oi(n,r))}async function YY(t,e,n,r){const i=Q(t),s=await function(a,l){const c=Q(a),u=Q(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",h=>u.vn(h,l).next(d=>d?c.localDocuments.getDocuments(h,d):k.resolve(null)))}(i.localStore,e);s!==null?(n==="pending"?await tc(i.remoteStore):n==="acknowledged"||n==="rejected"?(F1(i,e,r||null),V1(i,e),function(a,l){Q(Q(a).mutationQueue).Mn(l)}(i.localStore,e)):te(),await Oi(i,s)):F("SyncEngine","Cannot apply mutation batch with id: "+e)}async function XY(t,e){const n=Q(t);if(jm(n),U1(n),e===!0&&n.Oa!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),i=await px(n,r.toArray());n.Oa=!0,await w0(n.remoteStore,!0);for(const s of i)Bm(n.remoteStore,s)}else if(e===!1&&n.Oa!==!1){const r=[];let i=Promise.resolve();n.Sa.forEach((s,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(Pl(n,o),Rl(n.localStore,o,!0))),Al(n.remoteStore,o)}),await i,await px(n,r),function(o){const a=Q(o);a.Ca.forEach((l,c)=>{Al(a.remoteStore,c)}),a.va.mr(),a.Ca=new Map,a.Da=new He(K.comparator)}(n),n.Oa=!1,await w0(n.remoteStore,!1)}}async function px(t,e,n){const r=Q(t),i=[],s=[];for(const o of e){let a;const l=r.Sa.get(o);if(l&&l.length!==0){a=await xl(r.localStore,vn(l[0]));for(const c of l){const u=r.wa.get(c),h=await GY(r,u);h.snapshot&&s.push(h.snapshot)}}else{const c=await KO(r.localStore,o);a=await xl(r.localStore,c),await M1(r,hL(c),o,!1,a.resumeToken)}i.push(a)}return r.ya.u_(s),i}function hL(t){return JD(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function JY(t){return function(n){return Q(Q(n).persistence).Bi()}(Q(t).localStore)}async function ZY(t,e,n,r){const i=Q(t);if(i.Oa)return void F("SyncEngine","Ignoring unexpected query state notification.");const s=i.Sa.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const o=await GO(i.localStore,eO(s[0])),a=wd.createSynthesizedRemoteEventForCurrentChange(e,n==="current",Ot.EMPTY_BYTE_STRING);await Oi(i,o,a);break}case"rejected":await Rl(i.localStore,e,!0),Pl(i,e,r);break;default:te()}}async function eX(t,e,n){const r=jm(t);if(r.Oa){for(const i of e){if(r.Sa.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){F("SyncEngine","Adding an already active target "+i);continue}const s=await KO(r.localStore,i),o=await xl(r.localStore,s);await M1(r,hL(s),o.targetId,!1,o.resumeToken),Bm(r.remoteStore,o)}for(const i of n)r.Sa.has(i)&&await Rl(r.localStore,i,!1).then(()=>{Al(r.remoteStore,i),Pl(r,i)}).catch($s)}}function jm(t){const e=Q(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=cL.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=KY.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=BY.bind(null,e),e.ya.u_=kY.bind(null,e.eventManager),e.ya.La=PY.bind(null,e.eventManager),e}function U1(t){const e=Q(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=jY.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=zY.bind(null,e),e}function tX(t,e,n){const r=Q(t);(async function(s,o,a){try{const l=await o.getMetadata();if(await function(f,p){const g=Q(f),_=It(p.createTime);return g.persistence.runTransaction("hasNewerBundle","readonly",y=>g.$r.getBundleMetadata(y,p.id)).then(y=>!!y&&y.createTime.compareTo(_)>=0)}(s.localStore,l))return await o.close(),a._completeWith(function(f){return{taskState:"Success",documentsLoaded:f.totalDocuments,bytesLoaded:f.totalBytes,totalDocuments:f.totalDocuments,totalBytes:f.totalBytes}}(l)),Promise.resolve(new Set);a._updateProgress(iL(l));const c=new NY(l,s.localStore,o.serializer);let u=await o.Ba();for(;u;){const d=await c.sa(u);d&&a._updateProgress(d),u=await o.Ba()}const h=await c.complete();return await Oi(s,h.aa,void 0),await function(f,p){const g=Q(f);return g.persistence.runTransaction("Save bundle","readwrite",_=>g.$r.saveBundleMetadata(_,p))}(s.localStore,l),a._completeWith(h.progress),Promise.resolve(h._a)}catch(l){return xr("SyncEngine",`Loading bundle failed with ${l}`),a._failWith(l),Promise.resolve(new Set)}})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}class E0{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Sd(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return zO(this.persistence,new jO,e.initialUser,this.serializer)}createPersistence(e){return new BO(Um.Hr,this.serializer)}createSharedClientState(e){return new YO}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class dL extends E0{constructor(e,n,r){super(),this.ka=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.ka.initialize(this,e),await U1(this.ka.syncEngine),await tc(this.ka.remoteStore),await this.persistence.fi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}createLocalStore(e){return zO(this.persistence,new jO,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new BQ(r,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){const r=new TG(n,this.persistence);return new EG(e.asyncQueue,r)}createPersistence(e){const n=T1(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?xn.withCacheSize(this.cacheSizeBytes):xn.DEFAULT;return new E1(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,XO(),Xf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new YO}}class nX extends dL{constructor(e,n){super(e,n,!1),this.ka=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.ka.syncEngine;this.sharedClientState instanceof f_&&(this.sharedClientState.syncEngine={Zs:YY.bind(null,n),Xs:ZY.bind(null,n),eo:eX.bind(null,n),Bi:JY.bind(null,n),Ys:QY.bind(null,n)},await this.sharedClientState.start()),await this.persistence.fi(async r=>{await XY(this.ka.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}createSharedClientState(e){const n=XO();if(!f_.D(n))throw new M(C.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=T1(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new f_(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class B1{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>fx(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=qY.bind(null,this.syncEngine),await w0(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new AY}()}createDatastore(e){const n=Sd(e.databaseInfo.databaseId),r=function(s){return new dY(s)}(e.databaseInfo);return function(s,o,a,l){return new gY(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new yY(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>fx(this.syncEngine,n,0),function(){return lx.D()?new lx:new cY}())}createSyncEngine(e,n){return function(i,s,o,a,l,c,u){const h=new LY(i,s,o,a,l,c);return u&&(h.Oa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e;await async function(r){const i=Q(r);F("RemoteStore","RemoteStore shutting down."),i.v_.add(5),await ec(i),i.M_.shutdown(),i.x_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gx(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.qa(this.observer.next,e)}error(e){this.observer.error?this.qa(this.observer.error,e):Et("Uncaught Error in snapshot listener:",e.toString())}Qa(){this.muted=!0}qa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rX{constructor(e,n){this.Ka=e,this.serializer=n,this.metadata=new Bt,this.buffer=new Uint8Array,this.$a=function(){return new TextDecoder("utf-8")}(),this.Ua().then(r=>{r&&r.ra()?this.metadata.resolve(r.na.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.na)}`))},r=>this.metadata.reject(r))}close(){return this.Ka.cancel()}async getMetadata(){return this.metadata.promise}async Ba(){return await this.getMetadata(),this.Ua()}async Ua(){const e=await this.Wa();if(e===null)return null;const n=this.$a.decode(e),r=Number(n);isNaN(r)&&this.Ga(`length string (${n}) is not valid number`);const i=await this.za(r);return new CY(JSON.parse(i),e.length+r)}ja(){return this.buffer.findIndex(e=>e===123)}async Wa(){for(;this.ja()<0&&!await this.Ha(););if(this.buffer.length===0)return null;const e=this.ja();e<0&&this.Ga("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async za(e){for(;this.buffer.length<e;)await this.Ha()&&this.Ga("Reached the end of bundle when more is expected.");const n=this.$a.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}Ga(e){throw this.Ka.cancel(),new Error(`Invalid bundle format: ${e}`)}async Ha(){const e=await this.Ka.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iX{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new M(C.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(i,s){const o=Q(i),a={documents:s.map(h=>Eh(o.serializer,h))},l=await o.vo("BatchGetDocuments",o.serializer.databaseId,xe.emptyPath(),a,s.length),c=new Map;l.forEach(h=>{const d=SQ(o.serializer,h);c.set(d.key.toString(),d)});const u=[];return s.forEach(h=>{const d=c.get(h.toString());oe(!!d),u.push(d)}),u}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Zl(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const i=K.fromPath(r);this.mutations.push(new f1(i,this.precondition(i)))}),await async function(r,i){const s=Q(r),o={writes:i.map(a=>Th(s.serializer,a))};await s.So("Commit",s.serializer.databaseId,xe.emptyPath(),o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw te();n=ae.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new M(C.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(ae.min())?st.exists(!1):st.updateTime(n):st.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(ae.min()))throw new M(C.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return st.updateTime(n)}return st.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sX{constructor(e,n,r,i,s){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=s,this.Ja=r.maxAttempts,this.jo=new R1(this.asyncQueue,"transaction_retry")}Ya(){this.Ja-=1,this.Za()}Za(){this.jo.qo(async()=>{const e=new iX(this.datastore),n=this.Xa(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.eu(i)}))}).catch(r=>{this.eu(r)})})}Xa(e){try{const n=this.updateFunction(e);return!gd(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}eu(e){this.Ja>0&&this.tu(e)?(this.Ja-=1,this.asyncQueue.enqueueAndForget(()=>(this.Za(),Promise.resolve()))):this.deferred.reject(e)}tu(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!pO(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oX{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ft.UNAUTHENTICATED,this.clientId=PD.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{F("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(F("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new M(C.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Bt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=rc(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Jf(t,e){t.asyncQueue.verifyOperationInProgress(),F("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await WO(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function T0(t,e){t.asyncQueue.verifyOperationInProgress();const n=await j1(t);F("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>cx(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>cx(e.remoteStore,i)),t._onlineComponents=e}function fL(t){return t.name==="FirebaseError"?t.code===C.FAILED_PRECONDITION||t.code===C.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function j1(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){F("FirestoreClient","Using user provided OfflineComponentProvider");try{await Jf(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!fL(n))throw n;xr("Error using user provided cache. Falling back to memory cache: "+n),await Jf(t,new E0)}}else F("FirestoreClient","Using default OfflineComponentProvider"),await Jf(t,new E0);return t._offlineComponents}async function Wm(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(F("FirestoreClient","Using user provided OnlineComponentProvider"),await T0(t,t._uninitializedComponentsProvider._online)):(F("FirestoreClient","Using default OnlineComponentProvider"),await T0(t,new B1))),t._onlineComponents}function pL(t){return j1(t).then(e=>e.persistence)}function z1(t){return j1(t).then(e=>e.localStore)}function gL(t){return Wm(t).then(e=>e.remoteStore)}function W1(t){return Wm(t).then(e=>e.syncEngine)}function aX(t){return Wm(t).then(e=>e.datastore)}async function Cl(t){const e=await Wm(t),n=e.eventManager;return n.onListen=MY.bind(null,e.syncEngine),n.onUnlisten=FY.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=VY.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=$Y.bind(null,e.syncEngine),n}function lX(t){return t.asyncQueue.enqueue(async()=>{const e=await pL(t),n=await gL(t);return e.setNetworkEnabled(!0),function(i){const s=Q(i);return s.v_.delete(0),Ed(s)}(n)})}function cX(t){return t.asyncQueue.enqueue(async()=>{const e=await pL(t),n=await gL(t);return e.setNetworkEnabled(!1),async function(i){const s=Q(i);s.v_.add(0),await ec(s),s.x_.set("Offline")}(n)})}function uX(t,e){const n=new Bt;return t.asyncQueue.enqueueAndForget(async()=>async function(i,s,o){try{const a=await function(c,u){const h=Q(c);return h.persistence.runTransaction("read document","readonly",d=>h.localDocuments.getDocument(d,u))}(i,s);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new M(C.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const l=rc(a,`Failed to get document '${s} from cache`);o.reject(l)}}(await z1(t),e,n)),n.promise}function mL(t,e,n={}){const r=new Bt;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const u=new zm({next:d=>{o.enqueueAndForget(()=>D1(s,h));const f=d.docs.has(a);!f&&d.fromCache?c.reject(new M(C.UNAVAILABLE,"Failed to get document because the client is offline.")):f&&d.fromCache&&l&&l.source==="server"?c.reject(new M(C.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(d)},error:d=>c.reject(d)}),h=new L1(Xl(a.path),u,{includeMetadataChanges:!0,ta:!0});return N1(s,h)}(await Cl(t),t.asyncQueue,e,n,r)),r.promise}function hX(t,e){const n=new Bt;return t.asyncQueue.enqueueAndForget(async()=>async function(i,s,o){try{const a=await ag(i,s,!0),l=new aL(s,a.hs),c=l.Ta(a.documents),u=l.applyChanges(c,!1);o.resolve(u.snapshot)}catch(a){const l=rc(a,`Failed to execute query '${s} against cache`);o.reject(l)}}(await z1(t),e,n)),n.promise}function yL(t,e,n={}){const r=new Bt;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const u=new zm({next:d=>{o.enqueueAndForget(()=>D1(s,h)),d.fromCache&&l.source==="server"?c.reject(new M(C.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(d)},error:d=>c.reject(d)}),h=new L1(a,u,{includeMetadataChanges:!0,ta:!0});return N1(s,h)}(await Cl(t),t.asyncQueue,e,n,r)),r.promise}function dX(t,e){const n=new zm(e);return t.asyncQueue.enqueueAndForget(async()=>function(i,s){Q(i).W_.add(s),s.next()}(await Cl(t),n)),()=>{n.Qa(),t.asyncQueue.enqueueAndForget(async()=>function(i,s){Q(i).W_.delete(s)}(await Cl(t),n))}}function fX(t,e,n,r){const i=function(o,a){let l;return l=typeof o=="string"?mO().encode(o):o,function(u,h){return new rX(u,h)}(function(u,h){if(u instanceof Uint8Array)return gx(u,h);if(u instanceof ArrayBuffer)return gx(new Uint8Array(u),h);if(u instanceof ReadableStream)return u.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(l),a)}(n,Sd(e));t.asyncQueue.enqueueAndForget(async()=>{tX(await W1(t),i,r)})}function pX(t,e){return t.asyncQueue.enqueue(async()=>function(r,i){const s=Q(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.$r.getNamedQuery(o,i))}(await z1(t),e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _L(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mx=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H1(t,e,n){if(!n)throw new M(C.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function vL(t,e,n,r){if(e===!0&&r===!0)throw new M(C.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function yx(t){if(!K.isDocumentKey(t))throw new M(C.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function _x(t){if(K.isDocumentKey(t))throw new M(C.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Hm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":te()}function De(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new M(C.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Hm(t);throw new M(C.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function wL(t,e){if(e<=0)throw new M(C.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vx{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new M(C.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new M(C.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}vL("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=_L((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new M(C.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new M(C.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new M(C.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Td{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new vx({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new M(C.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new M(C.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new vx(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new dG;switch(r.type){case"firstParty":return new mG(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new M(C.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=mx.get(n);r&&(F("ComponentProvider","Removing Datastore"),mx.delete(n),r.terminate())}(this),Promise.resolve()}}function gX(t,e,n,r={}){var i;const s=(t=De(t,Td))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&xr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=Ft.MOCK_USER;else{a=Ez(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new M(C.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Ft(c)}t._authCredentials=new fG(new kD(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wn=class bL{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new bL(this.firestore,e,this._query)}},ht=class SL{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new hs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new SL(this.firestore,e,this._key)}},hs=class EL extends wn{constructor(e,n,r){super(e,n,Xl(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ht(this.firestore,null,new K(e))}withConverter(e){return new EL(this.firestore,e,this._path)}};function TL(t,e,...n){if(t=le(t),H1("collection","path",e),t instanceof Td){const r=xe.fromString(e,...n);return _x(r),new hs(t,null,r)}{if(!(t instanceof ht||t instanceof hs))throw new M(C.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(xe.fromString(e,...n));return _x(r),new hs(t.firestore,null,r)}}function mX(t,e){if(t=De(t,Td),H1("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new M(C.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new wn(t,null,function(r){return new Ni(xe.emptyPath(),r)}(e))}function hg(t,e,...n){if(t=le(t),arguments.length===1&&(e=PD.newId()),H1("doc","path",e),t instanceof Td){const r=xe.fromString(e,...n);return yx(r),new ht(t,null,new K(r))}{if(!(t instanceof ht||t instanceof hs))throw new M(C.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(xe.fromString(e,...n));return yx(r),new ht(t.firestore,t instanceof hs?t.converter:null,new K(r))}}function IL(t,e){return t=le(t),e=le(e),(t instanceof ht||t instanceof hs)&&(e instanceof ht||e instanceof hs)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function xL(t,e){return t=le(t),e=le(e),t instanceof wn&&e instanceof wn&&t.firestore===e.firestore&&yd(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yX{constructor(){this.nu=Promise.resolve(),this.ru=[],this.iu=!1,this.su=[],this.ou=null,this._u=!1,this.au=!1,this.uu=[],this.jo=new R1(this,"async_queue_retry"),this.cu=()=>{const n=Xf();n&&F("AsyncQueue","Visibility state changed to "+n.visibilityState),this.jo.Ko()};const e=Xf();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.cu)}get isShuttingDown(){return this.iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.lu(),this.hu(e)}enterRestrictedMode(e){if(!this.iu){this.iu=!0,this.au=e||!1;const n=Xf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.cu)}}enqueue(e){if(this.lu(),this.iu)return new Promise(()=>{});const n=new Bt;return this.hu(()=>this.iu&&this.au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ru.push(e),this.Pu()))}async Pu(){if(this.ru.length!==0){try{await this.ru[0](),this.ru.shift(),this.jo.reset()}catch(e){if(!Us(e))throw e;F("AsyncQueue","Operation failed with retryable error: "+e)}this.ru.length>0&&this.jo.qo(()=>this.Pu())}}hu(e){const n=this.nu.then(()=>(this._u=!0,e().catch(r=>{this.ou=r,this._u=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Et("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this._u=!1,r))));return this.nu=n,n}enqueueAfterDelay(e,n,r){this.lu(),this.uu.indexOf(e)>-1&&(n=0);const i=C1.createAndSchedule(this,e,n,r,s=>this.Iu(s));return this.su.push(i),i}lu(){this.ou&&te()}verifyOperationInProgress(){}async Tu(){let e;do e=this.nu,await e;while(e!==this.nu)}Eu(e){for(const n of this.su)if(n.timerId===e)return!0;return!1}du(e){return this.Tu().then(()=>{this.su.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.su)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tu()})}Au(e){this.uu.push(e)}Iu(e){const n=this.su.indexOf(e);this.su.splice(n,1)}}function I0(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class _X{constructor(){this._progressObserver={},this._taskCompletionResolver=new Bt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vX=-1;let vt=class extends Td{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new yX}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||RL(this),this._firestoreClient.terminate()}};function Ht(t){return t._firestoreClient||RL(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function RL(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,c,u){return new HG(a,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,_L(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new oX(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function wX(t,e){kL(t=De(t,vt));const n=Ht(t);if(n._uninitializedComponentsProvider)throw new M(C.FAILED_PRECONDITION,"SDK cache is already specified.");xr("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=t._freezeSettings(),i=new B1;return AL(n,i,new dL(i,r.cacheSizeBytes,e==null?void 0:e.forceOwnership))}function bX(t){kL(t=De(t,vt));const e=Ht(t);if(e._uninitializedComponentsProvider)throw new M(C.FAILED_PRECONDITION,"SDK cache is already specified.");xr("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings(),r=new B1;return AL(e,r,new nX(r,n.cacheSizeBytes))}function AL(t,e,n){const r=new Bt;return t.asyncQueue.enqueue(async()=>{try{await Jf(t,n),await T0(t,e),r.resolve()}catch(i){const s=i;if(!fL(s))throw s;xr("Error enabling indexeddb cache. Falling back to memory cache: "+s),r.reject(s)}}).then(()=>r.promise)}function SX(t){if(t._initialized&&!t._terminated)throw new M(C.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Bt;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(r){if(!or.D())return Promise.resolve();const i=r+"main";await or.delete(i)}(T1(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}}),e.promise}function EX(t){return function(n){const r=new Bt;return n.asyncQueue.enqueueAndForget(async()=>WY(await W1(n),r)),r.promise}(Ht(t=De(t,vt)))}function TX(t){return lX(Ht(t=De(t,vt)))}function IX(t){return cX(Ht(t=De(t,vt)))}function xX(t,e){const n=Ht(t=De(t,vt)),r=new _X;return fX(n,t._databaseId,e,r),r}function RX(t,e){return pX(Ht(t=De(t,vt)),e).then(n=>n?new wn(t,null,n.query):null)}function kL(t){if(t._initialized||t._terminated)throw new M(C.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Jr(Ot.fromBase64String(e))}catch(n){throw new M(C.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Jr(Ot.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Is=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new M(C.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new it(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ia=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qm{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new M(C.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new M(C.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return me(this._lat,e._lat)||me(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AX=/^__.*__$/;class kX{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Di(e,this.data,this.fieldMask,n,this.fieldTransforms):new Jl(e,this.data,n,this.fieldTransforms)}}class PL{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Di(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function CL(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw te()}}class Km{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Ru(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Vu(){return this.settings.Vu}mu(e){return new Km(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}fu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.mu({path:r,gu:!1});return i.pu(e),i}yu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.mu({path:r,gu:!1});return i.Ru(),i}wu(e){return this.mu({path:void 0,gu:!0})}Su(e){return dg(e,this.settings.methodName,this.settings.bu||!1,this.path,this.settings.Du)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ru(){if(this.path)for(let e=0;e<this.path.length;e++)this.pu(this.path.get(e))}pu(e){if(e.length===0)throw this.Su("Document fields must not be empty");if(CL(this.Vu)&&AX.test(e))throw this.Su('Document fields cannot begin and end with "__"')}}class PX{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Sd(e)}Cu(e,n,r,i=!1){return new Km({Vu:e,methodName:n,Du:r,path:it.emptyPath(),gu:!1,bu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function sa(t){const e=t._freezeSettings(),n=Sd(t._databaseId);return new PX(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Gm(t,e,n,r,i,s={}){const o=t.Cu(s.merge||s.mergeFields?2:0,e,n,i);J1("Data must be an object, but it was:",o,r);const a=OL(r,o);let l,c;if(s.merge)l=new Cn(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const u=[];for(const h of s.mergeFields){const d=x0(e,h,n);if(!o.contains(d))throw new M(C.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);ML(u,d)||u.push(d)}l=new Cn(u),c=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=o.fieldTransforms;return new kX(new Qt(a),l,c)}class Id extends ia{_toFieldTransform(e){if(e.Vu!==2)throw e.Vu===1?e.Su(`${this._methodName}() can only appear at the top level of your update data`):e.Su(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Id}}function NL(t,e,n){return new Km({Vu:3,Du:e.settings.Du,methodName:t._methodName,gu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class q1 extends ia{_toFieldTransform(e){return new vd(e.path,new El)}isEqual(e){return e instanceof q1}}class K1 extends ia{constructor(e,n){super(e),this.vu=n}_toFieldTransform(e){const n=NL(this,e,!0),r=this.vu.map(s=>oa(s,n)),i=new Bo(r);return new vd(e.path,i)}isEqual(e){return e instanceof K1&&Zu(this.vu,e.vu)}}class G1 extends ia{constructor(e,n){super(e),this.vu=n}_toFieldTransform(e){const n=NL(this,e,!0),r=this.vu.map(s=>oa(s,n)),i=new jo(r);return new vd(e.path,i)}isEqual(e){return e instanceof G1&&Zu(this.vu,e.vu)}}class Q1 extends ia{constructor(e,n){super(e),this.Fu=n}_toFieldTransform(e){const n=new Tl(e.serializer,aO(e.serializer,this.Fu));return new vd(e.path,n)}isEqual(e){return e instanceof Q1&&this.Fu===e.Fu}}function Y1(t,e,n,r){const i=t.Cu(1,e,n);J1("Data must be an object, but it was:",i,r);const s=[],o=Qt.empty();ra(r,(l,c)=>{const u=Z1(e,l,n);c=le(c);const h=i.yu(u);if(c instanceof Id)s.push(u);else{const d=oa(c,h);d!=null&&(s.push(u),o.set(u,d))}});const a=new Cn(s);return new PL(o,a,i.fieldTransforms)}function X1(t,e,n,r,i,s){const o=t.Cu(1,e,n),a=[x0(e,r,n)],l=[i];if(s.length%2!=0)throw new M(C.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(x0(e,s[d])),l.push(s[d+1]);const c=[],u=Qt.empty();for(let d=a.length-1;d>=0;--d)if(!ML(c,a[d])){const f=a[d];let p=l[d];p=le(p);const g=o.yu(f);if(p instanceof Id)c.push(f);else{const _=oa(p,g);_!=null&&(c.push(f),u.set(f,_))}}const h=new Cn(c);return new PL(u,h,o.fieldTransforms)}function DL(t,e,n,r=!1){return oa(n,t.Cu(r?4:3,e))}function oa(t,e){if(LL(t=le(t)))return J1("Unsupported field value:",e,t),OL(t,e);if(t instanceof ia)return function(r,i){if(!CL(i.Vu))throw i.Su(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Su(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.gu&&e.Vu!==4)throw e.Su("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=oa(a,i.wu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=le(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return aO(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=ot.fromDate(r);return{timestampValue:Il(i.serializer,s)}}if(r instanceof ot){const s=new ot(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Il(i.serializer,s)}}if(r instanceof qm)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Jr)return{bytesValue:vO(i.serializer,r._byteString)};if(r instanceof ht){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Su(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:_1(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Su(`Unsupported field value: ${Hm(r)}`)}(t,e)}function OL(t,e){const n={};return BD(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ra(t,(r,i)=>{const s=oa(i,e.fu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function LL(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ot||t instanceof qm||t instanceof Jr||t instanceof ht||t instanceof ia)}function J1(t,e,n){if(!LL(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Hm(n);throw r==="an object"?e.Su(t+" a custom object"):e.Su(t+" "+r)}}function x0(t,e,n){if((e=le(e))instanceof Is)return e._internalPath;if(typeof e=="string")return Z1(t,e);throw dg("Field path arguments must be of type string or ",t,!1,void 0,n)}const CX=new RegExp("[~\\*/\\[\\]]");function Z1(t,e,n){if(e.search(CX)>=0)throw dg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Is(...e.split("."))._internalPath}catch{throw dg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function dg(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new M(C.INVALID_ARGUMENT,a+t+l)}function ML(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ih{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ht(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new NX(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Qm("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class NX extends Ih{data(){return super.data()}}function Qm(t,e){return typeof e=="string"?Z1(t,e):e instanceof Is?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VL(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new M(C.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class eS{}class xd extends eS{}function $i(t,e,...n){let r=[];e instanceof eS&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof tS).length,a=s.filter(l=>l instanceof Ym).length;if(o>1||o>0&&a>0)throw new M(C.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Ym extends xd{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Ym(e,n,r)}_apply(e){const n=this._parse(e);return $L(e._query,n),new wn(e.firestore,e.converter,h0(e._query,n))}_parse(e){const n=sa(e.firestore);return function(s,o,a,l,c,u,h){let d;if(c.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new M(C.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){bx(h,u);const f=[];for(const p of h)f.push(wx(l,s,p));d={arrayValue:{values:f}}}else d=wx(l,s,h)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||bx(h,u),d=DL(a,o,h,u==="in"||u==="not-in");return Re.create(c,u,d)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function DX(t,e,n){const r=e,i=Qm("where",t);return Ym._create(i,r,n)}class tS extends eS{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new tS(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Le.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)$L(o,l),o=h0(o,l)}(e._query,n),new wn(e.firestore,e.converter,h0(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class nS extends xd{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new nS(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new M(C.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new M(C.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Sh(s,o)}(e._query,this._field,this._direction);return new wn(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new Ni(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function OX(t,e="asc"){const n=e,r=Qm("orderBy",t);return nS._create(r,n)}class Xm extends xd{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Xm(e,n,r)}_apply(e){return new wn(e.firestore,e.converter,rg(e._query,this._limit,this._limitType))}}function LX(t){return wL("limit",t),Xm._create("limit",t,"F")}function MX(t){return wL("limitToLast",t),Xm._create("limitToLast",t,"L")}class Jm extends xd{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Jm(e,n,r)}_apply(e){const n=FL(e,this.type,this._docOrFields,this._inclusive);return new wn(e.firestore,e.converter,function(i,s){return new Ni(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)}(e._query,n))}}function VX(...t){return Jm._create("startAt",t,!0)}function FX(...t){return Jm._create("startAfter",t,!1)}class Zm extends xd{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Zm(e,n,r)}_apply(e){const n=FL(e,this.type,this._docOrFields,this._inclusive);return new wn(e.firestore,e.converter,function(i,s){return new Ni(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)}(e._query,n))}}function $X(...t){return Zm._create("endBefore",t,!1)}function UX(...t){return Zm._create("endAt",t,!0)}function FL(t,e,n,r){if(n[0]=le(n[0]),n[0]instanceof Ih)return function(s,o,a,l,c){if(!l)throw new M(C.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const u=[];for(const h of nl(s))if(h.field.isKeyField())u.push($o(o,l.key));else{const d=l.data.field(h.field);if(Lm(d))throw new M(C.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+h.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(d===null){const f=h.field.canonicalString();throw new M(C.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${f}' (used as the orderBy) does not exist.`)}u.push(d)}return new Es(u,c)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=sa(t.firestore);return function(o,a,l,c,u,h){const d=o.explicitOrderBy;if(u.length>d.length)throw new M(C.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const f=[];for(let p=0;p<u.length;p++){const g=u[p];if(d[p].field.isKeyField()){if(typeof g!="string")throw new M(C.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof g}`);if(!h1(o)&&g.indexOf("/")!==-1)throw new M(C.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${g}' contains a slash.`);const _=o.path.child(xe.fromString(g));if(!K.isDocumentKey(_))throw new M(C.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${_}' is not because it contains an odd number of segments.`);const y=new K(_);f.push($o(a,y))}else{const _=DL(l,c,g);f.push(_)}}return new Es(f,h)}(t._query,t.firestore._databaseId,i,e,n,r)}}function wx(t,e,n){if(typeof(n=le(n))=="string"){if(n==="")throw new M(C.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!h1(e)&&n.indexOf("/")!==-1)throw new M(C.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(xe.fromString(n));if(!K.isDocumentKey(r))throw new M(C.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return $o(t,new K(r))}if(n instanceof ht)return $o(t,n._key);throw new M(C.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Hm(n)}.`)}function bx(t,e){if(!Array.isArray(t)||t.length===0)throw new M(C.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function $L(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new M(C.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new M(C.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class rS{convertValue(e,n="none"){switch(Fo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return pt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ws(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw te()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ra(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new qm(pt(e.latitude),pt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=c1(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(vh(e));default:return null}}convertTimestamp(e){const n=vs(e);return new ot(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=xe.fromString(e);oe(PO(r));const i=new bs(r.get(1),r.get(3)),s=new K(r.popFirst(5));return i.isEqual(n)||Et(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ey(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class BX extends rS{constructor(e){super(),this.firestore=e}convertBytes(e){return new Jr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ht(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let Ri=class extends Ih{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new xu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Qm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},xu=class extends Ri{data(e={}){return super.data(e)}},xs=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new go(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new xu(this._firestore,this._userDataWriter,r.key,r,new go(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new M(C.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new xu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new go(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new xu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new go(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,u=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:jX(a.type),doc:l,oldIndex:c,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function jX(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return te()}}function UL(t,e){return t instanceof Ri&&e instanceof Ri?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof xs&&e instanceof xs&&t._firestore===e._firestore&&xL(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zX(t){t=De(t,ht);const e=De(t.firestore,vt);return mL(Ht(e),t._key).then(n=>iS(e,t,n))}class aa extends rS{constructor(e){super(),this.firestore=e}convertBytes(e){return new Jr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ht(this.firestore,null,n)}}function WX(t){t=De(t,ht);const e=De(t.firestore,vt),n=Ht(e),r=new aa(e);return uX(n,t._key).then(i=>new Ri(e,r,t._key,i,new go(i!==null&&i.hasLocalMutations,!0),t.converter))}function HX(t){t=De(t,ht);const e=De(t.firestore,vt);return mL(Ht(e),t._key,{source:"server"}).then(n=>iS(e,t,n))}function qX(t){t=De(t,wn);const e=De(t.firestore,vt),n=Ht(e),r=new aa(e);return VL(t._query),yL(n,t._query).then(i=>new xs(e,r,t,i))}function KX(t){t=De(t,wn);const e=De(t.firestore,vt),n=Ht(e),r=new aa(e);return hX(n,t._query).then(i=>new xs(e,r,t,i))}function GX(t){t=De(t,wn);const e=De(t.firestore,vt),n=Ht(e),r=new aa(e);return yL(n,t._query,{source:"server"}).then(i=>new xs(e,r,t,i))}function Sx(t,e,n){t=De(t,ht);const r=De(t.firestore,vt),i=ey(t.converter,e,n);return Rd(r,[Gm(sa(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,st.none())])}function Ex(t,e,n,...r){t=De(t,ht);const i=De(t.firestore,vt),s=sa(i);let o;return o=typeof(e=le(e))=="string"||e instanceof Is?X1(s,"updateDoc",t._key,e,n,r):Y1(s,"updateDoc",t._key,e),Rd(i,[o.toMutation(t._key,st.exists(!0))])}function QX(t){return Rd(De(t.firestore,vt),[new Zl(t._key,st.none())])}function YX(t,e){const n=De(t.firestore,vt),r=hg(t),i=ey(t.converter,e);return Rd(n,[Gm(sa(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,st.exists(!1))]).then(()=>r)}function BL(t,...e){var n,r,i;t=le(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||I0(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(I0(e[o])){const h=e[o];e[o]=(n=h.next)===null||n===void 0?void 0:n.bind(h),e[o+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),e[o+2]=(i=h.complete)===null||i===void 0?void 0:i.bind(h)}let l,c,u;if(t instanceof ht)c=De(t.firestore,vt),u=Xl(t._key.path),l={next:h=>{e[o]&&e[o](iS(c,t,h))},error:e[o+1],complete:e[o+2]};else{const h=De(t,wn);c=De(h.firestore,vt),u=h._query;const d=new aa(c);l={next:f=>{e[o]&&e[o](new xs(c,d,h,f))},error:e[o+1],complete:e[o+2]},VL(t._query)}return function(d,f,p,g){const _=new zm(g),y=new L1(f,_,p);return d.asyncQueue.enqueueAndForget(async()=>N1(await Cl(d),y)),()=>{_.Qa(),d.asyncQueue.enqueueAndForget(async()=>D1(await Cl(d),y))}}(Ht(c),u,a,l)}function XX(t,e){return dX(Ht(t=De(t,vt)),I0(e)?e:{next:e})}function Rd(t,e){return function(r,i){const s=new Bt;return r.asyncQueue.enqueueAndForget(async()=>UY(await W1(r),i,s)),s.promise}(Ht(t),e)}function iS(t,e,n){const r=n.docs.get(e._key),i=new aa(t);return new Ri(t,i,e._key,r,new go(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JX={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ZX=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=sa(e)}set(e,n,r){this._verifyNotCommitted();const i=qi(e,this._firestore),s=ey(i.converter,n,r),o=Gm(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,st.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=qi(e,this._firestore);let o;return o=typeof(n=le(n))=="string"||n instanceof Is?X1(this._dataReader,"WriteBatch.update",s._key,n,r,i):Y1(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,st.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=qi(e,this._firestore);return this._mutations=this._mutations.concat(new Zl(n._key,st.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new M(C.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function qi(t,e){if((t=le(t)).firestore!==e)throw new M(C.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eJ=class extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=sa(n)}get(n){const r=qi(n,this._firestore),i=new BX(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||s.length!==1)return te();const o=s[0];if(o.isFoundDocument())return new Ih(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new Ih(this._firestore,i,r._key,null,r.converter);throw te()})}set(n,r,i){const s=qi(n,this._firestore),o=ey(s.converter,r,i),a=Gm(this._dataReader,"Transaction.set",s._key,o,s.converter!==null,i);return this._transaction.set(s._key,a),this}update(n,r,i,...s){const o=qi(n,this._firestore);let a;return a=typeof(r=le(r))=="string"||r instanceof Is?X1(this._dataReader,"Transaction.update",o._key,r,i,s):Y1(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(n){const r=qi(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=qi(e,this._firestore),r=new aa(this._firestore);return super.get(e).then(i=>new Ri(this._firestore,r,n._key,i._document,new go(!1,!1),n.converter))}};function tJ(t,e,n){t=De(t,vt);const r=Object.assign(Object.assign({},JX),n);return function(s){if(s.maxAttempts<1)throw new M(C.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){const l=new Bt;return s.asyncQueue.enqueueAndForget(async()=>{const c=await aX(s);new sX(s.asyncQueue,c,a,o,l).Ya()}),l.promise}(Ht(t),i=>e(new eJ(t,i)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nJ(){return new Id("deleteField")}function rJ(){return new q1("serverTimestamp")}function iJ(...t){return new K1("arrayUnion",t)}function sJ(...t){return new G1("arrayRemove",t)}function oJ(t){return new Q1("increment",t)}(function(e,n=!0){(function(i){Yl=i})(Ls),ys(new Qr("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new vt(new pG(r.getProvider("auth-internal")),new _G(r.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new M(C.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new bs(c.options.projectId,u)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),qr(mI,"4.5.0",e),qr(mI,"4.5.0","esm2017")})();const aJ="@firebase/firestore-compat",lJ="0.3.27";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sS(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new M("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tx(){if(typeof Uint8Array>"u")throw new M("unimplemented","Uint8Arrays are not available in this environment.")}function Ix(){if(!zG())throw new M("unimplemented","Blobs are unavailable in Firestore in this environment.")}let jL=class R0{constructor(e){this._delegate=e}static fromBase64String(e){return Ix(),new R0(Jr.fromBase64String(e))}static fromUint8Array(e){return Tx(),new R0(Jr.fromUint8Array(e))}toBase64(){return Ix(),this._delegate.toBase64()}toUint8Array(){return Tx(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A0(t){return cJ(t,["next","error","complete"])}function cJ(t,e){if(typeof t!="object"||t===null)return!1;const n=t;for(const r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uJ{enableIndexedDbPersistence(e,n){return wX(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return bX(e._delegate)}clearIndexedDbPersistence(e){return SX(e._delegate)}}class zL{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof bs||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&xr("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){gX(this._delegate,e,n,r)}enableNetwork(){return TX(this._delegate)}disableNetwork(){return IX(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,vL("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return EX(this._delegate)}onSnapshotsInSync(e){return XX(this._delegate,e)}get app(){if(!this._appCompat)throw new M("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Nl(this,TL(this._delegate,e))}catch(n){throw pn(n,"collection()","Firestore.collection()")}}doc(e){try{return new ar(this,hg(this._delegate,e))}catch(n){throw pn(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new fn(this,mX(this._delegate,e))}catch(n){throw pn(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return tJ(this._delegate,n=>e(new WL(this,n)))}batch(){return Ht(this._delegate),new HL(new ZX(this._delegate,e=>Rd(this._delegate,e)))}loadBundle(e){return xX(this._delegate,e)}namedQuery(e){return RX(this._delegate,e).then(n=>n?new fn(this,n):null)}}class ty extends rS{constructor(e){super(),this.firestore=e}convertBytes(e){return new jL(new Jr(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return ar.forKey(n,this.firestore,null)}}function hJ(t){uG(t)}class WL{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new ty(e)}get(e){const n=mo(e);return this._delegate.get(n).then(r=>new xh(this._firestore,new Ri(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){const i=mo(e);return r?(sS("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=mo(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=mo(e);return this._delegate.delete(n),this}}class HL{constructor(e){this._delegate=e}set(e,n,r){const i=mo(e);return r?(sS("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=mo(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=mo(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class qo{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){const r=new xu(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Rh(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const r=qo.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(n);return s||(s=new qo(e,new ty(e),n),i.set(n,s)),s}}qo.INSTANCES=new WeakMap;class ar{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new ty(e)}static forPath(e,n,r){if(e.length%2!==0)throw new M("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ar(n,new ht(n._delegate,r,new K(e)))}static forKey(e,n,r){return new ar(n,new ht(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Nl(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Nl(this.firestore,TL(this._delegate,e))}catch(n){throw pn(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=le(e),e instanceof ht?IL(this._delegate,e):!1}set(e,n){n=sS("DocumentReference.set",n);try{return n?Sx(this._delegate,e,n):Sx(this._delegate,e)}catch(r){throw pn(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?Ex(this._delegate,e):Ex(this._delegate,e,n,...r)}catch(i){throw pn(i,"updateDoc()","DocumentReference.update()")}}delete(){return QX(this._delegate)}onSnapshot(...e){const n=qL(e),r=KL(e,i=>new xh(this.firestore,new Ri(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return BL(this._delegate,n,r)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=WX(this._delegate):(e==null?void 0:e.source)==="server"?n=HX(this._delegate):n=zX(this._delegate),n.then(r=>new xh(this.firestore,new Ri(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new ar(this.firestore,e?this._delegate.withConverter(qo.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function pn(t,e,n){return t.message=t.message.replace(e,n),t}function qL(t){for(const e of t)if(typeof e=="object"&&!A0(e))return e;return{}}function KL(t,e){var n,r;let i;return A0(t[0])?i=t[0]:A0(t[1])?i=t[1]:typeof t[0]=="function"?i={next:t[0],error:t[1],complete:t[2]}:i={next:t[1],error:t[2],complete:t[3]},{next:s=>{i.next&&i.next(e(s))},error:(n=i.error)===null||n===void 0?void 0:n.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}class xh{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new ar(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return UL(this._delegate,e._delegate)}}class Rh extends xh{data(e){const n=this._delegate.data(e);return this._delegate._converter||hG(n!==void 0),n}}class fn{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new ty(e)}where(e,n,r){try{return new fn(this.firestore,$i(this._delegate,DX(e,n,r)))}catch(i){throw pn(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new fn(this.firestore,$i(this._delegate,OX(e,n)))}catch(r){throw pn(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new fn(this.firestore,$i(this._delegate,LX(e)))}catch(n){throw pn(n,"limit()","Query.limit()")}}limitToLast(e){try{return new fn(this.firestore,$i(this._delegate,MX(e)))}catch(n){throw pn(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new fn(this.firestore,$i(this._delegate,VX(...e)))}catch(n){throw pn(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new fn(this.firestore,$i(this._delegate,FX(...e)))}catch(n){throw pn(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new fn(this.firestore,$i(this._delegate,$X(...e)))}catch(n){throw pn(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new fn(this.firestore,$i(this._delegate,UX(...e)))}catch(n){throw pn(n,"endAt()","Query.endAt()")}}isEqual(e){return xL(this._delegate,e._delegate)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=KX(this._delegate):(e==null?void 0:e.source)==="server"?n=GX(this._delegate):n=qX(this._delegate),n.then(r=>new k0(this.firestore,new xs(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const n=qL(e),r=KL(e,i=>new k0(this.firestore,new xs(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return BL(this._delegate,n,r)}withConverter(e){return new fn(this.firestore,e?this._delegate.withConverter(qo.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class dJ{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new Rh(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class k0{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new fn(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Rh(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new dJ(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new Rh(this._firestore,r))})}isEqual(e){return UL(this._delegate,e._delegate)}}class Nl extends fn{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ar(this.firestore,e):null}doc(e){try{return e===void 0?new ar(this.firestore,hg(this._delegate)):new ar(this.firestore,hg(this._delegate,e))}catch(n){throw pn(n,"doc()","CollectionReference.doc()")}}add(e){return YX(this._delegate,e).then(n=>new ar(this.firestore,n))}isEqual(e){return IL(this._delegate,e._delegate)}withConverter(e){return new Nl(this.firestore,e?this._delegate.withConverter(qo.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function mo(t){return De(t,ht)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oS{constructor(...e){this._delegate=new Is(...e)}static documentId(){return new oS(it.keyField().canonicalString())}isEqual(e){return e=le(e),e instanceof Is?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(e){this._delegate=e}static serverTimestamp(){const e=rJ();return e._methodName="FieldValue.serverTimestamp",new ao(e)}static delete(){const e=nJ();return e._methodName="FieldValue.delete",new ao(e)}static arrayUnion(...e){const n=iJ(...e);return n._methodName="FieldValue.arrayUnion",new ao(n)}static arrayRemove(...e){const n=sJ(...e);return n._methodName="FieldValue.arrayRemove",new ao(n)}static increment(e){const n=oJ(e);return n._methodName="FieldValue.increment",new ao(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fJ={Firestore:zL,GeoPoint:qm,Timestamp:ot,Blob:jL,Transaction:WL,WriteBatch:HL,DocumentReference:ar,DocumentSnapshot:xh,Query:fn,QueryDocumentSnapshot:Rh,QuerySnapshot:k0,CollectionReference:Nl,FieldPath:oS,FieldValue:ao,setLogLevel:hJ,CACHE_SIZE_UNLIMITED:vX};function pJ(t,e){t.INTERNAL.registerComponent(new Qr("firestore-compat",n=>{const r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},fJ)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gJ(t){pJ(t,(e,n)=>new zL(e,n,new uJ)),t.registerVersion(aJ,lJ)}gJ(zl);const mJ={apiKey:"AIzaSyBU7bpMsc4MZhNgQUr5fctbKZnOrQGvaFI",authDomain:"webproject-84623.firebaseapp.com",projectId:"webproject-84623",storageBucket:"webproject-84623.appspot.com",messagingSenderId:"597356177781",appId:"1:597356177781:web:39ad9bd19b927870744b3c",measurementId:"G-S7GQ7V2FJC"},yJ=zl.initializeApp(mJ),Ah=yJ.auth();function _J(){const{t}=Jn(),[e,n]=U.useState(!1),[r,i]=U.useState(!1),[s,o]=U.useState(!1),[a,l]=cb(ub),c=["coins","news","compare"],u="block py-2 px-3 text-gray-900 dark:text-white rounded hover:bg-gray-100 md:hover:bg-transparent md:hover:text-blue-700 md:p-0 md:dark:hover:text-blue-400 dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent dark:border-gray-700",h=g=>{l({...a,selectedTab:g})},d=async()=>{try{await DW(Ah)}catch(g){alert(g.message)}};U.useEffect(()=>{switch(localStorage.language){case"en":l({...a,language:"en",languageLogo:ui}),$e.changeLanguage("en");break;case"de":l({...a,language:"de",languageLogo:Ga}),$e.changeLanguage("de");break;case"it":l({...a,language:"it",languageLogo:Qa}),$e.changeLanguage("it");break;case"zh":l({...a,language:"zh",languageLogo:Ya}),$e.changeLanguage("zh");break;default:l({...a,language:"en",languageLogo:ui}),$e.changeLanguage("en")}},[a.language]);function f(g){n(!1),g==="light"?(document.documentElement.classList.remove("dark"),localStorage.theme="light",l({...a,theme:"light"})):(document.documentElement.classList.add("dark"),localStorage.theme="dark",l({...a,theme:"dark"}))}function p(g,_){i(!1),localStorage.language=g,$e.changeLanguage(g),l({...a,language:g,languageLogo:_})}return b.jsx("nav",{className:"bg-white border-gray-200 dark:bg-gray-900",style:{position:"sticky",top:0,zIndex:1e3},children:b.jsxs("div",{className:"flex flex-wrap items-center justify-between mx-auto p-4",children:[b.jsxs("div",{className:"flex items-center space-x-3 rtl:space-x-reverse cursor-pointer",onClick:()=>window.location.replace("/home"),children:[b.jsx("img",{src:ed,alt:"CryptoPulse logo",className:"h-8"}),b.jsx("span",{className:"self-center text-2xl font-semibold whitespace-nowrap dark:text-white",children:t("cryptoPulse")})]}),b.jsxs("div",{className:"flex md:order-2",children:[b.jsxs("button",{type:"button","data-collapse-toggle":"navbar-search","aria-controls":"navbar-search","aria-expanded":"false",className:"inline-flex items-center p-2 mr-2 w-10 h-10 justify-center text-sm text-gray-500 rounded-lg md:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600",children:[b.jsx("span",{className:"sr-only",children:"Search"}),b.jsx("i",{className:"material-icons",children:"search"})]}),b.jsxs("div",{className:"relative hidden md:block",children:[b.jsx("div",{className:"absolute inset-y-0 start-0 flex items-center pl-2 pointer-events-none",children:b.jsx("i",{className:"material-icons text-gray-900 dark:text-gray-400",children:"search"})}),b.jsx("input",{type:"text",id:"search-navbar",className:"pl-9 block w-full p-2 text-sm text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:t("search")+"..."})]}),b.jsxs("div",{className:"dropdown",children:[b.jsxs("button",{type:"button",onClick:()=>o(!s),className:"inline-flex items-center p-2 w-10 h-10 justify-center text-sm text-gray-500 rounded-lg md:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600","aria-controls":"navbar-search","aria-expanded":"false",children:[b.jsx("span",{className:"sr-only",children:"Open main menu"}),b.jsx("i",{className:"material-icons",children:"menu"})]}),s&&b.jsx("div",{className:"z-50 my-4 text-base list-none bg-white divide-y divide-gray-100 rounded-lg shadow dark:bg-gray-700 absolute origin-top right-0 mt-2 w-max",children:b.jsx("ul",{className:"py-2 font-medium",role:"none",children:b.jsx("li",{children:b.jsxs("button",{type:"button",onClick:d,className:"h-10 px-5 flex items-center text-black dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",style:{width:"-webkit-fill-available"},children:[b.jsx("i",{className:"material-icons",children:"logout"}),"Log Out"]})})})})]})]}),b.jsx("div",{className:"items-center justify-between hidden w-full md:flex md:w-auto md:order-1",id:"navbar-search",children:b.jsx("ul",{className:"flex flex-col items-center p-4 md:p-0 mt-4 font-medium border border-gray-100 rounded-lg bg-gray-50 md:space-x-8 rtl:space-x-reverse md:flex-row md:mt-0 md:border-0 md:bg-white dark:bg-gray-800 md:dark:bg-gray-900 dark:border-gray-700",children:c.map(g=>b.jsx("li",{children:b.jsx("a",{href:`/home/${g}`,className:u,onClick:()=>h(g),children:t(g)})},g))})}),b.jsxs("div",{className:"hidden items-center md:order-2 space-x-2 md:space-x-0 rtl:space-x-reverse md:flex",children:[b.jsxs("div",{className:"dropdown",children:[b.jsx("button",{onClick:d,type:"button",className:"material-icons text-black dark:text-white hover:bg-gray-100 p-2 hover:rounded-full dark:hover:bg-gray-700",children:"logout"}),b.jsx("button",{onClick:()=>{i(!1),n(!e)},type:"button",className:"material-icons text-black dark:text-white hover:bg-gray-100 p-2 mx-4 hover:rounded-full dark:hover:bg-gray-700",children:a.theme==="dark"?"dark_mode":"light_mode"}),e&&b.jsx("div",{className:"z-50 my-4 text-base list-none bg-white divide-y divide-gray-100 rounded-lg shadow dark:bg-gray-700 absolute origin-top left-0 mt-2",style:{width:"max-content"},children:b.jsxs("ul",{className:"py-2 font-medium",role:"none",children:[b.jsx("li",{children:b.jsxs("button",{onClick:()=>f("light"),type:"button",className:"h-10 px-5 flex items-center text-black dark:text-white hover:bg-gray-100 dark:hover:bg-gray-600",style:{width:"-webkit-fill-available"},children:[b.jsx("i",{className:"material-icons mr-2",children:"light_mode"}),t("lightMode")]})}),b.jsx("li",{children:b.jsxs("button",{onClick:()=>f("dark"),type:"button",className:"h-10 px-5 flex items-center text-black dark:text-white hover:bg-gray-100 dark:hover:bg-gray-600",style:{width:"-webkit-fill-available"},children:[b.jsx("i",{className:"material-icons mr-2",children:"dark_mode"}),t("darkMode")]})})]})})]}),b.jsxs("div",{className:"dropdown",children:[b.jsxs("button",{onClick:()=>{n(!1),i(!r)},type:"button",className:"inline-flex items-center font-medium justify-center p-2 text-sm text-gray-900 dark:text-white rounded-lg cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 dark:hover:text-white mr-4",children:[b.jsx("img",{src:a.languageLogo,width:20,height:20,className:"mr-2"}),t("languageName"),b.jsx("span",{className:"dropdown-arrow",children:""})]}),r&&b.jsx("div",{className:"z-50 my-4 text-base list-none bg-white divide-y divide-gray-100 rounded-lg shadow dark:bg-gray-700 absolute origin-top left-0 mt-2",style:{width:"max-content"},children:b.jsxs("ul",{className:"py-2 font-medium",role:"none",children:[b.jsx("li",{children:b.jsxs("button",{type:"button",onClick:()=>p("en",ui),className:"h-10 px-5 flex items-center text-black dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",style:{width:"-webkit-fill-available"},children:[b.jsx("img",{src:ui,width:20,height:20,className:"mr-2"}),"English (US)"]})}),b.jsx("li",{children:b.jsxs("button",{type:"button",onClick:()=>p("de",Ga),className:"h-10 px-5 flex items-center text-black dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",style:{width:"-webkit-fill-available"},children:[b.jsx("img",{src:Ga,width:20,height:20,className:"mr-2"}),"Deutsch"]})}),b.jsx("li",{children:b.jsxs("button",{type:"button",onClick:()=>p("it",Qa),className:"h-10 px-5 flex items-center text-black dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",style:{width:"-webkit-fill-available"},children:[b.jsx("img",{src:Qa,width:20,height:20,className:"mr-2"}),"Italiano"]})}),b.jsx("li",{children:b.jsxs("button",{type:"button",onClick:()=>p("zh",Ya),className:"h-10 px-5 flex items-center text-black dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",style:{width:"-webkit-fill-available"},children:[b.jsx("img",{src:Ya,width:20,height:20,className:"mr-2"})," ()"]})})]})})]}),b.jsxs("a",{id:"userIcon","data-dropdown-toggle":"dropdownHoverUser","data-dropdown-trigger":"hover",className:"py-2 px-3 flex items-center text-gray-900 rounded hover:bg-gray-100 md:hover:bg-transparent md:hover:text-blue-700 md:p-0 md:dark:hover:text-blue-400 dark:text-white dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent dark:border-gray-700",children:[b.jsx("img",{src:xj,alt:"User",className:"h-6 rounded-full"}),b.jsx("span",{id:"username",children:" Username "})]}),b.jsx("div",{id:"userDataHover",className:"z-10 hidden bg-white divide-y divide-gray-100 rounded-lg shadow w-44 dark:bg-gray-700",children:b.jsxs("ul",{className:"py-2 text-sm text-gray-700 dark:text-gray-200","aria-labelledby":"dropdownHoverUser",children:[b.jsx("li",{children:b.jsx("a",{className:"block px-4 py-2 disabled:* pointer-events-none",children:"full Name"})}),b.jsx("li",{children:b.jsx("a",{className:"block px-4 py-2 disabled:* pointer-events-none",children:"Email"})}),b.jsx("li",{children:b.jsx("a",{className:"block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white",children:"Settings"})}),b.jsx("li",{children:b.jsx("a",{className:"block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white",children:"Sign out"})})]})})]})]})})}const vJ=({isAuthenticated:t})=>t?b.jsxs("div",{children:[b.jsx(_J,{}),b.jsx(MP,{})]}):b.jsx(du,{to:"/welcome",replace:!0}),GL=()=>{const t=U.useRef(null),e=U.useRef({x:null,y:null});return U.useEffect(()=>{const n=()=>{const r=t.current;r.width=window.innerWidth,r.height=window.innerHeight};return window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)},[window.innerWidth,window.innerHeight]),U.useEffect(()=>{const n=t.current,r=n.getContext("2d");n.width=window.innerWidth,n.height=window.innerHeight;const i=c=>{e.current={x:c.clientX,y:c.clientY}};window.addEventListener("mousemove",i);let s;const o=[];for(let c=0;c<50;c++)o.push({x:Math.random()*n.width,y:Math.random()*n.height+50,radius:Math.random()*20+5,dx:(Math.random()-.5)*2,dy:(Math.random()-.5)*2});const a=()=>{r.clearRect(0,0,n.width,n.height),o.forEach(c=>{r.beginPath(),r.arc(c.x,c.y,c.radius,0,Math.PI*2),r.fill(),localStorage.getItem("theme")==="dark"?r.fillStyle="rgba(255, 255, 255, 0.3)":r.fillStyle="rgba(0, 0, 0, 0.3)";const u=e.current;if(u.x!=null&&u.y!=null){const h=c.x-u.x,d=c.y-u.y,f=Math.sqrt(h*h+d*d);f<100&&(c.dx+=h/f*.07,c.dy+=d/f*.07)}c.x+=c.dx,c.y+=c.dy,(c.x<c.radius||c.x>n.width-c.radius)&&(c.dx=-c.dx),(c.y<c.radius||c.y>n.height-c.radius)&&(c.dy=-c.dy),c.dx*=.9999,c.dy*=.9999})},l=()=>{a(),s=requestAnimationFrame(l)};return l(),()=>{cancelAnimationFrame(s),window.removeEventListener("mousemove",i)}},[]),b.jsx("canvas",{className:"canvas-background",ref:t})},wJ="/assets/logoB-BNS7NqN4.png",bJ=()=>{const{t}=Jn();return b.jsxs("div",{id:"loaderBody",className:"w-full h-full flex flex-col justify-center items-center bg-white",children:[b.jsx("img",{className:"flex justify-center items-center max-w-48",src:ed,alt:t("cryptoPulse")+" logo"}),b.jsx("div",{className:"absolute loader"})]})},QL=U.createContext();function YL(){return U.useContext(QL)}function SJ({children:t}){const[e,n]=U.useState(),[r,i]=U.useState(!0);U.useEffect(()=>NW(Ah,a=>{n(a),i(!1),console.log("===================================="),console.log("User:",a),console.log("====================================")}),[]);const s={currentUser:e,loading:r};return r?b.jsx(bJ,{}):b.jsx(QL.Provider,{value:s,children:t})}function EJ(){const{t}=Jn(),{currentUser:e}=YL();return b.jsxs("div",{className:"text-slate-950 dark:text-white flex justify-center items-center",style:{height:"calc(100vh - 72px)"},children:[b.jsx(GL,{}),b.jsxs("div",{className:"flex justify-center items-center left-1/2 -translate-x-[20%] gap-10",children:[b.jsx("img",{src:wJ,alt:"CryptoPulse logo",className:"flex h-auto w-auto md:max-h-[1500px] "}),b.jsxs("div",{className:"flex flex-col w-full text-start",children:[b.jsx("h1",{className:"mb-5 text-6xl font-thin",children:t("welcomeBack")}),b.jsx("h1",{className:"mb-5 text-8xl font-bold",children:e.displayName})]})]})]})}function TJ(){const{t}=Jn(),[e,n]=U.useState(!1),[r,i]=U.useState(!1),[s,o]=cb(ub);U.useEffect(()=>{switch(localStorage.language){case"en":o({...s,language:"en"}),o({...s,languageLogo:ui}),$e.changeLanguage("en");break;case"de":o({...s,language:"de"}),o({...s,languageLogo:Ga}),$e.changeLanguage("de");break;case"it":o({...s,language:"it"}),o({...s,languageLogo:Qa}),$e.changeLanguage("it");break;case"zh":o({...s,language:"zh"}),o({...s,languageLogo:Ya}),$e.changeLanguage("zh");break;default:o({...s,language:"en"}),o({...s,languageLogo:ui}),$e.changeLanguage("en")}},[s.language]);function a(c){n(!1),c==="light"?(document.documentElement.classList.remove("dark"),localStorage.theme="light",o({...s,theme:"light"})):(document.documentElement.classList.add("dark"),localStorage.theme="dark",o({...s,theme:"dark"}))}function l(c,u){i(!1),localStorage.language=c,$e.changeLanguage(c),o({...s,language:c}),o({...s,languageLogo:u})}return b.jsx("nav",{className:"bg-white border-gray-200 dark:bg-gray-900",style:{position:"sticky",top:0,zIndex:1e3},children:b.jsxs("div",{className:"flex flex-wrap items-center justify-between mx-auto p-4",children:[b.jsxs("div",{className:"flex items-center space-x-3 rtl:space-x-reverse cursor-pointer",onClick:()=>window.location.replace("/welcome"),children:[b.jsx("img",{src:ed,alt:"CryptoPulse logo",className:"h-8"}),b.jsx("span",{className:"self-center text-2xl font-semibold whitespace-nowrap dark:text-white",children:t("cryptoPulse")})]}),b.jsxs("div",{className:"flex md:hidden flex-row items-center",children:[b.jsx("button",{onClick:()=>window.location.replace("/welcome/signup"),type:"button",className:"material-icons text-black dark:text-white hover:bg-gray-100 p-2 mx-2 hover:rounded-full dark:hover:bg-gray-700",children:"edit"}),b.jsx("button",{onClick:()=>window.location.replace("/welcome/login"),type:"button",className:"material-icons text-black dark:text-white hover:bg-gray-100 p-2 mx-2 hover:rounded-full dark:hover:bg-gray-700",children:"login"})]}),b.jsxs("div",{className:"hidden md:flex flex-col md:flex-row items-center md:order-2 space-x-2 md:space-x-0 rtl:space-x-reverse",children:[b.jsxs("div",{className:"dropdown",children:[b.jsx("button",{onClick:()=>{i(!1),n(!e)},type:"button",className:"material-icons text-black dark:text-white hover:bg-gray-100 p-2 mx-4 hover:rounded-full dark:hover:bg-gray-700",children:b.jsx("i",{className:"material-icons",children:s.theme==="dark"?"dark_mode":"light_mode"})}),e&&b.jsx("div",{className:"z-50 my-4 text-base list-none bg-white divide-y divide-gray-100 rounded-lg shadow dark:bg-gray-700 absolute origin-top left-0 mt-2",style:{width:"max-content"},children:b.jsxs("ul",{className:"py-2 font-medium",role:"none",children:[b.jsx("li",{children:b.jsxs("button",{onClick:()=>a("light"),type:"button",className:"h-10 px-5 flex items-center text-black dark:text-white hover:bg-gray-100 dark:hover:bg-gray-600",style:{width:"-webkit-fill-available"},children:[b.jsx("i",{className:"material-icons mr-2",children:"light_mode"}),t("lightMode")]})}),b.jsx("li",{children:b.jsxs("button",{onClick:()=>a("dark"),type:"button",className:"h-10 px-5 flex items-center text-black dark:text-white hover:bg-gray-100 dark:hover:bg-gray-600",style:{width:"-webkit-fill-available"},children:[b.jsx("i",{className:"material-icons mr-2",children:"dark_mode"}),t("darkMode")]})})]})})]}),b.jsxs("div",{className:"dropdown",children:[b.jsxs("button",{onClick:()=>{n(!1),i(!r)},type:"button",className:"inline-flex items-center font-medium justify-center p-2 text-sm text-gray-900 dark:text-white rounded-lg cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 dark:hover:text-white mr-4",children:[b.jsx("img",{src:s.languageLogo,width:20,height:20,className:"mr-2"}),t("languageName"),b.jsx("span",{className:"dropdown-arrow",children:""})]}),r&&b.jsx("div",{className:"z-50 my-4 text-base list-none bg-white divide-y divide-gray-100 rounded-lg shadow dark:bg-gray-700 absolute origin-top left-0 mt-2",style:{width:"max-content"},children:b.jsxs("ul",{className:"py-2 font-medium",role:"none",children:[b.jsx("li",{children:b.jsxs("button",{type:"button",onClick:()=>l("en",ui),className:"h-10 px-5 flex items-center text-black dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",style:{width:"-webkit-fill-available"},children:[b.jsx("img",{src:ui,width:20,height:20,className:"mr-2"}),"English (US)"]})}),b.jsx("li",{children:b.jsxs("button",{type:"button",onClick:()=>l("de",Ga),className:"h-10 px-5 flex items-center text-black dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",style:{width:"-webkit-fill-available"},children:[b.jsx("img",{src:Ga,width:20,height:20,className:"mr-2"}),"Deutsch"]})}),b.jsx("li",{children:b.jsxs("button",{type:"button",onClick:()=>l("it",Qa),className:"h-10 px-5 flex items-center text-black dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",style:{width:"-webkit-fill-available"},children:[b.jsx("img",{src:Qa,width:20,height:20,className:"mr-2"}),"Italiano"]})}),b.jsx("li",{children:b.jsxs("button",{type:"button",onClick:()=>l("zh",Ya),className:"h-10 px-5 flex items-center text-black dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",style:{width:"-webkit-fill-available"},children:[b.jsx("img",{src:Ya,width:20,height:20,className:"mr-2"})," ()"]})})]})})]}),b.jsxs("div",{className:"space-x-4",children:[b.jsx("button",{onClick:()=>window.location.replace("/welcome/signup"),className:"text-gray-800 px-2 py-2 rounded-xl dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 dark:hover:text-white",children:t("signUp")}),b.jsx("button",{onClick:()=>window.location.replace("/welcome/login"),className:"text-gray-800 px-2 py-2 rounded-xl dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 dark:hover:text-white",children:t("logIn")})]})]})]})})}function XL({title:t,message:e,isVisible:n,onClose:r}){const{t:i}=Jn();return n?b.jsxs("div",{className:"alert border border-gray-600 dark:border-white flex flex-col justify-center items-center bg-gray-100 dark:bg-gray-700 min-h-fit",children:[b.jsx("div",{className:"text-2xl w-full font-bold text-black dark:text-white",children:i(t)}),b.jsx("div",{className:"text-lg my-5 h-full w-full font-semibold text-black dark:text-white",children:i(e)}),b.jsx("button",{className:"w-1/4 text-black dark:text-white bg-gray-300 dark:bg-gray-500 p-1 hover:bg-gray-200 dark:hover:bg-gray-400 rounded-lg",onClick:r,children:i("ok")})]}):null}function IJ(){const[t,e]=U.useState(!1),[n,r]=U.useState(!1),i=()=>r(!0),s=()=>r(!1),{t:o}=Jn(),[a,l]=U.useState(!1),[c,u]=U.useState({title:"",message:"",type:""}),[h,d]=U.useState({email:"",password:""}),f=async y=>{if(p()){l(!0),y.preventDefault();try{await e2(Ah,h.email,h.password)}catch(m){m.code==="auth/invalid-credential"?u({...c,title:"error",message:"errorInvalidCredentials",type:"error"}):u({...c,title:"error",message:"somethingWentWrong",type:"error"}),i()}finally{l(!1)}}};function p(){const{email:y,password:m}=h;return y===""||m===""?(u({...c,title:"error",message:"errorFillAllFields",type:"error"}),i(),!1):!0}function g(y){return/\S+@\S+\.\S+/.test(y)}const _=()=>{const{email:y}=h;if(!g(y)){u({...c,title:"error",message:"errorInvalidEmail",type:"error"}),i();return}XN(Ah,h.email).then(()=>{u({...c,title:"success",message:"resetPasswordEmailSent",type:"success"}),i()}).catch(m=>{console.log(m)})};return b.jsxs("div",{className:"flex w-full justify-center items-center h-full pb-28",children:[b.jsxs("div",{className:"grid md:grid-cols-2 w-full",children:[b.jsxs("div",{className:"flex justify-end",children:[b.jsx("img",{src:ed,alt:"CryptoPulse logo",className:"flex h-auto w-auto md:max-h-[550px] p-10 m-auto"}),b.jsx("div",{className:"h-full bg-gray-300 dark:bg-gray-600 hidden md:block w-px mx-[10px]"})]}),b.jsxs("div",{onSubmit:f,className:"flex flex-col justify-center",children:[b.jsx("h1",{className:"mx-10 text-5xl font-bold text-slate-950 dark:text-white",children:o("logIn")}),b.jsx("input",{type:"text",onChange:y=>d({...h,email:y.target.value}),className:"mx-10 mt-10 h-10 pl-3 text-sm text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:o("mail")}),b.jsx("input",{type:t?"text":"password",onChange:y=>d({...h,password:y.target.value}),className:"mx-10 mt-5 h-10 pl-3 text-sm text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:o("password")}),b.jsxs("div",{className:"flex ml-10 mt-5 gap-2",children:[b.jsx("input",{type:"checkbox",onClick:()=>e(!t)}),b.jsx("label",{className:"text-gray-800 dark:text-white",children:o("showPassword")})]}),b.jsxs("button",{type:"button",onClick:f,className:"mx-10 mt-10 text-gray-800 font-bold py-2 px-5 rounded-lg dark:text-white bg-gray-200 dark:bg-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white flex justify-start",children:[o("logIn"),a&&b.jsx("div",{className:"buttonLoader flex justify-center items-center my-auto ml-2"})]}),b.jsx("a",{className:"mx-10 mt-5 text-gray-500 dark:text-gray-300 cursor-pointer font-semibold underline",onClick:_,children:o("forgotPassword")})]})]}),b.jsx(XL,{title:c.title,message:c.message,isVisible:n,onClose:s})]})}function xJ(){const[t,e]=U.useState(!1),[n,r]=U.useState({title:"",message:"",type:""}),[i,s]=U.useState(!1),o=()=>e(!0),a=()=>e(!1),{t:l}=Jn(),[c,u]=U.useState({email:"",firstName:"",lastName:"",password:"",confirmPassword:""}),[h,d]=U.useState(!1),f=async _=>{if(p()){d(!0),_.preventDefault();try{const m=(await ZN(Ah,c.email,c.password)).user;await t2(m,{displayName:c.firstName+" "+c.lastName}),r({...n,title:"success",message:"accountCreated",type:"success"}),o()}catch(y){console.log(y)}finally{d(!1)}}};function p(){const _=c.email,y=c.firstName,m=c.lastName,v=c.password,w=c.confirmPassword;return console.log(c),_===""||y===""||m===""||v===""||w===""?(r({...n,title:"error",message:"errorFillAllFields",type:"error"}),o(),!1):g(_)?v!==w?(r({...n,title:"error",message:"errorPasswordsDoNotMatch",type:"error"}),o(),!1):v.length<6?(r({...n,title:"error",message:"passwordTooShort",type:"error"}),o(),!1):!0:(r({...n,title:"error",message:"errorInvalidEmail",type:"error"}),o(),!1)}function g(_){return/\S+@\S+\.\S+/.test(_)}return b.jsxs("div",{className:"flex w-full justify-center items-center h-full pb-28",children:[b.jsxs("div",{className:"grid md:grid-cols-2 w-full",children:[b.jsxs("div",{className:"flex justify-end",children:[b.jsx("img",{src:ed,alt:"CryptoPulse logo",className:"flex h-auto w-auto md:max-h-[550px] p-10 m-auto"}),b.jsx("div",{className:"h-full bg-gray-300 dark:bg-gray-600 hidden md:block w-px mx-[10px]"})]}),b.jsxs("div",{className:"flex flex-col justify-center",children:[b.jsx("h1",{className:"mx-10 text-5xl font-bold text-slate-950 dark:text-white",children:l("signUp")}),b.jsx("input",{type:"text",onChange:_=>u({...c,email:_.target.value}),className:"mx-10 mt-10 h-10 pl-3 text-sm text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:l("email")}),b.jsxs("div",{className:"flex flex-row w-full",children:[b.jsx("input",{type:"text",onChange:_=>u({...c,firstName:_.target.value}),className:"w-full ml-10 mt-5 mr-2 pl-3 h-10 text-sm text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:l("firstName")}),b.jsx("input",{type:"text",onChange:_=>u({...c,lastName:_.target.value}),className:"w-full mr-10 ml-2 mt-5 pl-3 h-10 text-sm text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:l("lastName")})]}),b.jsxs("div",{className:"flex flex-row w-full",children:[b.jsx("input",{type:i?"text":"password",onChange:_=>u({...c,password:_.target.value}),className:"w-full ml-10 mr-2 mt-5 h-10 pl-3 text-sm text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:l("password")}),b.jsx("input",{type:i?"text":"password",onChange:_=>u({...c,confirmPassword:_.target.value}),className:"w-full mr-10 ml-2 mt-5 h-10 pl-3 text-sm text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:l("confirmPassword")})]}),b.jsxs("div",{className:"flex ml-10 mt-5 gap-2",children:[b.jsx("input",{type:"checkbox",onClick:()=>s(!i)}),b.jsx("label",{className:"text-gray-800 dark:text-white",children:l("showPassword")})]}),b.jsxs("button",{type:"button",onClick:f,className:"m-10 text-gray-800 font-bold py-2 px-5 rounded-lg dark:text-white bg-gray-200 dark:bg-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white flex justify-start",children:[l("signUp"),h&&b.jsx("div",{className:"buttonLoader flex justify-center items-center my-auto ml-2"})]})]})]}),b.jsx(XL,{title:n.title,message:n.message,isVisible:t,onClose:a})]})}/*!
 * @kurkle/color v0.3.2
 * https://github.com/kurkle/color#readme
 * (c) 2023 Jukka Kurkela
 * Released under the MIT License
 */function Ad(t){return t+.5|0}const Ji=(t,e,n)=>Math.max(Math.min(t,n),e);function Yc(t){return Ji(Ad(t*2.55),0,255)}function ds(t){return Ji(Ad(t*255),0,255)}function oi(t){return Ji(Ad(t/2.55)/100,0,1)}function xx(t){return Ji(Ad(t*100),0,100)}const tr={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},P0=[..."0123456789ABCDEF"],RJ=t=>P0[t&15],AJ=t=>P0[(t&240)>>4]+P0[t&15],ff=t=>(t&240)>>4===(t&15),kJ=t=>ff(t.r)&&ff(t.g)&&ff(t.b)&&ff(t.a);function PJ(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&tr[t[1]]*17,g:255&tr[t[2]]*17,b:255&tr[t[3]]*17,a:e===5?tr[t[4]]*17:255}:(e===7||e===9)&&(n={r:tr[t[1]]<<4|tr[t[2]],g:tr[t[3]]<<4|tr[t[4]],b:tr[t[5]]<<4|tr[t[6]],a:e===9?tr[t[7]]<<4|tr[t[8]]:255})),n}const CJ=(t,e)=>t<255?e(t):"";function NJ(t){var e=kJ(t)?RJ:AJ;return t?"#"+e(t.r)+e(t.g)+e(t.b)+CJ(t.a,e):void 0}const DJ=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function JL(t,e,n){const r=e*Math.min(n,1-n),i=(s,o=(s+t/30)%12)=>n-r*Math.max(Math.min(o-3,9-o,1),-1);return[i(0),i(8),i(4)]}function OJ(t,e,n){const r=(i,s=(i+t/60)%6)=>n-n*e*Math.max(Math.min(s,4-s,1),0);return[r(5),r(3),r(1)]}function LJ(t,e,n){const r=JL(t,1,.5);let i;for(e+n>1&&(i=1/(e+n),e*=i,n*=i),i=0;i<3;i++)r[i]*=1-e-n,r[i]+=e;return r}function MJ(t,e,n,r,i){return t===i?(e-n)/r+(e<n?6:0):e===i?(n-t)/r+2:(t-e)/r+4}function aS(t){const n=t.r/255,r=t.g/255,i=t.b/255,s=Math.max(n,r,i),o=Math.min(n,r,i),a=(s+o)/2;let l,c,u;return s!==o&&(u=s-o,c=a>.5?u/(2-s-o):u/(s+o),l=MJ(n,r,i,u,s),l=l*60+.5),[l|0,c||0,a]}function lS(t,e,n,r){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,r)).map(ds)}function cS(t,e,n){return lS(JL,t,e,n)}function VJ(t,e,n){return lS(LJ,t,e,n)}function FJ(t,e,n){return lS(OJ,t,e,n)}function ZL(t){return(t%360+360)%360}function $J(t){const e=DJ.exec(t);let n=255,r;if(!e)return;e[5]!==r&&(n=e[6]?Yc(+e[5]):ds(+e[5]));const i=ZL(+e[2]),s=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?r=VJ(i,s,o):e[1]==="hsv"?r=FJ(i,s,o):r=cS(i,s,o),{r:r[0],g:r[1],b:r[2],a:n}}function UJ(t,e){var n=aS(t);n[0]=ZL(n[0]+e),n=cS(n),t.r=n[0],t.g=n[1],t.b=n[2]}function BJ(t){if(!t)return;const e=aS(t),n=e[0],r=xx(e[1]),i=xx(e[2]);return t.a<255?`hsla(${n}, ${r}%, ${i}%, ${oi(t.a)})`:`hsl(${n}, ${r}%, ${i}%)`}const Rx={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Ax={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function jJ(){const t={},e=Object.keys(Ax),n=Object.keys(Rx);let r,i,s,o,a;for(r=0;r<e.length;r++){for(o=a=e[r],i=0;i<n.length;i++)s=n[i],a=a.replace(s,Rx[s]);s=parseInt(Ax[o],16),t[a]=[s>>16&255,s>>8&255,s&255]}return t}let pf;function zJ(t){pf||(pf=jJ(),pf.transparent=[0,0,0,0]);const e=pf[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const WJ=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function HJ(t){const e=WJ.exec(t);let n=255,r,i,s;if(e){if(e[7]!==r){const o=+e[7];n=e[8]?Yc(o):Ji(o*255,0,255)}return r=+e[1],i=+e[3],s=+e[5],r=255&(e[2]?Yc(r):Ji(r,0,255)),i=255&(e[4]?Yc(i):Ji(i,0,255)),s=255&(e[6]?Yc(s):Ji(s,0,255)),{r,g:i,b:s,a:n}}}function qJ(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${oi(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const g_=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,wa=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function KJ(t,e,n){const r=wa(oi(t.r)),i=wa(oi(t.g)),s=wa(oi(t.b));return{r:ds(g_(r+n*(wa(oi(e.r))-r))),g:ds(g_(i+n*(wa(oi(e.g))-i))),b:ds(g_(s+n*(wa(oi(e.b))-s))),a:t.a+n*(e.a-t.a)}}function gf(t,e,n){if(t){let r=aS(t);r[e]=Math.max(0,Math.min(r[e]+r[e]*n,e===0?360:1)),r=cS(r),t.r=r[0],t.g=r[1],t.b=r[2]}}function eM(t,e){return t&&Object.assign(e||{},t)}function kx(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=ds(t[3]))):(e=eM(t,{r:0,g:0,b:0,a:1}),e.a=ds(e.a)),e}function GJ(t){return t.charAt(0)==="r"?HJ(t):$J(t)}class kh{constructor(e){if(e instanceof kh)return e;const n=typeof e;let r;n==="object"?r=kx(e):n==="string"&&(r=PJ(e)||zJ(e)||GJ(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=eM(this._rgb);return e&&(e.a=oi(e.a)),e}set rgb(e){this._rgb=kx(e)}rgbString(){return this._valid?qJ(this._rgb):void 0}hexString(){return this._valid?NJ(this._rgb):void 0}hslString(){return this._valid?BJ(this._rgb):void 0}mix(e,n){if(e){const r=this.rgb,i=e.rgb;let s;const o=n===s?.5:n,a=2*o-1,l=r.a-i.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;s=1-c,r.r=255&c*r.r+s*i.r+.5,r.g=255&c*r.g+s*i.g+.5,r.b=255&c*r.b+s*i.b+.5,r.a=o*r.a+(1-o)*i.a,this.rgb=r}return this}interpolate(e,n){return e&&(this._rgb=KJ(this._rgb,e._rgb,n)),this}clone(){return new kh(this.rgb)}alpha(e){return this._rgb.a=ds(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=Ad(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return gf(this._rgb,2,e),this}darken(e){return gf(this._rgb,2,-e),this}saturate(e){return gf(this._rgb,1,e),this}desaturate(e){return gf(this._rgb,1,-e),this}rotate(e){return UJ(this._rgb,e),this}}/*!
 * Chart.js v4.4.2
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */function ti(){}const QJ=(()=>{let t=0;return()=>t++})();function Ne(t){return t===null||typeof t>"u"}function Ye(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Ae(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function gt(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function Un(t,e){return gt(t)?t:e}function _e(t,e){return typeof t>"u"?e:t}const YJ=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,tM=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function je(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function Oe(t,e,n,r){let i,s,o;if(Ye(t))if(s=t.length,r)for(i=s-1;i>=0;i--)e.call(n,t[i],i);else for(i=0;i<s;i++)e.call(n,t[i],i);else if(Ae(t))for(o=Object.keys(t),s=o.length,i=0;i<s;i++)e.call(n,t[o[i]],o[i])}function fg(t,e){let n,r,i,s;if(!t||!e||t.length!==e.length)return!1;for(n=0,r=t.length;n<r;++n)if(i=t[n],s=e[n],i.datasetIndex!==s.datasetIndex||i.index!==s.index)return!1;return!0}function pg(t){if(Ye(t))return t.map(pg);if(Ae(t)){const e=Object.create(null),n=Object.keys(t),r=n.length;let i=0;for(;i<r;++i)e[n[i]]=pg(t[n[i]]);return e}return t}function nM(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function XJ(t,e,n,r){if(!nM(t))return;const i=e[t],s=n[t];Ae(i)&&Ae(s)?Ph(i,s,r):e[t]=pg(s)}function Ph(t,e,n){const r=Ye(e)?e:[e],i=r.length;if(!Ae(t))return t;n=n||{};const s=n.merger||XJ;let o;for(let a=0;a<i;++a){if(o=r[a],!Ae(o))continue;const l=Object.keys(o);for(let c=0,u=l.length;c<u;++c)s(l[c],t,o,n)}return t}function Ru(t,e){return Ph(t,e,{merger:JJ})}function JJ(t,e,n){if(!nM(t))return;const r=e[t],i=n[t];Ae(r)&&Ae(i)?Ru(r,i):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=pg(i))}const Px={"":t=>t,x:t=>t.x,y:t=>t.y};function ZJ(t){const e=t.split("."),n=[];let r="";for(const i of e)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}function eZ(t){const e=ZJ(t);return n=>{for(const r of e){if(r==="")break;n=n&&n[r]}return n}}function Rs(t,e){return(Px[e]||(Px[e]=eZ(e)))(t)}function uS(t){return t.charAt(0).toUpperCase()+t.slice(1)}const Ch=t=>typeof t<"u",As=t=>typeof t=="function",Cx=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function tZ(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const Ze=Math.PI,Je=2*Ze,nZ=Je+Ze,gg=Number.POSITIVE_INFINITY,rZ=Ze/180,Tt=Ze/2,qs=Ze/4,Nx=Ze*2/3,Zi=Math.log10,Gr=Math.sign;function Au(t,e,n){return Math.abs(t-e)<n}function Dx(t){const e=Math.round(t);t=Au(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(Zi(t))),r=t/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function iZ(t){const e=[],n=Math.sqrt(t);let r;for(r=1;r<n;r++)t%r===0&&(e.push(r),e.push(t/r));return n===(n|0)&&e.push(n),e.sort((i,s)=>i-s).pop(),e}function Dl(t){return!isNaN(parseFloat(t))&&isFinite(t)}function sZ(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function rM(t,e,n){let r,i,s;for(r=0,i=t.length;r<i;r++)s=t[r][n],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function vr(t){return t*(Ze/180)}function hS(t){return t*(180/Ze)}function Ox(t){if(!gt(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function iM(t,e){const n=e.x-t.x,r=e.y-t.y,i=Math.sqrt(n*n+r*r);let s=Math.atan2(r,n);return s<-.5*Ze&&(s+=Je),{angle:s,distance:i}}function C0(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function oZ(t,e){return(t-e+nZ)%Je-Ze}function jn(t){return(t%Je+Je)%Je}function Nh(t,e,n,r){const i=jn(t),s=jn(e),o=jn(n),a=jn(s-i),l=jn(o-i),c=jn(i-s),u=jn(i-o);return i===s||i===o||r&&s===o||a>l&&c<u}function $t(t,e,n){return Math.max(e,Math.min(n,t))}function aZ(t){return $t(t,-32768,32767)}function pi(t,e,n,r=1e-6){return t>=Math.min(e,n)-r&&t<=Math.max(e,n)+r}function dS(t,e,n){n=n||(o=>t[o]<e);let r=t.length-1,i=0,s;for(;r-i>1;)s=i+r>>1,n(s)?i=s:r=s;return{lo:i,hi:r}}const gi=(t,e,n,r)=>dS(t,n,r?i=>{const s=t[i][e];return s<n||s===n&&t[i+1][e]===n}:i=>t[i][e]<n),lZ=(t,e,n)=>dS(t,n,r=>t[r][e]>=n);function cZ(t,e,n){let r=0,i=t.length;for(;r<i&&t[r]<e;)r++;for(;i>r&&t[i-1]>n;)i--;return r>0||i<t.length?t.slice(r,i):t}const sM=["push","pop","shift","splice","unshift"];function uZ(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),sM.forEach(n=>{const r="_onData"+uS(n),i=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...s){const o=i.apply(this,s);return t._chartjs.listeners.forEach(a=>{typeof a[r]=="function"&&a[r](...s)}),o}})})}function Lx(t,e){const n=t._chartjs;if(!n)return;const r=n.listeners,i=r.indexOf(e);i!==-1&&r.splice(i,1),!(r.length>0)&&(sM.forEach(s=>{delete t[s]}),delete t._chartjs)}function oM(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const aM=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function lM(t,e){let n=[],r=!1;return function(...i){n=i,r||(r=!0,aM.call(window,()=>{r=!1,t.apply(e,n)}))}}function hZ(t,e){let n;return function(...r){return e?(clearTimeout(n),n=setTimeout(t,e,r)):t.apply(this,r),e}}const fS=t=>t==="start"?"left":t==="end"?"right":"center",sn=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,dZ=(t,e,n,r)=>t===(r?"left":"right")?n:t==="center"?(e+n)/2:e;function cM(t,e,n){const r=e.length;let i=0,s=r;if(t._sorted){const{iScale:o,_parsed:a}=t,l=o.axis,{min:c,max:u,minDefined:h,maxDefined:d}=o.getUserBounds();h&&(i=$t(Math.min(gi(a,l,c).lo,n?r:gi(e,l,o.getPixelForValue(c)).lo),0,r-1)),d?s=$t(Math.max(gi(a,o.axis,u,!0).hi+1,n?0:gi(e,l,o.getPixelForValue(u),!0).hi+1),i,r)-i:s=r-i}return{start:i,count:s}}function uM(t){const{xScale:e,yScale:n,_scaleRanges:r}=t,i={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!r)return t._scaleRanges=i,!0;const s=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,i),s}const mf=t=>t===0||t===1,Mx=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*Je/n)),Vx=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*Je/n)+1,ku={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*Tt)+1,easeOutSine:t=>Math.sin(t*Tt),easeInOutSine:t=>-.5*(Math.cos(Ze*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>mf(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>mf(t)?t:Mx(t,.075,.3),easeOutElastic:t=>mf(t)?t:Vx(t,.075,.3),easeInOutElastic(t){return mf(t)?t:t<.5?.5*Mx(t*2,.1125,.45):.5+.5*Vx(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-ku.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?ku.easeInBounce(t*2)*.5:ku.easeOutBounce(t*2-1)*.5+.5};function pS(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function Fx(t){return pS(t)?t:new kh(t)}function m_(t){return pS(t)?t:new kh(t).saturate(.5).darken(.1).hexString()}const fZ=["x","y","borderWidth","radius","tension"],pZ=["color","borderColor","backgroundColor"];function gZ(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:pZ},numbers:{type:"number",properties:fZ}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function mZ(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const $x=new Map;function yZ(t,e){e=e||{};const n=t+JSON.stringify(e);let r=$x.get(n);return r||(r=new Intl.NumberFormat(t,e),$x.set(n,r)),r}function kd(t,e,n){return yZ(e,n).format(t)}const hM={values(t){return Ye(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const r=this.chart.options.locale;let i,s=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(i="scientific"),s=_Z(t,n)}const o=Zi(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),kd(t,r,l)},logarithmic(t,e,n){if(t===0)return"0";const r=n[e].significand||t/Math.pow(10,Math.floor(Zi(t)));return[1,2,3,5,10,15].includes(r)||e>.8*n.length?hM.numeric.call(this,t,e,n):""}};function _Z(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var ny={formatters:hM};function vZ(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:ny.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Ko=Object.create(null),N0=Object.create(null);function Pu(t,e){if(!e)return t;const n=e.split(".");for(let r=0,i=n.length;r<i;++r){const s=n[r];t=t[s]||(t[s]=Object.create(null))}return t}function y_(t,e,n){return typeof e=="string"?Ph(Pu(t,e),n):Ph(Pu(t,""),e)}class wZ{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,i)=>m_(i.backgroundColor),this.hoverBorderColor=(r,i)=>m_(i.borderColor),this.hoverColor=(r,i)=>m_(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return y_(this,e,n)}get(e){return Pu(this,e)}describe(e,n){return y_(N0,e,n)}override(e,n){return y_(Ko,e,n)}route(e,n,r,i){const s=Pu(this,e),o=Pu(this,r),a="_"+n;Object.defineProperties(s,{[a]:{value:s[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[i];return Ae(l)?Object.assign({},c,l):_e(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var mt=new wZ({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[gZ,mZ,vZ]);function bZ(t){return!t||Ne(t.size)||Ne(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function mg(t,e,n,r,i){let s=e[i];return s||(s=e[i]=t.measureText(i).width,n.push(i)),s>r&&(r=s),r}function SZ(t,e,n,r){r=r||{};let i=r.data=r.data||{},s=r.garbageCollect=r.garbageCollect||[];r.font!==e&&(i=r.data={},s=r.garbageCollect=[],r.font=e),t.save(),t.font=e;let o=0;const a=n.length;let l,c,u,h,d;for(l=0;l<a;l++)if(h=n[l],h!=null&&!Ye(h))o=mg(t,i,s,o,h);else if(Ye(h))for(c=0,u=h.length;c<u;c++)d=h[c],d!=null&&!Ye(d)&&(o=mg(t,i,s,o,d));t.restore();const f=s.length/2;if(f>n.length){for(l=0;l<f;l++)delete i[s[l]];s.splice(0,f)}return o}function Ks(t,e,n){const r=t.currentDevicePixelRatio,i=n!==0?Math.max(n/2,.5):0;return Math.round((e-i)*r)/r+i}function Ux(t,e){e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore()}function D0(t,e,n,r){dM(t,e,n,r,null)}function dM(t,e,n,r,i){let s,o,a,l,c,u,h,d;const f=e.pointStyle,p=e.rotation,g=e.radius;let _=(p||0)*rZ;if(f&&typeof f=="object"&&(s=f.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){t.save(),t.translate(n,r),t.rotate(_),t.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),t.restore();return}if(!(isNaN(g)||g<=0)){switch(t.beginPath(),f){default:i?t.ellipse(n,r,i/2,g,0,0,Je):t.arc(n,r,g,0,Je),t.closePath();break;case"triangle":u=i?i/2:g,t.moveTo(n+Math.sin(_)*u,r-Math.cos(_)*g),_+=Nx,t.lineTo(n+Math.sin(_)*u,r-Math.cos(_)*g),_+=Nx,t.lineTo(n+Math.sin(_)*u,r-Math.cos(_)*g),t.closePath();break;case"rectRounded":c=g*.516,l=g-c,o=Math.cos(_+qs)*l,h=Math.cos(_+qs)*(i?i/2-c:l),a=Math.sin(_+qs)*l,d=Math.sin(_+qs)*(i?i/2-c:l),t.arc(n-h,r-a,c,_-Ze,_-Tt),t.arc(n+d,r-o,c,_-Tt,_),t.arc(n+h,r+a,c,_,_+Tt),t.arc(n-d,r+o,c,_+Tt,_+Ze),t.closePath();break;case"rect":if(!p){l=Math.SQRT1_2*g,u=i?i/2:l,t.rect(n-u,r-l,2*u,2*l);break}_+=qs;case"rectRot":h=Math.cos(_)*(i?i/2:g),o=Math.cos(_)*g,a=Math.sin(_)*g,d=Math.sin(_)*(i?i/2:g),t.moveTo(n-h,r-a),t.lineTo(n+d,r-o),t.lineTo(n+h,r+a),t.lineTo(n-d,r+o),t.closePath();break;case"crossRot":_+=qs;case"cross":h=Math.cos(_)*(i?i/2:g),o=Math.cos(_)*g,a=Math.sin(_)*g,d=Math.sin(_)*(i?i/2:g),t.moveTo(n-h,r-a),t.lineTo(n+h,r+a),t.moveTo(n+d,r-o),t.lineTo(n-d,r+o);break;case"star":h=Math.cos(_)*(i?i/2:g),o=Math.cos(_)*g,a=Math.sin(_)*g,d=Math.sin(_)*(i?i/2:g),t.moveTo(n-h,r-a),t.lineTo(n+h,r+a),t.moveTo(n+d,r-o),t.lineTo(n-d,r+o),_+=qs,h=Math.cos(_)*(i?i/2:g),o=Math.cos(_)*g,a=Math.sin(_)*g,d=Math.sin(_)*(i?i/2:g),t.moveTo(n-h,r-a),t.lineTo(n+h,r+a),t.moveTo(n+d,r-o),t.lineTo(n-d,r+o);break;case"line":o=i?i/2:Math.cos(_)*g,a=Math.sin(_)*g,t.moveTo(n-o,r-a),t.lineTo(n+o,r+a);break;case"dash":t.moveTo(n,r),t.lineTo(n+Math.cos(_)*(i?i/2:g),r+Math.sin(_)*g);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function mi(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function ry(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function iy(t){t.restore()}function EZ(t,e,n,r,i){if(!e)return t.lineTo(n.x,n.y);if(i==="middle"){const s=(e.x+n.x)/2;t.lineTo(s,e.y),t.lineTo(s,n.y)}else i==="after"!=!!r?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function TZ(t,e,n,r){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function IZ(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),Ne(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function xZ(t,e,n,r,i){if(i.strikethrough||i.underline){const s=t.measureText(r),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,c=n+s.actualBoundingBoxDescent,u=i.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=i.decorationWidth||2,t.moveTo(o,u),t.lineTo(a,u),t.stroke()}}function RZ(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function Go(t,e,n,r,i,s={}){const o=Ye(e)?e:[e],a=s.strokeWidth>0&&s.strokeColor!=="";let l,c;for(t.save(),t.font=i.string,IZ(t,s),l=0;l<o.length;++l)c=o[l],s.backdrop&&RZ(t,s.backdrop),a&&(s.strokeColor&&(t.strokeStyle=s.strokeColor),Ne(s.strokeWidth)||(t.lineWidth=s.strokeWidth),t.strokeText(c,n,r,s.maxWidth)),t.fillText(c,n,r,s.maxWidth),xZ(t,n,r,c,s),r+=Number(i.lineHeight);t.restore()}function Dh(t,e){const{x:n,y:r,w:i,h:s,radius:o}=e;t.arc(n+o.topLeft,r+o.topLeft,o.topLeft,1.5*Ze,Ze,!0),t.lineTo(n,r+s-o.bottomLeft),t.arc(n+o.bottomLeft,r+s-o.bottomLeft,o.bottomLeft,Ze,Tt,!0),t.lineTo(n+i-o.bottomRight,r+s),t.arc(n+i-o.bottomRight,r+s-o.bottomRight,o.bottomRight,Tt,0,!0),t.lineTo(n+i,r+o.topRight),t.arc(n+i-o.topRight,r+o.topRight,o.topRight,0,-Tt,!0),t.lineTo(n+o.topLeft,r)}const AZ=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,kZ=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function PZ(t,e){const n=(""+t).match(AZ);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const CZ=t=>+t||0;function gS(t,e){const n={},r=Ae(e),i=r?Object.keys(e):e,s=Ae(t)?r?o=>_e(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of i)n[o]=CZ(s(o));return n}function fM(t){return gS(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Io(t){return gS(t,["topLeft","topRight","bottomLeft","bottomRight"])}function hn(t){const e=fM(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Dt(t,e){t=t||{},e=e||mt.font;let n=_e(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let r=_e(t.style,e.style);r&&!(""+r).match(kZ)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const i={family:_e(t.family,e.family),lineHeight:PZ(_e(t.lineHeight,e.lineHeight),n),size:n,style:r,weight:_e(t.weight,e.weight),string:""};return i.string=bZ(i),i}function Xc(t,e,n,r){let i=!0,s,o,a;for(s=0,o=t.length;s<o;++s)if(a=t[s],a!==void 0&&(e!==void 0&&typeof a=="function"&&(a=a(e),i=!1),n!==void 0&&Ye(a)&&(a=a[n%a.length],i=!1),a!==void 0))return r&&!i&&(r.cacheable=!1),a}function NZ(t,e,n){const{min:r,max:i}=t,s=tM(e,(i-r)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(r,-Math.abs(s)),max:o(i,s)}}function zs(t,e){return Object.assign(Object.create(t),e)}function mS(t,e=[""],n,r,i=()=>t[0]){const s=n||t;typeof r>"u"&&(r=yM("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:s,_fallback:r,_getTarget:i,override:a=>mS([a,...t],e,s,r)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return gM(a,l,()=>UZ(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return jx(a).includes(l)},ownKeys(a){return jx(a)},set(a,l,c){const u=a._storage||(a._storage=i());return a[l]=u[l]=c,delete a._keys,!0}})}function Ol(t,e,n,r){const i={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:pM(t,r),setContext:s=>Ol(t,s,n,r),override:s=>Ol(t.override(s),e,n,r)};return new Proxy(i,{deleteProperty(s,o){return delete s[o],delete t[o],!0},get(s,o,a){return gM(s,o,()=>OZ(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(s,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(s,o,a){return t[o]=a,delete s[o],!0}})}function pM(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:r=e.indexable,_allKeys:i=e.allKeys}=t;return{allKeys:i,scriptable:n,indexable:r,isScriptable:As(n)?n:()=>n,isIndexable:As(r)?r:()=>r}}const DZ=(t,e)=>t?t+uS(e):e,yS=(t,e)=>Ae(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function gM(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e))return t[e];const r=n();return t[e]=r,r}function OZ(t,e,n){const{_proxy:r,_context:i,_subProxy:s,_descriptors:o}=t;let a=r[e];return As(a)&&o.isScriptable(e)&&(a=LZ(e,a,t,n)),Ye(a)&&a.length&&(a=MZ(e,a,t,o.isIndexable)),yS(e,a)&&(a=Ol(a,i,s&&s[e],o)),a}function LZ(t,e,n,r){const{_proxy:i,_context:s,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(s,o||r);return a.delete(t),yS(t,l)&&(l=_S(i._scopes,i,t,l)),l}function MZ(t,e,n,r){const{_proxy:i,_context:s,_subProxy:o,_descriptors:a}=n;if(typeof s.index<"u"&&r(t))return e[s.index%e.length];if(Ae(e[0])){const l=e,c=i._scopes.filter(u=>u!==l);e=[];for(const u of l){const h=_S(c,i,t,u);e.push(Ol(h,s,o&&o[t],a))}}return e}function mM(t,e,n){return As(t)?t(e,n):t}const VZ=(t,e)=>t===!0?e:typeof t=="string"?Rs(e,t):void 0;function FZ(t,e,n,r,i){for(const s of e){const o=VZ(n,s);if(o){t.add(o);const a=mM(o._fallback,n,i);if(typeof a<"u"&&a!==n&&a!==r)return a}else if(o===!1&&typeof r<"u"&&n!==r)return null}return!1}function _S(t,e,n,r){const i=e._rootScopes,s=mM(e._fallback,n,r),o=[...t,...i],a=new Set;a.add(r);let l=Bx(a,o,n,s||n,r);return l===null||typeof s<"u"&&s!==n&&(l=Bx(a,o,s,l,r),l===null)?!1:mS(Array.from(a),[""],i,s,()=>$Z(e,n,r))}function Bx(t,e,n,r,i){for(;n;)n=FZ(t,e,n,r,i);return n}function $Z(t,e,n){const r=t._getTarget();e in r||(r[e]={});const i=r[e];return Ye(i)&&Ae(n)?n:i||{}}function UZ(t,e,n,r){let i;for(const s of e)if(i=yM(DZ(s,t),n),typeof i<"u")return yS(t,i)?_S(n,r,t,i):i}function yM(t,e){for(const n of e){if(!n)continue;const r=n[t];if(typeof r<"u")return r}}function jx(t){let e=t._keys;return e||(e=t._keys=BZ(t._scopes)),e}function BZ(t){const e=new Set;for(const n of t)for(const r of Object.keys(n).filter(i=>!i.startsWith("_")))e.add(r);return Array.from(e)}function _M(t,e,n,r){const{iScale:i}=t,{key:s="r"}=this._parsing,o=new Array(r);let a,l,c,u;for(a=0,l=r;a<l;++a)c=a+n,u=e[c],o[a]={r:i.parse(Rs(u,s),c)};return o}const jZ=Number.EPSILON||1e-14,Ll=(t,e)=>e<t.length&&!t[e].skip&&t[e],vM=t=>t==="x"?"y":"x";function zZ(t,e,n,r){const i=t.skip?e:t,s=e,o=n.skip?e:n,a=C0(s,i),l=C0(o,s);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const h=r*c,d=r*u;return{previous:{x:s.x-h*(o.x-i.x),y:s.y-h*(o.y-i.y)},next:{x:s.x+d*(o.x-i.x),y:s.y+d*(o.y-i.y)}}}function WZ(t,e,n){const r=t.length;let i,s,o,a,l,c=Ll(t,0);for(let u=0;u<r-1;++u)if(l=c,c=Ll(t,u+1),!(!l||!c)){if(Au(e[u],0,jZ)){n[u]=n[u+1]=0;continue}i=n[u]/e[u],s=n[u+1]/e[u],a=Math.pow(i,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),n[u]=i*o*e[u],n[u+1]=s*o*e[u])}}function HZ(t,e,n="x"){const r=vM(n),i=t.length;let s,o,a,l=Ll(t,0);for(let c=0;c<i;++c){if(o=a,a=l,l=Ll(t,c+1),!a)continue;const u=a[n],h=a[r];o&&(s=(u-o[n])/3,a[`cp1${n}`]=u-s,a[`cp1${r}`]=h-s*e[c]),l&&(s=(l[n]-u)/3,a[`cp2${n}`]=u+s,a[`cp2${r}`]=h+s*e[c])}}function qZ(t,e="x"){const n=vM(e),r=t.length,i=Array(r).fill(0),s=Array(r);let o,a,l,c=Ll(t,0);for(o=0;o<r;++o)if(a=l,l=c,c=Ll(t,o+1),!!l){if(c){const u=c[e]-l[e];i[o]=u!==0?(c[n]-l[n])/u:0}s[o]=a?c?Gr(i[o-1])!==Gr(i[o])?0:(i[o-1]+i[o])/2:i[o-1]:i[o]}WZ(t,i,s),HZ(t,s,e)}function yf(t,e,n){return Math.max(Math.min(t,n),e)}function KZ(t,e){let n,r,i,s,o,a=mi(t[0],e);for(n=0,r=t.length;n<r;++n)o=s,s=a,a=n<r-1&&mi(t[n+1],e),s&&(i=t[n],o&&(i.cp1x=yf(i.cp1x,e.left,e.right),i.cp1y=yf(i.cp1y,e.top,e.bottom)),a&&(i.cp2x=yf(i.cp2x,e.left,e.right),i.cp2y=yf(i.cp2y,e.top,e.bottom)))}function GZ(t,e,n,r,i){let s,o,a,l;if(e.spanGaps&&(t=t.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")qZ(t,i);else{let c=r?t[t.length-1]:t[0];for(s=0,o=t.length;s<o;++s)a=t[s],l=zZ(c,a,t[Math.min(s+1,o-(r?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&KZ(t,n)}function vS(){return typeof window<"u"&&typeof document<"u"}function wS(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function yg(t,e,n){let r;return typeof t=="string"?(r=parseInt(t,10),t.indexOf("%")!==-1&&(r=r/100*e.parentNode[n])):r=t,r}const sy=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function QZ(t,e){return sy(t).getPropertyValue(e)}const YZ=["top","right","bottom","left"];function xo(t,e,n){const r={};n=n?"-"+n:"";for(let i=0;i<4;i++){const s=YZ[i];r[s]=parseFloat(t[e+"-"+s+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const XZ=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function JZ(t,e){const n=t.touches,r=n&&n.length?n[0]:t,{offsetX:i,offsetY:s}=r;let o=!1,a,l;if(XZ(i,s,t.target))a=i,l=s;else{const c=e.getBoundingClientRect();a=r.clientX-c.left,l=r.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function eo(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:r}=e,i=sy(n),s=i.boxSizing==="border-box",o=xo(i,"padding"),a=xo(i,"border","width"),{x:l,y:c,box:u}=JZ(t,n),h=o.left+(u&&a.left),d=o.top+(u&&a.top);let{width:f,height:p}=e;return s&&(f-=o.width+a.width,p-=o.height+a.height),{x:Math.round((l-h)/f*n.width/r),y:Math.round((c-d)/p*n.height/r)}}function ZZ(t,e,n){let r,i;if(e===void 0||n===void 0){const s=wS(t);if(!s)e=t.clientWidth,n=t.clientHeight;else{const o=s.getBoundingClientRect(),a=sy(s),l=xo(a,"border","width"),c=xo(a,"padding");e=o.width-c.width-l.width,n=o.height-c.height-l.height,r=yg(a.maxWidth,s,"clientWidth"),i=yg(a.maxHeight,s,"clientHeight")}}return{width:e,height:n,maxWidth:r||gg,maxHeight:i||gg}}const _f=t=>Math.round(t*10)/10;function eee(t,e,n,r){const i=sy(t),s=xo(i,"margin"),o=yg(i.maxWidth,t,"clientWidth")||gg,a=yg(i.maxHeight,t,"clientHeight")||gg,l=ZZ(t,e,n);let{width:c,height:u}=l;if(i.boxSizing==="content-box"){const d=xo(i,"border","width"),f=xo(i,"padding");c-=f.width+d.width,u-=f.height+d.height}return c=Math.max(0,c-s.width),u=Math.max(0,r?c/r:u-s.height),c=_f(Math.min(c,o,l.maxWidth)),u=_f(Math.min(u,a,l.maxHeight)),c&&!u&&(u=_f(c/2)),(e!==void 0||n!==void 0)&&r&&l.height&&u>l.height&&(u=l.height,c=_f(Math.floor(u*r))),{width:c,height:u}}function zx(t,e,n){const r=e||1,i=Math.floor(t.height*r),s=Math.floor(t.width*r);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==r||o.height!==i||o.width!==s?(t.currentDevicePixelRatio=r,o.height=i,o.width=s,t.ctx.setTransform(r,0,0,r,0,0),!0):!1}const tee=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};vS()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function Wx(t,e){const n=QZ(t,e),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function to(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function nee(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:r==="middle"?n<.5?t.y:e.y:r==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function ree(t,e,n,r){const i={x:t.cp2x,y:t.cp2y},s={x:e.cp1x,y:e.cp1y},o=to(t,i,n),a=to(i,s,n),l=to(s,e,n),c=to(o,a,n),u=to(a,l,n);return to(c,u,n)}const iee=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,r){return n-r},leftForLtr(n,r){return n-r}}},see=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function il(t,e,n){return t?iee(e,n):see()}function wM(t,e){let n,r;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=r)}function bM(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function SM(t){return t==="angle"?{between:Nh,compare:oZ,normalize:jn}:{between:pi,compare:(e,n)=>e-n,normalize:e=>e}}function Hx({start:t,end:e,count:n,loop:r,style:i}){return{start:t%n,end:e%n,loop:r&&(e-t+1)%n===0,style:i}}function oee(t,e,n){const{property:r,start:i,end:s}=n,{between:o,normalize:a}=SM(r),l=e.length;let{start:c,end:u,loop:h}=t,d,f;if(h){for(c+=l,u+=l,d=0,f=l;d<f&&o(a(e[c%l][r]),i,s);++d)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:h,style:t.style}}function EM(t,e,n){if(!n)return[t];const{property:r,start:i,end:s}=n,o=e.length,{compare:a,between:l,normalize:c}=SM(r),{start:u,end:h,loop:d,style:f}=oee(t,e,n),p=[];let g=!1,_=null,y,m,v;const w=()=>l(i,v,y)&&a(i,v)!==0,S=()=>a(s,y)===0||l(s,v,y),E=()=>g||w(),T=()=>!g||S();for(let A=u,$=u;A<=h;++A)m=e[A%o],!m.skip&&(y=c(m[r]),y!==v&&(g=l(y,i,s),_===null&&E()&&(_=a(y,i)===0?A:$),_!==null&&T()&&(p.push(Hx({start:_,end:A,loop:d,count:o,style:f})),_=null),$=A,v=y));return _!==null&&p.push(Hx({start:_,end:h,loop:d,count:o,style:f})),p}function TM(t,e){const n=[],r=t.segments;for(let i=0;i<r.length;i++){const s=EM(r[i],t.points,e);s.length&&n.push(...s)}return n}function aee(t,e,n,r){let i=0,s=e-1;if(n&&!r)for(;i<e&&!t[i].skip;)i++;for(;i<e&&t[i].skip;)i++;for(i%=e,n&&(s+=i);s>i&&t[s%e].skip;)s--;return s%=e,{start:i,end:s}}function lee(t,e,n,r){const i=t.length,s=[];let o=e,a=t[e],l;for(l=e+1;l<=n;++l){const c=t[l%i];c.skip||c.stop?a.skip||(r=!1,s.push({start:e%i,end:(l-1)%i,loop:r}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&s.push({start:e%i,end:o%i,loop:r}),s}function cee(t,e){const n=t.points,r=t.options.spanGaps,i=n.length;if(!i)return[];const s=!!t._loop,{start:o,end:a}=aee(n,i,s,r);if(r===!0)return qx(t,[{start:o,end:a,loop:s}],n,e);const l=a<o?a+i:a,c=!!t._fullLoop&&o===0&&a===i-1;return qx(t,lee(n,o,l,c),n,e)}function qx(t,e,n,r){return!r||!r.setContext||!n?e:uee(t,e,n,r)}function uee(t,e,n,r){const i=t._chart.getContext(),s=Kx(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,c=[];let u=s,h=e[0].start,d=h;function f(p,g,_,y){const m=a?-1:1;if(p!==g){for(p+=l;n[p%l].skip;)p-=m;for(;n[g%l].skip;)g+=m;p%l!==g%l&&(c.push({start:p%l,end:g%l,loop:_,style:y}),u=y,h=g%l)}}for(const p of e){h=a?h:p.start;let g=n[h%l],_;for(d=h+1;d<=p.end;d++){const y=n[d%l];_=Kx(r.setContext(zs(i,{type:"segment",p0:g,p1:y,p0DataIndex:(d-1)%l,p1DataIndex:d%l,datasetIndex:o}))),hee(_,u)&&f(h,d-1,p.loop,u),g=y,u=_}h<d-1&&f(h,d-1,p.loop,u)}return c}function Kx(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function hee(t,e){if(!e)return!1;const n=[],r=function(i,s){return pS(s)?(n.includes(s)||n.push(s),n.indexOf(s)):s};return JSON.stringify(t,r)!==JSON.stringify(e,r)}/*!
 * Chart.js v4.4.2
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */class dee{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,r,i){const s=n.listeners[i],o=n.duration;s.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(r-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=aM.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((r,i)=>{if(!r.running||!r.items.length)return;const s=r.items;let o=s.length-1,a=!1,l;for(;o>=0;--o)l=s[o],l._active?(l._total>r.duration&&(r.duration=l._total),l.tick(e),a=!0):(s[o]=s[s.length-1],s.pop());a&&(i.draw(),this._notify(i,r,e,"progress")),s.length||(r.running=!1,this._notify(i,r,e,"complete"),r.initial=!1),n+=s.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let r=n.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,r)),r}listen(e,n,r){this._getAnims(e).listeners[n].push(r)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((r,i)=>Math.max(r,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const r=n.items;let i=r.length-1;for(;i>=0;--i)r[i].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var ni=new dee;const Gx="transparent",fee={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const r=Fx(t||Gx),i=r.valid&&Fx(e||Gx);return i&&i.valid?i.mix(r,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class pee{constructor(e,n,r,i){const s=n[r];i=Xc([e.to,i,s,e.from]);const o=Xc([e.from,s,i]);this._active=!0,this._fn=e.fn||fee[e.type||typeof o],this._easing=ku[e.easing]||ku.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=r,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(e,n,r){if(this._active){this._notify(!1);const i=this._target[this._prop],s=r-this._start,o=this._duration-s;this._start=r,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=Xc([e.to,n,i,e.from]),this._from=Xc([e.from,i,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,r=this._duration,i=this._prop,s=this._from,o=this._loop,a=this._to;let l;if(this._active=s!==a&&(o||n<r),!this._active){this._target[i]=a,this._notify(!0);return}if(n<0){this._target[i]=s;return}l=n/r%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[i]=this._fn(s,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,r)=>{e.push({res:n,rej:r})})}_notify(e){const n=e?"res":"rej",r=this._promises||[];for(let i=0;i<r.length;i++)r[i][n]()}}class IM{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!Ae(e))return;const n=Object.keys(mt.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const s=e[i];if(!Ae(s))return;const o={};for(const a of n)o[a]=s[a];(Ye(s.properties)&&s.properties||[i]).forEach(a=>{(a===i||!r.has(a))&&r.set(a,o)})})}_animateOptions(e,n){const r=n.options,i=mee(e,r);if(!i)return[];const s=this._createAnimations(i,r);return r.$shared&&gee(e.options.$animations,r).then(()=>{e.options=r},()=>{}),s}_createAnimations(e,n){const r=this._properties,i=[],s=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){i.push(...this._animateOptions(e,n));continue}const u=n[c];let h=s[c];const d=r.get(c);if(h)if(d&&h.active()){h.update(d,u,a);continue}else h.cancel();if(!d||!d.duration){e[c]=u;continue}s[c]=h=new pee(d,e,c,u),i.push(h)}return i}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const r=this._createAnimations(e,n);if(r.length)return ni.add(this._chart,r),!0}}function gee(t,e){const n=[],r=Object.keys(e);for(let i=0;i<r.length;i++){const s=t[r[i]];s&&s.active()&&n.push(s.wait())}return Promise.all(n)}function mee(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function Qx(t,e){const n=t&&t.options||{},r=n.reverse,i=n.min===void 0?e:0,s=n.max===void 0?e:0;return{start:r?s:i,end:r?i:s}}function yee(t,e,n){if(n===!1)return!1;const r=Qx(t,n),i=Qx(e,n);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}function _ee(t){let e,n,r,i;return Ae(t)?(e=t.top,n=t.right,r=t.bottom,i=t.left):e=n=r=i=t,{top:e,right:n,bottom:r,left:i,disabled:t===!1}}function xM(t,e){const n=[],r=t._getSortedDatasetMetas(e);let i,s;for(i=0,s=r.length;i<s;++i)n.push(r[i].index);return n}function Yx(t,e,n,r={}){const i=t.keys,s=r.mode==="single";let o,a,l,c;if(e!==null){for(o=0,a=i.length;o<a;++o){if(l=+i[o],l===n){if(r.all)continue;break}c=t.values[l],gt(c)&&(s||e===0||Gr(e)===Gr(c))&&(e+=c)}return e}}function vee(t){const e=Object.keys(t),n=new Array(e.length);let r,i,s;for(r=0,i=e.length;r<i;++r)s=e[r],n[r]={x:s,y:t[s]};return n}function Xx(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function wee(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function bee(t){const{min:e,max:n,minDefined:r,maxDefined:i}=t.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:i?n:Number.POSITIVE_INFINITY}}function See(t,e,n){const r=t[e]||(t[e]={});return r[n]||(r[n]={})}function Jx(t,e,n,r){for(const i of e.getMatchingVisibleMetas(r).reverse()){const s=t[i.index];if(n&&s>0||!n&&s<0)return i.index}return null}function Zx(t,e){const{chart:n,_cachedMeta:r}=t,i=n._stacks||(n._stacks={}),{iScale:s,vScale:o,index:a}=r,l=s.axis,c=o.axis,u=wee(s,o,r),h=e.length;let d;for(let f=0;f<h;++f){const p=e[f],{[l]:g,[c]:_}=p,y=p._stacks||(p._stacks={});d=y[c]=See(i,u,g),d[a]=_,d._top=Jx(d,o,!0,r.type),d._bottom=Jx(d,o,!1,r.type);const m=d._visualValues||(d._visualValues={});m[a]=_}}function __(t,e){const n=t.scales;return Object.keys(n).filter(r=>n[r].axis===e).shift()}function Eee(t,e){return zs(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function Tee(t,e,n){return zs(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function Pc(t,e){const n=t.controller.index,r=t.vScale&&t.vScale.axis;if(r){e=e||t._parsed;for(const i of e){const s=i._stacks;if(!s||s[r]===void 0||s[r][n]===void 0)return;delete s[r][n],s[r]._visualValues!==void 0&&s[r]._visualValues[n]!==void 0&&delete s[r]._visualValues[n]}}}const v_=t=>t==="reset"||t==="none",eR=(t,e)=>e?t:Object.assign({},t),Iee=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:xM(n,!0),values:null};class Sr{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Xx(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Pc(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,r=this.getDataset(),i=(h,d,f,p)=>h==="x"?d:h==="r"?p:f,s=n.xAxisID=_e(r.xAxisID,__(e,"x")),o=n.yAxisID=_e(r.yAxisID,__(e,"y")),a=n.rAxisID=_e(r.rAxisID,__(e,"r")),l=n.indexAxis,c=n.iAxisID=i(l,s,o,a),u=n.vAxisID=i(l,o,s,a);n.xScale=this.getScaleForId(s),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&Lx(this._data,this),e._stacked&&Pc(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),r=this._data;if(Ae(n))this._data=vee(n);else if(r!==n){if(r){Lx(r,this);const i=this._cachedMeta;Pc(i),i._parsed=[]}n&&Object.isExtensible(n)&&uZ(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,r=this.getDataset();let i=!1;this._dataCheck();const s=n._stacked;n._stacked=Xx(n.vScale,n),n.stack!==r.stack&&(i=!0,Pc(n),n.stack=r.stack),this._resyncElements(e),(i||s!==n._stacked)&&Zx(this,n._parsed)}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:r,_data:i}=this,{iScale:s,_stacked:o}=r,a=s.axis;let l=e===0&&n===i.length?!0:r._sorted,c=e>0&&r._parsed[e-1],u,h,d;if(this._parsing===!1)r._parsed=i,r._sorted=!0,d=i;else{Ye(i[e])?d=this.parseArrayData(r,i,e,n):Ae(i[e])?d=this.parseObjectData(r,i,e,n):d=this.parsePrimitiveData(r,i,e,n);const f=()=>h[a]===null||c&&h[a]<c[a];for(u=0;u<n;++u)r._parsed[u+e]=h=d[u],l&&(f()&&(l=!1),c=h);r._sorted=l}o&&Zx(this,d)}parsePrimitiveData(e,n,r,i){const{iScale:s,vScale:o}=e,a=s.axis,l=o.axis,c=s.getLabels(),u=s===o,h=new Array(i);let d,f,p;for(d=0,f=i;d<f;++d)p=d+r,h[d]={[a]:u||s.parse(c[p],p),[l]:o.parse(n[p],p)};return h}parseArrayData(e,n,r,i){const{xScale:s,yScale:o}=e,a=new Array(i);let l,c,u,h;for(l=0,c=i;l<c;++l)u=l+r,h=n[u],a[l]={x:s.parse(h[0],u),y:o.parse(h[1],u)};return a}parseObjectData(e,n,r,i){const{xScale:s,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(i);let u,h,d,f;for(u=0,h=i;u<h;++u)d=u+r,f=n[d],c[u]={x:s.parse(Rs(f,a),d),y:o.parse(Rs(f,l),d)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,r){const i=this.chart,s=this._cachedMeta,o=n[e.axis],a={keys:xM(i,!0),values:n._stacks[e.axis]._visualValues};return Yx(a,o,s.index,{mode:r})}updateRangeFromParsed(e,n,r,i){const s=r[n.axis];let o=s===null?NaN:s;const a=i&&r._stacks[n.axis];i&&a&&(i.values=a,o=Yx(i,s,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const r=this._cachedMeta,i=r._parsed,s=r._sorted&&e===r.iScale,o=i.length,a=this._getOtherScale(e),l=Iee(n,r,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:h}=bee(a);let d,f;function p(){f=i[d];const g=f[a.axis];return!gt(f[e.axis])||u>g||h<g}for(d=0;d<o&&!(!p()&&(this.updateRangeFromParsed(c,e,f,l),s));++d);if(s){for(d=o-1;d>=0;--d)if(!p()){this.updateRangeFromParsed(c,e,f,l);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,r=[];let i,s,o;for(i=0,s=n.length;i<s;++i)o=n[i][e.axis],gt(o)&&r.push(o);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,r=n.iScale,i=n.vScale,s=this.getParsed(e);return{label:r?""+r.getLabelForValue(s[r.axis]):"",value:i?""+i.getLabelForValue(s[i.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=_ee(_e(this.options.clip,yee(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,r=this._cachedMeta,i=r.data||[],s=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||i.length-a,c=this.options.drawActiveElementsOnTop;let u;for(r.dataset&&r.dataset.draw(e,s,a,l),u=a;u<a+l;++u){const h=i[u];h.hidden||(h.active&&c?o.push(h):h.draw(e,s))}for(u=0;u<o.length;++u)o[u].draw(e,s)}getStyle(e,n){const r=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,n,r){const i=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];s=o.$context||(o.$context=Tee(this.getContext(),e,o)),s.parsed=this.getParsed(e),s.raw=i.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=Eee(this.chart.getContext(),this.index)),s.dataset=i,s.index=s.datasetIndex=this.index;return s.active=!!n,s.mode=r,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",r){const i=n==="active",s=this._cachedDataOpts,o=e+"-"+n,a=s[o],l=this.enableOptionSharing&&Ch(r);if(a)return eR(a,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,e),h=i?[`${e}Hover`,"hover",e,""]:[e,""],d=c.getOptionScopes(this.getDataset(),u),f=Object.keys(mt.elements[e]),p=()=>this.getContext(r,i,n),g=c.resolveNamedOptions(d,f,p,h);return g.$shared&&(g.$shared=l,s[o]=Object.freeze(eR(g,l))),g}_resolveAnimations(e,n,r){const i=this.chart,s=this._cachedDataOpts,o=`animation-${n}`,a=s[o];if(a)return a;let l;if(i.options.animation!==!1){const u=this.chart.config,h=u.datasetAnimationScopeKeys(this._type,n),d=u.getOptionScopes(this.getDataset(),h);l=u.createResolver(d,this.getContext(e,r,n))}const c=new IM(i,l&&l.animations);return l&&l._cacheable&&(s[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||v_(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const r=this.resolveDataElementOptions(e,n),i=this._sharedOptions,s=this.getSharedOptions(r),o=this.includeOptions(n,s)||s!==i;return this.updateSharedOptions(s,n,r),{sharedOptions:s,includeOptions:o}}updateElement(e,n,r,i){v_(i)?Object.assign(e,r):this._resolveAnimations(n,i).update(e,r)}updateSharedOptions(e,n,r){e&&!v_(n)&&this._resolveAnimations(void 0,n).update(e,r)}_setStyle(e,n,r,i){e.active=i;const s=this.getStyle(n,i);this._resolveAnimations(n,r,i).update(e,{options:!i&&this.getSharedOptions(s)||s})}removeHoverStyle(e,n,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,n,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,r=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const i=r.length,s=n.length,o=Math.min(s,i);o&&this.parse(0,o),s>i?this._insertElements(i,s-i,e):s<i&&this._removeElements(s,i-s)}_insertElements(e,n,r=!0){const i=this._cachedMeta,s=i.data,o=e+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(s),a=e;a<o;++a)s[a]=new this.dataElementType;this._parsing&&l(i._parsed),this.parse(e,n),r&&this.updateElements(s,e,n,"reset")}updateElements(e,n,r,i){}_removeElements(e,n){const r=this._cachedMeta;if(this._parsing){const i=r._parsed.splice(e,n);r._stacked&&Pc(r,i)}r.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,r,i]=e;this[n](r,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}q(Sr,"defaults",{}),q(Sr,"datasetElementType",null),q(Sr,"dataElementType",null);function xee(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let r=[];for(let i=0,s=n.length;i<s;i++)r=r.concat(n[i].controller.getAllParsedValues(t));t._cache.$bar=oM(r.sort((i,s)=>i-s))}return t._cache.$bar}function Ree(t){const e=t.iScale,n=xee(e,t.type);let r=e._length,i,s,o,a;const l=()=>{o===32767||o===-32768||(Ch(a)&&(r=Math.min(r,Math.abs(o-a)||r)),a=o)};for(i=0,s=n.length;i<s;++i)o=e.getPixelForValue(n[i]),l();for(a=void 0,i=0,s=e.ticks.length;i<s;++i)o=e.getPixelForTick(i),l();return r}function Aee(t,e,n,r){const i=n.barThickness;let s,o;return Ne(i)?(s=e.min*n.categoryPercentage,o=n.barPercentage):(s=i*r,o=1),{chunk:s/r,ratio:o,start:e.pixels[t]-s/2}}function kee(t,e,n,r){const i=e.pixels,s=i[t];let o=t>0?i[t-1]:null,a=t<i.length-1?i[t+1]:null;const l=n.categoryPercentage;o===null&&(o=s-(a===null?e.end-e.start:a-s)),a===null&&(a=s+s-o);const c=s-(s-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/r,ratio:n.barPercentage,start:c}}function Pee(t,e,n,r){const i=n.parse(t[0],r),s=n.parse(t[1],r),o=Math.min(i,s),a=Math.max(i,s);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),e[n.axis]=c,e._custom={barStart:l,barEnd:c,start:i,end:s,min:o,max:a}}function RM(t,e,n,r){return Ye(t)?Pee(t,e,n,r):e[n.axis]=n.parse(t,r),e}function tR(t,e,n,r){const i=t.iScale,s=t.vScale,o=i.getLabels(),a=i===s,l=[];let c,u,h,d;for(c=n,u=n+r;c<u;++c)d=e[c],h={},h[i.axis]=a||i.parse(o[c],c),l.push(RM(d,h,s,c));return l}function w_(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function Cee(t,e,n){return t!==0?Gr(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}function Nee(t){let e,n,r,i,s;return t.horizontal?(e=t.base>t.x,n="left",r="right"):(e=t.base<t.y,n="bottom",r="top"),e?(i="end",s="start"):(i="start",s="end"),{start:n,end:r,reverse:e,top:i,bottom:s}}function Dee(t,e,n,r){let i=e.borderSkipped;const s={};if(!i){t.borderSkipped=s;return}if(i===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:c,bottom:u}=Nee(t);i==="middle"&&n&&(t.enableBorderRadius=!0,(n._top||0)===r?i=c:(n._bottom||0)===r?i=u:(s[nR(u,o,a,l)]=!0,i=c)),s[nR(i,o,a,l)]=!0,t.borderSkipped=s}function nR(t,e,n,r){return r?(t=Oee(t,e,n),t=rR(t,n,e)):t=rR(t,e,n),t}function Oee(t,e,n){return t===e?n:t===n?e:t}function rR(t,e,n){return t==="start"?e:t==="end"?n:t}function Lee(t,{inflateAmount:e},n){t.inflateAmount=e==="auto"?n===1?.33:0:e}class Zf extends Sr{parsePrimitiveData(e,n,r,i){return tR(e,n,r,i)}parseArrayData(e,n,r,i){return tR(e,n,r,i)}parseObjectData(e,n,r,i){const{iScale:s,vScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=s.axis==="x"?a:l,u=o.axis==="x"?a:l,h=[];let d,f,p,g;for(d=r,f=r+i;d<f;++d)g=n[d],p={},p[s.axis]=s.parse(Rs(g,c),d),h.push(RM(Rs(g,u),p,o,d));return h}updateRangeFromParsed(e,n,r,i){super.updateRangeFromParsed(e,n,r,i);const s=r._custom;s&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,s.min),e.max=Math.max(e.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const n=this._cachedMeta,{iScale:r,vScale:i}=n,s=this.getParsed(e),o=s._custom,a=w_(o)?"["+o.start+", "+o.end+"]":""+i.getLabelForValue(s[i.axis]);return{label:""+r.getLabelForValue(s[r.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,r,i){const s=i==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),u=this._getRuler(),{sharedOptions:h,includeOptions:d}=this._getSharedOptions(n,i);for(let f=n;f<n+r;f++){const p=this.getParsed(f),g=s||Ne(p[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(f),_=this._calculateBarIndexPixels(f,u),y=(p._stacks||{})[a.axis],m={horizontal:c,base:g.base,enableBorderRadius:!y||w_(p._custom)||o===y._top||o===y._bottom,x:c?g.head:_.center,y:c?_.center:g.head,height:c?_.size:Math.abs(g.size),width:c?Math.abs(g.size):_.size};d&&(m.options=h||this.resolveDataElementOptions(f,e[f].active?"active":i));const v=m.options||e[f].options;Dee(m,v,y,o),Lee(m,v,u.ratio),this.updateElement(e[f],f,m,i)}}_getStacks(e,n){const{iScale:r}=this._cachedMeta,i=r.getMatchingVisibleMetas(this._type).filter(l=>l.controller.options.grouped),s=r.options.stacked,o=[],a=l=>{const c=l.controller.getParsed(n),u=c&&c[l.vScale.axis];if(Ne(u)||isNaN(u))return!0};for(const l of i)if(!(n!==void 0&&a(l))&&((s===!1||o.indexOf(l.stack)===-1||s===void 0&&l.stack===void 0)&&o.push(l.stack),l.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,n,r){const i=this._getStacks(e,r),s=n!==void 0?i.indexOf(n):-1;return s===-1?i.length-1:s}_getRuler(){const e=this.options,n=this._cachedMeta,r=n.iScale,i=[];let s,o;for(s=0,o=n.data.length;s<o;++s)i.push(r.getPixelForValue(this.getParsed(s)[r.axis],s));const a=e.barThickness;return{min:a||Ree(n),pixels:i,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:n,_stacked:r,index:i},options:{base:s,minBarLength:o}}=this,a=s||0,l=this.getParsed(e),c=l._custom,u=w_(c);let h=l[n.axis],d=0,f=r?this.applyStack(n,l,r):h,p,g;f!==h&&(d=f-h,f=h),u&&(h=c.barStart,f=c.barEnd-c.barStart,h!==0&&Gr(h)!==Gr(c.barEnd)&&(d=0),d+=h);const _=!Ne(s)&&!u?s:d;let y=n.getPixelForValue(_);if(this.chart.getDataVisibility(e)?p=n.getPixelForValue(d+f):p=y,g=p-y,Math.abs(g)<o){g=Cee(g,n,a)*o,h===a&&(y-=g/2);const m=n.getPixelForDecimal(0),v=n.getPixelForDecimal(1),w=Math.min(m,v),S=Math.max(m,v);y=Math.max(Math.min(y,S),w),p=y+g,r&&!u&&(l._stacks[n.axis]._visualValues[i]=n.getValueForPixel(p)-n.getValueForPixel(y))}if(y===n.getPixelForValue(a)){const m=Gr(g)*n.getLineWidthForValue(a)/2;y+=m,g-=m}return{size:g,base:y,head:p,center:p+g/2}}_calculateBarIndexPixels(e,n){const r=n.scale,i=this.options,s=i.skipNull,o=_e(i.maxBarThickness,1/0);let a,l;if(n.grouped){const c=s?this._getStackCount(e):n.stackCount,u=i.barThickness==="flex"?kee(e,n,i,c):Aee(e,n,i,c),h=this._getStackIndex(this.index,this._cachedMeta.stack,s?e:void 0);a=u.start+u.chunk*h+u.chunk/2,l=Math.min(o,u.chunk*u.ratio)}else a=r.getPixelForValue(this.getParsed(e)[r.axis],e),l=Math.min(o,n.min*n.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const e=this._cachedMeta,n=e.vScale,r=e.data,i=r.length;let s=0;for(;s<i;++s)this.getParsed(s)[n.axis]!==null&&r[s].draw(this._ctx)}}q(Zf,"id","bar"),q(Zf,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),q(Zf,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class ep extends Sr{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,n,r,i){const s=super.parsePrimitiveData(e,n,r,i);for(let o=0;o<s.length;o++)s[o]._custom=this.resolveDataElementOptions(o+r).radius;return s}parseArrayData(e,n,r,i){const s=super.parseArrayData(e,n,r,i);for(let o=0;o<s.length;o++){const a=n[r+o];s[o]._custom=_e(a[2],this.resolveDataElementOptions(o+r).radius)}return s}parseObjectData(e,n,r,i){const s=super.parseObjectData(e,n,r,i);for(let o=0;o<s.length;o++){const a=n[r+o];s[o]._custom=_e(a&&a.r&&+a.r,this.resolveDataElementOptions(o+r).radius)}return s}getMaxOverflow(){const e=this._cachedMeta.data;let n=0;for(let r=e.length-1;r>=0;--r)n=Math.max(n,e[r].size(this.resolveDataElementOptions(r))/2);return n>0&&n}getLabelAndValue(e){const n=this._cachedMeta,r=this.chart.data.labels||[],{xScale:i,yScale:s}=n,o=this.getParsed(e),a=i.getLabelForValue(o.x),l=s.getLabelForValue(o.y),c=o._custom;return{label:r[e]||"",value:"("+a+", "+l+(c?", "+c:"")+")"}}update(e){const n=this._cachedMeta.data;this.updateElements(n,0,n.length,e)}updateElements(e,n,r,i){const s=i==="reset",{iScale:o,vScale:a}=this._cachedMeta,{sharedOptions:l,includeOptions:c}=this._getSharedOptions(n,i),u=o.axis,h=a.axis;for(let d=n;d<n+r;d++){const f=e[d],p=!s&&this.getParsed(d),g={},_=g[u]=s?o.getPixelForDecimal(.5):o.getPixelForValue(p[u]),y=g[h]=s?a.getBasePixel():a.getPixelForValue(p[h]);g.skip=isNaN(_)||isNaN(y),c&&(g.options=l||this.resolveDataElementOptions(d,f.active?"active":i),s&&(g.options.radius=0)),this.updateElement(f,d,g,i)}}resolveDataElementOptions(e,n){const r=this.getParsed(e);let i=super.resolveDataElementOptions(e,n);i.$shared&&(i=Object.assign({},i,{$shared:!1}));const s=i.radius;return n!=="active"&&(i.radius=0),i.radius+=_e(r&&r._custom,s),i}}q(ep,"id","bubble"),q(ep,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),q(ep,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function Mee(t,e,n){let r=1,i=1,s=0,o=0;if(e<Je){const a=t,l=a+e,c=Math.cos(a),u=Math.sin(a),h=Math.cos(l),d=Math.sin(l),f=(v,w,S)=>Nh(v,a,l,!0)?1:Math.max(w,w*n,S,S*n),p=(v,w,S)=>Nh(v,a,l,!0)?-1:Math.min(w,w*n,S,S*n),g=f(0,c,h),_=f(Tt,u,d),y=p(Ze,c,h),m=p(Ze+Tt,u,d);r=(g-y)/2,i=(_-m)/2,s=-(g+y)/2,o=-(_+m)/2}return{ratioX:r,ratioY:i,offsetX:s,offsetY:o}}class yo extends Sr{constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const r=this.getDataset().data,i=this._cachedMeta;if(this._parsing===!1)i._parsed=r;else{let s=l=>+r[l];if(Ae(r[e])){const{key:l="value"}=this._parsing;s=c=>+Rs(r[c],l)}let o,a;for(o=e,a=e+n;o<a;++o)i._parsed[o]=s(o)}}_getRotation(){return vr(this.options.rotation-90)}_getCircumference(){return vr(this.options.circumference)}_getRotationExtents(){let e=Je,n=-Je;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){const i=this.chart.getDatasetMeta(r).controller,s=i._getRotation(),o=i._getCircumference();e=Math.min(e,s),n=Math.max(n,s+o)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:r}=n,i=this._cachedMeta,s=i.data,o=this.getMaxBorderWidth()+this.getMaxOffset(s)+this.options.spacing,a=Math.max((Math.min(r.width,r.height)-o)/2,0),l=Math.min(YJ(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:u,rotation:h}=this._getRotationExtents(),{ratioX:d,ratioY:f,offsetX:p,offsetY:g}=Mee(h,u,l),_=(r.width-o)/d,y=(r.height-o)/f,m=Math.max(Math.min(_,y)/2,0),v=tM(this.options.radius,m),w=Math.max(v*l,0),S=(v-w)/this._getVisibleDatasetWeightTotal();this.offsetX=p*v,this.offsetY=g*v,i.total=this.calculateTotal(),this.outerRadius=v-S*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-S*c,0),this.updateElements(s,0,s.length,e)}_circumference(e,n){const r=this.options,i=this._cachedMeta,s=this._getCircumference();return n&&r.animation.animateRotate||!this.chart.getDataVisibility(e)||i._parsed[e]===null||i.data[e].hidden?0:this.calculateCircumference(i._parsed[e]*s/Je)}updateElements(e,n,r,i){const s=i==="reset",o=this.chart,a=o.chartArea,c=o.options.animation,u=(a.left+a.right)/2,h=(a.top+a.bottom)/2,d=s&&c.animateScale,f=d?0:this.innerRadius,p=d?0:this.outerRadius,{sharedOptions:g,includeOptions:_}=this._getSharedOptions(n,i);let y=this._getRotation(),m;for(m=0;m<n;++m)y+=this._circumference(m,s);for(m=n;m<n+r;++m){const v=this._circumference(m,s),w=e[m],S={x:u+this.offsetX,y:h+this.offsetY,startAngle:y,endAngle:y+v,circumference:v,outerRadius:p,innerRadius:f};_&&(S.options=g||this.resolveDataElementOptions(m,w.active?"active":i)),y+=v,this.updateElement(w,m,S,i)}}calculateTotal(){const e=this._cachedMeta,n=e.data;let r=0,i;for(i=0;i<n.length;i++){const s=e._parsed[i];s!==null&&!isNaN(s)&&this.chart.getDataVisibility(i)&&!n[i].hidden&&(r+=Math.abs(s))}return r}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?Je*(Math.abs(e)/n):0}getLabelAndValue(e){const n=this._cachedMeta,r=this.chart,i=r.data.labels||[],s=kd(n._parsed[e],r.options.locale);return{label:i[e]||"",value:s}}getMaxBorderWidth(e){let n=0;const r=this.chart;let i,s,o,a,l;if(!e){for(i=0,s=r.data.datasets.length;i<s;++i)if(r.isDatasetVisible(i)){o=r.getDatasetMeta(i),e=o.data,a=o.controller;break}}if(!e)return 0;for(i=0,s=e.length;i<s;++i)l=a.resolveDataElementOptions(i),l.borderAlign!=="inner"&&(n=Math.max(n,l.borderWidth||0,l.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let r=0,i=e.length;r<i;++r){const s=this.resolveDataElementOptions(r);n=Math.max(n,s.offset||0,s.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let r=0;r<e;++r)this.chart.isDatasetVisible(r)&&(n+=this._getRingWeight(r));return n}_getRingWeight(e){return Math.max(_e(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}q(yo,"id","doughnut"),q(yo,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),q(yo,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),q(yo,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:r,color:i}}=e.legend.options;return n.labels.map((s,o)=>{const l=e.getDatasetMeta(0).controller.getStyle(o);return{text:s,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:i,lineWidth:l.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,n,r){r.chart.toggleDataVisibility(n.index),r.chart.update()}}}});class tp extends Sr{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:r,data:i=[],_dataset:s}=n,o=this.chart._animationsDisabled;let{start:a,count:l}=cM(n,i,o);this._drawStart=a,this._drawCount=l,uM(n)&&(a=0,l=i.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!s._decimated,r.points=i;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(r,void 0,{animated:!o,options:c},e),this.updateElements(i,a,l,e)}updateElements(e,n,r,i){const s=i==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:u,includeOptions:h}=this._getSharedOptions(n,i),d=o.axis,f=a.axis,{spanGaps:p,segment:g}=this.options,_=Dl(p)?p:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||s||i==="none",m=n+r,v=e.length;let w=n>0&&this.getParsed(n-1);for(let S=0;S<v;++S){const E=e[S],T=y?E:{};if(S<n||S>=m){T.skip=!0;continue}const A=this.getParsed(S),$=Ne(A[f]),L=T[d]=o.getPixelForValue(A[d],S),ee=T[f]=s||$?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,A,l):A[f],S);T.skip=isNaN(L)||isNaN(ee)||$,T.stop=S>0&&Math.abs(A[d]-w[d])>_,g&&(T.parsed=A,T.raw=c.data[S]),h&&(T.options=u||this.resolveDataElementOptions(S,E.active?"active":i)),y||this.updateElement(E,S,T,i),w=A}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,r=n.options&&n.options.borderWidth||0,i=e.data||[];if(!i.length)return r;const s=i[0].size(this.resolveDataElementOptions(0)),o=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(r,s,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}q(tp,"id","line"),q(tp,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),q(tp,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class Cu extends Sr{constructor(e,n){super(e,n),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const n=this._cachedMeta,r=this.chart,i=r.data.labels||[],s=kd(n._parsed[e].r,r.options.locale);return{label:i[e]||"",value:s}}parseObjectData(e,n,r,i){return _M.bind(this)(e,n,r,i)}update(e){const n=this._cachedMeta.data;this._updateRadius(),this.updateElements(n,0,n.length,e)}getMinMax(){const e=this._cachedMeta,n={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((r,i)=>{const s=this.getParsed(i).r;!isNaN(s)&&this.chart.getDataVisibility(i)&&(s<n.min&&(n.min=s),s>n.max&&(n.max=s))}),n}_updateRadius(){const e=this.chart,n=e.chartArea,r=e.options,i=Math.min(n.right-n.left,n.bottom-n.top),s=Math.max(i/2,0),o=Math.max(r.cutoutPercentage?s/100*r.cutoutPercentage:1,0),a=(s-o)/e.getVisibleDatasetCount();this.outerRadius=s-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(e,n,r,i){const s=i==="reset",o=this.chart,l=o.options.animation,c=this._cachedMeta.rScale,u=c.xCenter,h=c.yCenter,d=c.getIndexAngle(0)-.5*Ze;let f=d,p;const g=360/this.countVisibleElements();for(p=0;p<n;++p)f+=this._computeAngle(p,i,g);for(p=n;p<n+r;p++){const _=e[p];let y=f,m=f+this._computeAngle(p,i,g),v=o.getDataVisibility(p)?c.getDistanceFromCenterForValue(this.getParsed(p).r):0;f=m,s&&(l.animateScale&&(v=0),l.animateRotate&&(y=m=d));const w={x:u,y:h,innerRadius:0,outerRadius:v,startAngle:y,endAngle:m,options:this.resolveDataElementOptions(p,_.active?"active":i)};this.updateElement(_,p,w,i)}}countVisibleElements(){const e=this._cachedMeta;let n=0;return e.data.forEach((r,i)=>{!isNaN(this.getParsed(i).r)&&this.chart.getDataVisibility(i)&&n++}),n}_computeAngle(e,n,r){return this.chart.getDataVisibility(e)?vr(this.resolveDataElementOptions(e,n).angle||r):0}}q(Cu,"id","polarArea"),q(Cu,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),q(Cu,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:r,color:i}}=e.legend.options;return n.labels.map((s,o)=>{const l=e.getDatasetMeta(0).controller.getStyle(o);return{text:s,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:i,lineWidth:l.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,n,r){r.chart.toggleDataVisibility(n.index),r.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class O0 extends yo{}q(O0,"id","pie"),q(O0,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class np extends Sr{getLabelAndValue(e){const n=this._cachedMeta.vScale,r=this.getParsed(e);return{label:n.getLabels()[e],value:""+n.getLabelForValue(r[n.axis])}}parseObjectData(e,n,r,i){return _M.bind(this)(e,n,r,i)}update(e){const n=this._cachedMeta,r=n.dataset,i=n.data||[],s=n.iScale.getLabels();if(r.points=i,e!=="resize"){const o=this.resolveDatasetElementOptions(e);this.options.showLine||(o.borderWidth=0);const a={_loop:!0,_fullLoop:s.length===i.length,options:o};this.updateElement(r,void 0,a,e)}this.updateElements(i,0,i.length,e)}updateElements(e,n,r,i){const s=this._cachedMeta.rScale,o=i==="reset";for(let a=n;a<n+r;a++){const l=e[a],c=this.resolveDataElementOptions(a,l.active?"active":i),u=s.getPointPositionForValue(a,this.getParsed(a).r),h=o?s.xCenter:u.x,d=o?s.yCenter:u.y,f={x:h,y:d,angle:u.angle,skip:isNaN(h)||isNaN(d),options:c};this.updateElement(l,a,f,i)}}}q(np,"id","radar"),q(np,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),q(np,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class rp extends Sr{getLabelAndValue(e){const n=this._cachedMeta,r=this.chart.data.labels||[],{xScale:i,yScale:s}=n,o=this.getParsed(e),a=i.getLabelForValue(o.x),l=s.getLabelForValue(o.y);return{label:r[e]||"",value:"("+a+", "+l+")"}}update(e){const n=this._cachedMeta,{data:r=[]}=n,i=this.chart._animationsDisabled;let{start:s,count:o}=cM(n,r,i);if(this._drawStart=s,this._drawCount=o,uM(n)&&(s=0,o=r.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:a,_dataset:l}=n;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!l._decimated,a.points=r;const c=this.resolveDatasetElementOptions(e);c.segment=this.options.segment,this.updateElement(a,void 0,{animated:!i,options:c},e)}else this.datasetElementType&&(delete n.dataset,this.datasetElementType=!1);this.updateElements(r,s,o,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,n,r,i){const s=i==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,u=this.resolveDataElementOptions(n,i),h=this.getSharedOptions(u),d=this.includeOptions(i,h),f=o.axis,p=a.axis,{spanGaps:g,segment:_}=this.options,y=Dl(g)?g:Number.POSITIVE_INFINITY,m=this.chart._animationsDisabled||s||i==="none";let v=n>0&&this.getParsed(n-1);for(let w=n;w<n+r;++w){const S=e[w],E=this.getParsed(w),T=m?S:{},A=Ne(E[p]),$=T[f]=o.getPixelForValue(E[f],w),L=T[p]=s||A?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,E,l):E[p],w);T.skip=isNaN($)||isNaN(L)||A,T.stop=w>0&&Math.abs(E[f]-v[f])>y,_&&(T.parsed=E,T.raw=c.data[w]),d&&(T.options=h||this.resolveDataElementOptions(w,S.active?"active":i)),m||this.updateElement(S,w,T,i),v=E}this.updateSharedOptions(h,i,u)}getMaxOverflow(){const e=this._cachedMeta,n=e.data||[];if(!this.options.showLine){let a=0;for(let l=n.length-1;l>=0;--l)a=Math.max(a,n[l].size(this.resolveDataElementOptions(l))/2);return a>0&&a}const r=e.dataset,i=r.options&&r.options.borderWidth||0;if(!n.length)return i;const s=n[0].size(this.resolveDataElementOptions(0)),o=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(i,s,o)/2}}q(rp,"id","scatter"),q(rp,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),q(rp,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var Vee=Object.freeze({__proto__:null,BarController:Zf,BubbleController:ep,DoughnutController:yo,LineController:tp,PieController:O0,PolarAreaController:Cu,RadarController:np,ScatterController:rp});function Gs(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class bS{constructor(e){q(this,"options");this.options=e||{}}static override(e){Object.assign(bS.prototype,e)}init(){}formats(){return Gs()}parse(){return Gs()}format(){return Gs()}add(){return Gs()}diff(){return Gs()}startOf(){return Gs()}endOf(){return Gs()}}var Fee={_date:bS};function $ee(t,e,n,r){const{controller:i,data:s,_sorted:o}=t,a=i._cachedMeta.iScale;if(a&&e===a.axis&&e!=="r"&&o&&s.length){const l=a._reversePixels?lZ:gi;if(r){if(i._sharedOptions){const c=s[0],u=typeof c.getRange=="function"&&c.getRange(e);if(u){const h=l(s,e,n-u),d=l(s,e,n+u);return{lo:h.lo,hi:d.hi}}}}else return l(s,e,n)}return{lo:0,hi:s.length-1}}function Pd(t,e,n,r,i){const s=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=s.length;a<l;++a){const{index:c,data:u}=s[a],{lo:h,hi:d}=$ee(s[a],e,o,i);for(let f=h;f<=d;++f){const p=u[f];p.skip||r(p,c,f)}}}function Uee(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(r,i){const s=e?Math.abs(r.x-i.x):0,o=n?Math.abs(r.y-i.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function b_(t,e,n,r,i){const s=[];return!i&&!t.isPointInArea(e)||Pd(t,n,e,function(a,l,c){!i&&!mi(a,t.chartArea,0)||a.inRange(e.x,e.y,r)&&s.push({element:a,datasetIndex:l,index:c})},!0),s}function Bee(t,e,n,r){let i=[];function s(o,a,l){const{startAngle:c,endAngle:u}=o.getProps(["startAngle","endAngle"],r),{angle:h}=iM(o,{x:e.x,y:e.y});Nh(h,c,u)&&i.push({element:o,datasetIndex:a,index:l})}return Pd(t,n,e,s),i}function jee(t,e,n,r,i,s){let o=[];const a=Uee(n);let l=Number.POSITIVE_INFINITY;function c(u,h,d){const f=u.inRange(e.x,e.y,i);if(r&&!f)return;const p=u.getCenterPoint(i);if(!(!!s||t.isPointInArea(p))&&!f)return;const _=a(e,p);_<l?(o=[{element:u,datasetIndex:h,index:d}],l=_):_===l&&o.push({element:u,datasetIndex:h,index:d})}return Pd(t,n,e,c),o}function S_(t,e,n,r,i,s){return!s&&!t.isPointInArea(e)?[]:n==="r"&&!r?Bee(t,e,n,i):jee(t,e,n,r,i,s)}function iR(t,e,n,r,i){const s=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return Pd(t,n,e,(l,c,u)=>{l[o](e[n],i)&&(s.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(e.x,e.y,i))}),r&&!a?[]:s}var zee={evaluateInteractionItems:Pd,modes:{index(t,e,n,r){const i=eo(e,t),s=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?b_(t,i,s,r,o):S_(t,i,s,!1,r,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,h=c.data[u];h&&!h.skip&&l.push({element:h,datasetIndex:c.index,index:u})}),l):[]},dataset(t,e,n,r){const i=eo(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?b_(t,i,s,r,o):S_(t,i,s,!1,r,o);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(t,e,n,r){const i=eo(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return b_(t,i,s,r,o)},nearest(t,e,n,r){const i=eo(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return S_(t,i,s,n.intersect,r,o)},x(t,e,n,r){const i=eo(e,t);return iR(t,i,"x",n.intersect,r)},y(t,e,n,r){const i=eo(e,t);return iR(t,i,"y",n.intersect,r)}}};const AM=["left","top","right","bottom"];function Cc(t,e){return t.filter(n=>n.pos===e)}function sR(t,e){return t.filter(n=>AM.indexOf(n.pos)===-1&&n.box.axis===e)}function Nc(t,e){return t.sort((n,r)=>{const i=e?r:n,s=e?n:r;return i.weight===s.weight?i.index-s.index:i.weight-s.weight})}function Wee(t){const e=[];let n,r,i,s,o,a;for(n=0,r=(t||[]).length;n<r;++n)i=t[n],{position:s,options:{stack:o,stackWeight:a=1}}=i,e.push({index:n,box:i,pos:s,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&s+o,stackWeight:a});return e}function Hee(t){const e={};for(const n of t){const{stack:r,pos:i,stackWeight:s}=n;if(!r||!AM.includes(i))continue;const o=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}function qee(t,e){const n=Hee(t),{vBoxMaxWidth:r,hBoxMaxHeight:i}=e;let s,o,a;for(s=0,o=t.length;s<o;++s){a=t[s];const{fullSize:l}=a.box,c=n[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*r:l&&e.availableWidth,a.height=i):(a.width=r,a.height=u?u*i:l&&e.availableHeight)}return n}function Kee(t){const e=Wee(t),n=Nc(e.filter(c=>c.box.fullSize),!0),r=Nc(Cc(e,"left"),!0),i=Nc(Cc(e,"right")),s=Nc(Cc(e,"top"),!0),o=Nc(Cc(e,"bottom")),a=sR(e,"x"),l=sR(e,"y");return{fullSize:n,leftAndTop:r.concat(s),rightAndBottom:i.concat(l).concat(o).concat(a),chartArea:Cc(e,"chartArea"),vertical:r.concat(i).concat(l),horizontal:s.concat(o).concat(a)}}function oR(t,e,n,r){return Math.max(t[n],e[n])+Math.max(t[r],e[r])}function kM(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function Gee(t,e,n,r){const{pos:i,box:s}=n,o=t.maxPadding;if(!Ae(i)){n.size&&(t[i]-=n.size);const h=r[n.stack]||{size:0,count:1};h.size=Math.max(h.size,n.horizontal?s.height:s.width),n.size=h.size/h.count,t[i]+=n.size}s.getPadding&&kM(o,s.getPadding());const a=Math.max(0,e.outerWidth-oR(o,t,"left","right")),l=Math.max(0,e.outerHeight-oR(o,t,"top","bottom")),c=a!==t.w,u=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function Qee(t){const e=t.maxPadding;function n(r){const i=Math.max(e[r]-t[r],0);return t[r]+=i,i}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function Yee(t,e){const n=e.maxPadding;function r(i){const s={left:0,top:0,right:0,bottom:0};return i.forEach(o=>{s[o]=Math.max(e[o],n[o])}),s}return r(t?["left","right"]:["top","bottom"])}function Jc(t,e,n,r){const i=[];let s,o,a,l,c,u;for(s=0,o=t.length,c=0;s<o;++s){a=t[s],l=a.box,l.update(a.width||e.w,a.height||e.h,Yee(a.horizontal,e));const{same:h,other:d}=Gee(e,n,a,r);c|=h&&i.length,u=u||d,l.fullSize||i.push(a)}return c&&Jc(i,e,n,r)||u}function vf(t,e,n,r,i){t.top=n,t.left=e,t.right=e+r,t.bottom=n+i,t.width=r,t.height=i}function aR(t,e,n,r){const i=n.padding;let{x:s,y:o}=e;for(const a of t){const l=a.box,c=r[a.stack]||{count:1,placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const h=e.w*u,d=c.size||l.height;Ch(c.start)&&(o=c.start),l.fullSize?vf(l,i.left,o,n.outerWidth-i.right-i.left,d):vf(l,e.left+c.placed,o,h,d),c.start=o,c.placed+=h,o=l.bottom}else{const h=e.h*u,d=c.size||l.width;Ch(c.start)&&(s=c.start),l.fullSize?vf(l,s,i.top,d,n.outerHeight-i.bottom-i.top):vf(l,s,e.top+c.placed,d,h),c.start=s,c.placed+=h,s=l.right}}e.x=s,e.y=o}var an={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,r){if(!t)return;const i=hn(t.options.layout.padding),s=Math.max(e-i.width,0),o=Math.max(n-i.height,0),a=Kee(t.boxes),l=a.vertical,c=a.horizontal;Oe(t.boxes,g=>{typeof g.beforeLayout=="function"&&g.beforeLayout()});const u=l.reduce((g,_)=>_.box.options&&_.box.options.display===!1?g:g+1,0)||1,h=Object.freeze({outerWidth:e,outerHeight:n,padding:i,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/u,hBoxMaxHeight:o/2}),d=Object.assign({},i);kM(d,hn(r));const f=Object.assign({maxPadding:d,w:s,h:o,x:i.left,y:i.top},i),p=qee(l.concat(c),h);Jc(a.fullSize,f,h,p),Jc(l,f,h,p),Jc(c,f,h,p)&&Jc(l,f,h,p),Qee(f),aR(a.leftAndTop,f,h,p),f.x+=f.w,f.y+=f.h,aR(a.rightAndBottom,f,h,p),t.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},Oe(a.chartArea,g=>{const _=g.box;Object.assign(_,t.chartArea),_.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}};class PM{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,r){}removeEventListener(e,n,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,r,i){return n=Math.max(0,n||e.width),r=r||e.height,{width:n,height:Math.max(0,i?Math.floor(n/i):r)}}isAttached(e){return!0}updateConfig(e){}}class Xee extends PM{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const ip="$chartjs",Jee={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},lR=t=>t===null||t==="";function Zee(t,e){const n=t.style,r=t.getAttribute("height"),i=t.getAttribute("width");if(t[ip]={initial:{height:r,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",lR(i)){const s=Wx(t,"width");s!==void 0&&(t.width=s)}if(lR(r))if(t.style.height==="")t.height=t.width/(e||2);else{const s=Wx(t,"height");s!==void 0&&(t.height=s)}return t}const CM=tee?{passive:!0}:!1;function ete(t,e,n){t&&t.addEventListener(e,n,CM)}function tte(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,CM)}function nte(t,e){const n=Jee[t.type]||t.type,{x:r,y:i}=eo(t,e);return{type:n,chart:e,native:t,x:r!==void 0?r:null,y:i!==void 0?i:null}}function _g(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function rte(t,e,n){const r=t.canvas,i=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||_g(a.addedNodes,r),o=o&&!_g(a.removedNodes,r);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}function ite(t,e,n){const r=t.canvas,i=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||_g(a.removedNodes,r),o=o&&!_g(a.addedNodes,r);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}const Oh=new Map;let cR=0;function NM(){const t=window.devicePixelRatio;t!==cR&&(cR=t,Oh.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function ste(t,e){Oh.size||window.addEventListener("resize",NM),Oh.set(t,e)}function ote(t){Oh.delete(t),Oh.size||window.removeEventListener("resize",NM)}function ate(t,e,n){const r=t.canvas,i=r&&wS(r);if(!i)return;const s=lM((a,l)=>{const c=i.clientWidth;n(a,l),c<i.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||s(c,u)});return o.observe(i),ste(t,s),o}function E_(t,e,n){n&&n.disconnect(),e==="resize"&&ote(t)}function lte(t,e,n){const r=t.canvas,i=lM(s=>{t.ctx!==null&&n(nte(s,t))},t);return ete(r,e,i),i}class cte extends PM{acquireContext(e,n){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(Zee(e,n),r):null}releaseContext(e){const n=e.canvas;if(!n[ip])return!1;const r=n[ip].initial;["height","width"].forEach(s=>{const o=r[s];Ne(o)?n.removeAttribute(s):n.setAttribute(s,o)});const i=r.style||{};return Object.keys(i).forEach(s=>{n.style[s]=i[s]}),n.width=n.width,delete n[ip],!0}addEventListener(e,n,r){this.removeEventListener(e,n);const i=e.$proxies||(e.$proxies={}),o={attach:rte,detach:ite,resize:ate}[n]||lte;i[n]=o(e,n,r)}removeEventListener(e,n){const r=e.$proxies||(e.$proxies={}),i=r[n];if(!i)return;({attach:E_,detach:E_,resize:E_}[n]||tte)(e,n,i),r[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,r,i){return eee(e,n,r,i)}isAttached(e){const n=wS(e);return!!(n&&n.isConnected)}}function ute(t){return!vS()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?Xee:cte}class Rr{constructor(){q(this,"x");q(this,"y");q(this,"active",!1);q(this,"options");q(this,"$animations")}tooltipPosition(e){const{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}hasValue(){return Dl(this.x)&&Dl(this.y)}getProps(e,n){const r=this.$animations;if(!n||!r)return this;const i={};return e.forEach(s=>{i[s]=r[s]&&r[s].active()?r[s]._to:this[s]}),i}}q(Rr,"defaults",{}),q(Rr,"defaultRoutes");function hte(t,e){const n=t.options.ticks,r=dte(t),i=Math.min(n.maxTicksLimit||r,r),s=n.major.enabled?pte(e):[],o=s.length,a=s[0],l=s[o-1],c=[];if(o>i)return gte(e,c,s,o/i),c;const u=fte(s,e,i);if(o>0){let h,d;const f=o>1?Math.round((l-a)/(o-1)):null;for(wf(e,c,u,Ne(f)?0:a-f,a),h=0,d=o-1;h<d;h++)wf(e,c,u,s[h],s[h+1]);return wf(e,c,u,l,Ne(f)?e.length:l+f),c}return wf(e,c,u),c}function dte(t){const e=t.options.offset,n=t._tickSize(),r=t._length/n+(e?0:1),i=t._maxLength/n;return Math.floor(Math.min(r,i))}function fte(t,e,n){const r=mte(t),i=e.length/n;if(!r)return Math.max(i,1);const s=iZ(r);for(let o=0,a=s.length-1;o<a;o++){const l=s[o];if(l>i)return l}return Math.max(i,1)}function pte(t){const e=[];let n,r;for(n=0,r=t.length;n<r;n++)t[n].major&&e.push(n);return e}function gte(t,e,n,r){let i=0,s=n[0],o;for(r=Math.ceil(r),o=0;o<t.length;o++)o===s&&(e.push(t[o]),i++,s=n[i*r])}function wf(t,e,n,r,i){const s=_e(r,0),o=Math.min(_e(i,t.length),t.length);let a=0,l,c,u;for(n=Math.ceil(n),i&&(l=i-r,n=l/Math.floor(l/n)),u=s;u<0;)a++,u=Math.round(s+a*n);for(c=Math.max(s,0);c<o;c++)c===u&&(e.push(t[c]),a++,u=Math.round(s+a*n))}function mte(t){const e=t.length;let n,r;if(e<2)return!1;for(r=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==r)return!1;return r}const yte=t=>t==="left"?"right":t==="right"?"left":t,uR=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,hR=(t,e)=>Math.min(e||t,t);function dR(t,e){const n=[],r=t.length/e,i=t.length;let s=0;for(;s<i;s+=r)n.push(t[Math.floor(s)]);return n}function _te(t,e,n){const r=t.ticks.length,i=Math.min(e,r-1),s=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(i),c;if(!(n&&(r===1?c=Math.max(l-s,o-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(i-1))/2,l+=i<e?c:-c,l<s-a||l>o+a)))return l}function vte(t,e){Oe(t,n=>{const r=n.gc,i=r.length/2;let s;if(i>e){for(s=0;s<i;++s)delete n.data[r[s]];r.splice(0,i)}})}function Dc(t){return t.drawTicks?t.tickLength:0}function fR(t,e){if(!t.display)return 0;const n=Dt(t.font,e),r=hn(t.padding);return(Ye(t.text)?t.text.length:1)*n.lineHeight+r.height}function wte(t,e){return zs(t,{scale:e,type:"scale"})}function bte(t,e,n){return zs(t,{tick:n,index:e,type:"tick"})}function Ste(t,e,n){let r=fS(t);return(n&&e!=="right"||!n&&e==="right")&&(r=yte(r)),r}function Ete(t,e,n,r){const{top:i,left:s,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:u}=l;let h=0,d,f,p;const g=o-i,_=a-s;if(t.isHorizontal()){if(f=sn(r,s,a),Ae(n)){const y=Object.keys(n)[0],m=n[y];p=u[y].getPixelForValue(m)+g-e}else n==="center"?p=(c.bottom+c.top)/2+g-e:p=uR(t,n,e);d=a-s}else{if(Ae(n)){const y=Object.keys(n)[0],m=n[y];f=u[y].getPixelForValue(m)-_+e}else n==="center"?f=(c.left+c.right)/2-_+e:f=uR(t,n,e);p=sn(r,o,i),h=n==="left"?-Tt:Tt}return{titleX:f,titleY:p,maxWidth:d,rotation:h}}class la extends Rr{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:r,_suggestedMax:i}=this;return e=Un(e,Number.POSITIVE_INFINITY),n=Un(n,Number.NEGATIVE_INFINITY),r=Un(r,Number.POSITIVE_INFINITY),i=Un(i,Number.NEGATIVE_INFINITY),{min:Un(e,r),max:Un(n,i),minDefined:gt(e),maxDefined:gt(n)}}getMinMax(e){let{min:n,max:r,minDefined:i,maxDefined:s}=this.getUserBounds(),o;if(i&&s)return{min:n,max:r};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),i||(n=Math.min(n,o.min)),s||(r=Math.max(r,o.max));return n=s&&n>r?r:n,r=i&&n>r?n:r,{min:Un(n,Un(r,n)),max:Un(r,Un(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){je(this.options.beforeUpdate,[this])}update(e,n,r){const{beginAtZero:i,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=NZ(this,s,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?dR(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=hte(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,r;this.isHorizontal()?(n=this.left,r=this.right):(n=this.top,r=this.bottom,e=!e),this._startPixel=n,this._endPixel=r,this._reversePixels=e,this._length=r-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){je(this.options.afterUpdate,[this])}beforeSetDimensions(){je(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){je(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),je(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){je(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let r,i,s;for(r=0,i=e.length;r<i;r++)s=e[r],s.label=je(n.callback,[s.value,r,e],this)}afterTickToLabelConversion(){je(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){je(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,r=hR(this.ticks.length,e.ticks.maxTicksLimit),i=n.minRotation||0,s=n.maxRotation;let o=i,a,l,c;if(!this._isVisible()||!n.display||i>=s||r<=1||!this.isHorizontal()){this.labelRotation=i;return}const u=this._getLabelSizes(),h=u.widest.width,d=u.highest.height,f=$t(this.chart.width-h,0,this.maxWidth);a=e.offset?this.maxWidth/r:f/(r-1),h+6>a&&(a=f/(r-(e.offset?.5:1)),l=this.maxHeight-Dc(e.grid)-n.padding-fR(e.title,this.chart.options.font),c=Math.sqrt(h*h+d*d),o=hS(Math.min(Math.asin($t((u.highest.height+6)/a,-1,1)),Math.asin($t(l/c,-1,1))-Math.asin($t(d/c,-1,1)))),o=Math.max(i,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){je(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){je(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:r,title:i,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=fR(i,n.options.font);if(a?(e.width=this.maxWidth,e.height=Dc(s)+l):(e.height=this.maxHeight,e.width=Dc(s)+l),r.display&&this.ticks.length){const{first:c,last:u,widest:h,highest:d}=this._getLabelSizes(),f=r.padding*2,p=vr(this.labelRotation),g=Math.cos(p),_=Math.sin(p);if(a){const y=r.mirror?0:_*h.width+g*d.height;e.height=Math.min(this.maxHeight,e.height+y+f)}else{const y=r.mirror?0:g*h.width+_*d.height;e.width=Math.min(this.maxWidth,e.width+y+f)}this._calculatePadding(c,u,_,g)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,r,i){const{ticks:{align:s,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let d=0,f=0;l?c?(d=i*e.width,f=r*n.height):(d=r*e.height,f=i*n.width):s==="start"?f=n.width:s==="end"?d=e.width:s!=="inner"&&(d=e.width/2,f=n.width/2),this.paddingLeft=Math.max((d-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((f-h+o)*this.width/(this.width-h),0)}else{let u=n.height/2,h=e.height/2;s==="start"?(u=0,h=e.height):s==="end"&&(u=n.height,h=0),this.paddingTop=u+o,this.paddingBottom=h+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){je(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,r;for(n=0,r=e.length;n<r;n++)Ne(e[n].label)&&(e.splice(n,1),r--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let r=this.ticks;n<r.length&&(r=dR(r,n)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,r){const{ctx:i,_longestTextCache:s}=this,o=[],a=[],l=Math.floor(n/hR(n,r));let c=0,u=0,h,d,f,p,g,_,y,m,v,w,S;for(h=0;h<n;h+=l){if(p=e[h].label,g=this._resolveTickFontOptions(h),i.font=_=g.string,y=s[_]=s[_]||{data:{},gc:[]},m=g.lineHeight,v=w=0,!Ne(p)&&!Ye(p))v=mg(i,y.data,y.gc,v,p),w=m;else if(Ye(p))for(d=0,f=p.length;d<f;++d)S=p[d],!Ne(S)&&!Ye(S)&&(v=mg(i,y.data,y.gc,v,S),w+=m);o.push(v),a.push(w),c=Math.max(v,c),u=Math.max(w,u)}vte(s,n);const E=o.indexOf(c),T=a.indexOf(u),A=$=>({width:o[$]||0,height:a[$]||0});return{first:A(0),last:A(n-1),widest:A(E),highest:A(T),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return aZ(this._alignToPixels?Ks(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const r=n[e];return r.$context||(r.$context=bte(this.getContext(),e,r))}return this.$context||(this.$context=wte(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=vr(this.labelRotation),r=Math.abs(Math.cos(n)),i=Math.abs(Math.sin(n)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,a=s?s.widest.width+o:0,l=s?s.highest.height+o:0;return this.isHorizontal()?l*r>a*i?a/r:l/i:l*i<a*r?l/r:a/i}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,r=this.chart,i=this.options,{grid:s,position:o,border:a}=i,l=s.offset,c=this.isHorizontal(),h=this.ticks.length+(l?1:0),d=Dc(s),f=[],p=a.setContext(this.getContext()),g=p.display?p.width:0,_=g/2,y=function(N){return Ks(r,N,g)};let m,v,w,S,E,T,A,$,L,ee,se,he;if(o==="top")m=y(this.bottom),T=this.bottom-d,$=m-_,ee=y(e.top)+_,he=e.bottom;else if(o==="bottom")m=y(this.top),ee=e.top,he=y(e.bottom)-_,T=m+_,$=this.top+d;else if(o==="left")m=y(this.right),E=this.right-d,A=m-_,L=y(e.left)+_,se=e.right;else if(o==="right")m=y(this.left),L=e.left,se=y(e.right)-_,E=m+_,A=this.left+d;else if(n==="x"){if(o==="center")m=y((e.top+e.bottom)/2+.5);else if(Ae(o)){const N=Object.keys(o)[0],G=o[N];m=y(this.chart.scales[N].getPixelForValue(G))}ee=e.top,he=e.bottom,T=m+_,$=T+d}else if(n==="y"){if(o==="center")m=y((e.left+e.right)/2);else if(Ae(o)){const N=Object.keys(o)[0],G=o[N];m=y(this.chart.scales[N].getPixelForValue(G))}E=m-_,A=E-d,L=e.left,se=e.right}const be=_e(i.ticks.maxTicksLimit,h),I=Math.max(1,Math.ceil(h/be));for(v=0;v<h;v+=I){const N=this.getContext(v),G=s.setContext(N),D=a.setContext(N),B=G.lineWidth,O=G.color,re=D.dash||[],R=D.dashOffset,V=G.tickWidth,j=G.tickColor,ce=G.tickBorderDash||[],Y=G.tickBorderDashOffset;w=_te(this,v,l),w!==void 0&&(S=Ks(r,w,B),c?E=A=L=se=S:T=$=ee=he=S,f.push({tx1:E,ty1:T,tx2:A,ty2:$,x1:L,y1:ee,x2:se,y2:he,width:B,color:O,borderDash:re,borderDashOffset:R,tickWidth:V,tickColor:j,tickBorderDash:ce,tickBorderDashOffset:Y}))}return this._ticksLength=h,this._borderValue=m,f}_computeLabelItems(e){const n=this.axis,r=this.options,{position:i,ticks:s}=r,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:h}=s,d=Dc(r.grid),f=d+u,p=h?-u:f,g=-vr(this.labelRotation),_=[];let y,m,v,w,S,E,T,A,$,L,ee,se,he="middle";if(i==="top")E=this.bottom-p,T=this._getXAxisLabelAlignment();else if(i==="bottom")E=this.top+p,T=this._getXAxisLabelAlignment();else if(i==="left"){const I=this._getYAxisLabelAlignment(d);T=I.textAlign,S=I.x}else if(i==="right"){const I=this._getYAxisLabelAlignment(d);T=I.textAlign,S=I.x}else if(n==="x"){if(i==="center")E=(e.top+e.bottom)/2+f;else if(Ae(i)){const I=Object.keys(i)[0],N=i[I];E=this.chart.scales[I].getPixelForValue(N)+f}T=this._getXAxisLabelAlignment()}else if(n==="y"){if(i==="center")S=(e.left+e.right)/2-f;else if(Ae(i)){const I=Object.keys(i)[0],N=i[I];S=this.chart.scales[I].getPixelForValue(N)}T=this._getYAxisLabelAlignment(d).textAlign}n==="y"&&(l==="start"?he="top":l==="end"&&(he="bottom"));const be=this._getLabelSizes();for(y=0,m=a.length;y<m;++y){v=a[y],w=v.label;const I=s.setContext(this.getContext(y));A=this.getPixelForTick(y)+s.labelOffset,$=this._resolveTickFontOptions(y),L=$.lineHeight,ee=Ye(w)?w.length:1;const N=ee/2,G=I.color,D=I.textStrokeColor,B=I.textStrokeWidth;let O=T;o?(S=A,T==="inner"&&(y===m-1?O=this.options.reverse?"left":"right":y===0?O=this.options.reverse?"right":"left":O="center"),i==="top"?c==="near"||g!==0?se=-ee*L+L/2:c==="center"?se=-be.highest.height/2-N*L+L:se=-be.highest.height+L/2:c==="near"||g!==0?se=L/2:c==="center"?se=be.highest.height/2-N*L:se=be.highest.height-ee*L,h&&(se*=-1),g!==0&&!I.showLabelBackdrop&&(S+=L/2*Math.sin(g))):(E=A,se=(1-ee)*L/2);let re;if(I.showLabelBackdrop){const R=hn(I.backdropPadding),V=be.heights[y],j=be.widths[y];let ce=se-R.top,Y=0-R.left;switch(he){case"middle":ce-=V/2;break;case"bottom":ce-=V;break}switch(T){case"center":Y-=j/2;break;case"right":Y-=j;break;case"inner":y===m-1?Y-=j:y>0&&(Y-=j/2);break}re={left:Y,top:ce,width:j+R.width,height:V+R.height,color:I.backdropColor}}_.push({label:w,font:$,textOffset:se,options:{rotation:g,color:G,strokeColor:D,strokeWidth:B,textAlign:O,textBaseline:he,translation:[S,E],backdrop:re}})}return _}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-vr(this.labelRotation))return e==="top"?"left":"right";let i="center";return n.align==="start"?i="left":n.align==="end"?i="right":n.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:r,mirror:i,padding:s}}=this.options,o=this._getLabelSizes(),a=e+s,l=o.widest.width;let c,u;return n==="left"?i?(u=this.right+s,r==="near"?c="left":r==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,r==="near"?c="right":r==="center"?(c="center",u-=l/2):(c="left",u=this.left)):n==="right"?i?(u=this.left+s,r==="near"?c="right":r==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,r==="near"?c="left":r==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:r,top:i,width:s,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(r,i,s,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const i=this.ticks.findIndex(s=>s.value===e);return i>=0?n.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){const n=this.options.grid,r=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,o;const a=(l,c,u)=>{!u.width||!u.color||(r.save(),r.lineWidth=u.width,r.strokeStyle=u.color,r.setLineDash(u.borderDash||[]),r.lineDashOffset=u.borderDashOffset,r.beginPath(),r.moveTo(l.x,l.y),r.lineTo(c.x,c.y),r.stroke(),r.restore())};if(n.display)for(s=0,o=i.length;s<o;++s){const l=i[s];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:r,grid:i}}=this,s=r.setContext(this.getContext()),o=r.display?s.width:0;if(!o)return;const a=i.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,h,d;this.isHorizontal()?(c=Ks(e,this.left,o)-o/2,u=Ks(e,this.right,a)+a/2,h=d=l):(h=Ks(e,this.top,o)-o/2,d=Ks(e,this.bottom,a)+a/2,c=u=l),n.save(),n.lineWidth=s.width,n.strokeStyle=s.color,n.beginPath(),n.moveTo(c,h),n.lineTo(u,d),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,i=this._computeLabelArea();i&&ry(r,i);const s=this.getLabelItems(e);for(const o of s){const a=o.options,l=o.font,c=o.label,u=o.textOffset;Go(r,c,0,u,l,a)}i&&iy(r)}drawTitle(){const{ctx:e,options:{position:n,title:r,reverse:i}}=this;if(!r.display)return;const s=Dt(r.font),o=hn(r.padding),a=r.align;let l=s.lineHeight/2;n==="bottom"||n==="center"||Ae(n)?(l+=o.bottom,Ye(r.text)&&(l+=s.lineHeight*(r.text.length-1))):l+=o.top;const{titleX:c,titleY:u,maxWidth:h,rotation:d}=Ete(this,l,n,a);Go(e,r.text,0,0,s,{color:r.color,maxWidth:h,rotation:d,textAlign:Ste(a,n,i),textBaseline:"middle",translation:[c,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,r=_e(e.grid&&e.grid.z,-1),i=_e(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==la.prototype.draw?[{z:n,draw:s=>{this.draw(s)}}]:[{z:r,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:n,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",i=[];let s,o;for(s=0,o=n.length;s<o;++s){const a=n[s];a[r]===this.id&&(!e||a.type===e)&&i.push(a)}return i}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return Dt(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class bf{constructor(e,n,r){this.type=e,this.scope=n,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let r;xte(n)&&(r=this.register(n));const i=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in i||(i[s]=e,Tte(e,o,r),this.override&&mt.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,r=e.id,i=this.scope;r in n&&delete n[r],i&&r in mt[i]&&(delete mt[i][r],this.override&&delete Ko[r])}}function Tte(t,e,n){const r=Ph(Object.create(null),[n?mt.get(n):{},mt.get(e),t.defaults]);mt.set(e,r),t.defaultRoutes&&Ite(e,t.defaultRoutes),t.descriptors&&mt.describe(e,t.descriptors)}function Ite(t,e){Object.keys(e).forEach(n=>{const r=n.split("."),i=r.pop(),s=[t].concat(r).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");mt.route(s,i,l,a)})}function xte(t){return"id"in t&&"defaults"in t}class Rte{constructor(){this.controllers=new bf(Sr,"datasets",!0),this.elements=new bf(Rr,"elements"),this.plugins=new bf(Object,"plugins"),this.scales=new bf(la,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,r){[...n].forEach(i=>{const s=r||this._getRegistryForType(i);r||s.isForType(i)||s===this.plugins&&i.id?this._exec(e,s,i):Oe(i,o=>{const a=r||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,r){const i=uS(e);je(r["before"+i],[],r),n[e](r),je(r["after"+i],[],r)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const r=this._typedRegistries[n];if(r.isForType(e))return r}return this.plugins}_get(e,n,r){const i=n.get(e);if(i===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return i}}var Cr=new Rte;class Ate{constructor(){this._init=[]}notify(e,n,r,i){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const s=i?this._descriptors(e).filter(i):this._descriptors(e),o=this._notify(s,e,n,r);return n==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,n,r,i){i=i||{};for(const s of e){const o=s.plugin,a=o[r],l=[n,i,s.options];if(je(a,l,o)===!1&&i.cancelable)return!1}return!0}invalidate(){Ne(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const r=e&&e.config,i=_e(r.options&&r.options.plugins,{}),s=kte(r);return i===!1&&!n?[]:Cte(e,s,i,n)}_notifyStateChanges(e){const n=this._oldCache||[],r=this._cache,i=(s,o)=>s.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(i(n,r),e,"stop"),this._notify(i(r,n),e,"start")}}function kte(t){const e={},n=[],r=Object.keys(Cr.plugins.items);for(let s=0;s<r.length;s++)n.push(Cr.getPlugin(r[s]));const i=t.plugins||[];for(let s=0;s<i.length;s++){const o=i[s];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function Pte(t,e){return!e&&t===!1?null:t===!0?{}:t}function Cte(t,{plugins:e,localIds:n},r,i){const s=[],o=t.getContext();for(const a of e){const l=a.id,c=Pte(r[l],i);c!==null&&s.push({plugin:a,options:Nte(t.config,{plugin:a,local:n[l]},c,o)})}return s}function Nte(t,{plugin:e,local:n},r,i){const s=t.pluginScopeKeys(e),o=t.getOptionScopes(r,s);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function L0(t,e){const n=mt.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function Dte(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function Ote(t,e){return t===e?"_index_":"_value_"}function pR(t){if(t==="x"||t==="y"||t==="r")return t}function Lte(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function M0(t,...e){if(pR(t))return t;for(const n of e){const r=n.axis||Lte(n.position)||t.length>1&&pR(t[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function gR(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function Mte(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(r=>r.xAxisID===t||r.yAxisID===t);if(n.length)return gR(t,"x",n[0])||gR(t,"y",n[0])}return{}}function Vte(t,e){const n=Ko[t.type]||{scales:{}},r=e.scales||{},i=L0(t.type,e),s=Object.create(null);return Object.keys(r).forEach(o=>{const a=r[o];if(!Ae(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=M0(o,a,Mte(o,t),mt.scales[a.type]),c=Ote(l,i),u=n.scales||{};s[o]=Ru(Object.create(null),[{axis:l},a,u[l],u[c]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||L0(a,e),u=(Ko[a]||{}).scales||{};Object.keys(u).forEach(h=>{const d=Dte(h,l),f=o[d+"AxisID"]||d;s[f]=s[f]||Object.create(null),Ru(s[f],[{axis:d},r[f],u[h]])})}),Object.keys(s).forEach(o=>{const a=s[o];Ru(a,[mt.scales[a.type],mt.scale])}),s}function DM(t){const e=t.options||(t.options={});e.plugins=_e(e.plugins,{}),e.scales=Vte(t,e)}function OM(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function Fte(t){return t=t||{},t.data=OM(t.data),DM(t),t}const mR=new Map,LM=new Set;function Sf(t,e){let n=mR.get(t);return n||(n=e(),mR.set(t,n),LM.add(n)),n}const Oc=(t,e,n)=>{const r=Rs(e,n);r!==void 0&&t.add(r)};class $te{constructor(e){this._config=Fte(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=OM(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),DM(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Sf(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return Sf(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return Sf(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,r=this.type;return Sf(`${r}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const r=this._scopeCache;let i=r.get(e);return(!i||n)&&(i=new Map,r.set(e,i)),i}getOptionScopes(e,n,r){const{options:i,type:s}=this,o=this._cachedScopes(e,r),a=o.get(n);if(a)return a;const l=new Set;n.forEach(u=>{e&&(l.add(e),u.forEach(h=>Oc(l,e,h))),u.forEach(h=>Oc(l,i,h)),u.forEach(h=>Oc(l,Ko[s]||{},h)),u.forEach(h=>Oc(l,mt,h)),u.forEach(h=>Oc(l,N0,h))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),LM.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,Ko[n]||{},mt.datasets[n]||{},{type:n},mt,N0]}resolveNamedOptions(e,n,r,i=[""]){const s={$shared:!0},{resolver:o,subPrefixes:a}=yR(this._resolverCache,e,i);let l=o;if(Bte(o,n)){s.$shared=!1,r=As(r)?r():r;const c=this.createResolver(e,r,a);l=Ol(o,r,c)}for(const c of n)s[c]=l[c];return s}createResolver(e,n,r=[""],i){const{resolver:s}=yR(this._resolverCache,e,r);return Ae(n)?Ol(s,n,void 0,i):s}}function yR(t,e,n){let r=t.get(e);r||(r=new Map,t.set(e,r));const i=n.join();let s=r.get(i);return s||(s={resolver:mS(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},r.set(i,s)),s}const Ute=t=>Ae(t)&&Object.getOwnPropertyNames(t).some(e=>As(t[e]));function Bte(t,e){const{isScriptable:n,isIndexable:r}=pM(t);for(const i of e){const s=n(i),o=r(i),a=(o||s)&&t[i];if(s&&(As(a)||Ute(a))||o&&Ye(a))return!0}return!1}var jte="4.4.2";const zte=["top","bottom","left","right","chartArea"];function _R(t,e){return t==="top"||t==="bottom"||zte.indexOf(t)===-1&&e==="x"}function vR(t,e){return function(n,r){return n[t]===r[t]?n[e]-r[e]:n[t]-r[t]}}function wR(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),je(n&&n.onComplete,[t],e)}function Wte(t){const e=t.chart,n=e.options.animation;je(n&&n.onProgress,[t],e)}function MM(t){return vS()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const sp={},bR=t=>{const e=MM(t);return Object.values(sp).filter(n=>n.canvas===e).pop()};function Hte(t,e,n){const r=Object.keys(t);for(const i of r){const s=+i;if(s>=e){const o=t[i];delete t[i],(n>0||s>e)&&(t[s+n]=o)}}}function qte(t,e,n,r){return!n||t.type==="mouseout"?null:r?e:t}function Ef(t,e,n){return t.options.clip?t[n]:e[n]}function Kte(t,e){const{xScale:n,yScale:r}=t;return n&&r?{left:Ef(n,e,"left"),right:Ef(n,e,"right"),top:Ef(r,e,"top"),bottom:Ef(r,e,"bottom")}:e}class ai{static register(...e){Cr.add(...e),SR()}static unregister(...e){Cr.remove(...e),SR()}constructor(e,n){const r=this.config=new $te(n),i=MM(e),s=bR(i);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||ute(i)),this.platform.updateConfig(r);const a=this.platform.acquireContext(i,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=QJ(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Ate,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=hZ(h=>this.update(h),o.resizeDelay||0),this._dataChanges=[],sp[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}ni.listen(this,"complete",wR),ni.listen(this,"progress",Wte),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:r,height:i,_aspectRatio:s}=this;return Ne(e)?n&&s?s:i?r/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Cr}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():zx(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Ux(this.canvas,this.ctx),this}stop(){return ni.stop(this),this}resize(e,n){ni.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const r=this.options,i=this.canvas,s=r.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(i,e,n,s),a=r.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,zx(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),je(r.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};Oe(n,(r,i)=>{r.id=i})}buildOrUpdateScales(){const e=this.options,n=e.scales,r=this.scales,i=Object.keys(r).reduce((o,a)=>(o[a]=!1,o),{});let s=[];n&&(s=s.concat(Object.keys(n).map(o=>{const a=n[o],l=M0(o,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),Oe(s,o=>{const a=o.options,l=a.id,c=M0(l,a),u=_e(a.type,o.dtype);(a.position===void 0||_R(a.position,c)!==_R(o.dposition))&&(a.position=o.dposition),i[l]=!0;let h=null;if(l in r&&r[l].type===u)h=r[l];else{const d=Cr.getScale(u);h=new d({id:l,type:u,ctx:this.ctx,chart:this}),r[h.id]=h}h.init(a,e)}),Oe(i,(o,a)=>{o||delete r[a]}),Oe(r,o=>{an.configure(this,o,o.options),an.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,r=e.length;if(e.sort((i,s)=>i.index-s.index),r>n){for(let i=n;i<r;++i)this._destroyDatasetMeta(i);e.splice(n,r-n)}this._sortedMetasets=e.slice(0).sort(vR("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((r,i)=>{n.filter(s=>s===r._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let r,i;for(this._removeUnreferencedMetasets(),r=0,i=n.length;r<i;r++){const s=n[r];let o=this.getDatasetMeta(r);const a=s.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(r),o=this.getDatasetMeta(r)),o.type=a,o.indexAxis=s.indexAxis||L0(a,this.options),o.order=s.order||0,o.index=r,o.label=""+s.label,o.visible=this.isDatasetVisible(r),o.controller)o.controller.updateIndex(r),o.controller.linkScales();else{const l=Cr.getController(a),{datasetElementType:c,dataElementType:u}=mt.datasets[a];Object.assign(l,{dataElementType:Cr.getElement(u),datasetElementType:c&&Cr.getElement(c)}),o.controller=new l(this,r),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){Oe(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const r=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:h}=this.getDatasetMeta(c),d=!i&&s.indexOf(h)===-1;h.buildOrUpdateElements(d),o=Math.max(+h.getMaxOverflow(),o)}o=this._minPadding=r.layout.autoPadding?o:0,this._updateLayout(o),i||Oe(s,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(vR("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Oe(this.scales,e=>{an.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!Cx(n,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:r,start:i,count:s}of n){const o=r==="_removeElements"?-s:s;Hte(e,i,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,r=s=>new Set(e.filter(o=>o[0]===s).map((o,a)=>a+","+o.splice(1).join(","))),i=r(0);for(let s=1;s<n;s++)if(!Cx(i,r(s)))return;return Array.from(i).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;an.update(this,this.width,this.height,e);const n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],Oe(this.boxes,i=>{r&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,s)=>{i._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,r=this.data.datasets.length;n<r;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,r=this.data.datasets.length;n<r;++n)this._updateDataset(n,As(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const r=this.getDatasetMeta(e),i={meta:r,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(r.controller._update(n),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(ni.has(this)?this.attached&&!ni.running(this)&&ni.start(this):(this.draw(),wR({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:i}=this._resizeBeforeDraw;this._resize(r,i),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,r=[];let i,s;for(i=0,s=n.length;i<s;++i){const o=n[i];(!e||o.visible)&&r.push(o)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,r=e._clip,i=!r.disabled,s=Kte(e,this.chartArea),o={meta:e,index:e.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",o)!==!1&&(i&&ry(n,{left:r.left===!1?0:s.left-r.left,right:r.right===!1?this.width:s.right+r.right,top:r.top===!1?0:s.top-r.top,bottom:r.bottom===!1?this.height:s.bottom+r.bottom}),e.controller.draw(),i&&iy(n),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(e){return mi(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,r,i){const s=zee.modes[n];return typeof s=="function"?s(this,e,r,i):[]}getDatasetMeta(e){const n=this.data.datasets[e],r=this._metasets;let i=r.filter(s=>s&&s._dataset===n).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},r.push(i)),i}getContext(){return this.$context||(this.$context=zs(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!n.hidden}setDatasetVisibility(e,n){const r=this.getDatasetMeta(e);r.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,r){const i=r?"show":"hide",s=this.getDatasetMeta(e),o=s.controller._resolveAnimations(void 0,i);Ch(n)?(s.data[n].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),o.update(s,{visible:r}),this.update(a=>a.datasetIndex===e?i:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),ni.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Ux(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete sp[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,r=(s,o)=>{n.addEventListener(this,s,o),e[s]=o},i=(s,o,a)=>{s.offsetX=o,s.offsetY=a,this._eventHandler(s)};Oe(this.options.events,s=>r(s,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,r=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},i=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},s=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{i("attach",a),this.attached=!0,this.resize(),r("resize",s),r("detach",o)};o=()=>{this.attached=!1,i("resize",s),this._stop(),this._resize(0,0),r("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){Oe(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},Oe(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,r){const i=r?"set":"remove";let s,o,a,l;for(n==="dataset"&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+i+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[i+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],r=e.map(({datasetIndex:s,index:o})=>{const a=this.getDatasetMeta(s);if(!a)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:a.data[o],index:o}});!fg(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}notifyPlugins(e,n,r){return this._plugins.notify(this,e,n,r)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,r){const i=this.options.hover,s=(l,c)=>l.filter(u=>!c.some(h=>u.datasetIndex===h.datasetIndex&&u.index===h.index)),o=s(n,e),a=r?e:s(e,n);o.length&&this.updateHoverStyle(o,i.mode,!1),a.length&&i.mode&&this.updateHoverStyle(a,i.mode,!0)}_eventHandler(e,n){const r={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},i=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,i)===!1)return;const s=this._handleEvent(e,n,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,i),(s||r.changed)&&this.render(),this}_handleEvent(e,n,r){const{_active:i=[],options:s}=this,o=n,a=this._getActiveElements(e,i,r,o),l=tZ(e),c=qte(e,this._lastEvent,r,l);r&&(this._lastEvent=null,je(s.onHover,[e,a,this],this),l&&je(s.onClick,[e,a,this],this));const u=!fg(a,i);return(u||n)&&(this._active=a,this._updateHoverStyles(a,i,n)),this._lastEvent=c,u}_getActiveElements(e,n,r,i){if(e.type==="mouseout")return[];if(!r)return n;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,i)}}q(ai,"defaults",mt),q(ai,"instances",sp),q(ai,"overrides",Ko),q(ai,"registry",Cr),q(ai,"version",jte),q(ai,"getChart",bR);function SR(){return Oe(ai.instances,t=>t._plugins.invalidate())}function Gte(t,e,n){const{startAngle:r,pixelMargin:i,x:s,y:o,outerRadius:a,innerRadius:l}=e;let c=i/a;t.beginPath(),t.arc(s,o,a,r-c,n+c),l>i?(c=i/l,t.arc(s,o,l,n+c,r-c,!0)):t.arc(s,o,i,n+Tt,r-Tt),t.closePath(),t.clip()}function Qte(t){return gS(t,["outerStart","outerEnd","innerStart","innerEnd"])}function Yte(t,e,n,r){const i=Qte(t.options.borderRadius),s=(n-e)/2,o=Math.min(s,r*e/2),a=l=>{const c=(n-Math.min(s,l))*r/2;return $t(l,0,Math.min(s,c))};return{outerStart:a(i.outerStart),outerEnd:a(i.outerEnd),innerStart:$t(i.innerStart,0,o),innerEnd:$t(i.innerEnd,0,o)}}function ba(t,e,n,r){return{x:n+t*Math.cos(e),y:r+t*Math.sin(e)}}function vg(t,e,n,r,i,s){const{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:u}=e,h=Math.max(e.outerRadius+r+n-c,0),d=u>0?u+r+n+c:0;let f=0;const p=i-l;if(r){const I=u>0?u-r:0,N=h>0?h-r:0,G=(I+N)/2,D=G!==0?p*G/(G+r):p;f=(p-D)/2}const g=Math.max(.001,p*h-n/Ze)/h,_=(p-g)/2,y=l+_+f,m=i-_-f,{outerStart:v,outerEnd:w,innerStart:S,innerEnd:E}=Yte(e,d,h,m-y),T=h-v,A=h-w,$=y+v/T,L=m-w/A,ee=d+S,se=d+E,he=y+S/ee,be=m-E/se;if(t.beginPath(),s){const I=($+L)/2;if(t.arc(o,a,h,$,I),t.arc(o,a,h,I,L),w>0){const B=ba(A,L,o,a);t.arc(B.x,B.y,w,L,m+Tt)}const N=ba(se,m,o,a);if(t.lineTo(N.x,N.y),E>0){const B=ba(se,be,o,a);t.arc(B.x,B.y,E,m+Tt,be+Math.PI)}const G=(m-E/d+(y+S/d))/2;if(t.arc(o,a,d,m-E/d,G,!0),t.arc(o,a,d,G,y+S/d,!0),S>0){const B=ba(ee,he,o,a);t.arc(B.x,B.y,S,he+Math.PI,y-Tt)}const D=ba(T,y,o,a);if(t.lineTo(D.x,D.y),v>0){const B=ba(T,$,o,a);t.arc(B.x,B.y,v,y-Tt,$)}}else{t.moveTo(o,a);const I=Math.cos($)*h+o,N=Math.sin($)*h+a;t.lineTo(I,N);const G=Math.cos(L)*h+o,D=Math.sin(L)*h+a;t.lineTo(G,D)}t.closePath()}function Xte(t,e,n,r,i){const{fullCircles:s,startAngle:o,circumference:a}=e;let l=e.endAngle;if(s){vg(t,e,n,r,l,i);for(let c=0;c<s;++c)t.fill();isNaN(a)||(l=o+(a%Je||Je))}return vg(t,e,n,r,l,i),t.fill(),l}function Jte(t,e,n,r,i){const{fullCircles:s,startAngle:o,circumference:a,options:l}=e,{borderWidth:c,borderJoinStyle:u,borderDash:h,borderDashOffset:d}=l,f=l.borderAlign==="inner";if(!c)return;t.setLineDash(h||[]),t.lineDashOffset=d,f?(t.lineWidth=c*2,t.lineJoin=u||"round"):(t.lineWidth=c,t.lineJoin=u||"bevel");let p=e.endAngle;if(s){vg(t,e,n,r,p,i);for(let g=0;g<s;++g)t.stroke();isNaN(a)||(p=o+(a%Je||Je))}f&&Gte(t,e,p),s||(vg(t,e,n,r,p,i),t.stroke())}class Zc extends Rr{constructor(n){super();q(this,"circumference");q(this,"endAngle");q(this,"fullCircles");q(this,"innerRadius");q(this,"outerRadius");q(this,"pixelMargin");q(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,n&&Object.assign(this,n)}inRange(n,r,i){const s=this.getProps(["x","y"],i),{angle:o,distance:a}=iM(s,{x:n,y:r}),{startAngle:l,endAngle:c,innerRadius:u,outerRadius:h,circumference:d}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),f=(this.options.spacing+this.options.borderWidth)/2,g=_e(d,c-l)>=Je||Nh(o,l,c),_=pi(a,u+f,h+f);return g&&_}getCenterPoint(n){const{x:r,y:i,startAngle:s,endAngle:o,innerRadius:a,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],n),{offset:c,spacing:u}=this.options,h=(s+o)/2,d=(a+l+u+c)/2;return{x:r+Math.cos(h)*d,y:i+Math.sin(h)*d}}tooltipPosition(n){return this.getCenterPoint(n)}draw(n){const{options:r,circumference:i}=this,s=(r.offset||0)/4,o=(r.spacing||0)/2,a=r.circular;if(this.pixelMargin=r.borderAlign==="inner"?.33:0,this.fullCircles=i>Je?Math.floor(i/Je):0,i===0||this.innerRadius<0||this.outerRadius<0)return;n.save();const l=(this.startAngle+this.endAngle)/2;n.translate(Math.cos(l)*s,Math.sin(l)*s);const c=1-Math.sin(Math.min(Ze,i||0)),u=s*c;n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,Xte(n,this,u,o,a),Jte(n,this,u,o,a),n.restore()}}q(Zc,"id","arc"),q(Zc,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),q(Zc,"defaultRoutes",{backgroundColor:"backgroundColor"}),q(Zc,"descriptors",{_scriptable:!0,_indexable:n=>n!=="borderDash"});function VM(t,e,n=e){t.lineCap=_e(n.borderCapStyle,e.borderCapStyle),t.setLineDash(_e(n.borderDash,e.borderDash)),t.lineDashOffset=_e(n.borderDashOffset,e.borderDashOffset),t.lineJoin=_e(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=_e(n.borderWidth,e.borderWidth),t.strokeStyle=_e(n.borderColor,e.borderColor)}function Zte(t,e,n){t.lineTo(n.x,n.y)}function ene(t){return t.stepped?EZ:t.tension||t.cubicInterpolationMode==="monotone"?TZ:Zte}function FM(t,e,n={}){const r=t.length,{start:i=0,end:s=r-1}=n,{start:o,end:a}=e,l=Math.max(i,o),c=Math.min(s,a),u=i<o&&s<o||i>a&&s>a;return{count:r,start:l,loop:e.loop,ilen:c<l&&!u?r+c-l:c-l}}function tne(t,e,n,r){const{points:i,options:s}=e,{count:o,start:a,loop:l,ilen:c}=FM(i,n,r),u=ene(s);let{move:h=!0,reverse:d}=r||{},f,p,g;for(f=0;f<=c;++f)p=i[(a+(d?c-f:f))%o],!p.skip&&(h?(t.moveTo(p.x,p.y),h=!1):u(t,g,p,d,s.stepped),g=p);return l&&(p=i[(a+(d?c:0))%o],u(t,g,p,d,s.stepped)),!!l}function nne(t,e,n,r){const i=e.points,{count:s,start:o,ilen:a}=FM(i,n,r),{move:l=!0,reverse:c}=r||{};let u=0,h=0,d,f,p,g,_,y;const m=w=>(o+(c?a-w:w))%s,v=()=>{g!==_&&(t.lineTo(u,_),t.lineTo(u,g),t.lineTo(u,y))};for(l&&(f=i[m(0)],t.moveTo(f.x,f.y)),d=0;d<=a;++d){if(f=i[m(d)],f.skip)continue;const w=f.x,S=f.y,E=w|0;E===p?(S<g?g=S:S>_&&(_=S),u=(h*u+w)/++h):(v(),t.lineTo(w,S),p=E,h=0,g=_=S),y=S}v()}function V0(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?nne:tne}function rne(t){return t.stepped?nee:t.tension||t.cubicInterpolationMode==="monotone"?ree:to}function ine(t,e,n,r){let i=e._path;i||(i=e._path=new Path2D,e.path(i,n,r)&&i.closePath()),VM(t,e.options),t.stroke(i)}function sne(t,e,n,r){const{segments:i,options:s}=e,o=V0(e);for(const a of i)VM(t,s,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+r-1})&&t.closePath(),t.stroke()}const one=typeof Path2D=="function";function ane(t,e,n,r){one&&!e.options.segment?ine(t,e,n,r):sne(t,e,n,r)}class es extends Rr{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const i=r.spanGaps?this._loop:this._fullLoop;GZ(this._points,r,e,i,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=cee(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,r=e.length;return r&&n[e[r-1].end]}interpolate(e,n){const r=this.options,i=e[n],s=this.points,o=TM(this,{property:n,start:i,end:i});if(!o.length)return;const a=[],l=rne(r);let c,u;for(c=0,u=o.length;c<u;++c){const{start:h,end:d}=o[c],f=s[h],p=s[d];if(f===p){a.push(f);continue}const g=Math.abs((i-f[n])/(p[n]-f[n])),_=l(f,p,g,r.stepped);_[n]=e[n],a.push(_)}return a.length===1?a[0]:a}pathSegment(e,n,r){return V0(this)(e,this,n,r)}path(e,n,r){const i=this.segments,s=V0(this);let o=this._loop;n=n||0,r=r||this.points.length-n;for(const a of i)o&=s(e,this,a,{start:n,end:n+r-1});return!!o}draw(e,n,r,i){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(e.save(),ane(e,this,r,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}q(es,"id","line"),q(es,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),q(es,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),q(es,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function ER(t,e,n,r){const i=t.options,{[n]:s}=t.getProps([n],r);return Math.abs(e-s)<i.radius+i.hitRadius}class op extends Rr{constructor(n){super();q(this,"parsed");q(this,"skip");q(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,r,i){const s=this.options,{x:o,y:a}=this.getProps(["x","y"],i);return Math.pow(n-o,2)+Math.pow(r-a,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(n,r){return ER(this,n,"x",r)}inYRange(n,r){return ER(this,n,"y",r)}getCenterPoint(n){const{x:r,y:i}=this.getProps(["x","y"],n);return{x:r,y:i}}size(n){n=n||this.options||{};let r=n.radius||0;r=Math.max(r,r&&n.hoverRadius||0);const i=r&&n.borderWidth||0;return(r+i)*2}draw(n,r){const i=this.options;this.skip||i.radius<.1||!mi(this,r,this.size(i)/2)||(n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.fillStyle=i.backgroundColor,D0(n,i,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}q(op,"id","point"),q(op,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),q(op,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function $M(t,e){const{x:n,y:r,base:i,width:s,height:o}=t.getProps(["x","y","base","width","height"],e);let a,l,c,u,h;return t.horizontal?(h=o/2,a=Math.min(n,i),l=Math.max(n,i),c=r-h,u=r+h):(h=s/2,a=n-h,l=n+h,c=Math.min(r,i),u=Math.max(r,i)),{left:a,top:c,right:l,bottom:u}}function ts(t,e,n,r){return t?0:$t(e,n,r)}function lne(t,e,n){const r=t.options.borderWidth,i=t.borderSkipped,s=fM(r);return{t:ts(i.top,s.top,0,n),r:ts(i.right,s.right,0,e),b:ts(i.bottom,s.bottom,0,n),l:ts(i.left,s.left,0,e)}}function cne(t,e,n){const{enableBorderRadius:r}=t.getProps(["enableBorderRadius"]),i=t.options.borderRadius,s=Io(i),o=Math.min(e,n),a=t.borderSkipped,l=r||Ae(i);return{topLeft:ts(!l||a.top||a.left,s.topLeft,0,o),topRight:ts(!l||a.top||a.right,s.topRight,0,o),bottomLeft:ts(!l||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:ts(!l||a.bottom||a.right,s.bottomRight,0,o)}}function une(t){const e=$M(t),n=e.right-e.left,r=e.bottom-e.top,i=lne(t,n/2,r/2),s=cne(t,n/2,r/2);return{outer:{x:e.left,y:e.top,w:n,h:r,radius:s},inner:{x:e.left+i.l,y:e.top+i.t,w:n-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,s.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(i.b,i.r))}}}}function T_(t,e,n,r){const i=e===null,s=n===null,a=t&&!(i&&s)&&$M(t,r);return a&&(i||pi(e,a.left,a.right))&&(s||pi(n,a.top,a.bottom))}function hne(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function dne(t,e){t.rect(e.x,e.y,e.w,e.h)}function I_(t,e,n={}){const r=t.x!==n.x?-e:0,i=t.y!==n.y?-e:0,s=(t.x+t.w!==n.x+n.w?e:0)-r,o=(t.y+t.h!==n.y+n.h?e:0)-i;return{x:t.x+r,y:t.y+i,w:t.w+s,h:t.h+o,radius:t.radius}}class ap extends Rr{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:n,options:{borderColor:r,backgroundColor:i}}=this,{inner:s,outer:o}=une(this),a=hne(o.radius)?Dh:dne;e.save(),(o.w!==s.w||o.h!==s.h)&&(e.beginPath(),a(e,I_(o,n,s)),e.clip(),a(e,I_(s,-n,o)),e.fillStyle=r,e.fill("evenodd")),e.beginPath(),a(e,I_(s,n)),e.fillStyle=i,e.fill(),e.restore()}inRange(e,n,r){return T_(this,e,n,r)}inXRange(e,n){return T_(this,e,null,n)}inYRange(e,n){return T_(this,null,e,n)}getCenterPoint(e){const{x:n,y:r,base:i,horizontal:s}=this.getProps(["x","y","base","horizontal"],e);return{x:s?(n+i)/2:n,y:s?r:(r+i)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}q(ap,"id","bar"),q(ap,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),q(ap,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var fne=Object.freeze({__proto__:null,ArcElement:Zc,BarElement:ap,LineElement:es,PointElement:op});const F0=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],TR=F0.map(t=>t.replace("rgb(","rgba(").replace(")",", 0.5)"));function UM(t){return F0[t%F0.length]}function BM(t){return TR[t%TR.length]}function pne(t,e){return t.borderColor=UM(e),t.backgroundColor=BM(e),++e}function gne(t,e){return t.backgroundColor=t.data.map(()=>UM(e++)),e}function mne(t,e){return t.backgroundColor=t.data.map(()=>BM(e++)),e}function yne(t){let e=0;return(n,r)=>{const i=t.getDatasetMeta(r).controller;i instanceof yo?e=gne(n,e):i instanceof Cu?e=mne(n,e):i&&(e=pne(n,e))}}function IR(t){let e;for(e in t)if(t[e].borderColor||t[e].backgroundColor)return!0;return!1}function _ne(t){return t&&(t.borderColor||t.backgroundColor)}var vne={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(t,e,n){if(!n.enabled)return;const{data:{datasets:r},options:i}=t.config,{elements:s}=i;if(!n.forceOverride&&(IR(r)||_ne(i)||s&&IR(s)))return;const o=yne(t);r.forEach(o)}};function wne(t,e,n,r,i){const s=i.samples||r;if(s>=n)return t.slice(e,e+n);const o=[],a=(n-2)/(s-2);let l=0;const c=e+n-1;let u=e,h,d,f,p,g;for(o[l++]=t[u],h=0;h<s-2;h++){let _=0,y=0,m;const v=Math.floor((h+1)*a)+1+e,w=Math.min(Math.floor((h+2)*a)+1,n)+e,S=w-v;for(m=v;m<w;m++)_+=t[m].x,y+=t[m].y;_/=S,y/=S;const E=Math.floor(h*a)+1+e,T=Math.min(Math.floor((h+1)*a)+1,n)+e,{x:A,y:$}=t[u];for(f=p=-1,m=E;m<T;m++)p=.5*Math.abs((A-_)*(t[m].y-$)-(A-t[m].x)*(y-$)),p>f&&(f=p,d=t[m],g=m);o[l++]=d,u=g}return o[l++]=t[c],o}function bne(t,e,n,r){let i=0,s=0,o,a,l,c,u,h,d,f,p,g;const _=[],y=e+n-1,m=t[e].x,w=t[y].x-m;for(o=e;o<e+n;++o){a=t[o],l=(a.x-m)/w*r,c=a.y;const S=l|0;if(S===u)c<p?(p=c,h=o):c>g&&(g=c,d=o),i=(s*i+a.x)/++s;else{const E=o-1;if(!Ne(h)&&!Ne(d)){const T=Math.min(h,d),A=Math.max(h,d);T!==f&&T!==E&&_.push({...t[T],x:i}),A!==f&&A!==E&&_.push({...t[A],x:i})}o>0&&E!==f&&_.push(t[E]),_.push(a),u=S,s=0,p=g=c,h=d=f=o}}return _}function jM(t){if(t._decimated){const e=t._data;delete t._decimated,delete t._data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function xR(t){t.data.datasets.forEach(e=>{jM(e)})}function Sne(t,e){const n=e.length;let r=0,i;const{iScale:s}=t,{min:o,max:a,minDefined:l,maxDefined:c}=s.getUserBounds();return l&&(r=$t(gi(e,s.axis,o).lo,0,n-1)),c?i=$t(gi(e,s.axis,a).hi+1,r,n)-r:i=n-r,{start:r,count:i}}var Ene={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(t,e,n)=>{if(!n.enabled){xR(t);return}const r=t.width;t.data.datasets.forEach((i,s)=>{const{_data:o,indexAxis:a}=i,l=t.getDatasetMeta(s),c=o||i.data;if(Xc([a,t.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;const u=t.scales[l.xAxisID];if(u.type!=="linear"&&u.type!=="time"||t.options.parsing)return;let{start:h,count:d}=Sne(l,c);const f=n.threshold||4*r;if(d<=f){jM(i);return}Ne(o)&&(i._data=c,delete i.data,Object.defineProperty(i,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(g){this._data=g}}));let p;switch(n.algorithm){case"lttb":p=wne(c,h,d,r,n);break;case"min-max":p=bne(c,h,d,r);break;default:throw new Error(`Unsupported decimation algorithm '${n.algorithm}'`)}i._decimated=p})},destroy(t){xR(t)}};function Tne(t,e,n){const r=t.segments,i=t.points,s=e.points,o=[];for(const a of r){let{start:l,end:c}=a;c=SS(l,c,i);const u=$0(n,i[l],i[c],a.loop);if(!e.segments){o.push({source:a,target:u,start:i[l],end:i[c]});continue}const h=TM(e,u);for(const d of h){const f=$0(n,s[d.start],s[d.end],d.loop),p=EM(a,i,f);for(const g of p)o.push({source:g,target:d,start:{[n]:RR(u,f,"start",Math.max)},end:{[n]:RR(u,f,"end",Math.min)}})}}return o}function $0(t,e,n,r){if(r)return;let i=e[t],s=n[t];return t==="angle"&&(i=jn(i),s=jn(s)),{property:t,start:i,end:s}}function Ine(t,e){const{x:n=null,y:r=null}=t||{},i=e.points,s=[];return e.segments.forEach(({start:o,end:a})=>{a=SS(o,a,i);const l=i[o],c=i[a];r!==null?(s.push({x:l.x,y:r}),s.push({x:c.x,y:r})):n!==null&&(s.push({x:n,y:l.y}),s.push({x:n,y:c.y}))}),s}function SS(t,e,n){for(;e>t;e--){const r=n[e];if(!isNaN(r.x)&&!isNaN(r.y))break}return e}function RR(t,e,n,r){return t&&e?r(t[n],e[n]):t?t[n]:e?e[n]:0}function zM(t,e){let n=[],r=!1;return Ye(t)?(r=!0,n=t):n=Ine(t,e),n.length?new es({points:n,options:{tension:0},_loop:r,_fullLoop:r}):null}function AR(t){return t&&t.fill!==!1}function xne(t,e,n){let i=t[e].fill;const s=[e];let o;if(!n)return i;for(;i!==!1&&s.indexOf(i)===-1;){if(!gt(i))return i;if(o=t[i],!o)return!1;if(o.visible)return i;s.push(i),i=o.fill}return!1}function Rne(t,e,n){const r=Cne(t);if(Ae(r))return isNaN(r.value)?!1:r;let i=parseFloat(r);return gt(i)&&Math.floor(i)===i?Ane(r[0],e,i,n):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function Ane(t,e,n,r){return(t==="-"||t==="+")&&(n=e+n),n===e||n<0||n>=r?!1:n}function kne(t,e){let n=null;return t==="start"?n=e.bottom:t==="end"?n=e.top:Ae(t)?n=e.getPixelForValue(t.value):e.getBasePixel&&(n=e.getBasePixel()),n}function Pne(t,e,n){let r;return t==="start"?r=n:t==="end"?r=e.options.reverse?e.min:e.max:Ae(t)?r=t.value:r=e.getBaseValue(),r}function Cne(t){const e=t.options,n=e.fill;let r=_e(n&&n.target,n);return r===void 0&&(r=!!e.backgroundColor),r===!1||r===null?!1:r===!0?"origin":r}function Nne(t){const{scale:e,index:n,line:r}=t,i=[],s=r.segments,o=r.points,a=Dne(e,n);a.push(zM({x:null,y:e.bottom},r));for(let l=0;l<s.length;l++){const c=s[l];for(let u=c.start;u<=c.end;u++)One(i,o[u],a)}return new es({points:i,options:{}})}function Dne(t,e){const n=[],r=t.getMatchingVisibleMetas("line");for(let i=0;i<r.length;i++){const s=r[i];if(s.index===e)break;s.hidden||n.unshift(s.dataset)}return n}function One(t,e,n){const r=[];for(let i=0;i<n.length;i++){const s=n[i],{first:o,last:a,point:l}=Lne(s,e,"x");if(!(!l||o&&a)){if(o)r.unshift(l);else if(t.push(l),!a)break}}t.push(...r)}function Lne(t,e,n){const r=t.interpolate(e,n);if(!r)return{};const i=r[n],s=t.segments,o=t.points;let a=!1,l=!1;for(let c=0;c<s.length;c++){const u=s[c],h=o[u.start][n],d=o[u.end][n];if(pi(i,h,d)){a=i===h,l=i===d;break}}return{first:a,last:l,point:r}}class WM{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,n,r){const{x:i,y:s,radius:o}=this;return n=n||{start:0,end:Je},e.arc(i,s,o,n.end,n.start,!0),!r.bounds}interpolate(e){const{x:n,y:r,radius:i}=this,s=e.angle;return{x:n+Math.cos(s)*i,y:r+Math.sin(s)*i,angle:s}}}function Mne(t){const{chart:e,fill:n,line:r}=t;if(gt(n))return Vne(e,n);if(n==="stack")return Nne(t);if(n==="shape")return!0;const i=Fne(t);return i instanceof WM?i:zM(i,r)}function Vne(t,e){const n=t.getDatasetMeta(e);return n&&t.isDatasetVisible(e)?n.dataset:null}function Fne(t){return(t.scale||{}).getPointPositionForValue?Une(t):$ne(t)}function $ne(t){const{scale:e={},fill:n}=t,r=kne(n,e);if(gt(r)){const i=e.isHorizontal();return{x:i?r:null,y:i?null:r}}return null}function Une(t){const{scale:e,fill:n}=t,r=e.options,i=e.getLabels().length,s=r.reverse?e.max:e.min,o=Pne(n,e,s),a=[];if(r.grid.circular){const l=e.getPointPositionForValue(0,s);return new WM({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(o)})}for(let l=0;l<i;++l)a.push(e.getPointPositionForValue(l,o));return a}function x_(t,e,n){const r=Mne(e),{line:i,scale:s,axis:o}=e,a=i.options,l=a.fill,c=a.backgroundColor,{above:u=c,below:h=c}=l||{};r&&i.points.length&&(ry(t,n),Bne(t,{line:i,target:r,above:u,below:h,area:n,scale:s,axis:o}),iy(t))}function Bne(t,e){const{line:n,target:r,above:i,below:s,area:o,scale:a}=e,l=n._loop?"angle":e.axis;t.save(),l==="x"&&s!==i&&(kR(t,r,o.top),PR(t,{line:n,target:r,color:i,scale:a,property:l}),t.restore(),t.save(),kR(t,r,o.bottom)),PR(t,{line:n,target:r,color:s,scale:a,property:l}),t.restore()}function kR(t,e,n){const{segments:r,points:i}=e;let s=!0,o=!1;t.beginPath();for(const a of r){const{start:l,end:c}=a,u=i[l],h=i[SS(l,c,i)];s?(t.moveTo(u.x,u.y),s=!1):(t.lineTo(u.x,n),t.lineTo(u.x,u.y)),o=!!e.pathSegment(t,a,{move:o}),o?t.closePath():t.lineTo(h.x,n)}t.lineTo(e.first().x,n),t.closePath(),t.clip()}function PR(t,e){const{line:n,target:r,property:i,color:s,scale:o}=e,a=Tne(n,r,i);for(const{source:l,target:c,start:u,end:h}of a){const{style:{backgroundColor:d=s}={}}=l,f=r!==!0;t.save(),t.fillStyle=d,jne(t,o,f&&$0(i,u,h)),t.beginPath();const p=!!n.pathSegment(t,l);let g;if(f){p?t.closePath():CR(t,r,h,i);const _=!!r.pathSegment(t,c,{move:p,reverse:!0});g=p&&_,g||CR(t,r,u,i)}t.closePath(),t.fill(g?"evenodd":"nonzero"),t.restore()}}function jne(t,e,n){const{top:r,bottom:i}=e.chart.chartArea,{property:s,start:o,end:a}=n||{};s==="x"&&(t.beginPath(),t.rect(o,r,a-o,i-r),t.clip())}function CR(t,e,n,r){const i=e.interpolate(n,r);i&&t.lineTo(i.x,i.y)}var zne={id:"filler",afterDatasetsUpdate(t,e,n){const r=(t.data.datasets||[]).length,i=[];let s,o,a,l;for(o=0;o<r;++o)s=t.getDatasetMeta(o),a=s.dataset,l=null,a&&a.options&&a instanceof es&&(l={visible:t.isDatasetVisible(o),index:o,fill:Rne(a,o,r),chart:t,axis:s.controller.options.indexAxis,scale:s.vScale,line:a}),s.$filler=l,i.push(l);for(o=0;o<r;++o)l=i[o],!(!l||l.fill===!1)&&(l.fill=xne(i,o,n.propagate))},beforeDraw(t,e,n){const r=n.drawTime==="beforeDraw",i=t.getSortedVisibleDatasetMetas(),s=t.chartArea;for(let o=i.length-1;o>=0;--o){const a=i[o].$filler;a&&(a.line.updateControlPoints(s,a.axis),r&&a.fill&&x_(t.ctx,a,s))}},beforeDatasetsDraw(t,e,n){if(n.drawTime!=="beforeDatasetsDraw")return;const r=t.getSortedVisibleDatasetMetas();for(let i=r.length-1;i>=0;--i){const s=r[i].$filler;AR(s)&&x_(t.ctx,s,t.chartArea)}},beforeDatasetDraw(t,e,n){const r=e.meta.$filler;!AR(r)||n.drawTime!=="beforeDatasetDraw"||x_(t.ctx,r,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const NR=(t,e)=>{let{boxHeight:n=e,boxWidth:r=e}=t;return t.usePointStyle&&(n=Math.min(n,e),r=t.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(e,n)}},Wne=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class DR extends Rr{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,r){this.maxWidth=e,this.maxHeight=n,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=je(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(r=>e.filter(r,this.chart.data))),e.sort&&(n=n.sort((r,i)=>e.sort(r,i,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,i=Dt(r.font),s=i.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=NR(r,s);let c,u;n.font=i.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(o,s,a,l)+10):(u=this.maxHeight,c=this._fitCols(o,i,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,n,r,i){const{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=i+a;let h=e;s.textAlign="left",s.textBaseline="middle";let d=-1,f=-u;return this.legendItems.forEach((p,g)=>{const _=r+n/2+s.measureText(p.text).width;(g===0||c[c.length-1]+_+2*a>o)&&(h+=u,c[c.length-(g>0?0:1)]=0,f+=u,d++),l[g]={left:0,top:f,row:d,width:_,height:i},c[c.length-1]+=_+a}),h}_fitCols(e,n,r,i){const{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=o-e;let h=a,d=0,f=0,p=0,g=0;return this.legendItems.forEach((_,y)=>{const{itemWidth:m,itemHeight:v}=Hne(r,n,s,_,i);y>0&&f+v+2*a>u&&(h+=d+a,c.push({width:d,height:f}),p+=d+a,g++,d=f=0),l[y]={left:p,top:f,col:g,width:m,height:v},d=Math.max(d,m),f+=v+a}),h+=d,c.push({width:d,height:f}),h}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:r,labels:{padding:i},rtl:s}}=this,o=il(s,this.left,this.width);if(this.isHorizontal()){let a=0,l=sn(r,this.left+i,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=sn(r,this.left+i,this.right-this.lineWidths[a])),c.top+=this.top+e+i,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+i}else{let a=0,l=sn(r,this.top+e+i,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=sn(r,this.top+e+i,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+i,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;ry(e,this),this._draw(),iy(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:r,ctx:i}=this,{align:s,labels:o}=e,a=mt.color,l=il(e.rtl,this.left,this.width),c=Dt(o.font),{padding:u}=o,h=c.size,d=h/2;let f;this.drawTitle(),i.textAlign=l.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=c.string;const{boxWidth:p,boxHeight:g,itemHeight:_}=NR(o,h),y=function(E,T,A){if(isNaN(p)||p<=0||isNaN(g)||g<0)return;i.save();const $=_e(A.lineWidth,1);if(i.fillStyle=_e(A.fillStyle,a),i.lineCap=_e(A.lineCap,"butt"),i.lineDashOffset=_e(A.lineDashOffset,0),i.lineJoin=_e(A.lineJoin,"miter"),i.lineWidth=$,i.strokeStyle=_e(A.strokeStyle,a),i.setLineDash(_e(A.lineDash,[])),o.usePointStyle){const L={radius:g*Math.SQRT2/2,pointStyle:A.pointStyle,rotation:A.rotation,borderWidth:$},ee=l.xPlus(E,p/2),se=T+d;dM(i,L,ee,se,o.pointStyleWidth&&p)}else{const L=T+Math.max((h-g)/2,0),ee=l.leftForLtr(E,p),se=Io(A.borderRadius);i.beginPath(),Object.values(se).some(he=>he!==0)?Dh(i,{x:ee,y:L,w:p,h:g,radius:se}):i.rect(ee,L,p,g),i.fill(),$!==0&&i.stroke()}i.restore()},m=function(E,T,A){Go(i,A.text,E,T+_/2,c,{strikethrough:A.hidden,textAlign:l.textAlign(A.textAlign)})},v=this.isHorizontal(),w=this._computeTitleHeight();v?f={x:sn(s,this.left+u,this.right-r[0]),y:this.top+u+w,line:0}:f={x:this.left+u,y:sn(s,this.top+w+u,this.bottom-n[0].height),line:0},wM(this.ctx,e.textDirection);const S=_+u;this.legendItems.forEach((E,T)=>{i.strokeStyle=E.fontColor,i.fillStyle=E.fontColor;const A=i.measureText(E.text).width,$=l.textAlign(E.textAlign||(E.textAlign=o.textAlign)),L=p+d+A;let ee=f.x,se=f.y;l.setWidth(this.width),v?T>0&&ee+L+u>this.right&&(se=f.y+=S,f.line++,ee=f.x=sn(s,this.left+u,this.right-r[f.line])):T>0&&se+S>this.bottom&&(ee=f.x=ee+n[f.line].width+u,f.line++,se=f.y=sn(s,this.top+w+u,this.bottom-n[f.line].height));const he=l.x(ee);if(y(he,se,E),ee=dZ($,ee+p+d,v?ee+L:this.right,e.rtl),m(l.x(ee),se,E),v)f.x+=L+u;else if(typeof E.text!="string"){const be=c.lineHeight;f.y+=HM(E,be)+u}else f.y+=S}),bM(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,r=Dt(n.font),i=hn(n.padding);if(!n.display)return;const s=il(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=r.size/2,c=i.top+l;let u,h=this.left,d=this.width;if(this.isHorizontal())d=Math.max(...this.lineWidths),u=this.top+c,h=sn(e.align,h,this.right-d);else{const p=this.columnSizes.reduce((g,_)=>Math.max(g,_.height),0);u=c+sn(e.align,this.top,this.bottom-p-e.labels.padding-this._computeTitleHeight())}const f=sn(a,h,h+d);o.textAlign=s.textAlign(fS(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=r.string,Go(o,n.text,f,u,r)}_computeTitleHeight(){const e=this.options.title,n=Dt(e.font),r=hn(e.padding);return e.display?n.lineHeight+r.height:0}_getLegendItemAt(e,n){let r,i,s;if(pi(e,this.left,this.right)&&pi(n,this.top,this.bottom)){for(s=this.legendHitBoxes,r=0;r<s.length;++r)if(i=s[r],pi(e,i.left,i.left+i.width)&&pi(n,i.top,i.top+i.height))return this.legendItems[r]}return null}handleEvent(e){const n=this.options;if(!Gne(e.type,n))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const i=this._hoveredItem,s=Wne(i,r);i&&!s&&je(n.onLeave,[e,i,this],this),this._hoveredItem=r,r&&!s&&je(n.onHover,[e,r,this],this)}else r&&je(n.onClick,[e,r,this],this)}}function Hne(t,e,n,r,i){const s=qne(r,t,e,n),o=Kne(i,r,e.lineHeight);return{itemWidth:s,itemHeight:o}}function qne(t,e,n,r){let i=t.text;return i&&typeof i!="string"&&(i=i.reduce((s,o)=>s.length>o.length?s:o)),e+n.size/2+r.measureText(i).width}function Kne(t,e,n){let r=t;return typeof e.text!="string"&&(r=HM(e,n)),r}function HM(t,e){const n=t.text?t.text.length:0;return e*n}function Gne(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var Qne={id:"legend",_element:DR,start(t,e,n){const r=t.legend=new DR({ctx:t.ctx,options:n,chart:t});an.configure(t,r,n),an.addBox(t,r)},stop(t){an.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const r=t.legend;an.configure(t,r,n),r.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const r=e.datasetIndex,i=n.chart;i.isDatasetVisible(r)?(i.hide(r),e.hidden=!0):(i.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:i,color:s,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),u=hn(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:r||c.pointStyle,rotation:c.rotation,textAlign:i||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class ES extends Rr{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const i=Ye(r.text)?r.text.length:1;this._padding=hn(r.padding);const s=i*Dt(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:r,bottom:i,right:s,options:o}=this,a=o.align;let l=0,c,u,h;return this.isHorizontal()?(u=sn(a,r,s),h=n+e,c=s-r):(o.position==="left"?(u=r+e,h=sn(a,i,n),l=Ze*-.5):(u=s-e,h=sn(a,n,i),l=Ze*.5),c=i-n),{titleX:u,titleY:h,maxWidth:c,rotation:l}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const r=Dt(n.font),s=r.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(s);Go(e,n.text,0,0,r,{color:n.color,maxWidth:l,rotation:c,textAlign:fS(n.align),textBaseline:"middle",translation:[o,a]})}}function Yne(t,e){const n=new ES({ctx:t.ctx,options:e,chart:t});an.configure(t,n,e),an.addBox(t,n),t.titleBlock=n}var Xne={id:"title",_element:ES,start(t,e,n){Yne(t,n)},stop(t){const e=t.titleBlock;an.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const r=t.titleBlock;an.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Tf=new WeakMap;var Jne={id:"subtitle",start(t,e,n){const r=new ES({ctx:t.ctx,options:n,chart:t});an.configure(t,r,n),an.addBox(t,r),Tf.set(t,r)},stop(t){an.removeBox(t,Tf.get(t)),Tf.delete(t)},beforeUpdate(t,e,n){const r=Tf.get(t);an.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const eu={average(t){if(!t.length)return!1;let e,n,r=new Set,i=0,s=0;for(e=0,n=t.length;e<n;++e){const a=t[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();r.add(l.x),i+=l.y,++s}}return{x:[...r].reduce((a,l)=>a+l)/r.size,y:i/s}},nearest(t,e){if(!t.length)return!1;let n=e.x,r=e.y,i=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=t.length;s<o;++s){const l=t[s].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=C0(e,c);u<i&&(i=u,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,r=l.y}return{x:n,y:r}}};function kr(t,e){return e&&(Ye(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function ri(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function Zne(t,e){const{element:n,datasetIndex:r,index:i}=e,s=t.getDatasetMeta(r).controller,{label:o,value:a}=s.getLabelAndValue(i);return{chart:t,label:o,parsed:s.getParsed(i),raw:t.data.datasets[r].data[i],formattedValue:a,dataset:s.getDataset(),dataIndex:i,datasetIndex:r,element:n}}function OR(t,e){const n=t.chart.ctx,{body:r,footer:i,title:s}=t,{boxWidth:o,boxHeight:a}=e,l=Dt(e.bodyFont),c=Dt(e.titleFont),u=Dt(e.footerFont),h=s.length,d=i.length,f=r.length,p=hn(e.padding);let g=p.height,_=0,y=r.reduce((w,S)=>w+S.before.length+S.lines.length+S.after.length,0);if(y+=t.beforeBody.length+t.afterBody.length,h&&(g+=h*c.lineHeight+(h-1)*e.titleSpacing+e.titleMarginBottom),y){const w=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;g+=f*w+(y-f)*l.lineHeight+(y-1)*e.bodySpacing}d&&(g+=e.footerMarginTop+d*u.lineHeight+(d-1)*e.footerSpacing);let m=0;const v=function(w){_=Math.max(_,n.measureText(w).width+m)};return n.save(),n.font=c.string,Oe(t.title,v),n.font=l.string,Oe(t.beforeBody.concat(t.afterBody),v),m=e.displayColors?o+2+e.boxPadding:0,Oe(r,w=>{Oe(w.before,v),Oe(w.lines,v),Oe(w.after,v)}),m=0,n.font=u.string,Oe(t.footer,v),n.restore(),_+=p.width,{width:_,height:g}}function ere(t,e){const{y:n,height:r}=e;return n<r/2?"top":n>t.height-r/2?"bottom":"center"}function tre(t,e,n,r){const{x:i,width:s}=r,o=n.caretSize+n.caretPadding;if(t==="left"&&i+s+o>e.width||t==="right"&&i-s-o<0)return!0}function nre(t,e,n,r){const{x:i,width:s}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return r==="center"?c=i<=(a+l)/2?"left":"right":i<=s/2?c="left":i>=o-s/2&&(c="right"),tre(c,t,e,n)&&(c="center"),c}function LR(t,e,n){const r=n.yAlign||e.yAlign||ere(t,n);return{xAlign:n.xAlign||e.xAlign||nre(t,e,n,r),yAlign:r}}function rre(t,e){let{x:n,width:r}=t;return e==="right"?n-=r:e==="center"&&(n-=r/2),n}function ire(t,e,n){let{y:r,height:i}=t;return e==="top"?r+=n:e==="bottom"?r-=i+n:r-=i/2,r}function MR(t,e,n,r){const{caretSize:i,caretPadding:s,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=i+s,{topLeft:u,topRight:h,bottomLeft:d,bottomRight:f}=Io(o);let p=rre(e,a);const g=ire(e,l,c);return l==="center"?a==="left"?p+=c:a==="right"&&(p-=c):a==="left"?p-=Math.max(u,d)+i:a==="right"&&(p+=Math.max(h,f)+i),{x:$t(p,0,r.width-e.width),y:$t(g,0,r.height-e.height)}}function If(t,e,n){const r=hn(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-r.right:t.x+r.left}function VR(t){return kr([],ri(t))}function sre(t,e,n){return zs(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function FR(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const qM={beforeTitle:ti,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,r=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return n[e.dataIndex]}return""},afterTitle:ti,beforeBody:ti,beforeLabel:ti,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return Ne(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:ti,afterBody:ti,beforeFooter:ti,footer:ti,afterFooter:ti};function Tn(t,e,n,r){const i=t[e].call(n,r);return typeof i>"u"?qM[e].call(n,r):i}class U0 extends Rr{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,r=this.options.setContext(this.getContext()),i=r.enabled&&n.options.animation&&r.animations,s=new IM(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=sre(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:r}=n,i=Tn(r,"beforeTitle",this,e),s=Tn(r,"title",this,e),o=Tn(r,"afterTitle",this,e);let a=[];return a=kr(a,ri(i)),a=kr(a,ri(s)),a=kr(a,ri(o)),a}getBeforeBody(e,n){return VR(Tn(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:r}=n,i=[];return Oe(e,s=>{const o={before:[],lines:[],after:[]},a=FR(r,s);kr(o.before,ri(Tn(a,"beforeLabel",this,s))),kr(o.lines,Tn(a,"label",this,s)),kr(o.after,ri(Tn(a,"afterLabel",this,s))),i.push(o)}),i}getAfterBody(e,n){return VR(Tn(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:r}=n,i=Tn(r,"beforeFooter",this,e),s=Tn(r,"footer",this,e),o=Tn(r,"afterFooter",this,e);let a=[];return a=kr(a,ri(i)),a=kr(a,ri(s)),a=kr(a,ri(o)),a}_createItems(e){const n=this._active,r=this.chart.data,i=[],s=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(Zne(this.chart,n[l]));return e.filter&&(a=a.filter((u,h,d)=>e.filter(u,h,d,r))),e.itemSort&&(a=a.sort((u,h)=>e.itemSort(u,h,r))),Oe(a,u=>{const h=FR(e.callbacks,u);i.push(Tn(h,"labelColor",this,u)),s.push(Tn(h,"labelPointStyle",this,u)),o.push(Tn(h,"labelTextColor",this,u))}),this.labelColors=i,this.labelPointStyles=s,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const r=this.options.setContext(this.getContext()),i=this._active;let s,o=[];if(!i.length)this.opacity!==0&&(s={opacity:0});else{const a=eu[r.position].call(this,i,this._eventPosition);o=this._createItems(r),this.title=this.getTitle(o,r),this.beforeBody=this.getBeforeBody(o,r),this.body=this.getBody(o,r),this.afterBody=this.getAfterBody(o,r),this.footer=this.getFooter(o,r);const l=this._size=OR(this,r),c=Object.assign({},a,l),u=LR(this.chart,r,c),h=MR(r,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,s={opacity:1,x:h.x,y:h.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,r,i){const s=this.getCaretPosition(e,r,i);n.lineTo(s.x1,s.y1),n.lineTo(s.x2,s.y2),n.lineTo(s.x3,s.y3)}getCaretPosition(e,n,r){const{xAlign:i,yAlign:s}=this,{caretSize:o,cornerRadius:a}=r,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:h}=Io(a),{x:d,y:f}=e,{width:p,height:g}=n;let _,y,m,v,w,S;return s==="center"?(w=f+g/2,i==="left"?(_=d,y=_-o,v=w+o,S=w-o):(_=d+p,y=_+o,v=w-o,S=w+o),m=_):(i==="left"?y=d+Math.max(l,u)+o:i==="right"?y=d+p-Math.max(c,h)-o:y=this.caretX,s==="top"?(v=f,w=v-o,_=y-o,m=y+o):(v=f+g,w=v+o,_=y+o,m=y-o),S=v),{x1:_,x2:y,x3:m,y1:v,y2:w,y3:S}}drawTitle(e,n,r){const i=this.title,s=i.length;let o,a,l;if(s){const c=il(r.rtl,this.x,this.width);for(e.x=If(this,r.titleAlign,r),n.textAlign=c.textAlign(r.titleAlign),n.textBaseline="middle",o=Dt(r.titleFont),a=r.titleSpacing,n.fillStyle=r.titleColor,n.font=o.string,l=0;l<s;++l)n.fillText(i[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===s&&(e.y+=r.titleMarginBottom-a)}}_drawColorBox(e,n,r,i,s){const o=this.labelColors[r],a=this.labelPointStyles[r],{boxHeight:l,boxWidth:c}=s,u=Dt(s.bodyFont),h=If(this,"left",s),d=i.x(h),f=l<u.lineHeight?(u.lineHeight-l)/2:0,p=n.y+f;if(s.usePointStyle){const g={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},_=i.leftForLtr(d,c)+c/2,y=p+l/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,D0(e,g,_,y),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,D0(e,g,_,y)}else{e.lineWidth=Ae(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const g=i.leftForLtr(d,c),_=i.leftForLtr(i.xPlus(d,1),c-2),y=Io(o.borderRadius);Object.values(y).some(m=>m!==0)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,Dh(e,{x:g,y:p,w:c,h:l,radius:y}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),Dh(e,{x:_,y:p+1,w:c-2,h:l-2,radius:y}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(g,p,c,l),e.strokeRect(g,p,c,l),e.fillStyle=o.backgroundColor,e.fillRect(_,p+1,c-2,l-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,n,r){const{body:i}=this,{bodySpacing:s,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:u}=r,h=Dt(r.bodyFont);let d=h.lineHeight,f=0;const p=il(r.rtl,this.x,this.width),g=function(A){n.fillText(A,p.x(e.x+f),e.y+d/2),e.y+=d+s},_=p.textAlign(o);let y,m,v,w,S,E,T;for(n.textAlign=o,n.textBaseline="middle",n.font=h.string,e.x=If(this,_,r),n.fillStyle=r.bodyColor,Oe(this.beforeBody,g),f=a&&_!=="right"?o==="center"?c/2+u:c+2+u:0,w=0,E=i.length;w<E;++w){for(y=i[w],m=this.labelTextColors[w],n.fillStyle=m,Oe(y.before,g),v=y.lines,a&&v.length&&(this._drawColorBox(n,e,w,p,r),d=Math.max(h.lineHeight,l)),S=0,T=v.length;S<T;++S)g(v[S]),d=h.lineHeight;Oe(y.after,g)}f=0,d=h.lineHeight,Oe(this.afterBody,g),e.y-=s}drawFooter(e,n,r){const i=this.footer,s=i.length;let o,a;if(s){const l=il(r.rtl,this.x,this.width);for(e.x=If(this,r.footerAlign,r),e.y+=r.footerMarginTop,n.textAlign=l.textAlign(r.footerAlign),n.textBaseline="middle",o=Dt(r.footerFont),n.fillStyle=r.footerColor,n.font=o.string,a=0;a<s;++a)n.fillText(i[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+r.footerSpacing}}drawBackground(e,n,r,i){const{xAlign:s,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:u}=r,{topLeft:h,topRight:d,bottomLeft:f,bottomRight:p}=Io(i.cornerRadius);n.fillStyle=i.backgroundColor,n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.beginPath(),n.moveTo(a+h,l),o==="top"&&this.drawCaret(e,n,r,i),n.lineTo(a+c-d,l),n.quadraticCurveTo(a+c,l,a+c,l+d),o==="center"&&s==="right"&&this.drawCaret(e,n,r,i),n.lineTo(a+c,l+u-p),n.quadraticCurveTo(a+c,l+u,a+c-p,l+u),o==="bottom"&&this.drawCaret(e,n,r,i),n.lineTo(a+f,l+u),n.quadraticCurveTo(a,l+u,a,l+u-f),o==="center"&&s==="left"&&this.drawCaret(e,n,r,i),n.lineTo(a,l+h),n.quadraticCurveTo(a,l,a+h,l),n.closePath(),n.fill(),i.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,r=this.$animations,i=r&&r.x,s=r&&r.y;if(i||s){const o=eu[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=OR(this,e),l=Object.assign({},o,this._size),c=LR(n,e,l),u=MR(e,l,c,n);(i._to!==u.x||s._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(n);const i={width:this.width,height:this.height},s={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const o=hn(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=r,this.drawBackground(s,e,i,n),wM(e,n.textDirection),s.y+=o.top,this.drawTitle(s,e,n),this.drawBody(s,e,n),this.drawFooter(s,e,n),bM(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const r=this._active,i=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),s=!fg(r,i),o=this._positionChanged(i,n);(s||o)&&(this._active=i,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,s=this._active||[],o=this._getActiveElements(e,s,n,r),a=this._positionChanged(o,e),l=n||!fg(o,s)||a;return l&&(this._active=o,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,r,i){const s=this.options;if(e.type==="mouseout")return[];if(!i)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,s.mode,s,r);return s.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:r,caretY:i,options:s}=this,o=eu[s.position].call(this,e,n);return o!==!1&&(r!==o.x||i!==o.y)}}q(U0,"positioners",eu);var ore={id:"tooltip",_element:U0,positioners:eu,afterInit(t,e,n){n&&(t.tooltip=new U0({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:qM},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},are=Object.freeze({__proto__:null,Colors:vne,Decimation:Ene,Filler:zne,Legend:Qne,SubTitle:Jne,Title:Xne,Tooltip:ore});const lre=(t,e,n,r)=>(typeof e=="string"?(n=t.push(e)-1,r.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function cre(t,e,n,r){const i=t.indexOf(e);if(i===-1)return lre(t,e,n,r);const s=t.lastIndexOf(e);return i!==s?n:i}const ure=(t,e)=>t===null?null:$t(Math.round(t),0,e);function $R(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class B0 extends la{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const r=this.getLabels();for(const{index:i,label:s}of n)r[i]===s&&r.splice(i,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(Ne(e))return null;const r=this.getLabels();return n=isFinite(n)&&r[n]===e?n:cre(r,e,_e(n,e),this._addedLabels),ure(n,r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:r,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),n||(i=this.getLabels().length-1)),this.min=r,this.max=i}buildTicks(){const e=this.min,n=this.max,r=this.options.offset,i=[];let s=this.getLabels();s=e===0&&n===s.length-1?s:s.slice(e,n+1),this._valueRange=Math.max(s.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let o=e;o<=n;o++)i.push({value:o});return i}getLabelForValue(e){return $R.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}q(B0,"id","category"),q(B0,"defaults",{ticks:{callback:$R}});function hre(t,e){const n=[],{bounds:i,step:s,min:o,max:a,precision:l,count:c,maxTicks:u,maxDigits:h,includeBounds:d}=t,f=s||1,p=u-1,{min:g,max:_}=e,y=!Ne(o),m=!Ne(a),v=!Ne(c),w=(_-g)/(h+1);let S=Dx((_-g)/p/f)*f,E,T,A,$;if(S<1e-14&&!y&&!m)return[{value:g},{value:_}];$=Math.ceil(_/S)-Math.floor(g/S),$>p&&(S=Dx($*S/p/f)*f),Ne(l)||(E=Math.pow(10,l),S=Math.ceil(S*E)/E),i==="ticks"?(T=Math.floor(g/S)*S,A=Math.ceil(_/S)*S):(T=g,A=_),y&&m&&s&&sZ((a-o)/s,S/1e3)?($=Math.round(Math.min((a-o)/S,u)),S=(a-o)/$,T=o,A=a):v?(T=y?o:T,A=m?a:A,$=c-1,S=(A-T)/$):($=(A-T)/S,Au($,Math.round($),S/1e3)?$=Math.round($):$=Math.ceil($));const L=Math.max(Ox(S),Ox(T));E=Math.pow(10,Ne(l)?L:l),T=Math.round(T*E)/E,A=Math.round(A*E)/E;let ee=0;for(y&&(d&&T!==o?(n.push({value:o}),T<o&&ee++,Au(Math.round((T+ee*S)*E)/E,o,UR(o,w,t))&&ee++):T<o&&ee++);ee<$;++ee){const se=Math.round((T+ee*S)*E)/E;if(m&&se>a)break;n.push({value:se})}return m&&d&&A!==a?n.length&&Au(n[n.length-1].value,a,UR(a,w,t))?n[n.length-1].value=a:n.push({value:a}):(!m||A===a)&&n.push({value:A}),n}function UR(t,e,{horizontal:n,minRotation:r}){const i=vr(r),s=(n?Math.sin(i):Math.cos(i))||.001,o=.75*e*(""+t).length;return Math.min(e/s,o)}class wg extends la{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return Ne(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:r}=this.getUserBounds();let{min:i,max:s}=this;const o=l=>i=n?i:l,a=l=>s=r?s:l;if(e){const l=Gr(i),c=Gr(s);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(i===s){let l=s===0?1:Math.abs(s*.05);a(s+l),e||o(i-l)}this.min=i,this.max=s}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:r}=e,i;return r?(i=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),n=n||11),n&&(i=Math.min(n,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const i={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},s=this._range||this,o=hre(i,s);return e.bounds==="ticks"&&rM(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const i=(r-n)/Math.max(e.length-1,1)/2;n-=i,r+=i}this._startValue=n,this._endValue=r,this._valueRange=r-n}getLabelForValue(e){return kd(e,this.chart.options.locale,this.options.ticks.format)}}class j0 extends wg{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=gt(e)?e:0,this.max=gt(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,r=vr(this.options.ticks.minRotation),i=(e?Math.sin(r):Math.cos(r))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,s.lineHeight/i))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}q(j0,"id","linear"),q(j0,"defaults",{ticks:{callback:ny.formatters.numeric}});const Lh=t=>Math.floor(Zi(t)),Qs=(t,e)=>Math.pow(10,Lh(t)+e);function BR(t){return t/Math.pow(10,Lh(t))===1}function jR(t,e,n){const r=Math.pow(10,n),i=Math.floor(t/r);return Math.ceil(e/r)-i}function dre(t,e){const n=e-t;let r=Lh(n);for(;jR(t,e,r)>10;)r++;for(;jR(t,e,r)<10;)r--;return Math.min(r,Lh(t))}function fre(t,{min:e,max:n}){e=Un(t.min,e);const r=[],i=Lh(e);let s=dre(e,n),o=s<0?Math.pow(10,Math.abs(s)):1;const a=Math.pow(10,s),l=i>s?Math.pow(10,i):0,c=Math.round((e-l)*o)/o,u=Math.floor((e-l)/a/10)*a*10;let h=Math.floor((c-u)/Math.pow(10,s)),d=Un(t.min,Math.round((l+u+h*Math.pow(10,s))*o)/o);for(;d<n;)r.push({value:d,major:BR(d),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(s++,h=2,o=s>=0?1:o),d=Math.round((l+u+h*Math.pow(10,s))*o)/o;const f=Un(t.max,d);return r.push({value:f,major:BR(f),significand:h}),r}class z0 extends la{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,n){const r=wg.prototype.parse.apply(this,[e,n]);if(r===0){this._zero=!0;return}return gt(r)&&r>0?r:null}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=gt(e)?Math.max(0,e):null,this.max=gt(n)?Math.max(0,n):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!gt(this._userMin)&&(this.min=e===Qs(this.min,0)?Qs(this.min,-1):Qs(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let r=this.min,i=this.max;const s=a=>r=e?r:a,o=a=>i=n?i:a;r===i&&(r<=0?(s(1),o(10)):(s(Qs(r,-1)),o(Qs(i,1)))),r<=0&&s(Qs(i,-1)),i<=0&&o(Qs(r,1)),this.min=r,this.max=i}buildTicks(){const e=this.options,n={min:this._userMin,max:this._userMax},r=fre(n,this);return e.bounds==="ticks"&&rM(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}getLabelForValue(e){return e===void 0?"0":kd(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=Zi(e),this._valueRange=Zi(this.max)-Zi(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(Zi(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const n=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+n*this._valueRange)}}q(z0,"id","logarithmic"),q(z0,"defaults",{ticks:{callback:ny.formatters.logarithmic,major:{enabled:!0}}});function W0(t){const e=t.ticks;if(e.display&&t.display){const n=hn(e.backdropPadding);return _e(e.font&&e.font.size,mt.font.size)+n.height}return 0}function pre(t,e,n){return n=Ye(n)?n:[n],{w:SZ(t,e.string,n),h:n.length*e.lineHeight}}function zR(t,e,n,r,i){return t===r||t===i?{start:e-n/2,end:e+n/2}:t<r||t>i?{start:e-n,end:e}:{start:e,end:e+n}}function gre(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},n=Object.assign({},e),r=[],i=[],s=t._pointLabels.length,o=t.options.pointLabels,a=o.centerPointLabels?Ze/s:0;for(let l=0;l<s;l++){const c=o.setContext(t.getPointLabelContext(l));i[l]=c.padding;const u=t.getPointPosition(l,t.drawingArea+i[l],a),h=Dt(c.font),d=pre(t.ctx,h,t._pointLabels[l]);r[l]=d;const f=jn(t.getIndexAngle(l)+a),p=Math.round(hS(f)),g=zR(p,u.x,d.w,0,180),_=zR(p,u.y,d.h,90,270);mre(n,e,f,g,_)}t.setCenterPoint(e.l-n.l,n.r-e.r,e.t-n.t,n.b-e.b),t._pointLabelItems=vre(t,r,i)}function mre(t,e,n,r,i){const s=Math.abs(Math.sin(n)),o=Math.abs(Math.cos(n));let a=0,l=0;r.start<e.l?(a=(e.l-r.start)/s,t.l=Math.min(t.l,e.l-a)):r.end>e.r&&(a=(r.end-e.r)/s,t.r=Math.max(t.r,e.r+a)),i.start<e.t?(l=(e.t-i.start)/o,t.t=Math.min(t.t,e.t-l)):i.end>e.b&&(l=(i.end-e.b)/o,t.b=Math.max(t.b,e.b+l))}function yre(t,e,n){const r=t.drawingArea,{extra:i,additionalAngle:s,padding:o,size:a}=n,l=t.getPointPosition(e,r+i+o,s),c=Math.round(hS(jn(l.angle+Tt))),u=Sre(l.y,a.h,c),h=wre(c),d=bre(l.x,a.w,h);return{visible:!0,x:l.x,y:u,textAlign:h,left:d,top:u,right:d+a.w,bottom:u+a.h}}function _re(t,e){if(!e)return!0;const{left:n,top:r,right:i,bottom:s}=t;return!(mi({x:n,y:r},e)||mi({x:n,y:s},e)||mi({x:i,y:r},e)||mi({x:i,y:s},e))}function vre(t,e,n){const r=[],i=t._pointLabels.length,s=t.options,{centerPointLabels:o,display:a}=s.pointLabels,l={extra:W0(s)/2,additionalAngle:o?Ze/i:0};let c;for(let u=0;u<i;u++){l.padding=n[u],l.size=e[u];const h=yre(t,u,l);r.push(h),a==="auto"&&(h.visible=_re(h,c),h.visible&&(c=h))}return r}function wre(t){return t===0||t===180?"center":t<180?"left":"right"}function bre(t,e,n){return n==="right"?t-=e:n==="center"&&(t-=e/2),t}function Sre(t,e,n){return n===90||n===270?t-=e/2:(n>270||n<90)&&(t-=e),t}function Ere(t,e,n){const{left:r,top:i,right:s,bottom:o}=n,{backdropColor:a}=e;if(!Ne(a)){const l=Io(e.borderRadius),c=hn(e.backdropPadding);t.fillStyle=a;const u=r-c.left,h=i-c.top,d=s-r+c.width,f=o-i+c.height;Object.values(l).some(p=>p!==0)?(t.beginPath(),Dh(t,{x:u,y:h,w:d,h:f,radius:l}),t.fill()):t.fillRect(u,h,d,f)}}function Tre(t,e){const{ctx:n,options:{pointLabels:r}}=t;for(let i=e-1;i>=0;i--){const s=t._pointLabelItems[i];if(!s.visible)continue;const o=r.setContext(t.getPointLabelContext(i));Ere(n,o,s);const a=Dt(o.font),{x:l,y:c,textAlign:u}=s;Go(n,t._pointLabels[i],l,c+a.lineHeight/2,a,{color:o.color,textAlign:u,textBaseline:"middle"})}}function KM(t,e,n,r){const{ctx:i}=t;if(n)i.arc(t.xCenter,t.yCenter,e,0,Je);else{let s=t.getPointPosition(0,e);i.moveTo(s.x,s.y);for(let o=1;o<r;o++)s=t.getPointPosition(o,e),i.lineTo(s.x,s.y)}}function Ire(t,e,n,r,i){const s=t.ctx,o=e.circular,{color:a,lineWidth:l}=e;!o&&!r||!a||!l||n<0||(s.save(),s.strokeStyle=a,s.lineWidth=l,s.setLineDash(i.dash),s.lineDashOffset=i.dashOffset,s.beginPath(),KM(t,n,o,r),s.closePath(),s.stroke(),s.restore())}function xre(t,e,n){return zs(t,{label:n,index:e,type:"pointLabel"})}class tu extends wg{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=hn(W0(this.options)/2),n=this.width=this.maxWidth-e.width,r=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+n/2+e.left),this.yCenter=Math.floor(this.top+r/2+e.top),this.drawingArea=Math.floor(Math.min(n,r)/2)}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!1);this.min=gt(e)&&!isNaN(e)?e:0,this.max=gt(n)&&!isNaN(n)?n:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/W0(this.options))}generateTickLabels(e){wg.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((n,r)=>{const i=je(this.options.pointLabels.callback,[n,r],this);return i||i===0?i:""}).filter((n,r)=>this.chart.getDataVisibility(r))}fit(){const e=this.options;e.display&&e.pointLabels.display?gre(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,n,r,i){this.xCenter+=Math.floor((e-n)/2),this.yCenter+=Math.floor((r-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,n,r,i))}getIndexAngle(e){const n=Je/(this._pointLabels.length||1),r=this.options.startAngle||0;return jn(e*n+vr(r))}getDistanceFromCenterForValue(e){if(Ne(e))return NaN;const n=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*n:(e-this.min)*n}getValueForDistanceFromCenter(e){if(Ne(e))return NaN;const n=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-n:this.min+n}getPointLabelContext(e){const n=this._pointLabels||[];if(e>=0&&e<n.length){const r=n[e];return xre(this.getContext(),e,r)}}getPointPosition(e,n,r=0){const i=this.getIndexAngle(e)-Tt+r;return{x:Math.cos(i)*n+this.xCenter,y:Math.sin(i)*n+this.yCenter,angle:i}}getPointPositionForValue(e,n){return this.getPointPosition(e,this.getDistanceFromCenterForValue(n))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:n,top:r,right:i,bottom:s}=this._pointLabelItems[e];return{left:n,top:r,right:i,bottom:s}}drawBackground(){const{backgroundColor:e,grid:{circular:n}}=this.options;if(e){const r=this.ctx;r.save(),r.beginPath(),KM(this,this.getDistanceFromCenterForValue(this._endValue),n,this._pointLabels.length),r.closePath(),r.fillStyle=e,r.fill(),r.restore()}}drawGrid(){const e=this.ctx,n=this.options,{angleLines:r,grid:i,border:s}=n,o=this._pointLabels.length;let a,l,c;if(n.pointLabels.display&&Tre(this,o),i.display&&this.ticks.forEach((u,h)=>{if(h!==0||h===0&&this.min<0){l=this.getDistanceFromCenterForValue(u.value);const d=this.getContext(h),f=i.setContext(d),p=s.setContext(d);Ire(this,f,l,o,p)}}),r.display){for(e.save(),a=o-1;a>=0;a--){const u=r.setContext(this.getPointLabelContext(a)),{color:h,lineWidth:d}=u;!d||!h||(e.lineWidth=d,e.strokeStyle=h,e.setLineDash(u.borderDash),e.lineDashOffset=u.borderDashOffset,l=this.getDistanceFromCenterForValue(n.ticks.reverse?this.min:this.max),c=this.getPointPosition(a,l),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(c.x,c.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,n=this.options,r=n.ticks;if(!r.display)return;const i=this.getIndexAngle(0);let s,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(i),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&this.min>=0&&!n.reverse)return;const c=r.setContext(this.getContext(l)),u=Dt(c.font);if(s=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){e.font=u.string,o=e.measureText(a.label).width,e.fillStyle=c.backdropColor;const h=hn(c.backdropPadding);e.fillRect(-o/2-h.left,-s-u.size/2-h.top,o+h.width,u.size+h.height)}Go(e,a.label,0,-s,u,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),e.restore()}drawTitle(){}}q(tu,"id","radialLinear"),q(tu,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:ny.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),q(tu,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),q(tu,"descriptors",{angleLines:{_fallback:"grid"}});const oy={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},An=Object.keys(oy);function WR(t,e){return t-e}function HR(t,e){if(Ne(e))return null;const n=t._adapter,{parser:r,round:i,isoWeekday:s}=t._parseOpts;let o=e;return typeof r=="function"&&(o=r(o)),gt(o)||(o=typeof r=="string"?n.parse(o,r):n.parse(o)),o===null?null:(i&&(o=i==="week"&&(Dl(s)||s===!0)?n.startOf(o,"isoWeek",s):n.startOf(o,i)),+o)}function qR(t,e,n,r){const i=An.length;for(let s=An.indexOf(t);s<i-1;++s){const o=oy[An[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=r)return An[s]}return An[i-1]}function Rre(t,e,n,r,i){for(let s=An.length-1;s>=An.indexOf(n);s--){const o=An[s];if(oy[o].common&&t._adapter.diff(i,r,o)>=e-1)return o}return An[n?An.indexOf(n):0]}function Are(t){for(let e=An.indexOf(t)+1,n=An.length;e<n;++e)if(oy[An[e]].common)return An[e]}function KR(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:r,hi:i}=dS(n,e),s=n[r]>=e?n[r]:n[i];t[s]=!0}}function kre(t,e,n,r){const i=t._adapter,s=+i.startOf(e[0].value,r),o=e[e.length-1].value;let a,l;for(a=s;a<=o;a=+i.add(a,1,r))l=n[a],l>=0&&(e[l].major=!0);return e}function GR(t,e,n){const r=[],i={},s=e.length;let o,a;for(o=0;o<s;++o)a=e[o],i[a]=o,r.push({value:a,major:!1});return s===0||!n?r:kre(t,r,i,n)}class Mh extends la{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const r=e.time||(e.time={}),i=this._adapter=new Fee._date(e.adapters.date);i.init(n),Ru(r.displayFormats,i.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:HR(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,r=e.time.unit||"day";let{min:i,max:s,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(i=Math.min(i,c.min)),!a&&!isNaN(c.max)&&(s=Math.max(s,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),i=gt(i)&&!isNaN(i)?i:+n.startOf(Date.now(),r),s=gt(s)&&!isNaN(s)?s:+n.endOf(Date.now(),r)+1,this.min=Math.min(i,s-1),this.max=Math.max(i+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],r=e[e.length-1]),{min:n,max:r}}buildTicks(){const e=this.options,n=e.time,r=e.ticks,i=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const s=this.min,o=this.max,a=cZ(i,s,o);return this._unit=n.unit||(r.autoSkip?qR(n.minUnit,this.min,this.max,this._getLabelCapacity(s)):Rre(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:Are(this._unit),this.initOffsets(i),e.reverse&&a.reverse(),GR(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,r=0,i,s;this.options.offset&&e.length&&(i=this.getDecimalForValue(e[0]),e.length===1?n=1-i:n=(this.getDecimalForValue(e[1])-i)/2,s=this.getDecimalForValue(e[e.length-1]),e.length===1?r=s:r=(s-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=$t(n,0,o),r=$t(r,0,o),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){const e=this._adapter,n=this.min,r=this.max,i=this.options,s=i.time,o=s.unit||qR(s.minUnit,n,r,this._getLabelCapacity(n)),a=_e(i.ticks.stepSize,1),l=o==="week"?s.isoWeekday:!1,c=Dl(l)||l===!0,u={};let h=n,d,f;if(c&&(h=+e.startOf(h,"isoWeek",l)),h=+e.startOf(h,c?"day":o),e.diff(r,n,o)>1e5*a)throw new Error(n+" and "+r+" are too far apart with stepSize of "+a+" "+o);const p=i.ticks.source==="data"&&this.getDataTimestamps();for(d=h,f=0;d<r;d=+e.add(d,a,o),f++)KR(u,d,p);return(d===r||i.bounds==="ticks"||f===1)&&KR(u,d,p),Object.keys(u).sort(WR).map(g=>+g)}getLabelForValue(e){const n=this._adapter,r=this.options.time;return r.tooltipFormat?n.format(e,r.tooltipFormat):n.format(e,r.displayFormats.datetime)}format(e,n){const i=this.options.time.displayFormats,s=this._unit,o=n||i[s];return this._adapter.format(e,o)}_tickFormatFunction(e,n,r,i){const s=this.options,o=s.ticks.callback;if(o)return je(o,[e,n,r],this);const a=s.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],h=c&&a[c],d=r[n],f=c&&h&&d&&d.major;return this._adapter.format(e,i||(f?h:u))}generateTickLabels(e){let n,r,i;for(n=0,r=e.length;n<r;++n)i=e[n],i.label=this._tickFormatFunction(i.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,r=this.ctx.measureText(e).width,i=vr(this.isHorizontal()?n.maxRotation:n.minRotation),s=Math.cos(i),o=Math.sin(i),a=this._resolveTickFontOptions(0).size;return{w:r*s+a*o,h:r*o+a*s}}_getLabelCapacity(e){const n=this.options.time,r=n.displayFormats,i=r[n.unit]||r.millisecond,s=this._tickFormatFunction(e,0,GR(this,[e],this._majorUnit),i),o=this._getLabelSize(s),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,r;if(e.length)return e;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(n=0,r=i.length;n<r;++n)e=e.concat(i[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,r;if(e.length)return e;const i=this.getLabels();for(n=0,r=i.length;n<r;++n)e.push(HR(this,i[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return oM(e.sort(WR))}}q(Mh,"id","time"),q(Mh,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function xf(t,e,n){let r=0,i=t.length-1,s,o,a,l;n?(e>=t[r].pos&&e<=t[i].pos&&({lo:r,hi:i}=gi(t,"pos",e)),{pos:s,time:a}=t[r],{pos:o,time:l}=t[i]):(e>=t[r].time&&e<=t[i].time&&({lo:r,hi:i}=gi(t,"time",e)),{time:s,pos:a}=t[r],{time:o,pos:l}=t[i]);const c=o-s;return c?a+(l-a)*(e-s)/c:a}class H0 extends Mh{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=xf(n,this.min),this._tableRange=xf(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:r}=this,i=[],s=[];let o,a,l,c,u;for(o=0,a=e.length;o<a;++o)c=e[o],c>=n&&c<=r&&i.push(c);if(i.length<2)return[{time:n,pos:0},{time:r,pos:1}];for(o=0,a=i.length;o<a;++o)u=i[o+1],l=i[o-1],c=i[o],Math.round((u+l)/2)!==c&&s.push({time:c,pos:o/(a-1)});return s}_generate(){const e=this.min,n=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(n)||r.length===1)&&r.push(n),r.sort((i,s)=>i-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),r=this.getLabelTimestamps();return n.length&&r.length?e=this.normalize(n.concat(r)):e=n.length?n:r,e=this._cache.all=e,e}getDecimalForValue(e){return(xf(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return xf(this._table,r*this._tableRange+this._minPos,!0)}}q(H0,"id","timeseries"),q(H0,"defaults",Mh.defaults);var Pre=Object.freeze({__proto__:null,CategoryScale:B0,LinearScale:j0,LogarithmicScale:z0,RadialLinearScale:tu,TimeScale:Mh,TimeSeriesScale:H0});const Cre=[Vee,fne,are,Pre];ai.register(...Cre);const Nre=({crypto:t})=>{const e=U.useRef(null),n=U.useRef(null);return U.useEffect(()=>{const r=e.current;if(r&&t){n.current&&n.current.destroy();const i=r.getContext("2d"),s=Object.values(t.sparkline_in_7d.price).map(o=>parseFloat(o));n.current=new ai(i,{type:"line",data:{labels:Array.from({length:168},(o,a)=>a+1),datasets:[{data:s,borderColor:"rgba(75, 192, 192, 1)",borderWidth:2,fill:!1,pointRadius:0,tension:.1}]},options:{responsive:!1,plugins:{legend:{display:!1},tooltip:{enabled:!1}},scales:{x:{display:!1,beginAtZero:!1},y:{display:!1,beginAtZero:!0}},elements:{line:{borderWidth:1},point:{radius:0}},hover:{},maintainAspectRatio:!1}})}return()=>{n.current&&n.current.destroy()}},[t]),b.jsx("div",{className:"flex justify-center",children:b.jsx("canvas",{ref:e,width:"100",height:"50"})})},Dre=t=>{const e=t.data;function n(s,o,a){return b.jsxs("div",{children:["$"+i(s),b.jsx("div",{className:"text-slate-400",children:i(s/o)+" "+a.toUpperCase()})]})}function r(s){const o=s<0;s=o?s*-1:s;const a=o?"expand_more":"expand_less",l=o?"text-red-500":"text-green-500";return b.jsxs("div",{className:l+" flex items-center",children:[b.jsx("i",{className:"material-icons w-4 h-4",children:a}),b.jsx("div",{className:"mr-3 ml-3 mt-2 ",children:i(s)})]})}function i(s){let o=s.toFixed(10);return parseFloat(o).toLocaleString()}return b.jsxs("tr",{className:"border-b",children:[b.jsx("td",{className:"py-2 text-center",children:t.index}),b.jsx("td",{className:"py-2",children:b.jsxs("div",{className:"flex justify-start h-[100%] items-center",children:[b.jsx("img",{className:"w-6 h-6 mr-2",src:e.image,alt:e.name+" Logo"}),e.name]})}),b.jsx("td",{className:"py-2 text-center",children:"$"+i(e.current_price)}),b.jsx("td",{className:"py-2 md:table-cell hidden text-center",children:r(e.price_change_percentage_1h_in_currency)}),b.jsx("td",{className:"py-2 md:table-cell hidden text-center",children:r(e.price_change_percentage_24h_in_currency)}),b.jsx("td",{className:"py-2 text-center",children:r(e.price_change_percentage_7d_in_currency)}),b.jsx("td",{className:"py-2 md:table-cell hidden text-center",children:"$"+i(e.market_cap)}),b.jsx("td",{className:"py-2 md:table-cell hidden text-end",children:n(e.total_volume,e.current_price,e.symbol)}),b.jsx("td",{className:"py-2 md:table-cell hidden text-center",children:i(e.circulating_supply)+" "+e.symbol.toUpperCase()}),b.jsx("td",{className:"py-2 md:table-cell hidden",children:b.jsx(Nre,{crypto:e})})]})},Ore=t=>{const{t:e}=Jn();return b.jsxs("table",{className:"table table-bordered table-hover w-full",children:[b.jsx("thead",{children:b.jsxs("tr",{className:"border rounded",children:[b.jsx("th",{className:"py-3 px-6",children:"#"}),b.jsx("th",{className:"py-3 px-6",children:e("name")}),b.jsx("th",{className:"py-3 px-6",children:e("price")}),b.jsx("th",{className:"py-3 px-6 md:table-cell hidden",children:"1h%"}),b.jsx("th",{className:"py-3 px-6 md:table-cell hidden",children:"24h%"}),b.jsx("th",{className:"py-3 px-6",children:"7d%"}),b.jsx("th",{className:"py-3 px-6 md:table-cell hidden",children:e("marketCap")}),b.jsx("th",{className:"py-3 px-6 md:table-cell hidden",children:e("volume")}),b.jsx("th",{className:"py-3 px-6 md:table-cell hidden",children:e("circulatingSupply")}),b.jsx("th",{className:"py-3 px-6 md:table-cell hidden",children:e("last7Days")})]})}),b.jsx("tbody",{children:t.data.map((n,r)=>b.jsx(Dre,{data:n,index:r+1,header:!1},n.id))})]})};function Lre(){const{t}=Jn(),e=[{id:"bitcoin",symbol:"btc",name:"Bitcoin",image:"https://assets.coingecko.com/coins/images/1/large/bitcoin.png?1696501400",current_price:61455,market_cap:1203342442653,market_cap_rank:1,fully_diluted_valuation:1286591859021,total_volume:60541398141,high_24h:63435,low_24h:60562,price_change_24h:423.74,price_change_percentage_24h:.69429,market_cap_change_24h:6494577737,market_cap_change_percentage_24h:.54264,circulating_supply:19641187,total_supply:21e6,max_supply:21e6,ath:69045,ath_change_percentage:-11.02837,ath_date:"2021-11-10T14:24:11.849Z",atl:67.81,atl_change_percentage:90493.0706,atl_date:"2013-07-06T00:00:00.000Z",roi:null,last_updated:"2024-02-29T22:18:49.169Z",sparkline_in_7d:{price:[51711.14580544951,51651.87986630683,51484.038829987636,51965.0332258993,51578.57739458951,51462.3712941115,51319.500125702674,51445.07757429647,51290.46384473216,51095.29306783685,51067.967072300395,51201.271638117025,51124.97620014934,51289.85201499646,50880.92367526176,50908.81488660626,50949.359440781955,51166.195179806724,51210.2940639519,50983.584307534344,51051.37119011336,51102.27794973614,50910.394626552355,51023.57720713857,51135.962066839966,51131.27428819613,51080.37683198738,51091.530003433276,50985.782654840594,50773.475118871436,50841.081094770896,50863.48685286495,50607.52920064971,50788.125508990335,50848.88547504514,50950.327041790515,51054.130061598386,50962.224264356795,51050.048117445396,50982.60912739779,51065.08904770135,51068.9235454728,51127.62804168001,51073.36046728882,51131.48175102287,51094.447775398425,51112.86772237167,51208.34658039908,51697.48554467913,51484.681536061114,51599.12248105399,51513.39102333645,51558.64778532889,51573.73667905135,51553.096712831146,51485.262018375855,51614.216980192345,51545.32115884375,51621.629465192906,51627.64128004587,51699.201967815585,51735.61018071985,51726.82888554329,51619.54399665533,51631.8944123664,51576.56470709675,51654.025665677225,51682.02969592259,51631.39988867448,51731.35612456198,51509.00951660319,51405.50649460264,51556.434366413734,51538.633942542714,51680.84842899583,51730.0957098725,51774.377396554664,51701.55732383541,51725.35393162457,51674.530312562376,51458.999296344286,51449.58877439659,51556.22697206768,51549.89709261979,51572.065623970644,51498.098290461494,51300.41485157674,51278.663078190846,50926.780715974346,51180.839719248645,51104.85484650301,51177.737528338555,51231.644578738815,51690.697700635785,52847.175807956504,53394.43288905663,53443.62062782177,53633.072547559466,54455.91125142581,54685.05166599562,54628.95571513321,54675.40695784579,54478.191083122954,54580.139740714294,55672.854203004914,56318.200914074,55580.07369933234,55801.08659956298,56116.347347991315,56386.72475545337,56104.12682333932,56275.61320474057,56643.12554071901,56581.53705935442,56541.39108692869,56996.51844918365,57106.04893315183,56900.31296833004,56765.128743317684,57051.62669658581,56841.94128068301,57128.702536398945,57442.86321085786,56737.94085264713,56650.03245400538,56918.454940304226,57003.52673730811,56994.916552693576,56857.608882839384,56951.85869803529,56958.15831123478,57227.46105933989,57116.64046654168,57135.482349711136,58123.24153531823,59508.88968993828,59325.37345452618,59266.18106118569,58983.94738732378,59397.89259241082,60465.38088698786,61142.98509518815,60925.10725370209,62496.70796054818,61236.56819459582,61203.7868191401,61006.464690927794,60426.396959183345,60504.09754571494,61348.393440923515,62518.58004146406,61353.4196653466,61354.959518742406,61753.20998644972,61594.439045000516,62494.350476384025,62327.58781450792,62938.70597072361,62713.90519421873,62791.57565972651,62794.27161842451,62701.975438427515,62935.77379531405,62656.37152404855,62946.002884387686,62864.06830866907,62894.738255044256,62202.76775685036]},price_change_percentage_1h_in_currency:.07287366709251061,price_change_percentage_24h_in_currency:.6942933139179345,price_change_percentage_7d_in_currency:19.148896251153303},{id:"ethereum",symbol:"eth",name:"Ethereum",image:"https://assets.coingecko.com/coins/images/279/large/ethereum.png?1696501628",current_price:3354.28,market_cap:402014862613,market_cap_rank:2,fully_diluted_valuation:402014862613,total_volume:31454586634,high_24h:3514.33,low_24h:3329.17,price_change_24h:11.76,price_change_percentage_24h:.35191,market_cap_change_24h:558853689,market_cap_change_percentage_24h:.13921,circulating_supply:120147088495808e-6,total_supply:120147088495808e-6,max_supply:null,ath:4878.26,ath_change_percentage:-31.3923,ath_date:"2021-11-10T14:24:19.604Z",atl:.432979,atl_change_percentage:772885.11793,atl_date:"2015-10-20T00:00:00.000Z",roi:{times:71.98171772853169,currency:"btc",percentage:7198.1717728531685},last_updated:"2024-02-29T22:18:46.710Z",sparkline_in_7d:{price:[2987.2567711223833,2993.5874791812953,2986.617109001116,3009.2904450595342,2981.0263786762644,2985.7836123814745,2974.1315861319913,2989.3907042081114,2977.5506351080885,2951.6346643623815,2952.9224944741304,2951.039486418079,2953.2593315722484,2963.883832304354,2926.2390046821693,2919.6492429594227,2936.0364711269167,2942.0105058292456,2943.2413930023363,2931.5116034043463,2940.371307562495,2949.1565878913107,2918.58707234317,2933.06377166996,2945.3958474577794,2944.7218247861065,2944.6636034856256,2951.946267705884,2944.053374101856,2922.9160361048557,2926.2859129063513,2933.351434230059,2907.502585499638,2919.916902409757,2932.2604740309876,2947.407621610537,2949.992964611262,2946.3742803280447,2960.575739343611,2949.3454175792244,2958.9438752433816,2957.941021825779,2963.2169461303247,2957.560358526013,2964.1935826747867,2956.3405908449495,2956.0478960515247,2963.817875806456,2999.9447763862277,2985.395218459312,2989.518819349732,2987.2102632058954,2987.1875710828117,2987.7820492512283,2988.317384063568,2989.0746477039074,3008.681123048421,3027.605009462698,3026.59034243644,3019.9768664221906,3030.339888987385,3037.011148682033,3029.911699882223,3022.373742907652,3019.5083384362633,3024.0907546137023,3038.179170046782,3042.4043294840058,3041.8569269281375,3066.1829330307874,3045.162591385378,3040.9172998771933,3060.2209814886414,3062.207739435209,3080.3543739405804,3099.5469170959445,3107.5577825157093,3097.5679876292597,3111.6352776845724,3117.711060032415,3103.0137185731164,3098.4384981952294,3102.9216993088903,3105.0903568443227,3107.186923524151,3107.0900114947863,3087.42143153937,3093.264915523327,3042.360427086367,3060.4817987326705,3056.8166542512067,3062.2443760186916,3059.3391279053494,3103.7450467857516,3131.9135063045273,3154.110287573756,3153.6776610718166,3146.1762110454406,3179.7757799798824,3193.848102466788,3187.1278041982446,3189.21553334359,3173.62994683714,3171.2892649955224,3228.110235622291,3250.177648061775,3204.516411936048,3215.073252568955,3220.9208201206316,3235.8922601867876,3219.557156038663,3221.858035347145,3253.9833764331956,3261.656238394269,3256.3541792842443,3267.1770916016703,3274.2494839397727,3260.889513460632,3232.495691291153,3235.86125362494,3217.957707444016,3238.2147999682275,3250.460962142206,3241.245280948198,3244.467005812518,3252.5289915348,3243.7315393053245,3250.22050603074,3238.358778382691,3245.8088424556254,3248.5453403652564,3268.8874991737866,3254.5044147608814,3257.285202720691,3303.4884892351415,3342.1712570172053,3357.7513274452517,3348.4847389561833,3296.3905343389806,3314.7681331509834,3355.2531634482016,3373.8532428432654,3348.1538465616018,3445.7151905757187,3344.8212409972057,3325.367448352566,3297.4732824960383,3301.400428854306,3325.542391110457,3343.429841368254,3380.3803968147085,3440.7836557287515,3418.570775335536,3409.0972157536394,3412.1946005704685,3463.792288073158,3464.5469680915435,3467.687237587866,3470.0627859634615,3474.9857152617246,3469.4116689076986,3474.5031617987015,3512.2494504445967,3473.3122609558036,3483.2794718429363,3461.5799002568347,3468.107713629715,3441.0764922090507]},price_change_percentage_1h_in_currency:-.30562377710934147,price_change_percentage_24h_in_currency:.35191432901803416,price_change_percentage_7d_in_currency:12.521024959716309}];return b.jsxs("div",{className:"m-10 text-slate-950 dark:text-white",children:[b.jsx("h1",{className:"mb-5 text-3xl font-bold",children:t("cryptocurrencyPrices")}),b.jsx(Ore,{data:e})]})}function Mre({news_object:t}){return Jn(),b.jsxs("div",{className:"rounded-lg shadow-md p-4 bg-gray-100 dark:bg-gray-700",children:[b.jsxs("div",{className:"flex items-center",children:[b.jsx("img",{src:t.imageurl,alt:t.title,className:"w-16 h-16 rounded-full object-cover bg-white p-2"}),b.jsxs("div",{children:[b.jsx("h3",{className:"text-xl font-bold ml-4 dark:text-gray-100",children:t.title}),b.jsx("h7",{className:"text-sm m-4 text-gray-400 dark:text-gray-400",children:"tags: "+t.categories.replaceAll("|",", ")})]})]}),b.jsx("div",{className:"w-full bg-gray-3 dark:bg-gray-600",style:{height:"1px",margin:"10px 0"}}),b.jsx("p",{className:"text-gray-600 my-2 dark:text-gray-100",children:t.body}),b.jsxs("div",{className:"flex items-center text-gray-600 dark:text-gray-100",children:[b.jsx("img",{className:"w-6 h-6 mr-2 rounded-full",src:t.source_info.img,alt:t.source_info.name}),b.jsx("span",{children:t.source_info.name})]})]})}function Vre(){const{t}=Jn(),e={Type:100,Message:"News list successfully returned",Promoted:[],Data:[{id:"23857346",guid:"https://coingape.com/?p=177570",published_on:1709223954,imageurl:"https://images.cryptocompare.com/news/default/coingape.png",title:"7 Best Cryptocurrency Futures Trading Platforms in 2024",url:"https://coingape.com/best-cryptocurrency-futures-trading-platforms/",body:"Crypto futures trading allows traders to predict future price movements and enter agreements to buy or sell assets at predetermined prices on future dates. However, it calls for traders to address and stay strong in the market with higher crypto volatility. In this segment, each market fluctuation becomes an opportunity  and whether you make The post 7 Best Cryptocurrency Futures Trading Platforms in 2024 appeared first on CoinGape .",tags:"Top",lang:"EN",upvotes:"0",downvotes:"0",categories:"TRADING|MARKET",source_info:{name:"CoinGape",img:"https://images.cryptocompare.com/news/default/coingape.png",lang:"EN"},source:"coingape"},{id:"23857348",guid:"https://coingape.com/?p=183309",published_on:1709223954,imageurl:"https://images.cryptocompare.com/news/default/coingape.png",title:"Bonk Crypto Price Prediction: Whales Set Sight on New ATH",url:"https://coingape.com/bonk-crypto-price-prediction-whales-set-sight-on-new-ath/",body:"In an intriguing turn of events, aligning with the bullish sentiment prevailing within the broader crypto market, Bonk, a meme coin, gained significant traction across the global crypto realm as it surged nearly 30% today, February 29. This surge by the meme coin promptly garnered noteworthy attention as a Smart Moneys accumulation, pushing the price The post Bonk Crypto Price Prediction: Whales Set Sight on New ATH appeared first on CoinGape .",tags:"24/7 Cryptocurrency News|Altcoin News|Bonk (BONK)",lang:"EN",upvotes:"0",downvotes:"0",categories:"TRADING|MARKET",source_info:{name:"CoinGape",img:"https://images.cryptocompare.com/news/default/coingape.png",lang:"EN"},source:"coingape"},{id:"23857807",guid:"https://coingape.com/?post_type=trending&p=183305",published_on:1709223850,imageurl:"https://images.cryptocompare.com/news/default/coingape.png",title:"Binance (BNB) Introduced VIP Programs For Non-Crypto Traders",url:"https://coingape.com/trending/binance-bnb-introduced-vip-programs-for-non-crypto-traders/",body:"Binance is the largest centralized exchange according to the trading volume and has its native token. To expand its reach, Binance has taken one more step, introducing the VIP program. This blog will cover what is this VIP program and how it will affect the BNB prices. Understanding the Binance (BNB) VIP Program Binance has The post Binance (BNB) Introduced VIP Programs For Non-Crypto Traders appeared first on CoinGape .",tags:"24/7 Cryptocurrency News|Binance (BNB) Coin|binance lawsuit|trending news",lang:"EN",upvotes:"0",downvotes:"0",categories:"EXCHANGE|ICO|TRADING",source_info:{name:"CoinGape",img:"https://images.cryptocompare.com/news/default/coingape.png",lang:"EN"},source:"coingape"}]};return b.jsxs("div",{className:"m-10 text-slate-950 dark:text-white",children:[b.jsx("h1",{className:"mb-5 text-3xl font-bold",children:t("latestNews")}),b.jsx("div",{className:"scrollable-content overflow-y-auto rounded-lg border-2 grid gap-4 border-gray-300 dark:border-gray-600 p-4",style:{height:"calc(100vh - 170px)"},children:e.Data.map(n=>b.jsx(Mre,{news_object:n}))})]})}function Fre(){const{t}=Jn();return b.jsx("div",{className:"m-10 text-slate-950 dark:text-white",children:b.jsx("h1",{className:"mb-5 text-3xl font-bold",children:t("compareCurrencies")})})}function $re(){const{t}=Jn();return b.jsxs("div",{className:"text-slate-950 dark:text-white flex justify-center items-center pb-28",style:{height:"calc(100vh - 72px)"},children:[b.jsx(GL,{}),b.jsxs("div",{className:"text-center",children:[b.jsx("h1",{className:"mb-5 text-6xl font-thin",children:t("welcomeTo")}),b.jsx("h1",{className:"mb-5 text-8xl font-bold",children:t("cryptoPulse")})]})]})}const QR=({isAuthenticated:t,children:e})=>t?b.jsx(du,{to:"/home",replace:!0}):e;function Ure(){const[t,e]=cb(ub),{currentUser:n}=YL();return U.useEffect(()=>{localStorage.theme==="dark"||!("theme"in localStorage)&&window.matchMedia("(prefers-color-scheme: dark)").matches?(document.documentElement.classList.add("dark"),e({...t,theme:"dark"})):(document.documentElement.classList.remove("dark"),e({...t,theme:"light"}))},[]),b.jsx("div",{className:"App",children:b.jsxs(P4,{children:[b.jsxs($n,{path:"welcome",element:b.jsxs(QR,{isAuthenticated:n,children:[b.jsx(TJ,{}),b.jsx(MP,{})]}),children:[b.jsx($n,{path:"",element:b.jsx($re,{})}),b.jsx($n,{path:"login",element:b.jsx(IJ,{})}),b.jsx($n,{path:"signup",element:b.jsx(xJ,{})}),b.jsx($n,{path:"*",element:b.jsx(du,{replace:!0,to:""})})]}),b.jsxs($n,{path:"home",element:b.jsx(vJ,{isAuthenticated:n}),children:[b.jsx($n,{index:!0,element:b.jsx(EJ,{})}),b.jsx($n,{path:"coins",element:b.jsx(Lre,{})}),b.jsx($n,{path:"news",element:b.jsx(Vre,{})}),b.jsx($n,{path:"compare",element:b.jsx(Fre,{})}),b.jsx($n,{path:"*",element:b.jsx(du,{replace:!0,to:""})})]}),b.jsx($n,{path:"*",element:b.jsx(QR,{isAuthenticated:n,children:b.jsx(du,{replace:!0,to:"/welcome"})})})]})})}function q0(t){"@babel/helpers - typeof";return q0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},q0(t)}function GM(){return typeof XMLHttpRequest=="function"||(typeof XMLHttpRequest>"u"?"undefined":q0(XMLHttpRequest))==="object"}function Bre(t){return!!t&&typeof t.then=="function"}function jre(t){return Bre(t)?t:Promise.resolve(t)}function zre(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var K0={exports:{}},Rf={exports:{}},YR;function Wre(){return YR||(YR=1,function(t,e){var n=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof nu<"u"&&nu,r=function(){function s(){this.fetch=!1,this.DOMException=n.DOMException}return s.prototype=n,new s}();(function(s){(function(o){var a=typeof s<"u"&&s||typeof self<"u"&&self||typeof a<"u"&&a,l={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function c(I){return I&&DataView.prototype.isPrototypeOf(I)}if(l.arrayBuffer)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],h=ArrayBuffer.isView||function(I){return I&&u.indexOf(Object.prototype.toString.call(I))>-1};function d(I){if(typeof I!="string"&&(I=String(I)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(I)||I==="")throw new TypeError('Invalid character in header field name: "'+I+'"');return I.toLowerCase()}function f(I){return typeof I!="string"&&(I=String(I)),I}function p(I){var N={next:function(){var G=I.shift();return{done:G===void 0,value:G}}};return l.iterable&&(N[Symbol.iterator]=function(){return N}),N}function g(I){this.map={},I instanceof g?I.forEach(function(N,G){this.append(G,N)},this):Array.isArray(I)?I.forEach(function(N){this.append(N[0],N[1])},this):I&&Object.getOwnPropertyNames(I).forEach(function(N){this.append(N,I[N])},this)}g.prototype.append=function(I,N){I=d(I),N=f(N);var G=this.map[I];this.map[I]=G?G+", "+N:N},g.prototype.delete=function(I){delete this.map[d(I)]},g.prototype.get=function(I){return I=d(I),this.has(I)?this.map[I]:null},g.prototype.has=function(I){return this.map.hasOwnProperty(d(I))},g.prototype.set=function(I,N){this.map[d(I)]=f(N)},g.prototype.forEach=function(I,N){for(var G in this.map)this.map.hasOwnProperty(G)&&I.call(N,this.map[G],G,this)},g.prototype.keys=function(){var I=[];return this.forEach(function(N,G){I.push(G)}),p(I)},g.prototype.values=function(){var I=[];return this.forEach(function(N){I.push(N)}),p(I)},g.prototype.entries=function(){var I=[];return this.forEach(function(N,G){I.push([G,N])}),p(I)},l.iterable&&(g.prototype[Symbol.iterator]=g.prototype.entries);function _(I){if(I.bodyUsed)return Promise.reject(new TypeError("Already read"));I.bodyUsed=!0}function y(I){return new Promise(function(N,G){I.onload=function(){N(I.result)},I.onerror=function(){G(I.error)}})}function m(I){var N=new FileReader,G=y(N);return N.readAsArrayBuffer(I),G}function v(I){var N=new FileReader,G=y(N);return N.readAsText(I),G}function w(I){for(var N=new Uint8Array(I),G=new Array(N.length),D=0;D<N.length;D++)G[D]=String.fromCharCode(N[D]);return G.join("")}function S(I){if(I.slice)return I.slice(0);var N=new Uint8Array(I.byteLength);return N.set(new Uint8Array(I)),N.buffer}function E(){return this.bodyUsed=!1,this._initBody=function(I){this.bodyUsed=this.bodyUsed,this._bodyInit=I,I?typeof I=="string"?this._bodyText=I:l.blob&&Blob.prototype.isPrototypeOf(I)?this._bodyBlob=I:l.formData&&FormData.prototype.isPrototypeOf(I)?this._bodyFormData=I:l.searchParams&&URLSearchParams.prototype.isPrototypeOf(I)?this._bodyText=I.toString():l.arrayBuffer&&l.blob&&c(I)?(this._bodyArrayBuffer=S(I.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):l.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(I)||h(I))?this._bodyArrayBuffer=S(I):this._bodyText=I=Object.prototype.toString.call(I):this._bodyText="",this.headers.get("content-type")||(typeof I=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):l.searchParams&&URLSearchParams.prototype.isPrototypeOf(I)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},l.blob&&(this.blob=function(){var I=_(this);if(I)return I;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var I=_(this);return I||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else return this.blob().then(m)}),this.text=function(){var I=_(this);if(I)return I;if(this._bodyBlob)return v(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(w(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},l.formData&&(this.formData=function(){return this.text().then(L)}),this.json=function(){return this.text().then(JSON.parse)},this}var T=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function A(I){var N=I.toUpperCase();return T.indexOf(N)>-1?N:I}function $(I,N){if(!(this instanceof $))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');N=N||{};var G=N.body;if(I instanceof $){if(I.bodyUsed)throw new TypeError("Already read");this.url=I.url,this.credentials=I.credentials,N.headers||(this.headers=new g(I.headers)),this.method=I.method,this.mode=I.mode,this.signal=I.signal,!G&&I._bodyInit!=null&&(G=I._bodyInit,I.bodyUsed=!0)}else this.url=String(I);if(this.credentials=N.credentials||this.credentials||"same-origin",(N.headers||!this.headers)&&(this.headers=new g(N.headers)),this.method=A(N.method||this.method||"GET"),this.mode=N.mode||this.mode||null,this.signal=N.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&G)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(G),(this.method==="GET"||this.method==="HEAD")&&(N.cache==="no-store"||N.cache==="no-cache")){var D=/([?&])_=[^&]*/;if(D.test(this.url))this.url=this.url.replace(D,"$1_="+new Date().getTime());else{var B=/\?/;this.url+=(B.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}$.prototype.clone=function(){return new $(this,{body:this._bodyInit})};function L(I){var N=new FormData;return I.trim().split("&").forEach(function(G){if(G){var D=G.split("="),B=D.shift().replace(/\+/g," "),O=D.join("=").replace(/\+/g," ");N.append(decodeURIComponent(B),decodeURIComponent(O))}}),N}function ee(I){var N=new g,G=I.replace(/\r?\n[\t ]+/g," ");return G.split("\r").map(function(D){return D.indexOf(`
`)===0?D.substr(1,D.length):D}).forEach(function(D){var B=D.split(":"),O=B.shift().trim();if(O){var re=B.join(":").trim();N.append(O,re)}}),N}E.call($.prototype);function se(I,N){if(!(this instanceof se))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');N||(N={}),this.type="default",this.status=N.status===void 0?200:N.status,this.ok=this.status>=200&&this.status<300,this.statusText=N.statusText===void 0?"":""+N.statusText,this.headers=new g(N.headers),this.url=N.url||"",this._initBody(I)}E.call(se.prototype),se.prototype.clone=function(){return new se(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new g(this.headers),url:this.url})},se.error=function(){var I=new se(null,{status:0,statusText:""});return I.type="error",I};var he=[301,302,303,307,308];se.redirect=function(I,N){if(he.indexOf(N)===-1)throw new RangeError("Invalid status code");return new se(null,{status:N,headers:{location:I}})},o.DOMException=a.DOMException;try{new o.DOMException}catch{o.DOMException=function(N,G){this.message=N,this.name=G;var D=Error(N);this.stack=D.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function be(I,N){return new Promise(function(G,D){var B=new $(I,N);if(B.signal&&B.signal.aborted)return D(new o.DOMException("Aborted","AbortError"));var O=new XMLHttpRequest;function re(){O.abort()}O.onload=function(){var V={status:O.status,statusText:O.statusText,headers:ee(O.getAllResponseHeaders()||"")};V.url="responseURL"in O?O.responseURL:V.headers.get("X-Request-URL");var j="response"in O?O.response:O.responseText;setTimeout(function(){G(new se(j,V))},0)},O.onerror=function(){setTimeout(function(){D(new TypeError("Network request failed"))},0)},O.ontimeout=function(){setTimeout(function(){D(new TypeError("Network request failed"))},0)},O.onabort=function(){setTimeout(function(){D(new o.DOMException("Aborted","AbortError"))},0)};function R(V){try{return V===""&&a.location.href?a.location.href:V}catch{return V}}O.open(B.method,R(B.url),!0),B.credentials==="include"?O.withCredentials=!0:B.credentials==="omit"&&(O.withCredentials=!1),"responseType"in O&&(l.blob?O.responseType="blob":l.arrayBuffer&&B.headers.get("Content-Type")&&B.headers.get("Content-Type").indexOf("application/octet-stream")!==-1&&(O.responseType="arraybuffer")),N&&typeof N.headers=="object"&&!(N.headers instanceof g)?Object.getOwnPropertyNames(N.headers).forEach(function(V){O.setRequestHeader(V,f(N.headers[V]))}):B.headers.forEach(function(V,j){O.setRequestHeader(j,V)}),B.signal&&(B.signal.addEventListener("abort",re),O.onreadystatechange=function(){O.readyState===4&&B.signal.removeEventListener("abort",re)}),O.send(typeof B._bodyInit>"u"?null:B._bodyInit)})}return be.polyfill=!0,a.fetch||(a.fetch=be,a.Headers=g,a.Request=$,a.Response=se),o.Headers=g,o.Request=$,o.Response=se,o.fetch=be,o})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var i=n.fetch?n:r;e=i.fetch,e.default=i.fetch,e.fetch=i.fetch,e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response,t.exports=e}(Rf,Rf.exports)),Rf.exports}(function(t,e){var n;if(typeof fetch=="function"&&(typeof nu<"u"&&nu.fetch?n=nu.fetch:typeof window<"u"&&window.fetch?n=window.fetch:n=fetch),typeof zre<"u"&&(typeof window>"u"||typeof window.document>"u")){var r=n||Wre();r.default&&(r=r.default),e.default=r,t.exports=e.default}})(K0,K0.exports);var QM=K0.exports;const YM=Q0(QM),XR=cA({__proto__:null,default:YM},[QM]);function JR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ZR(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?JR(Object(n),!0).forEach(function(r){Hre(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):JR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Hre(t,e,n){return e=qre(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qre(t){var e=Kre(t,"string");return Qo(e)=="symbol"?e:String(e)}function Kre(t,e){if(Qo(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Qo(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Qo(t){"@babel/helpers - typeof";return Qo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qo(t)}var wi;typeof fetch=="function"&&(typeof global<"u"&&global.fetch?wi=global.fetch:typeof window<"u"&&window.fetch?wi=window.fetch:wi=fetch);var Vh;GM()&&(typeof global<"u"&&global.XMLHttpRequest?Vh=global.XMLHttpRequest:typeof window<"u"&&window.XMLHttpRequest&&(Vh=window.XMLHttpRequest));var bg;typeof ActiveXObject=="function"&&(typeof global<"u"&&global.ActiveXObject?bg=global.ActiveXObject:typeof window<"u"&&window.ActiveXObject&&(bg=window.ActiveXObject));!wi&&XR&&!Vh&&!bg&&(wi=YM||XR);typeof wi!="function"&&(wi=void 0);var G0=function(e,n){if(n&&Qo(n)==="object"){var r="";for(var i in n)r+="&"+encodeURIComponent(i)+"="+encodeURIComponent(n[i]);if(!r)return e;e=e+(e.indexOf("?")!==-1?"&":"?")+r.slice(1)}return e},eA=function(e,n,r,i){var s=function(l){if(!l.ok)return r(l.statusText||"Error",{status:l.status});l.text().then(function(c){r(null,{status:l.status,data:c})}).catch(r)};if(i){var o=i(e,n);if(o instanceof Promise){o.then(s).catch(r);return}}typeof fetch=="function"?fetch(e,n).then(s).catch(r):wi(e,n).then(s).catch(r)},tA=!1,Gre=function(e,n,r,i){e.queryStringParams&&(n=G0(n,e.queryStringParams));var s=ZR({},typeof e.customHeaders=="function"?e.customHeaders():e.customHeaders);typeof window>"u"&&typeof global<"u"&&typeof global.process<"u"&&global.process.versions&&global.process.versions.node&&(s["User-Agent"]="i18next-http-backend (node/".concat(global.process.version,"; ").concat(global.process.platform," ").concat(global.process.arch,")")),r&&(s["Content-Type"]="application/json");var o=typeof e.requestOptions=="function"?e.requestOptions(r):e.requestOptions,a=ZR({method:r?"POST":"GET",body:r?e.stringify(r):void 0,headers:s},tA?{}:o),l=typeof e.alternateFetch=="function"&&e.alternateFetch.length>=1?e.alternateFetch:void 0;try{eA(n,a,i,l)}catch(c){if(!o||Object.keys(o).length===0||!c.message||c.message.indexOf("not implemented")<0)return i(c);try{Object.keys(o).forEach(function(u){delete a[u]}),eA(n,a,i,l),tA=!0}catch(u){i(u)}}},Qre=function(e,n,r,i){r&&Qo(r)==="object"&&(r=G0("",r).slice(1)),e.queryStringParams&&(n=G0(n,e.queryStringParams));try{var s;Vh?s=new Vh:s=new bg("MSXML2.XMLHTTP.3.0"),s.open(r?"POST":"GET",n,1),e.crossDomain||s.setRequestHeader("X-Requested-With","XMLHttpRequest"),s.withCredentials=!!e.withCredentials,r&&s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s.overrideMimeType&&s.overrideMimeType("application/json");var o=e.customHeaders;if(o=typeof o=="function"?o():o,o)for(var a in o)s.setRequestHeader(a,o[a]);s.onreadystatechange=function(){s.readyState>3&&i(s.status>=400?s.statusText:null,{status:s.status,data:s.responseText})},s.send(r)}catch(l){console&&console.log(l)}},Yre=function(e,n,r,i){if(typeof r=="function"&&(i=r,r=void 0),i=i||function(){},wi&&n.indexOf("file:")!==0)return Gre(e,n,r,i);if(GM()||typeof ActiveXObject=="function")return Qre(e,n,r,i);i(new Error("No fetch and no xhr implementation found!"))};function Fh(t){"@babel/helpers - typeof";return Fh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fh(t)}function nA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function R_(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?nA(Object(n),!0).forEach(function(r){XM(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Xre(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function rA(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,JM(r.key),r)}}function Jre(t,e,n){return e&&rA(t.prototype,e),n&&rA(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function XM(t,e,n){return e=JM(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function JM(t){var e=Zre(t,"string");return Fh(e)=="symbol"?e:String(e)}function Zre(t,e){if(Fh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Fh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var eie=function(){return{loadPath:"/locales/{{lng}}/{{ns}}.json",addPath:"/locales/add/{{lng}}/{{ns}}",parse:function(n){return JSON.parse(n)},stringify:JSON.stringify,parsePayload:function(n,r,i){return XM({},r,i||"")},parseLoadPayload:function(n,r){},request:Yre,reloadInterval:typeof window<"u"?!1:60*60*1e3,customHeaders:{},queryStringParams:{},crossDomain:!1,withCredentials:!1,overrideMimeType:!1,requestOptions:{mode:"cors",credentials:"same-origin",cache:"default"}}},ZM=function(){function t(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Xre(this,t),this.services=e,this.options=n,this.allOptions=r,this.type="backend",this.init(e,n,r)}return Jre(t,[{key:"init",value:function(n){var r=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=n,this.options=R_(R_(R_({},eie()),this.options||{}),i),this.allOptions=s,this.services&&this.options.reloadInterval&&setInterval(function(){return r.reload()},this.options.reloadInterval)}},{key:"readMulti",value:function(n,r,i){this._readAny(n,n,r,r,i)}},{key:"read",value:function(n,r,i){this._readAny([n],n,[r],r,i)}},{key:"_readAny",value:function(n,r,i,s,o){var a=this,l=this.options.loadPath;typeof this.options.loadPath=="function"&&(l=this.options.loadPath(n,i)),l=jre(l),l.then(function(c){if(!c)return o(null,{});var u=a.services.interpolator.interpolate(c,{lng:n.join("+"),ns:i.join("+")});a.loadUrl(u,o,r,s)})}},{key:"loadUrl",value:function(n,r,i,s){var o=this,a=typeof i=="string"?[i]:i,l=typeof s=="string"?[s]:s,c=this.options.parseLoadPayload(a,l);this.options.request(this.options,n,c,function(u,h){if(h&&(h.status>=500&&h.status<600||!h.status))return r("failed loading "+n+"; status code: "+h.status,!0);if(h&&h.status>=400&&h.status<500)return r("failed loading "+n+"; status code: "+h.status,!1);if(!h&&u&&u.message&&u.message.indexOf("Failed to fetch")>-1)return r("failed loading "+n+": "+u.message,!0);if(u)return r(u,!1);var d,f;try{typeof h.data=="string"?d=o.options.parse(h.data,i,s):d=h.data}catch{f="failed parsing "+n+" to json"}if(f)return r(f,!1);r(null,d)})}},{key:"create",value:function(n,r,i,s,o){var a=this;if(this.options.addPath){typeof n=="string"&&(n=[n]);var l=this.options.parsePayload(r,i,s),c=0,u=[],h=[];n.forEach(function(d){var f=a.options.addPath;typeof a.options.addPath=="function"&&(f=a.options.addPath(d,r));var p=a.services.interpolator.interpolate(f,{lng:d,ns:r});a.options.request(a.options,p,l,function(g,_){c+=1,u.push(g),h.push(_),c===n.length&&typeof o=="function"&&o(u,h)})})}}},{key:"reload",value:function(){var n=this,r=this.services,i=r.backendConnector,s=r.languageUtils,o=r.logger,a=i.language;if(!(a&&a.toLowerCase()==="cimode")){var l=[],c=function(h){var d=s.toResolveHierarchy(h);d.forEach(function(f){l.indexOf(f)<0&&l.push(f)})};c(a),this.allOptions.preload&&this.allOptions.preload.forEach(function(u){return c(u)}),l.forEach(function(u){n.allOptions.ns.forEach(function(h){i.read(u,h,"read",null,null,function(d,f){d&&o.warn("loading namespace ".concat(h," for language ").concat(u," failed"),d),!d&&f&&o.log("loaded namespace ".concat(h," for language ").concat(u),f),i.loaded("".concat(u,"|").concat(h),d,f)})})})}}}]),t}();ZM.type="backend";function tie(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $h(t){"@babel/helpers - typeof";return $h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$h(t)}function nie(t,e){if($h(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if($h(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function rie(t){var e=nie(t,"string");return $h(e)=="symbol"?e:e+""}function iA(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,rie(r.key),r)}}function iie(t,e,n){return e&&iA(t.prototype,e),n&&iA(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var eV=[],sie=eV.forEach,oie=eV.slice;function aie(t){return sie.call(oie.call(arguments,1),function(e){if(e)for(var n in e)t[n]===void 0&&(t[n]=e[n])}),t}var sA=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,lie=function(e,n,r){var i=r||{};i.path=i.path||"/";var s=encodeURIComponent(n),o="".concat(e,"=").concat(s);if(i.maxAge>0){var a=i.maxAge-0;if(Number.isNaN(a))throw new Error("maxAge should be a Number");o+="; Max-Age=".concat(Math.floor(a))}if(i.domain){if(!sA.test(i.domain))throw new TypeError("option domain is invalid");o+="; Domain=".concat(i.domain)}if(i.path){if(!sA.test(i.path))throw new TypeError("option path is invalid");o+="; Path=".concat(i.path)}if(i.expires){if(typeof i.expires.toUTCString!="function")throw new TypeError("option expires is invalid");o+="; Expires=".concat(i.expires.toUTCString())}if(i.httpOnly&&(o+="; HttpOnly"),i.secure&&(o+="; Secure"),i.sameSite){var l=typeof i.sameSite=="string"?i.sameSite.toLowerCase():i.sameSite;switch(l){case!0:o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"strict":o+="; SameSite=Strict";break;case"none":o+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return o},oA={create:function(e,n,r,i){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};r&&(s.expires=new Date,s.expires.setTime(s.expires.getTime()+r*60*1e3)),i&&(s.domain=i),document.cookie=lie(e,encodeURIComponent(n),s)},read:function(e){for(var n="".concat(e,"="),r=document.cookie.split(";"),i=0;i<r.length;i++){for(var s=r[i];s.charAt(0)===" ";)s=s.substring(1,s.length);if(s.indexOf(n)===0)return s.substring(n.length,s.length)}return null},remove:function(e){this.create(e,"",-1)}},cie={name:"cookie",lookup:function(e){var n;if(e.lookupCookie&&typeof document<"u"){var r=oA.read(e.lookupCookie);r&&(n=r)}return n},cacheUserLanguage:function(e,n){n.lookupCookie&&typeof document<"u"&&oA.create(n.lookupCookie,e,n.cookieMinutes,n.cookieDomain,n.cookieOptions)}},uie={name:"querystring",lookup:function(e){var n;if(typeof window<"u"){var r=window.location.search;!window.location.search&&window.location.hash&&window.location.hash.indexOf("?")>-1&&(r=window.location.hash.substring(window.location.hash.indexOf("?")));for(var i=r.substring(1),s=i.split("&"),o=0;o<s.length;o++){var a=s[o].indexOf("=");if(a>0){var l=s[o].substring(0,a);l===e.lookupQuerystring&&(n=s[o].substring(a+1))}}}return n}},Lc=null,aA=function(){if(Lc!==null)return Lc;try{Lc=window!=="undefined"&&window.localStorage!==null;var e="i18next.translate.boo";window.localStorage.setItem(e,"foo"),window.localStorage.removeItem(e)}catch{Lc=!1}return Lc},hie={name:"localStorage",lookup:function(e){var n;if(e.lookupLocalStorage&&aA()){var r=window.localStorage.getItem(e.lookupLocalStorage);r&&(n=r)}return n},cacheUserLanguage:function(e,n){n.lookupLocalStorage&&aA()&&window.localStorage.setItem(n.lookupLocalStorage,e)}},Mc=null,lA=function(){if(Mc!==null)return Mc;try{Mc=window!=="undefined"&&window.sessionStorage!==null;var e="i18next.translate.boo";window.sessionStorage.setItem(e,"foo"),window.sessionStorage.removeItem(e)}catch{Mc=!1}return Mc},die={name:"sessionStorage",lookup:function(e){var n;if(e.lookupSessionStorage&&lA()){var r=window.sessionStorage.getItem(e.lookupSessionStorage);r&&(n=r)}return n},cacheUserLanguage:function(e,n){n.lookupSessionStorage&&lA()&&window.sessionStorage.setItem(n.lookupSessionStorage,e)}},fie={name:"navigator",lookup:function(e){var n=[];if(typeof navigator<"u"){if(navigator.languages)for(var r=0;r<navigator.languages.length;r++)n.push(navigator.languages[r]);navigator.userLanguage&&n.push(navigator.userLanguage),navigator.language&&n.push(navigator.language)}return n.length>0?n:void 0}},pie={name:"htmlTag",lookup:function(e){var n,r=e.htmlTag||(typeof document<"u"?document.documentElement:null);return r&&typeof r.getAttribute=="function"&&(n=r.getAttribute("lang")),n}},gie={name:"path",lookup:function(e){var n;if(typeof window<"u"){var r=window.location.pathname.match(/\/([a-zA-Z-]*)/g);if(r instanceof Array)if(typeof e.lookupFromPathIndex=="number"){if(typeof r[e.lookupFromPathIndex]!="string")return;n=r[e.lookupFromPathIndex].replace("/","")}else n=r[0].replace("/","")}return n}},mie={name:"subdomain",lookup:function(e){var n=typeof e.lookupFromSubdomainIndex=="number"?e.lookupFromSubdomainIndex+1:1,r=typeof window<"u"&&window.location&&window.location.hostname&&window.location.hostname.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i);if(r)return r[n]}};function yie(){return{order:["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"],lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:function(e){return e}}}var tV=function(){function t(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};tie(this,t),this.type="languageDetector",this.detectors={},this.init(e,n)}return iie(t,[{key:"init",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=n||{languageUtils:{}},this.options=aie(r,this.options||{},yie()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=function(s){return s.replace("-","_")}),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=i,this.addDetector(cie),this.addDetector(uie),this.addDetector(hie),this.addDetector(die),this.addDetector(fie),this.addDetector(pie),this.addDetector(gie),this.addDetector(mie)}},{key:"addDetector",value:function(n){this.detectors[n.name]=n}},{key:"detect",value:function(n){var r=this;n||(n=this.options.order);var i=[];return n.forEach(function(s){if(r.detectors[s]){var o=r.detectors[s].lookup(r.options);o&&typeof o=="string"&&(o=[o]),o&&(i=i.concat(o))}}),i=i.map(function(s){return r.options.convertDetectedLanguage(s)}),this.services.languageUtils.getBestMatchFromCodes?i:i.length>0?i[0]:null}},{key:"cacheUserLanguage",value:function(n,r){var i=this;r||(r=this.options.caches),r&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(n)>-1||r.forEach(function(s){i.detectors[s]&&i.detectors[s].cacheUserLanguage(n,i.options)}))}}]),t}();tV.type="languageDetector";$e.use(ZM).use(tV).use(Fj).init({supportedLngs:["en","it","zh","de"],fallbackLng:"en",detection:{order:["querystring","cookie","localStorage","path","subdomain"],caches:["cookie"]},backend:{loadPath:"/locales/{{lng}}/{{ns}}.json"}});const _ie=A_.createRoot(document.getElementById("root"));_ie.render(b.jsx(We.StrictMode,{children:b.jsx(D4,{children:b.jsx(Tj,{children:b.jsx(SJ,{children:b.jsx(Ure,{})})})})}));
